var a$=Object.defineProperty;var s$=(cr,vn,yn)=>vn in cr?a$(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn;var V1=(cr,vn,yn)=>(s$(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const p$G=function(){const vn=document.createElement("link").relList;if(vn&&vn.supports&&vn.supports("modulepreload"))return;for(const Bn of document.querySelectorAll('link[rel="modulepreload"]'))Rn(Bn);new MutationObserver(Bn=>{for(const Co of Bn)if(Co.type==="childList")for(const Po of Co.addedNodes)Po.tagName==="LINK"&&Po.rel==="modulepreload"&&Rn(Po)}).observe(document,{childList:!0,subtree:!0});function yn(Bn){const Co={};return Bn.integrity&&(Co.integrity=Bn.integrity),Bn.referrerpolicy&&(Co.referrerPolicy=Bn.referrerpolicy),Bn.crossorigin==="use-credentials"?Co.credentials="include":Bn.crossorigin==="anonymous"?Co.credentials="omit":Co.credentials="same-origin",Co}function Rn(Bn){if(Bn.ep)return;Bn.ep=!0;const Co=yn(Bn);fetch(Bn.href,Co)}};p$G();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$y=Symbol.for("react.element"),n$y=Symbol.for("react.portal"),p$F=Symbol.for("react.fragment"),q$r=Symbol.for("react.strict_mode"),r$G=Symbol.for("react.profiler"),t$l=Symbol.for("react.provider"),u$B=Symbol.for("react.context"),v$A=Symbol.for("react.forward_ref"),w$s=Symbol.for("react.suspense"),x$v=Symbol.for("react.memo"),y$y=Symbol.for("react.lazy"),z$m=Symbol.iterator;function A$C(cr){return cr===null||typeof cr!="object"?null:(cr=z$m&&cr[z$m]||cr["@@iterator"],typeof cr=="function"?cr:null)}var B$u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$s=Object.assign,D$t={};function E$z(cr,vn,yn){this.props=cr,this.context=vn,this.refs=D$t,this.updater=yn||B$u}E$z.prototype.isReactComponent={};E$z.prototype.setState=function(cr,vn){if(typeof cr!="object"&&typeof cr!="function"&&cr!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,cr,vn,"setState")};E$z.prototype.forceUpdate=function(cr){this.updater.enqueueForceUpdate(this,cr,"forceUpdate")};function F$m(){}F$m.prototype=E$z.prototype;function G$i(cr,vn,yn){this.props=cr,this.context=vn,this.refs=D$t,this.updater=yn||B$u}var H$t=G$i.prototype=new F$m;H$t.constructor=G$i;C$s(H$t,E$z.prototype);H$t.isPureReactComponent=!0;var I$t=Array.isArray,J$l=Object.prototype.hasOwnProperty,K$l={current:null},L$r={key:!0,ref:!0,__self:!0,__source:!0};function M$x(cr,vn,yn){var Rn,Bn={},Co=null,Po=null;if(vn!=null)for(Rn in vn.ref!==void 0&&(Po=vn.ref),vn.key!==void 0&&(Co=""+vn.key),vn)J$l.call(vn,Rn)&&!L$r.hasOwnProperty(Rn)&&(Bn[Rn]=vn[Rn]);var To=arguments.length-2;if(To===1)Bn.children=yn;else if(1<To){for(var Io=Array(To),$l=0;$l<To;$l++)Io[$l]=arguments[$l+2];Bn.children=Io}if(cr&&cr.defaultProps)for(Rn in To=cr.defaultProps,To)Bn[Rn]===void 0&&(Bn[Rn]=To[Rn]);return{$$typeof:l$y,type:cr,key:Co,ref:Po,props:Bn,_owner:K$l.current}}function N$j(cr,vn){return{$$typeof:l$y,type:cr.type,key:vn,ref:cr.ref,props:cr.props,_owner:cr._owner}}function O$p(cr){return typeof cr=="object"&&cr!==null&&cr.$$typeof===l$y}function escape$1(cr){var vn={"=":"=0",":":"=2"};return"$"+cr.replace(/[=:]/g,function(yn){return vn[yn]})}var P$z=/\/+/g;function Q$g(cr,vn){return typeof cr=="object"&&cr!==null&&cr.key!=null?escape$1(""+cr.key):vn.toString(36)}function R$s(cr,vn,yn,Rn,Bn){var Co=typeof cr;(Co==="undefined"||Co==="boolean")&&(cr=null);var Po=!1;if(cr===null)Po=!0;else switch(Co){case"string":case"number":Po=!0;break;case"object":switch(cr.$$typeof){case l$y:case n$y:Po=!0}}if(Po)return Po=cr,Bn=Bn(Po),cr=Rn===""?"."+Q$g(Po,0):Rn,I$t(Bn)?(yn="",cr!=null&&(yn=cr.replace(P$z,"$&/")+"/"),R$s(Bn,vn,yn,"",function($l){return $l})):Bn!=null&&(O$p(Bn)&&(Bn=N$j(Bn,yn+(!Bn.key||Po&&Po.key===Bn.key?"":(""+Bn.key).replace(P$z,"$&/")+"/")+cr)),vn.push(Bn)),1;if(Po=0,Rn=Rn===""?".":Rn+":",I$t(cr))for(var To=0;To<cr.length;To++){Co=cr[To];var Io=Rn+Q$g(Co,To);Po+=R$s(Co,vn,yn,Io,Bn)}else if(Io=A$C(cr),typeof Io=="function")for(cr=Io.call(cr),To=0;!(Co=cr.next()).done;)Co=Co.value,Io=Rn+Q$g(Co,To++),Po+=R$s(Co,vn,yn,Io,Bn);else if(Co==="object")throw vn=String(cr),Error("Objects are not valid as a React child (found: "+(vn==="[object Object]"?"object with keys {"+Object.keys(cr).join(", ")+"}":vn)+"). If you meant to render a collection of children, use an array instead.");return Po}function S$w(cr,vn,yn){if(cr==null)return cr;var Rn=[],Bn=0;return R$s(cr,Rn,"","",function(Co){return vn.call(yn,Co,Bn++)}),Rn}function T$p(cr){if(cr._status===-1){var vn=cr._result;vn=vn(),vn.then(function(yn){(cr._status===0||cr._status===-1)&&(cr._status=1,cr._result=yn)},function(yn){(cr._status===0||cr._status===-1)&&(cr._status=2,cr._result=yn)}),cr._status===-1&&(cr._status=0,cr._result=vn)}if(cr._status===1)return cr._result.default;throw cr._result}var U$i={current:null},V$f={transition:null},W$i={ReactCurrentDispatcher:U$i,ReactCurrentBatchConfig:V$f,ReactCurrentOwner:K$l};function X$e(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$w,forEach:function(cr,vn,yn){S$w(cr,function(){vn.apply(this,arguments)},yn)},count:function(cr){var vn=0;return S$w(cr,function(){vn++}),vn},toArray:function(cr){return S$w(cr,function(vn){return vn})||[]},only:function(cr){if(!O$p(cr))throw Error("React.Children.only expected to receive a single React element child.");return cr}};react_production_min.Component=E$z;react_production_min.Fragment=p$F;react_production_min.Profiler=r$G;react_production_min.PureComponent=G$i;react_production_min.StrictMode=q$r;react_production_min.Suspense=w$s;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$i;react_production_min.act=X$e;react_production_min.cloneElement=function(cr,vn,yn){if(cr==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+cr+".");var Rn=C$s({},cr.props),Bn=cr.key,Co=cr.ref,Po=cr._owner;if(vn!=null){if(vn.ref!==void 0&&(Co=vn.ref,Po=K$l.current),vn.key!==void 0&&(Bn=""+vn.key),cr.type&&cr.type.defaultProps)var To=cr.type.defaultProps;for(Io in vn)J$l.call(vn,Io)&&!L$r.hasOwnProperty(Io)&&(Rn[Io]=vn[Io]===void 0&&To!==void 0?To[Io]:vn[Io])}var Io=arguments.length-2;if(Io===1)Rn.children=yn;else if(1<Io){To=Array(Io);for(var $l=0;$l<Io;$l++)To[$l]=arguments[$l+2];Rn.children=To}return{$$typeof:l$y,type:cr.type,key:Bn,ref:Co,props:Rn,_owner:Po}};react_production_min.createContext=function(cr){return cr={$$typeof:u$B,_currentValue:cr,_currentValue2:cr,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},cr.Provider={$$typeof:t$l,_context:cr},cr.Consumer=cr};react_production_min.createElement=M$x;react_production_min.createFactory=function(cr){var vn=M$x.bind(null,cr);return vn.type=cr,vn};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(cr){return{$$typeof:v$A,render:cr}};react_production_min.isValidElement=O$p;react_production_min.lazy=function(cr){return{$$typeof:y$y,_payload:{_status:-1,_result:cr},_init:T$p}};react_production_min.memo=function(cr,vn){return{$$typeof:x$v,type:cr,compare:vn===void 0?null:vn}};react_production_min.startTransition=function(cr){var vn=V$f.transition;V$f.transition={};try{cr()}finally{V$f.transition=vn}};react_production_min.unstable_act=X$e;react_production_min.useCallback=function(cr,vn){return U$i.current.useCallback(cr,vn)};react_production_min.useContext=function(cr){return U$i.current.useContext(cr)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(cr){return U$i.current.useDeferredValue(cr)};react_production_min.useEffect=function(cr,vn){return U$i.current.useEffect(cr,vn)};react_production_min.useId=function(){return U$i.current.useId()};react_production_min.useImperativeHandle=function(cr,vn,yn){return U$i.current.useImperativeHandle(cr,vn,yn)};react_production_min.useInsertionEffect=function(cr,vn){return U$i.current.useInsertionEffect(cr,vn)};react_production_min.useLayoutEffect=function(cr,vn){return U$i.current.useLayoutEffect(cr,vn)};react_production_min.useMemo=function(cr,vn){return U$i.current.useMemo(cr,vn)};react_production_min.useReducer=function(cr,vn,yn){return U$i.current.useReducer(cr,vn,yn)};react_production_min.useRef=function(cr){return U$i.current.useRef(cr)};react_production_min.useState=function(cr){return U$i.current.useState(cr)};react_production_min.useSyncExternalStore=function(cr,vn,yn){return U$i.current.useSyncExternalStore(cr,vn,yn)};react_production_min.useTransition=function(){return U$i.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var React=react.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(cr){function vn(wy,Cy){var My=wy.length;wy.push(Cy);e:for(;0<My;){var Py=My-1>>>1,Dy=wy[Py];if(0<Bn(Dy,Cy))wy[Py]=Cy,wy[My]=Dy,My=Py;else break e}}function yn(wy){return wy.length===0?null:wy[0]}function Rn(wy){if(wy.length===0)return null;var Cy=wy[0],My=wy.pop();if(My!==Cy){wy[0]=My;e:for(var Py=0,Dy=wy.length,qy=Dy>>>1;Py<qy;){var Xy=2*(Py+1)-1,$y=wy[Xy],xy=Xy+1,Ry=wy[xy];if(0>Bn($y,My))xy<Dy&&0>Bn(Ry,$y)?(wy[Py]=Ry,wy[xy]=My,Py=xy):(wy[Py]=$y,wy[Xy]=My,Py=Xy);else if(xy<Dy&&0>Bn(Ry,My))wy[Py]=Ry,wy[xy]=My,Py=xy;else break e}}return Cy}function Bn(wy,Cy){var My=wy.sortIndex-Cy.sortIndex;return My!==0?My:wy.id-Cy.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Co=performance;cr.unstable_now=function(){return Co.now()}}else{var Po=Date,To=Po.now();cr.unstable_now=function(){return Po.now()-To}}var Io=[],$l=[],Wl=1,Xl=null,Yl=3,Zl=!1,ey=!1,Rm=!1,ry=typeof setTimeout=="function"?setTimeout:null,_g=typeof clearTimeout=="function"?clearTimeout:null,ty=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ny(wy){for(var Cy=yn($l);Cy!==null;){if(Cy.callback===null)Rn($l);else if(Cy.startTime<=wy)Rn($l),Cy.sortIndex=Cy.expirationTime,vn(Io,Cy);else break;Cy=yn($l)}}function iy(wy){if(Rm=!1,ny(wy),!ey)if(yn(Io)!==null)ey=!0,Ay(oy);else{var Cy=yn($l);Cy!==null&&gy(iy,Cy.startTime-wy)}}function oy(wy,Cy){ey=!1,Rm&&(Rm=!1,_g(hy),hy=-1),Zl=!0;var My=Yl;try{for(ny(Cy),Xl=yn(Io);Xl!==null&&(!(Xl.expirationTime>Cy)||wy&&!sy());){var Py=Xl.callback;if(typeof Py=="function"){Xl.callback=null,Yl=Xl.priorityLevel;var Dy=Py(Xl.expirationTime<=Cy);Cy=cr.unstable_now(),typeof Dy=="function"?Xl.callback=Dy:Xl===yn(Io)&&Rn(Io),ny(Cy)}else Rn(Io);Xl=yn(Io)}if(Xl!==null)var qy=!0;else{var Xy=yn($l);Xy!==null&&gy(iy,Xy.startTime-Cy),qy=!1}return qy}finally{Xl=null,Yl=My,Zl=!1}}var ay=!1,uy=null,hy=-1,my=5,ly=-1;function sy(){return!(cr.unstable_now()-ly<my)}function cy(){if(uy!==null){var wy=cr.unstable_now();ly=wy;var Cy=!0;try{Cy=uy(!0,wy)}finally{Cy?fy():(ay=!1,uy=null)}}else ay=!1}var fy;if(typeof ty=="function")fy=function(){ty(cy)};else if(typeof MessageChannel!="undefined"){var vy=new MessageChannel,dy=vy.port2;vy.port1.onmessage=cy,fy=function(){dy.postMessage(null)}}else fy=function(){ry(cy,0)};function Ay(wy){uy=wy,ay||(ay=!0,fy())}function gy(wy,Cy){hy=ry(function(){wy(cr.unstable_now())},Cy)}cr.unstable_IdlePriority=5,cr.unstable_ImmediatePriority=1,cr.unstable_LowPriority=4,cr.unstable_NormalPriority=3,cr.unstable_Profiling=null,cr.unstable_UserBlockingPriority=2,cr.unstable_cancelCallback=function(wy){wy.callback=null},cr.unstable_continueExecution=function(){ey||Zl||(ey=!0,Ay(oy))},cr.unstable_forceFrameRate=function(wy){0>wy||125<wy?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):my=0<wy?Math.floor(1e3/wy):5},cr.unstable_getCurrentPriorityLevel=function(){return Yl},cr.unstable_getFirstCallbackNode=function(){return yn(Io)},cr.unstable_next=function(wy){switch(Yl){case 1:case 2:case 3:var Cy=3;break;default:Cy=Yl}var My=Yl;Yl=Cy;try{return wy()}finally{Yl=My}},cr.unstable_pauseExecution=function(){},cr.unstable_requestPaint=function(){},cr.unstable_runWithPriority=function(wy,Cy){switch(wy){case 1:case 2:case 3:case 4:case 5:break;default:wy=3}var My=Yl;Yl=wy;try{return Cy()}finally{Yl=My}},cr.unstable_scheduleCallback=function(wy,Cy,My){var Py=cr.unstable_now();switch(typeof My=="object"&&My!==null?(My=My.delay,My=typeof My=="number"&&0<My?Py+My:Py):My=Py,wy){case 1:var Dy=-1;break;case 2:Dy=250;break;case 5:Dy=1073741823;break;case 4:Dy=1e4;break;default:Dy=5e3}return Dy=My+Dy,wy={id:Wl++,callback:Cy,priorityLevel:wy,startTime:My,expirationTime:Dy,sortIndex:-1},My>Py?(wy.sortIndex=My,vn($l,wy),yn(Io)===null&&wy===yn($l)&&(Rm?(_g(hy),hy=-1):Rm=!0,gy(iy,My-Py))):(wy.sortIndex=Dy,vn(Io,wy),ey||Zl||(ey=!0,Ay(oy))),wy},cr.unstable_shouldYield=sy,cr.unstable_wrapCallback=function(wy){var Cy=Yl;return function(){var My=Yl;Yl=Cy;try{return wy.apply(this,arguments)}finally{Yl=My}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=react.exports,ca$1=scheduler.exports;function p$E(cr){for(var vn="https://reactjs.org/docs/error-decoder.html?invariant="+cr,yn=1;yn<arguments.length;yn++)vn+="&args[]="+encodeURIComponent(arguments[yn]);return"Minified React error #"+cr+"; visit "+vn+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(cr,vn){ha$1(cr,vn),ha$1(cr+"Capture",vn)}function ha$1(cr,vn){for(ea$1[cr]=vn,cr=0;cr<vn.length;cr++)da$1.add(vn[cr])}var ia$1=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(cr){return ja$1.call(ma$1,cr)?!0:ja$1.call(la$1,cr)?!1:ka$1.test(cr)?ma$1[cr]=!0:(la$1[cr]=!0,!1)}function pa$1(cr,vn,yn,Rn){if(yn!==null&&yn.type===0)return!1;switch(typeof vn){case"function":case"symbol":return!0;case"boolean":return Rn?!1:yn!==null?!yn.acceptsBooleans:(cr=cr.toLowerCase().slice(0,5),cr!=="data-"&&cr!=="aria-");default:return!1}}function qa$1(cr,vn,yn,Rn){if(vn===null||typeof vn=="undefined"||pa$1(cr,vn,yn,Rn))return!0;if(Rn)return!1;if(yn!==null)switch(yn.type){case 3:return!vn;case 4:return vn===!1;case 5:return isNaN(vn);case 6:return isNaN(vn)||1>vn}return!1}function v$z(cr,vn,yn,Rn,Bn,Co,Po){this.acceptsBooleans=vn===2||vn===3||vn===4,this.attributeName=Rn,this.attributeNamespace=Bn,this.mustUseProperty=yn,this.propertyName=cr,this.type=vn,this.sanitizeURL=Co,this.removeEmptyString=Po}var z$l={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(cr){z$l[cr]=new v$z(cr,0,!1,cr,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(cr){var vn=cr[0];z$l[vn]=new v$z(vn,1,!1,cr[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(cr){z$l[cr]=new v$z(cr,2,!1,cr.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(cr){z$l[cr]=new v$z(cr,2,!1,cr,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(cr){z$l[cr]=new v$z(cr,3,!1,cr.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(cr){z$l[cr]=new v$z(cr,3,!0,cr,null,!1,!1)});["capture","download"].forEach(function(cr){z$l[cr]=new v$z(cr,4,!1,cr,null,!1,!1)});["cols","rows","size","span"].forEach(function(cr){z$l[cr]=new v$z(cr,6,!1,cr,null,!1,!1)});["rowSpan","start"].forEach(function(cr){z$l[cr]=new v$z(cr,5,!1,cr.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(cr){return cr[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(cr){var vn=cr.replace(ra$1,sa$1);z$l[vn]=new v$z(vn,1,!1,cr,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(cr){var vn=cr.replace(ra$1,sa$1);z$l[vn]=new v$z(vn,1,!1,cr,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(cr){var vn=cr.replace(ra$1,sa$1);z$l[vn]=new v$z(vn,1,!1,cr,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(cr){z$l[cr]=new v$z(cr,1,!1,cr.toLowerCase(),null,!1,!1)});z$l.xlinkHref=new v$z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(cr){z$l[cr]=new v$z(cr,1,!1,cr.toLowerCase(),null,!0,!0)});function ta$1(cr,vn,yn,Rn){var Bn=z$l.hasOwnProperty(vn)?z$l[vn]:null;(Bn!==null?Bn.type!==0:Rn||!(2<vn.length)||vn[0]!=="o"&&vn[0]!=="O"||vn[1]!=="n"&&vn[1]!=="N")&&(qa$1(vn,yn,Bn,Rn)&&(yn=null),Rn||Bn===null?oa$1(vn)&&(yn===null?cr.removeAttribute(vn):cr.setAttribute(vn,""+yn)):Bn.mustUseProperty?cr[Bn.propertyName]=yn===null?Bn.type===3?!1:"":yn:(vn=Bn.attributeName,Rn=Bn.attributeNamespace,yn===null?cr.removeAttribute(vn):(Bn=Bn.type,yn=Bn===3||Bn===4&&yn===!0?"":""+yn,Rn?cr.setAttributeNS(Rn,vn,yn):cr.setAttribute(vn,yn))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(cr){return cr===null||typeof cr!="object"?null:(cr=Ja$1&&cr[Ja$1]||cr["@@iterator"],typeof cr=="function"?cr:null)}var A$B=Object.assign,La$1;function Ma$1(cr){if(La$1===void 0)try{throw Error()}catch(yn){var vn=yn.stack.trim().match(/\n( *(at )?)/);La$1=vn&&vn[1]||""}return`
`+La$1+cr}var Na$1=!1;function Oa$1(cr,vn){if(!cr||Na$1)return"";Na$1=!0;var yn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(vn)if(vn=function(){throw Error()},Object.defineProperty(vn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vn,[])}catch($l){var Rn=$l}Reflect.construct(cr,[],vn)}else{try{vn.call()}catch($l){Rn=$l}cr.call(vn.prototype)}else{try{throw Error()}catch($l){Rn=$l}cr()}}catch($l){if($l&&Rn&&typeof $l.stack=="string"){for(var Bn=$l.stack.split(`
`),Co=Rn.stack.split(`
`),Po=Bn.length-1,To=Co.length-1;1<=Po&&0<=To&&Bn[Po]!==Co[To];)To--;for(;1<=Po&&0<=To;Po--,To--)if(Bn[Po]!==Co[To]){if(Po!==1||To!==1)do if(Po--,To--,0>To||Bn[Po]!==Co[To]){var Io=`
`+Bn[Po].replace(" at new "," at ");return cr.displayName&&Io.includes("<anonymous>")&&(Io=Io.replace("<anonymous>",cr.displayName)),Io}while(1<=Po&&0<=To);break}}}finally{Na$1=!1,Error.prepareStackTrace=yn}return(cr=cr?cr.displayName||cr.name:"")?Ma$1(cr):""}function Pa(cr){switch(cr.tag){case 5:return Ma$1(cr.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return cr=Oa$1(cr.type,!1),cr;case 11:return cr=Oa$1(cr.type.render,!1),cr;case 1:return cr=Oa$1(cr.type,!0),cr;default:return""}}function Qa$1(cr){if(cr==null)return null;if(typeof cr=="function")return cr.displayName||cr.name||null;if(typeof cr=="string")return cr;switch(cr){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa:return"SuspenseList"}if(typeof cr=="object")switch(cr.$$typeof){case Ca$1:return(cr.displayName||"Context")+".Consumer";case Ba:return(cr._context.displayName||"Context")+".Provider";case Da$1:var vn=cr.render;return cr=cr.displayName,cr||(cr=vn.displayName||vn.name||"",cr=cr!==""?"ForwardRef("+cr+")":"ForwardRef"),cr;case Ga$1:return vn=cr.displayName||null,vn!==null?vn:Qa$1(cr.type)||"Memo";case Ha$1:vn=cr._payload,cr=cr._init;try{return Qa$1(cr(vn))}catch{}}return null}function Ra(cr){var vn=cr.type;switch(cr.tag){case 24:return"Cache";case 9:return(vn.displayName||"Context")+".Consumer";case 10:return(vn._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return cr=vn.render,cr=cr.displayName||cr.name||"",vn.displayName||(cr!==""?"ForwardRef("+cr+")":"ForwardRef");case 7:return"Fragment";case 5:return vn;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(vn);case 8:return vn===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof vn=="function")return vn.displayName||vn.name||null;if(typeof vn=="string")return vn}return null}function Sa$1(cr){switch(typeof cr){case"boolean":case"number":case"string":case"undefined":return cr;case"object":return cr;default:return""}}function Ta(cr){var vn=cr.type;return(cr=cr.nodeName)&&cr.toLowerCase()==="input"&&(vn==="checkbox"||vn==="radio")}function Ua$1(cr){var vn=Ta(cr)?"checked":"value",yn=Object.getOwnPropertyDescriptor(cr.constructor.prototype,vn),Rn=""+cr[vn];if(!cr.hasOwnProperty(vn)&&typeof yn!="undefined"&&typeof yn.get=="function"&&typeof yn.set=="function"){var Bn=yn.get,Co=yn.set;return Object.defineProperty(cr,vn,{configurable:!0,get:function(){return Bn.call(this)},set:function(Po){Rn=""+Po,Co.call(this,Po)}}),Object.defineProperty(cr,vn,{enumerable:yn.enumerable}),{getValue:function(){return Rn},setValue:function(Po){Rn=""+Po},stopTracking:function(){cr._valueTracker=null,delete cr[vn]}}}}function Va$1(cr){cr._valueTracker||(cr._valueTracker=Ua$1(cr))}function Wa$1(cr){if(!cr)return!1;var vn=cr._valueTracker;if(!vn)return!0;var yn=vn.getValue(),Rn="";return cr&&(Rn=Ta(cr)?cr.checked?"true":"false":cr.value),cr=Rn,cr!==yn?(vn.setValue(cr),!0):!1}function Xa$1(cr){if(cr=cr||(typeof document!="undefined"?document:void 0),typeof cr=="undefined")return null;try{return cr.activeElement||cr.body}catch{return cr.body}}function Ya$1(cr,vn){var yn=vn.checked;return A$B({},vn,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:yn!=null?yn:cr._wrapperState.initialChecked})}function Za$1(cr,vn){var yn=vn.defaultValue==null?"":vn.defaultValue,Rn=vn.checked!=null?vn.checked:vn.defaultChecked;yn=Sa$1(vn.value!=null?vn.value:yn),cr._wrapperState={initialChecked:Rn,initialValue:yn,controlled:vn.type==="checkbox"||vn.type==="radio"?vn.checked!=null:vn.value!=null}}function ab(cr,vn){vn=vn.checked,vn!=null&&ta$1(cr,"checked",vn,!1)}function bb(cr,vn){ab(cr,vn);var yn=Sa$1(vn.value),Rn=vn.type;if(yn!=null)Rn==="number"?(yn===0&&cr.value===""||cr.value!=yn)&&(cr.value=""+yn):cr.value!==""+yn&&(cr.value=""+yn);else if(Rn==="submit"||Rn==="reset"){cr.removeAttribute("value");return}vn.hasOwnProperty("value")?cb(cr,vn.type,yn):vn.hasOwnProperty("defaultValue")&&cb(cr,vn.type,Sa$1(vn.defaultValue)),vn.checked==null&&vn.defaultChecked!=null&&(cr.defaultChecked=!!vn.defaultChecked)}function db(cr,vn,yn){if(vn.hasOwnProperty("value")||vn.hasOwnProperty("defaultValue")){var Rn=vn.type;if(!(Rn!=="submit"&&Rn!=="reset"||vn.value!==void 0&&vn.value!==null))return;vn=""+cr._wrapperState.initialValue,yn||vn===cr.value||(cr.value=vn),cr.defaultValue=vn}yn=cr.name,yn!==""&&(cr.name=""),cr.defaultChecked=!!cr._wrapperState.initialChecked,yn!==""&&(cr.name=yn)}function cb(cr,vn,yn){(vn!=="number"||Xa$1(cr.ownerDocument)!==cr)&&(yn==null?cr.defaultValue=""+cr._wrapperState.initialValue:cr.defaultValue!==""+yn&&(cr.defaultValue=""+yn))}var eb=Array.isArray;function fb(cr,vn,yn,Rn){if(cr=cr.options,vn){vn={};for(var Bn=0;Bn<yn.length;Bn++)vn["$"+yn[Bn]]=!0;for(yn=0;yn<cr.length;yn++)Bn=vn.hasOwnProperty("$"+cr[yn].value),cr[yn].selected!==Bn&&(cr[yn].selected=Bn),Bn&&Rn&&(cr[yn].defaultSelected=!0)}else{for(yn=""+Sa$1(yn),vn=null,Bn=0;Bn<cr.length;Bn++){if(cr[Bn].value===yn){cr[Bn].selected=!0,Rn&&(cr[Bn].defaultSelected=!0);return}vn!==null||cr[Bn].disabled||(vn=cr[Bn])}vn!==null&&(vn.selected=!0)}}function gb(cr,vn){if(vn.dangerouslySetInnerHTML!=null)throw Error(p$E(91));return A$B({},vn,{value:void 0,defaultValue:void 0,children:""+cr._wrapperState.initialValue})}function hb(cr,vn){var yn=vn.value;if(yn==null){if(yn=vn.children,vn=vn.defaultValue,yn!=null){if(vn!=null)throw Error(p$E(92));if(eb(yn)){if(1<yn.length)throw Error(p$E(93));yn=yn[0]}vn=yn}vn==null&&(vn=""),yn=vn}cr._wrapperState={initialValue:Sa$1(yn)}}function ib(cr,vn){var yn=Sa$1(vn.value),Rn=Sa$1(vn.defaultValue);yn!=null&&(yn=""+yn,yn!==cr.value&&(cr.value=yn),vn.defaultValue==null&&cr.defaultValue!==yn&&(cr.defaultValue=yn)),Rn!=null&&(cr.defaultValue=""+Rn)}function jb(cr){var vn=cr.textContent;vn===cr._wrapperState.initialValue&&vn!==""&&vn!==null&&(cr.value=vn)}function kb(cr){switch(cr){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(cr,vn){return cr==null||cr==="http://www.w3.org/1999/xhtml"?kb(vn):cr==="http://www.w3.org/2000/svg"&&vn==="foreignObject"?"http://www.w3.org/1999/xhtml":cr}var mb,nb=function(cr){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(vn,yn,Rn,Bn){MSApp.execUnsafeLocalFunction(function(){return cr(vn,yn,Rn,Bn)})}:cr}(function(cr,vn){if(cr.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in cr)cr.innerHTML=vn;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+vn.valueOf().toString()+"</svg>",vn=mb.firstChild;cr.firstChild;)cr.removeChild(cr.firstChild);for(;vn.firstChild;)cr.appendChild(vn.firstChild)}});function ob(cr,vn){if(vn){var yn=cr.firstChild;if(yn&&yn===cr.lastChild&&yn.nodeType===3){yn.nodeValue=vn;return}}cr.textContent=vn}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(cr){qb.forEach(function(vn){vn=vn+cr.charAt(0).toUpperCase()+cr.substring(1),pb[vn]=pb[cr]})});function rb(cr,vn,yn){return vn==null||typeof vn=="boolean"||vn===""?"":yn||typeof vn!="number"||vn===0||pb.hasOwnProperty(cr)&&pb[cr]?(""+vn).trim():vn+"px"}function sb(cr,vn){cr=cr.style;for(var yn in vn)if(vn.hasOwnProperty(yn)){var Rn=yn.indexOf("--")===0,Bn=rb(yn,vn[yn],Rn);yn==="float"&&(yn="cssFloat"),Rn?cr.setProperty(yn,Bn):cr[yn]=Bn}}var tb=A$B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(cr,vn){if(vn){if(tb[cr]&&(vn.children!=null||vn.dangerouslySetInnerHTML!=null))throw Error(p$E(137,cr));if(vn.dangerouslySetInnerHTML!=null){if(vn.children!=null)throw Error(p$E(60));if(typeof vn.dangerouslySetInnerHTML!="object"||!("__html"in vn.dangerouslySetInnerHTML))throw Error(p$E(61))}if(vn.style!=null&&typeof vn.style!="object")throw Error(p$E(62))}}function vb(cr,vn){if(cr.indexOf("-")===-1)return typeof vn.is=="string";switch(cr){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(cr){return cr=cr.target||cr.srcElement||window,cr.correspondingUseElement&&(cr=cr.correspondingUseElement),cr.nodeType===3?cr.parentNode:cr}var yb=null,zb=null,Ab=null;function Bb(cr){if(cr=Cb(cr)){if(typeof yb!="function")throw Error(p$E(280));var vn=cr.stateNode;vn&&(vn=Db(vn),yb(cr.stateNode,cr.type,vn))}}function Eb(cr){zb?Ab?Ab.push(cr):Ab=[cr]:zb=cr}function Fb(){if(zb){var cr=zb,vn=Ab;if(Ab=zb=null,Bb(cr),vn)for(cr=0;cr<vn.length;cr++)Bb(vn[cr])}}function Gb(cr,vn){return cr(vn)}function Hb(){}var Ib=!1;function Jb(cr,vn,yn){if(Ib)return cr(vn,yn);Ib=!0;try{return Gb(cr,vn,yn)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(cr,vn){var yn=cr.stateNode;if(yn===null)return null;var Rn=Db(yn);if(Rn===null)return null;yn=Rn[vn];e:switch(vn){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Rn=!Rn.disabled)||(cr=cr.type,Rn=!(cr==="button"||cr==="input"||cr==="select"||cr==="textarea")),cr=!Rn;break e;default:cr=!1}if(cr)return null;if(yn&&typeof yn!="function")throw Error(p$E(231,vn,typeof yn));return yn}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(cr,vn,yn,Rn,Bn,Co,Po,To,Io){var $l=Array.prototype.slice.call(arguments,3);try{vn.apply(yn,$l)}catch(Wl){this.onError(Wl)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(cr){Ob=!0,Pb=cr}};function Tb(cr,vn,yn,Rn,Bn,Co,Po,To,Io){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(cr,vn,yn,Rn,Bn,Co,Po,To,Io){if(Tb.apply(this,arguments),Ob){if(Ob){var $l=Pb;Ob=!1,Pb=null}else throw Error(p$E(198));Qb||(Qb=!0,Rb=$l)}}function Vb(cr){var vn=cr,yn=cr;if(cr.alternate)for(;vn.return;)vn=vn.return;else{cr=vn;do vn=cr,(vn.flags&4098)!==0&&(yn=vn.return),cr=vn.return;while(cr)}return vn.tag===3?yn:null}function Wb(cr){if(cr.tag===13){var vn=cr.memoizedState;if(vn===null&&(cr=cr.alternate,cr!==null&&(vn=cr.memoizedState)),vn!==null)return vn.dehydrated}return null}function Xb(cr){if(Vb(cr)!==cr)throw Error(p$E(188))}function Yb(cr){var vn=cr.alternate;if(!vn){if(vn=Vb(cr),vn===null)throw Error(p$E(188));return vn!==cr?null:cr}for(var yn=cr,Rn=vn;;){var Bn=yn.return;if(Bn===null)break;var Co=Bn.alternate;if(Co===null){if(Rn=Bn.return,Rn!==null){yn=Rn;continue}break}if(Bn.child===Co.child){for(Co=Bn.child;Co;){if(Co===yn)return Xb(Bn),cr;if(Co===Rn)return Xb(Bn),vn;Co=Co.sibling}throw Error(p$E(188))}if(yn.return!==Rn.return)yn=Bn,Rn=Co;else{for(var Po=!1,To=Bn.child;To;){if(To===yn){Po=!0,yn=Bn,Rn=Co;break}if(To===Rn){Po=!0,Rn=Bn,yn=Co;break}To=To.sibling}if(!Po){for(To=Co.child;To;){if(To===yn){Po=!0,yn=Co,Rn=Bn;break}if(To===Rn){Po=!0,Rn=Co,yn=Bn;break}To=To.sibling}if(!Po)throw Error(p$E(189))}}if(yn.alternate!==Rn)throw Error(p$E(190))}if(yn.tag!==3)throw Error(p$E(188));return yn.stateNode.current===yn?cr:vn}function Zb(cr){return cr=Yb(cr),cr!==null?$b(cr):null}function $b(cr){if(cr.tag===5||cr.tag===6)return cr;for(cr=cr.child;cr!==null;){var vn=$b(cr);if(vn!==null)return vn;cr=cr.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$t=ca$1.unstable_now,ec=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(cr){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,cr,void 0,(cr.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(cr){return cr>>>=0,cr===0?32:31-(pc$1(cr)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(cr){switch(cr&-cr){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return cr&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return cr&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return cr}}function uc$1(cr,vn){var yn=cr.pendingLanes;if(yn===0)return 0;var Rn=0,Bn=cr.suspendedLanes,Co=cr.pingedLanes,Po=yn&268435455;if(Po!==0){var To=Po&~Bn;To!==0?Rn=tc$1(To):(Co&=Po,Co!==0&&(Rn=tc$1(Co)))}else Po=yn&~Bn,Po!==0?Rn=tc$1(Po):Co!==0&&(Rn=tc$1(Co));if(Rn===0)return 0;if(vn!==0&&vn!==Rn&&(vn&Bn)===0&&(Bn=Rn&-Rn,Co=vn&-vn,Bn>=Co||Bn===16&&(Co&4194240)!==0))return vn;if((Rn&4)!==0&&(Rn|=yn&16),vn=cr.entangledLanes,vn!==0)for(cr=cr.entanglements,vn&=Rn;0<vn;)yn=31-oc$1(vn),Bn=1<<yn,Rn|=cr[yn],vn&=~Bn;return Rn}function vc$1(cr,vn){switch(cr){case 1:case 2:case 4:return vn+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return vn+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(cr,vn){for(var yn=cr.suspendedLanes,Rn=cr.pingedLanes,Bn=cr.expirationTimes,Co=cr.pendingLanes;0<Co;){var Po=31-oc$1(Co),To=1<<Po,Io=Bn[Po];Io===-1?((To&yn)===0||(To&Rn)!==0)&&(Bn[Po]=vc$1(To,vn)):Io<=vn&&(cr.expiredLanes|=To),Co&=~To}}function xc$1(cr){return cr=cr.pendingLanes&-1073741825,cr!==0?cr:cr&1073741824?1073741824:0}function yc$1(){var cr=rc$1;return rc$1<<=1,(rc$1&4194240)===0&&(rc$1=64),cr}function zc$1(cr){for(var vn=[],yn=0;31>yn;yn++)vn.push(cr);return vn}function Ac$1(cr,vn,yn){cr.pendingLanes|=vn,vn!==536870912&&(cr.suspendedLanes=0,cr.pingedLanes=0),cr=cr.eventTimes,vn=31-oc$1(vn),cr[vn]=yn}function Bc$1(cr,vn){var yn=cr.pendingLanes&~vn;cr.pendingLanes=vn,cr.suspendedLanes=0,cr.pingedLanes=0,cr.expiredLanes&=vn,cr.mutableReadLanes&=vn,cr.entangledLanes&=vn,vn=cr.entanglements;var Rn=cr.eventTimes;for(cr=cr.expirationTimes;0<yn;){var Bn=31-oc$1(yn),Co=1<<Bn;vn[Bn]=0,Rn[Bn]=-1,cr[Bn]=-1,yn&=~Co}}function Cc$1(cr,vn){var yn=cr.entangledLanes|=vn;for(cr=cr.entanglements;yn;){var Rn=31-oc$1(yn),Bn=1<<Rn;Bn&vn|cr[Rn]&vn&&(cr[Rn]|=vn),yn&=~Bn}}var C$r=0;function Dc$1(cr){return cr&=-cr,1<cr?4<cr?(cr&268435455)!==0?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(cr,vn){switch(cr){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(vn.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(vn.pointerId)}}function Tc$1(cr,vn,yn,Rn,Bn,Co){return cr===null||cr.nativeEvent!==Co?(cr={blockedOn:vn,domEventName:yn,eventSystemFlags:Rn,nativeEvent:Co,targetContainers:[Bn]},vn!==null&&(vn=Cb(vn),vn!==null&&Fc$1(vn)),cr):(cr.eventSystemFlags|=Rn,vn=cr.targetContainers,Bn!==null&&vn.indexOf(Bn)===-1&&vn.push(Bn),cr)}function Uc$1(cr,vn,yn,Rn,Bn){switch(vn){case"focusin":return Lc$1=Tc$1(Lc$1,cr,vn,yn,Rn,Bn),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,cr,vn,yn,Rn,Bn),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,cr,vn,yn,Rn,Bn),!0;case"pointerover":var Co=Bn.pointerId;return Oc$1.set(Co,Tc$1(Oc$1.get(Co)||null,cr,vn,yn,Rn,Bn)),!0;case"gotpointercapture":return Co=Bn.pointerId,Pc$1.set(Co,Tc$1(Pc$1.get(Co)||null,cr,vn,yn,Rn,Bn)),!0}return!1}function Vc$1(cr){var vn=Wc$1(cr.target);if(vn!==null){var yn=Vb(vn);if(yn!==null){if(vn=yn.tag,vn===13){if(vn=Wb(yn),vn!==null){cr.blockedOn=vn,Ic$1(cr.priority,function(){Gc$1(yn)});return}}else if(vn===3&&yn.stateNode.current.memoizedState.isDehydrated){cr.blockedOn=yn.tag===3?yn.stateNode.containerInfo:null;return}}}cr.blockedOn=null}function Xc$1(cr){if(cr.blockedOn!==null)return!1;for(var vn=cr.targetContainers;0<vn.length;){var yn=Yc$1(cr.domEventName,cr.eventSystemFlags,vn[0],cr.nativeEvent);if(yn===null){yn=cr.nativeEvent;var Rn=new yn.constructor(yn.type,yn);wb=Rn,yn.target.dispatchEvent(Rn),wb=null}else return vn=Cb(yn),vn!==null&&Fc$1(vn),cr.blockedOn=yn,!1;vn.shift()}return!0}function Zc$1(cr,vn,yn){Xc$1(cr)&&yn.delete(vn)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(cr,vn){cr.blockedOn===vn&&(cr.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(cr){function vn(Bn){return ad$1(Bn,cr)}if(0<Kc$1.length){ad$1(Kc$1[0],cr);for(var yn=1;yn<Kc$1.length;yn++){var Rn=Kc$1[yn];Rn.blockedOn===cr&&(Rn.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,cr),Mc$1!==null&&ad$1(Mc$1,cr),Nc$1!==null&&ad$1(Nc$1,cr),Oc$1.forEach(vn),Pc$1.forEach(vn),yn=0;yn<Qc$1.length;yn++)Rn=Qc$1[yn],Rn.blockedOn===cr&&(Rn.blockedOn=null);for(;0<Qc$1.length&&(yn=Qc$1[0],yn.blockedOn===null);)Vc$1(yn),yn.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(cr,vn,yn,Rn){var Bn=C$r,Co=cd$1.transition;cd$1.transition=null;try{C$r=1,fd$1(cr,vn,yn,Rn)}finally{C$r=Bn,cd$1.transition=Co}}function gd$1(cr,vn,yn,Rn){var Bn=C$r,Co=cd$1.transition;cd$1.transition=null;try{C$r=4,fd$1(cr,vn,yn,Rn)}finally{C$r=Bn,cd$1.transition=Co}}function fd$1(cr,vn,yn,Rn){if(dd$1){var Bn=Yc$1(cr,vn,yn,Rn);if(Bn===null)hd$1(cr,vn,Rn,id$2,yn),Sc$1(cr,Rn);else if(Uc$1(Bn,cr,vn,yn,Rn))Rn.stopPropagation();else if(Sc$1(cr,Rn),vn&4&&-1<Rc$1.indexOf(cr)){for(;Bn!==null;){var Co=Cb(Bn);if(Co!==null&&Ec$1(Co),Co=Yc$1(cr,vn,yn,Rn),Co===null&&hd$1(cr,vn,Rn,id$2,yn),Co===Bn)break;Bn=Co}Bn!==null&&Rn.stopPropagation()}else hd$1(cr,vn,Rn,null,yn)}}var id$2=null;function Yc$1(cr,vn,yn,Rn){if(id$2=null,cr=xb(Rn),cr=Wc$1(cr),cr!==null)if(vn=Vb(cr),vn===null)cr=null;else if(yn=vn.tag,yn===13){if(cr=Wb(vn),cr!==null)return cr;cr=null}else if(yn===3){if(vn.stateNode.current.memoizedState.isDehydrated)return vn.tag===3?vn.stateNode.containerInfo:null;cr=null}else vn!==cr&&(cr=null);return id$2=cr,null}function jd$1(cr){switch(cr){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var cr,vn=ld$1,yn=vn.length,Rn,Bn="value"in kd$1?kd$1.value:kd$1.textContent,Co=Bn.length;for(cr=0;cr<yn&&vn[cr]===Bn[cr];cr++);var Po=yn-cr;for(Rn=1;Rn<=Po&&vn[yn-Rn]===Bn[Co-Rn];Rn++);return md$1=Bn.slice(cr,1<Rn?1-Rn:void 0)}function od$1(cr){var vn=cr.keyCode;return"charCode"in cr?(cr=cr.charCode,cr===0&&vn===13&&(cr=13)):cr=vn,cr===10&&(cr=13),32<=cr||cr===13?cr:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(cr){function vn(yn,Rn,Bn,Co,Po){this._reactName=yn,this._targetInst=Bn,this.type=Rn,this.nativeEvent=Co,this.target=Po,this.currentTarget=null;for(var To in cr)cr.hasOwnProperty(To)&&(yn=cr[To],this[To]=yn?yn(Co):Co[To]);return this.isDefaultPrevented=(Co.defaultPrevented!=null?Co.defaultPrevented:Co.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$B(vn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var yn=this.nativeEvent;yn&&(yn.preventDefault?yn.preventDefault():typeof yn.returnValue!="unknown"&&(yn.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var yn=this.nativeEvent;yn&&(yn.stopPropagation?yn.stopPropagation():typeof yn.cancelBubble!="unknown"&&(yn.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),vn}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(cr){return cr.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$B({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$B({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(cr){return cr.relatedTarget===void 0?cr.fromElement===cr.srcElement?cr.toElement:cr.fromElement:cr.relatedTarget},movementX:function(cr){return"movementX"in cr?cr.movementX:(cr!==yd$1&&(yd$1&&cr.type==="mousemove"?(wd$1=cr.screenX-yd$1.screenX,xd$1=cr.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=cr),wd$1)},movementY:function(cr){return"movementY"in cr?cr.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$B({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$B({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$B({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$B({},sd$1,{clipboardData:function(cr){return"clipboardData"in cr?cr.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$B({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(cr){var vn=this.nativeEvent;return vn.getModifierState?vn.getModifierState(cr):(cr=Od$1[cr])?!!vn[cr]:!1}function zd$1(){return Pd$1}var Qd$1=A$B({},ud$1,{key:function(cr){if(cr.key){var vn=Md$1[cr.key]||cr.key;if(vn!=="Unidentified")return vn}return cr.type==="keypress"?(cr=od$1(cr),cr===13?"Enter":String.fromCharCode(cr)):cr.type==="keydown"||cr.type==="keyup"?Nd$1[cr.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(cr){return cr.type==="keypress"?od$1(cr):0},keyCode:function(cr){return cr.type==="keydown"||cr.type==="keyup"?cr.keyCode:0},which:function(cr){return cr.type==="keypress"?od$1(cr):cr.type==="keydown"||cr.type==="keyup"?cr.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$B({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$B({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$B({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$B({},Ad$1,{deltaX:function(cr){return"deltaX"in cr?cr.deltaX:"wheelDeltaX"in cr?-cr.wheelDeltaX:0},deltaY:function(cr){return"deltaY"in cr?cr.deltaY:"wheelDeltaY"in cr?-cr.wheelDeltaY:"wheelDelta"in cr?-cr.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$4=ia$1&&"CompositionEvent"in window,be$3=null;ia$1&&"documentMode"in document&&(be$3=document.documentMode);var ce$4=ia$1&&"TextEvent"in window&&!be$3,de$4=ia$1&&(!ae$4||be$3&&8<be$3&&11>=be$3),ee$7=String.fromCharCode(32),fe$7=!1;function ge$6(cr,vn){switch(cr){case"keyup":return $d$1.indexOf(vn.keyCode)!==-1;case"keydown":return vn.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$3(cr){return cr=cr.detail,typeof cr=="object"&&"data"in cr?cr.data:null}var ie$6=!1;function je$1(cr,vn){switch(cr){case"compositionend":return he$3(vn);case"keypress":return vn.which!==32?null:(fe$7=!0,ee$7);case"textInput":return cr=vn.data,cr===ee$7&&fe$7?null:cr;default:return null}}function ke$4(cr,vn){if(ie$6)return cr==="compositionend"||!ae$4&&ge$6(cr,vn)?(cr=nd$1(),md$1=ld$1=kd$1=null,ie$6=!1,cr):null;switch(cr){case"paste":return null;case"keypress":if(!(vn.ctrlKey||vn.altKey||vn.metaKey)||vn.ctrlKey&&vn.altKey){if(vn.char&&1<vn.char.length)return vn.char;if(vn.which)return String.fromCharCode(vn.which)}return null;case"compositionend":return de$4&&vn.locale!=="ko"?null:vn.data;default:return null}}var le$4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$3(cr){var vn=cr&&cr.nodeName&&cr.nodeName.toLowerCase();return vn==="input"?!!le$4[cr.type]:vn==="textarea"}function ne$7(cr,vn,yn,Rn){Eb(Rn),vn=oe$3(vn,"onChange"),0<vn.length&&(yn=new td$1("onChange","change",null,yn,Rn),cr.push({event:yn,listeners:vn}))}var pe$5=null,qe$3=null;function re$4(cr){se$5(cr,0)}function te$6(cr){var vn=ue$5(cr);if(Wa$1(vn))return cr}function ve$2(cr,vn){if(cr==="change")return vn}var we$2=!1;if(ia$1){var xe$1;if(ia$1){var ye$4="oninput"in document;if(!ye$4){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$4=typeof ze$2.oninput=="function"}xe$1=ye$4}else xe$1=!1;we$2=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$4(){pe$5&&(pe$5.detachEvent("onpropertychange",Be$1),qe$3=pe$5=null)}function Be$1(cr){if(cr.propertyName==="value"&&te$6(qe$3)){var vn=[];ne$7(vn,qe$3,cr,xb(cr)),Jb(re$4,vn)}}function Ce$3(cr,vn,yn){cr==="focusin"?(Ae$4(),pe$5=vn,qe$3=yn,pe$5.attachEvent("onpropertychange",Be$1)):cr==="focusout"&&Ae$4()}function De(cr){if(cr==="selectionchange"||cr==="keyup"||cr==="keydown")return te$6(qe$3)}function Ee$4(cr,vn){if(cr==="click")return te$6(vn)}function Fe$2(cr,vn){if(cr==="input"||cr==="change")return te$6(vn)}function Ge$4(cr,vn){return cr===vn&&(cr!==0||1/cr===1/vn)||cr!==cr&&vn!==vn}var He$3=typeof Object.is=="function"?Object.is:Ge$4;function Ie$3(cr,vn){if(He$3(cr,vn))return!0;if(typeof cr!="object"||cr===null||typeof vn!="object"||vn===null)return!1;var yn=Object.keys(cr),Rn=Object.keys(vn);if(yn.length!==Rn.length)return!1;for(Rn=0;Rn<yn.length;Rn++){var Bn=yn[Rn];if(!ja$1.call(vn,Bn)||!He$3(cr[Bn],vn[Bn]))return!1}return!0}function Je$2(cr){for(;cr&&cr.firstChild;)cr=cr.firstChild;return cr}function Ke$2(cr,vn){var yn=Je$2(cr);cr=0;for(var Rn;yn;){if(yn.nodeType===3){if(Rn=cr+yn.textContent.length,cr<=vn&&Rn>=vn)return{node:yn,offset:vn-cr};cr=Rn}e:{for(;yn;){if(yn.nextSibling){yn=yn.nextSibling;break e}yn=yn.parentNode}yn=void 0}yn=Je$2(yn)}}function Le$3(cr,vn){return cr&&vn?cr===vn?!0:cr&&cr.nodeType===3?!1:vn&&vn.nodeType===3?Le$3(cr,vn.parentNode):"contains"in cr?cr.contains(vn):cr.compareDocumentPosition?!!(cr.compareDocumentPosition(vn)&16):!1:!1}function Me$2(){for(var cr=window,vn=Xa$1();vn instanceof cr.HTMLIFrameElement;){try{var yn=typeof vn.contentWindow.location.href=="string"}catch{yn=!1}if(yn)cr=vn.contentWindow;else break;vn=Xa$1(cr.document)}return vn}function Ne$4(cr){var vn=cr&&cr.nodeName&&cr.nodeName.toLowerCase();return vn&&(vn==="input"&&(cr.type==="text"||cr.type==="search"||cr.type==="tel"||cr.type==="url"||cr.type==="password")||vn==="textarea"||cr.contentEditable==="true")}function Oe$3(cr){var vn=Me$2(),yn=cr.focusedElem,Rn=cr.selectionRange;if(vn!==yn&&yn&&yn.ownerDocument&&Le$3(yn.ownerDocument.documentElement,yn)){if(Rn!==null&&Ne$4(yn)){if(vn=Rn.start,cr=Rn.end,cr===void 0&&(cr=vn),"selectionStart"in yn)yn.selectionStart=vn,yn.selectionEnd=Math.min(cr,yn.value.length);else if(cr=(vn=yn.ownerDocument||document)&&vn.defaultView||window,cr.getSelection){cr=cr.getSelection();var Bn=yn.textContent.length,Co=Math.min(Rn.start,Bn);Rn=Rn.end===void 0?Co:Math.min(Rn.end,Bn),!cr.extend&&Co>Rn&&(Bn=Rn,Rn=Co,Co=Bn),Bn=Ke$2(yn,Co);var Po=Ke$2(yn,Rn);Bn&&Po&&(cr.rangeCount!==1||cr.anchorNode!==Bn.node||cr.anchorOffset!==Bn.offset||cr.focusNode!==Po.node||cr.focusOffset!==Po.offset)&&(vn=vn.createRange(),vn.setStart(Bn.node,Bn.offset),cr.removeAllRanges(),Co>Rn?(cr.addRange(vn),cr.extend(Po.node,Po.offset)):(vn.setEnd(Po.node,Po.offset),cr.addRange(vn)))}}for(vn=[],cr=yn;cr=cr.parentNode;)cr.nodeType===1&&vn.push({element:cr,left:cr.scrollLeft,top:cr.scrollTop});for(typeof yn.focus=="function"&&yn.focus(),yn=0;yn<vn.length;yn++)cr=vn[yn],cr.element.scrollLeft=cr.left,cr.element.scrollTop=cr.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$1=null,Se$1=null,Te$2=!1;function Ue$2(cr,vn,yn){var Rn=yn.window===yn?yn.document:yn.nodeType===9?yn:yn.ownerDocument;Te$2||Qe$2==null||Qe$2!==Xa$1(Rn)||(Rn=Qe$2,"selectionStart"in Rn&&Ne$4(Rn)?Rn={start:Rn.selectionStart,end:Rn.selectionEnd}:(Rn=(Rn.ownerDocument&&Rn.ownerDocument.defaultView||window).getSelection(),Rn={anchorNode:Rn.anchorNode,anchorOffset:Rn.anchorOffset,focusNode:Rn.focusNode,focusOffset:Rn.focusOffset}),Se$1&&Ie$3(Se$1,Rn)||(Se$1=Rn,Rn=oe$3(Re$1,"onSelect"),0<Rn.length&&(vn=new td$1("onSelect","select",null,vn,yn),cr.push({event:vn,listeners:Rn}),vn.target=Qe$2)))}function Ve(cr,vn){var yn={};return yn[cr.toLowerCase()]=vn.toLowerCase(),yn["Webkit"+cr]="webkit"+vn,yn["Moz"+cr]="moz"+vn,yn}var We$2={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$2={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$2(cr){if(Xe$2[cr])return Xe$2[cr];if(!We$2[cr])return cr;var vn=We$2[cr],yn;for(yn in vn)if(vn.hasOwnProperty(yn)&&yn in Ye$1)return Xe$2[cr]=vn[yn];return cr}var $e$1=Ze$2("animationend"),af$1=Ze$2("animationiteration"),bf$1=Ze$2("animationstart"),cf$1=Ze$2("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(cr,vn){df$1.set(cr,vn),fa$1(vn,[cr])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$1,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(cr,vn,yn){var Rn=cr.type||"unknown-event";cr.currentTarget=yn,Ub(Rn,vn,void 0,cr),cr.currentTarget=null}function se$5(cr,vn){vn=(vn&4)!==0;for(var yn=0;yn<cr.length;yn++){var Rn=cr[yn],Bn=Rn.event;Rn=Rn.listeners;e:{var Co=void 0;if(vn)for(var Po=Rn.length-1;0<=Po;Po--){var To=Rn[Po],Io=To.instance,$l=To.currentTarget;if(To=To.listener,Io!==Co&&Bn.isPropagationStopped())break e;nf$1(Bn,To,$l),Co=Io}else for(Po=0;Po<Rn.length;Po++){if(To=Rn[Po],Io=To.instance,$l=To.currentTarget,To=To.listener,Io!==Co&&Bn.isPropagationStopped())break e;nf$1(Bn,To,$l),Co=Io}}}if(Qb)throw cr=Rb,Qb=!1,Rb=null,cr}function D$s(cr,vn){var yn=vn[of$1];yn===void 0&&(yn=vn[of$1]=new Set);var Rn=cr+"__bubble";yn.has(Rn)||(pf$1(vn,cr,2,!1),yn.add(Rn))}function qf$1(cr,vn,yn){var Rn=0;vn&&(Rn|=4),pf$1(yn,cr,Rn,vn)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(cr){if(!cr[rf$1]){cr[rf$1]=!0,da$1.forEach(function(yn){yn!=="selectionchange"&&(mf$1.has(yn)||qf$1(yn,!1,cr),qf$1(yn,!0,cr))});var vn=cr.nodeType===9?cr:cr.ownerDocument;vn===null||vn[rf$1]||(vn[rf$1]=!0,qf$1("selectionchange",!1,vn))}}function pf$1(cr,vn,yn,Rn){switch(jd$1(vn)){case 1:var Bn=ed$1;break;case 4:Bn=gd$1;break;default:Bn=fd$1}yn=Bn.bind(null,vn,yn,cr),Bn=void 0,!Lb||vn!=="touchstart"&&vn!=="touchmove"&&vn!=="wheel"||(Bn=!0),Rn?Bn!==void 0?cr.addEventListener(vn,yn,{capture:!0,passive:Bn}):cr.addEventListener(vn,yn,!0):Bn!==void 0?cr.addEventListener(vn,yn,{passive:Bn}):cr.addEventListener(vn,yn,!1)}function hd$1(cr,vn,yn,Rn,Bn){var Co=Rn;if((vn&1)===0&&(vn&2)===0&&Rn!==null)e:for(;;){if(Rn===null)return;var Po=Rn.tag;if(Po===3||Po===4){var To=Rn.stateNode.containerInfo;if(To===Bn||To.nodeType===8&&To.parentNode===Bn)break;if(Po===4)for(Po=Rn.return;Po!==null;){var Io=Po.tag;if((Io===3||Io===4)&&(Io=Po.stateNode.containerInfo,Io===Bn||Io.nodeType===8&&Io.parentNode===Bn))return;Po=Po.return}for(;To!==null;){if(Po=Wc$1(To),Po===null)return;if(Io=Po.tag,Io===5||Io===6){Rn=Co=Po;continue e}To=To.parentNode}}Rn=Rn.return}Jb(function(){var $l=Co,Wl=xb(yn),Xl=[];e:{var Yl=df$1.get(cr);if(Yl!==void 0){var Zl=td$1,ey=cr;switch(cr){case"keypress":if(od$1(yn)===0)break e;case"keydown":case"keyup":Zl=Rd$1;break;case"focusin":ey="focus",Zl=Fd$1;break;case"focusout":ey="blur",Zl=Fd$1;break;case"beforeblur":case"afterblur":Zl=Fd$1;break;case"click":if(yn.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zl=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zl=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zl=Vd$1;break;case $e$1:case af$1:case bf$1:Zl=Hd$1;break;case cf$1:Zl=Xd$1;break;case"scroll":Zl=vd$1;break;case"wheel":Zl=Zd$1;break;case"copy":case"cut":case"paste":Zl=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zl=Td$1}var Rm=(vn&4)!==0,ry=!Rm&&cr==="scroll",_g=Rm?Yl!==null?Yl+"Capture":null:Yl;Rm=[];for(var ty=$l,ny;ty!==null;){ny=ty;var iy=ny.stateNode;if(ny.tag===5&&iy!==null&&(ny=iy,_g!==null&&(iy=Kb(ty,_g),iy!=null&&Rm.push(tf$1(ty,iy,ny)))),ry)break;ty=ty.return}0<Rm.length&&(Yl=new Zl(Yl,ey,null,yn,Wl),Xl.push({event:Yl,listeners:Rm}))}}if((vn&7)===0){e:{if(Yl=cr==="mouseover"||cr==="pointerover",Zl=cr==="mouseout"||cr==="pointerout",Yl&&yn!==wb&&(ey=yn.relatedTarget||yn.fromElement)&&(Wc$1(ey)||ey[uf$1]))break e;if((Zl||Yl)&&(Yl=Wl.window===Wl?Wl:(Yl=Wl.ownerDocument)?Yl.defaultView||Yl.parentWindow:window,Zl?(ey=yn.relatedTarget||yn.toElement,Zl=$l,ey=ey?Wc$1(ey):null,ey!==null&&(ry=Vb(ey),ey!==ry||ey.tag!==5&&ey.tag!==6)&&(ey=null)):(Zl=null,ey=$l),Zl!==ey)){if(Rm=Bd$1,iy="onMouseLeave",_g="onMouseEnter",ty="mouse",(cr==="pointerout"||cr==="pointerover")&&(Rm=Td$1,iy="onPointerLeave",_g="onPointerEnter",ty="pointer"),ry=Zl==null?Yl:ue$5(Zl),ny=ey==null?Yl:ue$5(ey),Yl=new Rm(iy,ty+"leave",Zl,yn,Wl),Yl.target=ry,Yl.relatedTarget=ny,iy=null,Wc$1(Wl)===$l&&(Rm=new Rm(_g,ty+"enter",ey,yn,Wl),Rm.target=ny,Rm.relatedTarget=ry,iy=Rm),ry=iy,Zl&&ey)t:{for(Rm=Zl,_g=ey,ty=0,ny=Rm;ny;ny=vf$1(ny))ty++;for(ny=0,iy=_g;iy;iy=vf$1(iy))ny++;for(;0<ty-ny;)Rm=vf$1(Rm),ty--;for(;0<ny-ty;)_g=vf$1(_g),ny--;for(;ty--;){if(Rm===_g||_g!==null&&Rm===_g.alternate)break t;Rm=vf$1(Rm),_g=vf$1(_g)}Rm=null}else Rm=null;Zl!==null&&wf$1(Xl,Yl,Zl,Rm,!1),ey!==null&&ry!==null&&wf$1(Xl,ry,ey,Rm,!0)}}e:{if(Yl=$l?ue$5($l):window,Zl=Yl.nodeName&&Yl.nodeName.toLowerCase(),Zl==="select"||Zl==="input"&&Yl.type==="file")var oy=ve$2;else if(me$3(Yl))if(we$2)oy=Fe$2;else{oy=De;var ay=Ce$3}else(Zl=Yl.nodeName)&&Zl.toLowerCase()==="input"&&(Yl.type==="checkbox"||Yl.type==="radio")&&(oy=Ee$4);if(oy&&(oy=oy(cr,$l))){ne$7(Xl,oy,yn,Wl);break e}ay&&ay(cr,Yl,$l),cr==="focusout"&&(ay=Yl._wrapperState)&&ay.controlled&&Yl.type==="number"&&cb(Yl,"number",Yl.value)}switch(ay=$l?ue$5($l):window,cr){case"focusin":(me$3(ay)||ay.contentEditable==="true")&&(Qe$2=ay,Re$1=$l,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$2=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$2(Xl,yn,Wl);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$2(Xl,yn,Wl)}var uy;if(ae$4)e:{switch(cr){case"compositionstart":var hy="onCompositionStart";break e;case"compositionend":hy="onCompositionEnd";break e;case"compositionupdate":hy="onCompositionUpdate";break e}hy=void 0}else ie$6?ge$6(cr,yn)&&(hy="onCompositionEnd"):cr==="keydown"&&yn.keyCode===229&&(hy="onCompositionStart");hy&&(de$4&&yn.locale!=="ko"&&(ie$6||hy!=="onCompositionStart"?hy==="onCompositionEnd"&&ie$6&&(uy=nd$1()):(kd$1=Wl,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie$6=!0)),ay=oe$3($l,hy),0<ay.length&&(hy=new Ld$1(hy,cr,null,yn,Wl),Xl.push({event:hy,listeners:ay}),uy?hy.data=uy:(uy=he$3(yn),uy!==null&&(hy.data=uy)))),(uy=ce$4?je$1(cr,yn):ke$4(cr,yn))&&($l=oe$3($l,"onBeforeInput"),0<$l.length&&(Wl=new Ld$1("onBeforeInput","beforeinput",null,yn,Wl),Xl.push({event:Wl,listeners:$l}),Wl.data=uy))}se$5(Xl,vn)})}function tf$1(cr,vn,yn){return{instance:cr,listener:vn,currentTarget:yn}}function oe$3(cr,vn){for(var yn=vn+"Capture",Rn=[];cr!==null;){var Bn=cr,Co=Bn.stateNode;Bn.tag===5&&Co!==null&&(Bn=Co,Co=Kb(cr,yn),Co!=null&&Rn.unshift(tf$1(cr,Co,Bn)),Co=Kb(cr,vn),Co!=null&&Rn.push(tf$1(cr,Co,Bn))),cr=cr.return}return Rn}function vf$1(cr){if(cr===null)return null;do cr=cr.return;while(cr&&cr.tag!==5);return cr||null}function wf$1(cr,vn,yn,Rn,Bn){for(var Co=vn._reactName,Po=[];yn!==null&&yn!==Rn;){var To=yn,Io=To.alternate,$l=To.stateNode;if(Io!==null&&Io===Rn)break;To.tag===5&&$l!==null&&(To=$l,Bn?(Io=Kb(yn,Co),Io!=null&&Po.unshift(tf$1(yn,Io,To))):Bn||(Io=Kb(yn,Co),Io!=null&&Po.push(tf$1(yn,Io,To)))),yn=yn.return}Po.length!==0&&cr.push({event:vn,listeners:Po})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(cr){return(typeof cr=="string"?cr:""+cr).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(cr,vn,yn){if(vn=zf$1(vn),zf$1(cr)!==vn&&yn)throw Error(p$E(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(cr,vn){return cr==="textarea"||cr==="noscript"||typeof vn.children=="string"||typeof vn.children=="number"||typeof vn.dangerouslySetInnerHTML=="object"&&vn.dangerouslySetInnerHTML!==null&&vn.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1!="undefined"?function(cr){return Hf$1.resolve(null).then(cr).catch(If$1)}:Ff$1;function If$1(cr){setTimeout(function(){throw cr})}function Kf$1(cr,vn){var yn=vn,Rn=0;do{var Bn=yn.nextSibling;if(cr.removeChild(yn),Bn&&Bn.nodeType===8)if(yn=Bn.data,yn==="/$"){if(Rn===0){cr.removeChild(Bn),bd$1(vn);return}Rn--}else yn!=="$"&&yn!=="$?"&&yn!=="$!"||Rn++;yn=Bn}while(yn);bd$1(vn)}function Lf$1(cr){for(;cr!=null;cr=cr.nextSibling){var vn=cr.nodeType;if(vn===1||vn===3)break;if(vn===8){if(vn=cr.data,vn==="$"||vn==="$!"||vn==="$?")break;if(vn==="/$")return null}}return cr}function Mf$1(cr){cr=cr.previousSibling;for(var vn=0;cr;){if(cr.nodeType===8){var yn=cr.data;if(yn==="$"||yn==="$!"||yn==="$?"){if(vn===0)return cr;vn--}else yn==="/$"&&vn++}cr=cr.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(cr){var vn=cr[Of$1];if(vn)return vn;for(var yn=cr.parentNode;yn;){if(vn=yn[uf$1]||yn[Of$1]){if(yn=vn.alternate,vn.child!==null||yn!==null&&yn.child!==null)for(cr=Mf$1(cr);cr!==null;){if(yn=cr[Of$1])return yn;cr=Mf$1(cr)}return vn}cr=yn,yn=cr.parentNode}return null}function Cb(cr){return cr=cr[Of$1]||cr[uf$1],!cr||cr.tag!==5&&cr.tag!==6&&cr.tag!==13&&cr.tag!==3?null:cr}function ue$5(cr){if(cr.tag===5||cr.tag===6)return cr.stateNode;throw Error(p$E(33))}function Db(cr){return cr[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(cr){return{current:cr}}function E$y(cr){0>Tf$1||(cr.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$h(cr,vn){Tf$1++,Sf$1[Tf$1]=cr.current,cr.current=vn}var Vf$1={},H$s=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(cr,vn){var yn=cr.type.contextTypes;if(!yn)return Vf$1;var Rn=cr.stateNode;if(Rn&&Rn.__reactInternalMemoizedUnmaskedChildContext===vn)return Rn.__reactInternalMemoizedMaskedChildContext;var Bn={},Co;for(Co in yn)Bn[Co]=vn[Co];return Rn&&(cr=cr.stateNode,cr.__reactInternalMemoizedUnmaskedChildContext=vn,cr.__reactInternalMemoizedMaskedChildContext=Bn),Bn}function Zf$1(cr){return cr=cr.childContextTypes,cr!=null}function $f$1(){E$y(Wf$1),E$y(H$s)}function ag(cr,vn,yn){if(H$s.current!==Vf$1)throw Error(p$E(168));G$h(H$s,vn),G$h(Wf$1,yn)}function bg$1(cr,vn,yn){var Rn=cr.stateNode;if(vn=vn.childContextTypes,typeof Rn.getChildContext!="function")return yn;Rn=Rn.getChildContext();for(var Bn in Rn)if(!(Bn in vn))throw Error(p$E(108,Ra(cr)||"Unknown",Bn));return A$B({},yn,Rn)}function cg$1(cr){return cr=(cr=cr.stateNode)&&cr.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$s.current,G$h(H$s,cr),G$h(Wf$1,Wf$1.current),!0}function dg$1(cr,vn,yn){var Rn=cr.stateNode;if(!Rn)throw Error(p$E(169));yn?(cr=bg$1(cr,vn,Xf$1),Rn.__reactInternalMemoizedMergedChildContext=cr,E$y(Wf$1),E$y(H$s),G$h(H$s,cr)):E$y(Wf$1),G$h(Wf$1,yn)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(cr){eg$1===null?eg$1=[cr]:eg$1.push(cr)}function ig$1(cr){fg$1=!0,hg$1(cr)}function jg(){if(!gg$1&&eg$1!==null){gg$1=!0;var cr=0,vn=C$r;try{var yn=eg$1;for(C$r=1;cr<yn.length;cr++){var Rn=yn[cr];do Rn=Rn(!0);while(Rn!==null)}eg$1=null,fg$1=!1}catch(Bn){throw eg$1!==null&&(eg$1=eg$1.slice(cr+1)),ac$1(fc$1,jg),Bn}finally{C$r=vn,gg$1=!1}}return null}var kg=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg=null,rg$1=1,sg$1="";function tg$1(cr,vn){kg[lg$1++]=ng$1,kg[lg$1++]=mg$1,mg$1=cr,ng$1=vn}function ug$1(cr,vn,yn){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,qg=cr;var Rn=rg$1;cr=sg$1;var Bn=32-oc$1(Rn)-1;Rn&=~(1<<Bn),yn+=1;var Co=32-oc$1(vn)+Bn;if(30<Co){var Po=Bn-Bn%5;Co=(Rn&(1<<Po)-1).toString(32),Rn>>=Po,Bn-=Po,rg$1=1<<32-oc$1(vn)+Bn|yn<<Bn|Rn,sg$1=Co+cr}else rg$1=1<<Co|yn<<Bn|Rn,sg$1=cr}function vg$1(cr){cr.return!==null&&(tg$1(cr,1),ug$1(cr,1,0))}function wg$1(cr){for(;cr===mg$1;)mg$1=kg[--lg$1],kg[lg$1]=null,ng$1=kg[--lg$1],kg[lg$1]=null;for(;cr===qg;)qg=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I$s=!1,zg=null;function Ag$1(cr,vn){var yn=Bg(5,null,null,0);yn.elementType="DELETED",yn.stateNode=vn,yn.return=cr,vn=cr.deletions,vn===null?(cr.deletions=[yn],cr.flags|=16):vn.push(yn)}function Cg(cr,vn){switch(cr.tag){case 5:var yn=cr.type;return vn=vn.nodeType!==1||yn.toLowerCase()!==vn.nodeName.toLowerCase()?null:vn,vn!==null?(cr.stateNode=vn,xg$1=cr,yg$1=Lf$1(vn.firstChild),!0):!1;case 6:return vn=cr.pendingProps===""||vn.nodeType!==3?null:vn,vn!==null?(cr.stateNode=vn,xg$1=cr,yg$1=null,!0):!1;case 13:return vn=vn.nodeType!==8?null:vn,vn!==null?(yn=qg!==null?{id:rg$1,overflow:sg$1}:null,cr.memoizedState={dehydrated:vn,treeContext:yn,retryLane:1073741824},yn=Bg(18,null,null,0),yn.stateNode=vn,yn.return=cr,cr.child=yn,xg$1=cr,yg$1=null,!0):!1;default:return!1}}function Dg(cr){return(cr.mode&1)!==0&&(cr.flags&128)===0}function Eg$1(cr){if(I$s){var vn=yg$1;if(vn){var yn=vn;if(!Cg(cr,vn)){if(Dg(cr))throw Error(p$E(418));vn=Lf$1(yn.nextSibling);var Rn=xg$1;vn&&Cg(cr,vn)?Ag$1(Rn,yn):(cr.flags=cr.flags&-4097|2,I$s=!1,xg$1=cr)}}else{if(Dg(cr))throw Error(p$E(418));cr.flags=cr.flags&-4097|2,I$s=!1,xg$1=cr}}}function Fg(cr){for(cr=cr.return;cr!==null&&cr.tag!==5&&cr.tag!==3&&cr.tag!==13;)cr=cr.return;xg$1=cr}function Gg(cr){if(cr!==xg$1)return!1;if(!I$s)return Fg(cr),I$s=!0,!1;var vn;if((vn=cr.tag!==3)&&!(vn=cr.tag!==5)&&(vn=cr.type,vn=vn!=="head"&&vn!=="body"&&!Ef$1(cr.type,cr.memoizedProps)),vn&&(vn=yg$1)){if(Dg(cr))throw Hg(),Error(p$E(418));for(;vn;)Ag$1(cr,vn),vn=Lf$1(vn.nextSibling)}if(Fg(cr),cr.tag===13){if(cr=cr.memoizedState,cr=cr!==null?cr.dehydrated:null,!cr)throw Error(p$E(317));e:{for(cr=cr.nextSibling,vn=0;cr;){if(cr.nodeType===8){var yn=cr.data;if(yn==="/$"){if(vn===0){yg$1=Lf$1(cr.nextSibling);break e}vn--}else yn!=="$"&&yn!=="$!"&&yn!=="$?"||vn++}cr=cr.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(cr.stateNode.nextSibling):null;return!0}function Hg(){for(var cr=yg$1;cr;)cr=Lf$1(cr.nextSibling)}function Ig(){yg$1=xg$1=null,I$s=!1}function Jg(cr){zg===null?zg=[cr]:zg.push(cr)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(cr,vn,yn){if(cr=yn.ref,cr!==null&&typeof cr!="function"&&typeof cr!="object"){if(yn._owner){if(yn=yn._owner,yn){if(yn.tag!==1)throw Error(p$E(309));var Rn=yn.stateNode}if(!Rn)throw Error(p$E(147,cr));var Bn=Rn,Co=""+cr;return vn!==null&&vn.ref!==null&&typeof vn.ref=="function"&&vn.ref._stringRef===Co?vn.ref:(vn=function(Po){var To=Bn.refs;Po===null?delete To[Co]:To[Co]=Po},vn._stringRef=Co,vn)}if(typeof cr!="string")throw Error(p$E(284));if(!yn._owner)throw Error(p$E(290,cr))}return cr}function Mg$1(cr,vn){throw cr=Object.prototype.toString.call(vn),Error(p$E(31,cr==="[object Object]"?"object with keys {"+Object.keys(vn).join(", ")+"}":cr))}function Ng(cr){var vn=cr._init;return vn(cr._payload)}function Og(cr){function vn(_g,ty){if(cr){var ny=_g.deletions;ny===null?(_g.deletions=[ty],_g.flags|=16):ny.push(ty)}}function yn(_g,ty){if(!cr)return null;for(;ty!==null;)vn(_g,ty),ty=ty.sibling;return null}function Rn(_g,ty){for(_g=new Map;ty!==null;)ty.key!==null?_g.set(ty.key,ty):_g.set(ty.index,ty),ty=ty.sibling;return _g}function Bn(_g,ty){return _g=Pg(_g,ty),_g.index=0,_g.sibling=null,_g}function Co(_g,ty,ny){return _g.index=ny,cr?(ny=_g.alternate,ny!==null?(ny=ny.index,ny<ty?(_g.flags|=2,ty):ny):(_g.flags|=2,ty)):(_g.flags|=1048576,ty)}function Po(_g){return cr&&_g.alternate===null&&(_g.flags|=2),_g}function To(_g,ty,ny,iy){return ty===null||ty.tag!==6?(ty=Qg(ny,_g.mode,iy),ty.return=_g,ty):(ty=Bn(ty,ny),ty.return=_g,ty)}function Io(_g,ty,ny,iy){var oy=ny.type;return oy===ya$1?Wl(_g,ty,ny.props.children,iy,ny.key):ty!==null&&(ty.elementType===oy||typeof oy=="object"&&oy!==null&&oy.$$typeof===Ha$1&&Ng(oy)===ty.type)?(iy=Bn(ty,ny.props),iy.ref=Lg(_g,ty,ny),iy.return=_g,iy):(iy=Rg(ny.type,ny.key,ny.props,null,_g.mode,iy),iy.ref=Lg(_g,ty,ny),iy.return=_g,iy)}function $l(_g,ty,ny,iy){return ty===null||ty.tag!==4||ty.stateNode.containerInfo!==ny.containerInfo||ty.stateNode.implementation!==ny.implementation?(ty=Sg$1(ny,_g.mode,iy),ty.return=_g,ty):(ty=Bn(ty,ny.children||[]),ty.return=_g,ty)}function Wl(_g,ty,ny,iy,oy){return ty===null||ty.tag!==7?(ty=Tg(ny,_g.mode,iy,oy),ty.return=_g,ty):(ty=Bn(ty,ny),ty.return=_g,ty)}function Xl(_g,ty,ny){if(typeof ty=="string"&&ty!==""||typeof ty=="number")return ty=Qg(""+ty,_g.mode,ny),ty.return=_g,ty;if(typeof ty=="object"&&ty!==null){switch(ty.$$typeof){case va$1:return ny=Rg(ty.type,ty.key,ty.props,null,_g.mode,ny),ny.ref=Lg(_g,null,ty),ny.return=_g,ny;case wa$1:return ty=Sg$1(ty,_g.mode,ny),ty.return=_g,ty;case Ha$1:var iy=ty._init;return Xl(_g,iy(ty._payload),ny)}if(eb(ty)||Ka$1(ty))return ty=Tg(ty,_g.mode,ny,null),ty.return=_g,ty;Mg$1(_g,ty)}return null}function Yl(_g,ty,ny,iy){var oy=ty!==null?ty.key:null;if(typeof ny=="string"&&ny!==""||typeof ny=="number")return oy!==null?null:To(_g,ty,""+ny,iy);if(typeof ny=="object"&&ny!==null){switch(ny.$$typeof){case va$1:return ny.key===oy?Io(_g,ty,ny,iy):null;case wa$1:return ny.key===oy?$l(_g,ty,ny,iy):null;case Ha$1:return oy=ny._init,Yl(_g,ty,oy(ny._payload),iy)}if(eb(ny)||Ka$1(ny))return oy!==null?null:Wl(_g,ty,ny,iy,null);Mg$1(_g,ny)}return null}function Zl(_g,ty,ny,iy,oy){if(typeof iy=="string"&&iy!==""||typeof iy=="number")return _g=_g.get(ny)||null,To(ty,_g,""+iy,oy);if(typeof iy=="object"&&iy!==null){switch(iy.$$typeof){case va$1:return _g=_g.get(iy.key===null?ny:iy.key)||null,Io(ty,_g,iy,oy);case wa$1:return _g=_g.get(iy.key===null?ny:iy.key)||null,$l(ty,_g,iy,oy);case Ha$1:var ay=iy._init;return Zl(_g,ty,ny,ay(iy._payload),oy)}if(eb(iy)||Ka$1(iy))return _g=_g.get(ny)||null,Wl(ty,_g,iy,oy,null);Mg$1(ty,iy)}return null}function ey(_g,ty,ny,iy){for(var oy=null,ay=null,uy=ty,hy=ty=0,my=null;uy!==null&&hy<ny.length;hy++){uy.index>hy?(my=uy,uy=null):my=uy.sibling;var ly=Yl(_g,uy,ny[hy],iy);if(ly===null){uy===null&&(uy=my);break}cr&&uy&&ly.alternate===null&&vn(_g,uy),ty=Co(ly,ty,hy),ay===null?oy=ly:ay.sibling=ly,ay=ly,uy=my}if(hy===ny.length)return yn(_g,uy),I$s&&tg$1(_g,hy),oy;if(uy===null){for(;hy<ny.length;hy++)uy=Xl(_g,ny[hy],iy),uy!==null&&(ty=Co(uy,ty,hy),ay===null?oy=uy:ay.sibling=uy,ay=uy);return I$s&&tg$1(_g,hy),oy}for(uy=Rn(_g,uy);hy<ny.length;hy++)my=Zl(uy,_g,hy,ny[hy],iy),my!==null&&(cr&&my.alternate!==null&&uy.delete(my.key===null?hy:my.key),ty=Co(my,ty,hy),ay===null?oy=my:ay.sibling=my,ay=my);return cr&&uy.forEach(function(sy){return vn(_g,sy)}),I$s&&tg$1(_g,hy),oy}function Rm(_g,ty,ny,iy){var oy=Ka$1(ny);if(typeof oy!="function")throw Error(p$E(150));if(ny=oy.call(ny),ny==null)throw Error(p$E(151));for(var ay=oy=null,uy=ty,hy=ty=0,my=null,ly=ny.next();uy!==null&&!ly.done;hy++,ly=ny.next()){uy.index>hy?(my=uy,uy=null):my=uy.sibling;var sy=Yl(_g,uy,ly.value,iy);if(sy===null){uy===null&&(uy=my);break}cr&&uy&&sy.alternate===null&&vn(_g,uy),ty=Co(sy,ty,hy),ay===null?oy=sy:ay.sibling=sy,ay=sy,uy=my}if(ly.done)return yn(_g,uy),I$s&&tg$1(_g,hy),oy;if(uy===null){for(;!ly.done;hy++,ly=ny.next())ly=Xl(_g,ly.value,iy),ly!==null&&(ty=Co(ly,ty,hy),ay===null?oy=ly:ay.sibling=ly,ay=ly);return I$s&&tg$1(_g,hy),oy}for(uy=Rn(_g,uy);!ly.done;hy++,ly=ny.next())ly=Zl(uy,_g,hy,ly.value,iy),ly!==null&&(cr&&ly.alternate!==null&&uy.delete(ly.key===null?hy:ly.key),ty=Co(ly,ty,hy),ay===null?oy=ly:ay.sibling=ly,ay=ly);return cr&&uy.forEach(function(cy){return vn(_g,cy)}),I$s&&tg$1(_g,hy),oy}function ry(_g,ty,ny,iy){if(typeof ny=="object"&&ny!==null&&ny.type===ya$1&&ny.key===null&&(ny=ny.props.children),typeof ny=="object"&&ny!==null){switch(ny.$$typeof){case va$1:e:{for(var oy=ny.key,ay=ty;ay!==null;){if(ay.key===oy){if(oy=ny.type,oy===ya$1){if(ay.tag===7){yn(_g,ay.sibling),ty=Bn(ay,ny.props.children),ty.return=_g,_g=ty;break e}}else if(ay.elementType===oy||typeof oy=="object"&&oy!==null&&oy.$$typeof===Ha$1&&Ng(oy)===ay.type){yn(_g,ay.sibling),ty=Bn(ay,ny.props),ty.ref=Lg(_g,ay,ny),ty.return=_g,_g=ty;break e}yn(_g,ay);break}else vn(_g,ay);ay=ay.sibling}ny.type===ya$1?(ty=Tg(ny.props.children,_g.mode,iy,ny.key),ty.return=_g,_g=ty):(iy=Rg(ny.type,ny.key,ny.props,null,_g.mode,iy),iy.ref=Lg(_g,ty,ny),iy.return=_g,_g=iy)}return Po(_g);case wa$1:e:{for(ay=ny.key;ty!==null;){if(ty.key===ay)if(ty.tag===4&&ty.stateNode.containerInfo===ny.containerInfo&&ty.stateNode.implementation===ny.implementation){yn(_g,ty.sibling),ty=Bn(ty,ny.children||[]),ty.return=_g,_g=ty;break e}else{yn(_g,ty);break}else vn(_g,ty);ty=ty.sibling}ty=Sg$1(ny,_g.mode,iy),ty.return=_g,_g=ty}return Po(_g);case Ha$1:return ay=ny._init,ry(_g,ty,ay(ny._payload),iy)}if(eb(ny))return ey(_g,ty,ny,iy);if(Ka$1(ny))return Rm(_g,ty,ny,iy);Mg$1(_g,ny)}return typeof ny=="string"&&ny!==""||typeof ny=="number"?(ny=""+ny,ty!==null&&ty.tag===6?(yn(_g,ty.sibling),ty=Bn(ty,ny),ty.return=_g,_g=ty):(yn(_g,ty),ty=Qg(ny,_g.mode,iy),ty.return=_g,_g=ty),Po(_g)):yn(_g,ty)}return ry}var Ug=Og(!0),Vg=Og(!1),Wg=Uf$1(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah$1(cr){var vn=Wg.current;E$y(Wg),cr._currentValue=vn}function bh$1(cr,vn,yn){for(;cr!==null;){var Rn=cr.alternate;if((cr.childLanes&vn)!==vn?(cr.childLanes|=vn,Rn!==null&&(Rn.childLanes|=vn)):Rn!==null&&(Rn.childLanes&vn)!==vn&&(Rn.childLanes|=vn),cr===yn)break;cr=cr.return}}function ch$1(cr,vn){Xg=cr,Zg=Yg=null,cr=cr.dependencies,cr!==null&&cr.firstContext!==null&&((cr.lanes&vn)!==0&&(dh$1=!0),cr.firstContext=null)}function eh$1(cr){var vn=cr._currentValue;if(Zg!==cr)if(cr={context:cr,memoizedValue:vn,next:null},Yg===null){if(Xg===null)throw Error(p$E(308));Yg=cr,Xg.dependencies={lanes:0,firstContext:cr}}else Yg=Yg.next=cr;return vn}var fh$1=null;function gh$1(cr){fh$1===null?fh$1=[cr]:fh$1.push(cr)}function hh$1(cr,vn,yn,Rn){var Bn=vn.interleaved;return Bn===null?(yn.next=yn,gh$1(vn)):(yn.next=Bn.next,Bn.next=yn),vn.interleaved=yn,ih$1(cr,Rn)}function ih$1(cr,vn){cr.lanes|=vn;var yn=cr.alternate;for(yn!==null&&(yn.lanes|=vn),yn=cr,cr=cr.return;cr!==null;)cr.childLanes|=vn,yn=cr.alternate,yn!==null&&(yn.childLanes|=vn),yn=cr,cr=cr.return;return yn.tag===3?yn.stateNode:null}var jh$1=!1;function kh$1(cr){cr.updateQueue={baseState:cr.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh$1(cr,vn){cr=cr.updateQueue,vn.updateQueue===cr&&(vn.updateQueue={baseState:cr.baseState,firstBaseUpdate:cr.firstBaseUpdate,lastBaseUpdate:cr.lastBaseUpdate,shared:cr.shared,effects:cr.effects})}function mh$1(cr,vn){return{eventTime:cr,lane:vn,tag:0,payload:null,callback:null,next:null}}function nh$1(cr,vn,yn){var Rn=cr.updateQueue;if(Rn===null)return null;if(Rn=Rn.shared,(K$k&2)!==0){var Bn=Rn.pending;return Bn===null?vn.next=vn:(vn.next=Bn.next,Bn.next=vn),Rn.pending=vn,ih$1(cr,yn)}return Bn=Rn.interleaved,Bn===null?(vn.next=vn,gh$1(Rn)):(vn.next=Bn.next,Bn.next=vn),Rn.interleaved=vn,ih$1(cr,yn)}function oh$1(cr,vn,yn){if(vn=vn.updateQueue,vn!==null&&(vn=vn.shared,(yn&4194240)!==0)){var Rn=vn.lanes;Rn&=cr.pendingLanes,yn|=Rn,vn.lanes=yn,Cc$1(cr,yn)}}function ph$1(cr,vn){var yn=cr.updateQueue,Rn=cr.alternate;if(Rn!==null&&(Rn=Rn.updateQueue,yn===Rn)){var Bn=null,Co=null;if(yn=yn.firstBaseUpdate,yn!==null){do{var Po={eventTime:yn.eventTime,lane:yn.lane,tag:yn.tag,payload:yn.payload,callback:yn.callback,next:null};Co===null?Bn=Co=Po:Co=Co.next=Po,yn=yn.next}while(yn!==null);Co===null?Bn=Co=vn:Co=Co.next=vn}else Bn=Co=vn;yn={baseState:Rn.baseState,firstBaseUpdate:Bn,lastBaseUpdate:Co,shared:Rn.shared,effects:Rn.effects},cr.updateQueue=yn;return}cr=yn.lastBaseUpdate,cr===null?yn.firstBaseUpdate=vn:cr.next=vn,yn.lastBaseUpdate=vn}function qh$1(cr,vn,yn,Rn){var Bn=cr.updateQueue;jh$1=!1;var Co=Bn.firstBaseUpdate,Po=Bn.lastBaseUpdate,To=Bn.shared.pending;if(To!==null){Bn.shared.pending=null;var Io=To,$l=Io.next;Io.next=null,Po===null?Co=$l:Po.next=$l,Po=Io;var Wl=cr.alternate;Wl!==null&&(Wl=Wl.updateQueue,To=Wl.lastBaseUpdate,To!==Po&&(To===null?Wl.firstBaseUpdate=$l:To.next=$l,Wl.lastBaseUpdate=Io))}if(Co!==null){var Xl=Bn.baseState;Po=0,Wl=$l=Io=null,To=Co;do{var Yl=To.lane,Zl=To.eventTime;if((Rn&Yl)===Yl){Wl!==null&&(Wl=Wl.next={eventTime:Zl,lane:0,tag:To.tag,payload:To.payload,callback:To.callback,next:null});e:{var ey=cr,Rm=To;switch(Yl=vn,Zl=yn,Rm.tag){case 1:if(ey=Rm.payload,typeof ey=="function"){Xl=ey.call(Zl,Xl,Yl);break e}Xl=ey;break e;case 3:ey.flags=ey.flags&-65537|128;case 0:if(ey=Rm.payload,Yl=typeof ey=="function"?ey.call(Zl,Xl,Yl):ey,Yl==null)break e;Xl=A$B({},Xl,Yl);break e;case 2:jh$1=!0}}To.callback!==null&&To.lane!==0&&(cr.flags|=64,Yl=Bn.effects,Yl===null?Bn.effects=[To]:Yl.push(To))}else Zl={eventTime:Zl,lane:Yl,tag:To.tag,payload:To.payload,callback:To.callback,next:null},Wl===null?($l=Wl=Zl,Io=Xl):Wl=Wl.next=Zl,Po|=Yl;if(To=To.next,To===null){if(To=Bn.shared.pending,To===null)break;Yl=To,To=Yl.next,Yl.next=null,Bn.lastBaseUpdate=Yl,Bn.shared.pending=null}}while(1);if(Wl===null&&(Io=Xl),Bn.baseState=Io,Bn.firstBaseUpdate=$l,Bn.lastBaseUpdate=Wl,vn=Bn.shared.interleaved,vn!==null){Bn=vn;do Po|=Bn.lane,Bn=Bn.next;while(Bn!==vn)}else Co===null&&(Bn.shared.lanes=0);rh$1|=Po,cr.lanes=Po,cr.memoizedState=Xl}}function sh$1(cr,vn,yn){if(cr=vn.effects,vn.effects=null,cr!==null)for(vn=0;vn<cr.length;vn++){var Rn=cr[vn],Bn=Rn.callback;if(Bn!==null){if(Rn.callback=null,Rn=yn,typeof Bn!="function")throw Error(p$E(191,Bn));Bn.call(Rn)}}}var th$1={},uh$1=Uf$1(th$1),vh$1=Uf$1(th$1),wh$1=Uf$1(th$1);function xh$1(cr){if(cr===th$1)throw Error(p$E(174));return cr}function yh$1(cr,vn){switch(G$h(wh$1,vn),G$h(vh$1,cr),G$h(uh$1,th$1),cr=vn.nodeType,cr){case 9:case 11:vn=(vn=vn.documentElement)?vn.namespaceURI:lb(null,"");break;default:cr=cr===8?vn.parentNode:vn,vn=cr.namespaceURI||null,cr=cr.tagName,vn=lb(vn,cr)}E$y(uh$1),G$h(uh$1,vn)}function zh$1(){E$y(uh$1),E$y(vh$1),E$y(wh$1)}function Ah$1(cr){xh$1(wh$1.current);var vn=xh$1(uh$1.current),yn=lb(vn,cr.type);vn!==yn&&(G$h(vh$1,cr),G$h(uh$1,yn))}function Bh$1(cr){vh$1.current===cr&&(E$y(uh$1),E$y(vh$1))}var L$q=Uf$1(0);function Ch$1(cr){for(var vn=cr;vn!==null;){if(vn.tag===13){var yn=vn.memoizedState;if(yn!==null&&(yn=yn.dehydrated,yn===null||yn.data==="$?"||yn.data==="$!"))return vn}else if(vn.tag===19&&vn.memoizedProps.revealOrder!==void 0){if((vn.flags&128)!==0)return vn}else if(vn.child!==null){vn.child.return=vn,vn=vn.child;continue}if(vn===cr)break;for(;vn.sibling===null;){if(vn.return===null||vn.return===cr)return null;vn=vn.return}vn.sibling.return=vn.return,vn=vn.sibling}return null}var Dh$1=[];function Eh$1(){for(var cr=0;cr<Dh$1.length;cr++)Dh$1[cr]._workInProgressVersionPrimary=null;Dh$1.length=0}var Fh$1=ua$1.ReactCurrentDispatcher,Gh$1=ua$1.ReactCurrentBatchConfig,Hh$1=0,M$w=null,N$i=null,O$o=null,Ih$1=!1,Jh$1=!1,Kh$1=0,Lh$1=0;function P$y(){throw Error(p$E(321))}function Mh$1(cr,vn){if(vn===null)return!1;for(var yn=0;yn<vn.length&&yn<cr.length;yn++)if(!He$3(cr[yn],vn[yn]))return!1;return!0}function Nh$1(cr,vn,yn,Rn,Bn,Co){if(Hh$1=Co,M$w=vn,vn.memoizedState=null,vn.updateQueue=null,vn.lanes=0,Fh$1.current=cr===null||cr.memoizedState===null?Oh$1:Ph$1,cr=yn(Rn,Bn),Jh$1){Co=0;do{if(Jh$1=!1,Kh$1=0,25<=Co)throw Error(p$E(301));Co+=1,O$o=N$i=null,vn.updateQueue=null,Fh$1.current=Qh$1,cr=yn(Rn,Bn)}while(Jh$1)}if(Fh$1.current=Rh$1,vn=N$i!==null&&N$i.next!==null,Hh$1=0,O$o=N$i=M$w=null,Ih$1=!1,vn)throw Error(p$E(300));return cr}function Sh$1(){var cr=Kh$1!==0;return Kh$1=0,cr}function Th$1(){var cr={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$o===null?M$w.memoizedState=O$o=cr:O$o=O$o.next=cr,O$o}function Uh$1(){if(N$i===null){var cr=M$w.alternate;cr=cr!==null?cr.memoizedState:null}else cr=N$i.next;var vn=O$o===null?M$w.memoizedState:O$o.next;if(vn!==null)O$o=vn,N$i=cr;else{if(cr===null)throw Error(p$E(310));N$i=cr,cr={memoizedState:N$i.memoizedState,baseState:N$i.baseState,baseQueue:N$i.baseQueue,queue:N$i.queue,next:null},O$o===null?M$w.memoizedState=O$o=cr:O$o=O$o.next=cr}return O$o}function Vh$1(cr,vn){return typeof vn=="function"?vn(cr):vn}function Wh$1(cr){var vn=Uh$1(),yn=vn.queue;if(yn===null)throw Error(p$E(311));yn.lastRenderedReducer=cr;var Rn=N$i,Bn=Rn.baseQueue,Co=yn.pending;if(Co!==null){if(Bn!==null){var Po=Bn.next;Bn.next=Co.next,Co.next=Po}Rn.baseQueue=Bn=Co,yn.pending=null}if(Bn!==null){Co=Bn.next,Rn=Rn.baseState;var To=Po=null,Io=null,$l=Co;do{var Wl=$l.lane;if((Hh$1&Wl)===Wl)Io!==null&&(Io=Io.next={lane:0,action:$l.action,hasEagerState:$l.hasEagerState,eagerState:$l.eagerState,next:null}),Rn=$l.hasEagerState?$l.eagerState:cr(Rn,$l.action);else{var Xl={lane:Wl,action:$l.action,hasEagerState:$l.hasEagerState,eagerState:$l.eagerState,next:null};Io===null?(To=Io=Xl,Po=Rn):Io=Io.next=Xl,M$w.lanes|=Wl,rh$1|=Wl}$l=$l.next}while($l!==null&&$l!==Co);Io===null?Po=Rn:Io.next=To,He$3(Rn,vn.memoizedState)||(dh$1=!0),vn.memoizedState=Rn,vn.baseState=Po,vn.baseQueue=Io,yn.lastRenderedState=Rn}if(cr=yn.interleaved,cr!==null){Bn=cr;do Co=Bn.lane,M$w.lanes|=Co,rh$1|=Co,Bn=Bn.next;while(Bn!==cr)}else Bn===null&&(yn.lanes=0);return[vn.memoizedState,yn.dispatch]}function Xh$1(cr){var vn=Uh$1(),yn=vn.queue;if(yn===null)throw Error(p$E(311));yn.lastRenderedReducer=cr;var Rn=yn.dispatch,Bn=yn.pending,Co=vn.memoizedState;if(Bn!==null){yn.pending=null;var Po=Bn=Bn.next;do Co=cr(Co,Po.action),Po=Po.next;while(Po!==Bn);He$3(Co,vn.memoizedState)||(dh$1=!0),vn.memoizedState=Co,vn.baseQueue===null&&(vn.baseState=Co),yn.lastRenderedState=Co}return[Co,Rn]}function Yh$1(){}function Zh$1(cr,vn){var yn=M$w,Rn=Uh$1(),Bn=vn(),Co=!He$3(Rn.memoizedState,Bn);if(Co&&(Rn.memoizedState=Bn,dh$1=!0),Rn=Rn.queue,$h$1(ai$1.bind(null,yn,Rn,cr),[cr]),Rn.getSnapshot!==vn||Co||O$o!==null&&O$o.memoizedState.tag&1){if(yn.flags|=2048,bi$1(9,ci$1.bind(null,yn,Rn,Bn,vn),void 0,null),Q$f===null)throw Error(p$E(349));(Hh$1&30)!==0||di$1(yn,vn,Bn)}return Bn}function di$1(cr,vn,yn){cr.flags|=16384,cr={getSnapshot:vn,value:yn},vn=M$w.updateQueue,vn===null?(vn={lastEffect:null,stores:null},M$w.updateQueue=vn,vn.stores=[cr]):(yn=vn.stores,yn===null?vn.stores=[cr]:yn.push(cr))}function ci$1(cr,vn,yn,Rn){vn.value=yn,vn.getSnapshot=Rn,ei$1(vn)&&fi$1(cr)}function ai$1(cr,vn,yn){return yn(function(){ei$1(vn)&&fi$1(cr)})}function ei$1(cr){var vn=cr.getSnapshot;cr=cr.value;try{var yn=vn();return!He$3(cr,yn)}catch{return!0}}function fi$1(cr){var vn=ih$1(cr,1);vn!==null&&gi$1(vn,cr,1,-1)}function hi$1(cr){var vn=Th$1();return typeof cr=="function"&&(cr=cr()),vn.memoizedState=vn.baseState=cr,cr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh$1,lastRenderedState:cr},vn.queue=cr,cr=cr.dispatch=ii$1.bind(null,M$w,cr),[vn.memoizedState,cr]}function bi$1(cr,vn,yn,Rn){return cr={tag:cr,create:vn,destroy:yn,deps:Rn,next:null},vn=M$w.updateQueue,vn===null?(vn={lastEffect:null,stores:null},M$w.updateQueue=vn,vn.lastEffect=cr.next=cr):(yn=vn.lastEffect,yn===null?vn.lastEffect=cr.next=cr:(Rn=yn.next,yn.next=cr,cr.next=Rn,vn.lastEffect=cr)),cr}function ji$1(){return Uh$1().memoizedState}function ki$1(cr,vn,yn,Rn){var Bn=Th$1();M$w.flags|=cr,Bn.memoizedState=bi$1(1|vn,yn,void 0,Rn===void 0?null:Rn)}function li$1(cr,vn,yn,Rn){var Bn=Uh$1();Rn=Rn===void 0?null:Rn;var Co=void 0;if(N$i!==null){var Po=N$i.memoizedState;if(Co=Po.destroy,Rn!==null&&Mh$1(Rn,Po.deps)){Bn.memoizedState=bi$1(vn,yn,Co,Rn);return}}M$w.flags|=cr,Bn.memoizedState=bi$1(1|vn,yn,Co,Rn)}function mi$1(cr,vn){return ki$1(8390656,8,cr,vn)}function $h$1(cr,vn){return li$1(2048,8,cr,vn)}function ni$1(cr,vn){return li$1(4,2,cr,vn)}function oi$1(cr,vn){return li$1(4,4,cr,vn)}function pi$1(cr,vn){if(typeof vn=="function")return cr=cr(),vn(cr),function(){vn(null)};if(vn!=null)return cr=cr(),vn.current=cr,function(){vn.current=null}}function qi(cr,vn,yn){return yn=yn!=null?yn.concat([cr]):null,li$1(4,4,pi$1.bind(null,vn,cr),yn)}function ri$1(){}function si$1(cr,vn){var yn=Uh$1();vn=vn===void 0?null:vn;var Rn=yn.memoizedState;return Rn!==null&&vn!==null&&Mh$1(vn,Rn[1])?Rn[0]:(yn.memoizedState=[cr,vn],cr)}function ti$1(cr,vn){var yn=Uh$1();vn=vn===void 0?null:vn;var Rn=yn.memoizedState;return Rn!==null&&vn!==null&&Mh$1(vn,Rn[1])?Rn[0]:(cr=cr(),yn.memoizedState=[cr,vn],cr)}function ui$2(cr,vn,yn){return(Hh$1&21)===0?(cr.baseState&&(cr.baseState=!1,dh$1=!0),cr.memoizedState=yn):(He$3(yn,vn)||(yn=yc$1(),M$w.lanes|=yn,rh$1|=yn,cr.baseState=!0),vn)}function vi$1(cr,vn){var yn=C$r;C$r=yn!==0&&4>yn?yn:4,cr(!0);var Rn=Gh$1.transition;Gh$1.transition={};try{cr(!1),vn()}finally{C$r=yn,Gh$1.transition=Rn}}function wi$1(){return Uh$1().memoizedState}function xi$1(cr,vn,yn){var Rn=yi$1(cr);if(yn={lane:Rn,action:yn,hasEagerState:!1,eagerState:null,next:null},zi$1(cr))Ai$1(vn,yn);else if(yn=hh$1(cr,vn,yn,Rn),yn!==null){var Bn=R$r();gi$1(yn,cr,Rn,Bn),Bi$1(yn,vn,Rn)}}function ii$1(cr,vn,yn){var Rn=yi$1(cr),Bn={lane:Rn,action:yn,hasEagerState:!1,eagerState:null,next:null};if(zi$1(cr))Ai$1(vn,Bn);else{var Co=cr.alternate;if(cr.lanes===0&&(Co===null||Co.lanes===0)&&(Co=vn.lastRenderedReducer,Co!==null))try{var Po=vn.lastRenderedState,To=Co(Po,yn);if(Bn.hasEagerState=!0,Bn.eagerState=To,He$3(To,Po)){var Io=vn.interleaved;Io===null?(Bn.next=Bn,gh$1(vn)):(Bn.next=Io.next,Io.next=Bn),vn.interleaved=Bn;return}}catch{}finally{}yn=hh$1(cr,vn,Bn,Rn),yn!==null&&(Bn=R$r(),gi$1(yn,cr,Rn,Bn),Bi$1(yn,vn,Rn))}}function zi$1(cr){var vn=cr.alternate;return cr===M$w||vn!==null&&vn===M$w}function Ai$1(cr,vn){Jh$1=Ih$1=!0;var yn=cr.pending;yn===null?vn.next=vn:(vn.next=yn.next,yn.next=vn),cr.pending=vn}function Bi$1(cr,vn,yn){if((yn&4194240)!==0){var Rn=vn.lanes;Rn&=cr.pendingLanes,yn|=Rn,vn.lanes=yn,Cc$1(cr,yn)}}var Rh$1={readContext:eh$1,useCallback:P$y,useContext:P$y,useEffect:P$y,useImperativeHandle:P$y,useInsertionEffect:P$y,useLayoutEffect:P$y,useMemo:P$y,useReducer:P$y,useRef:P$y,useState:P$y,useDebugValue:P$y,useDeferredValue:P$y,useTransition:P$y,useMutableSource:P$y,useSyncExternalStore:P$y,useId:P$y,unstable_isNewReconciler:!1},Oh$1={readContext:eh$1,useCallback:function(cr,vn){return Th$1().memoizedState=[cr,vn===void 0?null:vn],cr},useContext:eh$1,useEffect:mi$1,useImperativeHandle:function(cr,vn,yn){return yn=yn!=null?yn.concat([cr]):null,ki$1(4194308,4,pi$1.bind(null,vn,cr),yn)},useLayoutEffect:function(cr,vn){return ki$1(4194308,4,cr,vn)},useInsertionEffect:function(cr,vn){return ki$1(4,2,cr,vn)},useMemo:function(cr,vn){var yn=Th$1();return vn=vn===void 0?null:vn,cr=cr(),yn.memoizedState=[cr,vn],cr},useReducer:function(cr,vn,yn){var Rn=Th$1();return vn=yn!==void 0?yn(vn):vn,Rn.memoizedState=Rn.baseState=vn,cr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:vn},Rn.queue=cr,cr=cr.dispatch=xi$1.bind(null,M$w,cr),[Rn.memoizedState,cr]},useRef:function(cr){var vn=Th$1();return cr={current:cr},vn.memoizedState=cr},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(cr){return Th$1().memoizedState=cr},useTransition:function(){var cr=hi$1(!1),vn=cr[0];return cr=vi$1.bind(null,cr[1]),Th$1().memoizedState=cr,[vn,cr]},useMutableSource:function(){},useSyncExternalStore:function(cr,vn,yn){var Rn=M$w,Bn=Th$1();if(I$s){if(yn===void 0)throw Error(p$E(407));yn=yn()}else{if(yn=vn(),Q$f===null)throw Error(p$E(349));(Hh$1&30)!==0||di$1(Rn,vn,yn)}Bn.memoizedState=yn;var Co={value:yn,getSnapshot:vn};return Bn.queue=Co,mi$1(ai$1.bind(null,Rn,Co,cr),[cr]),Rn.flags|=2048,bi$1(9,ci$1.bind(null,Rn,Co,yn,vn),void 0,null),yn},useId:function(){var cr=Th$1(),vn=Q$f.identifierPrefix;if(I$s){var yn=sg$1,Rn=rg$1;yn=(Rn&~(1<<32-oc$1(Rn)-1)).toString(32)+yn,vn=":"+vn+"R"+yn,yn=Kh$1++,0<yn&&(vn+="H"+yn.toString(32)),vn+=":"}else yn=Lh$1++,vn=":"+vn+"r"+yn.toString(32)+":";return cr.memoizedState=vn},unstable_isNewReconciler:!1},Ph$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh$1,useRef:ji$1,useState:function(){return Wh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(cr){var vn=Uh$1();return ui$2(vn,N$i.memoizedState,cr)},useTransition:function(){var cr=Wh$1(Vh$1)[0],vn=Uh$1().memoizedState;return[cr,vn]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1},Qh$1={readContext:eh$1,useCallback:si$1,useContext:eh$1,useEffect:$h$1,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh$1,useRef:ji$1,useState:function(){return Xh$1(Vh$1)},useDebugValue:ri$1,useDeferredValue:function(cr){var vn=Uh$1();return N$i===null?vn.memoizedState=cr:ui$2(vn,N$i.memoizedState,cr)},useTransition:function(){var cr=Xh$1(Vh$1)[0],vn=Uh$1().memoizedState;return[cr,vn]},useMutableSource:Yh$1,useSyncExternalStore:Zh$1,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(cr,vn){if(cr&&cr.defaultProps){vn=A$B({},vn),cr=cr.defaultProps;for(var yn in cr)vn[yn]===void 0&&(vn[yn]=cr[yn]);return vn}return vn}function Di(cr,vn,yn,Rn){vn=cr.memoizedState,yn=yn(Rn,vn),yn=yn==null?vn:A$B({},vn,yn),cr.memoizedState=yn,cr.lanes===0&&(cr.updateQueue.baseState=yn)}var Ei$1={isMounted:function(cr){return(cr=cr._reactInternals)?Vb(cr)===cr:!1},enqueueSetState:function(cr,vn,yn){cr=cr._reactInternals;var Rn=R$r(),Bn=yi$1(cr),Co=mh$1(Rn,Bn);Co.payload=vn,yn!=null&&(Co.callback=yn),vn=nh$1(cr,Co,Bn),vn!==null&&(gi$1(vn,cr,Bn,Rn),oh$1(vn,cr,Bn))},enqueueReplaceState:function(cr,vn,yn){cr=cr._reactInternals;var Rn=R$r(),Bn=yi$1(cr),Co=mh$1(Rn,Bn);Co.tag=1,Co.payload=vn,yn!=null&&(Co.callback=yn),vn=nh$1(cr,Co,Bn),vn!==null&&(gi$1(vn,cr,Bn,Rn),oh$1(vn,cr,Bn))},enqueueForceUpdate:function(cr,vn){cr=cr._reactInternals;var yn=R$r(),Rn=yi$1(cr),Bn=mh$1(yn,Rn);Bn.tag=2,vn!=null&&(Bn.callback=vn),vn=nh$1(cr,Bn,Rn),vn!==null&&(gi$1(vn,cr,Rn,yn),oh$1(vn,cr,Rn))}};function Fi$2(cr,vn,yn,Rn,Bn,Co,Po){return cr=cr.stateNode,typeof cr.shouldComponentUpdate=="function"?cr.shouldComponentUpdate(Rn,Co,Po):vn.prototype&&vn.prototype.isPureReactComponent?!Ie$3(yn,Rn)||!Ie$3(Bn,Co):!0}function Gi$1(cr,vn,yn){var Rn=!1,Bn=Vf$1,Co=vn.contextType;return typeof Co=="object"&&Co!==null?Co=eh$1(Co):(Bn=Zf$1(vn)?Xf$1:H$s.current,Rn=vn.contextTypes,Co=(Rn=Rn!=null)?Yf$1(cr,Bn):Vf$1),vn=new vn(yn,Co),cr.memoizedState=vn.state!==null&&vn.state!==void 0?vn.state:null,vn.updater=Ei$1,cr.stateNode=vn,vn._reactInternals=cr,Rn&&(cr=cr.stateNode,cr.__reactInternalMemoizedUnmaskedChildContext=Bn,cr.__reactInternalMemoizedMaskedChildContext=Co),vn}function Hi$1(cr,vn,yn,Rn){cr=vn.state,typeof vn.componentWillReceiveProps=="function"&&vn.componentWillReceiveProps(yn,Rn),typeof vn.UNSAFE_componentWillReceiveProps=="function"&&vn.UNSAFE_componentWillReceiveProps(yn,Rn),vn.state!==cr&&Ei$1.enqueueReplaceState(vn,vn.state,null)}function Ii$1(cr,vn,yn,Rn){var Bn=cr.stateNode;Bn.props=yn,Bn.state=cr.memoizedState,Bn.refs={},kh$1(cr);var Co=vn.contextType;typeof Co=="object"&&Co!==null?Bn.context=eh$1(Co):(Co=Zf$1(vn)?Xf$1:H$s.current,Bn.context=Yf$1(cr,Co)),Bn.state=cr.memoizedState,Co=vn.getDerivedStateFromProps,typeof Co=="function"&&(Di(cr,vn,Co,yn),Bn.state=cr.memoizedState),typeof vn.getDerivedStateFromProps=="function"||typeof Bn.getSnapshotBeforeUpdate=="function"||typeof Bn.UNSAFE_componentWillMount!="function"&&typeof Bn.componentWillMount!="function"||(vn=Bn.state,typeof Bn.componentWillMount=="function"&&Bn.componentWillMount(),typeof Bn.UNSAFE_componentWillMount=="function"&&Bn.UNSAFE_componentWillMount(),vn!==Bn.state&&Ei$1.enqueueReplaceState(Bn,Bn.state,null),qh$1(cr,yn,Bn,Rn),Bn.state=cr.memoizedState),typeof Bn.componentDidMount=="function"&&(cr.flags|=4194308)}function Ji$2(cr,vn){try{var yn="",Rn=vn;do yn+=Pa(Rn),Rn=Rn.return;while(Rn);var Bn=yn}catch(Co){Bn=`
Error generating stack: `+Co.message+`
`+Co.stack}return{value:cr,source:vn,stack:Bn,digest:null}}function Ki$1(cr,vn,yn){return{value:cr,source:null,stack:yn!=null?yn:null,digest:vn!=null?vn:null}}function Li$1(cr,vn){try{console.error(vn.value)}catch(yn){setTimeout(function(){throw yn})}}var Mi$1=typeof WeakMap=="function"?WeakMap:Map;function Ni(cr,vn,yn){yn=mh$1(-1,yn),yn.tag=3,yn.payload={element:null};var Rn=vn.value;return yn.callback=function(){Oi$1||(Oi$1=!0,Pi$1=Rn),Li$1(cr,vn)},yn}function Qi$2(cr,vn,yn){yn=mh$1(-1,yn),yn.tag=3;var Rn=cr.type.getDerivedStateFromError;if(typeof Rn=="function"){var Bn=vn.value;yn.payload=function(){return Rn(Bn)},yn.callback=function(){Li$1(cr,vn)}}var Co=cr.stateNode;return Co!==null&&typeof Co.componentDidCatch=="function"&&(yn.callback=function(){Li$1(cr,vn),typeof Rn!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var Po=vn.stack;this.componentDidCatch(vn.value,{componentStack:Po!==null?Po:""})}),yn}function Si$1(cr,vn,yn){var Rn=cr.pingCache;if(Rn===null){Rn=cr.pingCache=new Mi$1;var Bn=new Set;Rn.set(vn,Bn)}else Bn=Rn.get(vn),Bn===void 0&&(Bn=new Set,Rn.set(vn,Bn));Bn.has(yn)||(Bn.add(yn),cr=Ti$1.bind(null,cr,vn,yn),vn.then(cr,cr))}function Ui$1(cr){do{var vn;if((vn=cr.tag===13)&&(vn=cr.memoizedState,vn=vn!==null?vn.dehydrated!==null:!0),vn)return cr;cr=cr.return}while(cr!==null);return null}function Vi(cr,vn,yn,Rn,Bn){return(cr.mode&1)===0?(cr===vn?cr.flags|=65536:(cr.flags|=128,yn.flags|=131072,yn.flags&=-52805,yn.tag===1&&(yn.alternate===null?yn.tag=17:(vn=mh$1(-1,1),vn.tag=2,nh$1(yn,vn,1))),yn.lanes|=1),cr):(cr.flags|=65536,cr.lanes=Bn,cr)}var Wi$1=ua$1.ReactCurrentOwner,dh$1=!1;function Xi$1(cr,vn,yn,Rn){vn.child=cr===null?Vg(vn,null,yn,Rn):Ug(vn,cr.child,yn,Rn)}function Yi$1(cr,vn,yn,Rn,Bn){yn=yn.render;var Co=vn.ref;return ch$1(vn,Bn),Rn=Nh$1(cr,vn,yn,Rn,Co,Bn),yn=Sh$1(),cr!==null&&!dh$1?(vn.updateQueue=cr.updateQueue,vn.flags&=-2053,cr.lanes&=~Bn,Zi$1(cr,vn,Bn)):(I$s&&yn&&vg$1(vn),vn.flags|=1,Xi$1(cr,vn,Rn,Bn),vn.child)}function $i$1(cr,vn,yn,Rn,Bn){if(cr===null){var Co=yn.type;return typeof Co=="function"&&!aj(Co)&&Co.defaultProps===void 0&&yn.compare===null&&yn.defaultProps===void 0?(vn.tag=15,vn.type=Co,bj(cr,vn,Co,Rn,Bn)):(cr=Rg(yn.type,null,Rn,vn,vn.mode,Bn),cr.ref=vn.ref,cr.return=vn,vn.child=cr)}if(Co=cr.child,(cr.lanes&Bn)===0){var Po=Co.memoizedProps;if(yn=yn.compare,yn=yn!==null?yn:Ie$3,yn(Po,Rn)&&cr.ref===vn.ref)return Zi$1(cr,vn,Bn)}return vn.flags|=1,cr=Pg(Co,Rn),cr.ref=vn.ref,cr.return=vn,vn.child=cr}function bj(cr,vn,yn,Rn,Bn){if(cr!==null){var Co=cr.memoizedProps;if(Ie$3(Co,Rn)&&cr.ref===vn.ref)if(dh$1=!1,vn.pendingProps=Rn=Co,(cr.lanes&Bn)!==0)(cr.flags&131072)!==0&&(dh$1=!0);else return vn.lanes=cr.lanes,Zi$1(cr,vn,Bn)}return cj(cr,vn,yn,Rn,Bn)}function dj(cr,vn,yn){var Rn=vn.pendingProps,Bn=Rn.children,Co=cr!==null?cr.memoizedState:null;if(Rn.mode==="hidden")if((vn.mode&1)===0)vn.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$h(ej,fj),fj|=yn;else{if((yn&1073741824)===0)return cr=Co!==null?Co.baseLanes|yn:yn,vn.lanes=vn.childLanes=1073741824,vn.memoizedState={baseLanes:cr,cachePool:null,transitions:null},vn.updateQueue=null,G$h(ej,fj),fj|=cr,null;vn.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn=Co!==null?Co.baseLanes:yn,G$h(ej,fj),fj|=Rn}else Co!==null?(Rn=Co.baseLanes|yn,vn.memoizedState=null):Rn=yn,G$h(ej,fj),fj|=Rn;return Xi$1(cr,vn,Bn,yn),vn.child}function gj(cr,vn){var yn=vn.ref;(cr===null&&yn!==null||cr!==null&&cr.ref!==yn)&&(vn.flags|=512,vn.flags|=2097152)}function cj(cr,vn,yn,Rn,Bn){var Co=Zf$1(yn)?Xf$1:H$s.current;return Co=Yf$1(vn,Co),ch$1(vn,Bn),yn=Nh$1(cr,vn,yn,Rn,Co,Bn),Rn=Sh$1(),cr!==null&&!dh$1?(vn.updateQueue=cr.updateQueue,vn.flags&=-2053,cr.lanes&=~Bn,Zi$1(cr,vn,Bn)):(I$s&&Rn&&vg$1(vn),vn.flags|=1,Xi$1(cr,vn,yn,Bn),vn.child)}function hj(cr,vn,yn,Rn,Bn){if(Zf$1(yn)){var Co=!0;cg$1(vn)}else Co=!1;if(ch$1(vn,Bn),vn.stateNode===null)ij(cr,vn),Gi$1(vn,yn,Rn),Ii$1(vn,yn,Rn,Bn),Rn=!0;else if(cr===null){var Po=vn.stateNode,To=vn.memoizedProps;Po.props=To;var Io=Po.context,$l=yn.contextType;typeof $l=="object"&&$l!==null?$l=eh$1($l):($l=Zf$1(yn)?Xf$1:H$s.current,$l=Yf$1(vn,$l));var Wl=yn.getDerivedStateFromProps,Xl=typeof Wl=="function"||typeof Po.getSnapshotBeforeUpdate=="function";Xl||typeof Po.UNSAFE_componentWillReceiveProps!="function"&&typeof Po.componentWillReceiveProps!="function"||(To!==Rn||Io!==$l)&&Hi$1(vn,Po,Rn,$l),jh$1=!1;var Yl=vn.memoizedState;Po.state=Yl,qh$1(vn,Rn,Po,Bn),Io=vn.memoizedState,To!==Rn||Yl!==Io||Wf$1.current||jh$1?(typeof Wl=="function"&&(Di(vn,yn,Wl,Rn),Io=vn.memoizedState),(To=jh$1||Fi$2(vn,yn,To,Rn,Yl,Io,$l))?(Xl||typeof Po.UNSAFE_componentWillMount!="function"&&typeof Po.componentWillMount!="function"||(typeof Po.componentWillMount=="function"&&Po.componentWillMount(),typeof Po.UNSAFE_componentWillMount=="function"&&Po.UNSAFE_componentWillMount()),typeof Po.componentDidMount=="function"&&(vn.flags|=4194308)):(typeof Po.componentDidMount=="function"&&(vn.flags|=4194308),vn.memoizedProps=Rn,vn.memoizedState=Io),Po.props=Rn,Po.state=Io,Po.context=$l,Rn=To):(typeof Po.componentDidMount=="function"&&(vn.flags|=4194308),Rn=!1)}else{Po=vn.stateNode,lh$1(cr,vn),To=vn.memoizedProps,$l=vn.type===vn.elementType?To:Ci$1(vn.type,To),Po.props=$l,Xl=vn.pendingProps,Yl=Po.context,Io=yn.contextType,typeof Io=="object"&&Io!==null?Io=eh$1(Io):(Io=Zf$1(yn)?Xf$1:H$s.current,Io=Yf$1(vn,Io));var Zl=yn.getDerivedStateFromProps;(Wl=typeof Zl=="function"||typeof Po.getSnapshotBeforeUpdate=="function")||typeof Po.UNSAFE_componentWillReceiveProps!="function"&&typeof Po.componentWillReceiveProps!="function"||(To!==Xl||Yl!==Io)&&Hi$1(vn,Po,Rn,Io),jh$1=!1,Yl=vn.memoizedState,Po.state=Yl,qh$1(vn,Rn,Po,Bn);var ey=vn.memoizedState;To!==Xl||Yl!==ey||Wf$1.current||jh$1?(typeof Zl=="function"&&(Di(vn,yn,Zl,Rn),ey=vn.memoizedState),($l=jh$1||Fi$2(vn,yn,$l,Rn,Yl,ey,Io)||!1)?(Wl||typeof Po.UNSAFE_componentWillUpdate!="function"&&typeof Po.componentWillUpdate!="function"||(typeof Po.componentWillUpdate=="function"&&Po.componentWillUpdate(Rn,ey,Io),typeof Po.UNSAFE_componentWillUpdate=="function"&&Po.UNSAFE_componentWillUpdate(Rn,ey,Io)),typeof Po.componentDidUpdate=="function"&&(vn.flags|=4),typeof Po.getSnapshotBeforeUpdate=="function"&&(vn.flags|=1024)):(typeof Po.componentDidUpdate!="function"||To===cr.memoizedProps&&Yl===cr.memoizedState||(vn.flags|=4),typeof Po.getSnapshotBeforeUpdate!="function"||To===cr.memoizedProps&&Yl===cr.memoizedState||(vn.flags|=1024),vn.memoizedProps=Rn,vn.memoizedState=ey),Po.props=Rn,Po.state=ey,Po.context=Io,Rn=$l):(typeof Po.componentDidUpdate!="function"||To===cr.memoizedProps&&Yl===cr.memoizedState||(vn.flags|=4),typeof Po.getSnapshotBeforeUpdate!="function"||To===cr.memoizedProps&&Yl===cr.memoizedState||(vn.flags|=1024),Rn=!1)}return jj(cr,vn,yn,Rn,Co,Bn)}function jj(cr,vn,yn,Rn,Bn,Co){gj(cr,vn);var Po=(vn.flags&128)!==0;if(!Rn&&!Po)return Bn&&dg$1(vn,yn,!1),Zi$1(cr,vn,Co);Rn=vn.stateNode,Wi$1.current=vn;var To=Po&&typeof yn.getDerivedStateFromError!="function"?null:Rn.render();return vn.flags|=1,cr!==null&&Po?(vn.child=Ug(vn,cr.child,null,Co),vn.child=Ug(vn,null,To,Co)):Xi$1(cr,vn,To,Co),vn.memoizedState=Rn.state,Bn&&dg$1(vn,yn,!0),vn.child}function kj(cr){var vn=cr.stateNode;vn.pendingContext?ag(cr,vn.pendingContext,vn.pendingContext!==vn.context):vn.context&&ag(cr,vn.context,!1),yh$1(cr,vn.containerInfo)}function lj(cr,vn,yn,Rn,Bn){return Ig(),Jg(Bn),vn.flags|=256,Xi$1(cr,vn,yn,Rn),vn.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(cr){return{baseLanes:cr,cachePool:null,transitions:null}}function oj(cr,vn,yn){var Rn=vn.pendingProps,Bn=L$q.current,Co=!1,Po=(vn.flags&128)!==0,To;if((To=Po)||(To=cr!==null&&cr.memoizedState===null?!1:(Bn&2)!==0),To?(Co=!0,vn.flags&=-129):(cr===null||cr.memoizedState!==null)&&(Bn|=1),G$h(L$q,Bn&1),cr===null)return Eg$1(vn),cr=vn.memoizedState,cr!==null&&(cr=cr.dehydrated,cr!==null)?((vn.mode&1)===0?vn.lanes=1:cr.data==="$!"?vn.lanes=8:vn.lanes=1073741824,null):(Po=Rn.children,cr=Rn.fallback,Co?(Rn=vn.mode,Co=vn.child,Po={mode:"hidden",children:Po},(Rn&1)===0&&Co!==null?(Co.childLanes=0,Co.pendingProps=Po):Co=pj(Po,Rn,0,null),cr=Tg(cr,Rn,yn,null),Co.return=vn,cr.return=vn,Co.sibling=cr,vn.child=Co,vn.child.memoizedState=nj(yn),vn.memoizedState=mj,cr):qj(vn,Po));if(Bn=cr.memoizedState,Bn!==null&&(To=Bn.dehydrated,To!==null))return rj(cr,vn,Po,Rn,To,Bn,yn);if(Co){Co=Rn.fallback,Po=vn.mode,Bn=cr.child,To=Bn.sibling;var Io={mode:"hidden",children:Rn.children};return(Po&1)===0&&vn.child!==Bn?(Rn=vn.child,Rn.childLanes=0,Rn.pendingProps=Io,vn.deletions=null):(Rn=Pg(Bn,Io),Rn.subtreeFlags=Bn.subtreeFlags&14680064),To!==null?Co=Pg(To,Co):(Co=Tg(Co,Po,yn,null),Co.flags|=2),Co.return=vn,Rn.return=vn,Rn.sibling=Co,vn.child=Rn,Rn=Co,Co=vn.child,Po=cr.child.memoizedState,Po=Po===null?nj(yn):{baseLanes:Po.baseLanes|yn,cachePool:null,transitions:Po.transitions},Co.memoizedState=Po,Co.childLanes=cr.childLanes&~yn,vn.memoizedState=mj,Rn}return Co=cr.child,cr=Co.sibling,Rn=Pg(Co,{mode:"visible",children:Rn.children}),(vn.mode&1)===0&&(Rn.lanes=yn),Rn.return=vn,Rn.sibling=null,cr!==null&&(yn=vn.deletions,yn===null?(vn.deletions=[cr],vn.flags|=16):yn.push(cr)),vn.child=Rn,vn.memoizedState=null,Rn}function qj(cr,vn){return vn=pj({mode:"visible",children:vn},cr.mode,0,null),vn.return=cr,cr.child=vn}function sj(cr,vn,yn,Rn){return Rn!==null&&Jg(Rn),Ug(vn,cr.child,null,yn),cr=qj(vn,vn.pendingProps.children),cr.flags|=2,vn.memoizedState=null,cr}function rj(cr,vn,yn,Rn,Bn,Co,Po){if(yn)return vn.flags&256?(vn.flags&=-257,Rn=Ki$1(Error(p$E(422))),sj(cr,vn,Po,Rn)):vn.memoizedState!==null?(vn.child=cr.child,vn.flags|=128,null):(Co=Rn.fallback,Bn=vn.mode,Rn=pj({mode:"visible",children:Rn.children},Bn,0,null),Co=Tg(Co,Bn,Po,null),Co.flags|=2,Rn.return=vn,Co.return=vn,Rn.sibling=Co,vn.child=Rn,(vn.mode&1)!==0&&Ug(vn,cr.child,null,Po),vn.child.memoizedState=nj(Po),vn.memoizedState=mj,Co);if((vn.mode&1)===0)return sj(cr,vn,Po,null);if(Bn.data==="$!"){if(Rn=Bn.nextSibling&&Bn.nextSibling.dataset,Rn)var To=Rn.dgst;return Rn=To,Co=Error(p$E(419)),Rn=Ki$1(Co,Rn,void 0),sj(cr,vn,Po,Rn)}if(To=(Po&cr.childLanes)!==0,dh$1||To){if(Rn=Q$f,Rn!==null){switch(Po&-Po){case 4:Bn=2;break;case 16:Bn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Bn=32;break;case 536870912:Bn=268435456;break;default:Bn=0}Bn=(Bn&(Rn.suspendedLanes|Po))!==0?0:Bn,Bn!==0&&Bn!==Co.retryLane&&(Co.retryLane=Bn,ih$1(cr,Bn),gi$1(Rn,cr,Bn,-1))}return tj(),Rn=Ki$1(Error(p$E(421))),sj(cr,vn,Po,Rn)}return Bn.data==="$?"?(vn.flags|=128,vn.child=cr.child,vn=uj.bind(null,cr),Bn._reactRetry=vn,null):(cr=Co.treeContext,yg$1=Lf$1(Bn.nextSibling),xg$1=vn,I$s=!0,zg=null,cr!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,rg$1=cr.id,sg$1=cr.overflow,qg=vn),vn=qj(vn,Rn.children),vn.flags|=4096,vn)}function vj(cr,vn,yn){cr.lanes|=vn;var Rn=cr.alternate;Rn!==null&&(Rn.lanes|=vn),bh$1(cr.return,vn,yn)}function wj(cr,vn,yn,Rn,Bn){var Co=cr.memoizedState;Co===null?cr.memoizedState={isBackwards:vn,rendering:null,renderingStartTime:0,last:Rn,tail:yn,tailMode:Bn}:(Co.isBackwards=vn,Co.rendering=null,Co.renderingStartTime=0,Co.last=Rn,Co.tail=yn,Co.tailMode=Bn)}function xj(cr,vn,yn){var Rn=vn.pendingProps,Bn=Rn.revealOrder,Co=Rn.tail;if(Xi$1(cr,vn,Rn.children,yn),Rn=L$q.current,(Rn&2)!==0)Rn=Rn&1|2,vn.flags|=128;else{if(cr!==null&&(cr.flags&128)!==0)e:for(cr=vn.child;cr!==null;){if(cr.tag===13)cr.memoizedState!==null&&vj(cr,yn,vn);else if(cr.tag===19)vj(cr,yn,vn);else if(cr.child!==null){cr.child.return=cr,cr=cr.child;continue}if(cr===vn)break e;for(;cr.sibling===null;){if(cr.return===null||cr.return===vn)break e;cr=cr.return}cr.sibling.return=cr.return,cr=cr.sibling}Rn&=1}if(G$h(L$q,Rn),(vn.mode&1)===0)vn.memoizedState=null;else switch(Bn){case"forwards":for(yn=vn.child,Bn=null;yn!==null;)cr=yn.alternate,cr!==null&&Ch$1(cr)===null&&(Bn=yn),yn=yn.sibling;yn=Bn,yn===null?(Bn=vn.child,vn.child=null):(Bn=yn.sibling,yn.sibling=null),wj(vn,!1,Bn,yn,Co);break;case"backwards":for(yn=null,Bn=vn.child,vn.child=null;Bn!==null;){if(cr=Bn.alternate,cr!==null&&Ch$1(cr)===null){vn.child=Bn;break}cr=Bn.sibling,Bn.sibling=yn,yn=Bn,Bn=cr}wj(vn,!0,yn,null,Co);break;case"together":wj(vn,!1,null,null,void 0);break;default:vn.memoizedState=null}return vn.child}function ij(cr,vn){(vn.mode&1)===0&&cr!==null&&(cr.alternate=null,vn.alternate=null,vn.flags|=2)}function Zi$1(cr,vn,yn){if(cr!==null&&(vn.dependencies=cr.dependencies),rh$1|=vn.lanes,(yn&vn.childLanes)===0)return null;if(cr!==null&&vn.child!==cr.child)throw Error(p$E(153));if(vn.child!==null){for(cr=vn.child,yn=Pg(cr,cr.pendingProps),vn.child=yn,yn.return=vn;cr.sibling!==null;)cr=cr.sibling,yn=yn.sibling=Pg(cr,cr.pendingProps),yn.return=vn;yn.sibling=null}return vn.child}function yj(cr,vn,yn){switch(vn.tag){case 3:kj(vn),Ig();break;case 5:Ah$1(vn);break;case 1:Zf$1(vn.type)&&cg$1(vn);break;case 4:yh$1(vn,vn.stateNode.containerInfo);break;case 10:var Rn=vn.type._context,Bn=vn.memoizedProps.value;G$h(Wg,Rn._currentValue),Rn._currentValue=Bn;break;case 13:if(Rn=vn.memoizedState,Rn!==null)return Rn.dehydrated!==null?(G$h(L$q,L$q.current&1),vn.flags|=128,null):(yn&vn.child.childLanes)!==0?oj(cr,vn,yn):(G$h(L$q,L$q.current&1),cr=Zi$1(cr,vn,yn),cr!==null?cr.sibling:null);G$h(L$q,L$q.current&1);break;case 19:if(Rn=(yn&vn.childLanes)!==0,(cr.flags&128)!==0){if(Rn)return xj(cr,vn,yn);vn.flags|=128}if(Bn=vn.memoizedState,Bn!==null&&(Bn.rendering=null,Bn.tail=null,Bn.lastEffect=null),G$h(L$q,L$q.current),Rn)break;return null;case 22:case 23:return vn.lanes=0,dj(cr,vn,yn)}return Zi$1(cr,vn,yn)}var zj,Aj,Bj,Cj;zj=function(cr,vn){for(var yn=vn.child;yn!==null;){if(yn.tag===5||yn.tag===6)cr.appendChild(yn.stateNode);else if(yn.tag!==4&&yn.child!==null){yn.child.return=yn,yn=yn.child;continue}if(yn===vn)break;for(;yn.sibling===null;){if(yn.return===null||yn.return===vn)return;yn=yn.return}yn.sibling.return=yn.return,yn=yn.sibling}};Aj=function(){};Bj=function(cr,vn,yn,Rn){var Bn=cr.memoizedProps;if(Bn!==Rn){cr=vn.stateNode,xh$1(uh$1.current);var Co=null;switch(yn){case"input":Bn=Ya$1(cr,Bn),Rn=Ya$1(cr,Rn),Co=[];break;case"select":Bn=A$B({},Bn,{value:void 0}),Rn=A$B({},Rn,{value:void 0}),Co=[];break;case"textarea":Bn=gb(cr,Bn),Rn=gb(cr,Rn),Co=[];break;default:typeof Bn.onClick!="function"&&typeof Rn.onClick=="function"&&(cr.onclick=Bf$1)}ub(yn,Rn);var Po;yn=null;for($l in Bn)if(!Rn.hasOwnProperty($l)&&Bn.hasOwnProperty($l)&&Bn[$l]!=null)if($l==="style"){var To=Bn[$l];for(Po in To)To.hasOwnProperty(Po)&&(yn||(yn={}),yn[Po]="")}else $l!=="dangerouslySetInnerHTML"&&$l!=="children"&&$l!=="suppressContentEditableWarning"&&$l!=="suppressHydrationWarning"&&$l!=="autoFocus"&&(ea$1.hasOwnProperty($l)?Co||(Co=[]):(Co=Co||[]).push($l,null));for($l in Rn){var Io=Rn[$l];if(To=Bn!=null?Bn[$l]:void 0,Rn.hasOwnProperty($l)&&Io!==To&&(Io!=null||To!=null))if($l==="style")if(To){for(Po in To)!To.hasOwnProperty(Po)||Io&&Io.hasOwnProperty(Po)||(yn||(yn={}),yn[Po]="");for(Po in Io)Io.hasOwnProperty(Po)&&To[Po]!==Io[Po]&&(yn||(yn={}),yn[Po]=Io[Po])}else yn||(Co||(Co=[]),Co.push($l,yn)),yn=Io;else $l==="dangerouslySetInnerHTML"?(Io=Io?Io.__html:void 0,To=To?To.__html:void 0,Io!=null&&To!==Io&&(Co=Co||[]).push($l,Io)):$l==="children"?typeof Io!="string"&&typeof Io!="number"||(Co=Co||[]).push($l,""+Io):$l!=="suppressContentEditableWarning"&&$l!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty($l)?(Io!=null&&$l==="onScroll"&&D$s("scroll",cr),Co||To===Io||(Co=[])):(Co=Co||[]).push($l,Io))}yn&&(Co=Co||[]).push("style",yn);var $l=Co;(vn.updateQueue=$l)&&(vn.flags|=4)}};Cj=function(cr,vn,yn,Rn){yn!==Rn&&(vn.flags|=4)};function Dj(cr,vn){if(!I$s)switch(cr.tailMode){case"hidden":vn=cr.tail;for(var yn=null;vn!==null;)vn.alternate!==null&&(yn=vn),vn=vn.sibling;yn===null?cr.tail=null:yn.sibling=null;break;case"collapsed":yn=cr.tail;for(var Rn=null;yn!==null;)yn.alternate!==null&&(Rn=yn),yn=yn.sibling;Rn===null?vn||cr.tail===null?cr.tail=null:cr.tail.sibling=null:Rn.sibling=null}}function S$v(cr){var vn=cr.alternate!==null&&cr.alternate.child===cr.child,yn=0,Rn=0;if(vn)for(var Bn=cr.child;Bn!==null;)yn|=Bn.lanes|Bn.childLanes,Rn|=Bn.subtreeFlags&14680064,Rn|=Bn.flags&14680064,Bn.return=cr,Bn=Bn.sibling;else for(Bn=cr.child;Bn!==null;)yn|=Bn.lanes|Bn.childLanes,Rn|=Bn.subtreeFlags,Rn|=Bn.flags,Bn.return=cr,Bn=Bn.sibling;return cr.subtreeFlags|=Rn,cr.childLanes=yn,vn}function Ej(cr,vn,yn){var Rn=vn.pendingProps;switch(wg$1(vn),vn.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$v(vn),null;case 1:return Zf$1(vn.type)&&$f$1(),S$v(vn),null;case 3:return Rn=vn.stateNode,zh$1(),E$y(Wf$1),E$y(H$s),Eh$1(),Rn.pendingContext&&(Rn.context=Rn.pendingContext,Rn.pendingContext=null),(cr===null||cr.child===null)&&(Gg(vn)?vn.flags|=4:cr===null||cr.memoizedState.isDehydrated&&(vn.flags&256)===0||(vn.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(cr,vn),S$v(vn),null;case 5:Bh$1(vn);var Bn=xh$1(wh$1.current);if(yn=vn.type,cr!==null&&vn.stateNode!=null)Bj(cr,vn,yn,Rn,Bn),cr.ref!==vn.ref&&(vn.flags|=512,vn.flags|=2097152);else{if(!Rn){if(vn.stateNode===null)throw Error(p$E(166));return S$v(vn),null}if(cr=xh$1(uh$1.current),Gg(vn)){Rn=vn.stateNode,yn=vn.type;var Co=vn.memoizedProps;switch(Rn[Of$1]=vn,Rn[Pf$1]=Co,cr=(vn.mode&1)!==0,yn){case"dialog":D$s("cancel",Rn),D$s("close",Rn);break;case"iframe":case"object":case"embed":D$s("load",Rn);break;case"video":case"audio":for(Bn=0;Bn<lf$1.length;Bn++)D$s(lf$1[Bn],Rn);break;case"source":D$s("error",Rn);break;case"img":case"image":case"link":D$s("error",Rn),D$s("load",Rn);break;case"details":D$s("toggle",Rn);break;case"input":Za$1(Rn,Co),D$s("invalid",Rn);break;case"select":Rn._wrapperState={wasMultiple:!!Co.multiple},D$s("invalid",Rn);break;case"textarea":hb(Rn,Co),D$s("invalid",Rn)}ub(yn,Co),Bn=null;for(var Po in Co)if(Co.hasOwnProperty(Po)){var To=Co[Po];Po==="children"?typeof To=="string"?Rn.textContent!==To&&(Co.suppressHydrationWarning!==!0&&Af$1(Rn.textContent,To,cr),Bn=["children",To]):typeof To=="number"&&Rn.textContent!==""+To&&(Co.suppressHydrationWarning!==!0&&Af$1(Rn.textContent,To,cr),Bn=["children",""+To]):ea$1.hasOwnProperty(Po)&&To!=null&&Po==="onScroll"&&D$s("scroll",Rn)}switch(yn){case"input":Va$1(Rn),db(Rn,Co,!0);break;case"textarea":Va$1(Rn),jb(Rn);break;case"select":case"option":break;default:typeof Co.onClick=="function"&&(Rn.onclick=Bf$1)}Rn=Bn,vn.updateQueue=Rn,Rn!==null&&(vn.flags|=4)}else{Po=Bn.nodeType===9?Bn:Bn.ownerDocument,cr==="http://www.w3.org/1999/xhtml"&&(cr=kb(yn)),cr==="http://www.w3.org/1999/xhtml"?yn==="script"?(cr=Po.createElement("div"),cr.innerHTML="<script><\/script>",cr=cr.removeChild(cr.firstChild)):typeof Rn.is=="string"?cr=Po.createElement(yn,{is:Rn.is}):(cr=Po.createElement(yn),yn==="select"&&(Po=cr,Rn.multiple?Po.multiple=!0:Rn.size&&(Po.size=Rn.size))):cr=Po.createElementNS(cr,yn),cr[Of$1]=vn,cr[Pf$1]=Rn,zj(cr,vn,!1,!1),vn.stateNode=cr;e:{switch(Po=vb(yn,Rn),yn){case"dialog":D$s("cancel",cr),D$s("close",cr),Bn=Rn;break;case"iframe":case"object":case"embed":D$s("load",cr),Bn=Rn;break;case"video":case"audio":for(Bn=0;Bn<lf$1.length;Bn++)D$s(lf$1[Bn],cr);Bn=Rn;break;case"source":D$s("error",cr),Bn=Rn;break;case"img":case"image":case"link":D$s("error",cr),D$s("load",cr),Bn=Rn;break;case"details":D$s("toggle",cr),Bn=Rn;break;case"input":Za$1(cr,Rn),Bn=Ya$1(cr,Rn),D$s("invalid",cr);break;case"option":Bn=Rn;break;case"select":cr._wrapperState={wasMultiple:!!Rn.multiple},Bn=A$B({},Rn,{value:void 0}),D$s("invalid",cr);break;case"textarea":hb(cr,Rn),Bn=gb(cr,Rn),D$s("invalid",cr);break;default:Bn=Rn}ub(yn,Bn),To=Bn;for(Co in To)if(To.hasOwnProperty(Co)){var Io=To[Co];Co==="style"?sb(cr,Io):Co==="dangerouslySetInnerHTML"?(Io=Io?Io.__html:void 0,Io!=null&&nb(cr,Io)):Co==="children"?typeof Io=="string"?(yn!=="textarea"||Io!=="")&&ob(cr,Io):typeof Io=="number"&&ob(cr,""+Io):Co!=="suppressContentEditableWarning"&&Co!=="suppressHydrationWarning"&&Co!=="autoFocus"&&(ea$1.hasOwnProperty(Co)?Io!=null&&Co==="onScroll"&&D$s("scroll",cr):Io!=null&&ta$1(cr,Co,Io,Po))}switch(yn){case"input":Va$1(cr),db(cr,Rn,!1);break;case"textarea":Va$1(cr),jb(cr);break;case"option":Rn.value!=null&&cr.setAttribute("value",""+Sa$1(Rn.value));break;case"select":cr.multiple=!!Rn.multiple,Co=Rn.value,Co!=null?fb(cr,!!Rn.multiple,Co,!1):Rn.defaultValue!=null&&fb(cr,!!Rn.multiple,Rn.defaultValue,!0);break;default:typeof Bn.onClick=="function"&&(cr.onclick=Bf$1)}switch(yn){case"button":case"input":case"select":case"textarea":Rn=!!Rn.autoFocus;break e;case"img":Rn=!0;break e;default:Rn=!1}}Rn&&(vn.flags|=4)}vn.ref!==null&&(vn.flags|=512,vn.flags|=2097152)}return S$v(vn),null;case 6:if(cr&&vn.stateNode!=null)Cj(cr,vn,cr.memoizedProps,Rn);else{if(typeof Rn!="string"&&vn.stateNode===null)throw Error(p$E(166));if(yn=xh$1(wh$1.current),xh$1(uh$1.current),Gg(vn)){if(Rn=vn.stateNode,yn=vn.memoizedProps,Rn[Of$1]=vn,(Co=Rn.nodeValue!==yn)&&(cr=xg$1,cr!==null))switch(cr.tag){case 3:Af$1(Rn.nodeValue,yn,(cr.mode&1)!==0);break;case 5:cr.memoizedProps.suppressHydrationWarning!==!0&&Af$1(Rn.nodeValue,yn,(cr.mode&1)!==0)}Co&&(vn.flags|=4)}else Rn=(yn.nodeType===9?yn:yn.ownerDocument).createTextNode(Rn),Rn[Of$1]=vn,vn.stateNode=Rn}return S$v(vn),null;case 13:if(E$y(L$q),Rn=vn.memoizedState,cr===null||cr.memoizedState!==null&&cr.memoizedState.dehydrated!==null){if(I$s&&yg$1!==null&&(vn.mode&1)!==0&&(vn.flags&128)===0)Hg(),Ig(),vn.flags|=98560,Co=!1;else if(Co=Gg(vn),Rn!==null&&Rn.dehydrated!==null){if(cr===null){if(!Co)throw Error(p$E(318));if(Co=vn.memoizedState,Co=Co!==null?Co.dehydrated:null,!Co)throw Error(p$E(317));Co[Of$1]=vn}else Ig(),(vn.flags&128)===0&&(vn.memoizedState=null),vn.flags|=4;S$v(vn),Co=!1}else zg!==null&&(Fj(zg),zg=null),Co=!0;if(!Co)return vn.flags&65536?vn:null}return(vn.flags&128)!==0?(vn.lanes=yn,vn):(Rn=Rn!==null,Rn!==(cr!==null&&cr.memoizedState!==null)&&Rn&&(vn.child.flags|=8192,(vn.mode&1)!==0&&(cr===null||(L$q.current&1)!==0?T$o===0&&(T$o=3):tj())),vn.updateQueue!==null&&(vn.flags|=4),S$v(vn),null);case 4:return zh$1(),Aj(cr,vn),cr===null&&sf$1(vn.stateNode.containerInfo),S$v(vn),null;case 10:return ah$1(vn.type._context),S$v(vn),null;case 17:return Zf$1(vn.type)&&$f$1(),S$v(vn),null;case 19:if(E$y(L$q),Co=vn.memoizedState,Co===null)return S$v(vn),null;if(Rn=(vn.flags&128)!==0,Po=Co.rendering,Po===null)if(Rn)Dj(Co,!1);else{if(T$o!==0||cr!==null&&(cr.flags&128)!==0)for(cr=vn.child;cr!==null;){if(Po=Ch$1(cr),Po!==null){for(vn.flags|=128,Dj(Co,!1),Rn=Po.updateQueue,Rn!==null&&(vn.updateQueue=Rn,vn.flags|=4),vn.subtreeFlags=0,Rn=yn,yn=vn.child;yn!==null;)Co=yn,cr=Rn,Co.flags&=14680066,Po=Co.alternate,Po===null?(Co.childLanes=0,Co.lanes=cr,Co.child=null,Co.subtreeFlags=0,Co.memoizedProps=null,Co.memoizedState=null,Co.updateQueue=null,Co.dependencies=null,Co.stateNode=null):(Co.childLanes=Po.childLanes,Co.lanes=Po.lanes,Co.child=Po.child,Co.subtreeFlags=0,Co.deletions=null,Co.memoizedProps=Po.memoizedProps,Co.memoizedState=Po.memoizedState,Co.updateQueue=Po.updateQueue,Co.type=Po.type,cr=Po.dependencies,Co.dependencies=cr===null?null:{lanes:cr.lanes,firstContext:cr.firstContext}),yn=yn.sibling;return G$h(L$q,L$q.current&1|2),vn.child}cr=cr.sibling}Co.tail!==null&&B$t()>Gj&&(vn.flags|=128,Rn=!0,Dj(Co,!1),vn.lanes=4194304)}else{if(!Rn)if(cr=Ch$1(Po),cr!==null){if(vn.flags|=128,Rn=!0,yn=cr.updateQueue,yn!==null&&(vn.updateQueue=yn,vn.flags|=4),Dj(Co,!0),Co.tail===null&&Co.tailMode==="hidden"&&!Po.alternate&&!I$s)return S$v(vn),null}else 2*B$t()-Co.renderingStartTime>Gj&&yn!==1073741824&&(vn.flags|=128,Rn=!0,Dj(Co,!1),vn.lanes=4194304);Co.isBackwards?(Po.sibling=vn.child,vn.child=Po):(yn=Co.last,yn!==null?yn.sibling=Po:vn.child=Po,Co.last=Po)}return Co.tail!==null?(vn=Co.tail,Co.rendering=vn,Co.tail=vn.sibling,Co.renderingStartTime=B$t(),vn.sibling=null,yn=L$q.current,G$h(L$q,Rn?yn&1|2:yn&1),vn):(S$v(vn),null);case 22:case 23:return Hj(),Rn=vn.memoizedState!==null,cr!==null&&cr.memoizedState!==null!==Rn&&(vn.flags|=8192),Rn&&(vn.mode&1)!==0?(fj&1073741824)!==0&&(S$v(vn),vn.subtreeFlags&6&&(vn.flags|=8192)):S$v(vn),null;case 24:return null;case 25:return null}throw Error(p$E(156,vn.tag))}function Ij(cr,vn){switch(wg$1(vn),vn.tag){case 1:return Zf$1(vn.type)&&$f$1(),cr=vn.flags,cr&65536?(vn.flags=cr&-65537|128,vn):null;case 3:return zh$1(),E$y(Wf$1),E$y(H$s),Eh$1(),cr=vn.flags,(cr&65536)!==0&&(cr&128)===0?(vn.flags=cr&-65537|128,vn):null;case 5:return Bh$1(vn),null;case 13:if(E$y(L$q),cr=vn.memoizedState,cr!==null&&cr.dehydrated!==null){if(vn.alternate===null)throw Error(p$E(340));Ig()}return cr=vn.flags,cr&65536?(vn.flags=cr&-65537|128,vn):null;case 19:return E$y(L$q),null;case 4:return zh$1(),null;case 10:return ah$1(vn.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$h=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$e=null;function Lj(cr,vn){var yn=cr.ref;if(yn!==null)if(typeof yn=="function")try{yn(null)}catch(Rn){W$h(cr,vn,Rn)}else yn.current=null}function Mj(cr,vn,yn){try{yn()}catch(Rn){W$h(cr,vn,Rn)}}var Nj=!1;function Oj(cr,vn){if(Cf$1=dd$1,cr=Me$2(),Ne$4(cr)){if("selectionStart"in cr)var yn={start:cr.selectionStart,end:cr.selectionEnd};else e:{yn=(yn=cr.ownerDocument)&&yn.defaultView||window;var Rn=yn.getSelection&&yn.getSelection();if(Rn&&Rn.rangeCount!==0){yn=Rn.anchorNode;var Bn=Rn.anchorOffset,Co=Rn.focusNode;Rn=Rn.focusOffset;try{yn.nodeType,Co.nodeType}catch{yn=null;break e}var Po=0,To=-1,Io=-1,$l=0,Wl=0,Xl=cr,Yl=null;t:for(;;){for(var Zl;Xl!==yn||Bn!==0&&Xl.nodeType!==3||(To=Po+Bn),Xl!==Co||Rn!==0&&Xl.nodeType!==3||(Io=Po+Rn),Xl.nodeType===3&&(Po+=Xl.nodeValue.length),(Zl=Xl.firstChild)!==null;)Yl=Xl,Xl=Zl;for(;;){if(Xl===cr)break t;if(Yl===yn&&++$l===Bn&&(To=Po),Yl===Co&&++Wl===Rn&&(Io=Po),(Zl=Xl.nextSibling)!==null)break;Xl=Yl,Yl=Xl.parentNode}Xl=Zl}yn=To===-1||Io===-1?null:{start:To,end:Io}}else yn=null}yn=yn||{start:0,end:0}}else yn=null;for(Df$1={focusedElem:cr,selectionRange:yn},dd$1=!1,V$e=vn;V$e!==null;)if(vn=V$e,cr=vn.child,(vn.subtreeFlags&1028)!==0&&cr!==null)cr.return=vn,V$e=cr;else for(;V$e!==null;){vn=V$e;try{var ey=vn.alternate;if((vn.flags&1024)!==0)switch(vn.tag){case 0:case 11:case 15:break;case 1:if(ey!==null){var Rm=ey.memoizedProps,ry=ey.memoizedState,_g=vn.stateNode,ty=_g.getSnapshotBeforeUpdate(vn.elementType===vn.type?Rm:Ci$1(vn.type,Rm),ry);_g.__reactInternalSnapshotBeforeUpdate=ty}break;case 3:var ny=vn.stateNode.containerInfo;ny.nodeType===1?ny.textContent="":ny.nodeType===9&&ny.documentElement&&ny.removeChild(ny.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$E(163))}}catch(iy){W$h(vn,vn.return,iy)}if(cr=vn.sibling,cr!==null){cr.return=vn.return,V$e=cr;break}V$e=vn.return}return ey=Nj,Nj=!1,ey}function Pj(cr,vn,yn){var Rn=vn.updateQueue;if(Rn=Rn!==null?Rn.lastEffect:null,Rn!==null){var Bn=Rn=Rn.next;do{if((Bn.tag&cr)===cr){var Co=Bn.destroy;Bn.destroy=void 0,Co!==void 0&&Mj(vn,yn,Co)}Bn=Bn.next}while(Bn!==Rn)}}function Qj(cr,vn){if(vn=vn.updateQueue,vn=vn!==null?vn.lastEffect:null,vn!==null){var yn=vn=vn.next;do{if((yn.tag&cr)===cr){var Rn=yn.create;yn.destroy=Rn()}yn=yn.next}while(yn!==vn)}}function Rj(cr){var vn=cr.ref;if(vn!==null){var yn=cr.stateNode;switch(cr.tag){case 5:cr=yn;break;default:cr=yn}typeof vn=="function"?vn(cr):vn.current=cr}}function Sj(cr){var vn=cr.alternate;vn!==null&&(cr.alternate=null,Sj(vn)),cr.child=null,cr.deletions=null,cr.sibling=null,cr.tag===5&&(vn=cr.stateNode,vn!==null&&(delete vn[Of$1],delete vn[Pf$1],delete vn[of$1],delete vn[Qf$1],delete vn[Rf$1])),cr.stateNode=null,cr.return=null,cr.dependencies=null,cr.memoizedProps=null,cr.memoizedState=null,cr.pendingProps=null,cr.stateNode=null,cr.updateQueue=null}function Tj(cr){return cr.tag===5||cr.tag===3||cr.tag===4}function Uj(cr){e:for(;;){for(;cr.sibling===null;){if(cr.return===null||Tj(cr.return))return null;cr=cr.return}for(cr.sibling.return=cr.return,cr=cr.sibling;cr.tag!==5&&cr.tag!==6&&cr.tag!==18;){if(cr.flags&2||cr.child===null||cr.tag===4)continue e;cr.child.return=cr,cr=cr.child}if(!(cr.flags&2))return cr.stateNode}}function Vj(cr,vn,yn){var Rn=cr.tag;if(Rn===5||Rn===6)cr=cr.stateNode,vn?yn.nodeType===8?yn.parentNode.insertBefore(cr,vn):yn.insertBefore(cr,vn):(yn.nodeType===8?(vn=yn.parentNode,vn.insertBefore(cr,yn)):(vn=yn,vn.appendChild(cr)),yn=yn._reactRootContainer,yn!=null||vn.onclick!==null||(vn.onclick=Bf$1));else if(Rn!==4&&(cr=cr.child,cr!==null))for(Vj(cr,vn,yn),cr=cr.sibling;cr!==null;)Vj(cr,vn,yn),cr=cr.sibling}function Wj(cr,vn,yn){var Rn=cr.tag;if(Rn===5||Rn===6)cr=cr.stateNode,vn?yn.insertBefore(cr,vn):yn.appendChild(cr);else if(Rn!==4&&(cr=cr.child,cr!==null))for(Wj(cr,vn,yn),cr=cr.sibling;cr!==null;)Wj(cr,vn,yn),cr=cr.sibling}var X$d=null,Xj=!1;function Yj(cr,vn,yn){for(yn=yn.child;yn!==null;)Zj(cr,vn,yn),yn=yn.sibling}function Zj(cr,vn,yn){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,yn)}catch{}switch(yn.tag){case 5:U$h||Lj(yn,vn);case 6:var Rn=X$d,Bn=Xj;X$d=null,Yj(cr,vn,yn),X$d=Rn,Xj=Bn,X$d!==null&&(Xj?(cr=X$d,yn=yn.stateNode,cr.nodeType===8?cr.parentNode.removeChild(yn):cr.removeChild(yn)):X$d.removeChild(yn.stateNode));break;case 18:X$d!==null&&(Xj?(cr=X$d,yn=yn.stateNode,cr.nodeType===8?Kf$1(cr.parentNode,yn):cr.nodeType===1&&Kf$1(cr,yn),bd$1(cr)):Kf$1(X$d,yn.stateNode));break;case 4:Rn=X$d,Bn=Xj,X$d=yn.stateNode.containerInfo,Xj=!0,Yj(cr,vn,yn),X$d=Rn,Xj=Bn;break;case 0:case 11:case 14:case 15:if(!U$h&&(Rn=yn.updateQueue,Rn!==null&&(Rn=Rn.lastEffect,Rn!==null))){Bn=Rn=Rn.next;do{var Co=Bn,Po=Co.destroy;Co=Co.tag,Po!==void 0&&((Co&2)!==0||(Co&4)!==0)&&Mj(yn,vn,Po),Bn=Bn.next}while(Bn!==Rn)}Yj(cr,vn,yn);break;case 1:if(!U$h&&(Lj(yn,vn),Rn=yn.stateNode,typeof Rn.componentWillUnmount=="function"))try{Rn.props=yn.memoizedProps,Rn.state=yn.memoizedState,Rn.componentWillUnmount()}catch(To){W$h(yn,vn,To)}Yj(cr,vn,yn);break;case 21:Yj(cr,vn,yn);break;case 22:yn.mode&1?(U$h=(Rn=U$h)||yn.memoizedState!==null,Yj(cr,vn,yn),U$h=Rn):Yj(cr,vn,yn);break;default:Yj(cr,vn,yn)}}function ak(cr){var vn=cr.updateQueue;if(vn!==null){cr.updateQueue=null;var yn=cr.stateNode;yn===null&&(yn=cr.stateNode=new Kj),vn.forEach(function(Rn){var Bn=bk.bind(null,cr,Rn);yn.has(Rn)||(yn.add(Rn),Rn.then(Bn,Bn))})}}function ck(cr,vn){var yn=vn.deletions;if(yn!==null)for(var Rn=0;Rn<yn.length;Rn++){var Bn=yn[Rn];try{var Co=cr,Po=vn,To=Po;e:for(;To!==null;){switch(To.tag){case 5:X$d=To.stateNode,Xj=!1;break e;case 3:X$d=To.stateNode.containerInfo,Xj=!0;break e;case 4:X$d=To.stateNode.containerInfo,Xj=!0;break e}To=To.return}if(X$d===null)throw Error(p$E(160));Zj(Co,Po,Bn),X$d=null,Xj=!1;var Io=Bn.alternate;Io!==null&&(Io.return=null),Bn.return=null}catch($l){W$h(Bn,vn,$l)}}if(vn.subtreeFlags&12854)for(vn=vn.child;vn!==null;)dk(vn,cr),vn=vn.sibling}function dk(cr,vn){var yn=cr.alternate,Rn=cr.flags;switch(cr.tag){case 0:case 11:case 14:case 15:if(ck(vn,cr),ek(cr),Rn&4){try{Pj(3,cr,cr.return),Qj(3,cr)}catch(Rm){W$h(cr,cr.return,Rm)}try{Pj(5,cr,cr.return)}catch(Rm){W$h(cr,cr.return,Rm)}}break;case 1:ck(vn,cr),ek(cr),Rn&512&&yn!==null&&Lj(yn,yn.return);break;case 5:if(ck(vn,cr),ek(cr),Rn&512&&yn!==null&&Lj(yn,yn.return),cr.flags&32){var Bn=cr.stateNode;try{ob(Bn,"")}catch(Rm){W$h(cr,cr.return,Rm)}}if(Rn&4&&(Bn=cr.stateNode,Bn!=null)){var Co=cr.memoizedProps,Po=yn!==null?yn.memoizedProps:Co,To=cr.type,Io=cr.updateQueue;if(cr.updateQueue=null,Io!==null)try{To==="input"&&Co.type==="radio"&&Co.name!=null&&ab(Bn,Co),vb(To,Po);var $l=vb(To,Co);for(Po=0;Po<Io.length;Po+=2){var Wl=Io[Po],Xl=Io[Po+1];Wl==="style"?sb(Bn,Xl):Wl==="dangerouslySetInnerHTML"?nb(Bn,Xl):Wl==="children"?ob(Bn,Xl):ta$1(Bn,Wl,Xl,$l)}switch(To){case"input":bb(Bn,Co);break;case"textarea":ib(Bn,Co);break;case"select":var Yl=Bn._wrapperState.wasMultiple;Bn._wrapperState.wasMultiple=!!Co.multiple;var Zl=Co.value;Zl!=null?fb(Bn,!!Co.multiple,Zl,!1):Yl!==!!Co.multiple&&(Co.defaultValue!=null?fb(Bn,!!Co.multiple,Co.defaultValue,!0):fb(Bn,!!Co.multiple,Co.multiple?[]:"",!1))}Bn[Pf$1]=Co}catch(Rm){W$h(cr,cr.return,Rm)}}break;case 6:if(ck(vn,cr),ek(cr),Rn&4){if(cr.stateNode===null)throw Error(p$E(162));Bn=cr.stateNode,Co=cr.memoizedProps;try{Bn.nodeValue=Co}catch(Rm){W$h(cr,cr.return,Rm)}}break;case 3:if(ck(vn,cr),ek(cr),Rn&4&&yn!==null&&yn.memoizedState.isDehydrated)try{bd$1(vn.containerInfo)}catch(Rm){W$h(cr,cr.return,Rm)}break;case 4:ck(vn,cr),ek(cr);break;case 13:ck(vn,cr),ek(cr),Bn=cr.child,Bn.flags&8192&&(Co=Bn.memoizedState!==null,Bn.stateNode.isHidden=Co,!Co||Bn.alternate!==null&&Bn.alternate.memoizedState!==null||(fk=B$t())),Rn&4&&ak(cr);break;case 22:if(Wl=yn!==null&&yn.memoizedState!==null,cr.mode&1?(U$h=($l=U$h)||Wl,ck(vn,cr),U$h=$l):ck(vn,cr),ek(cr),Rn&8192){if($l=cr.memoizedState!==null,(cr.stateNode.isHidden=$l)&&!Wl&&(cr.mode&1)!==0)for(V$e=cr,Wl=cr.child;Wl!==null;){for(Xl=V$e=Wl;V$e!==null;){switch(Yl=V$e,Zl=Yl.child,Yl.tag){case 0:case 11:case 14:case 15:Pj(4,Yl,Yl.return);break;case 1:Lj(Yl,Yl.return);var ey=Yl.stateNode;if(typeof ey.componentWillUnmount=="function"){Rn=Yl,yn=Yl.return;try{vn=Rn,ey.props=vn.memoizedProps,ey.state=vn.memoizedState,ey.componentWillUnmount()}catch(Rm){W$h(Rn,yn,Rm)}}break;case 5:Lj(Yl,Yl.return);break;case 22:if(Yl.memoizedState!==null){gk(Xl);continue}}Zl!==null?(Zl.return=Yl,V$e=Zl):gk(Xl)}Wl=Wl.sibling}e:for(Wl=null,Xl=cr;;){if(Xl.tag===5){if(Wl===null){Wl=Xl;try{Bn=Xl.stateNode,$l?(Co=Bn.style,typeof Co.setProperty=="function"?Co.setProperty("display","none","important"):Co.display="none"):(To=Xl.stateNode,Io=Xl.memoizedProps.style,Po=Io!=null&&Io.hasOwnProperty("display")?Io.display:null,To.style.display=rb("display",Po))}catch(Rm){W$h(cr,cr.return,Rm)}}}else if(Xl.tag===6){if(Wl===null)try{Xl.stateNode.nodeValue=$l?"":Xl.memoizedProps}catch(Rm){W$h(cr,cr.return,Rm)}}else if((Xl.tag!==22&&Xl.tag!==23||Xl.memoizedState===null||Xl===cr)&&Xl.child!==null){Xl.child.return=Xl,Xl=Xl.child;continue}if(Xl===cr)break e;for(;Xl.sibling===null;){if(Xl.return===null||Xl.return===cr)break e;Wl===Xl&&(Wl=null),Xl=Xl.return}Wl===Xl&&(Wl=null),Xl.sibling.return=Xl.return,Xl=Xl.sibling}}break;case 19:ck(vn,cr),ek(cr),Rn&4&&ak(cr);break;case 21:break;default:ck(vn,cr),ek(cr)}}function ek(cr){var vn=cr.flags;if(vn&2){try{e:{for(var yn=cr.return;yn!==null;){if(Tj(yn)){var Rn=yn;break e}yn=yn.return}throw Error(p$E(160))}switch(Rn.tag){case 5:var Bn=Rn.stateNode;Rn.flags&32&&(ob(Bn,""),Rn.flags&=-33);var Co=Uj(cr);Wj(cr,Co,Bn);break;case 3:case 4:var Po=Rn.stateNode.containerInfo,To=Uj(cr);Vj(cr,To,Po);break;default:throw Error(p$E(161))}}catch(Io){W$h(cr,cr.return,Io)}cr.flags&=-3}vn&4096&&(cr.flags&=-4097)}function hk(cr,vn,yn){V$e=cr,ik(cr)}function ik(cr,vn,yn){for(var Rn=(cr.mode&1)!==0;V$e!==null;){var Bn=V$e,Co=Bn.child;if(Bn.tag===22&&Rn){var Po=Bn.memoizedState!==null||Jj;if(!Po){var To=Bn.alternate,Io=To!==null&&To.memoizedState!==null||U$h;To=Jj;var $l=U$h;if(Jj=Po,(U$h=Io)&&!$l)for(V$e=Bn;V$e!==null;)Po=V$e,Io=Po.child,Po.tag===22&&Po.memoizedState!==null?jk(Bn):Io!==null?(Io.return=Po,V$e=Io):jk(Bn);for(;Co!==null;)V$e=Co,ik(Co),Co=Co.sibling;V$e=Bn,Jj=To,U$h=$l}kk(cr)}else(Bn.subtreeFlags&8772)!==0&&Co!==null?(Co.return=Bn,V$e=Co):kk(cr)}}function kk(cr){for(;V$e!==null;){var vn=V$e;if((vn.flags&8772)!==0){var yn=vn.alternate;try{if((vn.flags&8772)!==0)switch(vn.tag){case 0:case 11:case 15:U$h||Qj(5,vn);break;case 1:var Rn=vn.stateNode;if(vn.flags&4&&!U$h)if(yn===null)Rn.componentDidMount();else{var Bn=vn.elementType===vn.type?yn.memoizedProps:Ci$1(vn.type,yn.memoizedProps);Rn.componentDidUpdate(Bn,yn.memoizedState,Rn.__reactInternalSnapshotBeforeUpdate)}var Co=vn.updateQueue;Co!==null&&sh$1(vn,Co,Rn);break;case 3:var Po=vn.updateQueue;if(Po!==null){if(yn=null,vn.child!==null)switch(vn.child.tag){case 5:yn=vn.child.stateNode;break;case 1:yn=vn.child.stateNode}sh$1(vn,Po,yn)}break;case 5:var To=vn.stateNode;if(yn===null&&vn.flags&4){yn=To;var Io=vn.memoizedProps;switch(vn.type){case"button":case"input":case"select":case"textarea":Io.autoFocus&&yn.focus();break;case"img":Io.src&&(yn.src=Io.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(vn.memoizedState===null){var $l=vn.alternate;if($l!==null){var Wl=$l.memoizedState;if(Wl!==null){var Xl=Wl.dehydrated;Xl!==null&&bd$1(Xl)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$E(163))}U$h||vn.flags&512&&Rj(vn)}catch(Yl){W$h(vn,vn.return,Yl)}}if(vn===cr){V$e=null;break}if(yn=vn.sibling,yn!==null){yn.return=vn.return,V$e=yn;break}V$e=vn.return}}function gk(cr){for(;V$e!==null;){var vn=V$e;if(vn===cr){V$e=null;break}var yn=vn.sibling;if(yn!==null){yn.return=vn.return,V$e=yn;break}V$e=vn.return}}function jk(cr){for(;V$e!==null;){var vn=V$e;try{switch(vn.tag){case 0:case 11:case 15:var yn=vn.return;try{Qj(4,vn)}catch(Io){W$h(vn,yn,Io)}break;case 1:var Rn=vn.stateNode;if(typeof Rn.componentDidMount=="function"){var Bn=vn.return;try{Rn.componentDidMount()}catch(Io){W$h(vn,Bn,Io)}}var Co=vn.return;try{Rj(vn)}catch(Io){W$h(vn,Co,Io)}break;case 5:var Po=vn.return;try{Rj(vn)}catch(Io){W$h(vn,Po,Io)}}}catch(Io){W$h(vn,vn.return,Io)}if(vn===cr){V$e=null;break}var To=vn.sibling;if(To!==null){To.return=vn.return,V$e=To;break}V$e=vn.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K$k=0,Q$f=null,Y$g=null,Z$b=0,fj=0,ej=Uf$1(0),T$o=0,pk=null,rh$1=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$r(){return(K$k&6)!==0?B$t():Ak!==-1?Ak:Ak=B$t()}function yi$1(cr){return(cr.mode&1)===0?1:(K$k&2)!==0&&Z$b!==0?Z$b&-Z$b:Kg.transition!==null?(Bk===0&&(Bk=yc$1()),Bk):(cr=C$r,cr!==0||(cr=window.event,cr=cr===void 0?16:jd$1(cr.type)),cr)}function gi$1(cr,vn,yn,Rn){if(50<yk)throw yk=0,zk=null,Error(p$E(185));Ac$1(cr,yn,Rn),((K$k&2)===0||cr!==Q$f)&&(cr===Q$f&&((K$k&2)===0&&(qk|=yn),T$o===4&&Ck(cr,Z$b)),Dk(cr,Rn),yn===1&&K$k===0&&(vn.mode&1)===0&&(Gj=B$t()+500,fg$1&&jg()))}function Dk(cr,vn){var yn=cr.callbackNode;wc$1(cr,vn);var Rn=uc$1(cr,cr===Q$f?Z$b:0);if(Rn===0)yn!==null&&bc$1(yn),cr.callbackNode=null,cr.callbackPriority=0;else if(vn=Rn&-Rn,cr.callbackPriority!==vn){if(yn!=null&&bc$1(yn),vn===1)cr.tag===0?ig$1(Ek.bind(null,cr)):hg$1(Ek.bind(null,cr)),Jf$1(function(){(K$k&6)===0&&jg()}),yn=null;else{switch(Dc$1(Rn)){case 1:yn=fc$1;break;case 4:yn=gc$1;break;case 16:yn=hc$1;break;case 536870912:yn=jc$1;break;default:yn=hc$1}yn=Fk(yn,Gk.bind(null,cr))}cr.callbackPriority=vn,cr.callbackNode=yn}}function Gk(cr,vn){if(Ak=-1,Bk=0,(K$k&6)!==0)throw Error(p$E(327));var yn=cr.callbackNode;if(Hk()&&cr.callbackNode!==yn)return null;var Rn=uc$1(cr,cr===Q$f?Z$b:0);if(Rn===0)return null;if((Rn&30)!==0||(Rn&cr.expiredLanes)!==0||vn)vn=Ik(cr,Rn);else{vn=Rn;var Bn=K$k;K$k|=2;var Co=Jk();(Q$f!==cr||Z$b!==vn)&&(uk=null,Gj=B$t()+500,Kk(cr,vn));do try{Lk();break}catch(To){Mk(cr,To)}while(1);$g(),mk.current=Co,K$k=Bn,Y$g!==null?vn=0:(Q$f=null,Z$b=0,vn=T$o)}if(vn!==0){if(vn===2&&(Bn=xc$1(cr),Bn!==0&&(Rn=Bn,vn=Nk(cr,Bn))),vn===1)throw yn=pk,Kk(cr,0),Ck(cr,Rn),Dk(cr,B$t()),yn;if(vn===6)Ck(cr,Rn);else{if(Bn=cr.current.alternate,(Rn&30)===0&&!Ok(Bn)&&(vn=Ik(cr,Rn),vn===2&&(Co=xc$1(cr),Co!==0&&(Rn=Co,vn=Nk(cr,Co))),vn===1))throw yn=pk,Kk(cr,0),Ck(cr,Rn),Dk(cr,B$t()),yn;switch(cr.finishedWork=Bn,cr.finishedLanes=Rn,vn){case 0:case 1:throw Error(p$E(345));case 2:Pk(cr,tk,uk);break;case 3:if(Ck(cr,Rn),(Rn&130023424)===Rn&&(vn=fk+500-B$t(),10<vn)){if(uc$1(cr,0)!==0)break;if(Bn=cr.suspendedLanes,(Bn&Rn)!==Rn){R$r(),cr.pingedLanes|=cr.suspendedLanes&Bn;break}cr.timeoutHandle=Ff$1(Pk.bind(null,cr,tk,uk),vn);break}Pk(cr,tk,uk);break;case 4:if(Ck(cr,Rn),(Rn&4194240)===Rn)break;for(vn=cr.eventTimes,Bn=-1;0<Rn;){var Po=31-oc$1(Rn);Co=1<<Po,Po=vn[Po],Po>Bn&&(Bn=Po),Rn&=~Co}if(Rn=Bn,Rn=B$t()-Rn,Rn=(120>Rn?120:480>Rn?480:1080>Rn?1080:1920>Rn?1920:3e3>Rn?3e3:4320>Rn?4320:1960*lk(Rn/1960))-Rn,10<Rn){cr.timeoutHandle=Ff$1(Pk.bind(null,cr,tk,uk),Rn);break}Pk(cr,tk,uk);break;case 5:Pk(cr,tk,uk);break;default:throw Error(p$E(329))}}}return Dk(cr,B$t()),cr.callbackNode===yn?Gk.bind(null,cr):null}function Nk(cr,vn){var yn=sk;return cr.current.memoizedState.isDehydrated&&(Kk(cr,vn).flags|=256),cr=Ik(cr,vn),cr!==2&&(vn=tk,tk=yn,vn!==null&&Fj(vn)),cr}function Fj(cr){tk===null?tk=cr:tk.push.apply(tk,cr)}function Ok(cr){for(var vn=cr;;){if(vn.flags&16384){var yn=vn.updateQueue;if(yn!==null&&(yn=yn.stores,yn!==null))for(var Rn=0;Rn<yn.length;Rn++){var Bn=yn[Rn],Co=Bn.getSnapshot;Bn=Bn.value;try{if(!He$3(Co(),Bn))return!1}catch{return!1}}}if(yn=vn.child,vn.subtreeFlags&16384&&yn!==null)yn.return=vn,vn=yn;else{if(vn===cr)break;for(;vn.sibling===null;){if(vn.return===null||vn.return===cr)return!0;vn=vn.return}vn.sibling.return=vn.return,vn=vn.sibling}}return!0}function Ck(cr,vn){for(vn&=~rk,vn&=~qk,cr.suspendedLanes|=vn,cr.pingedLanes&=~vn,cr=cr.expirationTimes;0<vn;){var yn=31-oc$1(vn),Rn=1<<yn;cr[yn]=-1,vn&=~Rn}}function Ek(cr){if((K$k&6)!==0)throw Error(p$E(327));Hk();var vn=uc$1(cr,0);if((vn&1)===0)return Dk(cr,B$t()),null;var yn=Ik(cr,vn);if(cr.tag!==0&&yn===2){var Rn=xc$1(cr);Rn!==0&&(vn=Rn,yn=Nk(cr,Rn))}if(yn===1)throw yn=pk,Kk(cr,0),Ck(cr,vn),Dk(cr,B$t()),yn;if(yn===6)throw Error(p$E(345));return cr.finishedWork=cr.current.alternate,cr.finishedLanes=vn,Pk(cr,tk,uk),Dk(cr,B$t()),null}function Qk(cr,vn){var yn=K$k;K$k|=1;try{return cr(vn)}finally{K$k=yn,K$k===0&&(Gj=B$t()+500,fg$1&&jg())}}function Rk(cr){wk!==null&&wk.tag===0&&(K$k&6)===0&&Hk();var vn=K$k;K$k|=1;var yn=ok.transition,Rn=C$r;try{if(ok.transition=null,C$r=1,cr)return cr()}finally{C$r=Rn,ok.transition=yn,K$k=vn,(K$k&6)===0&&jg()}}function Hj(){fj=ej.current,E$y(ej)}function Kk(cr,vn){cr.finishedWork=null,cr.finishedLanes=0;var yn=cr.timeoutHandle;if(yn!==-1&&(cr.timeoutHandle=-1,Gf$1(yn)),Y$g!==null)for(yn=Y$g.return;yn!==null;){var Rn=yn;switch(wg$1(Rn),Rn.tag){case 1:Rn=Rn.type.childContextTypes,Rn!=null&&$f$1();break;case 3:zh$1(),E$y(Wf$1),E$y(H$s),Eh$1();break;case 5:Bh$1(Rn);break;case 4:zh$1();break;case 13:E$y(L$q);break;case 19:E$y(L$q);break;case 10:ah$1(Rn.type._context);break;case 22:case 23:Hj()}yn=yn.return}if(Q$f=cr,Y$g=cr=Pg(cr.current,null),Z$b=fj=vn,T$o=0,pk=null,rk=qk=rh$1=0,tk=sk=null,fh$1!==null){for(vn=0;vn<fh$1.length;vn++)if(yn=fh$1[vn],Rn=yn.interleaved,Rn!==null){yn.interleaved=null;var Bn=Rn.next,Co=yn.pending;if(Co!==null){var Po=Co.next;Co.next=Bn,Rn.next=Po}yn.pending=Rn}fh$1=null}return cr}function Mk(cr,vn){do{var yn=Y$g;try{if($g(),Fh$1.current=Rh$1,Ih$1){for(var Rn=M$w.memoizedState;Rn!==null;){var Bn=Rn.queue;Bn!==null&&(Bn.pending=null),Rn=Rn.next}Ih$1=!1}if(Hh$1=0,O$o=N$i=M$w=null,Jh$1=!1,Kh$1=0,nk.current=null,yn===null||yn.return===null){T$o=1,pk=vn,Y$g=null;break}e:{var Co=cr,Po=yn.return,To=yn,Io=vn;if(vn=Z$b,To.flags|=32768,Io!==null&&typeof Io=="object"&&typeof Io.then=="function"){var $l=Io,Wl=To,Xl=Wl.tag;if((Wl.mode&1)===0&&(Xl===0||Xl===11||Xl===15)){var Yl=Wl.alternate;Yl?(Wl.updateQueue=Yl.updateQueue,Wl.memoizedState=Yl.memoizedState,Wl.lanes=Yl.lanes):(Wl.updateQueue=null,Wl.memoizedState=null)}var Zl=Ui$1(Po);if(Zl!==null){Zl.flags&=-257,Vi(Zl,Po,To,Co,vn),Zl.mode&1&&Si$1(Co,$l,vn),vn=Zl,Io=$l;var ey=vn.updateQueue;if(ey===null){var Rm=new Set;Rm.add(Io),vn.updateQueue=Rm}else ey.add(Io);break e}else{if((vn&1)===0){Si$1(Co,$l,vn),tj();break e}Io=Error(p$E(426))}}else if(I$s&&To.mode&1){var ry=Ui$1(Po);if(ry!==null){(ry.flags&65536)===0&&(ry.flags|=256),Vi(ry,Po,To,Co,vn),Jg(Ji$2(Io,To));break e}}Co=Io=Ji$2(Io,To),T$o!==4&&(T$o=2),sk===null?sk=[Co]:sk.push(Co),Co=Po;do{switch(Co.tag){case 3:Co.flags|=65536,vn&=-vn,Co.lanes|=vn;var _g=Ni(Co,Io,vn);ph$1(Co,_g);break e;case 1:To=Io;var ty=Co.type,ny=Co.stateNode;if((Co.flags&128)===0&&(typeof ty.getDerivedStateFromError=="function"||ny!==null&&typeof ny.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(ny)))){Co.flags|=65536,vn&=-vn,Co.lanes|=vn;var iy=Qi$2(Co,To,vn);ph$1(Co,iy);break e}}Co=Co.return}while(Co!==null)}Sk(yn)}catch(oy){vn=oy,Y$g===yn&&yn!==null&&(Y$g=yn=yn.return);continue}break}while(1)}function Jk(){var cr=mk.current;return mk.current=Rh$1,cr===null?Rh$1:cr}function tj(){(T$o===0||T$o===3||T$o===2)&&(T$o=4),Q$f===null||(rh$1&268435455)===0&&(qk&268435455)===0||Ck(Q$f,Z$b)}function Ik(cr,vn){var yn=K$k;K$k|=2;var Rn=Jk();(Q$f!==cr||Z$b!==vn)&&(uk=null,Kk(cr,vn));do try{Tk();break}catch(Bn){Mk(cr,Bn)}while(1);if($g(),K$k=yn,mk.current=Rn,Y$g!==null)throw Error(p$E(261));return Q$f=null,Z$b=0,T$o}function Tk(){for(;Y$g!==null;)Uk(Y$g)}function Lk(){for(;Y$g!==null&&!cc$1();)Uk(Y$g)}function Uk(cr){var vn=Vk(cr.alternate,cr,fj);cr.memoizedProps=cr.pendingProps,vn===null?Sk(cr):Y$g=vn,nk.current=null}function Sk(cr){var vn=cr;do{var yn=vn.alternate;if(cr=vn.return,(vn.flags&32768)===0){if(yn=Ej(yn,vn,fj),yn!==null){Y$g=yn;return}}else{if(yn=Ij(yn,vn),yn!==null){yn.flags&=32767,Y$g=yn;return}if(cr!==null)cr.flags|=32768,cr.subtreeFlags=0,cr.deletions=null;else{T$o=6,Y$g=null;return}}if(vn=vn.sibling,vn!==null){Y$g=vn;return}Y$g=vn=cr}while(vn!==null);T$o===0&&(T$o=5)}function Pk(cr,vn,yn){var Rn=C$r,Bn=ok.transition;try{ok.transition=null,C$r=1,Wk(cr,vn,yn,Rn)}finally{ok.transition=Bn,C$r=Rn}return null}function Wk(cr,vn,yn,Rn){do Hk();while(wk!==null);if((K$k&6)!==0)throw Error(p$E(327));yn=cr.finishedWork;var Bn=cr.finishedLanes;if(yn===null)return null;if(cr.finishedWork=null,cr.finishedLanes=0,yn===cr.current)throw Error(p$E(177));cr.callbackNode=null,cr.callbackPriority=0;var Co=yn.lanes|yn.childLanes;if(Bc$1(cr,Co),cr===Q$f&&(Y$g=Q$f=null,Z$b=0),(yn.subtreeFlags&2064)===0&&(yn.flags&2064)===0||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),Co=(yn.flags&15990)!==0,(yn.subtreeFlags&15990)!==0||Co){Co=ok.transition,ok.transition=null;var Po=C$r;C$r=1;var To=K$k;K$k|=4,nk.current=null,Oj(cr,yn),dk(yn,cr),Oe$3(Df$1),dd$1=!!Cf$1,Df$1=Cf$1=null,cr.current=yn,hk(yn),dc$1(),K$k=To,C$r=Po,ok.transition=Co}else cr.current=yn;if(vk&&(vk=!1,wk=cr,xk=Bn),Co=cr.pendingLanes,Co===0&&(Ri$1=null),mc$1(yn.stateNode),Dk(cr,B$t()),vn!==null)for(Rn=cr.onRecoverableError,yn=0;yn<vn.length;yn++)Bn=vn[yn],Rn(Bn.value,{componentStack:Bn.stack,digest:Bn.digest});if(Oi$1)throw Oi$1=!1,cr=Pi$1,Pi$1=null,cr;return(xk&1)!==0&&cr.tag!==0&&Hk(),Co=cr.pendingLanes,(Co&1)!==0?cr===zk?yk++:(yk=0,zk=cr):yk=0,jg(),null}function Hk(){if(wk!==null){var cr=Dc$1(xk),vn=ok.transition,yn=C$r;try{if(ok.transition=null,C$r=16>cr?16:cr,wk===null)var Rn=!1;else{if(cr=wk,wk=null,xk=0,(K$k&6)!==0)throw Error(p$E(331));var Bn=K$k;for(K$k|=4,V$e=cr.current;V$e!==null;){var Co=V$e,Po=Co.child;if((V$e.flags&16)!==0){var To=Co.deletions;if(To!==null){for(var Io=0;Io<To.length;Io++){var $l=To[Io];for(V$e=$l;V$e!==null;){var Wl=V$e;switch(Wl.tag){case 0:case 11:case 15:Pj(8,Wl,Co)}var Xl=Wl.child;if(Xl!==null)Xl.return=Wl,V$e=Xl;else for(;V$e!==null;){Wl=V$e;var Yl=Wl.sibling,Zl=Wl.return;if(Sj(Wl),Wl===$l){V$e=null;break}if(Yl!==null){Yl.return=Zl,V$e=Yl;break}V$e=Zl}}}var ey=Co.alternate;if(ey!==null){var Rm=ey.child;if(Rm!==null){ey.child=null;do{var ry=Rm.sibling;Rm.sibling=null,Rm=ry}while(Rm!==null)}}V$e=Co}}if((Co.subtreeFlags&2064)!==0&&Po!==null)Po.return=Co,V$e=Po;else e:for(;V$e!==null;){if(Co=V$e,(Co.flags&2048)!==0)switch(Co.tag){case 0:case 11:case 15:Pj(9,Co,Co.return)}var _g=Co.sibling;if(_g!==null){_g.return=Co.return,V$e=_g;break e}V$e=Co.return}}var ty=cr.current;for(V$e=ty;V$e!==null;){Po=V$e;var ny=Po.child;if((Po.subtreeFlags&2064)!==0&&ny!==null)ny.return=Po,V$e=ny;else e:for(Po=ty;V$e!==null;){if(To=V$e,(To.flags&2048)!==0)try{switch(To.tag){case 0:case 11:case 15:Qj(9,To)}}catch(oy){W$h(To,To.return,oy)}if(To===Po){V$e=null;break e}var iy=To.sibling;if(iy!==null){iy.return=To.return,V$e=iy;break e}V$e=To.return}}if(K$k=Bn,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,cr)}catch{}Rn=!0}return Rn}finally{C$r=yn,ok.transition=vn}}return!1}function Xk(cr,vn,yn){vn=Ji$2(yn,vn),vn=Ni(cr,vn,1),cr=nh$1(cr,vn,1),vn=R$r(),cr!==null&&(Ac$1(cr,1,vn),Dk(cr,vn))}function W$h(cr,vn,yn){if(cr.tag===3)Xk(cr,cr,yn);else for(;vn!==null;){if(vn.tag===3){Xk(vn,cr,yn);break}else if(vn.tag===1){var Rn=vn.stateNode;if(typeof vn.type.getDerivedStateFromError=="function"||typeof Rn.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(Rn))){cr=Ji$2(yn,cr),cr=Qi$2(vn,cr,1),vn=nh$1(vn,cr,1),cr=R$r(),vn!==null&&(Ac$1(vn,1,cr),Dk(vn,cr));break}}vn=vn.return}}function Ti$1(cr,vn,yn){var Rn=cr.pingCache;Rn!==null&&Rn.delete(vn),vn=R$r(),cr.pingedLanes|=cr.suspendedLanes&yn,Q$f===cr&&(Z$b&yn)===yn&&(T$o===4||T$o===3&&(Z$b&130023424)===Z$b&&500>B$t()-fk?Kk(cr,0):rk|=yn),Dk(cr,vn)}function Yk(cr,vn){vn===0&&((cr.mode&1)===0?vn=1:(vn=sc$1,sc$1<<=1,(sc$1&130023424)===0&&(sc$1=4194304)));var yn=R$r();cr=ih$1(cr,vn),cr!==null&&(Ac$1(cr,vn,yn),Dk(cr,yn))}function uj(cr){var vn=cr.memoizedState,yn=0;vn!==null&&(yn=vn.retryLane),Yk(cr,yn)}function bk(cr,vn){var yn=0;switch(cr.tag){case 13:var Rn=cr.stateNode,Bn=cr.memoizedState;Bn!==null&&(yn=Bn.retryLane);break;case 19:Rn=cr.stateNode;break;default:throw Error(p$E(314))}Rn!==null&&Rn.delete(vn),Yk(cr,yn)}var Vk;Vk=function(cr,vn,yn){if(cr!==null)if(cr.memoizedProps!==vn.pendingProps||Wf$1.current)dh$1=!0;else{if((cr.lanes&yn)===0&&(vn.flags&128)===0)return dh$1=!1,yj(cr,vn,yn);dh$1=(cr.flags&131072)!==0}else dh$1=!1,I$s&&(vn.flags&1048576)!==0&&ug$1(vn,ng$1,vn.index);switch(vn.lanes=0,vn.tag){case 2:var Rn=vn.type;ij(cr,vn),cr=vn.pendingProps;var Bn=Yf$1(vn,H$s.current);ch$1(vn,yn),Bn=Nh$1(null,vn,Rn,cr,Bn,yn);var Co=Sh$1();return vn.flags|=1,typeof Bn=="object"&&Bn!==null&&typeof Bn.render=="function"&&Bn.$$typeof===void 0?(vn.tag=1,vn.memoizedState=null,vn.updateQueue=null,Zf$1(Rn)?(Co=!0,cg$1(vn)):Co=!1,vn.memoizedState=Bn.state!==null&&Bn.state!==void 0?Bn.state:null,kh$1(vn),Bn.updater=Ei$1,vn.stateNode=Bn,Bn._reactInternals=vn,Ii$1(vn,Rn,cr,yn),vn=jj(null,vn,Rn,!0,Co,yn)):(vn.tag=0,I$s&&Co&&vg$1(vn),Xi$1(null,vn,Bn,yn),vn=vn.child),vn;case 16:Rn=vn.elementType;e:{switch(ij(cr,vn),cr=vn.pendingProps,Bn=Rn._init,Rn=Bn(Rn._payload),vn.type=Rn,Bn=vn.tag=Zk(Rn),cr=Ci$1(Rn,cr),Bn){case 0:vn=cj(null,vn,Rn,cr,yn);break e;case 1:vn=hj(null,vn,Rn,cr,yn);break e;case 11:vn=Yi$1(null,vn,Rn,cr,yn);break e;case 14:vn=$i$1(null,vn,Rn,Ci$1(Rn.type,cr),yn);break e}throw Error(p$E(306,Rn,""))}return vn;case 0:return Rn=vn.type,Bn=vn.pendingProps,Bn=vn.elementType===Rn?Bn:Ci$1(Rn,Bn),cj(cr,vn,Rn,Bn,yn);case 1:return Rn=vn.type,Bn=vn.pendingProps,Bn=vn.elementType===Rn?Bn:Ci$1(Rn,Bn),hj(cr,vn,Rn,Bn,yn);case 3:e:{if(kj(vn),cr===null)throw Error(p$E(387));Rn=vn.pendingProps,Co=vn.memoizedState,Bn=Co.element,lh$1(cr,vn),qh$1(vn,Rn,null,yn);var Po=vn.memoizedState;if(Rn=Po.element,Co.isDehydrated)if(Co={element:Rn,isDehydrated:!1,cache:Po.cache,pendingSuspenseBoundaries:Po.pendingSuspenseBoundaries,transitions:Po.transitions},vn.updateQueue.baseState=Co,vn.memoizedState=Co,vn.flags&256){Bn=Ji$2(Error(p$E(423)),vn),vn=lj(cr,vn,Rn,yn,Bn);break e}else if(Rn!==Bn){Bn=Ji$2(Error(p$E(424)),vn),vn=lj(cr,vn,Rn,yn,Bn);break e}else for(yg$1=Lf$1(vn.stateNode.containerInfo.firstChild),xg$1=vn,I$s=!0,zg=null,yn=Vg(vn,null,Rn,yn),vn.child=yn;yn;)yn.flags=yn.flags&-3|4096,yn=yn.sibling;else{if(Ig(),Rn===Bn){vn=Zi$1(cr,vn,yn);break e}Xi$1(cr,vn,Rn,yn)}vn=vn.child}return vn;case 5:return Ah$1(vn),cr===null&&Eg$1(vn),Rn=vn.type,Bn=vn.pendingProps,Co=cr!==null?cr.memoizedProps:null,Po=Bn.children,Ef$1(Rn,Bn)?Po=null:Co!==null&&Ef$1(Rn,Co)&&(vn.flags|=32),gj(cr,vn),Xi$1(cr,vn,Po,yn),vn.child;case 6:return cr===null&&Eg$1(vn),null;case 13:return oj(cr,vn,yn);case 4:return yh$1(vn,vn.stateNode.containerInfo),Rn=vn.pendingProps,cr===null?vn.child=Ug(vn,null,Rn,yn):Xi$1(cr,vn,Rn,yn),vn.child;case 11:return Rn=vn.type,Bn=vn.pendingProps,Bn=vn.elementType===Rn?Bn:Ci$1(Rn,Bn),Yi$1(cr,vn,Rn,Bn,yn);case 7:return Xi$1(cr,vn,vn.pendingProps,yn),vn.child;case 8:return Xi$1(cr,vn,vn.pendingProps.children,yn),vn.child;case 12:return Xi$1(cr,vn,vn.pendingProps.children,yn),vn.child;case 10:e:{if(Rn=vn.type._context,Bn=vn.pendingProps,Co=vn.memoizedProps,Po=Bn.value,G$h(Wg,Rn._currentValue),Rn._currentValue=Po,Co!==null)if(He$3(Co.value,Po)){if(Co.children===Bn.children&&!Wf$1.current){vn=Zi$1(cr,vn,yn);break e}}else for(Co=vn.child,Co!==null&&(Co.return=vn);Co!==null;){var To=Co.dependencies;if(To!==null){Po=Co.child;for(var Io=To.firstContext;Io!==null;){if(Io.context===Rn){if(Co.tag===1){Io=mh$1(-1,yn&-yn),Io.tag=2;var $l=Co.updateQueue;if($l!==null){$l=$l.shared;var Wl=$l.pending;Wl===null?Io.next=Io:(Io.next=Wl.next,Wl.next=Io),$l.pending=Io}}Co.lanes|=yn,Io=Co.alternate,Io!==null&&(Io.lanes|=yn),bh$1(Co.return,yn,vn),To.lanes|=yn;break}Io=Io.next}}else if(Co.tag===10)Po=Co.type===vn.type?null:Co.child;else if(Co.tag===18){if(Po=Co.return,Po===null)throw Error(p$E(341));Po.lanes|=yn,To=Po.alternate,To!==null&&(To.lanes|=yn),bh$1(Po,yn,vn),Po=Co.sibling}else Po=Co.child;if(Po!==null)Po.return=Co;else for(Po=Co;Po!==null;){if(Po===vn){Po=null;break}if(Co=Po.sibling,Co!==null){Co.return=Po.return,Po=Co;break}Po=Po.return}Co=Po}Xi$1(cr,vn,Bn.children,yn),vn=vn.child}return vn;case 9:return Bn=vn.type,Rn=vn.pendingProps.children,ch$1(vn,yn),Bn=eh$1(Bn),Rn=Rn(Bn),vn.flags|=1,Xi$1(cr,vn,Rn,yn),vn.child;case 14:return Rn=vn.type,Bn=Ci$1(Rn,vn.pendingProps),Bn=Ci$1(Rn.type,Bn),$i$1(cr,vn,Rn,Bn,yn);case 15:return bj(cr,vn,vn.type,vn.pendingProps,yn);case 17:return Rn=vn.type,Bn=vn.pendingProps,Bn=vn.elementType===Rn?Bn:Ci$1(Rn,Bn),ij(cr,vn),vn.tag=1,Zf$1(Rn)?(cr=!0,cg$1(vn)):cr=!1,ch$1(vn,yn),Gi$1(vn,Rn,Bn),Ii$1(vn,Rn,Bn,yn),jj(null,vn,Rn,!0,cr,yn);case 19:return xj(cr,vn,yn);case 22:return dj(cr,vn,yn)}throw Error(p$E(156,vn.tag))};function Fk(cr,vn){return ac$1(cr,vn)}function $k(cr,vn,yn,Rn){this.tag=cr,this.key=yn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=vn,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Rn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(cr,vn,yn,Rn){return new $k(cr,vn,yn,Rn)}function aj(cr){return cr=cr.prototype,!(!cr||!cr.isReactComponent)}function Zk(cr){if(typeof cr=="function")return aj(cr)?1:0;if(cr!=null){if(cr=cr.$$typeof,cr===Da$1)return 11;if(cr===Ga$1)return 14}return 2}function Pg(cr,vn){var yn=cr.alternate;return yn===null?(yn=Bg(cr.tag,vn,cr.key,cr.mode),yn.elementType=cr.elementType,yn.type=cr.type,yn.stateNode=cr.stateNode,yn.alternate=cr,cr.alternate=yn):(yn.pendingProps=vn,yn.type=cr.type,yn.flags=0,yn.subtreeFlags=0,yn.deletions=null),yn.flags=cr.flags&14680064,yn.childLanes=cr.childLanes,yn.lanes=cr.lanes,yn.child=cr.child,yn.memoizedProps=cr.memoizedProps,yn.memoizedState=cr.memoizedState,yn.updateQueue=cr.updateQueue,vn=cr.dependencies,yn.dependencies=vn===null?null:{lanes:vn.lanes,firstContext:vn.firstContext},yn.sibling=cr.sibling,yn.index=cr.index,yn.ref=cr.ref,yn}function Rg(cr,vn,yn,Rn,Bn,Co){var Po=2;if(Rn=cr,typeof cr=="function")aj(cr)&&(Po=1);else if(typeof cr=="string")Po=5;else e:switch(cr){case ya$1:return Tg(yn.children,Bn,Co,vn);case za$1:Po=8,Bn|=8;break;case Aa$1:return cr=Bg(12,yn,vn,Bn|2),cr.elementType=Aa$1,cr.lanes=Co,cr;case Ea$1:return cr=Bg(13,yn,vn,Bn),cr.elementType=Ea$1,cr.lanes=Co,cr;case Fa:return cr=Bg(19,yn,vn,Bn),cr.elementType=Fa,cr.lanes=Co,cr;case Ia$1:return pj(yn,Bn,Co,vn);default:if(typeof cr=="object"&&cr!==null)switch(cr.$$typeof){case Ba:Po=10;break e;case Ca$1:Po=9;break e;case Da$1:Po=11;break e;case Ga$1:Po=14;break e;case Ha$1:Po=16,Rn=null;break e}throw Error(p$E(130,cr==null?cr:typeof cr,""))}return vn=Bg(Po,yn,vn,Bn),vn.elementType=cr,vn.type=Rn,vn.lanes=Co,vn}function Tg(cr,vn,yn,Rn){return cr=Bg(7,cr,Rn,vn),cr.lanes=yn,cr}function pj(cr,vn,yn,Rn){return cr=Bg(22,cr,Rn,vn),cr.elementType=Ia$1,cr.lanes=yn,cr.stateNode={isHidden:!1},cr}function Qg(cr,vn,yn){return cr=Bg(6,cr,null,vn),cr.lanes=yn,cr}function Sg$1(cr,vn,yn){return vn=Bg(4,cr.children!==null?cr.children:[],cr.key,vn),vn.lanes=yn,vn.stateNode={containerInfo:cr.containerInfo,pendingChildren:null,implementation:cr.implementation},vn}function al$1(cr,vn,yn,Rn,Bn){this.tag=vn,this.containerInfo=cr,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=Rn,this.onRecoverableError=Bn,this.mutableSourceEagerHydrationData=null}function bl$1(cr,vn,yn,Rn,Bn,Co,Po,To,Io){return cr=new al$1(cr,vn,yn,To,Io),vn===1?(vn=1,Co===!0&&(vn|=8)):vn=0,Co=Bg(3,null,null,vn),cr.current=Co,Co.stateNode=cr,Co.memoizedState={element:Rn,isDehydrated:yn,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh$1(Co),cr}function cl$1(cr,vn,yn){var Rn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:Rn==null?null:""+Rn,children:cr,containerInfo:vn,implementation:yn}}function dl$1(cr){if(!cr)return Vf$1;cr=cr._reactInternals;e:{if(Vb(cr)!==cr||cr.tag!==1)throw Error(p$E(170));var vn=cr;do{switch(vn.tag){case 3:vn=vn.stateNode.context;break e;case 1:if(Zf$1(vn.type)){vn=vn.stateNode.__reactInternalMemoizedMergedChildContext;break e}}vn=vn.return}while(vn!==null);throw Error(p$E(171))}if(cr.tag===1){var yn=cr.type;if(Zf$1(yn))return bg$1(cr,yn,vn)}return vn}function el$1(cr,vn,yn,Rn,Bn,Co,Po,To,Io){return cr=bl$1(yn,Rn,!0,cr,Bn,Co,Po,To,Io),cr.context=dl$1(null),yn=cr.current,Rn=R$r(),Bn=yi$1(yn),Co=mh$1(Rn,Bn),Co.callback=vn!=null?vn:null,nh$1(yn,Co,Bn),cr.current.lanes=Bn,Ac$1(cr,Bn,Rn),Dk(cr,Rn),cr}function fl$1(cr,vn,yn,Rn){var Bn=vn.current,Co=R$r(),Po=yi$1(Bn);return yn=dl$1(yn),vn.context===null?vn.context=yn:vn.pendingContext=yn,vn=mh$1(Co,Po),vn.payload={element:cr},Rn=Rn===void 0?null:Rn,Rn!==null&&(vn.callback=Rn),cr=nh$1(Bn,vn,Po),cr!==null&&(gi$1(cr,Bn,Po,Co),oh$1(cr,Bn,Po)),Po}function gl$1(cr){if(cr=cr.current,!cr.child)return null;switch(cr.child.tag){case 5:return cr.child.stateNode;default:return cr.child.stateNode}}function hl$1(cr,vn){if(cr=cr.memoizedState,cr!==null&&cr.dehydrated!==null){var yn=cr.retryLane;cr.retryLane=yn!==0&&yn<vn?yn:vn}}function il$1(cr,vn){hl$1(cr,vn),(cr=cr.alternate)&&hl$1(cr,vn)}function jl(){return null}var kl$1=typeof reportError=="function"?reportError:function(cr){console.error(cr)};function ll$1(cr){this._internalRoot=cr}ml$1.prototype.render=ll$1.prototype.render=function(cr){var vn=this._internalRoot;if(vn===null)throw Error(p$E(409));fl$1(cr,vn,null,null)};ml$1.prototype.unmount=ll$1.prototype.unmount=function(){var cr=this._internalRoot;if(cr!==null){this._internalRoot=null;var vn=cr.containerInfo;Rk(function(){fl$1(null,cr,null,null)}),vn[uf$1]=null}};function ml$1(cr){this._internalRoot=cr}ml$1.prototype.unstable_scheduleHydration=function(cr){if(cr){var vn=Hc$1();cr={blockedOn:null,target:cr,priority:vn};for(var yn=0;yn<Qc$1.length&&vn!==0&&vn<Qc$1[yn].priority;yn++);Qc$1.splice(yn,0,cr),yn===0&&Vc$1(cr)}};function nl$1(cr){return!(!cr||cr.nodeType!==1&&cr.nodeType!==9&&cr.nodeType!==11)}function ol$1(cr){return!(!cr||cr.nodeType!==1&&cr.nodeType!==9&&cr.nodeType!==11&&(cr.nodeType!==8||cr.nodeValue!==" react-mount-point-unstable "))}function pl$1(){}function ql$1(cr,vn,yn,Rn,Bn){if(Bn){if(typeof Rn=="function"){var Co=Rn;Rn=function(){var $l=gl$1(Po);Co.call($l)}}var Po=el$1(vn,Rn,cr,0,null,!1,!1,"",pl$1);return cr._reactRootContainer=Po,cr[uf$1]=Po.current,sf$1(cr.nodeType===8?cr.parentNode:cr),Rk(),Po}for(;Bn=cr.lastChild;)cr.removeChild(Bn);if(typeof Rn=="function"){var To=Rn;Rn=function(){var $l=gl$1(Io);To.call($l)}}var Io=bl$1(cr,0,!1,null,null,!1,!1,"",pl$1);return cr._reactRootContainer=Io,cr[uf$1]=Io.current,sf$1(cr.nodeType===8?cr.parentNode:cr),Rk(function(){fl$1(vn,Io,yn,Rn)}),Io}function rl$1(cr,vn,yn,Rn,Bn){var Co=yn._reactRootContainer;if(Co){var Po=Co;if(typeof Bn=="function"){var To=Bn;Bn=function(){var Io=gl$1(Po);To.call(Io)}}fl$1(vn,Po,cr,Bn)}else Po=ql$1(yn,vn,cr,Bn,Rn);return gl$1(Po)}Ec$1=function(cr){switch(cr.tag){case 3:var vn=cr.stateNode;if(vn.current.memoizedState.isDehydrated){var yn=tc$1(vn.pendingLanes);yn!==0&&(Cc$1(vn,yn|1),Dk(vn,B$t()),(K$k&6)===0&&(Gj=B$t()+500,jg()))}break;case 13:Rk(function(){var Rn=ih$1(cr,1);if(Rn!==null){var Bn=R$r();gi$1(Rn,cr,1,Bn)}}),il$1(cr,1)}};Fc$1=function(cr){if(cr.tag===13){var vn=ih$1(cr,134217728);if(vn!==null){var yn=R$r();gi$1(vn,cr,134217728,yn)}il$1(cr,134217728)}};Gc$1=function(cr){if(cr.tag===13){var vn=yi$1(cr),yn=ih$1(cr,vn);if(yn!==null){var Rn=R$r();gi$1(yn,cr,vn,Rn)}il$1(cr,vn)}};Hc$1=function(){return C$r};Ic$1=function(cr,vn){var yn=C$r;try{return C$r=cr,vn()}finally{C$r=yn}};yb=function(cr,vn,yn){switch(vn){case"input":if(bb(cr,yn),vn=yn.name,yn.type==="radio"&&vn!=null){for(yn=cr;yn.parentNode;)yn=yn.parentNode;for(yn=yn.querySelectorAll("input[name="+JSON.stringify(""+vn)+'][type="radio"]'),vn=0;vn<yn.length;vn++){var Rn=yn[vn];if(Rn!==cr&&Rn.form===cr.form){var Bn=Db(Rn);if(!Bn)throw Error(p$E(90));Wa$1(Rn),bb(Rn,Bn)}}}break;case"textarea":ib(cr,yn);break;case"select":vn=yn.value,vn!=null&&fb(cr,!!yn.multiple,vn,!1)}};Gb=Qk;Hb=Rk;var sl$1={usingClientEntryPoint:!1,Events:[Cb,ue$5,Db,Eb,Fb,Qk]},tl$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul$1={bundleType:tl$1.bundleType,version:tl$1.version,rendererPackageName:tl$1.rendererPackageName,rendererConfig:tl$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(cr){return cr=Zb(cr),cr===null?null:cr.stateNode},findFiberByHostInstance:tl$1.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var vl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl$1.isDisabled&&vl$1.supportsFiber)try{kc$1=vl$1.inject(ul$1),lc$1=vl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl$1;reactDom_production_min.createPortal=function(cr,vn){var yn=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl$1(vn))throw Error(p$E(200));return cl$1(cr,vn,null,yn)};reactDom_production_min.createRoot=function(cr,vn){if(!nl$1(cr))throw Error(p$E(299));var yn=!1,Rn="",Bn=kl$1;return vn!=null&&(vn.unstable_strictMode===!0&&(yn=!0),vn.identifierPrefix!==void 0&&(Rn=vn.identifierPrefix),vn.onRecoverableError!==void 0&&(Bn=vn.onRecoverableError)),vn=bl$1(cr,1,!1,null,null,yn,!1,Rn,Bn),cr[uf$1]=vn.current,sf$1(cr.nodeType===8?cr.parentNode:cr),new ll$1(vn)};reactDom_production_min.findDOMNode=function(cr){if(cr==null)return null;if(cr.nodeType===1)return cr;var vn=cr._reactInternals;if(vn===void 0)throw typeof cr.render=="function"?Error(p$E(188)):(cr=Object.keys(cr).join(","),Error(p$E(268,cr)));return cr=Zb(vn),cr=cr===null?null:cr.stateNode,cr};reactDom_production_min.flushSync=function(cr){return Rk(cr)};reactDom_production_min.hydrate=function(cr,vn,yn){if(!ol$1(vn))throw Error(p$E(200));return rl$1(null,cr,vn,!0,yn)};reactDom_production_min.hydrateRoot=function(cr,vn,yn){if(!nl$1(cr))throw Error(p$E(405));var Rn=yn!=null&&yn.hydratedSources||null,Bn=!1,Co="",Po=kl$1;if(yn!=null&&(yn.unstable_strictMode===!0&&(Bn=!0),yn.identifierPrefix!==void 0&&(Co=yn.identifierPrefix),yn.onRecoverableError!==void 0&&(Po=yn.onRecoverableError)),vn=el$1(vn,null,cr,1,yn!=null?yn:null,Bn,!1,Co,Po),cr[uf$1]=vn.current,sf$1(cr),Rn)for(cr=0;cr<Rn.length;cr++)yn=Rn[cr],Bn=yn._getVersion,Bn=Bn(yn._source),vn.mutableSourceEagerHydrationData==null?vn.mutableSourceEagerHydrationData=[yn,Bn]:vn.mutableSourceEagerHydrationData.push(yn,Bn);return new ml$1(vn)};reactDom_production_min.render=function(cr,vn,yn){if(!ol$1(vn))throw Error(p$E(200));return rl$1(null,cr,vn,!1,yn)};reactDom_production_min.unmountComponentAtNode=function(cr){if(!ol$1(cr))throw Error(p$E(40));return cr._reactRootContainer?(Rk(function(){rl$1(null,null,cr,!1,function(){cr._reactRootContainer=null,cr[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(cr,vn,yn,Rn){if(!ol$1(yn))throw Error(p$E(200));if(cr==null||cr._reactInternals===void 0)throw Error(p$E(38));return rl$1(cr,vn,yn,!1,Rn)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(cr){console.error(cr)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(cr){return typeof cr=="number"&&isFinite(cr)&&Math.floor(cr)===cr});Math.sign===void 0&&(Math.sign=function(cr){return cr<0?-1:cr>0?1:+cr});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(cr){if(cr==null)throw new TypeError("Cannot convert undefined or null to object");const vn=Object(cr);for(let yn=1;yn<arguments.length;yn++){const Rn=arguments[yn];if(Rn!=null)for(const Bn in Rn)Object.prototype.hasOwnProperty.call(Rn,Bn)&&(vn[Bn]=Rn[Bn])}return vn});const REVISION="117",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,KeepStencilOp=7680,ReplaceStencilOp=7681,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(cr,vn){this._listeners===void 0&&(this._listeners={});var yn=this._listeners;yn[cr]===void 0&&(yn[cr]=[]),yn[cr].indexOf(vn)===-1&&yn[cr].push(vn)},hasEventListener:function(cr,vn){if(this._listeners===void 0)return!1;var yn=this._listeners;return yn[cr]!==void 0&&yn[cr].indexOf(vn)!==-1},removeEventListener:function(cr,vn){if(this._listeners!==void 0){var yn=this._listeners,Rn=yn[cr];if(Rn!==void 0){var Bn=Rn.indexOf(vn);Bn!==-1&&Rn.splice(Bn,1)}}},dispatchEvent:function(cr){if(this._listeners!==void 0){var vn=this._listeners,yn=vn[cr.type];if(yn!==void 0){cr.target=this;for(var Rn=yn.slice(0),Bn=0,Co=Rn.length;Bn<Co;Bn++)Rn[Bn].call(this,cr)}}}});var _lut=[];for(var i$B=0;i$B<256;i$B++)_lut[i$B]=(i$B<16?"0":"")+i$B.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var cr=Math.random()*4294967295|0,vn=Math.random()*4294967295|0,yn=Math.random()*4294967295|0,Rn=Math.random()*4294967295|0,Bn=_lut[cr&255]+_lut[cr>>8&255]+_lut[cr>>16&255]+_lut[cr>>24&255]+"-"+_lut[vn&255]+_lut[vn>>8&255]+"-"+_lut[vn>>16&15|64]+_lut[vn>>24&255]+"-"+_lut[yn&63|128]+_lut[yn>>8&255]+"-"+_lut[yn>>16&255]+_lut[yn>>24&255]+_lut[Rn&255]+_lut[Rn>>8&255]+_lut[Rn>>16&255]+_lut[Rn>>24&255];return Bn.toUpperCase()},clamp:function(cr,vn,yn){return Math.max(vn,Math.min(yn,cr))},euclideanModulo:function(cr,vn){return(cr%vn+vn)%vn},mapLinear:function(cr,vn,yn,Rn,Bn){return Rn+(cr-vn)*(Bn-Rn)/(yn-vn)},lerp:function(cr,vn,yn){return(1-yn)*cr+yn*vn},smoothstep:function(cr,vn,yn){return cr<=vn?0:cr>=yn?1:(cr=(cr-vn)/(yn-vn),cr*cr*(3-2*cr))},smootherstep:function(cr,vn,yn){return cr<=vn?0:cr>=yn?1:(cr=(cr-vn)/(yn-vn),cr*cr*cr*(cr*(cr*6-15)+10))},randInt:function(cr,vn){return cr+Math.floor(Math.random()*(vn-cr+1))},randFloat:function(cr,vn){return cr+Math.random()*(vn-cr)},randFloatSpread:function(cr){return cr*(.5-Math.random())},degToRad:function(cr){return cr*MathUtils.DEG2RAD},radToDeg:function(cr){return cr*MathUtils.RAD2DEG},isPowerOfTwo:function(cr){return(cr&cr-1)===0&&cr!==0},ceilPowerOfTwo:function(cr){return Math.pow(2,Math.ceil(Math.log(cr)/Math.LN2))},floorPowerOfTwo:function(cr){return Math.pow(2,Math.floor(Math.log(cr)/Math.LN2))},setQuaternionFromProperEuler:function(cr,vn,yn,Rn,Bn){var Co=Math.cos,Po=Math.sin,To=Co(yn/2),Io=Po(yn/2),$l=Co((vn+Rn)/2),Wl=Po((vn+Rn)/2),Xl=Co((vn-Rn)/2),Yl=Po((vn-Rn)/2),Zl=Co((Rn-vn)/2),ey=Po((Rn-vn)/2);switch(Bn){case"XYX":cr.set(To*Wl,Io*Xl,Io*Yl,To*$l);break;case"YZY":cr.set(Io*Yl,To*Wl,Io*Xl,To*$l);break;case"ZXZ":cr.set(Io*Xl,Io*Yl,To*Wl,To*$l);break;case"XZX":cr.set(To*Wl,Io*ey,Io*Zl,To*$l);break;case"YXY":cr.set(Io*Zl,To*Wl,Io*ey,To*$l);break;case"ZYZ":cr.set(Io*ey,Io*Zl,To*Wl,To*$l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Bn)}}};function Vector2(cr,vn){this.x=cr||0,this.y=vn||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(cr){this.x=cr}},height:{get:function(){return this.y},set:function(cr){this.y=cr}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(cr,vn){return this.x=cr,this.y=vn,this},setScalar:function(cr){return this.x=cr,this.y=cr,this},setX:function(cr){return this.x=cr,this},setY:function(cr){return this.y=cr,this},setComponent:function(cr,vn){switch(cr){case 0:this.x=vn;break;case 1:this.y=vn;break;default:throw new Error("index is out of range: "+cr)}return this},getComponent:function(cr){switch(cr){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+cr)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(cr){return this.x=cr.x,this.y=cr.y,this},add:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(cr,vn)):(this.x+=cr.x,this.y+=cr.y,this)},addScalar:function(cr){return this.x+=cr,this.y+=cr,this},addVectors:function(cr,vn){return this.x=cr.x+vn.x,this.y=cr.y+vn.y,this},addScaledVector:function(cr,vn){return this.x+=cr.x*vn,this.y+=cr.y*vn,this},sub:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(cr,vn)):(this.x-=cr.x,this.y-=cr.y,this)},subScalar:function(cr){return this.x-=cr,this.y-=cr,this},subVectors:function(cr,vn){return this.x=cr.x-vn.x,this.y=cr.y-vn.y,this},multiply:function(cr){return this.x*=cr.x,this.y*=cr.y,this},multiplyScalar:function(cr){return this.x*=cr,this.y*=cr,this},divide:function(cr){return this.x/=cr.x,this.y/=cr.y,this},divideScalar:function(cr){return this.multiplyScalar(1/cr)},applyMatrix3:function(cr){var vn=this.x,yn=this.y,Rn=cr.elements;return this.x=Rn[0]*vn+Rn[3]*yn+Rn[6],this.y=Rn[1]*vn+Rn[4]*yn+Rn[7],this},min:function(cr){return this.x=Math.min(this.x,cr.x),this.y=Math.min(this.y,cr.y),this},max:function(cr){return this.x=Math.max(this.x,cr.x),this.y=Math.max(this.y,cr.y),this},clamp:function(cr,vn){return this.x=Math.max(cr.x,Math.min(vn.x,this.x)),this.y=Math.max(cr.y,Math.min(vn.y,this.y)),this},clampScalar:function(cr,vn){return this.x=Math.max(cr,Math.min(vn,this.x)),this.y=Math.max(cr,Math.min(vn,this.y)),this},clampLength:function(cr,vn){var yn=this.length();return this.divideScalar(yn||1).multiplyScalar(Math.max(cr,Math.min(vn,yn)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(cr){return this.x*cr.x+this.y*cr.y},cross:function(cr){return this.x*cr.y-this.y*cr.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var cr=Math.atan2(-this.y,-this.x)+Math.PI;return cr},distanceTo:function(cr){return Math.sqrt(this.distanceToSquared(cr))},distanceToSquared:function(cr){var vn=this.x-cr.x,yn=this.y-cr.y;return vn*vn+yn*yn},manhattanDistanceTo:function(cr){return Math.abs(this.x-cr.x)+Math.abs(this.y-cr.y)},setLength:function(cr){return this.normalize().multiplyScalar(cr)},lerp:function(cr,vn){return this.x+=(cr.x-this.x)*vn,this.y+=(cr.y-this.y)*vn,this},lerpVectors:function(cr,vn,yn){return this.x=cr.x+(vn.x-cr.x)*yn,this.y=cr.y+(vn.y-cr.y)*yn,this},equals:function(cr){return cr.x===this.x&&cr.y===this.y},fromArray:function(cr,vn){return vn===void 0&&(vn=0),this.x=cr[vn],this.y=cr[vn+1],this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this.x,cr[vn+1]=this.y,cr},fromBufferAttribute:function(cr,vn,yn){return yn!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=cr.getX(vn),this.y=cr.getY(vn),this},rotateAround:function(cr,vn){var yn=Math.cos(vn),Rn=Math.sin(vn),Bn=this.x-cr.x,Co=this.y-cr.y;return this.x=Bn*yn-Co*Rn+cr.x,this.y=Bn*Rn+Co*yn+cr.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(cr,vn,yn,Rn,Bn,Co,Po,To,Io){var $l=this.elements;return $l[0]=cr,$l[1]=Rn,$l[2]=Po,$l[3]=vn,$l[4]=Bn,$l[5]=To,$l[6]=yn,$l[7]=Co,$l[8]=Io,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(cr){var vn=this.elements,yn=cr.elements;return vn[0]=yn[0],vn[1]=yn[1],vn[2]=yn[2],vn[3]=yn[3],vn[4]=yn[4],vn[5]=yn[5],vn[6]=yn[6],vn[7]=yn[7],vn[8]=yn[8],this},extractBasis:function(cr,vn,yn){return cr.setFromMatrix3Column(this,0),vn.setFromMatrix3Column(this,1),yn.setFromMatrix3Column(this,2),this},setFromMatrix4:function(cr){var vn=cr.elements;return this.set(vn[0],vn[4],vn[8],vn[1],vn[5],vn[9],vn[2],vn[6],vn[10]),this},multiply:function(cr){return this.multiplyMatrices(this,cr)},premultiply:function(cr){return this.multiplyMatrices(cr,this)},multiplyMatrices:function(cr,vn){var yn=cr.elements,Rn=vn.elements,Bn=this.elements,Co=yn[0],Po=yn[3],To=yn[6],Io=yn[1],$l=yn[4],Wl=yn[7],Xl=yn[2],Yl=yn[5],Zl=yn[8],ey=Rn[0],Rm=Rn[3],ry=Rn[6],_g=Rn[1],ty=Rn[4],ny=Rn[7],iy=Rn[2],oy=Rn[5],ay=Rn[8];return Bn[0]=Co*ey+Po*_g+To*iy,Bn[3]=Co*Rm+Po*ty+To*oy,Bn[6]=Co*ry+Po*ny+To*ay,Bn[1]=Io*ey+$l*_g+Wl*iy,Bn[4]=Io*Rm+$l*ty+Wl*oy,Bn[7]=Io*ry+$l*ny+Wl*ay,Bn[2]=Xl*ey+Yl*_g+Zl*iy,Bn[5]=Xl*Rm+Yl*ty+Zl*oy,Bn[8]=Xl*ry+Yl*ny+Zl*ay,this},multiplyScalar:function(cr){var vn=this.elements;return vn[0]*=cr,vn[3]*=cr,vn[6]*=cr,vn[1]*=cr,vn[4]*=cr,vn[7]*=cr,vn[2]*=cr,vn[5]*=cr,vn[8]*=cr,this},determinant:function(){var cr=this.elements,vn=cr[0],yn=cr[1],Rn=cr[2],Bn=cr[3],Co=cr[4],Po=cr[5],To=cr[6],Io=cr[7],$l=cr[8];return vn*Co*$l-vn*Po*Io-yn*Bn*$l+yn*Po*To+Rn*Bn*Io-Rn*Co*To},getInverse:function(cr,vn){vn!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var yn=cr.elements,Rn=this.elements,Bn=yn[0],Co=yn[1],Po=yn[2],To=yn[3],Io=yn[4],$l=yn[5],Wl=yn[6],Xl=yn[7],Yl=yn[8],Zl=Yl*Io-$l*Xl,ey=$l*Wl-Yl*To,Rm=Xl*To-Io*Wl,ry=Bn*Zl+Co*ey+Po*Rm;if(ry===0)return this.set(0,0,0,0,0,0,0,0,0);var _g=1/ry;return Rn[0]=Zl*_g,Rn[1]=(Po*Xl-Yl*Co)*_g,Rn[2]=($l*Co-Po*Io)*_g,Rn[3]=ey*_g,Rn[4]=(Yl*Bn-Po*Wl)*_g,Rn[5]=(Po*To-$l*Bn)*_g,Rn[6]=Rm*_g,Rn[7]=(Co*Wl-Xl*Bn)*_g,Rn[8]=(Io*Bn-Co*To)*_g,this},transpose:function(){var cr,vn=this.elements;return cr=vn[1],vn[1]=vn[3],vn[3]=cr,cr=vn[2],vn[2]=vn[6],vn[6]=cr,cr=vn[5],vn[5]=vn[7],vn[7]=cr,this},getNormalMatrix:function(cr){return this.setFromMatrix4(cr).getInverse(this).transpose()},transposeIntoArray:function(cr){var vn=this.elements;return cr[0]=vn[0],cr[1]=vn[3],cr[2]=vn[6],cr[3]=vn[1],cr[4]=vn[4],cr[5]=vn[7],cr[6]=vn[2],cr[7]=vn[5],cr[8]=vn[8],this},setUvTransform:function(cr,vn,yn,Rn,Bn,Co,Po){var To=Math.cos(Bn),Io=Math.sin(Bn);this.set(yn*To,yn*Io,-yn*(To*Co+Io*Po)+Co+cr,-Rn*Io,Rn*To,-Rn*(-Io*Co+To*Po)+Po+vn,0,0,1)},scale:function(cr,vn){var yn=this.elements;return yn[0]*=cr,yn[3]*=cr,yn[6]*=cr,yn[1]*=vn,yn[4]*=vn,yn[7]*=vn,this},rotate:function(cr){var vn=Math.cos(cr),yn=Math.sin(cr),Rn=this.elements,Bn=Rn[0],Co=Rn[3],Po=Rn[6],To=Rn[1],Io=Rn[4],$l=Rn[7];return Rn[0]=vn*Bn+yn*To,Rn[3]=vn*Co+yn*Io,Rn[6]=vn*Po+yn*$l,Rn[1]=-yn*Bn+vn*To,Rn[4]=-yn*Co+vn*Io,Rn[7]=-yn*Po+vn*$l,this},translate:function(cr,vn){var yn=this.elements;return yn[0]+=cr*yn[2],yn[3]+=cr*yn[5],yn[6]+=cr*yn[8],yn[1]+=vn*yn[2],yn[4]+=vn*yn[5],yn[7]+=vn*yn[8],this},equals:function(cr){for(var vn=this.elements,yn=cr.elements,Rn=0;Rn<9;Rn++)if(vn[Rn]!==yn[Rn])return!1;return!0},fromArray:function(cr,vn){vn===void 0&&(vn=0);for(var yn=0;yn<9;yn++)this.elements[yn]=cr[yn+vn];return this},toArray:function(cr,vn){cr===void 0&&(cr=[]),vn===void 0&&(vn=0);var yn=this.elements;return cr[vn]=yn[0],cr[vn+1]=yn[1],cr[vn+2]=yn[2],cr[vn+3]=yn[3],cr[vn+4]=yn[4],cr[vn+5]=yn[5],cr[vn+6]=yn[6],cr[vn+7]=yn[7],cr[vn+8]=yn[8],cr}});var _canvas,ImageUtils={getDataURL:function(cr){var vn;if(typeof HTMLCanvasElement=="undefined")return cr.src;if(cr instanceof HTMLCanvasElement)vn=cr;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=cr.width,_canvas.height=cr.height;var yn=_canvas.getContext("2d");cr instanceof ImageData?yn.putImageData(cr,0,0):yn.drawImage(cr,0,0,cr.width,cr.height),vn=_canvas}return vn.width>2048||vn.height>2048?vn.toDataURL("image/jpeg",.6):vn.toDataURL("image/png")}},textureId=0;function Texture(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=cr!==void 0?cr:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=vn!==void 0?vn:Texture.DEFAULT_MAPPING,this.wrapS=yn!==void 0?yn:ClampToEdgeWrapping,this.wrapT=Rn!==void 0?Rn:ClampToEdgeWrapping,this.magFilter=Bn!==void 0?Bn:LinearFilter,this.minFilter=Co!==void 0?Co:LinearMipmapLinearFilter,this.anisotropy=Io!==void 0?Io:1,this.format=Po!==void 0?Po:RGBAFormat,this.internalFormat=null,this.type=To!==void 0?To:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$l!==void 0?$l:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.name=cr.name,this.image=cr.image,this.mipmaps=cr.mipmaps.slice(0),this.mapping=cr.mapping,this.wrapS=cr.wrapS,this.wrapT=cr.wrapT,this.magFilter=cr.magFilter,this.minFilter=cr.minFilter,this.anisotropy=cr.anisotropy,this.format=cr.format,this.internalFormat=cr.internalFormat,this.type=cr.type,this.offset.copy(cr.offset),this.repeat.copy(cr.repeat),this.center.copy(cr.center),this.rotation=cr.rotation,this.matrixAutoUpdate=cr.matrixAutoUpdate,this.matrix.copy(cr.matrix),this.generateMipmaps=cr.generateMipmaps,this.premultiplyAlpha=cr.premultiplyAlpha,this.flipY=cr.flipY,this.unpackAlignment=cr.unpackAlignment,this.encoding=cr.encoding,this},toJSON:function(cr){var vn=cr===void 0||typeof cr=="string";if(!vn&&cr.textures[this.uuid]!==void 0)return cr.textures[this.uuid];var yn={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var Rn=this.image;if(Rn.uuid===void 0&&(Rn.uuid=MathUtils.generateUUID()),!vn&&cr.images[Rn.uuid]===void 0){var Bn;if(Array.isArray(Rn)){Bn=[];for(var Co=0,Po=Rn.length;Co<Po;Co++)Bn.push(ImageUtils.getDataURL(Rn[Co]))}else Bn=ImageUtils.getDataURL(Rn);cr.images[Rn.uuid]={uuid:Rn.uuid,url:Bn}}yn.image=Rn.uuid}return vn||(cr.textures[this.uuid]=yn),yn},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(cr){if(this.mapping!==UVMapping)return cr;if(cr.applyMatrix3(this.matrix),cr.x<0||cr.x>1)switch(this.wrapS){case RepeatWrapping:cr.x=cr.x-Math.floor(cr.x);break;case ClampToEdgeWrapping:cr.x=cr.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(cr.x)%2)===1?cr.x=Math.ceil(cr.x)-cr.x:cr.x=cr.x-Math.floor(cr.x);break}if(cr.y<0||cr.y>1)switch(this.wrapT){case RepeatWrapping:cr.y=cr.y-Math.floor(cr.y);break;case ClampToEdgeWrapping:cr.y=cr.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(cr.y)%2)===1?cr.y=Math.ceil(cr.y)-cr.y:cr.y=cr.y-Math.floor(cr.y);break}return this.flipY&&(cr.y=1-cr.y),cr}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(cr){cr===!0&&this.version++}});function Vector4(cr,vn,yn,Rn){this.x=cr||0,this.y=vn||0,this.z=yn||0,this.w=Rn!==void 0?Rn:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(cr){this.z=cr}},height:{get:function(){return this.w},set:function(cr){this.w=cr}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(cr,vn,yn,Rn){return this.x=cr,this.y=vn,this.z=yn,this.w=Rn,this},setScalar:function(cr){return this.x=cr,this.y=cr,this.z=cr,this.w=cr,this},setX:function(cr){return this.x=cr,this},setY:function(cr){return this.y=cr,this},setZ:function(cr){return this.z=cr,this},setW:function(cr){return this.w=cr,this},setComponent:function(cr,vn){switch(cr){case 0:this.x=vn;break;case 1:this.y=vn;break;case 2:this.z=vn;break;case 3:this.w=vn;break;default:throw new Error("index is out of range: "+cr)}return this},getComponent:function(cr){switch(cr){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+cr)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(cr){return this.x=cr.x,this.y=cr.y,this.z=cr.z,this.w=cr.w!==void 0?cr.w:1,this},add:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(cr,vn)):(this.x+=cr.x,this.y+=cr.y,this.z+=cr.z,this.w+=cr.w,this)},addScalar:function(cr){return this.x+=cr,this.y+=cr,this.z+=cr,this.w+=cr,this},addVectors:function(cr,vn){return this.x=cr.x+vn.x,this.y=cr.y+vn.y,this.z=cr.z+vn.z,this.w=cr.w+vn.w,this},addScaledVector:function(cr,vn){return this.x+=cr.x*vn,this.y+=cr.y*vn,this.z+=cr.z*vn,this.w+=cr.w*vn,this},sub:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(cr,vn)):(this.x-=cr.x,this.y-=cr.y,this.z-=cr.z,this.w-=cr.w,this)},subScalar:function(cr){return this.x-=cr,this.y-=cr,this.z-=cr,this.w-=cr,this},subVectors:function(cr,vn){return this.x=cr.x-vn.x,this.y=cr.y-vn.y,this.z=cr.z-vn.z,this.w=cr.w-vn.w,this},multiplyScalar:function(cr){return this.x*=cr,this.y*=cr,this.z*=cr,this.w*=cr,this},applyMatrix4:function(cr){var vn=this.x,yn=this.y,Rn=this.z,Bn=this.w,Co=cr.elements;return this.x=Co[0]*vn+Co[4]*yn+Co[8]*Rn+Co[12]*Bn,this.y=Co[1]*vn+Co[5]*yn+Co[9]*Rn+Co[13]*Bn,this.z=Co[2]*vn+Co[6]*yn+Co[10]*Rn+Co[14]*Bn,this.w=Co[3]*vn+Co[7]*yn+Co[11]*Rn+Co[15]*Bn,this},divideScalar:function(cr){return this.multiplyScalar(1/cr)},setAxisAngleFromQuaternion:function(cr){this.w=2*Math.acos(cr.w);var vn=Math.sqrt(1-cr.w*cr.w);return vn<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=cr.x/vn,this.y=cr.y/vn,this.z=cr.z/vn),this},setAxisAngleFromRotationMatrix:function(cr){var vn,yn,Rn,Bn,Co=.01,Po=.1,To=cr.elements,Io=To[0],$l=To[4],Wl=To[8],Xl=To[1],Yl=To[5],Zl=To[9],ey=To[2],Rm=To[6],ry=To[10];if(Math.abs($l-Xl)<Co&&Math.abs(Wl-ey)<Co&&Math.abs(Zl-Rm)<Co){if(Math.abs($l+Xl)<Po&&Math.abs(Wl+ey)<Po&&Math.abs(Zl+Rm)<Po&&Math.abs(Io+Yl+ry-3)<Po)return this.set(1,0,0,0),this;vn=Math.PI;var _g=(Io+1)/2,ty=(Yl+1)/2,ny=(ry+1)/2,iy=($l+Xl)/4,oy=(Wl+ey)/4,ay=(Zl+Rm)/4;return _g>ty&&_g>ny?_g<Co?(yn=0,Rn=.707106781,Bn=.707106781):(yn=Math.sqrt(_g),Rn=iy/yn,Bn=oy/yn):ty>ny?ty<Co?(yn=.707106781,Rn=0,Bn=.707106781):(Rn=Math.sqrt(ty),yn=iy/Rn,Bn=ay/Rn):ny<Co?(yn=.707106781,Rn=.707106781,Bn=0):(Bn=Math.sqrt(ny),yn=oy/Bn,Rn=ay/Bn),this.set(yn,Rn,Bn,vn),this}var uy=Math.sqrt((Rm-Zl)*(Rm-Zl)+(Wl-ey)*(Wl-ey)+(Xl-$l)*(Xl-$l));return Math.abs(uy)<.001&&(uy=1),this.x=(Rm-Zl)/uy,this.y=(Wl-ey)/uy,this.z=(Xl-$l)/uy,this.w=Math.acos((Io+Yl+ry-1)/2),this},min:function(cr){return this.x=Math.min(this.x,cr.x),this.y=Math.min(this.y,cr.y),this.z=Math.min(this.z,cr.z),this.w=Math.min(this.w,cr.w),this},max:function(cr){return this.x=Math.max(this.x,cr.x),this.y=Math.max(this.y,cr.y),this.z=Math.max(this.z,cr.z),this.w=Math.max(this.w,cr.w),this},clamp:function(cr,vn){return this.x=Math.max(cr.x,Math.min(vn.x,this.x)),this.y=Math.max(cr.y,Math.min(vn.y,this.y)),this.z=Math.max(cr.z,Math.min(vn.z,this.z)),this.w=Math.max(cr.w,Math.min(vn.w,this.w)),this},clampScalar:function(cr,vn){return this.x=Math.max(cr,Math.min(vn,this.x)),this.y=Math.max(cr,Math.min(vn,this.y)),this.z=Math.max(cr,Math.min(vn,this.z)),this.w=Math.max(cr,Math.min(vn,this.w)),this},clampLength:function(cr,vn){var yn=this.length();return this.divideScalar(yn||1).multiplyScalar(Math.max(cr,Math.min(vn,yn)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(cr){return this.x*cr.x+this.y*cr.y+this.z*cr.z+this.w*cr.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(cr){return this.normalize().multiplyScalar(cr)},lerp:function(cr,vn){return this.x+=(cr.x-this.x)*vn,this.y+=(cr.y-this.y)*vn,this.z+=(cr.z-this.z)*vn,this.w+=(cr.w-this.w)*vn,this},lerpVectors:function(cr,vn,yn){return this.x=cr.x+(vn.x-cr.x)*yn,this.y=cr.y+(vn.y-cr.y)*yn,this.z=cr.z+(vn.z-cr.z)*yn,this.w=cr.w+(vn.w-cr.w)*yn,this},equals:function(cr){return cr.x===this.x&&cr.y===this.y&&cr.z===this.z&&cr.w===this.w},fromArray:function(cr,vn){return vn===void 0&&(vn=0),this.x=cr[vn],this.y=cr[vn+1],this.z=cr[vn+2],this.w=cr[vn+3],this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this.x,cr[vn+1]=this.y,cr[vn+2]=this.z,cr[vn+3]=this.w,cr},fromBufferAttribute:function(cr,vn,yn){return yn!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=cr.getX(vn),this.y=cr.getY(vn),this.z=cr.getZ(vn),this.w=cr.getW(vn),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(cr,vn,yn){this.width=cr,this.height=vn,this.scissor=new Vector4(0,0,cr,vn),this.scissorTest=!1,this.viewport=new Vector4(0,0,cr,vn),yn=yn||{},this.texture=new Texture(void 0,yn.mapping,yn.wrapS,yn.wrapT,yn.magFilter,yn.minFilter,yn.format,yn.type,yn.anisotropy,yn.encoding),this.texture.image={},this.texture.image.width=cr,this.texture.image.height=vn,this.texture.generateMipmaps=yn.generateMipmaps!==void 0?yn.generateMipmaps:!1,this.texture.minFilter=yn.minFilter!==void 0?yn.minFilter:LinearFilter,this.depthBuffer=yn.depthBuffer!==void 0?yn.depthBuffer:!0,this.stencilBuffer=yn.stencilBuffer!==void 0?yn.stencilBuffer:!0,this.depthTexture=yn.depthTexture!==void 0?yn.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(cr,vn){(this.width!==cr||this.height!==vn)&&(this.width=cr,this.height=vn,this.texture.image.width=cr,this.texture.image.height=vn,this.dispose()),this.viewport.set(0,0,cr,vn),this.scissor.set(0,0,cr,vn)},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.width=cr.width,this.height=cr.height,this.viewport.copy(cr.viewport),this.texture=cr.texture.clone(),this.depthBuffer=cr.depthBuffer,this.stencilBuffer=cr.stencilBuffer,this.depthTexture=cr.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(cr,vn,yn){WebGLRenderTarget.call(this,cr,vn,yn),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(cr){return WebGLRenderTarget.prototype.copy.call(this,cr),this.samples=cr.samples,this}});function Quaternion(cr,vn,yn,Rn){this._x=cr||0,this._y=vn||0,this._z=yn||0,this._w=Rn!==void 0?Rn:1}Object.assign(Quaternion,{slerp:function(cr,vn,yn,Rn){return yn.copy(cr).slerp(vn,Rn)},slerpFlat:function(cr,vn,yn,Rn,Bn,Co,Po){var To=yn[Rn+0],Io=yn[Rn+1],$l=yn[Rn+2],Wl=yn[Rn+3],Xl=Bn[Co+0],Yl=Bn[Co+1],Zl=Bn[Co+2],ey=Bn[Co+3];if(Wl!==ey||To!==Xl||Io!==Yl||$l!==Zl){var Rm=1-Po,ry=To*Xl+Io*Yl+$l*Zl+Wl*ey,_g=ry>=0?1:-1,ty=1-ry*ry;if(ty>Number.EPSILON){var ny=Math.sqrt(ty),iy=Math.atan2(ny,ry*_g);Rm=Math.sin(Rm*iy)/ny,Po=Math.sin(Po*iy)/ny}var oy=Po*_g;if(To=To*Rm+Xl*oy,Io=Io*Rm+Yl*oy,$l=$l*Rm+Zl*oy,Wl=Wl*Rm+ey*oy,Rm===1-Po){var ay=1/Math.sqrt(To*To+Io*Io+$l*$l+Wl*Wl);To*=ay,Io*=ay,$l*=ay,Wl*=ay}}cr[vn]=To,cr[vn+1]=Io,cr[vn+2]=$l,cr[vn+3]=Wl},multiplyQuaternionsFlat:function(cr,vn,yn,Rn,Bn,Co){var Po=yn[Rn],To=yn[Rn+1],Io=yn[Rn+2],$l=yn[Rn+3],Wl=Bn[Co],Xl=Bn[Co+1],Yl=Bn[Co+2],Zl=Bn[Co+3];return cr[vn]=Po*Zl+$l*Wl+To*Yl-Io*Xl,cr[vn+1]=To*Zl+$l*Xl+Io*Wl-Po*Yl,cr[vn+2]=Io*Zl+$l*Yl+Po*Xl-To*Wl,cr[vn+3]=$l*Zl-Po*Wl-To*Xl-Io*Yl,cr}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(cr){this._x=cr,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(cr){this._y=cr,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(cr){this._z=cr,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(cr){this._w=cr,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(cr,vn,yn,Rn){return this._x=cr,this._y=vn,this._z=yn,this._w=Rn,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(cr){return this._x=cr.x,this._y=cr.y,this._z=cr.z,this._w=cr.w,this._onChangeCallback(),this},setFromEuler:function(cr,vn){if(!(cr&&cr.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var yn=cr._x,Rn=cr._y,Bn=cr._z,Co=cr.order,Po=Math.cos,To=Math.sin,Io=Po(yn/2),$l=Po(Rn/2),Wl=Po(Bn/2),Xl=To(yn/2),Yl=To(Rn/2),Zl=To(Bn/2);switch(Co){case"XYZ":this._x=Xl*$l*Wl+Io*Yl*Zl,this._y=Io*Yl*Wl-Xl*$l*Zl,this._z=Io*$l*Zl+Xl*Yl*Wl,this._w=Io*$l*Wl-Xl*Yl*Zl;break;case"YXZ":this._x=Xl*$l*Wl+Io*Yl*Zl,this._y=Io*Yl*Wl-Xl*$l*Zl,this._z=Io*$l*Zl-Xl*Yl*Wl,this._w=Io*$l*Wl+Xl*Yl*Zl;break;case"ZXY":this._x=Xl*$l*Wl-Io*Yl*Zl,this._y=Io*Yl*Wl+Xl*$l*Zl,this._z=Io*$l*Zl+Xl*Yl*Wl,this._w=Io*$l*Wl-Xl*Yl*Zl;break;case"ZYX":this._x=Xl*$l*Wl-Io*Yl*Zl,this._y=Io*Yl*Wl+Xl*$l*Zl,this._z=Io*$l*Zl-Xl*Yl*Wl,this._w=Io*$l*Wl+Xl*Yl*Zl;break;case"YZX":this._x=Xl*$l*Wl+Io*Yl*Zl,this._y=Io*Yl*Wl+Xl*$l*Zl,this._z=Io*$l*Zl-Xl*Yl*Wl,this._w=Io*$l*Wl-Xl*Yl*Zl;break;case"XZY":this._x=Xl*$l*Wl-Io*Yl*Zl,this._y=Io*Yl*Wl-Xl*$l*Zl,this._z=Io*$l*Zl+Xl*Yl*Wl,this._w=Io*$l*Wl+Xl*Yl*Zl;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Co)}return vn!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(cr,vn){var yn=vn/2,Rn=Math.sin(yn);return this._x=cr.x*Rn,this._y=cr.y*Rn,this._z=cr.z*Rn,this._w=Math.cos(yn),this._onChangeCallback(),this},setFromRotationMatrix:function(cr){var vn=cr.elements,yn=vn[0],Rn=vn[4],Bn=vn[8],Co=vn[1],Po=vn[5],To=vn[9],Io=vn[2],$l=vn[6],Wl=vn[10],Xl=yn+Po+Wl,Yl;return Xl>0?(Yl=.5/Math.sqrt(Xl+1),this._w=.25/Yl,this._x=($l-To)*Yl,this._y=(Bn-Io)*Yl,this._z=(Co-Rn)*Yl):yn>Po&&yn>Wl?(Yl=2*Math.sqrt(1+yn-Po-Wl),this._w=($l-To)/Yl,this._x=.25*Yl,this._y=(Rn+Co)/Yl,this._z=(Bn+Io)/Yl):Po>Wl?(Yl=2*Math.sqrt(1+Po-yn-Wl),this._w=(Bn-Io)/Yl,this._x=(Rn+Co)/Yl,this._y=.25*Yl,this._z=(To+$l)/Yl):(Yl=2*Math.sqrt(1+Wl-yn-Po),this._w=(Co-Rn)/Yl,this._x=(Bn+Io)/Yl,this._y=(To+$l)/Yl,this._z=.25*Yl),this._onChangeCallback(),this},setFromUnitVectors:function(cr,vn){var yn=1e-6,Rn=cr.dot(vn)+1;return Rn<yn?(Rn=0,Math.abs(cr.x)>Math.abs(cr.z)?(this._x=-cr.y,this._y=cr.x,this._z=0,this._w=Rn):(this._x=0,this._y=-cr.z,this._z=cr.y,this._w=Rn)):(this._x=cr.y*vn.z-cr.z*vn.y,this._y=cr.z*vn.x-cr.x*vn.z,this._z=cr.x*vn.y-cr.y*vn.x,this._w=Rn),this.normalize()},angleTo:function(cr){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(cr),-1,1)))},rotateTowards:function(cr,vn){var yn=this.angleTo(cr);if(yn===0)return this;var Rn=Math.min(1,vn/yn);return this.slerp(cr,Rn),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(cr){return this._x*cr._x+this._y*cr._y+this._z*cr._z+this._w*cr._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var cr=this.length();return cr===0?(this._x=0,this._y=0,this._z=0,this._w=1):(cr=1/cr,this._x=this._x*cr,this._y=this._y*cr,this._z=this._z*cr,this._w=this._w*cr),this._onChangeCallback(),this},multiply:function(cr,vn){return vn!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(cr,vn)):this.multiplyQuaternions(this,cr)},premultiply:function(cr){return this.multiplyQuaternions(cr,this)},multiplyQuaternions:function(cr,vn){var yn=cr._x,Rn=cr._y,Bn=cr._z,Co=cr._w,Po=vn._x,To=vn._y,Io=vn._z,$l=vn._w;return this._x=yn*$l+Co*Po+Rn*Io-Bn*To,this._y=Rn*$l+Co*To+Bn*Po-yn*Io,this._z=Bn*$l+Co*Io+yn*To-Rn*Po,this._w=Co*$l-yn*Po-Rn*To-Bn*Io,this._onChangeCallback(),this},slerp:function(cr,vn){if(vn===0)return this;if(vn===1)return this.copy(cr);var yn=this._x,Rn=this._y,Bn=this._z,Co=this._w,Po=Co*cr._w+yn*cr._x+Rn*cr._y+Bn*cr._z;if(Po<0?(this._w=-cr._w,this._x=-cr._x,this._y=-cr._y,this._z=-cr._z,Po=-Po):this.copy(cr),Po>=1)return this._w=Co,this._x=yn,this._y=Rn,this._z=Bn,this;var To=1-Po*Po;if(To<=Number.EPSILON){var Io=1-vn;return this._w=Io*Co+vn*this._w,this._x=Io*yn+vn*this._x,this._y=Io*Rn+vn*this._y,this._z=Io*Bn+vn*this._z,this.normalize(),this._onChangeCallback(),this}var $l=Math.sqrt(To),Wl=Math.atan2($l,Po),Xl=Math.sin((1-vn)*Wl)/$l,Yl=Math.sin(vn*Wl)/$l;return this._w=Co*Xl+this._w*Yl,this._x=yn*Xl+this._x*Yl,this._y=Rn*Xl+this._y*Yl,this._z=Bn*Xl+this._z*Yl,this._onChangeCallback(),this},equals:function(cr){return cr._x===this._x&&cr._y===this._y&&cr._z===this._z&&cr._w===this._w},fromArray:function(cr,vn){return vn===void 0&&(vn=0),this._x=cr[vn],this._y=cr[vn+1],this._z=cr[vn+2],this._w=cr[vn+3],this._onChangeCallback(),this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this._x,cr[vn+1]=this._y,cr[vn+2]=this._z,cr[vn+3]=this._w,cr},fromBufferAttribute:function(cr,vn){return this._x=cr.getX(vn),this._y=cr.getY(vn),this._z=cr.getZ(vn),this._w=cr.getW(vn),this},_onChange:function(cr){return this._onChangeCallback=cr,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(cr,vn,yn){this.x=cr||0,this.y=vn||0,this.z=yn||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(cr,vn,yn){return this.x=cr,this.y=vn,this.z=yn,this},setScalar:function(cr){return this.x=cr,this.y=cr,this.z=cr,this},setX:function(cr){return this.x=cr,this},setY:function(cr){return this.y=cr,this},setZ:function(cr){return this.z=cr,this},setComponent:function(cr,vn){switch(cr){case 0:this.x=vn;break;case 1:this.y=vn;break;case 2:this.z=vn;break;default:throw new Error("index is out of range: "+cr)}return this},getComponent:function(cr){switch(cr){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+cr)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(cr){return this.x=cr.x,this.y=cr.y,this.z=cr.z,this},add:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(cr,vn)):(this.x+=cr.x,this.y+=cr.y,this.z+=cr.z,this)},addScalar:function(cr){return this.x+=cr,this.y+=cr,this.z+=cr,this},addVectors:function(cr,vn){return this.x=cr.x+vn.x,this.y=cr.y+vn.y,this.z=cr.z+vn.z,this},addScaledVector:function(cr,vn){return this.x+=cr.x*vn,this.y+=cr.y*vn,this.z+=cr.z*vn,this},sub:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(cr,vn)):(this.x-=cr.x,this.y-=cr.y,this.z-=cr.z,this)},subScalar:function(cr){return this.x-=cr,this.y-=cr,this.z-=cr,this},subVectors:function(cr,vn){return this.x=cr.x-vn.x,this.y=cr.y-vn.y,this.z=cr.z-vn.z,this},multiply:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(cr,vn)):(this.x*=cr.x,this.y*=cr.y,this.z*=cr.z,this)},multiplyScalar:function(cr){return this.x*=cr,this.y*=cr,this.z*=cr,this},multiplyVectors:function(cr,vn){return this.x=cr.x*vn.x,this.y=cr.y*vn.y,this.z=cr.z*vn.z,this},applyEuler:function(cr){return cr&&cr.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(cr))},applyAxisAngle:function(cr,vn){return this.applyQuaternion(_quaternion.setFromAxisAngle(cr,vn))},applyMatrix3:function(cr){var vn=this.x,yn=this.y,Rn=this.z,Bn=cr.elements;return this.x=Bn[0]*vn+Bn[3]*yn+Bn[6]*Rn,this.y=Bn[1]*vn+Bn[4]*yn+Bn[7]*Rn,this.z=Bn[2]*vn+Bn[5]*yn+Bn[8]*Rn,this},applyNormalMatrix:function(cr){return this.applyMatrix3(cr).normalize()},applyMatrix4:function(cr){var vn=this.x,yn=this.y,Rn=this.z,Bn=cr.elements,Co=1/(Bn[3]*vn+Bn[7]*yn+Bn[11]*Rn+Bn[15]);return this.x=(Bn[0]*vn+Bn[4]*yn+Bn[8]*Rn+Bn[12])*Co,this.y=(Bn[1]*vn+Bn[5]*yn+Bn[9]*Rn+Bn[13])*Co,this.z=(Bn[2]*vn+Bn[6]*yn+Bn[10]*Rn+Bn[14])*Co,this},applyQuaternion:function(cr){var vn=this.x,yn=this.y,Rn=this.z,Bn=cr.x,Co=cr.y,Po=cr.z,To=cr.w,Io=To*vn+Co*Rn-Po*yn,$l=To*yn+Po*vn-Bn*Rn,Wl=To*Rn+Bn*yn-Co*vn,Xl=-Bn*vn-Co*yn-Po*Rn;return this.x=Io*To+Xl*-Bn+$l*-Po-Wl*-Co,this.y=$l*To+Xl*-Co+Wl*-Bn-Io*-Po,this.z=Wl*To+Xl*-Po+Io*-Co-$l*-Bn,this},project:function(cr){return this.applyMatrix4(cr.matrixWorldInverse).applyMatrix4(cr.projectionMatrix)},unproject:function(cr){return this.applyMatrix4(cr.projectionMatrixInverse).applyMatrix4(cr.matrixWorld)},transformDirection:function(cr){var vn=this.x,yn=this.y,Rn=this.z,Bn=cr.elements;return this.x=Bn[0]*vn+Bn[4]*yn+Bn[8]*Rn,this.y=Bn[1]*vn+Bn[5]*yn+Bn[9]*Rn,this.z=Bn[2]*vn+Bn[6]*yn+Bn[10]*Rn,this.normalize()},divide:function(cr){return this.x/=cr.x,this.y/=cr.y,this.z/=cr.z,this},divideScalar:function(cr){return this.multiplyScalar(1/cr)},min:function(cr){return this.x=Math.min(this.x,cr.x),this.y=Math.min(this.y,cr.y),this.z=Math.min(this.z,cr.z),this},max:function(cr){return this.x=Math.max(this.x,cr.x),this.y=Math.max(this.y,cr.y),this.z=Math.max(this.z,cr.z),this},clamp:function(cr,vn){return this.x=Math.max(cr.x,Math.min(vn.x,this.x)),this.y=Math.max(cr.y,Math.min(vn.y,this.y)),this.z=Math.max(cr.z,Math.min(vn.z,this.z)),this},clampScalar:function(cr,vn){return this.x=Math.max(cr,Math.min(vn,this.x)),this.y=Math.max(cr,Math.min(vn,this.y)),this.z=Math.max(cr,Math.min(vn,this.z)),this},clampLength:function(cr,vn){var yn=this.length();return this.divideScalar(yn||1).multiplyScalar(Math.max(cr,Math.min(vn,yn)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(cr){return this.x*cr.x+this.y*cr.y+this.z*cr.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(cr){return this.normalize().multiplyScalar(cr)},lerp:function(cr,vn){return this.x+=(cr.x-this.x)*vn,this.y+=(cr.y-this.y)*vn,this.z+=(cr.z-this.z)*vn,this},lerpVectors:function(cr,vn,yn){return this.x=cr.x+(vn.x-cr.x)*yn,this.y=cr.y+(vn.y-cr.y)*yn,this.z=cr.z+(vn.z-cr.z)*yn,this},cross:function(cr,vn){return vn!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(cr,vn)):this.crossVectors(this,cr)},crossVectors:function(cr,vn){var yn=cr.x,Rn=cr.y,Bn=cr.z,Co=vn.x,Po=vn.y,To=vn.z;return this.x=Rn*To-Bn*Po,this.y=Bn*Co-yn*To,this.z=yn*Po-Rn*Co,this},projectOnVector:function(cr){var vn=cr.lengthSq();if(vn===0)return this.set(0,0,0);var yn=cr.dot(this)/vn;return this.copy(cr).multiplyScalar(yn)},projectOnPlane:function(cr){return _vector.copy(this).projectOnVector(cr),this.sub(_vector)},reflect:function(cr){return this.sub(_vector.copy(cr).multiplyScalar(2*this.dot(cr)))},angleTo:function(cr){var vn=Math.sqrt(this.lengthSq()*cr.lengthSq());if(vn===0)return Math.PI/2;var yn=this.dot(cr)/vn;return Math.acos(MathUtils.clamp(yn,-1,1))},distanceTo:function(cr){return Math.sqrt(this.distanceToSquared(cr))},distanceToSquared:function(cr){var vn=this.x-cr.x,yn=this.y-cr.y,Rn=this.z-cr.z;return vn*vn+yn*yn+Rn*Rn},manhattanDistanceTo:function(cr){return Math.abs(this.x-cr.x)+Math.abs(this.y-cr.y)+Math.abs(this.z-cr.z)},setFromSpherical:function(cr){return this.setFromSphericalCoords(cr.radius,cr.phi,cr.theta)},setFromSphericalCoords:function(cr,vn,yn){var Rn=Math.sin(vn)*cr;return this.x=Rn*Math.sin(yn),this.y=Math.cos(vn)*cr,this.z=Rn*Math.cos(yn),this},setFromCylindrical:function(cr){return this.setFromCylindricalCoords(cr.radius,cr.theta,cr.y)},setFromCylindricalCoords:function(cr,vn,yn){return this.x=cr*Math.sin(vn),this.y=yn,this.z=cr*Math.cos(vn),this},setFromMatrixPosition:function(cr){var vn=cr.elements;return this.x=vn[12],this.y=vn[13],this.z=vn[14],this},setFromMatrixScale:function(cr){var vn=this.setFromMatrixColumn(cr,0).length(),yn=this.setFromMatrixColumn(cr,1).length(),Rn=this.setFromMatrixColumn(cr,2).length();return this.x=vn,this.y=yn,this.z=Rn,this},setFromMatrixColumn:function(cr,vn){return this.fromArray(cr.elements,vn*4)},setFromMatrix3Column:function(cr,vn){return this.fromArray(cr.elements,vn*3)},equals:function(cr){return cr.x===this.x&&cr.y===this.y&&cr.z===this.z},fromArray:function(cr,vn){return vn===void 0&&(vn=0),this.x=cr[vn],this.y=cr[vn+1],this.z=cr[vn+2],this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this.x,cr[vn+1]=this.y,cr[vn+2]=this.z,cr},fromBufferAttribute:function(cr,vn,yn){return yn!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=cr.getX(vn),this.y=cr.getY(vn),this.z=cr.getZ(vn),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm){var ry=this.elements;return ry[0]=cr,ry[4]=vn,ry[8]=yn,ry[12]=Rn,ry[1]=Bn,ry[5]=Co,ry[9]=Po,ry[13]=To,ry[2]=Io,ry[6]=$l,ry[10]=Wl,ry[14]=Xl,ry[3]=Yl,ry[7]=Zl,ry[11]=ey,ry[15]=Rm,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(cr){var vn=this.elements,yn=cr.elements;return vn[0]=yn[0],vn[1]=yn[1],vn[2]=yn[2],vn[3]=yn[3],vn[4]=yn[4],vn[5]=yn[5],vn[6]=yn[6],vn[7]=yn[7],vn[8]=yn[8],vn[9]=yn[9],vn[10]=yn[10],vn[11]=yn[11],vn[12]=yn[12],vn[13]=yn[13],vn[14]=yn[14],vn[15]=yn[15],this},copyPosition:function(cr){var vn=this.elements,yn=cr.elements;return vn[12]=yn[12],vn[13]=yn[13],vn[14]=yn[14],this},extractBasis:function(cr,vn,yn){return cr.setFromMatrixColumn(this,0),vn.setFromMatrixColumn(this,1),yn.setFromMatrixColumn(this,2),this},makeBasis:function(cr,vn,yn){return this.set(cr.x,vn.x,yn.x,0,cr.y,vn.y,yn.y,0,cr.z,vn.z,yn.z,0,0,0,0,1),this},extractRotation:function(cr){var vn=this.elements,yn=cr.elements,Rn=1/_v1.setFromMatrixColumn(cr,0).length(),Bn=1/_v1.setFromMatrixColumn(cr,1).length(),Co=1/_v1.setFromMatrixColumn(cr,2).length();return vn[0]=yn[0]*Rn,vn[1]=yn[1]*Rn,vn[2]=yn[2]*Rn,vn[3]=0,vn[4]=yn[4]*Bn,vn[5]=yn[5]*Bn,vn[6]=yn[6]*Bn,vn[7]=0,vn[8]=yn[8]*Co,vn[9]=yn[9]*Co,vn[10]=yn[10]*Co,vn[11]=0,vn[12]=0,vn[13]=0,vn[14]=0,vn[15]=1,this},makeRotationFromEuler:function(cr){cr&&cr.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var vn=this.elements,yn=cr.x,Rn=cr.y,Bn=cr.z,Co=Math.cos(yn),Po=Math.sin(yn),To=Math.cos(Rn),Io=Math.sin(Rn),$l=Math.cos(Bn),Wl=Math.sin(Bn);if(cr.order==="XYZ"){var Xl=Co*$l,Yl=Co*Wl,Zl=Po*$l,ey=Po*Wl;vn[0]=To*$l,vn[4]=-To*Wl,vn[8]=Io,vn[1]=Yl+Zl*Io,vn[5]=Xl-ey*Io,vn[9]=-Po*To,vn[2]=ey-Xl*Io,vn[6]=Zl+Yl*Io,vn[10]=Co*To}else if(cr.order==="YXZ"){var Rm=To*$l,ry=To*Wl,_g=Io*$l,ty=Io*Wl;vn[0]=Rm+ty*Po,vn[4]=_g*Po-ry,vn[8]=Co*Io,vn[1]=Co*Wl,vn[5]=Co*$l,vn[9]=-Po,vn[2]=ry*Po-_g,vn[6]=ty+Rm*Po,vn[10]=Co*To}else if(cr.order==="ZXY"){var Rm=To*$l,ry=To*Wl,_g=Io*$l,ty=Io*Wl;vn[0]=Rm-ty*Po,vn[4]=-Co*Wl,vn[8]=_g+ry*Po,vn[1]=ry+_g*Po,vn[5]=Co*$l,vn[9]=ty-Rm*Po,vn[2]=-Co*Io,vn[6]=Po,vn[10]=Co*To}else if(cr.order==="ZYX"){var Xl=Co*$l,Yl=Co*Wl,Zl=Po*$l,ey=Po*Wl;vn[0]=To*$l,vn[4]=Zl*Io-Yl,vn[8]=Xl*Io+ey,vn[1]=To*Wl,vn[5]=ey*Io+Xl,vn[9]=Yl*Io-Zl,vn[2]=-Io,vn[6]=Po*To,vn[10]=Co*To}else if(cr.order==="YZX"){var ny=Co*To,iy=Co*Io,oy=Po*To,ay=Po*Io;vn[0]=To*$l,vn[4]=ay-ny*Wl,vn[8]=oy*Wl+iy,vn[1]=Wl,vn[5]=Co*$l,vn[9]=-Po*$l,vn[2]=-Io*$l,vn[6]=iy*Wl+oy,vn[10]=ny-ay*Wl}else if(cr.order==="XZY"){var ny=Co*To,iy=Co*Io,oy=Po*To,ay=Po*Io;vn[0]=To*$l,vn[4]=-Wl,vn[8]=Io*$l,vn[1]=ny*Wl+ay,vn[5]=Co*$l,vn[9]=iy*Wl-oy,vn[2]=oy*Wl-iy,vn[6]=Po*$l,vn[10]=ay*Wl+ny}return vn[3]=0,vn[7]=0,vn[11]=0,vn[12]=0,vn[13]=0,vn[14]=0,vn[15]=1,this},makeRotationFromQuaternion:function(cr){return this.compose(_zero,cr,_one)},lookAt:function(cr,vn,yn){var Rn=this.elements;return _z.subVectors(cr,vn),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(yn,_z),_x.lengthSq()===0&&(Math.abs(yn.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(yn,_z)),_x.normalize(),_y.crossVectors(_z,_x),Rn[0]=_x.x,Rn[4]=_y.x,Rn[8]=_z.x,Rn[1]=_x.y,Rn[5]=_y.y,Rn[9]=_z.y,Rn[2]=_x.z,Rn[6]=_y.z,Rn[10]=_z.z,this},multiply:function(cr,vn){return vn!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(cr,vn)):this.multiplyMatrices(this,cr)},premultiply:function(cr){return this.multiplyMatrices(cr,this)},multiplyMatrices:function(cr,vn){var yn=cr.elements,Rn=vn.elements,Bn=this.elements,Co=yn[0],Po=yn[4],To=yn[8],Io=yn[12],$l=yn[1],Wl=yn[5],Xl=yn[9],Yl=yn[13],Zl=yn[2],ey=yn[6],Rm=yn[10],ry=yn[14],_g=yn[3],ty=yn[7],ny=yn[11],iy=yn[15],oy=Rn[0],ay=Rn[4],uy=Rn[8],hy=Rn[12],my=Rn[1],ly=Rn[5],sy=Rn[9],cy=Rn[13],fy=Rn[2],vy=Rn[6],dy=Rn[10],Ay=Rn[14],gy=Rn[3],wy=Rn[7],Cy=Rn[11],My=Rn[15];return Bn[0]=Co*oy+Po*my+To*fy+Io*gy,Bn[4]=Co*ay+Po*ly+To*vy+Io*wy,Bn[8]=Co*uy+Po*sy+To*dy+Io*Cy,Bn[12]=Co*hy+Po*cy+To*Ay+Io*My,Bn[1]=$l*oy+Wl*my+Xl*fy+Yl*gy,Bn[5]=$l*ay+Wl*ly+Xl*vy+Yl*wy,Bn[9]=$l*uy+Wl*sy+Xl*dy+Yl*Cy,Bn[13]=$l*hy+Wl*cy+Xl*Ay+Yl*My,Bn[2]=Zl*oy+ey*my+Rm*fy+ry*gy,Bn[6]=Zl*ay+ey*ly+Rm*vy+ry*wy,Bn[10]=Zl*uy+ey*sy+Rm*dy+ry*Cy,Bn[14]=Zl*hy+ey*cy+Rm*Ay+ry*My,Bn[3]=_g*oy+ty*my+ny*fy+iy*gy,Bn[7]=_g*ay+ty*ly+ny*vy+iy*wy,Bn[11]=_g*uy+ty*sy+ny*dy+iy*Cy,Bn[15]=_g*hy+ty*cy+ny*Ay+iy*My,this},multiplyScalar:function(cr){var vn=this.elements;return vn[0]*=cr,vn[4]*=cr,vn[8]*=cr,vn[12]*=cr,vn[1]*=cr,vn[5]*=cr,vn[9]*=cr,vn[13]*=cr,vn[2]*=cr,vn[6]*=cr,vn[10]*=cr,vn[14]*=cr,vn[3]*=cr,vn[7]*=cr,vn[11]*=cr,vn[15]*=cr,this},determinant:function(){var cr=this.elements,vn=cr[0],yn=cr[4],Rn=cr[8],Bn=cr[12],Co=cr[1],Po=cr[5],To=cr[9],Io=cr[13],$l=cr[2],Wl=cr[6],Xl=cr[10],Yl=cr[14],Zl=cr[3],ey=cr[7],Rm=cr[11],ry=cr[15];return Zl*(+Bn*To*Wl-Rn*Io*Wl-Bn*Po*Xl+yn*Io*Xl+Rn*Po*Yl-yn*To*Yl)+ey*(+vn*To*Yl-vn*Io*Xl+Bn*Co*Xl-Rn*Co*Yl+Rn*Io*$l-Bn*To*$l)+Rm*(+vn*Io*Wl-vn*Po*Yl-Bn*Co*Wl+yn*Co*Yl+Bn*Po*$l-yn*Io*$l)+ry*(-Rn*Po*$l-vn*To*Wl+vn*Po*Xl+Rn*Co*Wl-yn*Co*Xl+yn*To*$l)},transpose:function(){var cr=this.elements,vn;return vn=cr[1],cr[1]=cr[4],cr[4]=vn,vn=cr[2],cr[2]=cr[8],cr[8]=vn,vn=cr[6],cr[6]=cr[9],cr[9]=vn,vn=cr[3],cr[3]=cr[12],cr[12]=vn,vn=cr[7],cr[7]=cr[13],cr[13]=vn,vn=cr[11],cr[11]=cr[14],cr[14]=vn,this},setPosition:function(cr,vn,yn){var Rn=this.elements;return cr.isVector3?(Rn[12]=cr.x,Rn[13]=cr.y,Rn[14]=cr.z):(Rn[12]=cr,Rn[13]=vn,Rn[14]=yn),this},getInverse:function(cr,vn){vn!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var yn=this.elements,Rn=cr.elements,Bn=Rn[0],Co=Rn[1],Po=Rn[2],To=Rn[3],Io=Rn[4],$l=Rn[5],Wl=Rn[6],Xl=Rn[7],Yl=Rn[8],Zl=Rn[9],ey=Rn[10],Rm=Rn[11],ry=Rn[12],_g=Rn[13],ty=Rn[14],ny=Rn[15],iy=Zl*ty*Xl-_g*ey*Xl+_g*Wl*Rm-$l*ty*Rm-Zl*Wl*ny+$l*ey*ny,oy=ry*ey*Xl-Yl*ty*Xl-ry*Wl*Rm+Io*ty*Rm+Yl*Wl*ny-Io*ey*ny,ay=Yl*_g*Xl-ry*Zl*Xl+ry*$l*Rm-Io*_g*Rm-Yl*$l*ny+Io*Zl*ny,uy=ry*Zl*Wl-Yl*_g*Wl-ry*$l*ey+Io*_g*ey+Yl*$l*ty-Io*Zl*ty,hy=Bn*iy+Co*oy+Po*ay+To*uy;if(hy===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var my=1/hy;return yn[0]=iy*my,yn[1]=(_g*ey*To-Zl*ty*To-_g*Po*Rm+Co*ty*Rm+Zl*Po*ny-Co*ey*ny)*my,yn[2]=($l*ty*To-_g*Wl*To+_g*Po*Xl-Co*ty*Xl-$l*Po*ny+Co*Wl*ny)*my,yn[3]=(Zl*Wl*To-$l*ey*To-Zl*Po*Xl+Co*ey*Xl+$l*Po*Rm-Co*Wl*Rm)*my,yn[4]=oy*my,yn[5]=(Yl*ty*To-ry*ey*To+ry*Po*Rm-Bn*ty*Rm-Yl*Po*ny+Bn*ey*ny)*my,yn[6]=(ry*Wl*To-Io*ty*To-ry*Po*Xl+Bn*ty*Xl+Io*Po*ny-Bn*Wl*ny)*my,yn[7]=(Io*ey*To-Yl*Wl*To+Yl*Po*Xl-Bn*ey*Xl-Io*Po*Rm+Bn*Wl*Rm)*my,yn[8]=ay*my,yn[9]=(ry*Zl*To-Yl*_g*To-ry*Co*Rm+Bn*_g*Rm+Yl*Co*ny-Bn*Zl*ny)*my,yn[10]=(Io*_g*To-ry*$l*To+ry*Co*Xl-Bn*_g*Xl-Io*Co*ny+Bn*$l*ny)*my,yn[11]=(Yl*$l*To-Io*Zl*To-Yl*Co*Xl+Bn*Zl*Xl+Io*Co*Rm-Bn*$l*Rm)*my,yn[12]=uy*my,yn[13]=(Yl*_g*Po-ry*Zl*Po+ry*Co*ey-Bn*_g*ey-Yl*Co*ty+Bn*Zl*ty)*my,yn[14]=(ry*$l*Po-Io*_g*Po-ry*Co*Wl+Bn*_g*Wl+Io*Co*ty-Bn*$l*ty)*my,yn[15]=(Io*Zl*Po-Yl*$l*Po+Yl*Co*Wl-Bn*Zl*Wl-Io*Co*ey+Bn*$l*ey)*my,this},scale:function(cr){var vn=this.elements,yn=cr.x,Rn=cr.y,Bn=cr.z;return vn[0]*=yn,vn[4]*=Rn,vn[8]*=Bn,vn[1]*=yn,vn[5]*=Rn,vn[9]*=Bn,vn[2]*=yn,vn[6]*=Rn,vn[10]*=Bn,vn[3]*=yn,vn[7]*=Rn,vn[11]*=Bn,this},getMaxScaleOnAxis:function(){var cr=this.elements,vn=cr[0]*cr[0]+cr[1]*cr[1]+cr[2]*cr[2],yn=cr[4]*cr[4]+cr[5]*cr[5]+cr[6]*cr[6],Rn=cr[8]*cr[8]+cr[9]*cr[9]+cr[10]*cr[10];return Math.sqrt(Math.max(vn,yn,Rn))},makeTranslation:function(cr,vn,yn){return this.set(1,0,0,cr,0,1,0,vn,0,0,1,yn,0,0,0,1),this},makeRotationX:function(cr){var vn=Math.cos(cr),yn=Math.sin(cr);return this.set(1,0,0,0,0,vn,-yn,0,0,yn,vn,0,0,0,0,1),this},makeRotationY:function(cr){var vn=Math.cos(cr),yn=Math.sin(cr);return this.set(vn,0,yn,0,0,1,0,0,-yn,0,vn,0,0,0,0,1),this},makeRotationZ:function(cr){var vn=Math.cos(cr),yn=Math.sin(cr);return this.set(vn,-yn,0,0,yn,vn,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(cr,vn){var yn=Math.cos(vn),Rn=Math.sin(vn),Bn=1-yn,Co=cr.x,Po=cr.y,To=cr.z,Io=Bn*Co,$l=Bn*Po;return this.set(Io*Co+yn,Io*Po-Rn*To,Io*To+Rn*Po,0,Io*Po+Rn*To,$l*Po+yn,$l*To-Rn*Co,0,Io*To-Rn*Po,$l*To+Rn*Co,Bn*To*To+yn,0,0,0,0,1),this},makeScale:function(cr,vn,yn){return this.set(cr,0,0,0,0,vn,0,0,0,0,yn,0,0,0,0,1),this},makeShear:function(cr,vn,yn){return this.set(1,vn,yn,0,cr,1,yn,0,cr,vn,1,0,0,0,0,1),this},compose:function(cr,vn,yn){var Rn=this.elements,Bn=vn._x,Co=vn._y,Po=vn._z,To=vn._w,Io=Bn+Bn,$l=Co+Co,Wl=Po+Po,Xl=Bn*Io,Yl=Bn*$l,Zl=Bn*Wl,ey=Co*$l,Rm=Co*Wl,ry=Po*Wl,_g=To*Io,ty=To*$l,ny=To*Wl,iy=yn.x,oy=yn.y,ay=yn.z;return Rn[0]=(1-(ey+ry))*iy,Rn[1]=(Yl+ny)*iy,Rn[2]=(Zl-ty)*iy,Rn[3]=0,Rn[4]=(Yl-ny)*oy,Rn[5]=(1-(Xl+ry))*oy,Rn[6]=(Rm+_g)*oy,Rn[7]=0,Rn[8]=(Zl+ty)*ay,Rn[9]=(Rm-_g)*ay,Rn[10]=(1-(Xl+ey))*ay,Rn[11]=0,Rn[12]=cr.x,Rn[13]=cr.y,Rn[14]=cr.z,Rn[15]=1,this},decompose:function(cr,vn,yn){var Rn=this.elements,Bn=_v1.set(Rn[0],Rn[1],Rn[2]).length(),Co=_v1.set(Rn[4],Rn[5],Rn[6]).length(),Po=_v1.set(Rn[8],Rn[9],Rn[10]).length(),To=this.determinant();To<0&&(Bn=-Bn),cr.x=Rn[12],cr.y=Rn[13],cr.z=Rn[14],_m1.copy(this);var Io=1/Bn,$l=1/Co,Wl=1/Po;return _m1.elements[0]*=Io,_m1.elements[1]*=Io,_m1.elements[2]*=Io,_m1.elements[4]*=$l,_m1.elements[5]*=$l,_m1.elements[6]*=$l,_m1.elements[8]*=Wl,_m1.elements[9]*=Wl,_m1.elements[10]*=Wl,vn.setFromRotationMatrix(_m1),yn.x=Bn,yn.y=Co,yn.z=Po,this},makePerspective:function(cr,vn,yn,Rn,Bn,Co){Co===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Po=this.elements,To=2*Bn/(vn-cr),Io=2*Bn/(yn-Rn),$l=(vn+cr)/(vn-cr),Wl=(yn+Rn)/(yn-Rn),Xl=-(Co+Bn)/(Co-Bn),Yl=-2*Co*Bn/(Co-Bn);return Po[0]=To,Po[4]=0,Po[8]=$l,Po[12]=0,Po[1]=0,Po[5]=Io,Po[9]=Wl,Po[13]=0,Po[2]=0,Po[6]=0,Po[10]=Xl,Po[14]=Yl,Po[3]=0,Po[7]=0,Po[11]=-1,Po[15]=0,this},makeOrthographic:function(cr,vn,yn,Rn,Bn,Co){var Po=this.elements,To=1/(vn-cr),Io=1/(yn-Rn),$l=1/(Co-Bn),Wl=(vn+cr)*To,Xl=(yn+Rn)*Io,Yl=(Co+Bn)*$l;return Po[0]=2*To,Po[4]=0,Po[8]=0,Po[12]=-Wl,Po[1]=0,Po[5]=2*Io,Po[9]=0,Po[13]=-Xl,Po[2]=0,Po[6]=0,Po[10]=-2*$l,Po[14]=-Yl,Po[3]=0,Po[7]=0,Po[11]=0,Po[15]=1,this},equals:function(cr){for(var vn=this.elements,yn=cr.elements,Rn=0;Rn<16;Rn++)if(vn[Rn]!==yn[Rn])return!1;return!0},fromArray:function(cr,vn){vn===void 0&&(vn=0);for(var yn=0;yn<16;yn++)this.elements[yn]=cr[yn+vn];return this},toArray:function(cr,vn){cr===void 0&&(cr=[]),vn===void 0&&(vn=0);var yn=this.elements;return cr[vn]=yn[0],cr[vn+1]=yn[1],cr[vn+2]=yn[2],cr[vn+3]=yn[3],cr[vn+4]=yn[4],cr[vn+5]=yn[5],cr[vn+6]=yn[6],cr[vn+7]=yn[7],cr[vn+8]=yn[8],cr[vn+9]=yn[9],cr[vn+10]=yn[10],cr[vn+11]=yn[11],cr[vn+12]=yn[12],cr[vn+13]=yn[13],cr[vn+14]=yn[14],cr[vn+15]=yn[15],cr}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(cr,vn,yn,Rn){this._x=cr||0,this._y=vn||0,this._z=yn||0,this._order=Rn||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(cr){this._x=cr,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(cr){this._y=cr,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(cr){this._z=cr,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(cr){this._order=cr,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(cr,vn,yn,Rn){return this._x=cr,this._y=vn,this._z=yn,this._order=Rn||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(cr){return this._x=cr._x,this._y=cr._y,this._z=cr._z,this._order=cr._order,this._onChangeCallback(),this},setFromRotationMatrix:function(cr,vn,yn){var Rn=MathUtils.clamp,Bn=cr.elements,Co=Bn[0],Po=Bn[4],To=Bn[8],Io=Bn[1],$l=Bn[5],Wl=Bn[9],Xl=Bn[2],Yl=Bn[6],Zl=Bn[10];switch(vn=vn||this._order,vn){case"XYZ":this._y=Math.asin(Rn(To,-1,1)),Math.abs(To)<.9999999?(this._x=Math.atan2(-Wl,Zl),this._z=Math.atan2(-Po,Co)):(this._x=Math.atan2(Yl,$l),this._z=0);break;case"YXZ":this._x=Math.asin(-Rn(Wl,-1,1)),Math.abs(Wl)<.9999999?(this._y=Math.atan2(To,Zl),this._z=Math.atan2(Io,$l)):(this._y=Math.atan2(-Xl,Co),this._z=0);break;case"ZXY":this._x=Math.asin(Rn(Yl,-1,1)),Math.abs(Yl)<.9999999?(this._y=Math.atan2(-Xl,Zl),this._z=Math.atan2(-Po,$l)):(this._y=0,this._z=Math.atan2(Io,Co));break;case"ZYX":this._y=Math.asin(-Rn(Xl,-1,1)),Math.abs(Xl)<.9999999?(this._x=Math.atan2(Yl,Zl),this._z=Math.atan2(Io,Co)):(this._x=0,this._z=Math.atan2(-Po,$l));break;case"YZX":this._z=Math.asin(Rn(Io,-1,1)),Math.abs(Io)<.9999999?(this._x=Math.atan2(-Wl,$l),this._y=Math.atan2(-Xl,Co)):(this._x=0,this._y=Math.atan2(To,Zl));break;case"XZY":this._z=Math.asin(-Rn(Po,-1,1)),Math.abs(Po)<.9999999?(this._x=Math.atan2(Yl,$l),this._y=Math.atan2(To,Co)):(this._x=Math.atan2(-Wl,Zl),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+vn)}return this._order=vn,yn!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(cr,vn,yn){return _matrix.makeRotationFromQuaternion(cr),this.setFromRotationMatrix(_matrix,vn,yn)},setFromVector3:function(cr,vn){return this.set(cr.x,cr.y,cr.z,vn||this._order)},reorder:function(cr){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,cr)},equals:function(cr){return cr._x===this._x&&cr._y===this._y&&cr._z===this._z&&cr._order===this._order},fromArray:function(cr){return this._x=cr[0],this._y=cr[1],this._z=cr[2],cr[3]!==void 0&&(this._order=cr[3]),this._onChangeCallback(),this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this._x,cr[vn+1]=this._y,cr[vn+2]=this._z,cr[vn+3]=this._order,cr},toVector3:function(cr){return cr?cr.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(cr){return this._onChangeCallback=cr,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(cr){this.mask=1<<cr|0},enable:function(cr){this.mask|=1<<cr|0},enableAll:function(){this.mask=-1},toggle:function(cr){this.mask^=1<<cr|0},disable:function(cr){this.mask&=~(1<<cr|0)},disableAll:function(){this.mask=0},test:function(cr){return(this.mask&cr.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var cr=new Vector3,vn=new Euler,yn=new Quaternion,Rn=new Vector3(1,1,1);function Bn(){yn.setFromEuler(vn,!1)}function Co(){vn.setFromQuaternion(yn,void 0,!1)}vn._onChange(Bn),yn._onChange(Co),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:cr},rotation:{configurable:!0,enumerable:!0,value:vn},quaternion:{configurable:!0,enumerable:!0,value:yn},scale:{configurable:!0,enumerable:!0,value:Rn},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(cr){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(cr),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(cr){return this.quaternion.premultiply(cr),this},setRotationFromAxisAngle:function(cr,vn){this.quaternion.setFromAxisAngle(cr,vn)},setRotationFromEuler:function(cr){this.quaternion.setFromEuler(cr,!0)},setRotationFromMatrix:function(cr){this.quaternion.setFromRotationMatrix(cr)},setRotationFromQuaternion:function(cr){this.quaternion.copy(cr)},rotateOnAxis:function(cr,vn){return _q1.setFromAxisAngle(cr,vn),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(cr,vn){return _q1.setFromAxisAngle(cr,vn),this.quaternion.premultiply(_q1),this},rotateX:function(cr){return this.rotateOnAxis(_xAxis,cr)},rotateY:function(cr){return this.rotateOnAxis(_yAxis,cr)},rotateZ:function(cr){return this.rotateOnAxis(_zAxis,cr)},translateOnAxis:function(cr,vn){return _v1$1.copy(cr).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(vn)),this},translateX:function(cr){return this.translateOnAxis(_xAxis,cr)},translateY:function(cr){return this.translateOnAxis(_yAxis,cr)},translateZ:function(cr){return this.translateOnAxis(_zAxis,cr)},localToWorld:function(cr){return cr.applyMatrix4(this.matrixWorld)},worldToLocal:function(cr){return cr.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(cr,vn,yn){cr.isVector3?_target.copy(cr):_target.set(cr,vn,yn);var Rn=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Rn&&(_m1$1.extractRotation(Rn.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(cr){if(arguments.length>1){for(var vn=0;vn<arguments.length;vn++)this.add(arguments[vn]);return this}return cr===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",cr),this):(cr&&cr.isObject3D?(cr.parent!==null&&cr.parent.remove(cr),cr.parent=this,this.children.push(cr),cr.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",cr),this)},remove:function(cr){if(arguments.length>1){for(var vn=0;vn<arguments.length;vn++)this.remove(arguments[vn]);return this}var yn=this.children.indexOf(cr);return yn!==-1&&(cr.parent=null,this.children.splice(yn,1),cr.dispatchEvent(_removedEvent)),this},attach:function(cr){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),cr.parent!==null&&(cr.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(cr.parent.matrixWorld)),cr.applyMatrix4(_m1$1),cr.updateWorldMatrix(!1,!1),this.add(cr),this},getObjectById:function(cr){return this.getObjectByProperty("id",cr)},getObjectByName:function(cr){return this.getObjectByProperty("name",cr)},getObjectByProperty:function(cr,vn){if(this[cr]===vn)return this;for(var yn=0,Rn=this.children.length;yn<Rn;yn++){var Bn=this.children[yn],Co=Bn.getObjectByProperty(cr,vn);if(Co!==void 0)return Co}},getWorldPosition:function(cr){return cr===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),cr=new Vector3),this.updateMatrixWorld(!0),cr.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(cr){return cr===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),cr=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,cr,_scale),cr},getWorldScale:function(cr){return cr===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),cr=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,cr),cr},getWorldDirection:function(cr){cr===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),cr=new Vector3),this.updateMatrixWorld(!0);var vn=this.matrixWorld.elements;return cr.set(vn[8],vn[9],vn[10]).normalize()},raycast:function(){},traverse:function(cr){cr(this);for(var vn=this.children,yn=0,Rn=vn.length;yn<Rn;yn++)vn[yn].traverse(cr)},traverseVisible:function(cr){if(this.visible!==!1){cr(this);for(var vn=this.children,yn=0,Rn=vn.length;yn<Rn;yn++)vn[yn].traverseVisible(cr)}},traverseAncestors:function(cr){var vn=this.parent;vn!==null&&(cr(vn),vn.traverseAncestors(cr))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(cr){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||cr)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,cr=!0);for(var vn=this.children,yn=0,Rn=vn.length;yn<Rn;yn++)vn[yn].updateMatrixWorld(cr)},updateWorldMatrix:function(cr,vn){var yn=this.parent;if(cr===!0&&yn!==null&&yn.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),vn===!0)for(var Rn=this.children,Bn=0,Co=Rn.length;Bn<Co;Bn++)Rn[Bn].updateWorldMatrix(!1,!0)},toJSON:function(cr){var vn=cr===void 0||typeof cr=="string",yn={};vn&&(cr={geometries:{},materials:{},textures:{},images:{},shapes:{}},yn.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var Rn={};Rn.uuid=this.uuid,Rn.type=this.type,this.name!==""&&(Rn.name=this.name),this.castShadow===!0&&(Rn.castShadow=!0),this.receiveShadow===!0&&(Rn.receiveShadow=!0),this.visible===!1&&(Rn.visible=!1),this.frustumCulled===!1&&(Rn.frustumCulled=!1),this.renderOrder!==0&&(Rn.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(Rn.userData=this.userData),Rn.layers=this.layers.mask,Rn.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Rn.matrixAutoUpdate=!1),this.isInstancedMesh&&(Rn.type="InstancedMesh",Rn.count=this.count,Rn.instanceMatrix=this.instanceMatrix.toJSON());function Bn(ry,_g){return ry[_g.uuid]===void 0&&(ry[_g.uuid]=_g.toJSON(cr)),_g.uuid}if(this.isMesh||this.isLine||this.isPoints){Rn.geometry=Bn(cr.geometries,this.geometry);var Co=this.geometry.parameters;if(Co!==void 0&&Co.shapes!==void 0){var Po=Co.shapes;if(Array.isArray(Po))for(var To=0,Io=Po.length;To<Io;To++){var $l=Po[To];Bn(cr.shapes,$l)}else Bn(cr.shapes,Po)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Wl=[],To=0,Io=this.material.length;To<Io;To++)Wl.push(Bn(cr.materials,this.material[To]));Rn.material=Wl}else Rn.material=Bn(cr.materials,this.material);if(this.children.length>0){Rn.children=[];for(var To=0;To<this.children.length;To++)Rn.children.push(this.children[To].toJSON(cr).object)}if(vn){var Xl=Rm(cr.geometries),Yl=Rm(cr.materials),Zl=Rm(cr.textures),ey=Rm(cr.images),Po=Rm(cr.shapes);Xl.length>0&&(yn.geometries=Xl),Yl.length>0&&(yn.materials=Yl),Zl.length>0&&(yn.textures=Zl),ey.length>0&&(yn.images=ey),Po.length>0&&(yn.shapes=Po)}return yn.object=Rn,yn;function Rm(ry){var _g=[];for(var ty in ry){var ny=ry[ty];delete ny.metadata,_g.push(ny)}return _g}},clone:function(cr){return new this.constructor().copy(this,cr)},copy:function(cr,vn){if(vn===void 0&&(vn=!0),this.name=cr.name,this.up.copy(cr.up),this.position.copy(cr.position),this.quaternion.copy(cr.quaternion),this.scale.copy(cr.scale),this.matrix.copy(cr.matrix),this.matrixWorld.copy(cr.matrixWorld),this.matrixAutoUpdate=cr.matrixAutoUpdate,this.matrixWorldNeedsUpdate=cr.matrixWorldNeedsUpdate,this.layers.mask=cr.layers.mask,this.visible=cr.visible,this.castShadow=cr.castShadow,this.receiveShadow=cr.receiveShadow,this.frustumCulled=cr.frustumCulled,this.renderOrder=cr.renderOrder,this.userData=JSON.parse(JSON.stringify(cr.userData)),vn===!0)for(var yn=0;yn<cr.children.length;yn++){var Rn=cr.children[yn];this.add(Rn.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(cr,vn){return Object3D.prototype.copy.call(this,cr,vn),cr.background!==null&&(this.background=cr.background.clone()),cr.environment!==null&&(this.environment=cr.environment.clone()),cr.fog!==null&&(this.fog=cr.fog.clone()),cr.overrideMaterial!==null&&(this.overrideMaterial=cr.overrideMaterial.clone()),this.autoUpdate=cr.autoUpdate,this.matrixAutoUpdate=cr.matrixAutoUpdate,this},toJSON:function(cr){var vn=Object3D.prototype.toJSON.call(this,cr);return this.background!==null&&(vn.object.background=this.background.toJSON(cr)),this.environment!==null&&(vn.object.environment=this.environment.toJSON(cr)),this.fog!==null&&(vn.object.fog=this.fog.toJSON()),vn},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(cr,vn){this.min=cr!==void 0?cr:new Vector3(1/0,1/0,1/0),this.max=vn!==void 0?vn:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(cr,vn){return this.min.copy(cr),this.max.copy(vn),this},setFromArray:function(cr){for(var vn=1/0,yn=1/0,Rn=1/0,Bn=-1/0,Co=-1/0,Po=-1/0,To=0,Io=cr.length;To<Io;To+=3){var $l=cr[To],Wl=cr[To+1],Xl=cr[To+2];$l<vn&&(vn=$l),Wl<yn&&(yn=Wl),Xl<Rn&&(Rn=Xl),$l>Bn&&(Bn=$l),Wl>Co&&(Co=Wl),Xl>Po&&(Po=Xl)}return this.min.set(vn,yn,Rn),this.max.set(Bn,Co,Po),this},setFromBufferAttribute:function(cr){for(var vn=1/0,yn=1/0,Rn=1/0,Bn=-1/0,Co=-1/0,Po=-1/0,To=0,Io=cr.count;To<Io;To++){var $l=cr.getX(To),Wl=cr.getY(To),Xl=cr.getZ(To);$l<vn&&(vn=$l),Wl<yn&&(yn=Wl),Xl<Rn&&(Rn=Xl),$l>Bn&&(Bn=$l),Wl>Co&&(Co=Wl),Xl>Po&&(Po=Xl)}return this.min.set(vn,yn,Rn),this.max.set(Bn,Co,Po),this},setFromPoints:function(cr){this.makeEmpty();for(var vn=0,yn=cr.length;vn<yn;vn++)this.expandByPoint(cr[vn]);return this},setFromCenterAndSize:function(cr,vn){var yn=_vector$1.copy(vn).multiplyScalar(.5);return this.min.copy(cr).sub(yn),this.max.copy(cr).add(yn),this},setFromObject:function(cr){return this.makeEmpty(),this.expandByObject(cr)},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.min.copy(cr.min),this.max.copy(cr.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(cr){return cr===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),cr=new Vector3),this.isEmpty()?cr.set(0,0,0):cr.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(cr){return cr===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),cr=new Vector3),this.isEmpty()?cr.set(0,0,0):cr.subVectors(this.max,this.min)},expandByPoint:function(cr){return this.min.min(cr),this.max.max(cr),this},expandByVector:function(cr){return this.min.sub(cr),this.max.add(cr),this},expandByScalar:function(cr){return this.min.addScalar(-cr),this.max.addScalar(cr),this},expandByObject:function(cr){cr.updateWorldMatrix(!1,!1);var vn=cr.geometry;vn!==void 0&&(vn.boundingBox===null&&vn.computeBoundingBox(),_box.copy(vn.boundingBox),_box.applyMatrix4(cr.matrixWorld),this.union(_box));for(var yn=cr.children,Rn=0,Bn=yn.length;Rn<Bn;Rn++)this.expandByObject(yn[Rn]);return this},containsPoint:function(cr){return!(cr.x<this.min.x||cr.x>this.max.x||cr.y<this.min.y||cr.y>this.max.y||cr.z<this.min.z||cr.z>this.max.z)},containsBox:function(cr){return this.min.x<=cr.min.x&&cr.max.x<=this.max.x&&this.min.y<=cr.min.y&&cr.max.y<=this.max.y&&this.min.z<=cr.min.z&&cr.max.z<=this.max.z},getParameter:function(cr,vn){return vn===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),vn=new Vector3),vn.set((cr.x-this.min.x)/(this.max.x-this.min.x),(cr.y-this.min.y)/(this.max.y-this.min.y),(cr.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(cr){return!(cr.max.x<this.min.x||cr.min.x>this.max.x||cr.max.y<this.min.y||cr.min.y>this.max.y||cr.max.z<this.min.z||cr.min.z>this.max.z)},intersectsSphere:function(cr){return this.clampPoint(cr.center,_vector$1),_vector$1.distanceToSquared(cr.center)<=cr.radius*cr.radius},intersectsPlane:function(cr){var vn,yn;return cr.normal.x>0?(vn=cr.normal.x*this.min.x,yn=cr.normal.x*this.max.x):(vn=cr.normal.x*this.max.x,yn=cr.normal.x*this.min.x),cr.normal.y>0?(vn+=cr.normal.y*this.min.y,yn+=cr.normal.y*this.max.y):(vn+=cr.normal.y*this.max.y,yn+=cr.normal.y*this.min.y),cr.normal.z>0?(vn+=cr.normal.z*this.min.z,yn+=cr.normal.z*this.max.z):(vn+=cr.normal.z*this.max.z,yn+=cr.normal.z*this.min.z),vn<=-cr.constant&&yn>=-cr.constant},intersectsTriangle:function(cr){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(cr.a,_center),_v1$2.subVectors(cr.b,_center),_v2.subVectors(cr.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var vn=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(vn,_v0,_v1$2,_v2,_extents)||(vn=[1,0,0,0,1,0,0,0,1],!satForAxes(vn,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),vn=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(vn,_v0,_v1$2,_v2,_extents))},clampPoint:function(cr,vn){return vn===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),vn=new Vector3),vn.copy(cr).clamp(this.min,this.max)},distanceToPoint:function(cr){var vn=_vector$1.copy(cr).clamp(this.min,this.max);return vn.sub(cr).length()},getBoundingSphere:function(cr){return cr===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(cr.center),cr.radius=this.getSize(_vector$1).length()*.5,cr},intersect:function(cr){return this.min.max(cr.min),this.max.min(cr.max),this.isEmpty()&&this.makeEmpty(),this},union:function(cr){return this.min.min(cr.min),this.max.max(cr.max),this},applyMatrix4:function(cr){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(cr),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(cr),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(cr),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(cr),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(cr),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(cr),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(cr),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(cr),this.setFromPoints(_points),this)},translate:function(cr){return this.min.add(cr),this.max.add(cr),this},equals:function(cr){return cr.min.equals(this.min)&&cr.max.equals(this.max)}});function satForAxes(cr,vn,yn,Rn,Bn){var Co,Po;for(Co=0,Po=cr.length-3;Co<=Po;Co+=3){_testAxis.fromArray(cr,Co);var To=Bn.x*Math.abs(_testAxis.x)+Bn.y*Math.abs(_testAxis.y)+Bn.z*Math.abs(_testAxis.z),Io=vn.dot(_testAxis),$l=yn.dot(_testAxis),Wl=Rn.dot(_testAxis);if(Math.max(-Math.max(Io,$l,Wl),Math.min(Io,$l,Wl))>To)return!1}return!0}var _box$1=new Box3;function Sphere(cr,vn){this.center=cr!==void 0?cr:new Vector3,this.radius=vn!==void 0?vn:-1}Object.assign(Sphere.prototype,{set:function(cr,vn){return this.center.copy(cr),this.radius=vn,this},setFromPoints:function(cr,vn){var yn=this.center;vn!==void 0?yn.copy(vn):_box$1.setFromPoints(cr).getCenter(yn);for(var Rn=0,Bn=0,Co=cr.length;Bn<Co;Bn++)Rn=Math.max(Rn,yn.distanceToSquared(cr[Bn]));return this.radius=Math.sqrt(Rn),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.center.copy(cr.center),this.radius=cr.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(cr){return cr.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(cr){return cr.distanceTo(this.center)-this.radius},intersectsSphere:function(cr){var vn=this.radius+cr.radius;return cr.center.distanceToSquared(this.center)<=vn*vn},intersectsBox:function(cr){return cr.intersectsSphere(this)},intersectsPlane:function(cr){return Math.abs(cr.distanceToPoint(this.center))<=this.radius},clampPoint:function(cr,vn){var yn=this.center.distanceToSquared(cr);return vn===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),vn=new Vector3),vn.copy(cr),yn>this.radius*this.radius&&(vn.sub(this.center).normalize(),vn.multiplyScalar(this.radius).add(this.center)),vn},getBoundingBox:function(cr){return cr===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),cr=new Box3),this.isEmpty()?(cr.makeEmpty(),cr):(cr.set(this.center,this.center),cr.expandByScalar(this.radius),cr)},applyMatrix4:function(cr){return this.center.applyMatrix4(cr),this.radius=this.radius*cr.getMaxScaleOnAxis(),this},translate:function(cr){return this.center.add(cr),this},equals:function(cr){return cr.center.equals(this.center)&&cr.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(cr,vn){this.origin=cr!==void 0?cr:new Vector3,this.direction=vn!==void 0?vn:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(cr,vn){return this.origin.copy(cr),this.direction.copy(vn),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.origin.copy(cr.origin),this.direction.copy(cr.direction),this},at:function(cr,vn){return vn===void 0&&(console.warn("THREE.Ray: .at() target is now required"),vn=new Vector3),vn.copy(this.direction).multiplyScalar(cr).add(this.origin)},lookAt:function(cr){return this.direction.copy(cr).sub(this.origin).normalize(),this},recast:function(cr){return this.origin.copy(this.at(cr,_vector$2)),this},closestPointToPoint:function(cr,vn){vn===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),vn=new Vector3),vn.subVectors(cr,this.origin);var yn=vn.dot(this.direction);return yn<0?vn.copy(this.origin):vn.copy(this.direction).multiplyScalar(yn).add(this.origin)},distanceToPoint:function(cr){return Math.sqrt(this.distanceSqToPoint(cr))},distanceSqToPoint:function(cr){var vn=_vector$2.subVectors(cr,this.origin).dot(this.direction);return vn<0?this.origin.distanceToSquared(cr):(_vector$2.copy(this.direction).multiplyScalar(vn).add(this.origin),_vector$2.distanceToSquared(cr))},distanceSqToSegment:function(cr,vn,yn,Rn){_segCenter.copy(cr).add(vn).multiplyScalar(.5),_segDir.copy(vn).sub(cr).normalize(),_diff.copy(this.origin).sub(_segCenter);var Bn=cr.distanceTo(vn)*.5,Co=-this.direction.dot(_segDir),Po=_diff.dot(this.direction),To=-_diff.dot(_segDir),Io=_diff.lengthSq(),$l=Math.abs(1-Co*Co),Wl,Xl,Yl,Zl;if($l>0)if(Wl=Co*To-Po,Xl=Co*Po-To,Zl=Bn*$l,Wl>=0)if(Xl>=-Zl)if(Xl<=Zl){var ey=1/$l;Wl*=ey,Xl*=ey,Yl=Wl*(Wl+Co*Xl+2*Po)+Xl*(Co*Wl+Xl+2*To)+Io}else Xl=Bn,Wl=Math.max(0,-(Co*Xl+Po)),Yl=-Wl*Wl+Xl*(Xl+2*To)+Io;else Xl=-Bn,Wl=Math.max(0,-(Co*Xl+Po)),Yl=-Wl*Wl+Xl*(Xl+2*To)+Io;else Xl<=-Zl?(Wl=Math.max(0,-(-Co*Bn+Po)),Xl=Wl>0?-Bn:Math.min(Math.max(-Bn,-To),Bn),Yl=-Wl*Wl+Xl*(Xl+2*To)+Io):Xl<=Zl?(Wl=0,Xl=Math.min(Math.max(-Bn,-To),Bn),Yl=Xl*(Xl+2*To)+Io):(Wl=Math.max(0,-(Co*Bn+Po)),Xl=Wl>0?Bn:Math.min(Math.max(-Bn,-To),Bn),Yl=-Wl*Wl+Xl*(Xl+2*To)+Io);else Xl=Co>0?-Bn:Bn,Wl=Math.max(0,-(Co*Xl+Po)),Yl=-Wl*Wl+Xl*(Xl+2*To)+Io;return yn&&yn.copy(this.direction).multiplyScalar(Wl).add(this.origin),Rn&&Rn.copy(_segDir).multiplyScalar(Xl).add(_segCenter),Yl},intersectSphere:function(cr,vn){_vector$2.subVectors(cr.center,this.origin);var yn=_vector$2.dot(this.direction),Rn=_vector$2.dot(_vector$2)-yn*yn,Bn=cr.radius*cr.radius;if(Rn>Bn)return null;var Co=Math.sqrt(Bn-Rn),Po=yn-Co,To=yn+Co;return Po<0&&To<0?null:Po<0?this.at(To,vn):this.at(Po,vn)},intersectsSphere:function(cr){return this.distanceSqToPoint(cr.center)<=cr.radius*cr.radius},distanceToPlane:function(cr){var vn=cr.normal.dot(this.direction);if(vn===0)return cr.distanceToPoint(this.origin)===0?0:null;var yn=-(this.origin.dot(cr.normal)+cr.constant)/vn;return yn>=0?yn:null},intersectPlane:function(cr,vn){var yn=this.distanceToPlane(cr);return yn===null?null:this.at(yn,vn)},intersectsPlane:function(cr){var vn=cr.distanceToPoint(this.origin);if(vn===0)return!0;var yn=cr.normal.dot(this.direction);return yn*vn<0},intersectBox:function(cr,vn){var yn,Rn,Bn,Co,Po,To,Io=1/this.direction.x,$l=1/this.direction.y,Wl=1/this.direction.z,Xl=this.origin;return Io>=0?(yn=(cr.min.x-Xl.x)*Io,Rn=(cr.max.x-Xl.x)*Io):(yn=(cr.max.x-Xl.x)*Io,Rn=(cr.min.x-Xl.x)*Io),$l>=0?(Bn=(cr.min.y-Xl.y)*$l,Co=(cr.max.y-Xl.y)*$l):(Bn=(cr.max.y-Xl.y)*$l,Co=(cr.min.y-Xl.y)*$l),yn>Co||Bn>Rn||((Bn>yn||yn!==yn)&&(yn=Bn),(Co<Rn||Rn!==Rn)&&(Rn=Co),Wl>=0?(Po=(cr.min.z-Xl.z)*Wl,To=(cr.max.z-Xl.z)*Wl):(Po=(cr.max.z-Xl.z)*Wl,To=(cr.min.z-Xl.z)*Wl),yn>To||Po>Rn)||((Po>yn||yn!==yn)&&(yn=Po),(To<Rn||Rn!==Rn)&&(Rn=To),Rn<0)?null:this.at(yn>=0?yn:Rn,vn)},intersectsBox:function(cr){return this.intersectBox(cr,_vector$2)!==null},intersectTriangle:function(cr,vn,yn,Rn,Bn){_edge1.subVectors(vn,cr),_edge2.subVectors(yn,cr),_normal.crossVectors(_edge1,_edge2);var Co=this.direction.dot(_normal),Po;if(Co>0){if(Rn)return null;Po=1}else if(Co<0)Po=-1,Co=-Co;else return null;_diff.subVectors(this.origin,cr);var To=Po*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(To<0)return null;var Io=Po*this.direction.dot(_edge1.cross(_diff));if(Io<0||To+Io>Co)return null;var $l=-Po*_diff.dot(_normal);return $l<0?null:this.at($l/Co,Bn)},applyMatrix4:function(cr){return this.origin.applyMatrix4(cr),this.direction.transformDirection(cr),this},equals:function(cr){return cr.origin.equals(this.origin)&&cr.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(cr,vn){this.normal=cr!==void 0?cr:new Vector3(1,0,0),this.constant=vn!==void 0?vn:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(cr,vn){return this.normal.copy(cr),this.constant=vn,this},setComponents:function(cr,vn,yn,Rn){return this.normal.set(cr,vn,yn),this.constant=Rn,this},setFromNormalAndCoplanarPoint:function(cr,vn){return this.normal.copy(cr),this.constant=-vn.dot(this.normal),this},setFromCoplanarPoints:function(cr,vn,yn){var Rn=_vector1.subVectors(yn,vn).cross(_vector2.subVectors(cr,vn)).normalize();return this.setFromNormalAndCoplanarPoint(Rn,cr),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.normal.copy(cr.normal),this.constant=cr.constant,this},normalize:function(){var cr=1/this.normal.length();return this.normal.multiplyScalar(cr),this.constant*=cr,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(cr){return this.normal.dot(cr)+this.constant},distanceToSphere:function(cr){return this.distanceToPoint(cr.center)-cr.radius},projectPoint:function(cr,vn){return vn===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),vn=new Vector3),vn.copy(this.normal).multiplyScalar(-this.distanceToPoint(cr)).add(cr)},intersectLine:function(cr,vn){vn===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),vn=new Vector3);var yn=cr.delta(_vector1),Rn=this.normal.dot(yn);if(Rn===0)return this.distanceToPoint(cr.start)===0?vn.copy(cr.start):void 0;var Bn=-(cr.start.dot(this.normal)+this.constant)/Rn;if(!(Bn<0||Bn>1))return vn.copy(yn).multiplyScalar(Bn).add(cr.start)},intersectsLine:function(cr){var vn=this.distanceToPoint(cr.start),yn=this.distanceToPoint(cr.end);return vn<0&&yn>0||yn<0&&vn>0},intersectsBox:function(cr){return cr.intersectsPlane(this)},intersectsSphere:function(cr){return cr.intersectsPlane(this)},coplanarPoint:function(cr){return cr===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),cr=new Vector3),cr.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(cr,vn){var yn=vn||_normalMatrix.getNormalMatrix(cr),Rn=this.coplanarPoint(_vector1).applyMatrix4(cr),Bn=this.normal.applyMatrix3(yn).normalize();return this.constant=-Rn.dot(Bn),this},translate:function(cr){return this.constant-=cr.dot(this.normal),this},equals:function(cr){return cr.normal.equals(this.normal)&&cr.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(cr,vn,yn){this.a=cr!==void 0?cr:new Vector3,this.b=vn!==void 0?vn:new Vector3,this.c=yn!==void 0?yn:new Vector3}Object.assign(Triangle,{getNormal:function(cr,vn,yn,Rn){Rn===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),Rn=new Vector3),Rn.subVectors(yn,vn),_v0$1.subVectors(cr,vn),Rn.cross(_v0$1);var Bn=Rn.lengthSq();return Bn>0?Rn.multiplyScalar(1/Math.sqrt(Bn)):Rn.set(0,0,0)},getBarycoord:function(cr,vn,yn,Rn,Bn){_v0$1.subVectors(Rn,vn),_v1$3.subVectors(yn,vn),_v2$1.subVectors(cr,vn);var Co=_v0$1.dot(_v0$1),Po=_v0$1.dot(_v1$3),To=_v0$1.dot(_v2$1),Io=_v1$3.dot(_v1$3),$l=_v1$3.dot(_v2$1),Wl=Co*Io-Po*Po;if(Bn===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),Bn=new Vector3),Wl===0)return Bn.set(-2,-1,-1);var Xl=1/Wl,Yl=(Io*To-Po*$l)*Xl,Zl=(Co*$l-Po*To)*Xl;return Bn.set(1-Yl-Zl,Zl,Yl)},containsPoint:function(cr,vn,yn,Rn){return Triangle.getBarycoord(cr,vn,yn,Rn,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(cr,vn,yn,Rn,Bn,Co,Po,To){return this.getBarycoord(cr,vn,yn,Rn,_v3),To.set(0,0),To.addScaledVector(Bn,_v3.x),To.addScaledVector(Co,_v3.y),To.addScaledVector(Po,_v3.z),To},isFrontFacing:function(cr,vn,yn,Rn){return _v0$1.subVectors(yn,vn),_v1$3.subVectors(cr,vn),_v0$1.cross(_v1$3).dot(Rn)<0}});Object.assign(Triangle.prototype,{set:function(cr,vn,yn){return this.a.copy(cr),this.b.copy(vn),this.c.copy(yn),this},setFromPointsAndIndices:function(cr,vn,yn,Rn){return this.a.copy(cr[vn]),this.b.copy(cr[yn]),this.c.copy(cr[Rn]),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.a.copy(cr.a),this.b.copy(cr.b),this.c.copy(cr.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(cr){return cr===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),cr=new Vector3),cr.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(cr){return Triangle.getNormal(this.a,this.b,this.c,cr)},getPlane:function(cr){return cr===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),cr=new Plane),cr.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(cr,vn){return Triangle.getBarycoord(cr,this.a,this.b,this.c,vn)},getUV:function(cr,vn,yn,Rn,Bn){return Triangle.getUV(cr,this.a,this.b,this.c,vn,yn,Rn,Bn)},containsPoint:function(cr){return Triangle.containsPoint(cr,this.a,this.b,this.c)},isFrontFacing:function(cr){return Triangle.isFrontFacing(this.a,this.b,this.c,cr)},intersectsBox:function(cr){return cr.intersectsTriangle(this)},closestPointToPoint:function(cr,vn){vn===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),vn=new Vector3);var yn=this.a,Rn=this.b,Bn=this.c,Co,Po;_vab.subVectors(Rn,yn),_vac.subVectors(Bn,yn),_vap.subVectors(cr,yn);var To=_vab.dot(_vap),Io=_vac.dot(_vap);if(To<=0&&Io<=0)return vn.copy(yn);_vbp.subVectors(cr,Rn);var $l=_vab.dot(_vbp),Wl=_vac.dot(_vbp);if($l>=0&&Wl<=$l)return vn.copy(Rn);var Xl=To*Wl-$l*Io;if(Xl<=0&&To>=0&&$l<=0)return Co=To/(To-$l),vn.copy(yn).addScaledVector(_vab,Co);_vcp.subVectors(cr,Bn);var Yl=_vab.dot(_vcp),Zl=_vac.dot(_vcp);if(Zl>=0&&Yl<=Zl)return vn.copy(Bn);var ey=Yl*Io-To*Zl;if(ey<=0&&Io>=0&&Zl<=0)return Po=Io/(Io-Zl),vn.copy(yn).addScaledVector(_vac,Po);var Rm=$l*Zl-Yl*Wl;if(Rm<=0&&Wl-$l>=0&&Yl-Zl>=0)return _vbc.subVectors(Bn,Rn),Po=(Wl-$l)/(Wl-$l+(Yl-Zl)),vn.copy(Rn).addScaledVector(_vbc,Po);var ry=1/(Rm+ey+Xl);return Co=ey*ry,Po=Xl*ry,vn.copy(yn).addScaledVector(_vab,Co).addScaledVector(_vac,Po)},equals:function(cr){return cr.a.equals(this.a)&&cr.b.equals(this.b)&&cr.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(cr,vn,yn){return vn===void 0&&yn===void 0?this.set(cr):this.setRGB(cr,vn,yn)}function hue2rgb(cr,vn,yn){return yn<0&&(yn+=1),yn>1&&(yn-=1),yn<1/6?cr+(vn-cr)*6*yn:yn<1/2?vn:yn<2/3?cr+(vn-cr)*6*(2/3-yn):cr}function SRGBToLinear(cr){return cr<.04045?cr*.0773993808:Math.pow(cr*.9478672986+.0521327014,2.4)}function LinearToSRGB(cr){return cr<.0031308?cr*12.92:1.055*Math.pow(cr,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(cr){return cr&&cr.isColor?this.copy(cr):typeof cr=="number"?this.setHex(cr):typeof cr=="string"&&this.setStyle(cr),this},setScalar:function(cr){return this.r=cr,this.g=cr,this.b=cr,this},setHex:function(cr){return cr=Math.floor(cr),this.r=(cr>>16&255)/255,this.g=(cr>>8&255)/255,this.b=(cr&255)/255,this},setRGB:function(cr,vn,yn){return this.r=cr,this.g=vn,this.b=yn,this},setHSL:function(cr,vn,yn){if(cr=MathUtils.euclideanModulo(cr,1),vn=MathUtils.clamp(vn,0,1),yn=MathUtils.clamp(yn,0,1),vn===0)this.r=this.g=this.b=yn;else{var Rn=yn<=.5?yn*(1+vn):yn+vn-yn*vn,Bn=2*yn-Rn;this.r=hue2rgb(Bn,Rn,cr+1/3),this.g=hue2rgb(Bn,Rn,cr),this.b=hue2rgb(Bn,Rn,cr-1/3)}return this},setStyle:function(cr){function vn(Xl){Xl!==void 0&&parseFloat(Xl)<1&&console.warn("THREE.Color: Alpha component of "+cr+" will be ignored.")}var yn;if(yn=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(cr)){var Rn,Bn=yn[1],Co=yn[2];switch(Bn){case"rgb":case"rgba":if(Rn=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Co))return this.r=Math.min(255,parseInt(Rn[1],10))/255,this.g=Math.min(255,parseInt(Rn[2],10))/255,this.b=Math.min(255,parseInt(Rn[3],10))/255,vn(Rn[5]),this;if(Rn=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Co))return this.r=Math.min(100,parseInt(Rn[1],10))/100,this.g=Math.min(100,parseInt(Rn[2],10))/100,this.b=Math.min(100,parseInt(Rn[3],10))/100,vn(Rn[5]),this;break;case"hsl":case"hsla":if(Rn=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Co)){var Po=parseFloat(Rn[1])/360,To=parseInt(Rn[2],10)/100,Io=parseInt(Rn[3],10)/100;return vn(Rn[5]),this.setHSL(Po,To,Io)}break}}else if(yn=/^\#([A-Fa-f0-9]+)$/.exec(cr)){var $l=yn[1],Wl=$l.length;if(Wl===3)return this.r=parseInt($l.charAt(0)+$l.charAt(0),16)/255,this.g=parseInt($l.charAt(1)+$l.charAt(1),16)/255,this.b=parseInt($l.charAt(2)+$l.charAt(2),16)/255,this;if(Wl===6)return this.r=parseInt($l.charAt(0)+$l.charAt(1),16)/255,this.g=parseInt($l.charAt(2)+$l.charAt(3),16)/255,this.b=parseInt($l.charAt(4)+$l.charAt(5),16)/255,this}return cr&&cr.length>0?this.setColorName(cr):this},setColorName:function(cr){var vn=_colorKeywords[cr];return vn!==void 0?this.setHex(vn):console.warn("THREE.Color: Unknown color "+cr),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(cr){return this.r=cr.r,this.g=cr.g,this.b=cr.b,this},copyGammaToLinear:function(cr,vn){return vn===void 0&&(vn=2),this.r=Math.pow(cr.r,vn),this.g=Math.pow(cr.g,vn),this.b=Math.pow(cr.b,vn),this},copyLinearToGamma:function(cr,vn){vn===void 0&&(vn=2);var yn=vn>0?1/vn:1;return this.r=Math.pow(cr.r,yn),this.g=Math.pow(cr.g,yn),this.b=Math.pow(cr.b,yn),this},convertGammaToLinear:function(cr){return this.copyGammaToLinear(this,cr),this},convertLinearToGamma:function(cr){return this.copyLinearToGamma(this,cr),this},copySRGBToLinear:function(cr){return this.r=SRGBToLinear(cr.r),this.g=SRGBToLinear(cr.g),this.b=SRGBToLinear(cr.b),this},copyLinearToSRGB:function(cr){return this.r=LinearToSRGB(cr.r),this.g=LinearToSRGB(cr.g),this.b=LinearToSRGB(cr.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(cr){cr===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),cr={h:0,s:0,l:0});var vn=this.r,yn=this.g,Rn=this.b,Bn=Math.max(vn,yn,Rn),Co=Math.min(vn,yn,Rn),Po,To,Io=(Co+Bn)/2;if(Co===Bn)Po=0,To=0;else{var $l=Bn-Co;switch(To=Io<=.5?$l/(Bn+Co):$l/(2-Bn-Co),Bn){case vn:Po=(yn-Rn)/$l+(yn<Rn?6:0);break;case yn:Po=(Rn-vn)/$l+2;break;case Rn:Po=(vn-yn)/$l+4;break}Po/=6}return cr.h=Po,cr.s=To,cr.l=Io,cr},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(cr,vn,yn){return this.getHSL(_hslA),_hslA.h+=cr,_hslA.s+=vn,_hslA.l+=yn,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(cr){return this.r+=cr.r,this.g+=cr.g,this.b+=cr.b,this},addColors:function(cr,vn){return this.r=cr.r+vn.r,this.g=cr.g+vn.g,this.b=cr.b+vn.b,this},addScalar:function(cr){return this.r+=cr,this.g+=cr,this.b+=cr,this},sub:function(cr){return this.r=Math.max(0,this.r-cr.r),this.g=Math.max(0,this.g-cr.g),this.b=Math.max(0,this.b-cr.b),this},multiply:function(cr){return this.r*=cr.r,this.g*=cr.g,this.b*=cr.b,this},multiplyScalar:function(cr){return this.r*=cr,this.g*=cr,this.b*=cr,this},lerp:function(cr,vn){return this.r+=(cr.r-this.r)*vn,this.g+=(cr.g-this.g)*vn,this.b+=(cr.b-this.b)*vn,this},lerpHSL:function(cr,vn){this.getHSL(_hslA),cr.getHSL(_hslB);var yn=MathUtils.lerp(_hslA.h,_hslB.h,vn),Rn=MathUtils.lerp(_hslA.s,_hslB.s,vn),Bn=MathUtils.lerp(_hslA.l,_hslB.l,vn);return this.setHSL(yn,Rn,Bn),this},equals:function(cr){return cr.r===this.r&&cr.g===this.g&&cr.b===this.b},fromArray:function(cr,vn){return vn===void 0&&(vn=0),this.r=cr[vn],this.g=cr[vn+1],this.b=cr[vn+2],this},toArray:function(cr,vn){return cr===void 0&&(cr=[]),vn===void 0&&(vn=0),cr[vn]=this.r,cr[vn+1]=this.g,cr[vn+2]=this.b,cr},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(cr,vn,yn,Rn,Bn,Co){this.a=cr,this.b=vn,this.c=yn,this.normal=Rn&&Rn.isVector3?Rn:new Vector3,this.vertexNormals=Array.isArray(Rn)?Rn:[],this.color=Bn&&Bn.isColor?Bn:new Color,this.vertexColors=Array.isArray(Bn)?Bn:[],this.materialIndex=Co!==void 0?Co:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(cr){this.a=cr.a,this.b=cr.b,this.c=cr.c,this.normal.copy(cr.normal),this.color.copy(cr.color),this.materialIndex=cr.materialIndex;for(var vn=0,yn=cr.vertexNormals.length;vn<yn;vn++)this.vertexNormals[vn]=cr.vertexNormals[vn].clone();for(var vn=0,yn=cr.vertexColors.length;vn<yn;vn++)this.vertexColors[vn]=cr.vertexColors[vn].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(cr){if(cr!==void 0)for(var vn in cr){var yn=cr[vn];if(yn===void 0){console.warn("THREE.Material: '"+vn+"' parameter is undefined.");continue}if(vn==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=yn===FlatShading;continue}var Rn=this[vn];if(Rn===void 0){console.warn("THREE."+this.type+": '"+vn+"' is not a property of this material.");continue}Rn&&Rn.isColor?Rn.set(yn):Rn&&Rn.isVector3&&yn&&yn.isVector3?Rn.copy(yn):this[vn]=yn}},toJSON:function(cr){var vn=cr===void 0||typeof cr=="string";vn&&(cr={textures:{},images:{}});var yn={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};yn.uuid=this.uuid,yn.type=this.type,this.name!==""&&(yn.name=this.name),this.color&&this.color.isColor&&(yn.color=this.color.getHex()),this.roughness!==void 0&&(yn.roughness=this.roughness),this.metalness!==void 0&&(yn.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(yn.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(yn.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(yn.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(yn.specular=this.specular.getHex()),this.shininess!==void 0&&(yn.shininess=this.shininess),this.clearcoat!==void 0&&(yn.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(yn.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(yn.clearcoatMap=this.clearcoatMap.toJSON(cr).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(yn.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(cr).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(yn.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(cr).uuid,yn.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(yn.map=this.map.toJSON(cr).uuid),this.matcap&&this.matcap.isTexture&&(yn.matcap=this.matcap.toJSON(cr).uuid),this.alphaMap&&this.alphaMap.isTexture&&(yn.alphaMap=this.alphaMap.toJSON(cr).uuid),this.lightMap&&this.lightMap.isTexture&&(yn.lightMap=this.lightMap.toJSON(cr).uuid),this.aoMap&&this.aoMap.isTexture&&(yn.aoMap=this.aoMap.toJSON(cr).uuid,yn.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(yn.bumpMap=this.bumpMap.toJSON(cr).uuid,yn.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(yn.normalMap=this.normalMap.toJSON(cr).uuid,yn.normalMapType=this.normalMapType,yn.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(yn.displacementMap=this.displacementMap.toJSON(cr).uuid,yn.displacementScale=this.displacementScale,yn.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(yn.roughnessMap=this.roughnessMap.toJSON(cr).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(yn.metalnessMap=this.metalnessMap.toJSON(cr).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(yn.emissiveMap=this.emissiveMap.toJSON(cr).uuid),this.specularMap&&this.specularMap.isTexture&&(yn.specularMap=this.specularMap.toJSON(cr).uuid),this.envMap&&this.envMap.isTexture&&(yn.envMap=this.envMap.toJSON(cr).uuid,yn.reflectivity=this.reflectivity,yn.refractionRatio=this.refractionRatio,this.combine!==void 0&&(yn.combine=this.combine),this.envMapIntensity!==void 0&&(yn.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(yn.gradientMap=this.gradientMap.toJSON(cr).uuid),this.size!==void 0&&(yn.size=this.size),this.sizeAttenuation!==void 0&&(yn.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(yn.blending=this.blending),this.flatShading===!0&&(yn.flatShading=this.flatShading),this.side!==FrontSide&&(yn.side=this.side),this.vertexColors&&(yn.vertexColors=!0),this.opacity<1&&(yn.opacity=this.opacity),this.transparent===!0&&(yn.transparent=this.transparent),yn.depthFunc=this.depthFunc,yn.depthTest=this.depthTest,yn.depthWrite=this.depthWrite,yn.stencilWrite=this.stencilWrite,yn.stencilWriteMask=this.stencilWriteMask,yn.stencilFunc=this.stencilFunc,yn.stencilRef=this.stencilRef,yn.stencilFuncMask=this.stencilFuncMask,yn.stencilFail=this.stencilFail,yn.stencilZFail=this.stencilZFail,yn.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(yn.rotation=this.rotation),this.polygonOffset===!0&&(yn.polygonOffset=!0),this.polygonOffsetFactor!==0&&(yn.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(yn.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(yn.linewidth=this.linewidth),this.dashSize!==void 0&&(yn.dashSize=this.dashSize),this.gapSize!==void 0&&(yn.gapSize=this.gapSize),this.scale!==void 0&&(yn.scale=this.scale),this.dithering===!0&&(yn.dithering=!0),this.alphaTest>0&&(yn.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(yn.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(yn.wireframe=this.wireframe),this.wireframeLinewidth>1&&(yn.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(yn.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(yn.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(yn.morphTargets=!0),this.morphNormals===!0&&(yn.morphNormals=!0),this.skinning===!0&&(yn.skinning=!0),this.visible===!1&&(yn.visible=!1),this.toneMapped===!1&&(yn.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(yn.userData=this.userData);function Rn(Po){var To=[];for(var Io in Po){var $l=Po[Io];delete $l.metadata,To.push($l)}return To}if(vn){var Bn=Rn(cr.textures),Co=Rn(cr.images);Bn.length>0&&(yn.textures=Bn),Co.length>0&&(yn.images=Co)}return yn},clone:function(){return new this.constructor().copy(this)},copy:function(cr){this.name=cr.name,this.fog=cr.fog,this.blending=cr.blending,this.side=cr.side,this.flatShading=cr.flatShading,this.vertexColors=cr.vertexColors,this.opacity=cr.opacity,this.transparent=cr.transparent,this.blendSrc=cr.blendSrc,this.blendDst=cr.blendDst,this.blendEquation=cr.blendEquation,this.blendSrcAlpha=cr.blendSrcAlpha,this.blendDstAlpha=cr.blendDstAlpha,this.blendEquationAlpha=cr.blendEquationAlpha,this.depthFunc=cr.depthFunc,this.depthTest=cr.depthTest,this.depthWrite=cr.depthWrite,this.stencilWriteMask=cr.stencilWriteMask,this.stencilFunc=cr.stencilFunc,this.stencilRef=cr.stencilRef,this.stencilFuncMask=cr.stencilFuncMask,this.stencilFail=cr.stencilFail,this.stencilZFail=cr.stencilZFail,this.stencilZPass=cr.stencilZPass,this.stencilWrite=cr.stencilWrite;var vn=cr.clippingPlanes,yn=null;if(vn!==null){var Rn=vn.length;yn=new Array(Rn);for(var Bn=0;Bn!==Rn;++Bn)yn[Bn]=vn[Bn].clone()}return this.clippingPlanes=yn,this.clipIntersection=cr.clipIntersection,this.clipShadows=cr.clipShadows,this.shadowSide=cr.shadowSide,this.colorWrite=cr.colorWrite,this.precision=cr.precision,this.polygonOffset=cr.polygonOffset,this.polygonOffsetFactor=cr.polygonOffsetFactor,this.polygonOffsetUnits=cr.polygonOffsetUnits,this.dithering=cr.dithering,this.alphaTest=cr.alphaTest,this.premultipliedAlpha=cr.premultipliedAlpha,this.visible=cr.visible,this.toneMapped=cr.toneMapped,this.userData=JSON.parse(JSON.stringify(cr.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(cr){cr===!0&&this.version++}});function MeshBasicMaterial(cr){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(cr)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.map=cr.map,this.lightMap=cr.lightMap,this.lightMapIntensity=cr.lightMapIntensity,this.aoMap=cr.aoMap,this.aoMapIntensity=cr.aoMapIntensity,this.specularMap=cr.specularMap,this.alphaMap=cr.alphaMap,this.envMap=cr.envMap,this.combine=cr.combine,this.reflectivity=cr.reflectivity,this.refractionRatio=cr.refractionRatio,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.wireframeLinecap=cr.wireframeLinecap,this.wireframeLinejoin=cr.wireframeLinejoin,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(cr,vn,yn){if(Array.isArray(cr))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=cr,this.itemSize=vn,this.count=cr!==void 0?cr.length/vn:0,this.normalized=yn===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(cr){cr===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(cr){return this.usage=cr,this},copy:function(cr){return this.name=cr.name,this.array=new cr.array.constructor(cr.array),this.itemSize=cr.itemSize,this.count=cr.count,this.normalized=cr.normalized,this.usage=cr.usage,this},copyAt:function(cr,vn,yn){cr*=this.itemSize,yn*=vn.itemSize;for(var Rn=0,Bn=this.itemSize;Rn<Bn;Rn++)this.array[cr+Rn]=vn.array[yn+Rn];return this},copyArray:function(cr){return this.array.set(cr),this},copyColorsArray:function(cr){for(var vn=this.array,yn=0,Rn=0,Bn=cr.length;Rn<Bn;Rn++){var Co=cr[Rn];Co===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Rn),Co=new Color),vn[yn++]=Co.r,vn[yn++]=Co.g,vn[yn++]=Co.b}return this},copyVector2sArray:function(cr){for(var vn=this.array,yn=0,Rn=0,Bn=cr.length;Rn<Bn;Rn++){var Co=cr[Rn];Co===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Rn),Co=new Vector2),vn[yn++]=Co.x,vn[yn++]=Co.y}return this},copyVector3sArray:function(cr){for(var vn=this.array,yn=0,Rn=0,Bn=cr.length;Rn<Bn;Rn++){var Co=cr[Rn];Co===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Rn),Co=new Vector3),vn[yn++]=Co.x,vn[yn++]=Co.y,vn[yn++]=Co.z}return this},copyVector4sArray:function(cr){for(var vn=this.array,yn=0,Rn=0,Bn=cr.length;Rn<Bn;Rn++){var Co=cr[Rn];Co===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Rn),Co=new Vector4),vn[yn++]=Co.x,vn[yn++]=Co.y,vn[yn++]=Co.z,vn[yn++]=Co.w}return this},applyMatrix3:function(cr){for(var vn=0,yn=this.count;vn<yn;vn++)_vector$3.x=this.getX(vn),_vector$3.y=this.getY(vn),_vector$3.z=this.getZ(vn),_vector$3.applyMatrix3(cr),this.setXYZ(vn,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(cr){for(var vn=0,yn=this.count;vn<yn;vn++)_vector$3.x=this.getX(vn),_vector$3.y=this.getY(vn),_vector$3.z=this.getZ(vn),_vector$3.applyMatrix4(cr),this.setXYZ(vn,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(cr){for(var vn=0,yn=this.count;vn<yn;vn++)_vector$3.x=this.getX(vn),_vector$3.y=this.getY(vn),_vector$3.z=this.getZ(vn),_vector$3.applyNormalMatrix(cr),this.setXYZ(vn,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(cr){for(var vn=0,yn=this.count;vn<yn;vn++)_vector$3.x=this.getX(vn),_vector$3.y=this.getY(vn),_vector$3.z=this.getZ(vn),_vector$3.transformDirection(cr),this.setXYZ(vn,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(cr,vn){return vn===void 0&&(vn=0),this.array.set(cr,vn),this},getX:function(cr){return this.array[cr*this.itemSize]},setX:function(cr,vn){return this.array[cr*this.itemSize]=vn,this},getY:function(cr){return this.array[cr*this.itemSize+1]},setY:function(cr,vn){return this.array[cr*this.itemSize+1]=vn,this},getZ:function(cr){return this.array[cr*this.itemSize+2]},setZ:function(cr,vn){return this.array[cr*this.itemSize+2]=vn,this},getW:function(cr){return this.array[cr*this.itemSize+3]},setW:function(cr,vn){return this.array[cr*this.itemSize+3]=vn,this},setXY:function(cr,vn,yn){return cr*=this.itemSize,this.array[cr+0]=vn,this.array[cr+1]=yn,this},setXYZ:function(cr,vn,yn,Rn){return cr*=this.itemSize,this.array[cr+0]=vn,this.array[cr+1]=yn,this.array[cr+2]=Rn,this},setXYZW:function(cr,vn,yn,Rn,Bn){return cr*=this.itemSize,this.array[cr+0]=vn,this.array[cr+1]=yn,this.array[cr+2]=Rn,this.array[cr+3]=Bn,this},onUpload:function(cr){return this.onUploadCallback=cr,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Int8Array(cr),vn,yn)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Uint8Array(cr),vn,yn)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Uint8ClampedArray(cr),vn,yn)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Int16Array(cr),vn,yn)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Uint16Array(cr),vn,yn)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Int32Array(cr),vn,yn)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Uint32Array(cr),vn,yn)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Float32Array(cr),vn,yn)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(cr,vn,yn){BufferAttribute.call(this,new Float64Array(cr),vn,yn)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(cr){for(var vn,yn=[],Rn=void 0,Bn=cr.faces,Co=0;Co<Bn.length;Co++){var Po=Bn[Co];Po.materialIndex!==Rn&&(Rn=Po.materialIndex,vn!==void 0&&(vn.count=Co*3-vn.start,yn.push(vn)),vn={start:Co*3,materialIndex:Rn})}vn!==void 0&&(vn.count=Co*3-vn.start,yn.push(vn)),this.groups=yn},fromGeometry:function(cr){var vn=cr.faces,yn=cr.vertices,Rn=cr.faceVertexUvs,Bn=Rn[0]&&Rn[0].length>0,Co=Rn[1]&&Rn[1].length>0,Po=cr.morphTargets,To=Po.length,Io;if(To>0){Io=[];for(var $l=0;$l<To;$l++)Io[$l]={name:Po[$l].name,data:[]};this.morphTargets.position=Io}var Wl=cr.morphNormals,Xl=Wl.length,Yl;if(Xl>0){Yl=[];for(var $l=0;$l<Xl;$l++)Yl[$l]={name:Wl[$l].name,data:[]};this.morphTargets.normal=Yl}var Zl=cr.skinIndices,ey=cr.skinWeights,Rm=Zl.length===yn.length,ry=ey.length===yn.length;yn.length>0&&vn.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var $l=0;$l<vn.length;$l++){var _g=vn[$l];this.vertices.push(yn[_g.a],yn[_g.b],yn[_g.c]);var ty=_g.vertexNormals;if(ty.length===3)this.normals.push(ty[0],ty[1],ty[2]);else{var ny=_g.normal;this.normals.push(ny,ny,ny)}var iy=_g.vertexColors;if(iy.length===3)this.colors.push(iy[0],iy[1],iy[2]);else{var oy=_g.color;this.colors.push(oy,oy,oy)}if(Bn===!0){var ay=Rn[0][$l];ay!==void 0?this.uvs.push(ay[0],ay[1],ay[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",$l),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Co===!0){var ay=Rn[1][$l];ay!==void 0?this.uvs2.push(ay[0],ay[1],ay[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",$l),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var uy=0;uy<To;uy++){var hy=Po[uy].vertices;Io[uy].data.push(hy[_g.a],hy[_g.b],hy[_g.c])}for(var uy=0;uy<Xl;uy++){var my=Wl[uy].vertexNormals[$l];Yl[uy].data.push(my.a,my.b,my.c)}Rm&&this.skinIndices.push(Zl[_g.a],Zl[_g.b],Zl[_g.c]),ry&&this.skinWeights.push(ey[_g.a],ey[_g.b],ey[_g.c])}return this.computeGroups(cr),this.verticesNeedUpdate=cr.verticesNeedUpdate,this.normalsNeedUpdate=cr.normalsNeedUpdate,this.colorsNeedUpdate=cr.colorsNeedUpdate,this.uvsNeedUpdate=cr.uvsNeedUpdate,this.groupsNeedUpdate=cr.groupsNeedUpdate,cr.boundingSphere!==null&&(this.boundingSphere=cr.boundingSphere.clone()),cr.boundingBox!==null&&(this.boundingBox=cr.boundingBox.clone()),this}});function arrayMax(cr){if(cr.length===0)return-1/0;let vn=cr[0];for(let yn=1,Rn=cr.length;yn<Rn;++yn)cr[yn]>vn&&(vn=cr[yn]);return vn}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(cr){Array.isArray(cr)?this.index=new(arrayMax(cr)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(cr,1):this.index=cr},getAttribute:function(cr){return this.attributes[cr]},setAttribute:function(cr,vn){return this.attributes[cr]=vn,this},deleteAttribute:function(cr){return delete this.attributes[cr],this},addGroup:function(cr,vn,yn){this.groups.push({start:cr,count:vn,materialIndex:yn!==void 0?yn:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(cr,vn){this.drawRange.start=cr,this.drawRange.count=vn},applyMatrix4:function(cr){var vn=this.attributes.position;vn!==void 0&&(vn.applyMatrix4(cr),vn.needsUpdate=!0);var yn=this.attributes.normal;if(yn!==void 0){var Rn=new Matrix3().getNormalMatrix(cr);yn.applyNormalMatrix(Rn),yn.needsUpdate=!0}var Bn=this.attributes.tangent;return Bn!==void 0&&(Bn.transformDirection(cr),Bn.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(cr){return _m1$2.makeRotationX(cr),this.applyMatrix4(_m1$2),this},rotateY:function(cr){return _m1$2.makeRotationY(cr),this.applyMatrix4(_m1$2),this},rotateZ:function(cr){return _m1$2.makeRotationZ(cr),this.applyMatrix4(_m1$2),this},translate:function(cr,vn,yn){return _m1$2.makeTranslation(cr,vn,yn),this.applyMatrix4(_m1$2),this},scale:function(cr,vn,yn){return _m1$2.makeScale(cr,vn,yn),this.applyMatrix4(_m1$2),this},lookAt:function(cr){return _obj.lookAt(cr),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(cr){var vn=cr.geometry;if(cr.isPoints||cr.isLine){var yn=new Float32BufferAttribute(vn.vertices.length*3,3),Rn=new Float32BufferAttribute(vn.colors.length*3,3);if(this.setAttribute("position",yn.copyVector3sArray(vn.vertices)),this.setAttribute("color",Rn.copyColorsArray(vn.colors)),vn.lineDistances&&vn.lineDistances.length===vn.vertices.length){var Bn=new Float32BufferAttribute(vn.lineDistances.length,1);this.setAttribute("lineDistance",Bn.copyArray(vn.lineDistances))}vn.boundingSphere!==null&&(this.boundingSphere=vn.boundingSphere.clone()),vn.boundingBox!==null&&(this.boundingBox=vn.boundingBox.clone())}else cr.isMesh&&vn&&vn.isGeometry&&this.fromGeometry(vn);return this},setFromPoints:function(cr){for(var vn=[],yn=0,Rn=cr.length;yn<Rn;yn++){var Bn=cr[yn];vn.push(Bn.x,Bn.y,Bn.z||0)}return this.setAttribute("position",new Float32BufferAttribute(vn,3)),this},updateFromObject:function(cr){var vn=cr.geometry;if(cr.isMesh){var yn=vn.__directGeometry;if(vn.elementsNeedUpdate===!0&&(yn=void 0,vn.elementsNeedUpdate=!1),yn===void 0)return this.fromGeometry(vn);yn.verticesNeedUpdate=vn.verticesNeedUpdate,yn.normalsNeedUpdate=vn.normalsNeedUpdate,yn.colorsNeedUpdate=vn.colorsNeedUpdate,yn.uvsNeedUpdate=vn.uvsNeedUpdate,yn.groupsNeedUpdate=vn.groupsNeedUpdate,vn.verticesNeedUpdate=!1,vn.normalsNeedUpdate=!1,vn.colorsNeedUpdate=!1,vn.uvsNeedUpdate=!1,vn.groupsNeedUpdate=!1,vn=yn}var Rn;return vn.verticesNeedUpdate===!0&&(Rn=this.attributes.position,Rn!==void 0&&(Rn.copyVector3sArray(vn.vertices),Rn.needsUpdate=!0),vn.verticesNeedUpdate=!1),vn.normalsNeedUpdate===!0&&(Rn=this.attributes.normal,Rn!==void 0&&(Rn.copyVector3sArray(vn.normals),Rn.needsUpdate=!0),vn.normalsNeedUpdate=!1),vn.colorsNeedUpdate===!0&&(Rn=this.attributes.color,Rn!==void 0&&(Rn.copyColorsArray(vn.colors),Rn.needsUpdate=!0),vn.colorsNeedUpdate=!1),vn.uvsNeedUpdate&&(Rn=this.attributes.uv,Rn!==void 0&&(Rn.copyVector2sArray(vn.uvs),Rn.needsUpdate=!0),vn.uvsNeedUpdate=!1),vn.lineDistancesNeedUpdate&&(Rn=this.attributes.lineDistance,Rn!==void 0&&(Rn.copyArray(vn.lineDistances),Rn.needsUpdate=!0),vn.lineDistancesNeedUpdate=!1),vn.groupsNeedUpdate&&(vn.computeGroups(cr.geometry),this.groups=vn.groups,vn.groupsNeedUpdate=!1),this},fromGeometry:function(cr){return cr.__directGeometry=new DirectGeometry().fromGeometry(cr),this.fromDirectGeometry(cr.__directGeometry)},fromDirectGeometry:function(cr){var vn=new Float32Array(cr.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(vn,3).copyVector3sArray(cr.vertices)),cr.normals.length>0){var yn=new Float32Array(cr.normals.length*3);this.setAttribute("normal",new BufferAttribute(yn,3).copyVector3sArray(cr.normals))}if(cr.colors.length>0){var Rn=new Float32Array(cr.colors.length*3);this.setAttribute("color",new BufferAttribute(Rn,3).copyColorsArray(cr.colors))}if(cr.uvs.length>0){var Bn=new Float32Array(cr.uvs.length*2);this.setAttribute("uv",new BufferAttribute(Bn,2).copyVector2sArray(cr.uvs))}if(cr.uvs2.length>0){var Co=new Float32Array(cr.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Co,2).copyVector2sArray(cr.uvs2))}this.groups=cr.groups;for(var Po in cr.morphTargets){for(var To=[],Io=cr.morphTargets[Po],$l=0,Wl=Io.length;$l<Wl;$l++){var Xl=Io[$l],Yl=new Float32BufferAttribute(Xl.data.length*3,3);Yl.name=Xl.name,To.push(Yl.copyVector3sArray(Xl.data))}this.morphAttributes[Po]=To}if(cr.skinIndices.length>0){var Zl=new Float32BufferAttribute(cr.skinIndices.length*4,4);this.setAttribute("skinIndex",Zl.copyVector4sArray(cr.skinIndices))}if(cr.skinWeights.length>0){var ey=new Float32BufferAttribute(cr.skinWeights.length*4,4);this.setAttribute("skinWeight",ey.copyVector4sArray(cr.skinWeights))}return cr.boundingSphere!==null&&(this.boundingSphere=cr.boundingSphere.clone()),cr.boundingBox!==null&&(this.boundingBox=cr.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var cr=this.attributes.position,vn=this.morphAttributes.position;if(cr!==void 0){if(this.boundingBox.setFromBufferAttribute(cr),vn)for(var yn=0,Rn=vn.length;yn<Rn;yn++){var Bn=vn[yn];_box$2.setFromBufferAttribute(Bn),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var cr=this.attributes.position,vn=this.morphAttributes.position;if(cr){var yn=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(cr),vn)for(var Rn=0,Bn=vn.length;Rn<Bn;Rn++){var Co=vn[Rn];_boxMorphTargets.setFromBufferAttribute(Co),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(yn);for(var Po=0,Rn=0,Bn=cr.count;Rn<Bn;Rn++)_vector$4.fromBufferAttribute(cr,Rn),Po=Math.max(Po,yn.distanceToSquared(_vector$4));if(vn)for(var Rn=0,Bn=vn.length;Rn<Bn;Rn++)for(var Co=vn[Rn],To=this.morphTargetsRelative,Io=0,$l=Co.count;Io<$l;Io++)_vector$4.fromBufferAttribute(Co,Io),To&&(_offset.fromBufferAttribute(cr,Io),_vector$4.add(_offset)),Po=Math.max(Po,yn.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Po),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var cr=this.index,vn=this.attributes;if(vn.position){var yn=vn.position.array;if(vn.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(yn.length),3));else for(var Rn=vn.normal.array,Bn=0,Co=Rn.length;Bn<Co;Bn++)Rn[Bn]=0;var Po=vn.normal.array,To,Io,$l,Wl=new Vector3,Xl=new Vector3,Yl=new Vector3,Zl=new Vector3,ey=new Vector3;if(cr)for(var Rm=cr.array,Bn=0,Co=cr.count;Bn<Co;Bn+=3)To=Rm[Bn+0]*3,Io=Rm[Bn+1]*3,$l=Rm[Bn+2]*3,Wl.fromArray(yn,To),Xl.fromArray(yn,Io),Yl.fromArray(yn,$l),Zl.subVectors(Yl,Xl),ey.subVectors(Wl,Xl),Zl.cross(ey),Po[To]+=Zl.x,Po[To+1]+=Zl.y,Po[To+2]+=Zl.z,Po[Io]+=Zl.x,Po[Io+1]+=Zl.y,Po[Io+2]+=Zl.z,Po[$l]+=Zl.x,Po[$l+1]+=Zl.y,Po[$l+2]+=Zl.z;else for(var Bn=0,Co=yn.length;Bn<Co;Bn+=9)Wl.fromArray(yn,Bn),Xl.fromArray(yn,Bn+3),Yl.fromArray(yn,Bn+6),Zl.subVectors(Yl,Xl),ey.subVectors(Wl,Xl),Zl.cross(ey),Po[Bn]=Zl.x,Po[Bn+1]=Zl.y,Po[Bn+2]=Zl.z,Po[Bn+3]=Zl.x,Po[Bn+4]=Zl.y,Po[Bn+5]=Zl.z,Po[Bn+6]=Zl.x,Po[Bn+7]=Zl.y,Po[Bn+8]=Zl.z;this.normalizeNormals(),vn.normal.needsUpdate=!0}},merge:function(cr,vn){if(!(cr&&cr.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",cr);return}vn===void 0&&(vn=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var yn=this.attributes;for(var Rn in yn)if(cr.attributes[Rn]!==void 0)for(var Bn=yn[Rn],Co=Bn.array,Po=cr.attributes[Rn],To=Po.array,Io=Po.itemSize*vn,$l=Math.min(To.length,Co.length-Io),Wl=0,Xl=Io;Wl<$l;Wl++,Xl++)Co[Xl]=To[Wl];return this},normalizeNormals:function(){for(var cr=this.attributes.normal,vn=0,yn=cr.count;vn<yn;vn++)_vector$4.x=cr.getX(vn),_vector$4.y=cr.getY(vn),_vector$4.z=cr.getZ(vn),_vector$4.normalize(),cr.setXYZ(vn,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function cr(Rm,ry){for(var _g=Rm.array,ty=Rm.itemSize,ny=Rm.normalized,iy=new _g.constructor(ry.length*ty),oy=0,ay=0,uy=0,hy=ry.length;uy<hy;uy++){oy=ry[uy]*ty;for(var my=0;my<ty;my++)iy[ay++]=_g[oy++]}return new BufferAttribute(iy,ty,ny)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var vn=new BufferGeometry,yn=this.index.array,Rn=this.attributes;for(var Bn in Rn){var Co=Rn[Bn],Po=cr(Co,yn);vn.setAttribute(Bn,Po)}var To=this.morphAttributes;for(Bn in To){for(var Io=[],$l=To[Bn],Wl=0,Xl=$l.length;Wl<Xl;Wl++){var Co=$l[Wl],Po=cr(Co,yn);Io.push(Po)}vn.morphAttributes[Bn]=Io}vn.morphTargetsRelative=this.morphTargetsRelative;for(var Yl=this.groups,Wl=0,Zl=Yl.length;Wl<Zl;Wl++){var ey=Yl[Wl];vn.addGroup(ey.start,ey.count,ey.materialIndex)}return vn},toJSON:function(){var cr={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(cr.uuid=this.uuid,cr.type=this.type,this.name!==""&&(cr.name=this.name),Object.keys(this.userData).length>0&&(cr.userData=this.userData),this.parameters!==void 0){var vn=this.parameters;for(var yn in vn)vn[yn]!==void 0&&(cr[yn]=vn[yn]);return cr}cr.data={attributes:{}};var Rn=this.index;Rn!==null&&(cr.data.index={type:Rn.array.constructor.name,array:Array.prototype.slice.call(Rn.array)});var Bn=this.attributes;for(var yn in Bn){var Co=Bn[yn],Po=Co.toJSON();Co.name!==""&&(Po.name=Co.name),cr.data.attributes[yn]=Po}var To={},Io=!1;for(var yn in this.morphAttributes){for(var $l=this.morphAttributes[yn],Wl=[],Xl=0,Yl=$l.length;Xl<Yl;Xl++){var Co=$l[Xl],Po=Co.toJSON();Co.name!==""&&(Po.name=Co.name),Wl.push(Po)}Wl.length>0&&(To[yn]=Wl,Io=!0)}Io&&(cr.data.morphAttributes=To,cr.data.morphTargetsRelative=this.morphTargetsRelative);var Zl=this.groups;Zl.length>0&&(cr.data.groups=JSON.parse(JSON.stringify(Zl)));var ey=this.boundingSphere;return ey!==null&&(cr.data.boundingSphere={center:ey.center.toArray(),radius:ey.radius}),cr},clone:function(){return new BufferGeometry().copy(this)},copy:function(cr){var vn,yn,Rn;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=cr.name;var Bn=cr.index;Bn!==null&&this.setIndex(Bn.clone());var Co=cr.attributes;for(vn in Co){var Po=Co[vn];this.setAttribute(vn,Po.clone())}var To=cr.morphAttributes;for(vn in To){var Io=[],$l=To[vn];for(yn=0,Rn=$l.length;yn<Rn;yn++)Io.push($l[yn].clone());this.morphAttributes[vn]=Io}this.morphTargetsRelative=cr.morphTargetsRelative;var Wl=cr.groups;for(yn=0,Rn=Wl.length;yn<Rn;yn++){var Xl=Wl[yn];this.addGroup(Xl.start,Xl.count,Xl.materialIndex)}var Yl=cr.boundingBox;Yl!==null&&(this.boundingBox=Yl.clone());var Zl=cr.boundingSphere;return Zl!==null&&(this.boundingSphere=Zl.clone()),this.drawRange.start=cr.drawRange.start,this.drawRange.count=cr.drawRange.count,this.userData=cr.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(cr,vn){Object3D.call(this),this.type="Mesh",this.geometry=cr!==void 0?cr:new BufferGeometry,this.material=vn!==void 0?vn:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(cr){return Object3D.prototype.copy.call(this,cr),cr.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=cr.morphTargetInfluences.slice()),cr.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},cr.morphTargetDictionary)),this},updateMorphTargets:function(){var cr=this.geometry,vn,yn,Rn;if(cr.isBufferGeometry){var Bn=cr.morphAttributes,Co=Object.keys(Bn);if(Co.length>0){var Po=Bn[Co[0]];if(Po!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},vn=0,yn=Po.length;vn<yn;vn++)Rn=Po[vn].name||String(vn),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rn]=vn}}else{var To=cr.morphTargets;To!==void 0&&To.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(cr,vn){var yn=this.geometry,Rn=this.material,Bn=this.matrixWorld;if(Rn!==void 0&&(yn.boundingSphere===null&&yn.computeBoundingSphere(),_sphere.copy(yn.boundingSphere),_sphere.applyMatrix4(Bn),cr.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(Bn),_ray.copy(cr.ray).applyMatrix4(_inverseMatrix),!(yn.boundingBox!==null&&_ray.intersectsBox(yn.boundingBox)===!1)))){var Co;if(yn.isBufferGeometry){var Po,To,Io,$l=yn.index,Wl=yn.attributes.position,Xl=yn.morphAttributes.position,Yl=yn.morphTargetsRelative,Zl=yn.attributes.uv,ey=yn.attributes.uv2,Rm=yn.groups,ry=yn.drawRange,_g,ty,ny,iy,oy,ay,uy,hy;if($l!==null)if(Array.isArray(Rn))for(_g=0,ny=Rm.length;_g<ny;_g++)for(oy=Rm[_g],ay=Rn[oy.materialIndex],uy=Math.max(oy.start,ry.start),hy=Math.min(oy.start+oy.count,ry.start+ry.count),ty=uy,iy=hy;ty<iy;ty+=3)Po=$l.getX(ty),To=$l.getX(ty+1),Io=$l.getX(ty+2),Co=checkBufferGeometryIntersection(this,ay,cr,_ray,Wl,Xl,Yl,Zl,ey,Po,To,Io),Co&&(Co.faceIndex=Math.floor(ty/3),Co.face.materialIndex=oy.materialIndex,vn.push(Co));else for(uy=Math.max(0,ry.start),hy=Math.min($l.count,ry.start+ry.count),_g=uy,ny=hy;_g<ny;_g+=3)Po=$l.getX(_g),To=$l.getX(_g+1),Io=$l.getX(_g+2),Co=checkBufferGeometryIntersection(this,Rn,cr,_ray,Wl,Xl,Yl,Zl,ey,Po,To,Io),Co&&(Co.faceIndex=Math.floor(_g/3),vn.push(Co));else if(Wl!==void 0)if(Array.isArray(Rn))for(_g=0,ny=Rm.length;_g<ny;_g++)for(oy=Rm[_g],ay=Rn[oy.materialIndex],uy=Math.max(oy.start,ry.start),hy=Math.min(oy.start+oy.count,ry.start+ry.count),ty=uy,iy=hy;ty<iy;ty+=3)Po=ty,To=ty+1,Io=ty+2,Co=checkBufferGeometryIntersection(this,ay,cr,_ray,Wl,Xl,Yl,Zl,ey,Po,To,Io),Co&&(Co.faceIndex=Math.floor(ty/3),Co.face.materialIndex=oy.materialIndex,vn.push(Co));else for(uy=Math.max(0,ry.start),hy=Math.min(Wl.count,ry.start+ry.count),_g=uy,ny=hy;_g<ny;_g+=3)Po=_g,To=_g+1,Io=_g+2,Co=checkBufferGeometryIntersection(this,Rn,cr,_ray,Wl,Xl,Yl,Zl,ey,Po,To,Io),Co&&(Co.faceIndex=Math.floor(_g/3),vn.push(Co))}else if(yn.isGeometry){var my,ly,sy,cy=Array.isArray(Rn),fy=yn.vertices,vy=yn.faces,dy,Ay=yn.faceVertexUvs[0];Ay.length>0&&(dy=Ay);for(var gy=0,wy=vy.length;gy<wy;gy++){var Cy=vy[gy],My=cy?Rn[Cy.materialIndex]:Rn;if(My!==void 0&&(my=fy[Cy.a],ly=fy[Cy.b],sy=fy[Cy.c],Co=checkIntersection(this,My,cr,_ray,my,ly,sy,_intersectionPoint),Co)){if(dy&&dy[gy]){var Py=dy[gy];_uvA.copy(Py[0]),_uvB.copy(Py[1]),_uvC.copy(Py[2]),Co.uv=Triangle.getUV(_intersectionPoint,my,ly,sy,_uvA,_uvB,_uvC,new Vector2)}Co.face=Cy,Co.faceIndex=gy,vn.push(Co)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(cr,vn,yn,Rn,Bn,Co,Po,To){var Io;if(vn.side===BackSide?Io=Rn.intersectTriangle(Po,Co,Bn,!0,To):Io=Rn.intersectTriangle(Bn,Co,Po,vn.side!==DoubleSide,To),Io===null)return null;_intersectionPointWorld.copy(To),_intersectionPointWorld.applyMatrix4(cr.matrixWorld);var $l=yn.ray.origin.distanceTo(_intersectionPointWorld);return $l<yn.near||$l>yn.far?null:{distance:$l,point:_intersectionPointWorld.clone(),object:cr}}function checkBufferGeometryIntersection(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl){_vA.fromBufferAttribute(Bn,$l),_vB.fromBufferAttribute(Bn,Wl),_vC.fromBufferAttribute(Bn,Xl);var Yl=cr.morphTargetInfluences;if(vn.morphTargets&&Co&&Yl){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Zl=0,ey=Co.length;Zl<ey;Zl++){var Rm=Yl[Zl],ry=Co[Zl];Rm!==0&&(_tempA.fromBufferAttribute(ry,$l),_tempB.fromBufferAttribute(ry,Wl),_tempC.fromBufferAttribute(ry,Xl),Po?(_morphA.addScaledVector(_tempA,Rm),_morphB.addScaledVector(_tempB,Rm),_morphC.addScaledVector(_tempC,Rm)):(_morphA.addScaledVector(_tempA.sub(_vA),Rm),_morphB.addScaledVector(_tempB.sub(_vB),Rm),_morphC.addScaledVector(_tempC.sub(_vC),Rm)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}cr.isSkinnedMesh&&(cr.boneTransform($l,_vA),cr.boneTransform(Wl,_vB),cr.boneTransform(Xl,_vC));var _g=checkIntersection(cr,vn,yn,Rn,_vA,_vB,_vC,_intersectionPoint);if(_g){To&&(_uvA.fromBufferAttribute(To,$l),_uvB.fromBufferAttribute(To,Wl),_uvC.fromBufferAttribute(To,Xl),_g.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Io&&(_uvA.fromBufferAttribute(Io,$l),_uvB.fromBufferAttribute(Io,Wl),_uvC.fromBufferAttribute(Io,Xl),_g.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var ty=new Face3($l,Wl,Xl);Triangle.getNormal(_vA,_vB,_vC,ty.normal),_g.face=ty}return _g}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(cr){for(var vn=new Matrix3().getNormalMatrix(cr),yn=0,Rn=this.vertices.length;yn<Rn;yn++){var Bn=this.vertices[yn];Bn.applyMatrix4(cr)}for(var yn=0,Rn=this.faces.length;yn<Rn;yn++){var Co=this.faces[yn];Co.normal.applyMatrix3(vn).normalize();for(var Po=0,To=Co.vertexNormals.length;Po<To;Po++)Co.vertexNormals[Po].applyMatrix3(vn).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(cr){return _m1$3.makeRotationX(cr),this.applyMatrix4(_m1$3),this},rotateY:function(cr){return _m1$3.makeRotationY(cr),this.applyMatrix4(_m1$3),this},rotateZ:function(cr){return _m1$3.makeRotationZ(cr),this.applyMatrix4(_m1$3),this},translate:function(cr,vn,yn){return _m1$3.makeTranslation(cr,vn,yn),this.applyMatrix4(_m1$3),this},scale:function(cr,vn,yn){return _m1$3.makeScale(cr,vn,yn),this.applyMatrix4(_m1$3),this},lookAt:function(cr){return _obj$1.lookAt(cr),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(cr){var vn=this,yn=cr.index!==null?cr.index.array:void 0,Rn=cr.attributes;if(Rn.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var Bn=Rn.position.array,Co=Rn.normal!==void 0?Rn.normal.array:void 0,Po=Rn.color!==void 0?Rn.color.array:void 0,To=Rn.uv!==void 0?Rn.uv.array:void 0,Io=Rn.uv2!==void 0?Rn.uv2.array:void 0;Io!==void 0&&(this.faceVertexUvs[1]=[]);for(var $l=0;$l<Bn.length;$l+=3)vn.vertices.push(new Vector3().fromArray(Bn,$l)),Po!==void 0&&vn.colors.push(new Color().fromArray(Po,$l));function Wl(_g,ty,ny,iy){var oy=Po===void 0?[]:[vn.colors[_g].clone(),vn.colors[ty].clone(),vn.colors[ny].clone()],ay=Co===void 0?[]:[new Vector3().fromArray(Co,_g*3),new Vector3().fromArray(Co,ty*3),new Vector3().fromArray(Co,ny*3)],uy=new Face3(_g,ty,ny,ay,oy,iy);vn.faces.push(uy),To!==void 0&&vn.faceVertexUvs[0].push([new Vector2().fromArray(To,_g*2),new Vector2().fromArray(To,ty*2),new Vector2().fromArray(To,ny*2)]),Io!==void 0&&vn.faceVertexUvs[1].push([new Vector2().fromArray(Io,_g*2),new Vector2().fromArray(Io,ty*2),new Vector2().fromArray(Io,ny*2)])}var Xl=cr.groups;if(Xl.length>0)for(var $l=0;$l<Xl.length;$l++)for(var Yl=Xl[$l],Zl=Yl.start,ey=Yl.count,Rm=Zl,ry=Zl+ey;Rm<ry;Rm+=3)yn!==void 0?Wl(yn[Rm],yn[Rm+1],yn[Rm+2],Yl.materialIndex):Wl(Rm,Rm+1,Rm+2,Yl.materialIndex);else if(yn!==void 0)for(var $l=0;$l<yn.length;$l+=3)Wl(yn[$l],yn[$l+1],yn[$l+2]);else for(var $l=0;$l<Bn.length/3;$l+=3)Wl($l,$l+1,$l+2);return this.computeFaceNormals(),cr.boundingBox!==null&&(this.boundingBox=cr.boundingBox.clone()),cr.boundingSphere!==null&&(this.boundingSphere=cr.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var cr=this.boundingSphere.center,vn=this.boundingSphere.radius,yn=vn===0?1:1/vn,Rn=new Matrix4;return Rn.set(yn,0,0,-yn*cr.x,0,yn,0,-yn*cr.y,0,0,yn,-yn*cr.z,0,0,0,1),this.applyMatrix4(Rn),this},computeFaceNormals:function(){for(var cr=new Vector3,vn=new Vector3,yn=0,Rn=this.faces.length;yn<Rn;yn++){var Bn=this.faces[yn],Co=this.vertices[Bn.a],Po=this.vertices[Bn.b],To=this.vertices[Bn.c];cr.subVectors(To,Po),vn.subVectors(Co,Po),cr.cross(vn),cr.normalize(),Bn.normal.copy(cr)}},computeVertexNormals:function(cr){cr===void 0&&(cr=!0);var vn,yn,Rn,Bn,Co,Po;for(Po=new Array(this.vertices.length),vn=0,yn=this.vertices.length;vn<yn;vn++)Po[vn]=new Vector3;if(cr){var To,Io,$l,Wl=new Vector3,Xl=new Vector3;for(Rn=0,Bn=this.faces.length;Rn<Bn;Rn++)Co=this.faces[Rn],To=this.vertices[Co.a],Io=this.vertices[Co.b],$l=this.vertices[Co.c],Wl.subVectors($l,Io),Xl.subVectors(To,Io),Wl.cross(Xl),Po[Co.a].add(Wl),Po[Co.b].add(Wl),Po[Co.c].add(Wl)}else for(this.computeFaceNormals(),Rn=0,Bn=this.faces.length;Rn<Bn;Rn++)Co=this.faces[Rn],Po[Co.a].add(Co.normal),Po[Co.b].add(Co.normal),Po[Co.c].add(Co.normal);for(vn=0,yn=this.vertices.length;vn<yn;vn++)Po[vn].normalize();for(Rn=0,Bn=this.faces.length;Rn<Bn;Rn++){Co=this.faces[Rn];var Yl=Co.vertexNormals;Yl.length===3?(Yl[0].copy(Po[Co.a]),Yl[1].copy(Po[Co.b]),Yl[2].copy(Po[Co.c])):(Yl[0]=Po[Co.a].clone(),Yl[1]=Po[Co.b].clone(),Yl[2]=Po[Co.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var cr,vn,yn;for(this.computeFaceNormals(),cr=0,vn=this.faces.length;cr<vn;cr++){yn=this.faces[cr];var Rn=yn.vertexNormals;Rn.length===3?(Rn[0].copy(yn.normal),Rn[1].copy(yn.normal),Rn[2].copy(yn.normal)):(Rn[0]=yn.normal.clone(),Rn[1]=yn.normal.clone(),Rn[2]=yn.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var cr,vn,yn,Rn,Bn;for(yn=0,Rn=this.faces.length;yn<Rn;yn++)for(Bn=this.faces[yn],Bn.__originalFaceNormal?Bn.__originalFaceNormal.copy(Bn.normal):Bn.__originalFaceNormal=Bn.normal.clone(),Bn.__originalVertexNormals||(Bn.__originalVertexNormals=[]),cr=0,vn=Bn.vertexNormals.length;cr<vn;cr++)Bn.__originalVertexNormals[cr]?Bn.__originalVertexNormals[cr].copy(Bn.vertexNormals[cr]):Bn.__originalVertexNormals[cr]=Bn.vertexNormals[cr].clone();var Co=new Geometry;for(Co.faces=this.faces,cr=0,vn=this.morphTargets.length;cr<vn;cr++){if(!this.morphNormals[cr]){this.morphNormals[cr]={},this.morphNormals[cr].faceNormals=[],this.morphNormals[cr].vertexNormals=[];var Po=this.morphNormals[cr].faceNormals,To=this.morphNormals[cr].vertexNormals,$l,Wl;for(yn=0,Rn=this.faces.length;yn<Rn;yn++)$l=new Vector3,Wl={a:new Vector3,b:new Vector3,c:new Vector3},Po.push($l),To.push(Wl)}var Io=this.morphNormals[cr];Co.vertices=this.morphTargets[cr].vertices,Co.computeFaceNormals(),Co.computeVertexNormals();var $l,Wl;for(yn=0,Rn=this.faces.length;yn<Rn;yn++)Bn=this.faces[yn],$l=Io.faceNormals[yn],Wl=Io.vertexNormals[yn],$l.copy(Bn.normal),Wl.a.copy(Bn.vertexNormals[0]),Wl.b.copy(Bn.vertexNormals[1]),Wl.c.copy(Bn.vertexNormals[2])}for(yn=0,Rn=this.faces.length;yn<Rn;yn++)Bn=this.faces[yn],Bn.normal=Bn.__originalFaceNormal,Bn.vertexNormals=Bn.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(cr,vn,yn){if(!(cr&&cr.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",cr);return}var Rn,Bn=this.vertices.length,Co=this.vertices,Po=cr.vertices,To=this.faces,Io=cr.faces,$l=this.colors,Wl=cr.colors;yn===void 0&&(yn=0),vn!==void 0&&(Rn=new Matrix3().getNormalMatrix(vn));for(var Xl=0,Yl=Po.length;Xl<Yl;Xl++){var Zl=Po[Xl],ey=Zl.clone();vn!==void 0&&ey.applyMatrix4(vn),Co.push(ey)}for(var Xl=0,Yl=Wl.length;Xl<Yl;Xl++)$l.push(Wl[Xl].clone());for(Xl=0,Yl=Io.length;Xl<Yl;Xl++){var Rm=Io[Xl],ry,_g,ty,ny=Rm.vertexNormals,iy=Rm.vertexColors;ry=new Face3(Rm.a+Bn,Rm.b+Bn,Rm.c+Bn),ry.normal.copy(Rm.normal),Rn!==void 0&&ry.normal.applyMatrix3(Rn).normalize();for(var oy=0,ay=ny.length;oy<ay;oy++)_g=ny[oy].clone(),Rn!==void 0&&_g.applyMatrix3(Rn).normalize(),ry.vertexNormals.push(_g);ry.color.copy(Rm.color);for(var oy=0,ay=iy.length;oy<ay;oy++)ty=iy[oy],ry.vertexColors.push(ty.clone());ry.materialIndex=Rm.materialIndex+yn,To.push(ry)}for(var Xl=0,Yl=cr.faceVertexUvs.length;Xl<Yl;Xl++){var uy=cr.faceVertexUvs[Xl];this.faceVertexUvs[Xl]===void 0&&(this.faceVertexUvs[Xl]=[]);for(var oy=0,ay=uy.length;oy<ay;oy++){for(var hy=uy[oy],my=[],ly=0,sy=hy.length;ly<sy;ly++)my.push(hy[ly].clone());this.faceVertexUvs[Xl].push(my)}}},mergeMesh:function(cr){if(!(cr&&cr.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",cr);return}cr.matrixAutoUpdate&&cr.updateMatrix(),this.merge(cr.geometry,cr.matrix)},mergeVertices:function(){var cr={},vn=[],yn=[],Rn,Bn,Co=4,Po=Math.pow(10,Co),To,Io,$l,Wl,Xl,Yl;for(To=0,Io=this.vertices.length;To<Io;To++)Rn=this.vertices[To],Bn=Math.round(Rn.x*Po)+"_"+Math.round(Rn.y*Po)+"_"+Math.round(Rn.z*Po),cr[Bn]===void 0?(cr[Bn]=To,vn.push(this.vertices[To]),yn[To]=vn.length-1):yn[To]=yn[cr[Bn]];var Zl=[];for(To=0,Io=this.faces.length;To<Io;To++){$l=this.faces[To],$l.a=yn[$l.a],$l.b=yn[$l.b],$l.c=yn[$l.c],Wl=[$l.a,$l.b,$l.c];for(var ey=0;ey<3;ey++)if(Wl[ey]===Wl[(ey+1)%3]){Zl.push(To);break}}for(To=Zl.length-1;To>=0;To--){var Rm=Zl[To];for(this.faces.splice(Rm,1),Xl=0,Yl=this.faceVertexUvs.length;Xl<Yl;Xl++)this.faceVertexUvs[Xl].splice(Rm,1)}var ry=this.vertices.length-vn.length;return this.vertices=vn,ry},setFromPoints:function(cr){this.vertices=[];for(var vn=0,yn=cr.length;vn<yn;vn++){var Rn=cr[vn];this.vertices.push(new Vector3(Rn.x,Rn.y,Rn.z||0))}return this},sortFacesByMaterialIndex:function(){for(var cr=this.faces,vn=cr.length,yn=0;yn<vn;yn++)cr[yn]._id=yn;function Rn($l,Wl){return $l.materialIndex-Wl.materialIndex}cr.sort(Rn);var Bn=this.faceVertexUvs[0],Co=this.faceVertexUvs[1],Po,To;Bn&&Bn.length===vn&&(Po=[]),Co&&Co.length===vn&&(To=[]);for(var yn=0;yn<vn;yn++){var Io=cr[yn]._id;Po&&Po.push(Bn[Io]),To&&To.push(Co[Io])}Po&&(this.faceVertexUvs[0]=Po),To&&(this.faceVertexUvs[1]=To)},toJSON:function(){var cr={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(cr.uuid=this.uuid,cr.type=this.type,this.name!==""&&(cr.name=this.name),this.parameters!==void 0){var vn=this.parameters;for(var yn in vn)vn[yn]!==void 0&&(cr[yn]=vn[yn]);return cr}for(var Rn=[],Bn=0;Bn<this.vertices.length;Bn++){var Co=this.vertices[Bn];Rn.push(Co.x,Co.y,Co.z)}for(var Po=[],To=[],Io={},$l=[],Wl={},Xl=[],Yl={},Bn=0;Bn<this.faces.length;Bn++){var Zl=this.faces[Bn],ey=!0,Rm=!1,ry=this.faceVertexUvs[0][Bn]!==void 0,_g=Zl.normal.length()>0,ty=Zl.vertexNormals.length>0,ny=Zl.color.r!==1||Zl.color.g!==1||Zl.color.b!==1,iy=Zl.vertexColors.length>0,oy=0;if(oy=my(oy,0,0),oy=my(oy,1,ey),oy=my(oy,2,Rm),oy=my(oy,3,ry),oy=my(oy,4,_g),oy=my(oy,5,ty),oy=my(oy,6,ny),oy=my(oy,7,iy),Po.push(oy),Po.push(Zl.a,Zl.b,Zl.c),Po.push(Zl.materialIndex),ry){var ay=this.faceVertexUvs[0][Bn];Po.push(cy(ay[0]),cy(ay[1]),cy(ay[2]))}if(_g&&Po.push(ly(Zl.normal)),ty){var uy=Zl.vertexNormals;Po.push(ly(uy[0]),ly(uy[1]),ly(uy[2]))}if(ny&&Po.push(sy(Zl.color)),iy){var hy=Zl.vertexColors;Po.push(sy(hy[0]),sy(hy[1]),sy(hy[2]))}}function my(fy,vy,dy){return dy?fy|1<<vy:fy&~(1<<vy)}function ly(fy){var vy=fy.x.toString()+fy.y.toString()+fy.z.toString();return Io[vy]!==void 0||(Io[vy]=To.length/3,To.push(fy.x,fy.y,fy.z)),Io[vy]}function sy(fy){var vy=fy.r.toString()+fy.g.toString()+fy.b.toString();return Wl[vy]!==void 0||(Wl[vy]=$l.length,$l.push(fy.getHex())),Wl[vy]}function cy(fy){var vy=fy.x.toString()+fy.y.toString();return Yl[vy]!==void 0||(Yl[vy]=Xl.length/2,Xl.push(fy.x,fy.y)),Yl[vy]}return cr.data={},cr.data.vertices=Rn,cr.data.normals=To,$l.length>0&&(cr.data.colors=$l),Xl.length>0&&(cr.data.uvs=[Xl]),cr.data.faces=Po,cr},clone:function(){return new Geometry().copy(this)},copy:function(cr){var vn,yn,Rn,Bn,Co,Po;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=cr.name;var To=cr.vertices;for(vn=0,yn=To.length;vn<yn;vn++)this.vertices.push(To[vn].clone());var Io=cr.colors;for(vn=0,yn=Io.length;vn<yn;vn++)this.colors.push(Io[vn].clone());var $l=cr.faces;for(vn=0,yn=$l.length;vn<yn;vn++)this.faces.push($l[vn].clone());for(vn=0,yn=cr.faceVertexUvs.length;vn<yn;vn++){var Wl=cr.faceVertexUvs[vn];for(this.faceVertexUvs[vn]===void 0&&(this.faceVertexUvs[vn]=[]),Rn=0,Bn=Wl.length;Rn<Bn;Rn++){var Xl=Wl[Rn],Yl=[];for(Co=0,Po=Xl.length;Co<Po;Co++){var Zl=Xl[Co];Yl.push(Zl.clone())}this.faceVertexUvs[vn].push(Yl)}}var ey=cr.morphTargets;for(vn=0,yn=ey.length;vn<yn;vn++){var Rm={};if(Rm.name=ey[vn].name,ey[vn].vertices!==void 0)for(Rm.vertices=[],Rn=0,Bn=ey[vn].vertices.length;Rn<Bn;Rn++)Rm.vertices.push(ey[vn].vertices[Rn].clone());if(ey[vn].normals!==void 0)for(Rm.normals=[],Rn=0,Bn=ey[vn].normals.length;Rn<Bn;Rn++)Rm.normals.push(ey[vn].normals[Rn].clone());this.morphTargets.push(Rm)}var ry=cr.morphNormals;for(vn=0,yn=ry.length;vn<yn;vn++){var _g={};if(ry[vn].vertexNormals!==void 0)for(_g.vertexNormals=[],Rn=0,Bn=ry[vn].vertexNormals.length;Rn<Bn;Rn++){var ty=ry[vn].vertexNormals[Rn],ny={};ny.a=ty.a.clone(),ny.b=ty.b.clone(),ny.c=ty.c.clone(),_g.vertexNormals.push(ny)}if(ry[vn].faceNormals!==void 0)for(_g.faceNormals=[],Rn=0,Bn=ry[vn].faceNormals.length;Rn<Bn;Rn++)_g.faceNormals.push(ry[vn].faceNormals[Rn].clone());this.morphNormals.push(_g)}var iy=cr.skinWeights;for(vn=0,yn=iy.length;vn<yn;vn++)this.skinWeights.push(iy[vn].clone());var oy=cr.skinIndices;for(vn=0,yn=oy.length;vn<yn;vn++)this.skinIndices.push(oy[vn].clone());var ay=cr.lineDistances;for(vn=0,yn=ay.length;vn<yn;vn++)this.lineDistances.push(ay[vn]);var uy=cr.boundingBox;uy!==null&&(this.boundingBox=uy.clone());var hy=cr.boundingSphere;return hy!==null&&(this.boundingSphere=hy.clone()),this.elementsNeedUpdate=cr.elementsNeedUpdate,this.verticesNeedUpdate=cr.verticesNeedUpdate,this.uvsNeedUpdate=cr.uvsNeedUpdate,this.normalsNeedUpdate=cr.normalsNeedUpdate,this.colorsNeedUpdate=cr.colorsNeedUpdate,this.lineDistancesNeedUpdate=cr.lineDistancesNeedUpdate,this.groupsNeedUpdate=cr.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(vn,yn,Rn,Bn,Co,Po){super(),this.type="BoxGeometry",this.parameters={width:vn,height:yn,depth:Rn,widthSegments:Bn,heightSegments:Co,depthSegments:Po},this.fromBufferGeometry(new BoxBufferGeometry(vn,yn,Rn,Bn,Co,Po)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(vn,yn,Rn,Bn,Co,Po){super(),this.type="BoxBufferGeometry",this.parameters={width:vn,height:yn,depth:Rn,widthSegments:Bn,heightSegments:Co,depthSegments:Po};const To=this;vn=vn||1,yn=yn||1,Rn=Rn||1,Bn=Math.floor(Bn)||1,Co=Math.floor(Co)||1,Po=Math.floor(Po)||1;const Io=[],$l=[],Wl=[],Xl=[];let Yl=0,Zl=0;ey("z","y","x",-1,-1,Rn,yn,vn,Po,Co,0),ey("z","y","x",1,-1,Rn,yn,-vn,Po,Co,1),ey("x","z","y",1,1,vn,Rn,yn,Bn,Po,2),ey("x","z","y",1,-1,vn,Rn,-yn,Bn,Po,3),ey("x","y","z",1,-1,vn,yn,Rn,Bn,Co,4),ey("x","y","z",-1,-1,vn,yn,-Rn,Bn,Co,5),this.setIndex(Io),this.setAttribute("position",new Float32BufferAttribute($l,3)),this.setAttribute("normal",new Float32BufferAttribute(Wl,3)),this.setAttribute("uv",new Float32BufferAttribute(Xl,2));function ey(Rm,ry,_g,ty,ny,iy,oy,ay,uy,hy,my){const ly=iy/uy,sy=oy/hy,cy=iy/2,fy=oy/2,vy=ay/2,dy=uy+1,Ay=hy+1;let gy=0,wy=0;const Cy=new Vector3;for(let My=0;My<Ay;My++){const Py=My*sy-fy;for(let Dy=0;Dy<dy;Dy++){const qy=Dy*ly-cy;Cy[Rm]=qy*ty,Cy[ry]=Py*ny,Cy[_g]=vy,$l.push(Cy.x,Cy.y,Cy.z),Cy[Rm]=0,Cy[ry]=0,Cy[_g]=ay>0?1:-1,Wl.push(Cy.x,Cy.y,Cy.z),Xl.push(Dy/uy),Xl.push(1-My/hy),gy+=1}}for(let My=0;My<hy;My++)for(let Py=0;Py<uy;Py++){const Dy=Yl+Py+dy*My,qy=Yl+Py+dy*(My+1),Xy=Yl+(Py+1)+dy*(My+1),$y=Yl+(Py+1)+dy*My;Io.push(Dy,qy,$y),Io.push(qy,Xy,$y),wy+=6}To.addGroup(Zl,wy,my),Zl+=wy,Yl+=gy}}}function cloneUniforms(cr){var vn={};for(var yn in cr){vn[yn]={};for(var Rn in cr[yn]){var Bn=cr[yn][Rn];Bn&&(Bn.isColor||Bn.isMatrix3||Bn.isMatrix4||Bn.isVector2||Bn.isVector3||Bn.isVector4||Bn.isTexture)?vn[yn][Rn]=Bn.clone():Array.isArray(Bn)?vn[yn][Rn]=Bn.slice():vn[yn][Rn]=Bn}}return vn}function mergeUniforms(cr){for(var vn={},yn=0;yn<cr.length;yn++){var Rn=cloneUniforms(cr[yn]);for(var Bn in Rn)vn[Bn]=Rn[Bn]}return vn}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(cr){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,cr!==void 0&&(cr.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(cr))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.fragmentShader=cr.fragmentShader,this.vertexShader=cr.vertexShader,this.uniforms=cloneUniforms(cr.uniforms),this.defines=Object.assign({},cr.defines),this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.lights=cr.lights,this.clipping=cr.clipping,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this.extensions=Object.assign({},cr.extensions),this};ShaderMaterial.prototype.toJSON=function(cr){var vn=Material.prototype.toJSON.call(this,cr);vn.uniforms={};for(var yn in this.uniforms){var Rn=this.uniforms[yn],Bn=Rn.value;Bn&&Bn.isTexture?vn.uniforms[yn]={type:"t",value:Bn.toJSON(cr).uuid}:Bn&&Bn.isColor?vn.uniforms[yn]={type:"c",value:Bn.getHex()}:Bn&&Bn.isVector2?vn.uniforms[yn]={type:"v2",value:Bn.toArray()}:Bn&&Bn.isVector3?vn.uniforms[yn]={type:"v3",value:Bn.toArray()}:Bn&&Bn.isVector4?vn.uniforms[yn]={type:"v4",value:Bn.toArray()}:Bn&&Bn.isMatrix3?vn.uniforms[yn]={type:"m3",value:Bn.toArray()}:Bn&&Bn.isMatrix4?vn.uniforms[yn]={type:"m4",value:Bn.toArray()}:vn.uniforms[yn]={value:Bn}}Object.keys(this.defines).length>0&&(vn.defines=this.defines),vn.vertexShader=this.vertexShader,vn.fragmentShader=this.fragmentShader;var Co={};for(var Po in this.extensions)this.extensions[Po]===!0&&(Co[Po]=!0);return Object.keys(Co).length>0&&(vn.extensions=Co),vn};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(cr,vn){return Object3D.prototype.copy.call(this,cr,vn),this.matrixWorldInverse.copy(cr.matrixWorldInverse),this.projectionMatrix.copy(cr.projectionMatrix),this.projectionMatrixInverse.copy(cr.projectionMatrixInverse),this},getWorldDirection:function(cr){cr===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),cr=new Vector3),this.updateMatrixWorld(!0);var vn=this.matrixWorld.elements;return cr.set(-vn[8],-vn[9],-vn[10]).normalize()},updateMatrixWorld:function(cr){Object3D.prototype.updateMatrixWorld.call(this,cr),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(cr,vn){Object3D.prototype.updateWorldMatrix.call(this,cr,vn),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(cr,vn,yn,Rn){Camera.call(this),this.type="PerspectiveCamera",this.fov=cr!==void 0?cr:50,this.zoom=1,this.near=yn!==void 0?yn:.1,this.far=Rn!==void 0?Rn:2e3,this.focus=10,this.aspect=vn!==void 0?vn:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(cr,vn){return Camera.prototype.copy.call(this,cr,vn),this.fov=cr.fov,this.zoom=cr.zoom,this.near=cr.near,this.far=cr.far,this.focus=cr.focus,this.aspect=cr.aspect,this.view=cr.view===null?null:Object.assign({},cr.view),this.filmGauge=cr.filmGauge,this.filmOffset=cr.filmOffset,this},setFocalLength:function(cr){var vn=.5*this.getFilmHeight()/cr;this.fov=MathUtils.RAD2DEG*2*Math.atan(vn),this.updateProjectionMatrix()},getFocalLength:function(){var cr=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/cr},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(cr,vn,yn,Rn,Bn,Co){this.aspect=cr/vn,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=cr,this.view.fullHeight=vn,this.view.offsetX=yn,this.view.offsetY=Rn,this.view.width=Bn,this.view.height=Co,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var cr=this.near,vn=cr*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,yn=2*vn,Rn=this.aspect*yn,Bn=-.5*Rn,Co=this.view;if(this.view!==null&&this.view.enabled){var Po=Co.fullWidth,To=Co.fullHeight;Bn+=Co.offsetX*Rn/Po,vn-=Co.offsetY*yn/To,Rn*=Co.width/Po,yn*=Co.height/To}var Io=this.filmOffset;Io!==0&&(Bn+=cr*Io/this.getFilmWidth()),this.projectionMatrix.makePerspective(Bn,Bn+Rn,vn,vn-yn,cr,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(cr){var vn=Object3D.prototype.toJSON.call(this,cr);return vn.object.fov=this.fov,vn.object.zoom=this.zoom,vn.object.near=this.near,vn.object.far=this.far,vn.object.focus=this.focus,vn.object.aspect=this.aspect,this.view!==null&&(vn.object.view=Object.assign({},this.view)),vn.object.filmGauge=this.filmGauge,vn.object.filmOffset=this.filmOffset,vn}});var fov=90,aspect=1;function CubeCamera(cr,vn,yn){if(Object3D.call(this),this.type="CubeCamera",yn.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=yn;var Rn=new PerspectiveCamera(fov,aspect,cr,vn);Rn.layers=this.layers,Rn.up.set(0,-1,0),Rn.lookAt(new Vector3(1,0,0)),this.add(Rn);var Bn=new PerspectiveCamera(fov,aspect,cr,vn);Bn.layers=this.layers,Bn.up.set(0,-1,0),Bn.lookAt(new Vector3(-1,0,0)),this.add(Bn);var Co=new PerspectiveCamera(fov,aspect,cr,vn);Co.layers=this.layers,Co.up.set(0,0,1),Co.lookAt(new Vector3(0,1,0)),this.add(Co);var Po=new PerspectiveCamera(fov,aspect,cr,vn);Po.layers=this.layers,Po.up.set(0,0,-1),Po.lookAt(new Vector3(0,-1,0)),this.add(Po);var To=new PerspectiveCamera(fov,aspect,cr,vn);To.layers=this.layers,To.up.set(0,-1,0),To.lookAt(new Vector3(0,0,1)),this.add(To);var Io=new PerspectiveCamera(fov,aspect,cr,vn);Io.layers=this.layers,Io.up.set(0,-1,0),Io.lookAt(new Vector3(0,0,-1)),this.add(Io),this.update=function($l,Wl){this.parent===null&&this.updateMatrixWorld();var Xl=$l.xr.enabled,Yl=$l.getRenderTarget();$l.xr.enabled=!1;var Zl=yn.texture.generateMipmaps;yn.texture.generateMipmaps=!1,$l.setRenderTarget(yn,0),$l.render(Wl,Rn),$l.setRenderTarget(yn,1),$l.render(Wl,Bn),$l.setRenderTarget(yn,2),$l.render(Wl,Co),$l.setRenderTarget(yn,3),$l.render(Wl,Po),$l.setRenderTarget(yn,4),$l.render(Wl,To),yn.texture.generateMipmaps=Zl,$l.setRenderTarget(yn,5),$l.render(Wl,Io),$l.setRenderTarget(Yl),$l.xr.enabled=Xl},this.clear=function($l,Wl,Xl,Yl){for(var Zl=$l.getRenderTarget(),ey=0;ey<6;ey++)$l.setRenderTarget(yn,ey),$l.clear(Wl,Xl,Yl);$l.setRenderTarget(Zl)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(cr,vn,yn){Number.isInteger(vn)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),vn=yn),WebGLRenderTarget.call(this,cr,cr,vn)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(cr,vn){this.texture.type=vn.type,this.texture.format=vn.format,this.texture.encoding=vn.encoding;var yn=new Scene,Rn={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},Bn=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(Rn.uniforms),vertexShader:Rn.vertexShader,fragmentShader:Rn.fragmentShader,side:BackSide,blending:NoBlending});Bn.uniforms.tEquirect.value=vn;var Co=new Mesh(new BoxBufferGeometry(5,5,5),Bn);yn.add(Co);var Po=new CubeCamera(1,10,this);return Po.update(cr,yn),Co.geometry.dispose(),Co.material.dispose(),this};function DataTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl){Texture.call(this,null,Co,Po,To,Io,$l,Rn,Bn,Wl,Xl),this.image={data:cr||null,width:vn||1,height:yn||1},this.magFilter=Io!==void 0?Io:NearestFilter,this.minFilter=$l!==void 0?$l:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(cr,vn,yn,Rn,Bn,Co){this.planes=[cr!==void 0?cr:new Plane,vn!==void 0?vn:new Plane,yn!==void 0?yn:new Plane,Rn!==void 0?Rn:new Plane,Bn!==void 0?Bn:new Plane,Co!==void 0?Co:new Plane]}Object.assign(Frustum.prototype,{set:function(cr,vn,yn,Rn,Bn,Co){var Po=this.planes;return Po[0].copy(cr),Po[1].copy(vn),Po[2].copy(yn),Po[3].copy(Rn),Po[4].copy(Bn),Po[5].copy(Co),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){for(var vn=this.planes,yn=0;yn<6;yn++)vn[yn].copy(cr.planes[yn]);return this},setFromProjectionMatrix:function(cr){var vn=this.planes,yn=cr.elements,Rn=yn[0],Bn=yn[1],Co=yn[2],Po=yn[3],To=yn[4],Io=yn[5],$l=yn[6],Wl=yn[7],Xl=yn[8],Yl=yn[9],Zl=yn[10],ey=yn[11],Rm=yn[12],ry=yn[13],_g=yn[14],ty=yn[15];return vn[0].setComponents(Po-Rn,Wl-To,ey-Xl,ty-Rm).normalize(),vn[1].setComponents(Po+Rn,Wl+To,ey+Xl,ty+Rm).normalize(),vn[2].setComponents(Po+Bn,Wl+Io,ey+Yl,ty+ry).normalize(),vn[3].setComponents(Po-Bn,Wl-Io,ey-Yl,ty-ry).normalize(),vn[4].setComponents(Po-Co,Wl-$l,ey-Zl,ty-_g).normalize(),vn[5].setComponents(Po+Co,Wl+$l,ey+Zl,ty+_g).normalize(),this},intersectsObject:function(cr){var vn=cr.geometry;return vn.boundingSphere===null&&vn.computeBoundingSphere(),_sphere$1.copy(vn.boundingSphere).applyMatrix4(cr.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(cr){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(cr.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(cr){for(var vn=this.planes,yn=cr.center,Rn=-cr.radius,Bn=0;Bn<6;Bn++){var Co=vn[Bn].distanceToPoint(yn);if(Co<Rn)return!1}return!0},intersectsBox:function(cr){for(var vn=this.planes,yn=0;yn<6;yn++){var Rn=vn[yn];if(_vector$5.x=Rn.normal.x>0?cr.max.x:cr.min.x,_vector$5.y=Rn.normal.y>0?cr.max.y:cr.min.y,_vector$5.z=Rn.normal.z>0?cr.max.z:cr.min.z,Rn.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(cr){for(var vn=this.planes,yn=0;yn<6;yn++)if(vn[yn].distanceToPoint(cr)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var cr=null,vn=!1,yn=null;function Rn(Bn,Co){vn!==!1&&(yn(Bn,Co),cr.requestAnimationFrame(Rn))}return{start:function(){vn!==!0&&yn!==null&&(cr.requestAnimationFrame(Rn),vn=!0)},stop:function(){vn=!1},setAnimationLoop:function(Bn){yn=Bn},setContext:function(Bn){cr=Bn}}}function WebGLAttributes(cr,vn){var yn=vn.isWebGL2,Rn=new WeakMap;function Bn($l,Wl){var Xl=$l.array,Yl=$l.usage,Zl=cr.createBuffer();cr.bindBuffer(Wl,Zl),cr.bufferData(Wl,Xl,Yl),$l.onUploadCallback();var ey=5126;return Xl instanceof Float32Array?ey=5126:Xl instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Xl instanceof Uint16Array?ey=5123:Xl instanceof Int16Array?ey=5122:Xl instanceof Uint32Array?ey=5125:Xl instanceof Int32Array?ey=5124:Xl instanceof Int8Array?ey=5120:Xl instanceof Uint8Array&&(ey=5121),{buffer:Zl,type:ey,bytesPerElement:Xl.BYTES_PER_ELEMENT,version:$l.version}}function Co($l,Wl,Xl){var Yl=Wl.array,Zl=Wl.updateRange;cr.bindBuffer(Xl,$l),Zl.count===-1?cr.bufferSubData(Xl,0,Yl):(yn?cr.bufferSubData(Xl,Zl.offset*Yl.BYTES_PER_ELEMENT,Yl,Zl.offset,Zl.count):cr.bufferSubData(Xl,Zl.offset*Yl.BYTES_PER_ELEMENT,Yl.subarray(Zl.offset,Zl.offset+Zl.count)),Zl.count=-1)}function Po($l){return $l.isInterleavedBufferAttribute&&($l=$l.data),Rn.get($l)}function To($l){$l.isInterleavedBufferAttribute&&($l=$l.data);var Wl=Rn.get($l);Wl&&(cr.deleteBuffer(Wl.buffer),Rn.delete($l))}function Io($l,Wl){$l.isInterleavedBufferAttribute&&($l=$l.data);var Xl=Rn.get($l);Xl===void 0?Rn.set($l,Bn($l,Wl)):Xl.version<$l.version&&(Co(Xl.buffer,$l,Wl),Xl.version=$l.version)}return{get:Po,remove:To,update:Io}}function PlaneGeometry(cr,vn,yn,Rn){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:cr,height:vn,widthSegments:yn,heightSegments:Rn},this.fromBufferGeometry(new PlaneBufferGeometry(cr,vn,yn,Rn)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(cr,vn,yn,Rn){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:cr,height:vn,widthSegments:yn,heightSegments:Rn},cr=cr||1,vn=vn||1;var Bn=cr/2,Co=vn/2,Po=Math.floor(yn)||1,To=Math.floor(Rn)||1,Io=Po+1,$l=To+1,Wl=cr/Po,Xl=vn/To,Yl,Zl,ey=[],Rm=[],ry=[],_g=[];for(Zl=0;Zl<$l;Zl++){var ty=Zl*Xl-Co;for(Yl=0;Yl<Io;Yl++){var ny=Yl*Wl-Bn;Rm.push(ny,-ty,0),ry.push(0,0,1),_g.push(Yl/Po),_g.push(1-Zl/To)}}for(Zl=0;Zl<To;Zl++)for(Yl=0;Yl<Po;Yl++){var iy=Yl+Io*Zl,oy=Yl+Io*(Zl+1),ay=Yl+1+Io*(Zl+1),uy=Yl+1+Io*Zl;ey.push(iy,oy,uy),ey.push(oy,ay,uy)}this.setIndex(ey),this.setAttribute("position",new Float32BufferAttribute(Rm,3)),this.setAttribute("normal",new Float32BufferAttribute(ry,3)),this.setAttribute("uv",new Float32BufferAttribute(_g,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(cr,vn,yn,Rn){var Bn=new Color(0),Co=0,Po,To,Io=null,$l=0,Wl=null;function Xl(Zl,ey,Rm,ry){var _g=ey.background,ty=cr.xr,ny=ty.getSession&&ty.getSession();if(ny&&ny.environmentBlendMode==="additive"&&(_g=null),_g===null?Yl(Bn,Co):_g&&_g.isColor&&(Yl(_g,1),ry=!0),(cr.autoClear||ry)&&cr.clear(cr.autoClearColor,cr.autoClearDepth,cr.autoClearStencil),_g&&(_g.isCubeTexture||_g.isWebGLCubeRenderTarget||_g.mapping===CubeUVReflectionMapping)){To===void 0&&(To=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),To.geometry.deleteAttribute("normal"),To.geometry.deleteAttribute("uv"),To.onBeforeRender=function(oy,ay,uy){this.matrixWorld.copyPosition(uy.matrixWorld)},Object.defineProperty(To.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),yn.update(To));var iy=_g.isWebGLCubeRenderTarget?_g.texture:_g;To.material.uniforms.envMap.value=iy,To.material.uniforms.flipEnvMap.value=iy.isCubeTexture?-1:1,(Io!==_g||$l!==iy.version||Wl!==cr.toneMapping)&&(To.material.needsUpdate=!0,Io=_g,$l=iy.version,Wl=cr.toneMapping),Zl.unshift(To,To.geometry,To.material,0,0,null)}else _g&&_g.isTexture&&(Po===void 0&&(Po=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Po.geometry.deleteAttribute("normal"),Object.defineProperty(Po.material,"map",{get:function(){return this.uniforms.t2D.value}}),yn.update(Po)),Po.material.uniforms.t2D.value=_g,_g.matrixAutoUpdate===!0&&_g.updateMatrix(),Po.material.uniforms.uvTransform.value.copy(_g.matrix),(Io!==_g||$l!==_g.version||Wl!==cr.toneMapping)&&(Po.material.needsUpdate=!0,Io=_g,$l=_g.version,Wl=cr.toneMapping),Zl.unshift(Po,Po.geometry,Po.material,0,0,null))}function Yl(Zl,ey){vn.buffers.color.setClear(Zl.r,Zl.g,Zl.b,ey,Rn)}return{getClearColor:function(){return Bn},setClearColor:function(Zl,ey){Bn.set(Zl),Co=ey!==void 0?ey:1,Yl(Bn,Co)},getClearAlpha:function(){return Co},setClearAlpha:function(Zl){Co=Zl,Yl(Bn,Co)},render:Xl}}function WebGLBufferRenderer(cr,vn,yn,Rn){var Bn=Rn.isWebGL2,Co;function Po($l){Co=$l}function To($l,Wl){cr.drawArrays(Co,$l,Wl),yn.update(Wl,Co)}function Io($l,Wl,Xl,Yl){if(Yl!==0){var Zl,ey;if(Bn)Zl=cr,ey="drawArraysInstanced";else if(Zl=vn.get("ANGLE_instanced_arrays"),ey="drawArraysInstancedANGLE",Zl===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Zl[ey](Co,Wl,Xl,Yl),yn.update(Xl,Co,Yl)}}this.setMode=Po,this.render=To,this.renderInstances=Io}function WebGLCapabilities(cr,vn,yn){var Rn;function Bn(){if(Rn!==void 0)return Rn;var ay=vn.get("EXT_texture_filter_anisotropic");return ay!==null?Rn=cr.getParameter(ay.MAX_TEXTURE_MAX_ANISOTROPY_EXT):Rn=0,Rn}function Co(ay){if(ay==="highp"){if(cr.getShaderPrecisionFormat(35633,36338).precision>0&&cr.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ay="mediump"}return ay==="mediump"&&cr.getShaderPrecisionFormat(35633,36337).precision>0&&cr.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Po=typeof WebGL2RenderingContext!="undefined"&&cr instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&cr instanceof WebGL2ComputeRenderingContext,To=yn.precision!==void 0?yn.precision:"highp",Io=Co(To);Io!==To&&(console.warn("THREE.WebGLRenderer:",To,"not supported, using",Io,"instead."),To=Io);var $l=yn.logarithmicDepthBuffer===!0,Wl=cr.getParameter(34930),Xl=cr.getParameter(35660),Yl=cr.getParameter(3379),Zl=cr.getParameter(34076),ey=cr.getParameter(34921),Rm=cr.getParameter(36347),ry=cr.getParameter(36348),_g=cr.getParameter(36349),ty=Xl>0,ny=Po||!!vn.get("OES_texture_float"),iy=ty&&ny,oy=Po?cr.getParameter(36183):0;return{isWebGL2:Po,getMaxAnisotropy:Bn,getMaxPrecision:Co,precision:To,logarithmicDepthBuffer:$l,maxTextures:Wl,maxVertexTextures:Xl,maxTextureSize:Yl,maxCubemapSize:Zl,maxAttributes:ey,maxVertexUniforms:Rm,maxVaryings:ry,maxFragmentUniforms:_g,vertexTextures:ty,floatFragmentTextures:ny,floatVertexTextures:iy,maxSamples:oy}}function WebGLClipping(){var cr=this,vn=null,yn=0,Rn=!1,Bn=!1,Co=new Plane,Po=new Matrix3,To={value:null,needsUpdate:!1};this.uniform=To,this.numPlanes=0,this.numIntersection=0,this.init=function(Wl,Xl,Yl){var Zl=Wl.length!==0||Xl||yn!==0||Rn;return Rn=Xl,vn=$l(Wl,Yl,0),yn=Wl.length,Zl},this.beginShadows=function(){Bn=!0,$l(null)},this.endShadows=function(){Bn=!1,Io()},this.setState=function(Wl,Xl,Yl,Zl,ey,Rm){if(!Rn||Wl===null||Wl.length===0||Bn&&!Yl)Bn?$l(null):Io();else{var ry=Bn?0:yn,_g=ry*4,ty=ey.clippingState||null;To.value=ty,ty=$l(Wl,Zl,_g,Rm);for(var ny=0;ny!==_g;++ny)ty[ny]=vn[ny];ey.clippingState=ty,this.numIntersection=Xl?this.numPlanes:0,this.numPlanes+=ry}};function Io(){To.value!==vn&&(To.value=vn,To.needsUpdate=yn>0),cr.numPlanes=yn,cr.numIntersection=0}function $l(Wl,Xl,Yl,Zl){var ey=Wl!==null?Wl.length:0,Rm=null;if(ey!==0){if(Rm=To.value,Zl!==!0||Rm===null){var ry=Yl+ey*4,_g=Xl.matrixWorldInverse;Po.getNormalMatrix(_g),(Rm===null||Rm.length<ry)&&(Rm=new Float32Array(ry));for(var ty=0,ny=Yl;ty!==ey;++ty,ny+=4)Co.copy(Wl[ty]).applyMatrix4(_g,Po),Co.normal.toArray(Rm,ny),Rm[ny+3]=Co.constant}To.value=Rm,To.needsUpdate=!0}return cr.numPlanes=ey,cr.numIntersection=0,Rm}}function WebGLExtensions(cr){var vn={};return{get:function(yn){if(vn[yn]!==void 0)return vn[yn];var Rn;switch(yn){case"WEBGL_depth_texture":Rn=cr.getExtension("WEBGL_depth_texture")||cr.getExtension("MOZ_WEBGL_depth_texture")||cr.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Rn=cr.getExtension("EXT_texture_filter_anisotropic")||cr.getExtension("MOZ_EXT_texture_filter_anisotropic")||cr.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Rn=cr.getExtension("WEBGL_compressed_texture_s3tc")||cr.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||cr.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Rn=cr.getExtension("WEBGL_compressed_texture_pvrtc")||cr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Rn=cr.getExtension(yn)}return Rn===null&&console.warn("THREE.WebGLRenderer: "+yn+" extension not supported."),vn[yn]=Rn,Rn}}}function WebGLGeometries(cr,vn,yn){var Rn=new WeakMap,Bn=new WeakMap;function Co(Wl){var Xl=Wl.target,Yl=Rn.get(Xl);Yl.index!==null&&vn.remove(Yl.index);for(var Zl in Yl.attributes)vn.remove(Yl.attributes[Zl]);Xl.removeEventListener("dispose",Co),Rn.delete(Xl);var ey=Bn.get(Yl);ey&&(vn.remove(ey),Bn.delete(Yl)),yn.memory.geometries--}function Po(Wl,Xl){var Yl=Rn.get(Xl);return Yl||(Xl.addEventListener("dispose",Co),Xl.isBufferGeometry?Yl=Xl:Xl.isGeometry&&(Xl._bufferGeometry===void 0&&(Xl._bufferGeometry=new BufferGeometry().setFromObject(Wl)),Yl=Xl._bufferGeometry),Rn.set(Xl,Yl),yn.memory.geometries++,Yl)}function To(Wl){var Xl=Wl.index,Yl=Wl.attributes;Xl!==null&&vn.update(Xl,34963);for(var Zl in Yl)vn.update(Yl[Zl],34962);var ey=Wl.morphAttributes;for(var Zl in ey)for(var Rm=ey[Zl],ry=0,_g=Rm.length;ry<_g;ry++)vn.update(Rm[ry],34962)}function Io(Wl){var Xl=[],Yl=Wl.index,Zl=Wl.attributes.position,ey=0;if(Yl!==null){var Rm=Yl.array;ey=Yl.version;for(var ry=0,_g=Rm.length;ry<_g;ry+=3){var ty=Rm[ry+0],ny=Rm[ry+1],iy=Rm[ry+2];Xl.push(ty,ny,ny,iy,iy,ty)}}else{var Rm=Zl.array;ey=Zl.version;for(var ry=0,_g=Rm.length/3-1;ry<_g;ry+=3){var ty=ry+0,ny=ry+1,iy=ry+2;Xl.push(ty,ny,ny,iy,iy,ty)}}var oy=new(arrayMax(Xl)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Xl,1);oy.version=ey,vn.update(oy,34963);var ay=Bn.get(Wl);ay&&vn.remove(ay),Bn.set(Wl,oy)}function $l(Wl){var Xl=Bn.get(Wl);if(Xl){var Yl=Wl.index;Yl!==null&&Xl.version<Yl.version&&Io(Wl)}else Io(Wl);return Bn.get(Wl)}return{get:Po,update:To,getWireframeAttribute:$l}}function WebGLIndexedBufferRenderer(cr,vn,yn,Rn){var Bn=Rn.isWebGL2,Co;function Po(Yl){Co=Yl}var To,Io;function $l(Yl){To=Yl.type,Io=Yl.bytesPerElement}function Wl(Yl,Zl){cr.drawElements(Co,Zl,To,Yl*Io),yn.update(Zl,Co)}function Xl(Yl,Zl,ey,Rm){if(Rm!==0){var ry,_g;if(Bn)ry=cr,_g="drawElementsInstanced";else if(ry=vn.get("ANGLE_instanced_arrays"),_g="drawElementsInstancedANGLE",ry===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ry[_g](Co,ey,To,Zl*Io,Rm),yn.update(ey,Co,Rm)}}this.setMode=Po,this.setIndex=$l,this.render=Wl,this.renderInstances=Xl}function WebGLInfo(cr){var vn={geometries:0,textures:0},yn={frame:0,calls:0,triangles:0,points:0,lines:0};function Rn(Co,Po,To){switch(To=To||1,yn.calls++,Po){case 4:yn.triangles+=To*(Co/3);break;case 1:yn.lines+=To*(Co/2);break;case 3:yn.lines+=To*(Co-1);break;case 2:yn.lines+=To*Co;break;case 0:yn.points+=To*Co;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Po);break}}function Bn(){yn.frame++,yn.calls=0,yn.triangles=0,yn.points=0,yn.lines=0}return{memory:vn,render:yn,programs:null,autoReset:!0,reset:Bn,update:Rn}}function absNumericalSort(cr,vn){return Math.abs(vn[1])-Math.abs(cr[1])}function WebGLMorphtargets(cr){var vn={},yn=new Float32Array(8);function Rn(Bn,Co,Po,To){var Io=Bn.morphTargetInfluences,$l=Io===void 0?0:Io.length,Wl=vn[Co.id];if(Wl===void 0){Wl=[];for(var Xl=0;Xl<$l;Xl++)Wl[Xl]=[Xl,0];vn[Co.id]=Wl}for(var Yl=Po.morphTargets&&Co.morphAttributes.position,Zl=Po.morphNormals&&Co.morphAttributes.normal,Xl=0;Xl<$l;Xl++){var ey=Wl[Xl];ey[1]!==0&&(Yl&&Co.deleteAttribute("morphTarget"+Xl),Zl&&Co.deleteAttribute("morphNormal"+Xl))}for(var Xl=0;Xl<$l;Xl++){var ey=Wl[Xl];ey[0]=Xl,ey[1]=Io[Xl]}Wl.sort(absNumericalSort);for(var Rm=0,Xl=0;Xl<8;Xl++){var ey=Wl[Xl];if(ey){var ry=ey[0],_g=ey[1];if(_g){Yl&&Co.setAttribute("morphTarget"+Xl,Yl[ry]),Zl&&Co.setAttribute("morphNormal"+Xl,Zl[ry]),yn[Xl]=_g,Rm+=_g;continue}}yn[Xl]=0}var ty=Co.morphTargetsRelative?1:1-Rm;To.getUniforms().setValue(cr,"morphTargetBaseInfluence",ty),To.getUniforms().setValue(cr,"morphTargetInfluences",yn)}return{update:Rn}}function WebGLObjects(cr,vn,yn,Rn){var Bn=new WeakMap;function Co(To){var Io=Rn.render.frame,$l=To.geometry,Wl=vn.get(To,$l);return Bn.get(Wl)!==Io&&($l.isGeometry&&Wl.updateFromObject(To),vn.update(Wl),Bn.set(Wl,Io)),To.isInstancedMesh&&yn.update(To.instanceMatrix,34962),Wl}function Po(){Bn=new WeakMap}return{update:Co,dispose:Po}}function CubeTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l){cr=cr!==void 0?cr:[],vn=vn!==void 0?vn:CubeReflectionMapping,Po=Po!==void 0?Po:RGBFormat,Texture.call(this,cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(cr){this.image=cr}});function DataTexture2DArray(cr,vn,yn,Rn){Texture.call(this,null),this.image={data:cr||null,width:vn||1,height:yn||1,depth:Rn||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(cr,vn,yn,Rn){Texture.call(this,null),this.image={data:cr||null,width:vn||1,height:yn||1,depth:Rn||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(cr,vn,yn){var Rn=cr[0];if(Rn<=0||Rn>0)return cr;var Bn=vn*yn,Co=arrayCacheF32[Bn];if(Co===void 0&&(Co=new Float32Array(Bn),arrayCacheF32[Bn]=Co),vn!==0){Rn.toArray(Co,0);for(var Po=1,To=0;Po!==vn;++Po)To+=yn,cr[Po].toArray(Co,To)}return Co}function arraysEqual(cr,vn){if(cr.length!==vn.length)return!1;for(var yn=0,Rn=cr.length;yn<Rn;yn++)if(cr[yn]!==vn[yn])return!1;return!0}function copyArray(cr,vn){for(var yn=0,Rn=vn.length;yn<Rn;yn++)cr[yn]=vn[yn]}function allocTexUnits(cr,vn){var yn=arrayCacheI32[vn];yn===void 0&&(yn=new Int32Array(vn),arrayCacheI32[vn]=yn);for(var Rn=0;Rn!==vn;++Rn)yn[Rn]=cr.allocateTextureUnit();return yn}function setValueV1f(cr,vn){var yn=this.cache;yn[0]!==vn&&(cr.uniform1f(this.addr,vn),yn[0]=vn)}function setValueV2f(cr,vn){var yn=this.cache;if(vn.x!==void 0)(yn[0]!==vn.x||yn[1]!==vn.y)&&(cr.uniform2f(this.addr,vn.x,vn.y),yn[0]=vn.x,yn[1]=vn.y);else{if(arraysEqual(yn,vn))return;cr.uniform2fv(this.addr,vn),copyArray(yn,vn)}}function setValueV3f(cr,vn){var yn=this.cache;if(vn.x!==void 0)(yn[0]!==vn.x||yn[1]!==vn.y||yn[2]!==vn.z)&&(cr.uniform3f(this.addr,vn.x,vn.y,vn.z),yn[0]=vn.x,yn[1]=vn.y,yn[2]=vn.z);else if(vn.r!==void 0)(yn[0]!==vn.r||yn[1]!==vn.g||yn[2]!==vn.b)&&(cr.uniform3f(this.addr,vn.r,vn.g,vn.b),yn[0]=vn.r,yn[1]=vn.g,yn[2]=vn.b);else{if(arraysEqual(yn,vn))return;cr.uniform3fv(this.addr,vn),copyArray(yn,vn)}}function setValueV4f(cr,vn){var yn=this.cache;if(vn.x!==void 0)(yn[0]!==vn.x||yn[1]!==vn.y||yn[2]!==vn.z||yn[3]!==vn.w)&&(cr.uniform4f(this.addr,vn.x,vn.y,vn.z,vn.w),yn[0]=vn.x,yn[1]=vn.y,yn[2]=vn.z,yn[3]=vn.w);else{if(arraysEqual(yn,vn))return;cr.uniform4fv(this.addr,vn),copyArray(yn,vn)}}function setValueM2(cr,vn){var yn=this.cache,Rn=vn.elements;if(Rn===void 0){if(arraysEqual(yn,vn))return;cr.uniformMatrix2fv(this.addr,!1,vn),copyArray(yn,vn)}else{if(arraysEqual(yn,Rn))return;mat2array.set(Rn),cr.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(yn,Rn)}}function setValueM3(cr,vn){var yn=this.cache,Rn=vn.elements;if(Rn===void 0){if(arraysEqual(yn,vn))return;cr.uniformMatrix3fv(this.addr,!1,vn),copyArray(yn,vn)}else{if(arraysEqual(yn,Rn))return;mat3array.set(Rn),cr.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(yn,Rn)}}function setValueM4(cr,vn){var yn=this.cache,Rn=vn.elements;if(Rn===void 0){if(arraysEqual(yn,vn))return;cr.uniformMatrix4fv(this.addr,!1,vn),copyArray(yn,vn)}else{if(arraysEqual(yn,Rn))return;mat4array.set(Rn),cr.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(yn,Rn)}}function setValueT1(cr,vn,yn){var Rn=this.cache,Bn=yn.allocateTextureUnit();Rn[0]!==Bn&&(cr.uniform1i(this.addr,Bn),Rn[0]=Bn),yn.safeSetTexture2D(vn||emptyTexture,Bn)}function setValueT2DArray1(cr,vn,yn){var Rn=this.cache,Bn=yn.allocateTextureUnit();Rn[0]!==Bn&&(cr.uniform1i(this.addr,Bn),Rn[0]=Bn),yn.setTexture2DArray(vn||emptyTexture2dArray,Bn)}function setValueT3D1(cr,vn,yn){var Rn=this.cache,Bn=yn.allocateTextureUnit();Rn[0]!==Bn&&(cr.uniform1i(this.addr,Bn),Rn[0]=Bn),yn.setTexture3D(vn||emptyTexture3d,Bn)}function setValueT6(cr,vn,yn){var Rn=this.cache,Bn=yn.allocateTextureUnit();Rn[0]!==Bn&&(cr.uniform1i(this.addr,Bn),Rn[0]=Bn),yn.safeSetTextureCube(vn||emptyCubeTexture,Bn)}function setValueV1i(cr,vn){var yn=this.cache;yn[0]!==vn&&(cr.uniform1i(this.addr,vn),yn[0]=vn)}function setValueV2i(cr,vn){var yn=this.cache;arraysEqual(yn,vn)||(cr.uniform2iv(this.addr,vn),copyArray(yn,vn))}function setValueV3i(cr,vn){var yn=this.cache;arraysEqual(yn,vn)||(cr.uniform3iv(this.addr,vn),copyArray(yn,vn))}function setValueV4i(cr,vn){var yn=this.cache;arraysEqual(yn,vn)||(cr.uniform4iv(this.addr,vn),copyArray(yn,vn))}function setValueV1ui(cr,vn){var yn=this.cache;yn[0]!==vn&&(cr.uniform1ui(this.addr,vn),yn[0]=vn)}function getSingularSetter(cr){switch(cr){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(cr,vn){cr.uniform1fv(this.addr,vn)}function setValueV1iArray(cr,vn){cr.uniform1iv(this.addr,vn)}function setValueV2iArray(cr,vn){cr.uniform2iv(this.addr,vn)}function setValueV3iArray(cr,vn){cr.uniform3iv(this.addr,vn)}function setValueV4iArray(cr,vn){cr.uniform4iv(this.addr,vn)}function setValueV2fArray(cr,vn){var yn=flatten(vn,this.size,2);cr.uniform2fv(this.addr,yn)}function setValueV3fArray(cr,vn){var yn=flatten(vn,this.size,3);cr.uniform3fv(this.addr,yn)}function setValueV4fArray(cr,vn){var yn=flatten(vn,this.size,4);cr.uniform4fv(this.addr,yn)}function setValueM2Array(cr,vn){var yn=flatten(vn,this.size,4);cr.uniformMatrix2fv(this.addr,!1,yn)}function setValueM3Array(cr,vn){var yn=flatten(vn,this.size,9);cr.uniformMatrix3fv(this.addr,!1,yn)}function setValueM4Array(cr,vn){var yn=flatten(vn,this.size,16);cr.uniformMatrix4fv(this.addr,!1,yn)}function setValueT1Array(cr,vn,yn){var Rn=vn.length,Bn=allocTexUnits(yn,Rn);cr.uniform1iv(this.addr,Bn);for(var Co=0;Co!==Rn;++Co)yn.safeSetTexture2D(vn[Co]||emptyTexture,Bn[Co])}function setValueT6Array(cr,vn,yn){var Rn=vn.length,Bn=allocTexUnits(yn,Rn);cr.uniform1iv(this.addr,Bn);for(var Co=0;Co!==Rn;++Co)yn.safeSetTextureCube(vn[Co]||emptyCubeTexture,Bn[Co])}function getPureArraySetter(cr){switch(cr){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(cr,vn,yn){this.id=cr,this.addr=yn,this.cache=[],this.setValue=getSingularSetter(vn.type)}function PureArrayUniform(cr,vn,yn){this.id=cr,this.addr=yn,this.cache=[],this.size=vn.size,this.setValue=getPureArraySetter(vn.type)}PureArrayUniform.prototype.updateCache=function(cr){var vn=this.cache;cr instanceof Float32Array&&vn.length!==cr.length&&(this.cache=new Float32Array(cr.length)),copyArray(vn,cr)};function StructuredUniform(cr){this.id=cr,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(cr,vn,yn){for(var Rn=this.seq,Bn=0,Co=Rn.length;Bn!==Co;++Bn){var Po=Rn[Bn];Po.setValue(cr,vn[Po.id],yn)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(cr,vn){cr.seq.push(vn),cr.map[vn.id]=vn}function parseUniform(cr,vn,yn){var Rn=cr.name,Bn=Rn.length;for(RePathPart.lastIndex=0;;){var Co=RePathPart.exec(Rn),Po=RePathPart.lastIndex,To=Co[1],Io=Co[2]==="]",$l=Co[3];if(Io&&(To=To|0),$l===void 0||$l==="["&&Po+2===Bn){addUniform(yn,$l===void 0?new SingleUniform(To,cr,vn):new PureArrayUniform(To,cr,vn));break}else{var Wl=yn.map,Xl=Wl[To];Xl===void 0&&(Xl=new StructuredUniform(To),addUniform(yn,Xl)),yn=Xl}}}function WebGLUniforms(cr,vn){this.seq=[],this.map={};for(var yn=cr.getProgramParameter(vn,35718),Rn=0;Rn<yn;++Rn){var Bn=cr.getActiveUniform(vn,Rn),Co=cr.getUniformLocation(vn,Bn.name);parseUniform(Bn,Co,this)}}WebGLUniforms.prototype.setValue=function(cr,vn,yn,Rn){var Bn=this.map[vn];Bn!==void 0&&Bn.setValue(cr,yn,Rn)};WebGLUniforms.prototype.setOptional=function(cr,vn,yn){var Rn=vn[yn];Rn!==void 0&&this.setValue(cr,yn,Rn)};WebGLUniforms.upload=function(cr,vn,yn,Rn){for(var Bn=0,Co=vn.length;Bn!==Co;++Bn){var Po=vn[Bn],To=yn[Po.id];To.needsUpdate!==!1&&Po.setValue(cr,To.value,Rn)}};WebGLUniforms.seqWithValue=function(cr,vn){for(var yn=[],Rn=0,Bn=cr.length;Rn!==Bn;++Rn){var Co=cr[Rn];Co.id in vn&&yn.push(Co)}return yn};function WebGLShader(cr,vn,yn){var Rn=cr.createShader(vn);return cr.shaderSource(Rn,yn),cr.compileShader(Rn),Rn}var programIdCount=0;function addLineNumbers(cr){for(var vn=cr.split(`
`),yn=0;yn<vn.length;yn++)vn[yn]=yn+1+": "+vn[yn];return vn.join(`
`)}function getEncodingComponents(cr){switch(cr){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+cr)}}function getShaderErrors(cr,vn,yn){var Rn=cr.getShaderParameter(vn,35713),Bn=cr.getShaderInfoLog(vn).trim();if(Rn&&Bn==="")return"";var Co=cr.getShaderSource(vn);return"THREE.WebGLShader: gl.getShaderInfoLog() "+yn+`
`+Bn+addLineNumbers(Co)}function getTexelDecodingFunction(cr,vn){var yn=getEncodingComponents(vn);return"vec4 "+cr+"( vec4 value ) { return "+yn[0]+"ToLinear"+yn[1]+"; }"}function getTexelEncodingFunction(cr,vn){var yn=getEncodingComponents(vn);return"vec4 "+cr+"( vec4 value ) { return LinearTo"+yn[0]+yn[1]+"; }"}function getToneMappingFunction(cr,vn){var yn;switch(vn){case LinearToneMapping:yn="Linear";break;case ReinhardToneMapping:yn="Reinhard";break;case Uncharted2ToneMapping:yn="Uncharted2";break;case CineonToneMapping:yn="OptimizedCineon";break;case ACESFilmicToneMapping:yn="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+vn)}return"vec3 "+cr+"( vec3 color ) { return "+yn+"ToneMapping( color ); }"}function generateExtensions(cr){var vn=[cr.extensionDerivatives||cr.envMapCubeUV||cr.bumpMap||cr.tangentSpaceNormalMap||cr.clearcoatNormalMap||cr.flatShading||cr.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(cr.extensionFragDepth||cr.logarithmicDepthBuffer)&&cr.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",cr.extensionDrawBuffers&&cr.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(cr.extensionShaderTextureLOD||cr.envMap)&&cr.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return vn.filter(filterEmptyLine).join(`
`)}function generateDefines(cr){var vn=[];for(var yn in cr){var Rn=cr[yn];Rn!==!1&&vn.push("#define "+yn+" "+Rn)}return vn.join(`
`)}function fetchAttributeLocations(cr,vn){for(var yn={},Rn=cr.getProgramParameter(vn,35721),Bn=0;Bn<Rn;Bn++){var Co=cr.getActiveAttrib(vn,Bn),Po=Co.name;yn[Po]=cr.getAttribLocation(vn,Po)}return yn}function filterEmptyLine(cr){return cr!==""}function replaceLightNums(cr,vn){return cr.replace(/NUM_DIR_LIGHTS/g,vn.numDirLights).replace(/NUM_SPOT_LIGHTS/g,vn.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,vn.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,vn.numPointLights).replace(/NUM_HEMI_LIGHTS/g,vn.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,vn.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,vn.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,vn.numPointLightShadows)}function replaceClippingPlaneNums(cr,vn){return cr.replace(/NUM_CLIPPING_PLANES/g,vn.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,vn.numClippingPlanes-vn.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(cr){return cr.replace(includePattern,includeReplacer)}function includeReplacer(cr,vn){var yn=ShaderChunk[vn];if(yn===void 0)throw new Error("Can not resolve #include <"+vn+">");return resolveIncludes(yn)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(cr){return cr.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(cr,vn,yn,Rn){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(cr,vn,yn,Rn)}function loopReplacer(cr,vn,yn,Rn){for(var Bn="",Co=parseInt(vn);Co<parseInt(yn);Co++)Bn+=Rn.replace(/\[ i \]/g,"[ "+Co+" ]").replace(/UNROLLED_LOOP_INDEX/g,Co);return Bn}function generatePrecision(cr){var vn="precision "+cr.precision+` float;
precision `+cr.precision+" int;";return cr.precision==="highp"?vn+=`
#define HIGH_PRECISION`:cr.precision==="mediump"?vn+=`
#define MEDIUM_PRECISION`:cr.precision==="lowp"&&(vn+=`
#define LOW_PRECISION`),vn}function generateShadowMapTypeDefine(cr){var vn="SHADOWMAP_TYPE_BASIC";return cr.shadowMapType===PCFShadowMap?vn="SHADOWMAP_TYPE_PCF":cr.shadowMapType===PCFSoftShadowMap?vn="SHADOWMAP_TYPE_PCF_SOFT":cr.shadowMapType===VSMShadowMap&&(vn="SHADOWMAP_TYPE_VSM"),vn}function generateEnvMapTypeDefine(cr){var vn="ENVMAP_TYPE_CUBE";if(cr.envMap)switch(cr.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:vn="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:vn="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:vn="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:vn="ENVMAP_TYPE_SPHERE";break}return vn}function generateEnvMapModeDefine(cr){var vn="ENVMAP_MODE_REFLECTION";if(cr.envMap)switch(cr.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:vn="ENVMAP_MODE_REFRACTION";break}return vn}function generateEnvMapBlendingDefine(cr){var vn="ENVMAP_BLENDING_NONE";if(cr.envMap)switch(cr.combine){case MultiplyOperation:vn="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:vn="ENVMAP_BLENDING_MIX";break;case AddOperation:vn="ENVMAP_BLENDING_ADD";break}return vn}function WebGLProgram(cr,vn,yn){var Rn=cr.getContext(),Bn=yn.defines,Co=yn.vertexShader,Po=yn.fragmentShader,To=generateShadowMapTypeDefine(yn),Io=generateEnvMapTypeDefine(yn),$l=generateEnvMapModeDefine(yn),Wl=generateEnvMapBlendingDefine(yn),Xl=cr.gammaFactor>0?cr.gammaFactor:1,Yl=yn.isWebGL2?"":generateExtensions(yn),Zl=generateDefines(Bn),ey=Rn.createProgram(),Rm,ry;if(yn.isRawShaderMaterial?(Rm=[Zl].filter(filterEmptyLine).join(`
`),Rm.length>0&&(Rm+=`
`),ry=[Yl,Zl].filter(filterEmptyLine).join(`
`),ry.length>0&&(ry+=`
`)):(Rm=[generatePrecision(yn),"#define SHADER_NAME "+yn.shaderName,Zl,yn.instancing?"#define USE_INSTANCING":"",yn.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Xl,"#define MAX_BONES "+yn.maxBones,yn.useFog&&yn.fog?"#define USE_FOG":"",yn.useFog&&yn.fogExp2?"#define FOG_EXP2":"",yn.map?"#define USE_MAP":"",yn.envMap?"#define USE_ENVMAP":"",yn.envMap?"#define "+$l:"",yn.lightMap?"#define USE_LIGHTMAP":"",yn.aoMap?"#define USE_AOMAP":"",yn.emissiveMap?"#define USE_EMISSIVEMAP":"",yn.bumpMap?"#define USE_BUMPMAP":"",yn.normalMap?"#define USE_NORMALMAP":"",yn.normalMap&&yn.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",yn.normalMap&&yn.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",yn.clearcoatMap?"#define USE_CLEARCOATMAP":"",yn.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",yn.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",yn.displacementMap&&yn.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",yn.specularMap?"#define USE_SPECULARMAP":"",yn.roughnessMap?"#define USE_ROUGHNESSMAP":"",yn.metalnessMap?"#define USE_METALNESSMAP":"",yn.alphaMap?"#define USE_ALPHAMAP":"",yn.vertexTangents?"#define USE_TANGENT":"",yn.vertexColors?"#define USE_COLOR":"",yn.vertexUvs?"#define USE_UV":"",yn.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",yn.flatShading?"#define FLAT_SHADED":"",yn.skinning?"#define USE_SKINNING":"",yn.useVertexTexture?"#define BONE_TEXTURE":"",yn.morphTargets?"#define USE_MORPHTARGETS":"",yn.morphNormals&&yn.flatShading===!1?"#define USE_MORPHNORMALS":"",yn.doubleSided?"#define DOUBLE_SIDED":"",yn.flipSided?"#define FLIP_SIDED":"",yn.shadowMapEnabled?"#define USE_SHADOWMAP":"",yn.shadowMapEnabled?"#define "+To:"",yn.sizeAttenuation?"#define USE_SIZEATTENUATION":"",yn.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",yn.logarithmicDepthBuffer&&yn.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ry=[Yl,generatePrecision(yn),"#define SHADER_NAME "+yn.shaderName,Zl,yn.alphaTest?"#define ALPHATEST "+yn.alphaTest+(yn.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Xl,yn.useFog&&yn.fog?"#define USE_FOG":"",yn.useFog&&yn.fogExp2?"#define FOG_EXP2":"",yn.map?"#define USE_MAP":"",yn.matcap?"#define USE_MATCAP":"",yn.envMap?"#define USE_ENVMAP":"",yn.envMap?"#define "+Io:"",yn.envMap?"#define "+$l:"",yn.envMap?"#define "+Wl:"",yn.lightMap?"#define USE_LIGHTMAP":"",yn.aoMap?"#define USE_AOMAP":"",yn.emissiveMap?"#define USE_EMISSIVEMAP":"",yn.bumpMap?"#define USE_BUMPMAP":"",yn.normalMap?"#define USE_NORMALMAP":"",yn.normalMap&&yn.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",yn.normalMap&&yn.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",yn.clearcoatMap?"#define USE_CLEARCOATMAP":"",yn.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",yn.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",yn.specularMap?"#define USE_SPECULARMAP":"",yn.roughnessMap?"#define USE_ROUGHNESSMAP":"",yn.metalnessMap?"#define USE_METALNESSMAP":"",yn.alphaMap?"#define USE_ALPHAMAP":"",yn.sheen?"#define USE_SHEEN":"",yn.vertexTangents?"#define USE_TANGENT":"",yn.vertexColors?"#define USE_COLOR":"",yn.vertexUvs?"#define USE_UV":"",yn.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",yn.gradientMap?"#define USE_GRADIENTMAP":"",yn.flatShading?"#define FLAT_SHADED":"",yn.doubleSided?"#define DOUBLE_SIDED":"",yn.flipSided?"#define FLIP_SIDED":"",yn.shadowMapEnabled?"#define USE_SHADOWMAP":"",yn.shadowMapEnabled?"#define "+To:"",yn.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",yn.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",yn.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",yn.logarithmicDepthBuffer&&yn.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(yn.extensionShaderTextureLOD||yn.envMap)&&yn.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",yn.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",yn.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",yn.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",yn.toneMapping):"",yn.dithering?"#define DITHERING":"",yn.outputEncoding||yn.mapEncoding||yn.matcapEncoding||yn.envMapEncoding||yn.emissiveMapEncoding||yn.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",yn.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",yn.mapEncoding):"",yn.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",yn.matcapEncoding):"",yn.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",yn.envMapEncoding):"",yn.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",yn.emissiveMapEncoding):"",yn.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",yn.lightMapEncoding):"",yn.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",yn.outputEncoding):"",yn.depthPacking?"#define DEPTH_PACKING "+yn.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Co=resolveIncludes(Co),Co=replaceLightNums(Co,yn),Co=replaceClippingPlaneNums(Co,yn),Po=resolveIncludes(Po),Po=replaceLightNums(Po,yn),Po=replaceClippingPlaneNums(Po,yn),Co=unrollLoops(Co),Po=unrollLoops(Po),yn.isWebGL2&&!yn.isRawShaderMaterial){var _g=!1,ty=/^\s*#version\s+300\s+es\s*\n/;yn.isShaderMaterial&&Co.match(ty)!==null&&Po.match(ty)!==null&&(_g=!0,Co=Co.replace(ty,""),Po=Po.replace(ty,"")),Rm=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Rm,ry=[`#version 300 es
`,"#define varying in",_g?"":"out highp vec4 pc_fragColor;",_g?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ry}var ny=Rm+Co,iy=ry+Po,oy=WebGLShader(Rn,35633,ny),ay=WebGLShader(Rn,35632,iy);if(Rn.attachShader(ey,oy),Rn.attachShader(ey,ay),yn.index0AttributeName!==void 0?Rn.bindAttribLocation(ey,0,yn.index0AttributeName):yn.morphTargets===!0&&Rn.bindAttribLocation(ey,0,"position"),Rn.linkProgram(ey),cr.debug.checkShaderErrors){var uy=Rn.getProgramInfoLog(ey).trim(),hy=Rn.getShaderInfoLog(oy).trim(),my=Rn.getShaderInfoLog(ay).trim(),ly=!0,sy=!0;if(Rn.getProgramParameter(ey,35714)===!1){ly=!1;var cy=getShaderErrors(Rn,oy,"vertex"),fy=getShaderErrors(Rn,ay,"fragment");console.error("THREE.WebGLProgram: shader error: ",Rn.getError(),"35715",Rn.getProgramParameter(ey,35715),"gl.getProgramInfoLog",uy,cy,fy)}else uy!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",uy):(hy===""||my==="")&&(sy=!1);sy&&(this.diagnostics={runnable:ly,programLog:uy,vertexShader:{log:hy,prefix:Rm},fragmentShader:{log:my,prefix:ry}})}Rn.deleteShader(oy),Rn.deleteShader(ay);var vy;this.getUniforms=function(){return vy===void 0&&(vy=new WebGLUniforms(Rn,ey)),vy};var dy;return this.getAttributes=function(){return dy===void 0&&(dy=fetchAttributeLocations(Rn,ey)),dy},this.destroy=function(){Rn.deleteProgram(ey),this.program=void 0},this.name=yn.shaderName,this.id=programIdCount++,this.cacheKey=vn,this.usedTimes=1,this.program=ey,this.vertexShader=oy,this.fragmentShader=ay,this}function WebGLPrograms(cr,vn,yn){var Rn=[],Bn=yn.isWebGL2,Co=yn.logarithmicDepthBuffer,Po=yn.floatVertexTextures,To=yn.precision,Io=yn.maxVertexUniforms,$l=yn.vertexTextures,Wl={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Xl=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Yl(Rm,ry){var _g;if(ry){var ty=ShaderLib[ry];_g={name:Rm.type,uniforms:UniformsUtils.clone(ty.uniforms),vertexShader:ty.vertexShader,fragmentShader:ty.fragmentShader}}else _g={name:Rm.type,uniforms:Rm.uniforms,vertexShader:Rm.vertexShader,fragmentShader:Rm.fragmentShader};return _g}function Zl(Rm){var ry=Rm.skeleton,_g=ry.bones;if(Po)return 1024;var ty=Io,ny=Math.floor((ty-20)/4),iy=Math.min(ny,_g.length);return iy<_g.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+_g.length+" bones. This GPU supports "+iy+"."),0):iy}function ey(Rm){var ry;return Rm?Rm.isTexture?ry=Rm.encoding:Rm.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ry=Rm.texture.encoding):ry=LinearEncoding,ry}this.getParameters=function(Rm,ry,_g,ty,ny,iy,oy){var ay=ty.fog,uy=Rm.isMeshStandardMaterial?ty.environment:null,hy=Rm.envMap||uy,my=Wl[Rm.type],ly=oy.isSkinnedMesh?Zl(oy):0;Rm.precision!==null&&(To=yn.getMaxPrecision(Rm.precision),To!==Rm.precision&&console.warn("THREE.WebGLProgram.getParameters:",Rm.precision,"not supported, using",To,"instead."));var sy=Yl(Rm,my);Rm.onBeforeCompile(sy,cr);var cy=cr.getRenderTarget(),fy={isWebGL2:Bn,shaderID:my,shaderName:sy.name,uniforms:sy.uniforms,vertexShader:sy.vertexShader,fragmentShader:sy.fragmentShader,defines:Rm.defines,isRawShaderMaterial:Rm.isRawShaderMaterial,isShaderMaterial:Rm.isShaderMaterial,precision:To,instancing:oy.isInstancedMesh===!0,supportsVertexTextures:$l,outputEncoding:cy!==null?ey(cy.texture):cr.outputEncoding,map:!!Rm.map,mapEncoding:ey(Rm.map),matcap:!!Rm.matcap,matcapEncoding:ey(Rm.matcap),envMap:!!hy,envMapMode:hy&&hy.mapping,envMapEncoding:ey(hy),envMapCubeUV:!!hy&&(hy.mapping===CubeUVReflectionMapping||hy.mapping===CubeUVRefractionMapping),lightMap:!!Rm.lightMap,lightMapEncoding:ey(Rm.lightMap),aoMap:!!Rm.aoMap,emissiveMap:!!Rm.emissiveMap,emissiveMapEncoding:ey(Rm.emissiveMap),bumpMap:!!Rm.bumpMap,normalMap:!!Rm.normalMap,objectSpaceNormalMap:Rm.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Rm.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!Rm.clearcoatMap,clearcoatRoughnessMap:!!Rm.clearcoatRoughnessMap,clearcoatNormalMap:!!Rm.clearcoatNormalMap,displacementMap:!!Rm.displacementMap,roughnessMap:!!Rm.roughnessMap,metalnessMap:!!Rm.metalnessMap,specularMap:!!Rm.specularMap,alphaMap:!!Rm.alphaMap,gradientMap:!!Rm.gradientMap,sheen:!!Rm.sheen,combine:Rm.combine,vertexTangents:Rm.normalMap&&Rm.vertexTangents,vertexColors:Rm.vertexColors,vertexUvs:!!Rm.map||!!Rm.bumpMap||!!Rm.normalMap||!!Rm.specularMap||!!Rm.alphaMap||!!Rm.emissiveMap||!!Rm.roughnessMap||!!Rm.metalnessMap||!!Rm.clearcoatMap||!!Rm.clearcoatRoughnessMap||!!Rm.clearcoatNormalMap||!!Rm.displacementMap,uvsVertexOnly:!(!!Rm.map||!!Rm.bumpMap||!!Rm.normalMap||!!Rm.specularMap||!!Rm.alphaMap||!!Rm.emissiveMap||!!Rm.roughnessMap||!!Rm.metalnessMap||!!Rm.clearcoatNormalMap)&&!!Rm.displacementMap,fog:!!ay,useFog:Rm.fog,fogExp2:ay&&ay.isFogExp2,flatShading:Rm.flatShading,sizeAttenuation:Rm.sizeAttenuation,logarithmicDepthBuffer:Co,skinning:Rm.skinning&&ly>0,maxBones:ly,useVertexTexture:Po,morphTargets:Rm.morphTargets,morphNormals:Rm.morphNormals,maxMorphTargets:cr.maxMorphTargets,maxMorphNormals:cr.maxMorphNormals,numDirLights:ry.directional.length,numPointLights:ry.point.length,numSpotLights:ry.spot.length,numRectAreaLights:ry.rectArea.length,numHemiLights:ry.hemi.length,numDirLightShadows:ry.directionalShadowMap.length,numPointLightShadows:ry.pointShadowMap.length,numSpotLightShadows:ry.spotShadowMap.length,numClippingPlanes:ny,numClipIntersection:iy,dithering:Rm.dithering,shadowMapEnabled:cr.shadowMap.enabled&&_g.length>0,shadowMapType:cr.shadowMap.type,toneMapping:Rm.toneMapped?cr.toneMapping:NoToneMapping,physicallyCorrectLights:cr.physicallyCorrectLights,premultipliedAlpha:Rm.premultipliedAlpha,alphaTest:Rm.alphaTest,doubleSided:Rm.side===DoubleSide,flipSided:Rm.side===BackSide,depthPacking:Rm.depthPacking!==void 0?Rm.depthPacking:!1,index0AttributeName:Rm.index0AttributeName,extensionDerivatives:Rm.extensions&&Rm.extensions.derivatives,extensionFragDepth:Rm.extensions&&Rm.extensions.fragDepth,extensionDrawBuffers:Rm.extensions&&Rm.extensions.drawBuffers,extensionShaderTextureLOD:Rm.extensions&&Rm.extensions.shaderTextureLOD,rendererExtensionFragDepth:Bn||vn.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:Bn||vn.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:Bn||vn.get("EXT_shader_texture_lod")!==null,onBeforeCompile:Rm.onBeforeCompile};return fy},this.getProgramCacheKey=function(Rm){var ry=[];if(Rm.shaderID?ry.push(Rm.shaderID):(ry.push(Rm.fragmentShader),ry.push(Rm.vertexShader)),Rm.defines!==void 0)for(var _g in Rm.defines)ry.push(_g),ry.push(Rm.defines[_g]);if(Rm.isRawShaderMaterial===void 0){for(var ty=0;ty<Xl.length;ty++)ry.push(Rm[Xl[ty]]);ry.push(cr.outputEncoding),ry.push(cr.gammaFactor)}return ry.push(Rm.onBeforeCompile.toString()),ry.join()},this.acquireProgram=function(Rm,ry){for(var _g,ty=0,ny=Rn.length;ty<ny;ty++){var iy=Rn[ty];if(iy.cacheKey===ry){_g=iy,++_g.usedTimes;break}}return _g===void 0&&(_g=new WebGLProgram(cr,ry,Rm),Rn.push(_g)),_g},this.releaseProgram=function(Rm){if(--Rm.usedTimes===0){var ry=Rn.indexOf(Rm);Rn[ry]=Rn[Rn.length-1],Rn.pop(),Rm.destroy()}},this.programs=Rn}function WebGLProperties(){var cr=new WeakMap;function vn(Co){var Po=cr.get(Co);return Po===void 0&&(Po={},cr.set(Co,Po)),Po}function yn(Co){cr.delete(Co)}function Rn(Co,Po,To){cr.get(Co)[Po]=To}function Bn(){cr=new WeakMap}return{get:vn,remove:yn,update:Rn,dispose:Bn}}function painterSortStable(cr,vn){return cr.groupOrder!==vn.groupOrder?cr.groupOrder-vn.groupOrder:cr.renderOrder!==vn.renderOrder?cr.renderOrder-vn.renderOrder:cr.program!==vn.program?cr.program.id-vn.program.id:cr.material.id!==vn.material.id?cr.material.id-vn.material.id:cr.z!==vn.z?cr.z-vn.z:cr.id-vn.id}function reversePainterSortStable(cr,vn){return cr.groupOrder!==vn.groupOrder?cr.groupOrder-vn.groupOrder:cr.renderOrder!==vn.renderOrder?cr.renderOrder-vn.renderOrder:cr.z!==vn.z?vn.z-cr.z:cr.id-vn.id}function WebGLRenderList(){var cr=[],vn=0,yn=[],Rn=[],Bn={id:-1};function Co(){vn=0,yn.length=0,Rn.length=0}function Po(Xl,Yl,Zl,ey,Rm,ry){var _g=cr[vn];return _g===void 0?(_g={id:Xl.id,object:Xl,geometry:Yl,material:Zl,program:Zl.program||Bn,groupOrder:ey,renderOrder:Xl.renderOrder,z:Rm,group:ry},cr[vn]=_g):(_g.id=Xl.id,_g.object=Xl,_g.geometry=Yl,_g.material=Zl,_g.program=Zl.program||Bn,_g.groupOrder=ey,_g.renderOrder=Xl.renderOrder,_g.z=Rm,_g.group=ry),vn++,_g}function To(Xl,Yl,Zl,ey,Rm,ry){var _g=Po(Xl,Yl,Zl,ey,Rm,ry);(Zl.transparent===!0?Rn:yn).push(_g)}function Io(Xl,Yl,Zl,ey,Rm,ry){var _g=Po(Xl,Yl,Zl,ey,Rm,ry);(Zl.transparent===!0?Rn:yn).unshift(_g)}function $l(Xl,Yl){yn.length>1&&yn.sort(Xl||painterSortStable),Rn.length>1&&Rn.sort(Yl||reversePainterSortStable)}function Wl(){for(var Xl=vn,Yl=cr.length;Xl<Yl;Xl++){var Zl=cr[Xl];if(Zl.id===null)break;Zl.id=null,Zl.object=null,Zl.geometry=null,Zl.material=null,Zl.program=null,Zl.group=null}}return{opaque:yn,transparent:Rn,init:Co,push:To,unshift:Io,finish:Wl,sort:$l}}function WebGLRenderLists(){var cr=new WeakMap;function vn(Bn){var Co=Bn.target;Co.removeEventListener("dispose",vn),cr.delete(Co)}function yn(Bn,Co){var Po=cr.get(Bn),To;return Po===void 0?(To=new WebGLRenderList,cr.set(Bn,new WeakMap),cr.get(Bn).set(Co,To),Bn.addEventListener("dispose",vn)):(To=Po.get(Co),To===void 0&&(To=new WebGLRenderList,Po.set(Co,To))),To}function Rn(){cr=new WeakMap}return{get:yn,dispose:Rn}}function UniformsCache(){var cr={};return{get:function(vn){if(cr[vn.id]!==void 0)return cr[vn.id];var yn;switch(vn.type){case"DirectionalLight":yn={direction:new Vector3,color:new Color};break;case"SpotLight":yn={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":yn={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":yn={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":yn={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return cr[vn.id]=yn,yn}}}function ShadowUniformsCache(){var cr={};return{get:function(vn){if(cr[vn.id]!==void 0)return cr[vn.id];var yn;switch(vn.type){case"DirectionalLight":yn={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":yn={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":yn={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return cr[vn.id]=yn,yn}}}var nextVersion=0;function shadowCastingLightsFirst(cr,vn){return(vn.castShadow?1:0)-(cr.castShadow?1:0)}function WebGLLights(){for(var cr=new UniformsCache,vn=ShadowUniformsCache(),yn={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},Rn=0;Rn<9;Rn++)yn.probe.push(new Vector3);var Bn=new Vector3,Co=new Matrix4,Po=new Matrix4;function To(Io,$l,Wl){for(var Xl=0,Yl=0,Zl=0,ey=0;ey<9;ey++)yn.probe[ey].set(0,0,0);var Rm=0,ry=0,_g=0,ty=0,ny=0,iy=0,oy=0,ay=0,uy=Wl.matrixWorldInverse;Io.sort(shadowCastingLightsFirst);for(var ey=0,hy=Io.length;ey<hy;ey++){var my=Io[ey],ly=my.color,sy=my.intensity,cy=my.distance,fy=my.shadow&&my.shadow.map?my.shadow.map.texture:null;if(my.isAmbientLight)Xl+=ly.r*sy,Yl+=ly.g*sy,Zl+=ly.b*sy;else if(my.isLightProbe)for(var vy=0;vy<9;vy++)yn.probe[vy].addScaledVector(my.sh.coefficients[vy],sy);else if(my.isDirectionalLight){var dy=cr.get(my);if(dy.color.copy(my.color).multiplyScalar(my.intensity),dy.direction.setFromMatrixPosition(my.matrixWorld),Bn.setFromMatrixPosition(my.target.matrixWorld),dy.direction.sub(Bn),dy.direction.transformDirection(uy),my.castShadow){var Ay=my.shadow,gy=vn.get(my);gy.shadowBias=Ay.bias,gy.shadowRadius=Ay.radius,gy.shadowMapSize=Ay.mapSize,yn.directionalShadow[Rm]=gy,yn.directionalShadowMap[Rm]=fy,yn.directionalShadowMatrix[Rm]=my.shadow.matrix,iy++}yn.directional[Rm]=dy,Rm++}else if(my.isSpotLight){var dy=cr.get(my);if(dy.position.setFromMatrixPosition(my.matrixWorld),dy.position.applyMatrix4(uy),dy.color.copy(ly).multiplyScalar(sy),dy.distance=cy,dy.direction.setFromMatrixPosition(my.matrixWorld),Bn.setFromMatrixPosition(my.target.matrixWorld),dy.direction.sub(Bn),dy.direction.transformDirection(uy),dy.coneCos=Math.cos(my.angle),dy.penumbraCos=Math.cos(my.angle*(1-my.penumbra)),dy.decay=my.decay,my.castShadow){var Ay=my.shadow,gy=vn.get(my);gy.shadowBias=Ay.bias,gy.shadowRadius=Ay.radius,gy.shadowMapSize=Ay.mapSize,yn.spotShadow[_g]=gy,yn.spotShadowMap[_g]=fy,yn.spotShadowMatrix[_g]=my.shadow.matrix,ay++}yn.spot[_g]=dy,_g++}else if(my.isRectAreaLight){var dy=cr.get(my);dy.color.copy(ly).multiplyScalar(sy),dy.position.setFromMatrixPosition(my.matrixWorld),dy.position.applyMatrix4(uy),Po.identity(),Co.copy(my.matrixWorld),Co.premultiply(uy),Po.extractRotation(Co),dy.halfWidth.set(my.width*.5,0,0),dy.halfHeight.set(0,my.height*.5,0),dy.halfWidth.applyMatrix4(Po),dy.halfHeight.applyMatrix4(Po),yn.rectArea[ty]=dy,ty++}else if(my.isPointLight){var dy=cr.get(my);if(dy.position.setFromMatrixPosition(my.matrixWorld),dy.position.applyMatrix4(uy),dy.color.copy(my.color).multiplyScalar(my.intensity),dy.distance=my.distance,dy.decay=my.decay,my.castShadow){var Ay=my.shadow,gy=vn.get(my);gy.shadowBias=Ay.bias,gy.shadowRadius=Ay.radius,gy.shadowMapSize=Ay.mapSize,gy.shadowCameraNear=Ay.camera.near,gy.shadowCameraFar=Ay.camera.far,yn.pointShadow[ry]=gy,yn.pointShadowMap[ry]=fy,yn.pointShadowMatrix[ry]=my.shadow.matrix,oy++}yn.point[ry]=dy,ry++}else if(my.isHemisphereLight){var dy=cr.get(my);dy.direction.setFromMatrixPosition(my.matrixWorld),dy.direction.transformDirection(uy),dy.direction.normalize(),dy.skyColor.copy(my.color).multiplyScalar(sy),dy.groundColor.copy(my.groundColor).multiplyScalar(sy),yn.hemi[ny]=dy,ny++}}yn.ambient[0]=Xl,yn.ambient[1]=Yl,yn.ambient[2]=Zl;var wy=yn.hash;(wy.directionalLength!==Rm||wy.pointLength!==ry||wy.spotLength!==_g||wy.rectAreaLength!==ty||wy.hemiLength!==ny||wy.numDirectionalShadows!==iy||wy.numPointShadows!==oy||wy.numSpotShadows!==ay)&&(yn.directional.length=Rm,yn.spot.length=_g,yn.rectArea.length=ty,yn.point.length=ry,yn.hemi.length=ny,yn.directionalShadow.length=iy,yn.directionalShadowMap.length=iy,yn.pointShadow.length=oy,yn.pointShadowMap.length=oy,yn.spotShadow.length=ay,yn.spotShadowMap.length=ay,yn.directionalShadowMatrix.length=iy,yn.pointShadowMatrix.length=oy,yn.spotShadowMatrix.length=ay,wy.directionalLength=Rm,wy.pointLength=ry,wy.spotLength=_g,wy.rectAreaLength=ty,wy.hemiLength=ny,wy.numDirectionalShadows=iy,wy.numPointShadows=oy,wy.numSpotShadows=ay,yn.version=nextVersion++)}return{setup:To,state:yn}}function WebGLRenderState(){var cr=new WebGLLights,vn=[],yn=[];function Rn(){vn.length=0,yn.length=0}function Bn(Io){vn.push(Io)}function Co(Io){yn.push(Io)}function Po(Io){cr.setup(vn,yn,Io)}var To={lightsArray:vn,shadowsArray:yn,lights:cr};return{init:Rn,state:To,setupLights:Po,pushLight:Bn,pushShadow:Co}}function WebGLRenderStates(){var cr=new WeakMap;function vn(Bn){var Co=Bn.target;Co.removeEventListener("dispose",vn),cr.delete(Co)}function yn(Bn,Co){var Po;return cr.has(Bn)===!1?(Po=new WebGLRenderState,cr.set(Bn,new WeakMap),cr.get(Bn).set(Co,Po),Bn.addEventListener("dispose",vn)):cr.get(Bn).has(Co)===!1?(Po=new WebGLRenderState,cr.get(Bn).set(Co,Po)):Po=cr.get(Bn).get(Co),Po}function Rn(){cr=new WeakMap}return{get:yn,dispose:Rn}}function MeshDepthMaterial(cr){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(cr)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.depthPacking=cr.depthPacking,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.map=cr.map,this.alphaMap=cr.alphaMap,this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this};function MeshDistanceMaterial(cr){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(cr)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.referencePosition.copy(cr.referencePosition),this.nearDistance=cr.nearDistance,this.farDistance=cr.farDistance,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.map=cr.map,this.alphaMap=cr.alphaMap,this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(cr,vn,yn){var Rn=new Frustum,Bn=new Vector2,Co=new Vector2,Po=new Vector4,To=[],Io=[],$l={},Wl={0:BackSide,1:FrontSide,2:DoubleSide},Xl=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Yl=Xl.clone();Yl.defines.HORIZONAL_PASS=1;var Zl=new BufferGeometry;Zl.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ey=new Mesh(Zl,Xl),Rm=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(oy,ay,uy){if(Rm.enabled!==!1&&!(Rm.autoUpdate===!1&&Rm.needsUpdate===!1)&&oy.length!==0){var hy=cr.getRenderTarget(),my=cr.getActiveCubeFace(),ly=cr.getActiveMipmapLevel(),sy=cr.state;sy.setBlending(NoBlending),sy.buffers.color.setClear(1,1,1,1),sy.buffers.depth.setTest(!0),sy.setScissorTest(!1);for(var cy=0,fy=oy.length;cy<fy;cy++){var vy=oy[cy],dy=vy.shadow;if(dy===void 0){console.warn("THREE.WebGLShadowMap:",vy,"has no shadow.");continue}Bn.copy(dy.mapSize);var Ay=dy.getFrameExtents();if(Bn.multiply(Ay),Co.copy(dy.mapSize),(Bn.x>yn||Bn.y>yn)&&(Bn.x>yn&&(Co.x=Math.floor(yn/Ay.x),Bn.x=Co.x*Ay.x,dy.mapSize.x=Co.x),Bn.y>yn&&(Co.y=Math.floor(yn/Ay.y),Bn.y=Co.y*Ay.y,dy.mapSize.y=Co.y)),dy.map===null&&!dy.isPointLightShadow&&this.type===VSMShadowMap){var gy={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};dy.map=new WebGLRenderTarget(Bn.x,Bn.y,gy),dy.map.texture.name=vy.name+".shadowMap",dy.mapPass=new WebGLRenderTarget(Bn.x,Bn.y,gy),dy.camera.updateProjectionMatrix()}if(dy.map===null){var gy={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};dy.map=new WebGLRenderTarget(Bn.x,Bn.y,gy),dy.map.texture.name=vy.name+".shadowMap",dy.camera.updateProjectionMatrix()}cr.setRenderTarget(dy.map),cr.clear();for(var wy=dy.getViewportCount(),Cy=0;Cy<wy;Cy++){var My=dy.getViewport(Cy);Po.set(Co.x*My.x,Co.y*My.y,Co.x*My.z,Co.y*My.w),sy.viewport(Po),dy.updateMatrices(vy,Cy),Rn=dy.getFrustum(),iy(ay,uy,dy.camera,vy,this.type)}!dy.isPointLightShadow&&this.type===VSMShadowMap&&ry(dy,uy)}Rm.needsUpdate=!1,cr.setRenderTarget(hy,my,ly)}};function ry(oy,ay){var uy=vn.update(ey);Xl.uniforms.shadow_pass.value=oy.map.texture,Xl.uniforms.resolution.value=oy.mapSize,Xl.uniforms.radius.value=oy.radius,cr.setRenderTarget(oy.mapPass),cr.clear(),cr.renderBufferDirect(ay,null,uy,Xl,ey,null),Yl.uniforms.shadow_pass.value=oy.mapPass.texture,Yl.uniforms.resolution.value=oy.mapSize,Yl.uniforms.radius.value=oy.radius,cr.setRenderTarget(oy.map),cr.clear(),cr.renderBufferDirect(ay,null,uy,Yl,ey,null)}function _g(oy,ay,uy){var hy=oy<<0|ay<<1|uy<<2,my=To[hy];return my===void 0&&(my=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:oy,skinning:ay}),To[hy]=my),my}function ty(oy,ay,uy){var hy=oy<<0|ay<<1|uy<<2,my=Io[hy];return my===void 0&&(my=new MeshDistanceMaterial({morphTargets:oy,skinning:ay}),Io[hy]=my),my}function ny(oy,ay,uy,hy,my,ly,sy){var cy=null,fy=_g,vy=oy.customDepthMaterial;if(hy.isPointLight===!0&&(fy=ty,vy=oy.customDistanceMaterial),vy===void 0){var dy=!1;uy.morphTargets===!0&&(dy=ay.morphAttributes&&ay.morphAttributes.position&&ay.morphAttributes.position.length>0);var Ay=!1;oy.isSkinnedMesh===!0&&(uy.skinning===!0?Ay=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",oy));var gy=oy.isInstancedMesh===!0;cy=fy(dy,Ay,gy)}else cy=vy;if(cr.localClippingEnabled&&uy.clipShadows===!0&&uy.clippingPlanes.length!==0){var wy=cy.uuid,Cy=uy.uuid,My=$l[wy];My===void 0&&(My={},$l[wy]=My);var Py=My[Cy];Py===void 0&&(Py=cy.clone(),My[Cy]=Py),cy=Py}return cy.visible=uy.visible,cy.wireframe=uy.wireframe,sy===VSMShadowMap?cy.side=uy.shadowSide!==null?uy.shadowSide:uy.side:cy.side=uy.shadowSide!==null?uy.shadowSide:Wl[uy.side],cy.clipShadows=uy.clipShadows,cy.clippingPlanes=uy.clippingPlanes,cy.clipIntersection=uy.clipIntersection,cy.wireframeLinewidth=uy.wireframeLinewidth,cy.linewidth=uy.linewidth,hy.isPointLight===!0&&cy.isMeshDistanceMaterial===!0&&(cy.referencePosition.setFromMatrixPosition(hy.matrixWorld),cy.nearDistance=my,cy.farDistance=ly),cy}function iy(oy,ay,uy,hy,my){if(oy.visible!==!1){var ly=oy.layers.test(ay.layers);if(ly&&(oy.isMesh||oy.isLine||oy.isPoints)&&(oy.castShadow||oy.receiveShadow&&my===VSMShadowMap)&&(!oy.frustumCulled||Rn.intersectsObject(oy))){oy.modelViewMatrix.multiplyMatrices(uy.matrixWorldInverse,oy.matrixWorld);var sy=vn.update(oy),cy=oy.material;if(Array.isArray(cy))for(var fy=sy.groups,vy=0,dy=fy.length;vy<dy;vy++){var Ay=fy[vy],gy=cy[Ay.materialIndex];if(gy&&gy.visible){var wy=ny(oy,sy,gy,hy,uy.near,uy.far,my);cr.renderBufferDirect(uy,null,sy,wy,oy,Ay)}}else if(cy.visible){var wy=ny(oy,sy,cy,hy,uy.near,uy.far,my);cr.renderBufferDirect(uy,null,sy,wy,oy,null)}}for(var Cy=oy.children,My=0,Py=Cy.length;My<Py;My++)iy(Cy[My],ay,uy,hy,my)}}}function WebGLState(cr,vn,yn){var Rn=yn.isWebGL2;function Bn(){var Wy=!1,f1=new Vector4,m1=null,w1=new Vector4(0,0,0,0);return{setMask:function(c1){m1!==c1&&!Wy&&(cr.colorMask(c1,c1,c1,c1),m1=c1)},setLocked:function(c1){Wy=c1},setClear:function(c1,M1,L1,B1,D1){D1===!0&&(c1*=B1,M1*=B1,L1*=B1),f1.set(c1,M1,L1,B1),w1.equals(f1)===!1&&(cr.clearColor(c1,M1,L1,B1),w1.copy(f1))},reset:function(){Wy=!1,m1=null,w1.set(-1,0,0,0)}}}function Co(){var Wy=!1,f1=null,m1=null,w1=null;return{setTest:function(c1){c1?ky(2929):Ey(2929)},setMask:function(c1){f1!==c1&&!Wy&&(cr.depthMask(c1),f1=c1)},setFunc:function(c1){if(m1!==c1){if(c1)switch(c1){case NeverDepth:cr.depthFunc(512);break;case AlwaysDepth:cr.depthFunc(519);break;case LessDepth:cr.depthFunc(513);break;case LessEqualDepth:cr.depthFunc(515);break;case EqualDepth:cr.depthFunc(514);break;case GreaterEqualDepth:cr.depthFunc(518);break;case GreaterDepth:cr.depthFunc(516);break;case NotEqualDepth:cr.depthFunc(517);break;default:cr.depthFunc(515)}else cr.depthFunc(515);m1=c1}},setLocked:function(c1){Wy=c1},setClear:function(c1){w1!==c1&&(cr.clearDepth(c1),w1=c1)},reset:function(){Wy=!1,f1=null,m1=null,w1=null}}}function Po(){var Wy=!1,f1=null,m1=null,w1=null,c1=null,M1=null,L1=null,B1=null,D1=null;return{setTest:function(O1){Wy||(O1?ky(2960):Ey(2960))},setMask:function(O1){f1!==O1&&!Wy&&(cr.stencilMask(O1),f1=O1)},setFunc:function(O1,j1,k1){(m1!==O1||w1!==j1||c1!==k1)&&(cr.stencilFunc(O1,j1,k1),m1=O1,w1=j1,c1=k1)},setOp:function(O1,j1,k1){(M1!==O1||L1!==j1||B1!==k1)&&(cr.stencilOp(O1,j1,k1),M1=O1,L1=j1,B1=k1)},setLocked:function(O1){Wy=O1},setClear:function(O1){D1!==O1&&(cr.clearStencil(O1),D1=O1)},reset:function(){Wy=!1,f1=null,m1=null,w1=null,c1=null,M1=null,L1=null,B1=null,D1=null}}}var To=new Bn,Io=new Co,$l=new Po,Wl=cr.getParameter(34921),Xl=new Uint8Array(Wl),Yl=new Uint8Array(Wl),Zl=new Uint8Array(Wl),ey={},Rm=null,ry=null,_g=null,ty=null,ny=null,iy=null,oy=null,ay=null,uy=null,hy=!1,my=null,ly=null,sy=null,cy=null,fy=null,vy=cr.getParameter(35661),dy=!1,Ay=0,gy=cr.getParameter(7938);gy.indexOf("WebGL")!==-1?(Ay=parseFloat(/^WebGL\ ([0-9])/.exec(gy)[1]),dy=Ay>=1):gy.indexOf("OpenGL ES")!==-1&&(Ay=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(gy)[1]),dy=Ay>=2);var wy=null,Cy={},My=new Vector4,Py=new Vector4;function Dy(Wy,f1,m1){var w1=new Uint8Array(4),c1=cr.createTexture();cr.bindTexture(Wy,c1),cr.texParameteri(Wy,10241,9728),cr.texParameteri(Wy,10240,9728);for(var M1=0;M1<m1;M1++)cr.texImage2D(f1+M1,0,6408,1,1,0,6408,5121,w1);return c1}var qy={};qy[3553]=Dy(3553,3553,1),qy[34067]=Dy(34067,34069,6),To.setClear(0,0,0,1),Io.setClear(1),$l.setClear(0),ky(2929),Io.setFunc(LessEqualDepth),Ty(!1),Vy(CullFaceBack),ky(2884),Gy(NoBlending);function Xy(){for(var Wy=0,f1=Xl.length;Wy<f1;Wy++)Xl[Wy]=0}function $y(Wy){xy(Wy,0)}function xy(Wy,f1){if(Xl[Wy]=1,Yl[Wy]===0&&(cr.enableVertexAttribArray(Wy),Yl[Wy]=1),Zl[Wy]!==f1){var m1=Rn?cr:vn.get("ANGLE_instanced_arrays");m1[Rn?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Wy,f1),Zl[Wy]=f1}}function Ry(){for(var Wy=0,f1=Yl.length;Wy!==f1;++Wy)Yl[Wy]!==Xl[Wy]&&(cr.disableVertexAttribArray(Wy),Yl[Wy]=0)}function Ly(Wy,f1,m1,w1,c1,M1){Rn===!0&&(m1===5124||m1===5125)?cr.vertexAttribIPointer(Wy,f1,m1,w1,c1,M1):cr.vertexAttribPointer(Wy,f1,m1,w1,c1,M1)}function ky(Wy){ey[Wy]!==!0&&(cr.enable(Wy),ey[Wy]=!0)}function Ey(Wy){ey[Wy]!==!1&&(cr.disable(Wy),ey[Wy]=!1)}function Iy(Wy){return Rm!==Wy?(cr.useProgram(Wy),Rm=Wy,!0):!1}var zy={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(Rn)zy[MinEquation]=32775,zy[MaxEquation]=32776;else{var Uy=vn.get("EXT_blend_minmax");Uy!==null&&(zy[MinEquation]=Uy.MIN_EXT,zy[MaxEquation]=Uy.MAX_EXT)}var Qy={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Gy(Wy,f1,m1,w1,c1,M1,L1,B1){if(Wy===NoBlending){ry&&(Ey(3042),ry=!1);return}if(ry||(ky(3042),ry=!0),Wy!==CustomBlending){if(Wy!==_g||B1!==hy){if((ty!==AddEquation||oy!==AddEquation)&&(cr.blendEquation(32774),ty=AddEquation,oy=AddEquation),B1)switch(Wy){case NormalBlending:cr.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:cr.blendFunc(1,1);break;case SubtractiveBlending:cr.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:cr.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wy);break}else switch(Wy){case NormalBlending:cr.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:cr.blendFunc(770,1);break;case SubtractiveBlending:cr.blendFunc(0,769);break;case MultiplyBlending:cr.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wy);break}ny=null,iy=null,ay=null,uy=null,_g=Wy,hy=B1}return}c1=c1||f1,M1=M1||m1,L1=L1||w1,(f1!==ty||c1!==oy)&&(cr.blendEquationSeparate(zy[f1],zy[c1]),ty=f1,oy=c1),(m1!==ny||w1!==iy||M1!==ay||L1!==uy)&&(cr.blendFuncSeparate(Qy[m1],Qy[w1],Qy[M1],Qy[L1]),ny=m1,iy=w1,ay=M1,uy=L1),_g=Wy,hy=null}function Zy(Wy,f1){Wy.side===DoubleSide?Ey(2884):ky(2884);var m1=Wy.side===BackSide;f1&&(m1=!m1),Ty(m1),Wy.blending===NormalBlending&&Wy.transparent===!1?Gy(NoBlending):Gy(Wy.blending,Wy.blendEquation,Wy.blendSrc,Wy.blendDst,Wy.blendEquationAlpha,Wy.blendSrcAlpha,Wy.blendDstAlpha,Wy.premultipliedAlpha),Io.setFunc(Wy.depthFunc),Io.setTest(Wy.depthTest),Io.setMask(Wy.depthWrite),To.setMask(Wy.colorWrite);var w1=Wy.stencilWrite;$l.setTest(w1),w1&&($l.setMask(Wy.stencilWriteMask),$l.setFunc(Wy.stencilFunc,Wy.stencilRef,Wy.stencilFuncMask),$l.setOp(Wy.stencilFail,Wy.stencilZFail,Wy.stencilZPass)),Jy(Wy.polygonOffset,Wy.polygonOffsetFactor,Wy.polygonOffsetUnits)}function Ty(Wy){my!==Wy&&(Wy?cr.frontFace(2304):cr.frontFace(2305),my=Wy)}function Vy(Wy){Wy!==CullFaceNone?(ky(2884),Wy!==ly&&(Wy===CullFaceBack?cr.cullFace(1029):Wy===CullFaceFront?cr.cullFace(1028):cr.cullFace(1032))):Ey(2884),ly=Wy}function Yy(Wy){Wy!==sy&&(dy&&cr.lineWidth(Wy),sy=Wy)}function Jy(Wy,f1,m1){Wy?(ky(32823),(cy!==f1||fy!==m1)&&(cr.polygonOffset(f1,m1),cy=f1,fy=m1)):Ey(32823)}function Hy(Wy){Wy?ky(3089):Ey(3089)}function i1(Wy){Wy===void 0&&(Wy=33984+vy-1),wy!==Wy&&(cr.activeTexture(Wy),wy=Wy)}function u1(Wy,f1){wy===null&&i1();var m1=Cy[wy];m1===void 0&&(m1={type:void 0,texture:void 0},Cy[wy]=m1),(m1.type!==Wy||m1.texture!==f1)&&(cr.bindTexture(Wy,f1||qy[Wy]),m1.type=Wy,m1.texture=f1)}function p1(){var Wy=Cy[wy];Wy!==void 0&&Wy.type!==void 0&&(cr.bindTexture(Wy.type,null),Wy.type=void 0,Wy.texture=void 0)}function g1(){try{cr.compressedTexImage2D.apply(cr,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}}function v1(){try{cr.texImage2D.apply(cr,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}}function h1(){try{cr.texImage3D.apply(cr,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}}function l1(Wy){My.equals(Wy)===!1&&(cr.scissor(Wy.x,Wy.y,Wy.z,Wy.w),My.copy(Wy))}function o1(Wy){Py.equals(Wy)===!1&&(cr.viewport(Wy.x,Wy.y,Wy.z,Wy.w),Py.copy(Wy))}function t1(){for(var Wy=0;Wy<Yl.length;Wy++)Yl[Wy]===1&&(cr.disableVertexAttribArray(Wy),Yl[Wy]=0);ey={},wy=null,Cy={},Rm=null,_g=null,my=null,ly=null,To.reset(),Io.reset(),$l.reset()}return{buffers:{color:To,depth:Io,stencil:$l},initAttributes:Xy,enableAttribute:$y,enableAttributeAndDivisor:xy,disableUnusedAttributes:Ry,vertexAttribPointer:Ly,enable:ky,disable:Ey,useProgram:Iy,setBlending:Gy,setMaterial:Zy,setFlipSided:Ty,setCullFace:Vy,setLineWidth:Yy,setPolygonOffset:Jy,setScissorTest:Hy,activeTexture:i1,bindTexture:u1,unbindTexture:p1,compressedTexImage2D:g1,texImage2D:v1,texImage3D:h1,scissor:l1,viewport:o1,reset:t1}}function WebGLTextures(cr,vn,yn,Rn,Bn,Co,Po){var To=Bn.isWebGL2,Io=Bn.maxTextures,$l=Bn.maxCubemapSize,Wl=Bn.maxTextureSize,Xl=Bn.maxSamples,Yl=new WeakMap,Zl,ey=!1;try{ey=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Rm(Ty,Vy){return ey?new OffscreenCanvas(Ty,Vy):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function ry(Ty,Vy,Yy,Jy){var Hy=1;if((Ty.width>Jy||Ty.height>Jy)&&(Hy=Jy/Math.max(Ty.width,Ty.height)),Hy<1||Vy===!0)if(typeof HTMLImageElement!="undefined"&&Ty instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Ty instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Ty instanceof ImageBitmap){var i1=Vy?MathUtils.floorPowerOfTwo:Math.floor,u1=i1(Hy*Ty.width),p1=i1(Hy*Ty.height);Zl===void 0&&(Zl=Rm(u1,p1));var g1=Yy?Rm(u1,p1):Zl;g1.width=u1,g1.height=p1;var v1=g1.getContext("2d");return v1.drawImage(Ty,0,0,u1,p1),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ty.width+"x"+Ty.height+") to ("+u1+"x"+p1+")."),g1}else return"data"in Ty&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ty.width+"x"+Ty.height+")."),Ty;return Ty}function _g(Ty){return MathUtils.isPowerOfTwo(Ty.width)&&MathUtils.isPowerOfTwo(Ty.height)}function ty(Ty){return To?!1:Ty.wrapS!==ClampToEdgeWrapping||Ty.wrapT!==ClampToEdgeWrapping||Ty.minFilter!==NearestFilter&&Ty.minFilter!==LinearFilter}function ny(Ty,Vy){return Ty.generateMipmaps&&Vy&&Ty.minFilter!==NearestFilter&&Ty.minFilter!==LinearFilter}function iy(Ty,Vy,Yy,Jy){cr.generateMipmap(Ty);var Hy=Rn.get(Vy);Hy.__maxMipLevel=Math.log(Math.max(Yy,Jy))*Math.LOG2E}function oy(Ty,Vy,Yy){if(To===!1)return Vy;if(Ty!==null){if(cr[Ty]!==void 0)return cr[Ty];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ty+"'")}var Jy=Vy;return Vy===6403&&(Yy===5126&&(Jy=33326),Yy===5131&&(Jy=33325),Yy===5121&&(Jy=33321)),Vy===6407&&(Yy===5126&&(Jy=34837),Yy===5131&&(Jy=34843),Yy===5121&&(Jy=32849)),Vy===6408&&(Yy===5126&&(Jy=34836),Yy===5131&&(Jy=34842),Yy===5121&&(Jy=32856)),(Jy===33325||Jy===33326||Jy===34842||Jy===34836)&&vn.get("EXT_color_buffer_float"),Jy}function ay(Ty){return Ty===NearestFilter||Ty===NearestMipmapNearestFilter||Ty===NearestMipmapLinearFilter?9728:9729}function uy(Ty){var Vy=Ty.target;Vy.removeEventListener("dispose",uy),my(Vy),Vy.isVideoTexture&&Yl.delete(Vy),Po.memory.textures--}function hy(Ty){var Vy=Ty.target;Vy.removeEventListener("dispose",hy),ly(Vy),Po.memory.textures--}function my(Ty){var Vy=Rn.get(Ty);Vy.__webglInit!==void 0&&(cr.deleteTexture(Vy.__webglTexture),Rn.remove(Ty))}function ly(Ty){var Vy=Rn.get(Ty),Yy=Rn.get(Ty.texture);if(!!Ty){if(Yy.__webglTexture!==void 0&&cr.deleteTexture(Yy.__webglTexture),Ty.depthTexture&&Ty.depthTexture.dispose(),Ty.isWebGLCubeRenderTarget)for(var Jy=0;Jy<6;Jy++)cr.deleteFramebuffer(Vy.__webglFramebuffer[Jy]),Vy.__webglDepthbuffer&&cr.deleteRenderbuffer(Vy.__webglDepthbuffer[Jy]);else cr.deleteFramebuffer(Vy.__webglFramebuffer),Vy.__webglDepthbuffer&&cr.deleteRenderbuffer(Vy.__webglDepthbuffer),Vy.__webglMultisampledFramebuffer&&cr.deleteFramebuffer(Vy.__webglMultisampledFramebuffer),Vy.__webglColorRenderbuffer&&cr.deleteRenderbuffer(Vy.__webglColorRenderbuffer),Vy.__webglDepthRenderbuffer&&cr.deleteRenderbuffer(Vy.__webglDepthRenderbuffer);Rn.remove(Ty.texture),Rn.remove(Ty)}}var sy=0;function cy(){sy=0}function fy(){var Ty=sy;return Ty>=Io&&console.warn("THREE.WebGLTextures: Trying to use "+Ty+" texture units while this GPU supports only "+Io),sy+=1,Ty}function vy(Ty,Vy){var Yy=Rn.get(Ty);if(Ty.isVideoTexture&&zy(Ty),Ty.version>0&&Yy.__version!==Ty.version){var Jy=Ty.image;if(Jy===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Jy.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{qy(Yy,Ty,Vy);return}}yn.activeTexture(33984+Vy),yn.bindTexture(3553,Yy.__webglTexture)}function dy(Ty,Vy){var Yy=Rn.get(Ty);if(Ty.version>0&&Yy.__version!==Ty.version){qy(Yy,Ty,Vy);return}yn.activeTexture(33984+Vy),yn.bindTexture(35866,Yy.__webglTexture)}function Ay(Ty,Vy){var Yy=Rn.get(Ty);if(Ty.version>0&&Yy.__version!==Ty.version){qy(Yy,Ty,Vy);return}yn.activeTexture(33984+Vy),yn.bindTexture(32879,Yy.__webglTexture)}function gy(Ty,Vy){if(Ty.image.length===6){var Yy=Rn.get(Ty);if(Ty.version>0&&Yy.__version!==Ty.version){Dy(Yy,Ty),yn.activeTexture(33984+Vy),yn.bindTexture(34067,Yy.__webglTexture),cr.pixelStorei(37440,Ty.flipY);for(var Jy=Ty&&(Ty.isCompressedTexture||Ty.image[0].isCompressedTexture),Hy=Ty.image[0]&&Ty.image[0].isDataTexture,i1=[],u1=0;u1<6;u1++)!Jy&&!Hy?i1[u1]=ry(Ty.image[u1],!1,!0,$l):i1[u1]=Hy?Ty.image[u1].image:Ty.image[u1];var p1=i1[0],g1=_g(p1)||To,v1=Co.convert(Ty.format),h1=Co.convert(Ty.type),l1=oy(Ty.internalFormat,v1,h1);Py(34067,Ty,g1);var o1;if(Jy){for(var u1=0;u1<6;u1++){o1=i1[u1].mipmaps;for(var t1=0;t1<o1.length;t1++){var Wy=o1[t1];Ty.format!==RGBAFormat&&Ty.format!==RGBFormat?v1!==null?yn.compressedTexImage2D(34069+u1,t1,l1,Wy.width,Wy.height,0,Wy.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):yn.texImage2D(34069+u1,t1,l1,Wy.width,Wy.height,0,v1,h1,Wy.data)}}Yy.__maxMipLevel=o1.length-1}else{o1=Ty.mipmaps;for(var u1=0;u1<6;u1++)if(Hy){yn.texImage2D(34069+u1,0,l1,i1[u1].width,i1[u1].height,0,v1,h1,i1[u1].data);for(var t1=0;t1<o1.length;t1++){var Wy=o1[t1],f1=Wy.image[u1].image;yn.texImage2D(34069+u1,t1+1,l1,f1.width,f1.height,0,v1,h1,f1.data)}}else{yn.texImage2D(34069+u1,0,l1,v1,h1,i1[u1]);for(var t1=0;t1<o1.length;t1++){var Wy=o1[t1];yn.texImage2D(34069+u1,t1+1,l1,v1,h1,Wy.image[u1])}}Yy.__maxMipLevel=o1.length}ny(Ty,g1)&&iy(34067,Ty,p1.width,p1.height),Yy.__version=Ty.version,Ty.onUpdate&&Ty.onUpdate(Ty)}else yn.activeTexture(33984+Vy),yn.bindTexture(34067,Yy.__webglTexture)}}function wy(Ty,Vy){yn.activeTexture(33984+Vy),yn.bindTexture(34067,Rn.get(Ty).__webglTexture)}var Cy={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},My={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Py(Ty,Vy,Yy){Yy?(cr.texParameteri(Ty,10242,Cy[Vy.wrapS]),cr.texParameteri(Ty,10243,Cy[Vy.wrapT]),(Ty===32879||Ty===35866)&&cr.texParameteri(Ty,32882,Cy[Vy.wrapR]),cr.texParameteri(Ty,10240,My[Vy.magFilter]),cr.texParameteri(Ty,10241,My[Vy.minFilter])):(cr.texParameteri(Ty,10242,33071),cr.texParameteri(Ty,10243,33071),(Ty===32879||Ty===35866)&&cr.texParameteri(Ty,32882,33071),(Vy.wrapS!==ClampToEdgeWrapping||Vy.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),cr.texParameteri(Ty,10240,ay(Vy.magFilter)),cr.texParameteri(Ty,10241,ay(Vy.minFilter)),Vy.minFilter!==NearestFilter&&Vy.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Jy=vn.get("EXT_texture_filter_anisotropic");if(Jy){if(Vy.type===FloatType&&vn.get("OES_texture_float_linear")===null||Vy.type===HalfFloatType&&(To||vn.get("OES_texture_half_float_linear"))===null)return;(Vy.anisotropy>1||Rn.get(Vy).__currentAnisotropy)&&(cr.texParameterf(Ty,Jy.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Vy.anisotropy,Bn.getMaxAnisotropy())),Rn.get(Vy).__currentAnisotropy=Vy.anisotropy)}}function Dy(Ty,Vy){Ty.__webglInit===void 0&&(Ty.__webglInit=!0,Vy.addEventListener("dispose",uy),Ty.__webglTexture=cr.createTexture(),Po.memory.textures++)}function qy(Ty,Vy,Yy){var Jy=3553;Vy.isDataTexture2DArray&&(Jy=35866),Vy.isDataTexture3D&&(Jy=32879),Dy(Ty,Vy),yn.activeTexture(33984+Yy),yn.bindTexture(Jy,Ty.__webglTexture),cr.pixelStorei(37440,Vy.flipY),cr.pixelStorei(37441,Vy.premultiplyAlpha),cr.pixelStorei(3317,Vy.unpackAlignment);var Hy=ty(Vy)&&_g(Vy.image)===!1,i1=ry(Vy.image,Hy,!1,Wl),u1=_g(i1)||To,p1=Co.convert(Vy.format),g1=Co.convert(Vy.type),v1=oy(Vy.internalFormat,p1,g1);Py(Jy,Vy,u1);var h1,l1=Vy.mipmaps;if(Vy.isDepthTexture)v1=6402,To?Vy.type===FloatType?v1=36012:Vy.type===UnsignedIntType?v1=33190:Vy.type===UnsignedInt248Type?v1=35056:v1=33189:Vy.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Vy.format===DepthFormat&&v1===6402&&Vy.type!==UnsignedShortType&&Vy.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Vy.type=UnsignedShortType,g1=Co.convert(Vy.type)),Vy.format===DepthStencilFormat&&v1===6402&&(v1=34041,Vy.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Vy.type=UnsignedInt248Type,g1=Co.convert(Vy.type))),yn.texImage2D(3553,0,v1,i1.width,i1.height,0,p1,g1,null);else if(Vy.isDataTexture)if(l1.length>0&&u1){for(var o1=0,t1=l1.length;o1<t1;o1++)h1=l1[o1],yn.texImage2D(3553,o1,v1,h1.width,h1.height,0,p1,g1,h1.data);Vy.generateMipmaps=!1,Ty.__maxMipLevel=l1.length-1}else yn.texImage2D(3553,0,v1,i1.width,i1.height,0,p1,g1,i1.data),Ty.__maxMipLevel=0;else if(Vy.isCompressedTexture){for(var o1=0,t1=l1.length;o1<t1;o1++)h1=l1[o1],Vy.format!==RGBAFormat&&Vy.format!==RGBFormat?p1!==null?yn.compressedTexImage2D(3553,o1,v1,h1.width,h1.height,0,h1.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):yn.texImage2D(3553,o1,v1,h1.width,h1.height,0,p1,g1,h1.data);Ty.__maxMipLevel=l1.length-1}else if(Vy.isDataTexture2DArray)yn.texImage3D(35866,0,v1,i1.width,i1.height,i1.depth,0,p1,g1,i1.data),Ty.__maxMipLevel=0;else if(Vy.isDataTexture3D)yn.texImage3D(32879,0,v1,i1.width,i1.height,i1.depth,0,p1,g1,i1.data),Ty.__maxMipLevel=0;else if(l1.length>0&&u1){for(var o1=0,t1=l1.length;o1<t1;o1++)h1=l1[o1],yn.texImage2D(3553,o1,v1,p1,g1,h1);Vy.generateMipmaps=!1,Ty.__maxMipLevel=l1.length-1}else yn.texImage2D(3553,0,v1,p1,g1,i1),Ty.__maxMipLevel=0;ny(Vy,u1)&&iy(Jy,Vy,i1.width,i1.height),Ty.__version=Vy.version,Vy.onUpdate&&Vy.onUpdate(Vy)}function Xy(Ty,Vy,Yy,Jy){var Hy=Co.convert(Vy.texture.format),i1=Co.convert(Vy.texture.type),u1=oy(Vy.texture.internalFormat,Hy,i1);yn.texImage2D(Jy,0,u1,Vy.width,Vy.height,0,Hy,i1,null),cr.bindFramebuffer(36160,Ty),cr.framebufferTexture2D(36160,Yy,Jy,Rn.get(Vy.texture).__webglTexture,0),cr.bindFramebuffer(36160,null)}function $y(Ty,Vy,Yy){if(cr.bindRenderbuffer(36161,Ty),Vy.depthBuffer&&!Vy.stencilBuffer){var Jy=33189;if(Yy){var Hy=Vy.depthTexture;Hy&&Hy.isDepthTexture&&(Hy.type===FloatType?Jy=36012:Hy.type===UnsignedIntType&&(Jy=33190));var i1=Iy(Vy);cr.renderbufferStorageMultisample(36161,i1,Jy,Vy.width,Vy.height)}else cr.renderbufferStorage(36161,Jy,Vy.width,Vy.height);cr.framebufferRenderbuffer(36160,36096,36161,Ty)}else if(Vy.depthBuffer&&Vy.stencilBuffer){if(Yy){var i1=Iy(Vy);cr.renderbufferStorageMultisample(36161,i1,35056,Vy.width,Vy.height)}else cr.renderbufferStorage(36161,34041,Vy.width,Vy.height);cr.framebufferRenderbuffer(36160,33306,36161,Ty)}else{var u1=Co.convert(Vy.texture.format),p1=Co.convert(Vy.texture.type),Jy=oy(Vy.texture.internalFormat,u1,p1);if(Yy){var i1=Iy(Vy);cr.renderbufferStorageMultisample(36161,i1,Jy,Vy.width,Vy.height)}else cr.renderbufferStorage(36161,Jy,Vy.width,Vy.height)}cr.bindRenderbuffer(36161,null)}function xy(Ty,Vy){var Yy=Vy&&Vy.isWebGLCubeRenderTarget;if(Yy)throw new Error("Depth Texture with cube render targets is not supported");if(cr.bindFramebuffer(36160,Ty),!(Vy.depthTexture&&Vy.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!Rn.get(Vy.depthTexture).__webglTexture||Vy.depthTexture.image.width!==Vy.width||Vy.depthTexture.image.height!==Vy.height)&&(Vy.depthTexture.image.width=Vy.width,Vy.depthTexture.image.height=Vy.height,Vy.depthTexture.needsUpdate=!0),vy(Vy.depthTexture,0);var Jy=Rn.get(Vy.depthTexture).__webglTexture;if(Vy.depthTexture.format===DepthFormat)cr.framebufferTexture2D(36160,36096,3553,Jy,0);else if(Vy.depthTexture.format===DepthStencilFormat)cr.framebufferTexture2D(36160,33306,3553,Jy,0);else throw new Error("Unknown depthTexture format")}function Ry(Ty){var Vy=Rn.get(Ty),Yy=Ty.isWebGLCubeRenderTarget===!0;if(Ty.depthTexture){if(Yy)throw new Error("target.depthTexture not supported in Cube render targets");xy(Vy.__webglFramebuffer,Ty)}else if(Yy){Vy.__webglDepthbuffer=[];for(var Jy=0;Jy<6;Jy++)cr.bindFramebuffer(36160,Vy.__webglFramebuffer[Jy]),Vy.__webglDepthbuffer[Jy]=cr.createRenderbuffer(),$y(Vy.__webglDepthbuffer[Jy],Ty,!1)}else cr.bindFramebuffer(36160,Vy.__webglFramebuffer),Vy.__webglDepthbuffer=cr.createRenderbuffer(),$y(Vy.__webglDepthbuffer,Ty,!1);cr.bindFramebuffer(36160,null)}function Ly(Ty){var Vy=Rn.get(Ty),Yy=Rn.get(Ty.texture);Ty.addEventListener("dispose",hy),Yy.__webglTexture=cr.createTexture(),Po.memory.textures++;var Jy=Ty.isWebGLCubeRenderTarget===!0,Hy=Ty.isWebGLMultisampleRenderTarget===!0,i1=_g(Ty)||To;if(To&&Ty.texture.format===RGBFormat&&(Ty.texture.type===FloatType||Ty.texture.type===HalfFloatType)&&(Ty.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Jy){Vy.__webglFramebuffer=[];for(var u1=0;u1<6;u1++)Vy.__webglFramebuffer[u1]=cr.createFramebuffer()}else if(Vy.__webglFramebuffer=cr.createFramebuffer(),Hy)if(To){Vy.__webglMultisampledFramebuffer=cr.createFramebuffer(),Vy.__webglColorRenderbuffer=cr.createRenderbuffer(),cr.bindRenderbuffer(36161,Vy.__webglColorRenderbuffer);var p1=Co.convert(Ty.texture.format),g1=Co.convert(Ty.texture.type),v1=oy(Ty.texture.internalFormat,p1,g1),h1=Iy(Ty);cr.renderbufferStorageMultisample(36161,h1,v1,Ty.width,Ty.height),cr.bindFramebuffer(36160,Vy.__webglMultisampledFramebuffer),cr.framebufferRenderbuffer(36160,36064,36161,Vy.__webglColorRenderbuffer),cr.bindRenderbuffer(36161,null),Ty.depthBuffer&&(Vy.__webglDepthRenderbuffer=cr.createRenderbuffer(),$y(Vy.__webglDepthRenderbuffer,Ty,!0)),cr.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Jy){yn.bindTexture(34067,Yy.__webglTexture),Py(34067,Ty.texture,i1);for(var u1=0;u1<6;u1++)Xy(Vy.__webglFramebuffer[u1],Ty,36064,34069+u1);ny(Ty.texture,i1)&&iy(34067,Ty.texture,Ty.width,Ty.height),yn.bindTexture(34067,null)}else yn.bindTexture(3553,Yy.__webglTexture),Py(3553,Ty.texture,i1),Xy(Vy.__webglFramebuffer,Ty,36064,3553),ny(Ty.texture,i1)&&iy(3553,Ty.texture,Ty.width,Ty.height),yn.bindTexture(3553,null);Ty.depthBuffer&&Ry(Ty)}function ky(Ty){var Vy=Ty.texture,Yy=_g(Ty)||To;if(ny(Vy,Yy)){var Jy=Ty.isWebGLCubeRenderTarget?34067:3553,Hy=Rn.get(Vy).__webglTexture;yn.bindTexture(Jy,Hy),iy(Jy,Vy,Ty.width,Ty.height),yn.bindTexture(Jy,null)}}function Ey(Ty){if(Ty.isWebGLMultisampleRenderTarget)if(To){var Vy=Rn.get(Ty);cr.bindFramebuffer(36008,Vy.__webglMultisampledFramebuffer),cr.bindFramebuffer(36009,Vy.__webglFramebuffer);var Yy=Ty.width,Jy=Ty.height,Hy=16384;Ty.depthBuffer&&(Hy|=256),Ty.stencilBuffer&&(Hy|=1024),cr.blitFramebuffer(0,0,Yy,Jy,0,0,Yy,Jy,Hy,9728),cr.bindFramebuffer(36160,Vy.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Iy(Ty){return To&&Ty.isWebGLMultisampleRenderTarget?Math.min(Xl,Ty.samples):0}function zy(Ty){var Vy=Po.render.frame;Yl.get(Ty)!==Vy&&(Yl.set(Ty,Vy),Ty.update())}var Uy=!1,Qy=!1;function Gy(Ty,Vy){Ty&&Ty.isWebGLRenderTarget&&(Uy===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Uy=!0),Ty=Ty.texture),vy(Ty,Vy)}function Zy(Ty,Vy){Ty&&Ty.isWebGLCubeRenderTarget&&(Qy===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Qy=!0),Ty=Ty.texture),Ty&&Ty.isCubeTexture||Array.isArray(Ty.image)&&Ty.image.length===6?gy(Ty,Vy):wy(Ty,Vy)}this.allocateTextureUnit=fy,this.resetTextureUnits=cy,this.setTexture2D=vy,this.setTexture2DArray=dy,this.setTexture3D=Ay,this.setTextureCube=gy,this.setTextureCubeDynamic=wy,this.setupRenderTarget=Ly,this.updateRenderTargetMipmap=ky,this.updateMultisampleRenderTarget=Ey,this.safeSetTexture2D=Gy,this.safeSetTextureCube=Zy}function WebGLUtils(cr,vn,yn){var Rn=yn.isWebGL2;function Bn(Co){var Po;if(Co===UnsignedByteType)return 5121;if(Co===UnsignedShort4444Type)return 32819;if(Co===UnsignedShort5551Type)return 32820;if(Co===UnsignedShort565Type)return 33635;if(Co===ByteType)return 5120;if(Co===ShortType)return 5122;if(Co===UnsignedShortType)return 5123;if(Co===IntType)return 5124;if(Co===UnsignedIntType)return 5125;if(Co===FloatType)return 5126;if(Co===HalfFloatType)return Rn?5131:(Po=vn.get("OES_texture_half_float"),Po!==null?Po.HALF_FLOAT_OES:null);if(Co===AlphaFormat)return 6406;if(Co===RGBFormat)return 6407;if(Co===RGBAFormat)return 6408;if(Co===LuminanceFormat)return 6409;if(Co===LuminanceAlphaFormat)return 6410;if(Co===DepthFormat)return 6402;if(Co===DepthStencilFormat)return 34041;if(Co===RedFormat)return 6403;if(Co===RedIntegerFormat)return 36244;if(Co===RGFormat)return 33319;if(Co===RGIntegerFormat)return 33320;if(Co===RGBIntegerFormat)return 36248;if(Co===RGBAIntegerFormat)return 36249;if(Co===RGB_S3TC_DXT1_Format||Co===RGBA_S3TC_DXT1_Format||Co===RGBA_S3TC_DXT3_Format||Co===RGBA_S3TC_DXT5_Format)if(Po=vn.get("WEBGL_compressed_texture_s3tc"),Po!==null){if(Co===RGB_S3TC_DXT1_Format)return Po.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Co===RGBA_S3TC_DXT1_Format)return Po.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Co===RGBA_S3TC_DXT3_Format)return Po.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Co===RGBA_S3TC_DXT5_Format)return Po.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Co===RGB_PVRTC_4BPPV1_Format||Co===RGB_PVRTC_2BPPV1_Format||Co===RGBA_PVRTC_4BPPV1_Format||Co===RGBA_PVRTC_2BPPV1_Format)if(Po=vn.get("WEBGL_compressed_texture_pvrtc"),Po!==null){if(Co===RGB_PVRTC_4BPPV1_Format)return Po.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Co===RGB_PVRTC_2BPPV1_Format)return Po.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Co===RGBA_PVRTC_4BPPV1_Format)return Po.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Co===RGBA_PVRTC_2BPPV1_Format)return Po.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Co===RGB_ETC1_Format)return Po=vn.get("WEBGL_compressed_texture_etc1"),Po!==null?Po.COMPRESSED_RGB_ETC1_WEBGL:null;if((Co===RGB_ETC2_Format||Co===RGBA_ETC2_EAC_Format)&&(Po=vn.get("WEBGL_compressed_texture_etc"),Po!==null)){if(Co===RGB_ETC2_Format)return Po.COMPRESSED_RGB8_ETC2;if(Co===RGBA_ETC2_EAC_Format)return Po.COMPRESSED_RGBA8_ETC2_EAC}if(Co===RGBA_ASTC_4x4_Format||Co===RGBA_ASTC_5x4_Format||Co===RGBA_ASTC_5x5_Format||Co===RGBA_ASTC_6x5_Format||Co===RGBA_ASTC_6x6_Format||Co===RGBA_ASTC_8x5_Format||Co===RGBA_ASTC_8x6_Format||Co===RGBA_ASTC_8x8_Format||Co===RGBA_ASTC_10x5_Format||Co===RGBA_ASTC_10x6_Format||Co===RGBA_ASTC_10x8_Format||Co===RGBA_ASTC_10x10_Format||Co===RGBA_ASTC_12x10_Format||Co===RGBA_ASTC_12x12_Format||Co===SRGB8_ALPHA8_ASTC_4x4_Format||Co===SRGB8_ALPHA8_ASTC_5x4_Format||Co===SRGB8_ALPHA8_ASTC_5x5_Format||Co===SRGB8_ALPHA8_ASTC_6x5_Format||Co===SRGB8_ALPHA8_ASTC_6x6_Format||Co===SRGB8_ALPHA8_ASTC_8x5_Format||Co===SRGB8_ALPHA8_ASTC_8x6_Format||Co===SRGB8_ALPHA8_ASTC_8x8_Format||Co===SRGB8_ALPHA8_ASTC_10x5_Format||Co===SRGB8_ALPHA8_ASTC_10x6_Format||Co===SRGB8_ALPHA8_ASTC_10x8_Format||Co===SRGB8_ALPHA8_ASTC_10x10_Format||Co===SRGB8_ALPHA8_ASTC_12x10_Format||Co===SRGB8_ALPHA8_ASTC_12x12_Format)return Po=vn.get("WEBGL_compressed_texture_astc"),Po!==null?Co:null;if(Co===RGBA_BPTC_Format)return Po=vn.get("EXT_texture_compression_bptc"),Po!==null?Co:null;if(Co===UnsignedInt248Type)return Rn?34042:(Po=vn.get("WEBGL_depth_texture"),Po!==null?Po.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:Bn}}function ArrayCamera(cr){PerspectiveCamera.call(this),this.cameras=cr||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group$1(){Object3D.call(this),this.type="Group"}Group$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group$1,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(cr){return this._targetRay!==null&&this._targetRay.dispatchEvent(cr),this._grip!==null&&this._grip.dispatchEvent(cr),this},disconnect:function(cr){return this.dispatchEvent({type:"disconnected",data:cr}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(cr,vn,yn){var Rn=null,Bn=null,Co=this._targetRay,Po=this._grip;return cr&&(Co!==null&&(Rn=vn.getPose(cr.targetRaySpace,yn),Rn!==null&&(Co.matrix.fromArray(Rn.transform.matrix),Co.matrix.decompose(Co.position,Co.rotation,Co.scale))),Po!==null&&cr.gripSpace&&(Bn=vn.getPose(cr.gripSpace,yn),Bn!==null&&(Po.matrix.fromArray(Bn.transform.matrix),Po.matrix.decompose(Po.position,Po.rotation,Po.scale)))),Co!==null&&(Co.visible=Rn!==null),Po!==null&&(Po.visible=Bn!==null),this}});function WebXRManager(cr,vn){var yn=this,Rn=null,Bn=1,Co=null,Po="local-floor",To=null,Io=[],$l=new Map,Wl=new PerspectiveCamera;Wl.layers.enable(1),Wl.viewport=new Vector4;var Xl=new PerspectiveCamera;Xl.layers.enable(2),Xl.viewport=new Vector4;var Yl=[Wl,Xl],Zl=new ArrayCamera;Zl.layers.enable(1),Zl.layers.enable(2);var ey=null,Rm=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(sy){var cy=Io[sy];return cy===void 0&&(cy=new WebXRController,Io[sy]=cy),cy.getTargetRaySpace()},this.getControllerGrip=function(sy){var cy=Io[sy];return cy===void 0&&(cy=new WebXRController,Io[sy]=cy),cy.getGripSpace()};function ry(sy){var cy=$l.get(sy.inputSource);cy&&cy.dispatchEvent({type:sy.type})}function _g(){$l.forEach(function(sy,cy){sy.disconnect(cy)}),$l.clear(),cr.setFramebuffer(null),cr.setRenderTarget(cr.getRenderTarget()),ly.stop(),yn.isPresenting=!1,yn.dispatchEvent({type:"sessionend"})}function ty(sy){Co=sy,ly.setContext(Rn),ly.start(),yn.isPresenting=!0,yn.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(sy){Bn=sy,yn.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(sy){Po=sy,yn.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Co},this.getSession=function(){return Rn},this.setSession=function(sy){if(Rn=sy,Rn!==null){Rn.addEventListener("select",ry),Rn.addEventListener("selectstart",ry),Rn.addEventListener("selectend",ry),Rn.addEventListener("squeeze",ry),Rn.addEventListener("squeezestart",ry),Rn.addEventListener("squeezeend",ry),Rn.addEventListener("end",_g);var cy=vn.getContextAttributes();cy.xrCompatible!==!0&&vn.makeXRCompatible();var fy={antialias:cy.antialias,alpha:cy.alpha,depth:cy.depth,stencil:cy.stencil,framebufferScaleFactor:Bn},vy=new XRWebGLLayer(Rn,vn,fy);Rn.updateRenderState({baseLayer:vy}),Rn.requestReferenceSpace(Po).then(ty),Rn.addEventListener("inputsourceschange",ny)}};function ny(sy){for(var cy=Rn.inputSources,fy=0;fy<Io.length;fy++)$l.set(cy[fy],Io[fy]);for(var fy=0;fy<sy.removed.length;fy++){var vy=sy.removed[fy],dy=$l.get(vy);dy&&(dy.dispatchEvent({type:"disconnected",data:vy}),$l.delete(vy))}for(var fy=0;fy<sy.added.length;fy++){var vy=sy.added[fy],dy=$l.get(vy);dy&&dy.dispatchEvent({type:"connected",data:vy})}}var iy=new Vector3,oy=new Vector3;function ay(sy,cy,fy){iy.setFromMatrixPosition(cy.matrixWorld),oy.setFromMatrixPosition(fy.matrixWorld);var vy=iy.distanceTo(oy),dy=cy.projectionMatrix.elements,Ay=fy.projectionMatrix.elements,gy=dy[14]/(dy[10]-1),wy=dy[14]/(dy[10]+1),Cy=(dy[9]+1)/dy[5],My=(dy[9]-1)/dy[5],Py=(dy[8]-1)/dy[0],Dy=(Ay[8]+1)/Ay[0],qy=gy*Py,Xy=gy*Dy,$y=vy/(-Py+Dy),xy=$y*-Py;cy.matrixWorld.decompose(sy.position,sy.quaternion,sy.scale),sy.translateX(xy),sy.translateZ($y),sy.matrixWorld.compose(sy.position,sy.quaternion,sy.scale),sy.matrixWorldInverse.getInverse(sy.matrixWorld);var Ry=gy+$y,Ly=wy+$y,ky=qy-xy,Ey=Xy+(vy-xy),Iy=Cy*wy/Ly*Ry,zy=My*wy/Ly*Ry;sy.projectionMatrix.makePerspective(ky,Ey,Iy,zy,Ry,Ly)}function uy(sy,cy){cy===null?sy.matrixWorld.copy(sy.matrix):sy.matrixWorld.multiplyMatrices(cy.matrixWorld,sy.matrix),sy.matrixWorldInverse.getInverse(sy.matrixWorld)}this.getCamera=function(sy){Zl.near=Xl.near=Wl.near=sy.near,Zl.far=Xl.far=Wl.far=sy.far,(ey!==Zl.near||Rm!==Zl.far)&&(Rn.updateRenderState({depthNear:Zl.near,depthFar:Zl.far}),ey=Zl.near,Rm=Zl.far);var cy=sy.parent,fy=Zl.cameras;uy(Zl,cy);for(var vy=0;vy<fy.length;vy++)uy(fy[vy],cy);sy.matrixWorld.copy(Zl.matrixWorld);for(var dy=sy.children,vy=0,Ay=dy.length;vy<Ay;vy++)dy[vy].updateMatrixWorld(!0);return fy.length===2?ay(Zl,Wl,Xl):Zl.projectionMatrix.copy(Wl.projectionMatrix),Zl};var hy=null;function my(sy,cy){if(To=cy.getViewerPose(Co),To!==null){var fy=To.views,vy=Rn.renderState.baseLayer;cr.setFramebuffer(vy.framebuffer);var dy=!1;fy.length!==Zl.cameras.length&&(Zl.cameras.length=0,dy=!0);for(var Ay=0;Ay<fy.length;Ay++){var gy=fy[Ay],wy=vy.getViewport(gy),Cy=Yl[Ay];Cy.matrix.fromArray(gy.transform.matrix),Cy.projectionMatrix.fromArray(gy.projectionMatrix),Cy.viewport.set(wy.x,wy.y,wy.width,wy.height),Ay===0&&Zl.matrix.copy(Cy.matrix),dy===!0&&Zl.cameras.push(Cy)}}for(var My=Rn.inputSources,Ay=0;Ay<Io.length;Ay++){var Py=Io[Ay],Dy=My[Ay];Py.update(Dy,cy,Co)}hy&&hy(sy,cy)}var ly=new WebGLAnimation;ly.setAnimationLoop(my),this.setAnimationLoop=function(sy){hy=sy},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(cr){function vn(_g,ty){_g.fogColor.value.copy(ty.color),ty.isFog?(_g.fogNear.value=ty.near,_g.fogFar.value=ty.far):ty.isFogExp2&&(_g.fogDensity.value=ty.density)}function yn(_g,ty,ny,iy,oy){ty.isMeshBasicMaterial?Rn(_g,ty):ty.isMeshLambertMaterial?(Rn(_g,ty),Io(_g,ty)):ty.isMeshToonMaterial?(Rn(_g,ty),Wl(_g,ty)):ty.isMeshPhongMaterial?(Rn(_g,ty),$l(_g,ty)):ty.isMeshStandardMaterial?(Rn(_g,ty,ny),ty.isMeshPhysicalMaterial?Yl(_g,ty,ny):Xl(_g,ty,ny)):ty.isMeshMatcapMaterial?(Rn(_g,ty),Zl(_g,ty)):ty.isMeshDepthMaterial?(Rn(_g,ty),ey(_g,ty)):ty.isMeshDistanceMaterial?(Rn(_g,ty),Rm(_g,ty)):ty.isMeshNormalMaterial?(Rn(_g,ty),ry(_g,ty)):ty.isLineBasicMaterial?(Bn(_g,ty),ty.isLineDashedMaterial&&Co(_g,ty)):ty.isPointsMaterial?Po(_g,ty,iy,oy):ty.isSpriteMaterial?To(_g,ty):ty.isShadowMaterial?(_g.color.value.copy(ty.color),_g.opacity.value=ty.opacity):ty.isShaderMaterial&&(ty.uniformsNeedUpdate=!1)}function Rn(_g,ty,ny){_g.opacity.value=ty.opacity,ty.color&&_g.diffuse.value.copy(ty.color),ty.emissive&&_g.emissive.value.copy(ty.emissive).multiplyScalar(ty.emissiveIntensity),ty.map&&(_g.map.value=ty.map),ty.alphaMap&&(_g.alphaMap.value=ty.alphaMap),ty.specularMap&&(_g.specularMap.value=ty.specularMap);var iy=ty.envMap||ny;iy&&(_g.envMap.value=iy,_g.flipEnvMap.value=iy.isCubeTexture?-1:1,_g.reflectivity.value=ty.reflectivity,_g.refractionRatio.value=ty.refractionRatio,_g.maxMipLevel.value=cr.get(iy).__maxMipLevel),ty.lightMap&&(_g.lightMap.value=ty.lightMap,_g.lightMapIntensity.value=ty.lightMapIntensity),ty.aoMap&&(_g.aoMap.value=ty.aoMap,_g.aoMapIntensity.value=ty.aoMapIntensity);var oy;ty.map?oy=ty.map:ty.specularMap?oy=ty.specularMap:ty.displacementMap?oy=ty.displacementMap:ty.normalMap?oy=ty.normalMap:ty.bumpMap?oy=ty.bumpMap:ty.roughnessMap?oy=ty.roughnessMap:ty.metalnessMap?oy=ty.metalnessMap:ty.alphaMap?oy=ty.alphaMap:ty.emissiveMap&&(oy=ty.emissiveMap),oy!==void 0&&(oy.isWebGLRenderTarget&&(oy=oy.texture),oy.matrixAutoUpdate===!0&&oy.updateMatrix(),_g.uvTransform.value.copy(oy.matrix));var ay;ty.aoMap?ay=ty.aoMap:ty.lightMap&&(ay=ty.lightMap),ay!==void 0&&(ay.isWebGLRenderTarget&&(ay=ay.texture),ay.matrixAutoUpdate===!0&&ay.updateMatrix(),_g.uv2Transform.value.copy(ay.matrix))}function Bn(_g,ty){_g.diffuse.value.copy(ty.color),_g.opacity.value=ty.opacity}function Co(_g,ty){_g.dashSize.value=ty.dashSize,_g.totalSize.value=ty.dashSize+ty.gapSize,_g.scale.value=ty.scale}function Po(_g,ty,ny,iy){_g.diffuse.value.copy(ty.color),_g.opacity.value=ty.opacity,_g.size.value=ty.size*ny,_g.scale.value=iy*.5,ty.map&&(_g.map.value=ty.map),ty.alphaMap&&(_g.alphaMap.value=ty.alphaMap);var oy;ty.map?oy=ty.map:ty.alphaMap&&(oy=ty.alphaMap),oy!==void 0&&(oy.matrixAutoUpdate===!0&&oy.updateMatrix(),_g.uvTransform.value.copy(oy.matrix))}function To(_g,ty){_g.diffuse.value.copy(ty.color),_g.opacity.value=ty.opacity,_g.rotation.value=ty.rotation,ty.map&&(_g.map.value=ty.map),ty.alphaMap&&(_g.alphaMap.value=ty.alphaMap);var ny;ty.map?ny=ty.map:ty.alphaMap&&(ny=ty.alphaMap),ny!==void 0&&(ny.matrixAutoUpdate===!0&&ny.updateMatrix(),_g.uvTransform.value.copy(ny.matrix))}function Io(_g,ty){ty.emissiveMap&&(_g.emissiveMap.value=ty.emissiveMap)}function $l(_g,ty){_g.specular.value.copy(ty.specular),_g.shininess.value=Math.max(ty.shininess,1e-4),ty.emissiveMap&&(_g.emissiveMap.value=ty.emissiveMap),ty.bumpMap&&(_g.bumpMap.value=ty.bumpMap,_g.bumpScale.value=ty.bumpScale,ty.side===BackSide&&(_g.bumpScale.value*=-1)),ty.normalMap&&(_g.normalMap.value=ty.normalMap,_g.normalScale.value.copy(ty.normalScale),ty.side===BackSide&&_g.normalScale.value.negate()),ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias)}function Wl(_g,ty){_g.specular.value.copy(ty.specular),_g.shininess.value=Math.max(ty.shininess,1e-4),ty.gradientMap&&(_g.gradientMap.value=ty.gradientMap),ty.emissiveMap&&(_g.emissiveMap.value=ty.emissiveMap),ty.bumpMap&&(_g.bumpMap.value=ty.bumpMap,_g.bumpScale.value=ty.bumpScale,ty.side===BackSide&&(_g.bumpScale.value*=-1)),ty.normalMap&&(_g.normalMap.value=ty.normalMap,_g.normalScale.value.copy(ty.normalScale),ty.side===BackSide&&_g.normalScale.value.negate()),ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias)}function Xl(_g,ty,ny){_g.roughness.value=ty.roughness,_g.metalness.value=ty.metalness,ty.roughnessMap&&(_g.roughnessMap.value=ty.roughnessMap),ty.metalnessMap&&(_g.metalnessMap.value=ty.metalnessMap),ty.emissiveMap&&(_g.emissiveMap.value=ty.emissiveMap),ty.bumpMap&&(_g.bumpMap.value=ty.bumpMap,_g.bumpScale.value=ty.bumpScale,ty.side===BackSide&&(_g.bumpScale.value*=-1)),ty.normalMap&&(_g.normalMap.value=ty.normalMap,_g.normalScale.value.copy(ty.normalScale),ty.side===BackSide&&_g.normalScale.value.negate()),ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias),(ty.envMap||ny)&&(_g.envMapIntensity.value=ty.envMapIntensity)}function Yl(_g,ty,ny){Xl(_g,ty,ny),_g.reflectivity.value=ty.reflectivity,_g.clearcoat.value=ty.clearcoat,_g.clearcoatRoughness.value=ty.clearcoatRoughness,ty.sheen&&_g.sheen.value.copy(ty.sheen),ty.clearcoatMap&&(_g.clearcoatMap.value=ty.clearcoatMap),ty.clearcoatRoughnessMap&&(_g.clearcoatRoughnessMap.value=ty.clearcoatRoughnessMap),ty.clearcoatNormalMap&&(_g.clearcoatNormalScale.value.copy(ty.clearcoatNormalScale),_g.clearcoatNormalMap.value=ty.clearcoatNormalMap,ty.side===BackSide&&_g.clearcoatNormalScale.value.negate()),_g.transparency.value=ty.transparency}function Zl(_g,ty){ty.matcap&&(_g.matcap.value=ty.matcap),ty.bumpMap&&(_g.bumpMap.value=ty.bumpMap,_g.bumpScale.value=ty.bumpScale,ty.side===BackSide&&(_g.bumpScale.value*=-1)),ty.normalMap&&(_g.normalMap.value=ty.normalMap,_g.normalScale.value.copy(ty.normalScale),ty.side===BackSide&&_g.normalScale.value.negate()),ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias)}function ey(_g,ty){ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias)}function Rm(_g,ty){ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias),_g.referencePosition.value.copy(ty.referencePosition),_g.nearDistance.value=ty.nearDistance,_g.farDistance.value=ty.farDistance}function ry(_g,ty){ty.bumpMap&&(_g.bumpMap.value=ty.bumpMap,_g.bumpScale.value=ty.bumpScale,ty.side===BackSide&&(_g.bumpScale.value*=-1)),ty.normalMap&&(_g.normalMap.value=ty.normalMap,_g.normalScale.value.copy(ty.normalScale),ty.side===BackSide&&_g.normalScale.value.negate()),ty.displacementMap&&(_g.displacementMap.value=ty.displacementMap,_g.displacementScale.value=ty.displacementScale,_g.displacementBias.value=ty.displacementBias)}return{refreshFogUniforms:vn,refreshMaterialUniforms:yn}}function WebGLRenderer(cr){cr=cr||{};var vn=cr.canvas!==void 0?cr.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),yn=cr.context!==void 0?cr.context:null,Rn=cr.alpha!==void 0?cr.alpha:!1,Bn=cr.depth!==void 0?cr.depth:!0,Co=cr.stencil!==void 0?cr.stencil:!0,Po=cr.antialias!==void 0?cr.antialias:!1,To=cr.premultipliedAlpha!==void 0?cr.premultipliedAlpha:!0,Io=cr.preserveDrawingBuffer!==void 0?cr.preserveDrawingBuffer:!1,$l=cr.powerPreference!==void 0?cr.powerPreference:"default",Wl=cr.failIfMajorPerformanceCaveat!==void 0?cr.failIfMajorPerformanceCaveat:!1,Xl=null,Yl=null;this.domElement=vn,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Zl=this,ey=!1,Rm=null,ry=0,_g=0,ty=null,ny=null,iy=-1,oy={geometry:null,program:null,wireframe:!1},ay=null,uy=null,hy=new Vector4,my=new Vector4,ly=null,sy=vn.width,cy=vn.height,fy=1,vy=null,dy=null,Ay=new Vector4(0,0,sy,cy),gy=new Vector4(0,0,sy,cy),wy=!1,Cy=new Frustum,My=new WebGLClipping,Py=!1,Dy=!1,qy=new Matrix4,Xy=new Vector3;function $y(){return ty===null?fy:1}var xy;try{var Ry={alpha:Rn,depth:Bn,stencil:Co,antialias:Po,premultipliedAlpha:To,preserveDrawingBuffer:Io,powerPreference:$l,failIfMajorPerformanceCaveat:Wl};if(vn.addEventListener("webglcontextlost",o1,!1),vn.addEventListener("webglcontextrestored",t1,!1),xy=yn||vn.getContext("webgl",Ry)||vn.getContext("experimental-webgl",Ry),xy===null)throw vn.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");xy.getShaderPrecisionFormat===void 0&&(xy.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(jy){throw console.error("THREE.WebGLRenderer: "+jy.message),jy}var Ly,ky,Ey,Iy,zy,Uy,Qy,Gy,Zy,Ty,Vy,Yy,Jy,Hy,i1,u1,p1,g1;function v1(){Ly=new WebGLExtensions(xy),ky=new WebGLCapabilities(xy,Ly,cr),ky.isWebGL2===!1&&(Ly.get("WEBGL_depth_texture"),Ly.get("OES_texture_float"),Ly.get("OES_texture_half_float"),Ly.get("OES_texture_half_float_linear"),Ly.get("OES_standard_derivatives"),Ly.get("OES_element_index_uint"),Ly.get("ANGLE_instanced_arrays")),Ly.get("OES_texture_float_linear"),g1=new WebGLUtils(xy,Ly,ky),Ey=new WebGLState(xy,Ly,ky),Ey.scissor(my.copy(gy).multiplyScalar(fy).floor()),Ey.viewport(hy.copy(Ay).multiplyScalar(fy).floor()),Iy=new WebGLInfo,zy=new WebGLProperties,Uy=new WebGLTextures(xy,Ly,Ey,zy,ky,g1,Iy),Qy=new WebGLAttributes(xy,ky),Gy=new WebGLGeometries(xy,Qy,Iy),Zy=new WebGLObjects(xy,Gy,Qy,Iy),i1=new WebGLMorphtargets(xy),Ty=new WebGLPrograms(Zl,Ly,ky),Vy=new WebGLMaterials(zy),Yy=new WebGLRenderLists,Jy=new WebGLRenderStates,Hy=new WebGLBackground(Zl,Ey,Zy,To),u1=new WebGLBufferRenderer(xy,Ly,Iy,ky),p1=new WebGLIndexedBufferRenderer(xy,Ly,Iy,ky),Iy.programs=Ty.programs,Zl.capabilities=ky,Zl.extensions=Ly,Zl.properties=zy,Zl.renderLists=Yy,Zl.state=Ey,Zl.info=Iy}v1();var h1=new WebXRManager(Zl,xy);this.xr=h1;var l1=new WebGLShadowMap(Zl,Zy,ky.maxTextureSize);this.shadowMap=l1,this.getContext=function(){return xy},this.getContextAttributes=function(){return xy.getContextAttributes()},this.forceContextLoss=function(){var jy=Ly.get("WEBGL_lose_context");jy&&jy.loseContext()},this.forceContextRestore=function(){var jy=Ly.get("WEBGL_lose_context");jy&&jy.restoreContext()},this.getPixelRatio=function(){return fy},this.setPixelRatio=function(jy){jy!==void 0&&(fy=jy,this.setSize(sy,cy,!1))},this.getSize=function(jy){return jy===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),jy=new Vector2),jy.set(sy,cy)},this.setSize=function(jy,r1,n1){if(h1.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}sy=jy,cy=r1,vn.width=Math.floor(jy*fy),vn.height=Math.floor(r1*fy),n1!==!1&&(vn.style.width=jy+"px",vn.style.height=r1+"px"),this.setViewport(0,0,jy,r1)},this.getDrawingBufferSize=function(jy){return jy===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),jy=new Vector2),jy.set(sy*fy,cy*fy).floor()},this.setDrawingBufferSize=function(jy,r1,n1){sy=jy,cy=r1,fy=n1,vn.width=Math.floor(jy*n1),vn.height=Math.floor(r1*n1),this.setViewport(0,0,jy,r1)},this.getCurrentViewport=function(jy){return jy===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),jy=new Vector4),jy.copy(hy)},this.getViewport=function(jy){return jy.copy(Ay)},this.setViewport=function(jy,r1,n1,a1){jy.isVector4?Ay.set(jy.x,jy.y,jy.z,jy.w):Ay.set(jy,r1,n1,a1),Ey.viewport(hy.copy(Ay).multiplyScalar(fy).floor())},this.getScissor=function(jy){return jy.copy(gy)},this.setScissor=function(jy,r1,n1,a1){jy.isVector4?gy.set(jy.x,jy.y,jy.z,jy.w):gy.set(jy,r1,n1,a1),Ey.scissor(my.copy(gy).multiplyScalar(fy).floor())},this.getScissorTest=function(){return wy},this.setScissorTest=function(jy){Ey.setScissorTest(wy=jy)},this.setOpaqueSort=function(jy){vy=jy},this.setTransparentSort=function(jy){dy=jy},this.getClearColor=function(){return Hy.getClearColor()},this.setClearColor=function(){Hy.setClearColor.apply(Hy,arguments)},this.getClearAlpha=function(){return Hy.getClearAlpha()},this.setClearAlpha=function(){Hy.setClearAlpha.apply(Hy,arguments)},this.clear=function(jy,r1,n1){var a1=0;(jy===void 0||jy)&&(a1|=16384),(r1===void 0||r1)&&(a1|=256),(n1===void 0||n1)&&(a1|=1024),xy.clear(a1)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){vn.removeEventListener("webglcontextlost",o1,!1),vn.removeEventListener("webglcontextrestored",t1,!1),Yy.dispose(),Jy.dispose(),zy.dispose(),Zy.dispose(),h1.dispose(),D1.stop()};function o1(jy){jy.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ey=!0}function t1(){console.log("THREE.WebGLRenderer: Context Restored."),ey=!1,v1()}function Wy(jy){var r1=jy.target;r1.removeEventListener("dispose",Wy),f1(r1)}function f1(jy){m1(jy),zy.remove(jy)}function m1(jy){var r1=zy.get(jy).program;jy.program=void 0,r1!==void 0&&Ty.releaseProgram(r1)}function w1(jy,r1){jy.render(function(n1){Zl.renderBufferImmediate(n1,r1)})}this.renderBufferImmediate=function(jy,r1){Ey.initAttributes();var n1=zy.get(jy);jy.hasPositions&&!n1.position&&(n1.position=xy.createBuffer()),jy.hasNormals&&!n1.normal&&(n1.normal=xy.createBuffer()),jy.hasUvs&&!n1.uv&&(n1.uv=xy.createBuffer()),jy.hasColors&&!n1.color&&(n1.color=xy.createBuffer());var a1=r1.getAttributes();jy.hasPositions&&(xy.bindBuffer(34962,n1.position),xy.bufferData(34962,jy.positionArray,35048),Ey.enableAttribute(a1.position),xy.vertexAttribPointer(a1.position,3,5126,!1,0,0)),jy.hasNormals&&(xy.bindBuffer(34962,n1.normal),xy.bufferData(34962,jy.normalArray,35048),Ey.enableAttribute(a1.normal),xy.vertexAttribPointer(a1.normal,3,5126,!1,0,0)),jy.hasUvs&&(xy.bindBuffer(34962,n1.uv),xy.bufferData(34962,jy.uvArray,35048),Ey.enableAttribute(a1.uv),xy.vertexAttribPointer(a1.uv,2,5126,!1,0,0)),jy.hasColors&&(xy.bindBuffer(34962,n1.color),xy.bufferData(34962,jy.colorArray,35048),Ey.enableAttribute(a1.color),xy.vertexAttribPointer(a1.color,3,5126,!1,0,0)),Ey.disableUnusedAttributes(),xy.drawArrays(4,0,jy.count),jy.count=0};var c1=new Scene;this.renderBufferDirect=function(jy,r1,n1,a1,y1,_1){r1===null&&(r1=c1);var E1=y1.isMesh&&y1.matrixWorld.determinant()<0,b1=_b(jy,r1,a1,y1);Ey.setMaterial(a1,E1);var S1=!1;(oy.geometry!==n1.id||oy.program!==b1.id||oy.wireframe!==(a1.wireframe===!0))&&(oy.geometry=n1.id,oy.program=b1.id,oy.wireframe=a1.wireframe===!0,S1=!0),(a1.morphTargets||a1.morphNormals)&&(i1.update(y1,n1,a1,b1),S1=!0),y1.isInstancedMesh===!0&&(S1=!0);var x1=n1.index,W1=n1.attributes.position;if(x1===null){if(W1===void 0||W1.count===0)return}else if(x1.count===0)return;var N1=1;a1.wireframe===!0&&(x1=Gy.getWireframeAttribute(n1),N1=2);var R1,$1=u1;x1!==null&&(R1=Qy.get(x1),$1=p1,$1.setIndex(R1)),S1&&(M1(y1,n1,a1,b1),x1!==null&&xy.bindBuffer(34963,R1.buffer));var C1=x1!==null?x1.count:W1.count,T1=n1.drawRange.start*N1,F1=n1.drawRange.count*N1,z1=_1!==null?_1.start*N1:0,Z1=_1!==null?_1.count*N1:1/0,H1=Math.max(T1,z1),nx=Math.min(C1,T1+F1,z1+Z1)-1,J1=Math.max(0,nx-H1+1);if(J1!==0){if(y1.isMesh)a1.wireframe===!0?(Ey.setLineWidth(a1.wireframeLinewidth*$y()),$1.setMode(1)):$1.setMode(4);else if(y1.isLine){var Ix=a1.linewidth;Ix===void 0&&(Ix=1),Ey.setLineWidth(Ix*$y()),y1.isLineSegments?$1.setMode(1):y1.isLineLoop?$1.setMode(2):$1.setMode(3)}else y1.isPoints?$1.setMode(0):y1.isSprite&&$1.setMode(4);if(y1.isInstancedMesh)$1.renderInstances(n1,H1,J1,y1.count);else if(n1.isInstancedBufferGeometry){var Px=Math.min(n1.instanceCount,n1._maxInstanceCount);$1.renderInstances(n1,H1,J1,Px)}else $1.render(H1,J1)}};function M1(jy,r1,n1,a1){if(!(ky.isWebGL2===!1&&(jy.isInstancedMesh||r1.isInstancedBufferGeometry)&&Ly.get("ANGLE_instanced_arrays")===null)){Ey.initAttributes();var y1=r1.attributes,_1=a1.getAttributes(),E1=n1.defaultAttributeValues;for(var b1 in _1){var S1=_1[b1];if(S1>=0){var x1=y1[b1];if(x1!==void 0){var W1=x1.normalized,N1=x1.itemSize,R1=Qy.get(x1);if(R1===void 0)continue;var $1=R1.buffer,C1=R1.type,T1=R1.bytesPerElement;if(x1.isInterleavedBufferAttribute){var F1=x1.data,z1=F1.stride,Z1=x1.offset;F1&&F1.isInstancedInterleavedBuffer?(Ey.enableAttributeAndDivisor(S1,F1.meshPerAttribute),r1._maxInstanceCount===void 0&&(r1._maxInstanceCount=F1.meshPerAttribute*F1.count)):Ey.enableAttribute(S1),xy.bindBuffer(34962,$1),Ey.vertexAttribPointer(S1,N1,C1,W1,z1*T1,Z1*T1)}else x1.isInstancedBufferAttribute?(Ey.enableAttributeAndDivisor(S1,x1.meshPerAttribute),r1._maxInstanceCount===void 0&&(r1._maxInstanceCount=x1.meshPerAttribute*x1.count)):Ey.enableAttribute(S1),xy.bindBuffer(34962,$1),Ey.vertexAttribPointer(S1,N1,C1,W1,0,0)}else if(b1==="instanceMatrix"){var R1=Qy.get(jy.instanceMatrix);if(R1===void 0)continue;var $1=R1.buffer,C1=R1.type;Ey.enableAttributeAndDivisor(S1+0,1),Ey.enableAttributeAndDivisor(S1+1,1),Ey.enableAttributeAndDivisor(S1+2,1),Ey.enableAttributeAndDivisor(S1+3,1),xy.bindBuffer(34962,$1),xy.vertexAttribPointer(S1+0,4,C1,!1,64,0),xy.vertexAttribPointer(S1+1,4,C1,!1,64,16),xy.vertexAttribPointer(S1+2,4,C1,!1,64,32),xy.vertexAttribPointer(S1+3,4,C1,!1,64,48)}else if(E1!==void 0){var H1=E1[b1];if(H1!==void 0)switch(H1.length){case 2:xy.vertexAttrib2fv(S1,H1);break;case 3:xy.vertexAttrib3fv(S1,H1);break;case 4:xy.vertexAttrib4fv(S1,H1);break;default:xy.vertexAttrib1fv(S1,H1)}}}}Ey.disableUnusedAttributes()}}this.compile=function(jy,r1){Yl=Jy.get(jy,r1),Yl.init(),jy.traverse(function(a1){a1.isLight&&(Yl.pushLight(a1),a1.castShadow&&Yl.pushShadow(a1))}),Yl.setupLights(r1);const n1={};jy.traverse(function(a1){let y1=a1.material;if(y1)if(Array.isArray(y1))for(let _1=0;_1<y1.length;_1++){let E1=y1[_1];E1.uuid in n1||(q1(E1,jy,a1),n1[E1.uuid]=!0)}else y1.uuid in n1||(q1(y1,jy,a1),n1[y1.uuid]=!0)})};var L1=null;function B1(jy){h1.isPresenting||L1&&L1(jy)}var D1=new WebGLAnimation;D1.setAnimationLoop(B1),typeof window!="undefined"&&D1.setContext(window),this.setAnimationLoop=function(jy){L1=jy,h1.setAnimationLoop(jy),D1.start()},this.render=function(jy,r1){var n1,a1;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n1=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),a1=arguments[3]),!(r1&&r1.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!ey){oy.geometry=null,oy.program=null,oy.wireframe=!1,iy=-1,ay=null,jy.autoUpdate===!0&&jy.updateMatrixWorld(),r1.parent===null&&r1.updateMatrixWorld(),h1.enabled&&h1.isPresenting&&(r1=h1.getCamera(r1)),jy.onBeforeRender(Zl,jy,r1,n1||ty),Yl=Jy.get(jy,r1),Yl.init(),qy.multiplyMatrices(r1.projectionMatrix,r1.matrixWorldInverse),Cy.setFromProjectionMatrix(qy),Dy=this.localClippingEnabled,Py=My.init(this.clippingPlanes,Dy,r1),Xl=Yy.get(jy,r1),Xl.init(),O1(jy,r1,0,Zl.sortObjects),Xl.finish(),Zl.sortObjects===!0&&Xl.sort(vy,dy),Py&&My.beginShadows();var y1=Yl.state.shadowsArray;l1.render(y1,jy,r1),Yl.setupLights(r1),Py&&My.endShadows(),this.info.autoReset&&this.info.reset(),n1!==void 0&&this.setRenderTarget(n1),Hy.render(Xl,jy,r1,a1);var _1=Xl.opaque,E1=Xl.transparent;if(jy.overrideMaterial){var b1=jy.overrideMaterial;_1.length&&j1(_1,jy,r1,b1),E1.length&&j1(E1,jy,r1,b1)}else _1.length&&j1(_1,jy,r1),E1.length&&j1(E1,jy,r1);jy.onAfterRender(Zl,jy,r1),ty!==null&&(Uy.updateRenderTargetMipmap(ty),Uy.updateMultisampleRenderTarget(ty)),Ey.buffers.depth.setTest(!0),Ey.buffers.depth.setMask(!0),Ey.buffers.color.setMask(!0),Ey.setPolygonOffset(!1),Xl=null,Yl=null}};function O1(jy,r1,n1,a1){if(jy.visible!==!1){var y1=jy.layers.test(r1.layers);if(y1){if(jy.isGroup)n1=jy.renderOrder;else if(jy.isLOD)jy.autoUpdate===!0&&jy.update(r1);else if(jy.isLight)Yl.pushLight(jy),jy.castShadow&&Yl.pushShadow(jy);else if(jy.isSprite){if(!jy.frustumCulled||Cy.intersectsSprite(jy)){a1&&Xy.setFromMatrixPosition(jy.matrixWorld).applyMatrix4(qy);var _1=Zy.update(jy),E1=jy.material;E1.visible&&Xl.push(jy,_1,E1,n1,Xy.z,null)}}else if(jy.isImmediateRenderObject)a1&&Xy.setFromMatrixPosition(jy.matrixWorld).applyMatrix4(qy),Xl.push(jy,null,jy.material,n1,Xy.z,null);else if((jy.isMesh||jy.isLine||jy.isPoints)&&(jy.isSkinnedMesh&&jy.skeleton.frame!==Iy.render.frame&&(jy.skeleton.update(),jy.skeleton.frame=Iy.render.frame),!jy.frustumCulled||Cy.intersectsObject(jy))){a1&&Xy.setFromMatrixPosition(jy.matrixWorld).applyMatrix4(qy);var _1=Zy.update(jy),E1=jy.material;if(Array.isArray(E1))for(var b1=_1.groups,S1=0,x1=b1.length;S1<x1;S1++){var W1=b1[S1],N1=E1[W1.materialIndex];N1&&N1.visible&&Xl.push(jy,_1,N1,n1,Xy.z,W1)}else E1.visible&&Xl.push(jy,_1,E1,n1,Xy.z,null)}}for(var R1=jy.children,S1=0,x1=R1.length;S1<x1;S1++)O1(R1[S1],r1,n1,a1)}}function j1(jy,r1,n1,a1){for(var y1=0,_1=jy.length;y1<_1;y1++){var E1=jy[y1],b1=E1.object,S1=E1.geometry,x1=a1===void 0?E1.material:a1,W1=E1.group;if(n1.isArrayCamera){uy=n1;for(var N1=n1.cameras,R1=0,$1=N1.length;R1<$1;R1++){var C1=N1[R1];b1.layers.test(C1.layers)&&(Ey.viewport(hy.copy(C1.viewport)),Yl.setupLights(C1),k1(b1,r1,C1,S1,x1,W1))}}else uy=null,k1(b1,r1,n1,S1,x1,W1)}}function k1(jy,r1,n1,a1,y1,_1){if(jy.onBeforeRender(Zl,r1,n1,a1,y1,_1),Yl=Jy.get(r1,uy||n1),jy.modelViewMatrix.multiplyMatrices(n1.matrixWorldInverse,jy.matrixWorld),jy.normalMatrix.getNormalMatrix(jy.modelViewMatrix),jy.isImmediateRenderObject){var E1=_b(n1,r1,y1,jy);Ey.setMaterial(y1),oy.geometry=null,oy.program=null,oy.wireframe=!1,w1(jy,E1)}else Zl.renderBufferDirect(n1,r1,a1,y1,jy,_1);jy.onAfterRender(Zl,r1,n1,a1,y1,_1),Yl=Jy.get(r1,uy||n1)}function q1(jy,r1,n1){var a1=zy.get(jy),y1=Yl.state.lights,_1=Yl.state.shadowsArray,E1=y1.state.version,b1=Ty.getParameters(jy,y1.state,_1,r1,My.numPlanes,My.numIntersection,n1),S1=Ty.getProgramCacheKey(b1),x1=a1.program,W1=!0;if(x1===void 0)jy.addEventListener("dispose",Wy);else if(x1.cacheKey!==S1)m1(jy);else if(a1.lightsStateVersion!==E1)a1.lightsStateVersion=E1,W1=!1;else{if(b1.shaderID!==void 0)return;W1=!1}W1&&(x1=Ty.acquireProgram(b1,S1),a1.program=x1,a1.uniforms=b1.uniforms,a1.outputEncoding=b1.outputEncoding,jy.program=x1);var N1=x1.getAttributes();if(jy.morphTargets){jy.numSupportedMorphTargets=0;for(var R1=0;R1<Zl.maxMorphTargets;R1++)N1["morphTarget"+R1]>=0&&jy.numSupportedMorphTargets++}if(jy.morphNormals){jy.numSupportedMorphNormals=0;for(var R1=0;R1<Zl.maxMorphNormals;R1++)N1["morphNormal"+R1]>=0&&jy.numSupportedMorphNormals++}var $1=a1.uniforms;(!jy.isShaderMaterial&&!jy.isRawShaderMaterial||jy.clipping===!0)&&(a1.numClippingPlanes=My.numPlanes,a1.numIntersection=My.numIntersection,$1.clippingPlanes=My.uniform),a1.environment=jy.isMeshStandardMaterial?r1.environment:null,a1.fog=r1.fog,a1.needsLights=Y1(jy),a1.lightsStateVersion=E1,a1.needsLights&&($1.ambientLightColor.value=y1.state.ambient,$1.lightProbe.value=y1.state.probe,$1.directionalLights.value=y1.state.directional,$1.directionalLightShadows.value=y1.state.directionalShadow,$1.spotLights.value=y1.state.spot,$1.spotLightShadows.value=y1.state.spotShadow,$1.rectAreaLights.value=y1.state.rectArea,$1.pointLights.value=y1.state.point,$1.pointLightShadows.value=y1.state.pointShadow,$1.hemisphereLights.value=y1.state.hemi,$1.directionalShadowMap.value=y1.state.directionalShadowMap,$1.directionalShadowMatrix.value=y1.state.directionalShadowMatrix,$1.spotShadowMap.value=y1.state.spotShadowMap,$1.spotShadowMatrix.value=y1.state.spotShadowMatrix,$1.pointShadowMap.value=y1.state.pointShadowMap,$1.pointShadowMatrix.value=y1.state.pointShadowMatrix);var C1=a1.program.getUniforms(),T1=WebGLUniforms.seqWithValue(C1.seq,$1);a1.uniformsList=T1}function _b(jy,r1,n1,a1){Uy.resetTextureUnits();var y1=r1.fog,_1=n1.isMeshStandardMaterial?r1.environment:null,E1=ty===null?Zl.outputEncoding:ty.texture.encoding,b1=zy.get(n1),S1=Yl.state.lights;if(Py&&(Dy||jy!==ay)){var x1=jy===ay&&n1.id===iy;My.setState(n1.clippingPlanes,n1.clipIntersection,n1.clipShadows,jy,b1,x1)}n1.version===b1.__version?(b1.program===void 0||n1.fog&&b1.fog!==y1||b1.environment!==_1||b1.needsLights&&b1.lightsStateVersion!==S1.state.version||b1.numClippingPlanes!==void 0&&(b1.numClippingPlanes!==My.numPlanes||b1.numIntersection!==My.numIntersection)||b1.outputEncoding!==E1)&&q1(n1,r1,a1):(q1(n1,r1,a1),b1.__version=n1.version);var W1=!1,N1=!1,R1=!1,$1=b1.program,C1=$1.getUniforms(),T1=b1.uniforms;if(Ey.useProgram($1.program)&&(W1=!0,N1=!0,R1=!0),n1.id!==iy&&(iy=n1.id,N1=!0),W1||ay!==jy){if(C1.setValue(xy,"projectionMatrix",jy.projectionMatrix),ky.logarithmicDepthBuffer&&C1.setValue(xy,"logDepthBufFC",2/(Math.log(jy.far+1)/Math.LN2)),ay!==jy&&(ay=jy,N1=!0,R1=!0),n1.isShaderMaterial||n1.isMeshPhongMaterial||n1.isMeshToonMaterial||n1.isMeshStandardMaterial||n1.envMap){var F1=C1.map.cameraPosition;F1!==void 0&&F1.setValue(xy,Xy.setFromMatrixPosition(jy.matrixWorld))}(n1.isMeshPhongMaterial||n1.isMeshToonMaterial||n1.isMeshLambertMaterial||n1.isMeshBasicMaterial||n1.isMeshStandardMaterial||n1.isShaderMaterial)&&C1.setValue(xy,"isOrthographic",jy.isOrthographicCamera===!0),(n1.isMeshPhongMaterial||n1.isMeshToonMaterial||n1.isMeshLambertMaterial||n1.isMeshBasicMaterial||n1.isMeshStandardMaterial||n1.isShaderMaterial||n1.skinning)&&C1.setValue(xy,"viewMatrix",jy.matrixWorldInverse)}if(n1.skinning){C1.setOptional(xy,a1,"bindMatrix"),C1.setOptional(xy,a1,"bindMatrixInverse");var z1=a1.skeleton;if(z1){var Z1=z1.bones;if(ky.floatVertexTextures){if(z1.boneTexture===void 0){var H1=Math.sqrt(Z1.length*4);H1=MathUtils.ceilPowerOfTwo(H1),H1=Math.max(H1,4);var nx=new Float32Array(H1*H1*4);nx.set(z1.boneMatrices);var J1=new DataTexture(nx,H1,H1,RGBAFormat,FloatType);z1.boneMatrices=nx,z1.boneTexture=J1,z1.boneTextureSize=H1}C1.setValue(xy,"boneTexture",z1.boneTexture,Uy),C1.setValue(xy,"boneTextureSize",z1.boneTextureSize)}else C1.setOptional(xy,z1,"boneMatrices")}}return(N1||b1.receiveShadow!==a1.receiveShadow)&&(b1.receiveShadow=a1.receiveShadow,C1.setValue(xy,"receiveShadow",a1.receiveShadow)),N1&&(C1.setValue(xy,"toneMappingExposure",Zl.toneMappingExposure),C1.setValue(xy,"toneMappingWhitePoint",Zl.toneMappingWhitePoint),b1.needsLights&&Q1(T1,R1),y1&&n1.fog&&Vy.refreshFogUniforms(T1,y1),Vy.refreshMaterialUniforms(T1,n1,_1,fy,cy),T1.ltc_1!==void 0&&(T1.ltc_1.value=UniformsLib.LTC_1),T1.ltc_2!==void 0&&(T1.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(xy,b1.uniformsList,T1,Uy)),n1.isShaderMaterial&&n1.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(xy,b1.uniformsList,T1,Uy),n1.uniformsNeedUpdate=!1),n1.isSpriteMaterial&&C1.setValue(xy,"center",a1.center),C1.setValue(xy,"modelViewMatrix",a1.modelViewMatrix),C1.setValue(xy,"normalMatrix",a1.normalMatrix),C1.setValue(xy,"modelMatrix",a1.matrixWorld),$1}function Q1(jy,r1){jy.ambientLightColor.needsUpdate=r1,jy.lightProbe.needsUpdate=r1,jy.directionalLights.needsUpdate=r1,jy.directionalLightShadows.needsUpdate=r1,jy.pointLights.needsUpdate=r1,jy.pointLightShadows.needsUpdate=r1,jy.spotLights.needsUpdate=r1,jy.spotLightShadows.needsUpdate=r1,jy.rectAreaLights.needsUpdate=r1,jy.hemisphereLights.needsUpdate=r1}function Y1(jy){return jy.isMeshLambertMaterial||jy.isMeshToonMaterial||jy.isMeshPhongMaterial||jy.isMeshStandardMaterial||jy.isShadowMaterial||jy.isShaderMaterial&&jy.lights===!0}this.setFramebuffer=function(jy){Rm!==jy&&ty===null&&xy.bindFramebuffer(36160,jy),Rm=jy},this.getActiveCubeFace=function(){return ry},this.getActiveMipmapLevel=function(){return _g},this.getRenderTarget=function(){return ty},this.setRenderTarget=function(jy,r1,n1){ty=jy,ry=r1,_g=n1,jy&&zy.get(jy).__webglFramebuffer===void 0&&Uy.setupRenderTarget(jy);var a1=Rm,y1=!1;if(jy){var _1=zy.get(jy).__webglFramebuffer;jy.isWebGLCubeRenderTarget?(a1=_1[r1||0],y1=!0):jy.isWebGLMultisampleRenderTarget?a1=zy.get(jy).__webglMultisampledFramebuffer:a1=_1,hy.copy(jy.viewport),my.copy(jy.scissor),ly=jy.scissorTest}else hy.copy(Ay).multiplyScalar(fy).floor(),my.copy(gy).multiplyScalar(fy).floor(),ly=wy;if(ny!==a1&&(xy.bindFramebuffer(36160,a1),ny=a1),Ey.viewport(hy),Ey.scissor(my),Ey.setScissorTest(ly),y1){var E1=zy.get(jy.texture);xy.framebufferTexture2D(36160,36064,34069+(r1||0),E1.__webglTexture,n1||0)}},this.readRenderTargetPixels=function(jy,r1,n1,a1,y1,_1,E1){if(!(jy&&jy.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var b1=zy.get(jy).__webglFramebuffer;if(jy.isWebGLCubeRenderTarget&&E1!==void 0&&(b1=b1[E1]),b1){var S1=!1;b1!==ny&&(xy.bindFramebuffer(36160,b1),S1=!0);try{var x1=jy.texture,W1=x1.format,N1=x1.type;if(W1!==RGBAFormat&&g1.convert(W1)!==xy.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(N1!==UnsignedByteType&&g1.convert(N1)!==xy.getParameter(35738)&&!(N1===FloatType&&(ky.isWebGL2||Ly.get("OES_texture_float")||Ly.get("WEBGL_color_buffer_float")))&&!(N1===HalfFloatType&&(ky.isWebGL2?Ly.get("EXT_color_buffer_float"):Ly.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}xy.checkFramebufferStatus(36160)===36053?r1>=0&&r1<=jy.width-a1&&n1>=0&&n1<=jy.height-y1&&xy.readPixels(r1,n1,a1,y1,g1.convert(W1),g1.convert(N1),_1):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{S1&&xy.bindFramebuffer(36160,ny)}}},this.copyFramebufferToTexture=function(jy,r1,n1){n1===void 0&&(n1=0);var a1=Math.pow(2,-n1),y1=Math.floor(r1.image.width*a1),_1=Math.floor(r1.image.height*a1),E1=g1.convert(r1.format);Uy.setTexture2D(r1,0),xy.copyTexImage2D(3553,n1,E1,jy.x,jy.y,y1,_1,0),Ey.unbindTexture()},this.copyTextureToTexture=function(jy,r1,n1,a1){a1===void 0&&(a1=0);var y1=r1.image.width,_1=r1.image.height,E1=g1.convert(n1.format),b1=g1.convert(n1.type);Uy.setTexture2D(n1,0),r1.isDataTexture?xy.texSubImage2D(3553,a1,jy.x,jy.y,y1,_1,E1,b1,r1.image.data):r1.isCompressedTexture?xy.compressedTexSubImage2D(3553,a1,jy.x,jy.y,r1.mipmaps[0].width,r1.mipmaps[0].height,E1,r1.mipmaps[0].data):xy.texSubImage2D(3553,a1,jy.x,jy.y,E1,b1,r1.image),a1===0&&n1.generateMipmaps&&xy.generateMipmap(3553),Ey.unbindTexture()},this.initTexture=function(jy){Uy.setTexture2D(jy,0),Ey.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(cr,vn){this.name="",this.color=new Color(cr),this.density=vn!==void 0?vn:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(cr,vn,yn){this.name="",this.color=new Color(cr),this.near=vn!==void 0?vn:1,this.far=yn!==void 0?yn:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(cr,vn){this.array=cr,this.stride=vn,this.count=cr!==void 0?cr.length/vn:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(cr){cr===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(cr){return this.usage=cr,this},copy:function(cr){return this.array=new cr.array.constructor(cr.array),this.count=cr.count,this.stride=cr.stride,this.usage=cr.usage,this},copyAt:function(cr,vn,yn){cr*=this.stride,yn*=vn.stride;for(var Rn=0,Bn=this.stride;Rn<Bn;Rn++)this.array[cr+Rn]=vn.array[yn+Rn];return this},set:function(cr,vn){return vn===void 0&&(vn=0),this.array.set(cr,vn),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(cr){return this.onUploadCallback=cr,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(cr,vn,yn,Rn){this.name="",this.data=cr,this.itemSize=vn,this.offset=yn,this.normalized=Rn===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(cr){for(var vn=0,yn=this.data.count;vn<yn;vn++)_vector$6.x=this.getX(vn),_vector$6.y=this.getY(vn),_vector$6.z=this.getZ(vn),_vector$6.applyMatrix4(cr),this.setXYZ(vn,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(cr,vn){return this.data.array[cr*this.data.stride+this.offset]=vn,this},setY:function(cr,vn){return this.data.array[cr*this.data.stride+this.offset+1]=vn,this},setZ:function(cr,vn){return this.data.array[cr*this.data.stride+this.offset+2]=vn,this},setW:function(cr,vn){return this.data.array[cr*this.data.stride+this.offset+3]=vn,this},getX:function(cr){return this.data.array[cr*this.data.stride+this.offset]},getY:function(cr){return this.data.array[cr*this.data.stride+this.offset+1]},getZ:function(cr){return this.data.array[cr*this.data.stride+this.offset+2]},getW:function(cr){return this.data.array[cr*this.data.stride+this.offset+3]},setXY:function(cr,vn,yn){return cr=cr*this.data.stride+this.offset,this.data.array[cr+0]=vn,this.data.array[cr+1]=yn,this},setXYZ:function(cr,vn,yn,Rn){return cr=cr*this.data.stride+this.offset,this.data.array[cr+0]=vn,this.data.array[cr+1]=yn,this.data.array[cr+2]=Rn,this},setXYZW:function(cr,vn,yn,Rn,Bn){return cr=cr*this.data.stride+this.offset,this.data.array[cr+0]=vn,this.data.array[cr+1]=yn,this.data.array[cr+2]=Rn,this.data.array[cr+3]=Bn,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var cr=[],vn=0;vn<this.count;vn++)for(var yn=vn*this.data.stride+this.offset,Rn=0;Rn<this.itemSize;Rn++)cr.push(this.data.array[yn+Rn]);return new BufferAttribute(new this.array.constructor(cr),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var cr=[],vn=0;vn<this.count;vn++)for(var yn=vn*this.data.stride+this.offset,Rn=0;Rn<this.itemSize;Rn++)cr.push(this.data.array[yn+Rn]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:cr,normalized:this.normalized}}});function SpriteMaterial(cr){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(cr)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.map=cr.map,this.alphaMap=cr.alphaMap,this.rotation=cr.rotation,this.sizeAttenuation=cr.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(cr){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var vn=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),yn=new InterleavedBuffer(vn,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(yn,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(yn,2,3,!1))}this.geometry=_geometry,this.material=cr!==void 0?cr:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(cr,vn){cr.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(cr.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(cr.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),cr.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var yn=this.material.rotation,Rn,Bn;yn!==0&&(Bn=Math.cos(yn),Rn=Math.sin(yn));var Co=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Co,_worldScale,Rn,Bn),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Co,_worldScale,Rn,Bn),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Co,_worldScale,Rn,Bn),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Po=cr.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Po===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Co,_worldScale,Rn,Bn),_uvB$1.set(0,1),Po=cr.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Po===null))){var To=cr.ray.origin.distanceTo(_intersectPoint);To<cr.near||To>cr.far||vn.push({distance:To,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(cr){return Object3D.prototype.copy.call(this,cr),cr.center!==void 0&&this.center.copy(cr.center),this}});function transformVertex(cr,vn,yn,Rn,Bn,Co){_alignedPosition.subVectors(cr,yn).addScalar(.5).multiply(Rn),Bn!==void 0?(_rotatedPosition.x=Co*_alignedPosition.x-Bn*_alignedPosition.y,_rotatedPosition.y=Bn*_alignedPosition.x+Co*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),cr.copy(vn),cr.x+=_rotatedPosition.x,cr.y+=_rotatedPosition.y,cr.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(cr){Object3D.prototype.copy.call(this,cr,!1);for(var vn=cr.levels,yn=0,Rn=vn.length;yn<Rn;yn++){var Bn=vn[yn];this.addLevel(Bn.object.clone(),Bn.distance)}return this.autoUpdate=cr.autoUpdate,this},addLevel:function(cr,vn){vn===void 0&&(vn=0),vn=Math.abs(vn);for(var yn=this.levels,Rn=0;Rn<yn.length&&!(vn<yn[Rn].distance);Rn++);return yn.splice(Rn,0,{distance:vn,object:cr}),this.add(cr),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(cr){var vn=this.levels;if(vn.length>0){for(var yn=1,Rn=vn.length;yn<Rn&&!(cr<vn[yn].distance);yn++);return vn[yn-1].object}return null},raycast:function(cr,vn){var yn=this.levels;if(yn.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var Rn=cr.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(Rn).raycast(cr,vn)}},update:function(cr){var vn=this.levels;if(vn.length>1){_v1$4.setFromMatrixPosition(cr.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var yn=_v1$4.distanceTo(_v2$2)/cr.zoom;vn[0].object.visible=!0;for(var Rn=1,Bn=vn.length;Rn<Bn&&yn>=vn[Rn].distance;Rn++)vn[Rn-1].object.visible=!1,vn[Rn].object.visible=!0;for(this._currentLevel=Rn-1;Rn<Bn;Rn++)vn[Rn].object.visible=!1}},toJSON:function(cr){var vn=Object3D.prototype.toJSON.call(this,cr);this.autoUpdate===!1&&(vn.object.autoUpdate=!1),vn.object.levels=[];for(var yn=this.levels,Rn=0,Bn=yn.length;Rn<Bn;Rn++){var Co=yn[Rn];vn.object.levels.push({object:Co.object.uuid,distance:Co.distance})}return vn}});function SkinnedMesh(cr,vn){cr&&cr.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,cr,vn),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(cr,vn){this.skeleton=cr,vn===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),vn=this.matrixWorld),this.bindMatrix.copy(vn),this.bindMatrixInverse.getInverse(vn)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var cr=new Vector4,vn=this.geometry.attributes.skinWeight,yn=0,Rn=vn.count;yn<Rn;yn++){cr.x=vn.getX(yn),cr.y=vn.getY(yn),cr.z=vn.getZ(yn),cr.w=vn.getW(yn);var Bn=1/cr.manhattanLength();Bn!==1/0?cr.multiplyScalar(Bn):cr.set(1,0,0,0),vn.setXYZW(yn,cr.x,cr.y,cr.z,cr.w)}},updateMatrixWorld:function(cr){Mesh.prototype.updateMatrixWorld.call(this,cr),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var cr=new Vector3,vn=new Vector4,yn=new Vector4,Rn=new Vector3,Bn=new Matrix4;return function(Co,Po){var To=this.skeleton,Io=this.geometry;vn.fromBufferAttribute(Io.attributes.skinIndex,Co),yn.fromBufferAttribute(Io.attributes.skinWeight,Co),cr.fromBufferAttribute(Io.attributes.position,Co).applyMatrix4(this.bindMatrix),Po.set(0,0,0);for(var $l=0;$l<4;$l++){var Wl=yn.getComponent($l);if(Wl!==0){var Xl=vn.getComponent($l);Bn.multiplyMatrices(To.bones[Xl].matrixWorld,To.boneInverses[Xl]),Po.addScaledVector(Rn.copy(cr).applyMatrix4(Bn),Wl)}}return Po.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(cr,vn){if(cr=cr||[],this.bones=cr.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,vn===void 0)this.calculateInverses();else if(this.bones.length===vn.length)this.boneInverses=vn.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var yn=0,Rn=this.bones.length;yn<Rn;yn++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var cr=0,vn=this.bones.length;cr<vn;cr++){var yn=new Matrix4;this.bones[cr]&&yn.getInverse(this.bones[cr].matrixWorld),this.boneInverses.push(yn)}},pose:function(){var cr,vn,yn;for(vn=0,yn=this.bones.length;vn<yn;vn++)cr=this.bones[vn],cr&&cr.matrixWorld.getInverse(this.boneInverses[vn]);for(vn=0,yn=this.bones.length;vn<yn;vn++)cr=this.bones[vn],cr&&(cr.parent&&cr.parent.isBone?(cr.matrix.getInverse(cr.parent.matrixWorld),cr.matrix.multiply(cr.matrixWorld)):cr.matrix.copy(cr.matrixWorld),cr.matrix.decompose(cr.position,cr.quaternion,cr.scale))},update:function(){for(var cr=this.bones,vn=this.boneInverses,yn=this.boneMatrices,Rn=this.boneTexture,Bn=0,Co=cr.length;Bn<Co;Bn++){var Po=cr[Bn]?cr[Bn].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Po,vn[Bn]),_offsetMatrix.toArray(yn,Bn*16)}Rn!==void 0&&(Rn.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(cr){for(var vn=0,yn=this.bones.length;vn<yn;vn++){var Rn=this.bones[vn];if(Rn.name===cr)return Rn}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(cr,vn,yn){Mesh.call(this,cr,vn),this.instanceMatrix=new BufferAttribute(new Float32Array(yn*16),16),this.count=yn,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(cr,vn){vn.fromArray(this.instanceMatrix.array,cr*16)},raycast:function(cr,vn){var yn=this.matrixWorld,Rn=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var Bn=0;Bn<Rn;Bn++){this.getMatrixAt(Bn,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(yn,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(cr,_instanceIntersects);for(var Co=0,Po=_instanceIntersects.length;Co<Po;Co++){var To=_instanceIntersects[Co];To.instanceId=Bn,To.object=this,vn.push(To)}_instanceIntersects.length=0}},setMatrixAt:function(cr,vn){vn.toArray(this.instanceMatrix.array,cr*16)},updateMorphTargets:function(){}});function LineBasicMaterial(cr){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(cr)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.linewidth=cr.linewidth,this.linecap=cr.linecap,this.linejoin=cr.linejoin,this.morphTargets=cr.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line(cr,vn,yn){yn===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=cr!==void 0?cr:new BufferGeometry,this.material=vn!==void 0?vn:new LineBasicMaterial,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,computeLineDistances:function(){var cr=this.geometry;if(cr.isBufferGeometry)if(cr.index===null){for(var vn=cr.attributes.position,yn=[0],Rn=1,Bn=vn.count;Rn<Bn;Rn++)_start.fromBufferAttribute(vn,Rn-1),_end.fromBufferAttribute(vn,Rn),yn[Rn]=yn[Rn-1],yn[Rn]+=_start.distanceTo(_end);cr.setAttribute("lineDistance",new Float32BufferAttribute(yn,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(cr.isGeometry){var Co=cr.vertices,yn=cr.lineDistances;yn[0]=0;for(var Rn=1,Bn=Co.length;Rn<Bn;Rn++)yn[Rn]=yn[Rn-1],yn[Rn]+=Co[Rn-1].distanceTo(Co[Rn])}return this},raycast:function(cr,vn){var yn=this.geometry,Rn=this.matrixWorld,Bn=cr.params.Line.threshold;if(yn.boundingSphere===null&&yn.computeBoundingSphere(),_sphere$2.copy(yn.boundingSphere),_sphere$2.applyMatrix4(Rn),_sphere$2.radius+=Bn,cr.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(Rn),_ray$1.copy(cr.ray).applyMatrix4(_inverseMatrix$1);var Co=Bn/((this.scale.x+this.scale.y+this.scale.z)/3),Po=Co*Co,To=new Vector3,Io=new Vector3,$l=new Vector3,Wl=new Vector3,Xl=this&&this.isLineSegments?2:1;if(yn.isBufferGeometry){var Yl=yn.index,Zl=yn.attributes,ey=Zl.position.array;if(Yl!==null)for(var Rm=Yl.array,ry=0,_g=Rm.length-1;ry<_g;ry+=Xl){var ty=Rm[ry],ny=Rm[ry+1];To.fromArray(ey,ty*3),Io.fromArray(ey,ny*3);var iy=_ray$1.distanceSqToSegment(To,Io,Wl,$l);if(!(iy>Po)){Wl.applyMatrix4(this.matrixWorld);var oy=cr.ray.origin.distanceTo(Wl);oy<cr.near||oy>cr.far||vn.push({distance:oy,point:$l.clone().applyMatrix4(this.matrixWorld),index:ry,face:null,faceIndex:null,object:this})}}else for(var ry=0,_g=ey.length/3-1;ry<_g;ry+=Xl){To.fromArray(ey,3*ry),Io.fromArray(ey,3*ry+3);var iy=_ray$1.distanceSqToSegment(To,Io,Wl,$l);if(!(iy>Po)){Wl.applyMatrix4(this.matrixWorld);var oy=cr.ray.origin.distanceTo(Wl);oy<cr.near||oy>cr.far||vn.push({distance:oy,point:$l.clone().applyMatrix4(this.matrixWorld),index:ry,face:null,faceIndex:null,object:this})}}}else if(yn.isGeometry)for(var ay=yn.vertices,uy=ay.length,ry=0;ry<uy-1;ry+=Xl){var iy=_ray$1.distanceSqToSegment(ay[ry],ay[ry+1],Wl,$l);if(!(iy>Po)){Wl.applyMatrix4(this.matrixWorld);var oy=cr.ray.origin.distanceTo(Wl);oy<cr.near||oy>cr.far||vn.push({distance:oy,point:$l.clone().applyMatrix4(this.matrixWorld),index:ry,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var cr=this.geometry,vn,yn,Rn;if(cr.isBufferGeometry){var Bn=cr.morphAttributes,Co=Object.keys(Bn);if(Co.length>0){var Po=Bn[Co[0]];if(Po!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},vn=0,yn=Po.length;vn<yn;vn++)Rn=Po[vn].name||String(vn),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rn]=vn}}else{var To=cr.morphTargets;To!==void 0&&To.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(cr,vn){Line.call(this,cr,vn),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var cr=this.geometry;if(cr.isBufferGeometry)if(cr.index===null){for(var vn=cr.attributes.position,yn=[],Rn=0,Bn=vn.count;Rn<Bn;Rn+=2)_start$1.fromBufferAttribute(vn,Rn),_end$1.fromBufferAttribute(vn,Rn+1),yn[Rn]=Rn===0?0:yn[Rn-1],yn[Rn+1]=yn[Rn]+_start$1.distanceTo(_end$1);cr.setAttribute("lineDistance",new Float32BufferAttribute(yn,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(cr.isGeometry)for(var Co=cr.vertices,yn=cr.lineDistances,Rn=0,Bn=Co.length;Rn<Bn;Rn+=2)_start$1.copy(Co[Rn]),_end$1.copy(Co[Rn+1]),yn[Rn]=Rn===0?0:yn[Rn-1],yn[Rn+1]=yn[Rn]+_start$1.distanceTo(_end$1);return this}});function LineLoop(cr,vn){Line.call(this,cr,vn),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(cr){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(cr)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.map=cr.map,this.alphaMap=cr.alphaMap,this.size=cr.size,this.sizeAttenuation=cr.sizeAttenuation,this.morphTargets=cr.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(cr,vn){Object3D.call(this),this.type="Points",this.geometry=cr!==void 0?cr:new BufferGeometry,this.material=vn!==void 0?vn:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(cr,vn){var yn=this.geometry,Rn=this.matrixWorld,Bn=cr.params.Points.threshold;if(yn.boundingSphere===null&&yn.computeBoundingSphere(),_sphere$3.copy(yn.boundingSphere),_sphere$3.applyMatrix4(Rn),_sphere$3.radius+=Bn,cr.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(Rn),_ray$2.copy(cr.ray).applyMatrix4(_inverseMatrix$2);var Co=Bn/((this.scale.x+this.scale.y+this.scale.z)/3),Po=Co*Co;if(yn.isBufferGeometry){var To=yn.index,Io=yn.attributes,$l=Io.position.array;if(To!==null)for(var Wl=To.array,Xl=0,Yl=Wl.length;Xl<Yl;Xl++){var Zl=Wl[Xl];_position$1.fromArray($l,Zl*3),testPoint(_position$1,Zl,Po,Rn,cr,vn,this)}else for(var Xl=0,ey=$l.length/3;Xl<ey;Xl++)_position$1.fromArray($l,Xl*3),testPoint(_position$1,Xl,Po,Rn,cr,vn,this)}else for(var Rm=yn.vertices,Xl=0,ey=Rm.length;Xl<ey;Xl++)testPoint(Rm[Xl],Xl,Po,Rn,cr,vn,this)}},updateMorphTargets:function(){var cr=this.geometry,vn,yn,Rn;if(cr.isBufferGeometry){var Bn=cr.morphAttributes,Co=Object.keys(Bn);if(Co.length>0){var Po=Bn[Co[0]];if(Po!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},vn=0,yn=Po.length;vn<yn;vn++)Rn=Po[vn].name||String(vn),this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rn]=vn}}else{var To=cr.morphTargets;To!==void 0&&To.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(cr,vn,yn,Rn,Bn,Co,Po){var To=_ray$2.distanceSqToPoint(cr);if(To<yn){var Io=new Vector3;_ray$2.closestPointToPoint(cr,Io),Io.applyMatrix4(Rn);var $l=Bn.ray.origin.distanceTo(Io);if($l<Bn.near||$l>Bn.far)return;Co.push({distance:$l,distanceToRay:Math.sqrt(To),point:Io,index:vn,face:null,object:Po})}}function VideoTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io){Texture.call(this,cr,vn,yn,Rn,Bn,Co,Po,To,Io),this.format=Po!==void 0?Po:RGBFormat,this.minFilter=Co!==void 0?Co:LinearFilter,this.magFilter=Bn!==void 0?Bn:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var cr=this.image;cr.readyState>=cr.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl){Texture.call(this,null,Co,Po,To,Io,$l,Rn,Bn,Wl,Xl),this.image={width:vn,height:yn},this.mipmaps=cr,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io){Texture.call(this,cr,vn,yn,Rn,Bn,Co,Po,To,Io),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l){if($l=$l!==void 0?$l:DepthFormat,$l!==DepthFormat&&$l!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");yn===void 0&&$l===DepthFormat&&(yn=UnsignedShortType),yn===void 0&&$l===DepthStencilFormat&&(yn=UnsignedInt248Type),Texture.call(this,null,Rn,Bn,Co,Po,To,$l,yn,Io),this.image={width:cr,height:vn},this.magFilter=Po!==void 0?Po:NearestFilter,this.minFilter=To!==void 0?To:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(cr){BufferGeometry.call(this),this.type="WireframeGeometry";var vn=[],yn,Rn,Bn,Co,Po,To=[0,0],Io={},$l,Wl,Xl,Yl,Zl=["a","b","c"],ey;if(cr&&cr.isGeometry){var Rm=cr.faces;for(yn=0,Bn=Rm.length;yn<Bn;yn++){var ry=Rm[yn];for(Rn=0;Rn<3;Rn++)Wl=ry[Zl[Rn]],Xl=ry[Zl[(Rn+1)%3]],To[0]=Math.min(Wl,Xl),To[1]=Math.max(Wl,Xl),Yl=To[0]+","+To[1],Io[Yl]===void 0&&(Io[Yl]={index1:To[0],index2:To[1]})}for(Yl in Io)$l=Io[Yl],ey=cr.vertices[$l.index1],vn.push(ey.x,ey.y,ey.z),ey=cr.vertices[$l.index2],vn.push(ey.x,ey.y,ey.z)}else if(cr&&cr.isBufferGeometry){var _g,ty,ny,iy,oy,ay,uy,hy;if(ey=new Vector3,cr.index!==null){for(_g=cr.attributes.position,ty=cr.index,ny=cr.groups,ny.length===0&&(ny=[{start:0,count:ty.count,materialIndex:0}]),Co=0,Po=ny.length;Co<Po;++Co)for(iy=ny[Co],oy=iy.start,ay=iy.count,yn=oy,Bn=oy+ay;yn<Bn;yn+=3)for(Rn=0;Rn<3;Rn++)Wl=ty.getX(yn+Rn),Xl=ty.getX(yn+(Rn+1)%3),To[0]=Math.min(Wl,Xl),To[1]=Math.max(Wl,Xl),Yl=To[0]+","+To[1],Io[Yl]===void 0&&(Io[Yl]={index1:To[0],index2:To[1]});for(Yl in Io)$l=Io[Yl],ey.fromBufferAttribute(_g,$l.index1),vn.push(ey.x,ey.y,ey.z),ey.fromBufferAttribute(_g,$l.index2),vn.push(ey.x,ey.y,ey.z)}else for(_g=cr.attributes.position,yn=0,Bn=_g.count/3;yn<Bn;yn++)for(Rn=0;Rn<3;Rn++)uy=3*yn+Rn,ey.fromBufferAttribute(_g,uy),vn.push(ey.x,ey.y,ey.z),hy=3*yn+(Rn+1)%3,ey.fromBufferAttribute(_g,hy),vn.push(ey.x,ey.y,ey.z)}this.setAttribute("position",new Float32BufferAttribute(vn,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(cr,vn,yn){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:cr,slices:vn,stacks:yn},this.fromBufferGeometry(new ParametricBufferGeometry(cr,vn,yn)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(cr,vn,yn){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:cr,slices:vn,stacks:yn};var Rn=[],Bn=[],Co=[],Po=[],To=1e-5,Io=new Vector3,$l=new Vector3,Wl=new Vector3,Xl=new Vector3,Yl=new Vector3,Zl,ey;cr.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var Rm=vn+1;for(Zl=0;Zl<=yn;Zl++){var ry=Zl/yn;for(ey=0;ey<=vn;ey++){var _g=ey/vn;cr(_g,ry,$l),Bn.push($l.x,$l.y,$l.z),_g-To>=0?(cr(_g-To,ry,Wl),Xl.subVectors($l,Wl)):(cr(_g+To,ry,Wl),Xl.subVectors(Wl,$l)),ry-To>=0?(cr(_g,ry-To,Wl),Yl.subVectors($l,Wl)):(cr(_g,ry+To,Wl),Yl.subVectors(Wl,$l)),Io.crossVectors(Xl,Yl).normalize(),Co.push(Io.x,Io.y,Io.z),Po.push(_g,ry)}}for(Zl=0;Zl<yn;Zl++)for(ey=0;ey<vn;ey++){var ty=Zl*Rm+ey,ny=Zl*Rm+ey+1,iy=(Zl+1)*Rm+ey+1,oy=(Zl+1)*Rm+ey;Rn.push(ty,ny,oy),Rn.push(ny,iy,oy)}this.setIndex(Rn),this.setAttribute("position",new Float32BufferAttribute(Bn,3)),this.setAttribute("normal",new Float32BufferAttribute(Co,3)),this.setAttribute("uv",new Float32BufferAttribute(Po,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(cr,vn,yn,Rn){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:cr,indices:vn,radius:yn,detail:Rn},this.fromBufferGeometry(new PolyhedronBufferGeometry(cr,vn,yn,Rn)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(cr,vn,yn,Rn){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:cr,indices:vn,radius:yn,detail:Rn},yn=yn||1,Rn=Rn||0;var Bn=[],Co=[];Po(Rn),Io(yn),$l(),this.setAttribute("position",new Float32BufferAttribute(Bn,3)),this.setAttribute("normal",new Float32BufferAttribute(Bn.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Co,2)),Rn===0?this.computeVertexNormals():this.normalizeNormals();function Po(_g){for(var ty=new Vector3,ny=new Vector3,iy=new Vector3,oy=0;oy<vn.length;oy+=3)Yl(vn[oy+0],ty),Yl(vn[oy+1],ny),Yl(vn[oy+2],iy),To(ty,ny,iy,_g)}function To(_g,ty,ny,iy){var oy=Math.pow(2,iy),ay=[],uy,hy;for(uy=0;uy<=oy;uy++){ay[uy]=[];var my=_g.clone().lerp(ny,uy/oy),ly=ty.clone().lerp(ny,uy/oy),sy=oy-uy;for(hy=0;hy<=sy;hy++)hy===0&&uy===oy?ay[uy][hy]=my:ay[uy][hy]=my.clone().lerp(ly,hy/sy)}for(uy=0;uy<oy;uy++)for(hy=0;hy<2*(oy-uy)-1;hy++){var cy=Math.floor(hy/2);hy%2===0?(Xl(ay[uy][cy+1]),Xl(ay[uy+1][cy]),Xl(ay[uy][cy])):(Xl(ay[uy][cy+1]),Xl(ay[uy+1][cy+1]),Xl(ay[uy+1][cy]))}}function Io(_g){for(var ty=new Vector3,ny=0;ny<Bn.length;ny+=3)ty.x=Bn[ny+0],ty.y=Bn[ny+1],ty.z=Bn[ny+2],ty.normalize().multiplyScalar(_g),Bn[ny+0]=ty.x,Bn[ny+1]=ty.y,Bn[ny+2]=ty.z}function $l(){for(var _g=new Vector3,ty=0;ty<Bn.length;ty+=3){_g.x=Bn[ty+0],_g.y=Bn[ty+1],_g.z=Bn[ty+2];var ny=Rm(_g)/2/Math.PI+.5,iy=ry(_g)/Math.PI+.5;Co.push(ny,1-iy)}Zl(),Wl()}function Wl(){for(var _g=0;_g<Co.length;_g+=6){var ty=Co[_g+0],ny=Co[_g+2],iy=Co[_g+4],oy=Math.max(ty,ny,iy),ay=Math.min(ty,ny,iy);oy>.9&&ay<.1&&(ty<.2&&(Co[_g+0]+=1),ny<.2&&(Co[_g+2]+=1),iy<.2&&(Co[_g+4]+=1))}}function Xl(_g){Bn.push(_g.x,_g.y,_g.z)}function Yl(_g,ty){var ny=_g*3;ty.x=cr[ny+0],ty.y=cr[ny+1],ty.z=cr[ny+2]}function Zl(){for(var _g=new Vector3,ty=new Vector3,ny=new Vector3,iy=new Vector3,oy=new Vector2,ay=new Vector2,uy=new Vector2,hy=0,my=0;hy<Bn.length;hy+=9,my+=6){_g.set(Bn[hy+0],Bn[hy+1],Bn[hy+2]),ty.set(Bn[hy+3],Bn[hy+4],Bn[hy+5]),ny.set(Bn[hy+6],Bn[hy+7],Bn[hy+8]),oy.set(Co[my+0],Co[my+1]),ay.set(Co[my+2],Co[my+3]),uy.set(Co[my+4],Co[my+5]),iy.copy(_g).add(ty).add(ny).divideScalar(3);var ly=Rm(iy);ey(oy,my+0,_g,ly),ey(ay,my+2,ty,ly),ey(uy,my+4,ny,ly)}}function ey(_g,ty,ny,iy){iy<0&&_g.x===1&&(Co[ty]=_g.x-1),ny.x===0&&ny.z===0&&(Co[ty]=iy/2/Math.PI+.5)}function Rm(_g){return Math.atan2(_g.z,-_g.x)}function ry(_g){return Math.atan2(-_g.y,Math.sqrt(_g.x*_g.x+_g.z*_g.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(cr,vn){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:cr,detail:vn},this.fromBufferGeometry(new TetrahedronBufferGeometry(cr,vn)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(cr,vn){var yn=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Rn=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,yn,Rn,cr,vn),this.type="TetrahedronBufferGeometry",this.parameters={radius:cr,detail:vn}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(cr,vn){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:cr,detail:vn},this.fromBufferGeometry(new OctahedronBufferGeometry(cr,vn)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(cr,vn){var yn=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Rn=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,yn,Rn,cr,vn),this.type="OctahedronBufferGeometry",this.parameters={radius:cr,detail:vn}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(cr,vn){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:cr,detail:vn},this.fromBufferGeometry(new IcosahedronBufferGeometry(cr,vn)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(cr,vn){var yn=(1+Math.sqrt(5))/2,Rn=[-1,yn,0,1,yn,0,-1,-yn,0,1,-yn,0,0,-1,yn,0,1,yn,0,-1,-yn,0,1,-yn,yn,0,-1,yn,0,1,-yn,0,-1,-yn,0,1],Bn=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,Rn,Bn,cr,vn),this.type="IcosahedronBufferGeometry",this.parameters={radius:cr,detail:vn}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(cr,vn){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:cr,detail:vn},this.fromBufferGeometry(new DodecahedronBufferGeometry(cr,vn)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(cr,vn){var yn=(1+Math.sqrt(5))/2,Rn=1/yn,Bn=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Rn,-yn,0,-Rn,yn,0,Rn,-yn,0,Rn,yn,-Rn,-yn,0,-Rn,yn,0,Rn,-yn,0,Rn,yn,0,-yn,0,-Rn,yn,0,-Rn,-yn,0,Rn,yn,0,Rn],Co=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,Bn,Co,cr,vn),this.type="DodecahedronBufferGeometry",this.parameters={radius:cr,detail:vn}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(cr,vn,yn,Rn,Bn,Co){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:cr,tubularSegments:vn,radius:yn,radialSegments:Rn,closed:Bn},Co!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Po=new TubeBufferGeometry(cr,vn,yn,Rn,Bn);this.tangents=Po.tangents,this.normals=Po.normals,this.binormals=Po.binormals,this.fromBufferGeometry(Po),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(cr,vn,yn,Rn,Bn){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:cr,tubularSegments:vn,radius:yn,radialSegments:Rn,closed:Bn},vn=vn||64,yn=yn||1,Rn=Rn||8,Bn=Bn||!1;var Co=cr.computeFrenetFrames(vn,Bn);this.tangents=Co.tangents,this.normals=Co.normals,this.binormals=Co.binormals;var Po=new Vector3,To=new Vector3,Io=new Vector2,$l=new Vector3,Wl,Xl,Yl=[],Zl=[],ey=[],Rm=[];ry(),this.setIndex(Rm),this.setAttribute("position",new Float32BufferAttribute(Yl,3)),this.setAttribute("normal",new Float32BufferAttribute(Zl,3)),this.setAttribute("uv",new Float32BufferAttribute(ey,2));function ry(){for(Wl=0;Wl<vn;Wl++)_g(Wl);_g(Bn===!1?vn:0),ny(),ty()}function _g(iy){$l=cr.getPointAt(iy/vn,$l);var oy=Co.normals[iy],ay=Co.binormals[iy];for(Xl=0;Xl<=Rn;Xl++){var uy=Xl/Rn*Math.PI*2,hy=Math.sin(uy),my=-Math.cos(uy);To.x=my*oy.x+hy*ay.x,To.y=my*oy.y+hy*ay.y,To.z=my*oy.z+hy*ay.z,To.normalize(),Zl.push(To.x,To.y,To.z),Po.x=$l.x+yn*To.x,Po.y=$l.y+yn*To.y,Po.z=$l.z+yn*To.z,Yl.push(Po.x,Po.y,Po.z)}}function ty(){for(Xl=1;Xl<=vn;Xl++)for(Wl=1;Wl<=Rn;Wl++){var iy=(Rn+1)*(Xl-1)+(Wl-1),oy=(Rn+1)*Xl+(Wl-1),ay=(Rn+1)*Xl+Wl,uy=(Rn+1)*(Xl-1)+Wl;Rm.push(iy,oy,uy),Rm.push(oy,ay,uy)}}function ny(){for(Wl=0;Wl<=vn;Wl++)for(Xl=0;Xl<=Rn;Xl++)Io.x=Wl/vn,Io.y=Xl/Rn,ey.push(Io.x,Io.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var cr=BufferGeometry.prototype.toJSON.call(this);return cr.path=this.parameters.path.toJSON(),cr};function TorusKnotGeometry(cr,vn,yn,Rn,Bn,Co,Po){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:cr,tube:vn,tubularSegments:yn,radialSegments:Rn,p:Bn,q:Co},Po!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(cr,vn,yn,Rn,Bn,Co)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(cr,vn,yn,Rn,Bn,Co){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:cr,tube:vn,tubularSegments:yn,radialSegments:Rn,p:Bn,q:Co},cr=cr||1,vn=vn||.4,yn=Math.floor(yn)||64,Rn=Math.floor(Rn)||8,Bn=Bn||2,Co=Co||3;var Po=[],To=[],Io=[],$l=[],Wl,Xl,Yl=new Vector3,Zl=new Vector3,ey=new Vector3,Rm=new Vector3,ry=new Vector3,_g=new Vector3,ty=new Vector3;for(Wl=0;Wl<=yn;++Wl){var ny=Wl/yn*Bn*Math.PI*2;for(sy(ny,Bn,Co,cr,ey),sy(ny+.01,Bn,Co,cr,Rm),_g.subVectors(Rm,ey),ty.addVectors(Rm,ey),ry.crossVectors(_g,ty),ty.crossVectors(ry,_g),ry.normalize(),ty.normalize(),Xl=0;Xl<=Rn;++Xl){var iy=Xl/Rn*Math.PI*2,oy=-vn*Math.cos(iy),ay=vn*Math.sin(iy);Yl.x=ey.x+(oy*ty.x+ay*ry.x),Yl.y=ey.y+(oy*ty.y+ay*ry.y),Yl.z=ey.z+(oy*ty.z+ay*ry.z),To.push(Yl.x,Yl.y,Yl.z),Zl.subVectors(Yl,ey).normalize(),Io.push(Zl.x,Zl.y,Zl.z),$l.push(Wl/yn),$l.push(Xl/Rn)}}for(Xl=1;Xl<=yn;Xl++)for(Wl=1;Wl<=Rn;Wl++){var uy=(Rn+1)*(Xl-1)+(Wl-1),hy=(Rn+1)*Xl+(Wl-1),my=(Rn+1)*Xl+Wl,ly=(Rn+1)*(Xl-1)+Wl;Po.push(uy,hy,ly),Po.push(hy,my,ly)}this.setIndex(Po),this.setAttribute("position",new Float32BufferAttribute(To,3)),this.setAttribute("normal",new Float32BufferAttribute(Io,3)),this.setAttribute("uv",new Float32BufferAttribute($l,2));function sy(cy,fy,vy,dy,Ay){var gy=Math.cos(cy),wy=Math.sin(cy),Cy=vy/fy*cy,My=Math.cos(Cy);Ay.x=dy*(2+My)*.5*gy,Ay.y=dy*(2+My)*wy*.5,Ay.z=dy*Math.sin(Cy)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(cr,vn,yn,Rn,Bn){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:cr,tube:vn,radialSegments:yn,tubularSegments:Rn,arc:Bn},this.fromBufferGeometry(new TorusBufferGeometry(cr,vn,yn,Rn,Bn)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(cr,vn,yn,Rn,Bn){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:cr,tube:vn,radialSegments:yn,tubularSegments:Rn,arc:Bn},cr=cr||1,vn=vn||.4,yn=Math.floor(yn)||8,Rn=Math.floor(Rn)||6,Bn=Bn||Math.PI*2;var Co=[],Po=[],To=[],Io=[],$l=new Vector3,Wl=new Vector3,Xl=new Vector3,Yl,Zl;for(Yl=0;Yl<=yn;Yl++)for(Zl=0;Zl<=Rn;Zl++){var ey=Zl/Rn*Bn,Rm=Yl/yn*Math.PI*2;Wl.x=(cr+vn*Math.cos(Rm))*Math.cos(ey),Wl.y=(cr+vn*Math.cos(Rm))*Math.sin(ey),Wl.z=vn*Math.sin(Rm),Po.push(Wl.x,Wl.y,Wl.z),$l.x=cr*Math.cos(ey),$l.y=cr*Math.sin(ey),Xl.subVectors(Wl,$l).normalize(),To.push(Xl.x,Xl.y,Xl.z),Io.push(Zl/Rn),Io.push(Yl/yn)}for(Yl=1;Yl<=yn;Yl++)for(Zl=1;Zl<=Rn;Zl++){var ry=(Rn+1)*Yl+Zl-1,_g=(Rn+1)*(Yl-1)+Zl-1,ty=(Rn+1)*(Yl-1)+Zl,ny=(Rn+1)*Yl+Zl;Co.push(ry,_g,ny),Co.push(_g,ty,ny)}this.setIndex(Co),this.setAttribute("position",new Float32BufferAttribute(Po,3)),this.setAttribute("normal",new Float32BufferAttribute(To,3)),this.setAttribute("uv",new Float32BufferAttribute(Io,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(cr,vn,yn){yn=yn||2;var Rn=vn&&vn.length,Bn=Rn?vn[0]*yn:cr.length,Co=linkedList(cr,0,Bn,yn,!0),Po=[];if(!Co||Co.next===Co.prev)return Po;var To,Io,$l,Wl,Xl,Yl,Zl;if(Rn&&(Co=eliminateHoles(cr,vn,Co,yn)),cr.length>80*yn){To=$l=cr[0],Io=Wl=cr[1];for(var ey=yn;ey<Bn;ey+=yn)Xl=cr[ey],Yl=cr[ey+1],Xl<To&&(To=Xl),Yl<Io&&(Io=Yl),Xl>$l&&($l=Xl),Yl>Wl&&(Wl=Yl);Zl=Math.max($l-To,Wl-Io),Zl=Zl!==0?1/Zl:0}return earcutLinked(Co,Po,yn,To,Io,Zl),Po}};function linkedList(cr,vn,yn,Rn,Bn){var Co,Po;if(Bn===signedArea(cr,vn,yn,Rn)>0)for(Co=vn;Co<yn;Co+=Rn)Po=insertNode(Co,cr[Co],cr[Co+1],Po);else for(Co=yn-Rn;Co>=vn;Co-=Rn)Po=insertNode(Co,cr[Co],cr[Co+1],Po);return Po&&equals(Po,Po.next)&&(removeNode(Po),Po=Po.next),Po}function filterPoints(cr,vn){if(!cr)return cr;vn||(vn=cr);var yn=cr,Rn;do if(Rn=!1,!yn.steiner&&(equals(yn,yn.next)||area(yn.prev,yn,yn.next)===0)){if(removeNode(yn),yn=vn=yn.prev,yn===yn.next)break;Rn=!0}else yn=yn.next;while(Rn||yn!==vn);return vn}function earcutLinked(cr,vn,yn,Rn,Bn,Co,Po){if(!!cr){!Po&&Co&&indexCurve(cr,Rn,Bn,Co);for(var To=cr,Io,$l;cr.prev!==cr.next;){if(Io=cr.prev,$l=cr.next,Co?isEarHashed(cr,Rn,Bn,Co):isEar(cr)){vn.push(Io.i/yn),vn.push(cr.i/yn),vn.push($l.i/yn),removeNode(cr),cr=$l.next,To=$l.next;continue}if(cr=$l,cr===To){Po?Po===1?(cr=cureLocalIntersections(filterPoints(cr),vn,yn),earcutLinked(cr,vn,yn,Rn,Bn,Co,2)):Po===2&&splitEarcut(cr,vn,yn,Rn,Bn,Co):earcutLinked(filterPoints(cr),vn,yn,Rn,Bn,Co,1);break}}}}function isEar(cr){var vn=cr.prev,yn=cr,Rn=cr.next;if(area(vn,yn,Rn)>=0)return!1;for(var Bn=cr.next.next;Bn!==cr.prev;){if(pointInTriangle(vn.x,vn.y,yn.x,yn.y,Rn.x,Rn.y,Bn.x,Bn.y)&&area(Bn.prev,Bn,Bn.next)>=0)return!1;Bn=Bn.next}return!0}function isEarHashed(cr,vn,yn,Rn){var Bn=cr.prev,Co=cr,Po=cr.next;if(area(Bn,Co,Po)>=0)return!1;for(var To=Bn.x<Co.x?Bn.x<Po.x?Bn.x:Po.x:Co.x<Po.x?Co.x:Po.x,Io=Bn.y<Co.y?Bn.y<Po.y?Bn.y:Po.y:Co.y<Po.y?Co.y:Po.y,$l=Bn.x>Co.x?Bn.x>Po.x?Bn.x:Po.x:Co.x>Po.x?Co.x:Po.x,Wl=Bn.y>Co.y?Bn.y>Po.y?Bn.y:Po.y:Co.y>Po.y?Co.y:Po.y,Xl=zOrder(To,Io,vn,yn,Rn),Yl=zOrder($l,Wl,vn,yn,Rn),Zl=cr.prevZ,ey=cr.nextZ;Zl&&Zl.z>=Xl&&ey&&ey.z<=Yl;){if(Zl!==cr.prev&&Zl!==cr.next&&pointInTriangle(Bn.x,Bn.y,Co.x,Co.y,Po.x,Po.y,Zl.x,Zl.y)&&area(Zl.prev,Zl,Zl.next)>=0||(Zl=Zl.prevZ,ey!==cr.prev&&ey!==cr.next&&pointInTriangle(Bn.x,Bn.y,Co.x,Co.y,Po.x,Po.y,ey.x,ey.y)&&area(ey.prev,ey,ey.next)>=0))return!1;ey=ey.nextZ}for(;Zl&&Zl.z>=Xl;){if(Zl!==cr.prev&&Zl!==cr.next&&pointInTriangle(Bn.x,Bn.y,Co.x,Co.y,Po.x,Po.y,Zl.x,Zl.y)&&area(Zl.prev,Zl,Zl.next)>=0)return!1;Zl=Zl.prevZ}for(;ey&&ey.z<=Yl;){if(ey!==cr.prev&&ey!==cr.next&&pointInTriangle(Bn.x,Bn.y,Co.x,Co.y,Po.x,Po.y,ey.x,ey.y)&&area(ey.prev,ey,ey.next)>=0)return!1;ey=ey.nextZ}return!0}function cureLocalIntersections(cr,vn,yn){var Rn=cr;do{var Bn=Rn.prev,Co=Rn.next.next;!equals(Bn,Co)&&intersects(Bn,Rn,Rn.next,Co)&&locallyInside(Bn,Co)&&locallyInside(Co,Bn)&&(vn.push(Bn.i/yn),vn.push(Rn.i/yn),vn.push(Co.i/yn),removeNode(Rn),removeNode(Rn.next),Rn=cr=Co),Rn=Rn.next}while(Rn!==cr);return filterPoints(Rn)}function splitEarcut(cr,vn,yn,Rn,Bn,Co){var Po=cr;do{for(var To=Po.next.next;To!==Po.prev;){if(Po.i!==To.i&&isValidDiagonal(Po,To)){var Io=splitPolygon(Po,To);Po=filterPoints(Po,Po.next),Io=filterPoints(Io,Io.next),earcutLinked(Po,vn,yn,Rn,Bn,Co),earcutLinked(Io,vn,yn,Rn,Bn,Co);return}To=To.next}Po=Po.next}while(Po!==cr)}function eliminateHoles(cr,vn,yn,Rn){var Bn=[],Co,Po,To,Io,$l;for(Co=0,Po=vn.length;Co<Po;Co++)To=vn[Co]*Rn,Io=Co<Po-1?vn[Co+1]*Rn:cr.length,$l=linkedList(cr,To,Io,Rn,!1),$l===$l.next&&($l.steiner=!0),Bn.push(getLeftmost($l));for(Bn.sort(compareX),Co=0;Co<Bn.length;Co++)eliminateHole(Bn[Co],yn),yn=filterPoints(yn,yn.next);return yn}function compareX(cr,vn){return cr.x-vn.x}function eliminateHole(cr,vn){if(vn=findHoleBridge(cr,vn),vn){var yn=splitPolygon(vn,cr);filterPoints(vn,vn.next),filterPoints(yn,yn.next)}}function findHoleBridge(cr,vn){var yn=vn,Rn=cr.x,Bn=cr.y,Co=-1/0,Po;do{if(Bn<=yn.y&&Bn>=yn.next.y&&yn.next.y!==yn.y){var To=yn.x+(Bn-yn.y)*(yn.next.x-yn.x)/(yn.next.y-yn.y);if(To<=Rn&&To>Co){if(Co=To,To===Rn){if(Bn===yn.y)return yn;if(Bn===yn.next.y)return yn.next}Po=yn.x<yn.next.x?yn:yn.next}}yn=yn.next}while(yn!==vn);if(!Po)return null;if(Rn===Co)return Po;var Io=Po,$l=Po.x,Wl=Po.y,Xl=1/0,Yl;yn=Po;do Rn>=yn.x&&yn.x>=$l&&Rn!==yn.x&&pointInTriangle(Bn<Wl?Rn:Co,Bn,$l,Wl,Bn<Wl?Co:Rn,Bn,yn.x,yn.y)&&(Yl=Math.abs(Bn-yn.y)/(Rn-yn.x),locallyInside(yn,cr)&&(Yl<Xl||Yl===Xl&&(yn.x>Po.x||yn.x===Po.x&&sectorContainsSector(Po,yn)))&&(Po=yn,Xl=Yl)),yn=yn.next;while(yn!==Io);return Po}function sectorContainsSector(cr,vn){return area(cr.prev,cr,vn.prev)<0&&area(vn.next,cr,cr.next)<0}function indexCurve(cr,vn,yn,Rn){var Bn=cr;do Bn.z===null&&(Bn.z=zOrder(Bn.x,Bn.y,vn,yn,Rn)),Bn.prevZ=Bn.prev,Bn.nextZ=Bn.next,Bn=Bn.next;while(Bn!==cr);Bn.prevZ.nextZ=null,Bn.prevZ=null,sortLinked(Bn)}function sortLinked(cr){var vn,yn,Rn,Bn,Co,Po,To,Io,$l=1;do{for(yn=cr,cr=null,Co=null,Po=0;yn;){for(Po++,Rn=yn,To=0,vn=0;vn<$l&&(To++,Rn=Rn.nextZ,!!Rn);vn++);for(Io=$l;To>0||Io>0&&Rn;)To!==0&&(Io===0||!Rn||yn.z<=Rn.z)?(Bn=yn,yn=yn.nextZ,To--):(Bn=Rn,Rn=Rn.nextZ,Io--),Co?Co.nextZ=Bn:cr=Bn,Bn.prevZ=Co,Co=Bn;yn=Rn}Co.nextZ=null,$l*=2}while(Po>1);return cr}function zOrder(cr,vn,yn,Rn,Bn){return cr=32767*(cr-yn)*Bn,vn=32767*(vn-Rn)*Bn,cr=(cr|cr<<8)&16711935,cr=(cr|cr<<4)&252645135,cr=(cr|cr<<2)&858993459,cr=(cr|cr<<1)&1431655765,vn=(vn|vn<<8)&16711935,vn=(vn|vn<<4)&252645135,vn=(vn|vn<<2)&858993459,vn=(vn|vn<<1)&1431655765,cr|vn<<1}function getLeftmost(cr){var vn=cr,yn=cr;do(vn.x<yn.x||vn.x===yn.x&&vn.y<yn.y)&&(yn=vn),vn=vn.next;while(vn!==cr);return yn}function pointInTriangle(cr,vn,yn,Rn,Bn,Co,Po,To){return(Bn-Po)*(vn-To)-(cr-Po)*(Co-To)>=0&&(cr-Po)*(Rn-To)-(yn-Po)*(vn-To)>=0&&(yn-Po)*(Co-To)-(Bn-Po)*(Rn-To)>=0}function isValidDiagonal(cr,vn){return cr.next.i!==vn.i&&cr.prev.i!==vn.i&&!intersectsPolygon(cr,vn)&&(locallyInside(cr,vn)&&locallyInside(vn,cr)&&middleInside(cr,vn)&&(area(cr.prev,cr,vn.prev)||area(cr,vn.prev,vn))||equals(cr,vn)&&area(cr.prev,cr,cr.next)>0&&area(vn.prev,vn,vn.next)>0)}function area(cr,vn,yn){return(vn.y-cr.y)*(yn.x-vn.x)-(vn.x-cr.x)*(yn.y-vn.y)}function equals(cr,vn){return cr.x===vn.x&&cr.y===vn.y}function intersects(cr,vn,yn,Rn){var Bn=sign(area(cr,vn,yn)),Co=sign(area(cr,vn,Rn)),Po=sign(area(yn,Rn,cr)),To=sign(area(yn,Rn,vn));return!!(Bn!==Co&&Po!==To||Bn===0&&onSegment(cr,yn,vn)||Co===0&&onSegment(cr,Rn,vn)||Po===0&&onSegment(yn,cr,Rn)||To===0&&onSegment(yn,vn,Rn))}function onSegment(cr,vn,yn){return vn.x<=Math.max(cr.x,yn.x)&&vn.x>=Math.min(cr.x,yn.x)&&vn.y<=Math.max(cr.y,yn.y)&&vn.y>=Math.min(cr.y,yn.y)}function sign(cr){return cr>0?1:cr<0?-1:0}function intersectsPolygon(cr,vn){var yn=cr;do{if(yn.i!==cr.i&&yn.next.i!==cr.i&&yn.i!==vn.i&&yn.next.i!==vn.i&&intersects(yn,yn.next,cr,vn))return!0;yn=yn.next}while(yn!==cr);return!1}function locallyInside(cr,vn){return area(cr.prev,cr,cr.next)<0?area(cr,vn,cr.next)>=0&&area(cr,cr.prev,vn)>=0:area(cr,vn,cr.prev)<0||area(cr,cr.next,vn)<0}function middleInside(cr,vn){var yn=cr,Rn=!1,Bn=(cr.x+vn.x)/2,Co=(cr.y+vn.y)/2;do yn.y>Co!=yn.next.y>Co&&yn.next.y!==yn.y&&Bn<(yn.next.x-yn.x)*(Co-yn.y)/(yn.next.y-yn.y)+yn.x&&(Rn=!Rn),yn=yn.next;while(yn!==cr);return Rn}function splitPolygon(cr,vn){var yn=new Node(cr.i,cr.x,cr.y),Rn=new Node(vn.i,vn.x,vn.y),Bn=cr.next,Co=vn.prev;return cr.next=vn,vn.prev=cr,yn.next=Bn,Bn.prev=yn,Rn.next=yn,yn.prev=Rn,Co.next=Rn,Rn.prev=Co,Rn}function insertNode(cr,vn,yn,Rn){var Bn=new Node(cr,vn,yn);return Rn?(Bn.next=Rn.next,Bn.prev=Rn,Rn.next.prev=Bn,Rn.next=Bn):(Bn.prev=Bn,Bn.next=Bn),Bn}function removeNode(cr){cr.next.prev=cr.prev,cr.prev.next=cr.next,cr.prevZ&&(cr.prevZ.nextZ=cr.nextZ),cr.nextZ&&(cr.nextZ.prevZ=cr.prevZ)}function Node(cr,vn,yn){this.i=cr,this.x=vn,this.y=yn,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(cr,vn,yn,Rn){for(var Bn=0,Co=vn,Po=yn-Rn;Co<yn;Co+=Rn)Bn+=(cr[Po]-cr[Co])*(cr[Co+1]+cr[Po+1]),Po=Co;return Bn}var ShapeUtils={area:function(cr){for(var vn=cr.length,yn=0,Rn=vn-1,Bn=0;Bn<vn;Rn=Bn++)yn+=cr[Rn].x*cr[Bn].y-cr[Bn].x*cr[Rn].y;return yn*.5},isClockWise:function(cr){return ShapeUtils.area(cr)<0},triangulateShape:function(cr,vn){var yn=[],Rn=[],Bn=[];removeDupEndPts(cr),addContour(yn,cr);var Co=cr.length;vn.forEach(removeDupEndPts);for(var Po=0;Po<vn.length;Po++)Rn.push(Co),Co+=vn[Po].length,addContour(yn,vn[Po]);for(var To=Earcut.triangulate(yn,Rn),Po=0;Po<To.length;Po+=3)Bn.push(To.slice(Po,Po+3));return Bn}};function removeDupEndPts(cr){var vn=cr.length;vn>2&&cr[vn-1].equals(cr[0])&&cr.pop()}function addContour(cr,vn){for(var yn=0;yn<vn.length;yn++)cr.push(vn[yn].x),cr.push(vn[yn].y)}function ExtrudeGeometry(cr,vn){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:cr,options:vn},this.fromBufferGeometry(new ExtrudeBufferGeometry(cr,vn)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var cr=Geometry.prototype.toJSON.call(this),vn=this.parameters.shapes,yn=this.parameters.options;return toJSON(vn,yn,cr)};function ExtrudeBufferGeometry(cr,vn){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:cr,options:vn},cr=Array.isArray(cr)?cr:[cr];for(var yn=this,Rn=[],Bn=[],Co=0,Po=cr.length;Co<Po;Co++){var To=cr[Co];Io(To)}this.setAttribute("position",new Float32BufferAttribute(Rn,3)),this.setAttribute("uv",new Float32BufferAttribute(Bn,2)),this.computeVertexNormals();function Io($l){var Wl=[],Xl=vn.curveSegments!==void 0?vn.curveSegments:12,Yl=vn.steps!==void 0?vn.steps:1,Zl=vn.depth!==void 0?vn.depth:100,ey=vn.bevelEnabled!==void 0?vn.bevelEnabled:!0,Rm=vn.bevelThickness!==void 0?vn.bevelThickness:6,ry=vn.bevelSize!==void 0?vn.bevelSize:Rm-2,_g=vn.bevelOffset!==void 0?vn.bevelOffset:0,ty=vn.bevelSegments!==void 0?vn.bevelSegments:3,ny=vn.extrudePath,iy=vn.UVGenerator!==void 0?vn.UVGenerator:WorldUVGenerator;vn.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Zl=vn.amount);var oy,ay=!1,uy,hy,my,ly;ny&&(oy=ny.getSpacedPoints(Yl),ay=!0,ey=!1,uy=ny.computeFrenetFrames(Yl,!1),hy=new Vector3,my=new Vector3,ly=new Vector3),ey||(ty=0,Rm=0,ry=0,_g=0);var sy,cy,fy,vy=$l.extractPoints(Xl),dy=vy.shape,Ay=vy.holes,gy=!ShapeUtils.isClockWise(dy);if(gy)for(dy=dy.reverse(),cy=0,fy=Ay.length;cy<fy;cy++)sy=Ay[cy],ShapeUtils.isClockWise(sy)&&(Ay[cy]=sy.reverse());var wy=ShapeUtils.triangulateShape(dy,Ay),Cy=dy;for(cy=0,fy=Ay.length;cy<fy;cy++)sy=Ay[cy],dy=dy.concat(sy);function My(h1,l1,o1){return l1||console.error("THREE.ExtrudeGeometry: vec does not exist"),l1.clone().multiplyScalar(o1).add(h1)}var Py,Dy,qy,Xy,$y,xy=dy.length,Ry,Ly=wy.length;function ky(h1,l1,o1){var t1,Wy,f1,m1=h1.x-l1.x,w1=h1.y-l1.y,c1=o1.x-h1.x,M1=o1.y-h1.y,L1=m1*m1+w1*w1,B1=m1*M1-w1*c1;if(Math.abs(B1)>Number.EPSILON){var D1=Math.sqrt(L1),O1=Math.sqrt(c1*c1+M1*M1),j1=l1.x-w1/D1,k1=l1.y+m1/D1,q1=o1.x-M1/O1,_b=o1.y+c1/O1,Q1=((q1-j1)*M1-(_b-k1)*c1)/(m1*M1-w1*c1);t1=j1+m1*Q1-h1.x,Wy=k1+w1*Q1-h1.y;var Y1=t1*t1+Wy*Wy;if(Y1<=2)return new Vector2(t1,Wy);f1=Math.sqrt(Y1/2)}else{var jy=!1;m1>Number.EPSILON?c1>Number.EPSILON&&(jy=!0):m1<-Number.EPSILON?c1<-Number.EPSILON&&(jy=!0):Math.sign(w1)===Math.sign(M1)&&(jy=!0),jy?(t1=-w1,Wy=m1,f1=Math.sqrt(L1)):(t1=m1,Wy=w1,f1=Math.sqrt(L1/2))}return new Vector2(t1/f1,Wy/f1)}for(var Ey=[],Iy=0,zy=Cy.length,Uy=zy-1,Qy=Iy+1;Iy<zy;Iy++,Uy++,Qy++)Uy===zy&&(Uy=0),Qy===zy&&(Qy=0),Ey[Iy]=ky(Cy[Iy],Cy[Uy],Cy[Qy]);var Gy=[],Zy,Ty=Ey.concat();for(cy=0,fy=Ay.length;cy<fy;cy++){for(sy=Ay[cy],Zy=[],Iy=0,zy=sy.length,Uy=zy-1,Qy=Iy+1;Iy<zy;Iy++,Uy++,Qy++)Uy===zy&&(Uy=0),Qy===zy&&(Qy=0),Zy[Iy]=ky(sy[Iy],sy[Uy],sy[Qy]);Gy.push(Zy),Ty=Ty.concat(Zy)}for(Py=0;Py<ty;Py++){for(qy=Py/ty,Xy=Rm*Math.cos(qy*Math.PI/2),Dy=ry*Math.sin(qy*Math.PI/2)+_g,Iy=0,zy=Cy.length;Iy<zy;Iy++)$y=My(Cy[Iy],Ey[Iy],Dy),i1($y.x,$y.y,-Xy);for(cy=0,fy=Ay.length;cy<fy;cy++)for(sy=Ay[cy],Zy=Gy[cy],Iy=0,zy=sy.length;Iy<zy;Iy++)$y=My(sy[Iy],Zy[Iy],Dy),i1($y.x,$y.y,-Xy)}for(Dy=ry+_g,Iy=0;Iy<xy;Iy++)$y=ey?My(dy[Iy],Ty[Iy],Dy):dy[Iy],ay?(my.copy(uy.normals[0]).multiplyScalar($y.x),hy.copy(uy.binormals[0]).multiplyScalar($y.y),ly.copy(oy[0]).add(my).add(hy),i1(ly.x,ly.y,ly.z)):i1($y.x,$y.y,0);var Vy;for(Vy=1;Vy<=Yl;Vy++)for(Iy=0;Iy<xy;Iy++)$y=ey?My(dy[Iy],Ty[Iy],Dy):dy[Iy],ay?(my.copy(uy.normals[Vy]).multiplyScalar($y.x),hy.copy(uy.binormals[Vy]).multiplyScalar($y.y),ly.copy(oy[Vy]).add(my).add(hy),i1(ly.x,ly.y,ly.z)):i1($y.x,$y.y,Zl/Yl*Vy);for(Py=ty-1;Py>=0;Py--){for(qy=Py/ty,Xy=Rm*Math.cos(qy*Math.PI/2),Dy=ry*Math.sin(qy*Math.PI/2)+_g,Iy=0,zy=Cy.length;Iy<zy;Iy++)$y=My(Cy[Iy],Ey[Iy],Dy),i1($y.x,$y.y,Zl+Xy);for(cy=0,fy=Ay.length;cy<fy;cy++)for(sy=Ay[cy],Zy=Gy[cy],Iy=0,zy=sy.length;Iy<zy;Iy++)$y=My(sy[Iy],Zy[Iy],Dy),ay?i1($y.x,$y.y+oy[Yl-1].y,oy[Yl-1].x+Xy):i1($y.x,$y.y,Zl+Xy)}Yy(),Jy();function Yy(){var h1=Rn.length/3;if(ey){var l1=0,o1=xy*l1;for(Iy=0;Iy<Ly;Iy++)Ry=wy[Iy],u1(Ry[2]+o1,Ry[1]+o1,Ry[0]+o1);for(l1=Yl+ty*2,o1=xy*l1,Iy=0;Iy<Ly;Iy++)Ry=wy[Iy],u1(Ry[0]+o1,Ry[1]+o1,Ry[2]+o1)}else{for(Iy=0;Iy<Ly;Iy++)Ry=wy[Iy],u1(Ry[2],Ry[1],Ry[0]);for(Iy=0;Iy<Ly;Iy++)Ry=wy[Iy],u1(Ry[0]+xy*Yl,Ry[1]+xy*Yl,Ry[2]+xy*Yl)}yn.addGroup(h1,Rn.length/3-h1,0)}function Jy(){var h1=Rn.length/3,l1=0;for(Hy(Cy,l1),l1+=Cy.length,cy=0,fy=Ay.length;cy<fy;cy++)sy=Ay[cy],Hy(sy,l1),l1+=sy.length;yn.addGroup(h1,Rn.length/3-h1,1)}function Hy(h1,l1){var o1,t1;for(Iy=h1.length;--Iy>=0;){o1=Iy,t1=Iy-1,t1<0&&(t1=h1.length-1);var Wy=0,f1=Yl+ty*2;for(Wy=0;Wy<f1;Wy++){var m1=xy*Wy,w1=xy*(Wy+1),c1=l1+o1+m1,M1=l1+t1+m1,L1=l1+t1+w1,B1=l1+o1+w1;p1(c1,M1,L1,B1)}}}function i1(h1,l1,o1){Wl.push(h1),Wl.push(l1),Wl.push(o1)}function u1(h1,l1,o1){g1(h1),g1(l1),g1(o1);var t1=Rn.length/3,Wy=iy.generateTopUV(yn,Rn,t1-3,t1-2,t1-1);v1(Wy[0]),v1(Wy[1]),v1(Wy[2])}function p1(h1,l1,o1,t1){g1(h1),g1(l1),g1(t1),g1(l1),g1(o1),g1(t1);var Wy=Rn.length/3,f1=iy.generateSideWallUV(yn,Rn,Wy-6,Wy-3,Wy-2,Wy-1);v1(f1[0]),v1(f1[1]),v1(f1[3]),v1(f1[1]),v1(f1[2]),v1(f1[3])}function g1(h1){Rn.push(Wl[h1*3+0]),Rn.push(Wl[h1*3+1]),Rn.push(Wl[h1*3+2])}function v1(h1){Bn.push(h1.x),Bn.push(h1.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var cr=BufferGeometry.prototype.toJSON.call(this),vn=this.parameters.shapes,yn=this.parameters.options;return toJSON(vn,yn,cr)};var WorldUVGenerator={generateTopUV:function(cr,vn,yn,Rn,Bn){var Co=vn[yn*3],Po=vn[yn*3+1],To=vn[Rn*3],Io=vn[Rn*3+1],$l=vn[Bn*3],Wl=vn[Bn*3+1];return[new Vector2(Co,Po),new Vector2(To,Io),new Vector2($l,Wl)]},generateSideWallUV:function(cr,vn,yn,Rn,Bn,Co){var Po=vn[yn*3],To=vn[yn*3+1],Io=vn[yn*3+2],$l=vn[Rn*3],Wl=vn[Rn*3+1],Xl=vn[Rn*3+2],Yl=vn[Bn*3],Zl=vn[Bn*3+1],ey=vn[Bn*3+2],Rm=vn[Co*3],ry=vn[Co*3+1],_g=vn[Co*3+2];return Math.abs(To-Wl)<.01?[new Vector2(Po,1-Io),new Vector2($l,1-Xl),new Vector2(Yl,1-ey),new Vector2(Rm,1-_g)]:[new Vector2(To,1-Io),new Vector2(Wl,1-Xl),new Vector2(Zl,1-ey),new Vector2(ry,1-_g)]}};function toJSON(cr,vn,yn){if(yn.shapes=[],Array.isArray(cr))for(var Rn=0,Bn=cr.length;Rn<Bn;Rn++){var Co=cr[Rn];yn.shapes.push(Co.uuid)}else yn.shapes.push(cr.uuid);return vn.extrudePath!==void 0&&(yn.options.extrudePath=vn.extrudePath.toJSON()),yn}function TextGeometry(cr,vn){Geometry.call(this),this.type="TextGeometry",this.parameters={text:cr,parameters:vn},this.fromBufferGeometry(new TextBufferGeometry(cr,vn)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(cr,vn){vn=vn||{};var yn=vn.font;if(!(yn&&yn.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var Rn=yn.generateShapes(cr,vn.size);vn.depth=vn.height!==void 0?vn.height:50,vn.bevelThickness===void 0&&(vn.bevelThickness=10),vn.bevelSize===void 0&&(vn.bevelSize=8),vn.bevelEnabled===void 0&&(vn.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,Rn,vn),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(cr,vn,yn,Rn,Bn,Co,Po){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:cr,widthSegments:vn,heightSegments:yn,phiStart:Rn,phiLength:Bn,thetaStart:Co,thetaLength:Po},this.fromBufferGeometry(new SphereBufferGeometry(cr,vn,yn,Rn,Bn,Co,Po)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(cr,vn,yn,Rn,Bn,Co,Po){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:cr,widthSegments:vn,heightSegments:yn,phiStart:Rn,phiLength:Bn,thetaStart:Co,thetaLength:Po},cr=cr||1,vn=Math.max(3,Math.floor(vn)||8),yn=Math.max(2,Math.floor(yn)||6),Rn=Rn!==void 0?Rn:0,Bn=Bn!==void 0?Bn:Math.PI*2,Co=Co!==void 0?Co:0,Po=Po!==void 0?Po:Math.PI;var To=Math.min(Co+Po,Math.PI),Io,$l,Wl=0,Xl=[],Yl=new Vector3,Zl=new Vector3,ey=[],Rm=[],ry=[],_g=[];for($l=0;$l<=yn;$l++){var ty=[],ny=$l/yn,iy=0;for($l==0&&Co==0?iy=.5/vn:$l==yn&&To==Math.PI&&(iy=-.5/vn),Io=0;Io<=vn;Io++){var oy=Io/vn;Yl.x=-cr*Math.cos(Rn+oy*Bn)*Math.sin(Co+ny*Po),Yl.y=cr*Math.cos(Co+ny*Po),Yl.z=cr*Math.sin(Rn+oy*Bn)*Math.sin(Co+ny*Po),Rm.push(Yl.x,Yl.y,Yl.z),Zl.copy(Yl).normalize(),ry.push(Zl.x,Zl.y,Zl.z),_g.push(oy+iy,1-ny),ty.push(Wl++)}Xl.push(ty)}for($l=0;$l<yn;$l++)for(Io=0;Io<vn;Io++){var ay=Xl[$l][Io+1],uy=Xl[$l][Io],hy=Xl[$l+1][Io],my=Xl[$l+1][Io+1];($l!==0||Co>0)&&ey.push(ay,uy,my),($l!==yn-1||To<Math.PI)&&ey.push(uy,hy,my)}this.setIndex(ey),this.setAttribute("position",new Float32BufferAttribute(Rm,3)),this.setAttribute("normal",new Float32BufferAttribute(ry,3)),this.setAttribute("uv",new Float32BufferAttribute(_g,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(cr,vn,yn,Rn,Bn,Co){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:cr,outerRadius:vn,thetaSegments:yn,phiSegments:Rn,thetaStart:Bn,thetaLength:Co},this.fromBufferGeometry(new RingBufferGeometry(cr,vn,yn,Rn,Bn,Co)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(cr,vn,yn,Rn,Bn,Co){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:cr,outerRadius:vn,thetaSegments:yn,phiSegments:Rn,thetaStart:Bn,thetaLength:Co},cr=cr||.5,vn=vn||1,Bn=Bn!==void 0?Bn:0,Co=Co!==void 0?Co:Math.PI*2,yn=yn!==void 0?Math.max(3,yn):8,Rn=Rn!==void 0?Math.max(1,Rn):1;var Po=[],To=[],Io=[],$l=[],Wl,Xl=cr,Yl=(vn-cr)/Rn,Zl=new Vector3,ey=new Vector2,Rm,ry;for(Rm=0;Rm<=Rn;Rm++){for(ry=0;ry<=yn;ry++)Wl=Bn+ry/yn*Co,Zl.x=Xl*Math.cos(Wl),Zl.y=Xl*Math.sin(Wl),To.push(Zl.x,Zl.y,Zl.z),Io.push(0,0,1),ey.x=(Zl.x/vn+1)/2,ey.y=(Zl.y/vn+1)/2,$l.push(ey.x,ey.y);Xl+=Yl}for(Rm=0;Rm<Rn;Rm++){var _g=Rm*(yn+1);for(ry=0;ry<yn;ry++){Wl=ry+_g;var ty=Wl,ny=Wl+yn+1,iy=Wl+yn+2,oy=Wl+1;Po.push(ty,ny,oy),Po.push(ny,iy,oy)}}this.setIndex(Po),this.setAttribute("position",new Float32BufferAttribute(To,3)),this.setAttribute("normal",new Float32BufferAttribute(Io,3)),this.setAttribute("uv",new Float32BufferAttribute($l,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(cr,vn,yn,Rn){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:cr,segments:vn,phiStart:yn,phiLength:Rn},this.fromBufferGeometry(new LatheBufferGeometry(cr,vn,yn,Rn)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(cr,vn,yn,Rn){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:cr,segments:vn,phiStart:yn,phiLength:Rn},vn=Math.floor(vn)||12,yn=yn||0,Rn=Rn||Math.PI*2,Rn=MathUtils.clamp(Rn,0,Math.PI*2);var Bn=[],Co=[],Po=[],To,Io=1/vn,$l=new Vector3,Wl=new Vector2,Xl,Yl;for(Xl=0;Xl<=vn;Xl++){var Zl=yn+Xl*Io*Rn,ey=Math.sin(Zl),Rm=Math.cos(Zl);for(Yl=0;Yl<=cr.length-1;Yl++)$l.x=cr[Yl].x*ey,$l.y=cr[Yl].y,$l.z=cr[Yl].x*Rm,Co.push($l.x,$l.y,$l.z),Wl.x=Xl/vn,Wl.y=Yl/(cr.length-1),Po.push(Wl.x,Wl.y)}for(Xl=0;Xl<vn;Xl++)for(Yl=0;Yl<cr.length-1;Yl++){To=Yl+Xl*cr.length;var ry=To,_g=To+cr.length,ty=To+cr.length+1,ny=To+1;Bn.push(ry,_g,ny),Bn.push(_g,ty,ny)}if(this.setIndex(Bn),this.setAttribute("position",new Float32BufferAttribute(Co,3)),this.setAttribute("uv",new Float32BufferAttribute(Po,2)),this.computeVertexNormals(),Rn===Math.PI*2){var iy=this.attributes.normal.array,oy=new Vector3,ay=new Vector3,uy=new Vector3;for(To=vn*cr.length*3,Xl=0,Yl=0;Xl<cr.length;Xl++,Yl+=3)oy.x=iy[Yl+0],oy.y=iy[Yl+1],oy.z=iy[Yl+2],ay.x=iy[To+Yl+0],ay.y=iy[To+Yl+1],ay.z=iy[To+Yl+2],uy.addVectors(oy,ay).normalize(),iy[Yl+0]=iy[To+Yl+0]=uy.x,iy[Yl+1]=iy[To+Yl+1]=uy.y,iy[Yl+2]=iy[To+Yl+2]=uy.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(cr,vn){Geometry.call(this),this.type="ShapeGeometry",typeof vn=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),vn=vn.curveSegments),this.parameters={shapes:cr,curveSegments:vn},this.fromBufferGeometry(new ShapeBufferGeometry(cr,vn)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var cr=Geometry.prototype.toJSON.call(this),vn=this.parameters.shapes;return toJSON$1(vn,cr)};function ShapeBufferGeometry(cr,vn){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:cr,curveSegments:vn},vn=vn||12;var yn=[],Rn=[],Bn=[],Co=[],Po=0,To=0;if(Array.isArray(cr)===!1)$l(cr);else for(var Io=0;Io<cr.length;Io++)$l(cr[Io]),this.addGroup(Po,To,Io),Po+=To,To=0;this.setIndex(yn),this.setAttribute("position",new Float32BufferAttribute(Rn,3)),this.setAttribute("normal",new Float32BufferAttribute(Bn,3)),this.setAttribute("uv",new Float32BufferAttribute(Co,2));function $l(Wl){var Xl,Yl,Zl,ey=Rn.length/3,Rm=Wl.extractPoints(vn),ry=Rm.shape,_g=Rm.holes;for(ShapeUtils.isClockWise(ry)===!1&&(ry=ry.reverse()),Xl=0,Yl=_g.length;Xl<Yl;Xl++)Zl=_g[Xl],ShapeUtils.isClockWise(Zl)===!0&&(_g[Xl]=Zl.reverse());var ty=ShapeUtils.triangulateShape(ry,_g);for(Xl=0,Yl=_g.length;Xl<Yl;Xl++)Zl=_g[Xl],ry=ry.concat(Zl);for(Xl=0,Yl=ry.length;Xl<Yl;Xl++){var ny=ry[Xl];Rn.push(ny.x,ny.y,0),Bn.push(0,0,1),Co.push(ny.x,ny.y)}for(Xl=0,Yl=ty.length;Xl<Yl;Xl++){var iy=ty[Xl],oy=iy[0]+ey,ay=iy[1]+ey,uy=iy[2]+ey;yn.push(oy,ay,uy),To+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var cr=BufferGeometry.prototype.toJSON.call(this),vn=this.parameters.shapes;return toJSON$1(vn,cr)};function toJSON$1(cr,vn){if(vn.shapes=[],Array.isArray(cr))for(var yn=0,Rn=cr.length;yn<Rn;yn++){var Bn=cr[yn];vn.shapes.push(Bn.uuid)}else vn.shapes.push(cr.uuid);return vn}function EdgesGeometry(cr,vn){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:vn},vn=vn!==void 0?vn:1;var yn=[],Rn=Math.cos(MathUtils.DEG2RAD*vn),Bn=[0,0],Co={},Po,To,Io,$l=["a","b","c"],Wl;cr.isBufferGeometry?(Wl=new Geometry,Wl.fromBufferGeometry(cr)):Wl=cr.clone(),Wl.mergeVertices(),Wl.computeFaceNormals();for(var Xl=Wl.vertices,Yl=Wl.faces,Zl=0,ey=Yl.length;Zl<ey;Zl++)for(var Rm=Yl[Zl],ry=0;ry<3;ry++)Po=Rm[$l[ry]],To=Rm[$l[(ry+1)%3]],Bn[0]=Math.min(Po,To),Bn[1]=Math.max(Po,To),Io=Bn[0]+","+Bn[1],Co[Io]===void 0?Co[Io]={index1:Bn[0],index2:Bn[1],face1:Zl,face2:void 0}:Co[Io].face2=Zl;for(Io in Co){var _g=Co[Io];if(_g.face2===void 0||Yl[_g.face1].normal.dot(Yl[_g.face2].normal)<=Rn){var ty=Xl[_g.index1];yn.push(ty.x,ty.y,ty.z),ty=Xl[_g.index2],yn.push(ty.x,ty.y,ty.z)}}this.setAttribute("position",new Float32BufferAttribute(yn,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(cr,vn,yn,Rn,Bn,Co,Po,To){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:cr,radiusBottom:vn,height:yn,radialSegments:Rn,heightSegments:Bn,openEnded:Co,thetaStart:Po,thetaLength:To},this.fromBufferGeometry(new CylinderBufferGeometry(cr,vn,yn,Rn,Bn,Co,Po,To)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(cr,vn,yn,Rn,Bn,Co,Po,To){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:cr,radiusBottom:vn,height:yn,radialSegments:Rn,heightSegments:Bn,openEnded:Co,thetaStart:Po,thetaLength:To};var Io=this;cr=cr!==void 0?cr:1,vn=vn!==void 0?vn:1,yn=yn||1,Rn=Math.floor(Rn)||8,Bn=Math.floor(Bn)||1,Co=Co!==void 0?Co:!1,Po=Po!==void 0?Po:0,To=To!==void 0?To:Math.PI*2;var $l=[],Wl=[],Xl=[],Yl=[],Zl=0,ey=[],Rm=yn/2,ry=0;_g(),Co===!1&&(cr>0&&ty(!0),vn>0&&ty(!1)),this.setIndex($l),this.setAttribute("position",new Float32BufferAttribute(Wl,3)),this.setAttribute("normal",new Float32BufferAttribute(Xl,3)),this.setAttribute("uv",new Float32BufferAttribute(Yl,2));function _g(){var ny,iy,oy=new Vector3,ay=new Vector3,uy=0,hy=(vn-cr)/yn;for(iy=0;iy<=Bn;iy++){var my=[],ly=iy/Bn,sy=ly*(vn-cr)+cr;for(ny=0;ny<=Rn;ny++){var cy=ny/Rn,fy=cy*To+Po,vy=Math.sin(fy),dy=Math.cos(fy);ay.x=sy*vy,ay.y=-ly*yn+Rm,ay.z=sy*dy,Wl.push(ay.x,ay.y,ay.z),oy.set(vy,hy,dy).normalize(),Xl.push(oy.x,oy.y,oy.z),Yl.push(cy,1-ly),my.push(Zl++)}ey.push(my)}for(ny=0;ny<Rn;ny++)for(iy=0;iy<Bn;iy++){var Ay=ey[iy][ny],gy=ey[iy+1][ny],wy=ey[iy+1][ny+1],Cy=ey[iy][ny+1];$l.push(Ay,gy,Cy),$l.push(gy,wy,Cy),uy+=6}Io.addGroup(ry,uy,0),ry+=uy}function ty(ny){var iy,oy,ay,uy=new Vector2,hy=new Vector3,my=0,ly=ny===!0?cr:vn,sy=ny===!0?1:-1;for(oy=Zl,iy=1;iy<=Rn;iy++)Wl.push(0,Rm*sy,0),Xl.push(0,sy,0),Yl.push(.5,.5),Zl++;for(ay=Zl,iy=0;iy<=Rn;iy++){var cy=iy/Rn,fy=cy*To+Po,vy=Math.cos(fy),dy=Math.sin(fy);hy.x=ly*dy,hy.y=Rm*sy,hy.z=ly*vy,Wl.push(hy.x,hy.y,hy.z),Xl.push(0,sy,0),uy.x=vy*.5+.5,uy.y=dy*.5*sy+.5,Yl.push(uy.x,uy.y),Zl++}for(iy=0;iy<Rn;iy++){var Ay=oy+iy,gy=ay+iy;ny===!0?$l.push(gy,gy+1,Ay):$l.push(gy+1,gy,Ay),my+=3}Io.addGroup(ry,my,ny===!0?1:2),ry+=my}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(cr,vn,yn,Rn,Bn,Co,Po){CylinderGeometry.call(this,0,cr,vn,yn,Rn,Bn,Co,Po),this.type="ConeGeometry",this.parameters={radius:cr,height:vn,radialSegments:yn,heightSegments:Rn,openEnded:Bn,thetaStart:Co,thetaLength:Po}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(cr,vn,yn,Rn,Bn,Co,Po){CylinderBufferGeometry.call(this,0,cr,vn,yn,Rn,Bn,Co,Po),this.type="ConeBufferGeometry",this.parameters={radius:cr,height:vn,radialSegments:yn,heightSegments:Rn,openEnded:Bn,thetaStart:Co,thetaLength:Po}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(cr,vn,yn,Rn){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:cr,segments:vn,thetaStart:yn,thetaLength:Rn},this.fromBufferGeometry(new CircleBufferGeometry(cr,vn,yn,Rn)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(cr,vn,yn,Rn){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:cr,segments:vn,thetaStart:yn,thetaLength:Rn},cr=cr||1,vn=vn!==void 0?Math.max(3,vn):8,yn=yn!==void 0?yn:0,Rn=Rn!==void 0?Rn:Math.PI*2;var Bn=[],Co=[],Po=[],To=[],Io,$l,Wl=new Vector3,Xl=new Vector2;for(Co.push(0,0,0),Po.push(0,0,1),To.push(.5,.5),$l=0,Io=3;$l<=vn;$l++,Io+=3){var Yl=yn+$l/vn*Rn;Wl.x=cr*Math.cos(Yl),Wl.y=cr*Math.sin(Yl),Co.push(Wl.x,Wl.y,Wl.z),Po.push(0,0,1),Xl.x=(Co[Io]/cr+1)/2,Xl.y=(Co[Io+1]/cr+1)/2,To.push(Xl.x,Xl.y)}for(Io=1;Io<=vn;Io++)Bn.push(Io,Io+1,0);this.setIndex(Bn),this.setAttribute("position",new Float32BufferAttribute(Co,3)),this.setAttribute("normal",new Float32BufferAttribute(Po,3)),this.setAttribute("uv",new Float32BufferAttribute(To,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(cr){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(cr)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this};function RawShaderMaterial(cr){ShaderMaterial.call(this,cr),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(cr){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(cr)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.defines={STANDARD:""},this.color.copy(cr.color),this.roughness=cr.roughness,this.metalness=cr.metalness,this.map=cr.map,this.lightMap=cr.lightMap,this.lightMapIntensity=cr.lightMapIntensity,this.aoMap=cr.aoMap,this.aoMapIntensity=cr.aoMapIntensity,this.emissive.copy(cr.emissive),this.emissiveMap=cr.emissiveMap,this.emissiveIntensity=cr.emissiveIntensity,this.bumpMap=cr.bumpMap,this.bumpScale=cr.bumpScale,this.normalMap=cr.normalMap,this.normalMapType=cr.normalMapType,this.normalScale.copy(cr.normalScale),this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.roughnessMap=cr.roughnessMap,this.metalnessMap=cr.metalnessMap,this.alphaMap=cr.alphaMap,this.envMap=cr.envMap,this.envMapIntensity=cr.envMapIntensity,this.refractionRatio=cr.refractionRatio,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.wireframeLinecap=cr.wireframeLinecap,this.wireframeLinejoin=cr.wireframeLinejoin,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this.vertexTangents=cr.vertexTangents,this};function MeshPhysicalMaterial(cr){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(cr)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(cr){return MeshStandardMaterial.prototype.copy.call(this,cr),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=cr.clearcoat,this.clearcoatMap=cr.clearcoatMap,this.clearcoatRoughness=cr.clearcoatRoughness,this.clearcoatRoughnessMap=cr.clearcoatRoughnessMap,this.clearcoatNormalMap=cr.clearcoatNormalMap,this.clearcoatNormalScale.copy(cr.clearcoatNormalScale),this.reflectivity=cr.reflectivity,cr.sheen?this.sheen=(this.sheen||new Color).copy(cr.sheen):this.sheen=null,this.transparency=cr.transparency,this};function MeshPhongMaterial(cr){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(cr)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.specular.copy(cr.specular),this.shininess=cr.shininess,this.map=cr.map,this.lightMap=cr.lightMap,this.lightMapIntensity=cr.lightMapIntensity,this.aoMap=cr.aoMap,this.aoMapIntensity=cr.aoMapIntensity,this.emissive.copy(cr.emissive),this.emissiveMap=cr.emissiveMap,this.emissiveIntensity=cr.emissiveIntensity,this.bumpMap=cr.bumpMap,this.bumpScale=cr.bumpScale,this.normalMap=cr.normalMap,this.normalMapType=cr.normalMapType,this.normalScale.copy(cr.normalScale),this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.specularMap=cr.specularMap,this.alphaMap=cr.alphaMap,this.envMap=cr.envMap,this.combine=cr.combine,this.reflectivity=cr.reflectivity,this.refractionRatio=cr.refractionRatio,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.wireframeLinecap=cr.wireframeLinecap,this.wireframeLinejoin=cr.wireframeLinejoin,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this};function MeshToonMaterial(cr){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(cr)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.specular.copy(cr.specular),this.shininess=cr.shininess,this.map=cr.map,this.gradientMap=cr.gradientMap,this.lightMap=cr.lightMap,this.lightMapIntensity=cr.lightMapIntensity,this.aoMap=cr.aoMap,this.aoMapIntensity=cr.aoMapIntensity,this.emissive.copy(cr.emissive),this.emissiveMap=cr.emissiveMap,this.emissiveIntensity=cr.emissiveIntensity,this.bumpMap=cr.bumpMap,this.bumpScale=cr.bumpScale,this.normalMap=cr.normalMap,this.normalMapType=cr.normalMapType,this.normalScale.copy(cr.normalScale),this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.specularMap=cr.specularMap,this.alphaMap=cr.alphaMap,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.wireframeLinecap=cr.wireframeLinecap,this.wireframeLinejoin=cr.wireframeLinejoin,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this};function MeshNormalMaterial(cr){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(cr)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.bumpMap=cr.bumpMap,this.bumpScale=cr.bumpScale,this.normalMap=cr.normalMap,this.normalMapType=cr.normalMapType,this.normalScale.copy(cr.normalScale),this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this};function MeshLambertMaterial(cr){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(cr)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.color.copy(cr.color),this.map=cr.map,this.lightMap=cr.lightMap,this.lightMapIntensity=cr.lightMapIntensity,this.aoMap=cr.aoMap,this.aoMapIntensity=cr.aoMapIntensity,this.emissive.copy(cr.emissive),this.emissiveMap=cr.emissiveMap,this.emissiveIntensity=cr.emissiveIntensity,this.specularMap=cr.specularMap,this.alphaMap=cr.alphaMap,this.envMap=cr.envMap,this.combine=cr.combine,this.reflectivity=cr.reflectivity,this.refractionRatio=cr.refractionRatio,this.wireframe=cr.wireframe,this.wireframeLinewidth=cr.wireframeLinewidth,this.wireframeLinecap=cr.wireframeLinecap,this.wireframeLinejoin=cr.wireframeLinejoin,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this};function MeshMatcapMaterial(cr){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(cr)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(cr){return Material.prototype.copy.call(this,cr),this.defines={MATCAP:""},this.color.copy(cr.color),this.matcap=cr.matcap,this.map=cr.map,this.bumpMap=cr.bumpMap,this.bumpScale=cr.bumpScale,this.normalMap=cr.normalMap,this.normalMapType=cr.normalMapType,this.normalScale.copy(cr.normalScale),this.displacementMap=cr.displacementMap,this.displacementScale=cr.displacementScale,this.displacementBias=cr.displacementBias,this.alphaMap=cr.alphaMap,this.skinning=cr.skinning,this.morphTargets=cr.morphTargets,this.morphNormals=cr.morphNormals,this};function LineDashedMaterial(cr){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(cr)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(cr){return LineBasicMaterial.prototype.copy.call(this,cr),this.scale=cr.scale,this.dashSize=cr.dashSize,this.gapSize=cr.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(cr,vn,yn){return AnimationUtils.isTypedArray(cr)?new cr.constructor(cr.subarray(vn,yn!==void 0?yn:cr.length)):cr.slice(vn,yn)},convertArray:function(cr,vn,yn){return!cr||!yn&&cr.constructor===vn?cr:typeof vn.BYTES_PER_ELEMENT=="number"?new vn(cr):Array.prototype.slice.call(cr)},isTypedArray:function(cr){return ArrayBuffer.isView(cr)&&!(cr instanceof DataView)},getKeyframeOrder:function(cr){function vn(Co,Po){return cr[Co]-cr[Po]}for(var yn=cr.length,Rn=new Array(yn),Bn=0;Bn!==yn;++Bn)Rn[Bn]=Bn;return Rn.sort(vn),Rn},sortedArray:function(cr,vn,yn){for(var Rn=cr.length,Bn=new cr.constructor(Rn),Co=0,Po=0;Po!==Rn;++Co)for(var To=yn[Co]*vn,Io=0;Io!==vn;++Io)Bn[Po++]=cr[To+Io];return Bn},flattenJSON:function(cr,vn,yn,Rn){for(var Bn=1,Co=cr[0];Co!==void 0&&Co[Rn]===void 0;)Co=cr[Bn++];if(Co!==void 0){var Po=Co[Rn];if(Po!==void 0)if(Array.isArray(Po))do Po=Co[Rn],Po!==void 0&&(vn.push(Co.time),yn.push.apply(yn,Po)),Co=cr[Bn++];while(Co!==void 0);else if(Po.toArray!==void 0)do Po=Co[Rn],Po!==void 0&&(vn.push(Co.time),Po.toArray(yn,yn.length)),Co=cr[Bn++];while(Co!==void 0);else do Po=Co[Rn],Po!==void 0&&(vn.push(Co.time),yn.push(Po)),Co=cr[Bn++];while(Co!==void 0)}},subclip:function(cr,vn,yn,Rn,Bn){Bn=Bn||30;var Co=cr.clone();Co.name=vn;for(var Po=[],To=0;To<Co.tracks.length;++To){for(var Io=Co.tracks[To],$l=Io.getValueSize(),Wl=[],Xl=[],Yl=0;Yl<Io.times.length;++Yl){var Zl=Io.times[Yl]*Bn;if(!(Zl<yn||Zl>=Rn)){Wl.push(Io.times[Yl]);for(var ey=0;ey<$l;++ey)Xl.push(Io.values[Yl*$l+ey])}}Wl.length!==0&&(Io.times=AnimationUtils.convertArray(Wl,Io.times.constructor),Io.values=AnimationUtils.convertArray(Xl,Io.values.constructor),Po.push(Io))}Co.tracks=Po;for(var Rm=1/0,To=0;To<Co.tracks.length;++To)Rm>Co.tracks[To].times[0]&&(Rm=Co.tracks[To].times[0]);for(var To=0;To<Co.tracks.length;++To)Co.tracks[To].shift(-1*Rm);return Co.resetDuration(),Co},makeClipAdditive:function(cr,vn,yn,Rn){vn===void 0&&(vn=0),yn===void 0&&(yn=cr),(Rn===void 0||Rn<=0)&&(Rn=30);for(var Bn=cr.tracks.length,Co=vn/Rn,Po=0;Po<Bn;++Po){var To=yn.tracks[Po],Io=To.ValueTypeName;if(!(Io==="bool"||Io==="string")){var $l=cr.tracks.find(function(iy){return iy.name===To.name&&iy.ValueTypeName===Io});if($l!==void 0){var Wl=To.getValueSize(),Xl=To.times.length-1,Yl;if(Co<=To.times[0])Yl=AnimationUtils.arraySlice(To.values,0,To.valueSize);else if(Co>=To.times[Xl]){var Zl=Xl*Wl;Yl=AnimationUtils.arraySlice(To.values,Zl)}else{var ey=To.createInterpolant();ey.evaluate(Co),Yl=ey.resultBuffer}if(Io==="quaternion"){var Rm=new Quaternion(Yl[0],Yl[1],Yl[2],Yl[3]).normalize().conjugate();Rm.toArray(Yl)}for(var ry=$l.times.length,_g=0;_g<ry;++_g){var ty=_g*Wl;if(Io==="quaternion")Quaternion.multiplyQuaternionsFlat($l.values,ty,Yl,0,$l.values,ty);else for(var ny=0;ny<Wl;++ny)$l.values[ty+ny]-=Yl[ny]}}}}return cr.blendMode=AdditiveAnimationBlendMode,cr}};function Interpolant(cr,vn,yn,Rn){this.parameterPositions=cr,this._cachedIndex=0,this.resultBuffer=Rn!==void 0?Rn:new vn.constructor(yn),this.sampleValues=vn,this.valueSize=yn}Object.assign(Interpolant.prototype,{evaluate:function(cr){var vn=this.parameterPositions,yn=this._cachedIndex,Rn=vn[yn],Bn=vn[yn-1];e:{t:{var Co;r:{n:if(!(cr<Rn)){for(var Po=yn+2;;){if(Rn===void 0){if(cr<Bn)break n;return yn=vn.length,this._cachedIndex=yn,this.afterEnd_(yn-1,cr,Bn)}if(yn===Po)break;if(Bn=Rn,Rn=vn[++yn],cr<Rn)break t}Co=vn.length;break r}if(!(cr>=Bn)){var To=vn[1];cr<To&&(yn=2,Bn=To);for(var Po=yn-2;;){if(Bn===void 0)return this._cachedIndex=0,this.beforeStart_(0,cr,Rn);if(yn===Po)break;if(Rn=Bn,Bn=vn[--yn-1],cr>=Bn)break t}Co=yn,yn=0;break r}break e}for(;yn<Co;){var Io=yn+Co>>>1;cr<vn[Io]?Co=Io:yn=Io+1}if(Rn=vn[yn],Bn=vn[yn-1],Bn===void 0)return this._cachedIndex=0,this.beforeStart_(0,cr,Rn);if(Rn===void 0)return yn=vn.length,this._cachedIndex=yn,this.afterEnd_(yn-1,Bn,cr)}this._cachedIndex=yn,this.intervalChanged_(yn,Bn,Rn)}return this.interpolate_(yn,Bn,cr,Rn)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(cr){for(var vn=this.resultBuffer,yn=this.sampleValues,Rn=this.valueSize,Bn=cr*Rn,Co=0;Co!==Rn;++Co)vn[Co]=yn[Bn+Co];return vn},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(cr,vn,yn,Rn){Interpolant.call(this,cr,vn,yn,Rn),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(cr,vn,yn){var Rn=this.parameterPositions,Bn=cr-2,Co=cr+1,Po=Rn[Bn],To=Rn[Co];if(Po===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Bn=cr,Po=2*vn-yn;break;case WrapAroundEnding:Bn=Rn.length-2,Po=vn+Rn[Bn]-Rn[Bn+1];break;default:Bn=cr,Po=yn}if(To===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Co=cr,To=2*yn-vn;break;case WrapAroundEnding:Co=1,To=yn+Rn[1]-Rn[0];break;default:Co=cr-1,To=vn}var Io=(yn-vn)*.5,$l=this.valueSize;this._weightPrev=Io/(vn-Po),this._weightNext=Io/(To-yn),this._offsetPrev=Bn*$l,this._offsetNext=Co*$l},interpolate_:function(cr,vn,yn,Rn){for(var Bn=this.resultBuffer,Co=this.sampleValues,Po=this.valueSize,To=cr*Po,Io=To-Po,$l=this._offsetPrev,Wl=this._offsetNext,Xl=this._weightPrev,Yl=this._weightNext,Zl=(yn-vn)/(Rn-vn),ey=Zl*Zl,Rm=ey*Zl,ry=-Xl*Rm+2*Xl*ey-Xl*Zl,_g=(1+Xl)*Rm+(-1.5-2*Xl)*ey+(-.5+Xl)*Zl+1,ty=(-1-Yl)*Rm+(1.5+Yl)*ey+.5*Zl,ny=Yl*Rm-Yl*ey,iy=0;iy!==Po;++iy)Bn[iy]=ry*Co[$l+iy]+_g*Co[Io+iy]+ty*Co[To+iy]+ny*Co[Wl+iy];return Bn}});function LinearInterpolant(cr,vn,yn,Rn){Interpolant.call(this,cr,vn,yn,Rn)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(cr,vn,yn,Rn){for(var Bn=this.resultBuffer,Co=this.sampleValues,Po=this.valueSize,To=cr*Po,Io=To-Po,$l=(yn-vn)/(Rn-vn),Wl=1-$l,Xl=0;Xl!==Po;++Xl)Bn[Xl]=Co[Io+Xl]*Wl+Co[To+Xl]*$l;return Bn}});function DiscreteInterpolant(cr,vn,yn,Rn){Interpolant.call(this,cr,vn,yn,Rn)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(cr){return this.copySampleValue_(cr-1)}});function KeyframeTrack(cr,vn,yn,Rn){if(cr===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(vn===void 0||vn.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+cr);this.name=cr,this.times=AnimationUtils.convertArray(vn,this.TimeBufferType),this.values=AnimationUtils.convertArray(yn,this.ValueBufferType),this.setInterpolation(Rn||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(cr){var vn=cr.constructor,yn;if(vn.toJSON!==void 0)yn=vn.toJSON(cr);else{yn={name:cr.name,times:AnimationUtils.convertArray(cr.times,Array),values:AnimationUtils.convertArray(cr.values,Array)};var Rn=cr.getInterpolation();Rn!==cr.DefaultInterpolation&&(yn.interpolation=Rn)}return yn.type=cr.ValueTypeName,yn}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(cr){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),cr)},InterpolantFactoryMethodLinear:function(cr){return new LinearInterpolant(this.times,this.values,this.getValueSize(),cr)},InterpolantFactoryMethodSmooth:function(cr){return new CubicInterpolant(this.times,this.values,this.getValueSize(),cr)},setInterpolation:function(cr){var vn;switch(cr){case InterpolateDiscrete:vn=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:vn=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:vn=this.InterpolantFactoryMethodSmooth;break}if(vn===void 0){var yn="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(cr!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(yn);return console.warn("THREE.KeyframeTrack:",yn),this}return this.createInterpolant=vn,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(cr){if(cr!==0)for(var vn=this.times,yn=0,Rn=vn.length;yn!==Rn;++yn)vn[yn]+=cr;return this},scale:function(cr){if(cr!==1)for(var vn=this.times,yn=0,Rn=vn.length;yn!==Rn;++yn)vn[yn]*=cr;return this},trim:function(cr,vn){for(var yn=this.times,Rn=yn.length,Bn=0,Co=Rn-1;Bn!==Rn&&yn[Bn]<cr;)++Bn;for(;Co!==-1&&yn[Co]>vn;)--Co;if(++Co,Bn!==0||Co!==Rn){Bn>=Co&&(Co=Math.max(Co,1),Bn=Co-1);var Po=this.getValueSize();this.times=AnimationUtils.arraySlice(yn,Bn,Co),this.values=AnimationUtils.arraySlice(this.values,Bn*Po,Co*Po)}return this},validate:function(){var cr=!0,vn=this.getValueSize();vn-Math.floor(vn)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),cr=!1);var yn=this.times,Rn=this.values,Bn=yn.length;Bn===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),cr=!1);for(var Co=null,Po=0;Po!==Bn;Po++){var To=yn[Po];if(typeof To=="number"&&isNaN(To)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Po,To),cr=!1;break}if(Co!==null&&Co>To){console.error("THREE.KeyframeTrack: Out of order keys.",this,Po,To,Co),cr=!1;break}Co=To}if(Rn!==void 0&&AnimationUtils.isTypedArray(Rn))for(var Po=0,Io=Rn.length;Po!==Io;++Po){var $l=Rn[Po];if(isNaN($l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Po,$l),cr=!1;break}}return cr},optimize:function(){for(var cr=AnimationUtils.arraySlice(this.times),vn=AnimationUtils.arraySlice(this.values),yn=this.getValueSize(),Rn=this.getInterpolation()===InterpolateSmooth,Bn=1,Co=cr.length-1,Po=1;Po<Co;++Po){var To=!1,Io=cr[Po],$l=cr[Po+1];if(Io!==$l&&(Po!==1||Io!==Io[0]))if(Rn)To=!0;else for(var Wl=Po*yn,Xl=Wl-yn,Yl=Wl+yn,Zl=0;Zl!==yn;++Zl){var ey=vn[Wl+Zl];if(ey!==vn[Xl+Zl]||ey!==vn[Yl+Zl]){To=!0;break}}if(To){if(Po!==Bn){cr[Bn]=cr[Po];for(var Rm=Po*yn,ry=Bn*yn,Zl=0;Zl!==yn;++Zl)vn[ry+Zl]=vn[Rm+Zl]}++Bn}}if(Co>0){cr[Bn]=cr[Co];for(var Rm=Co*yn,ry=Bn*yn,Zl=0;Zl!==yn;++Zl)vn[ry+Zl]=vn[Rm+Zl];++Bn}return Bn!==cr.length?(this.times=AnimationUtils.arraySlice(cr,0,Bn),this.values=AnimationUtils.arraySlice(vn,0,Bn*yn)):(this.times=cr,this.values=vn),this},clone:function(){var cr=AnimationUtils.arraySlice(this.times,0),vn=AnimationUtils.arraySlice(this.values,0),yn=this.constructor,Rn=new yn(this.name,cr,vn);return Rn.createInterpolant=this.createInterpolant,Rn}});function BooleanKeyframeTrack(cr,vn,yn){KeyframeTrack.call(this,cr,vn,yn)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(cr,vn,yn,Rn){KeyframeTrack.call(this,cr,vn,yn,Rn)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(cr,vn,yn,Rn){KeyframeTrack.call(this,cr,vn,yn,Rn)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(cr,vn,yn,Rn){Interpolant.call(this,cr,vn,yn,Rn)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(cr,vn,yn,Rn){for(var Bn=this.resultBuffer,Co=this.sampleValues,Po=this.valueSize,To=cr*Po,Io=(yn-vn)/(Rn-vn),$l=To+Po;To!==$l;To+=4)Quaternion.slerpFlat(Bn,0,Co,To-Po,Co,To,Io);return Bn}});function QuaternionKeyframeTrack(cr,vn,yn,Rn){KeyframeTrack.call(this,cr,vn,yn,Rn)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(cr){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),cr)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(cr,vn,yn,Rn){KeyframeTrack.call(this,cr,vn,yn,Rn)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(cr,vn,yn,Rn){KeyframeTrack.call(this,cr,vn,yn,Rn)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(cr,vn,yn,Rn){this.name=cr,this.tracks=yn,this.duration=vn!==void 0?vn:-1,this.blendMode=Rn!==void 0?Rn:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(cr){switch(cr.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+cr)}function parseKeyframeTrack(cr){if(cr.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var vn=getTrackTypeForValueTypeName(cr.type);if(cr.times===void 0){var yn=[],Rn=[];AnimationUtils.flattenJSON(cr.keys,yn,Rn,"value"),cr.times=yn,cr.values=Rn}return vn.parse!==void 0?vn.parse(cr):new vn(cr.name,cr.times,cr.values,cr.interpolation)}Object.assign(AnimationClip,{parse:function(cr){for(var vn=[],yn=cr.tracks,Rn=1/(cr.fps||1),Bn=0,Co=yn.length;Bn!==Co;++Bn)vn.push(parseKeyframeTrack(yn[Bn]).scale(Rn));return new AnimationClip(cr.name,cr.duration,vn,cr.blendMode)},toJSON:function(cr){for(var vn=[],yn=cr.tracks,Rn={name:cr.name,duration:cr.duration,tracks:vn,uuid:cr.uuid,blendMode:cr.blendMode},Bn=0,Co=yn.length;Bn!==Co;++Bn)vn.push(KeyframeTrack.toJSON(yn[Bn]));return Rn},CreateFromMorphTargetSequence:function(cr,vn,yn,Rn){for(var Bn=vn.length,Co=[],Po=0;Po<Bn;Po++){var To=[],Io=[];To.push((Po+Bn-1)%Bn,Po,(Po+1)%Bn),Io.push(0,1,0);var $l=AnimationUtils.getKeyframeOrder(To);To=AnimationUtils.sortedArray(To,1,$l),Io=AnimationUtils.sortedArray(Io,1,$l),!Rn&&To[0]===0&&(To.push(Bn),Io.push(Io[0])),Co.push(new NumberKeyframeTrack(".morphTargetInfluences["+vn[Po].name+"]",To,Io).scale(1/yn))}return new AnimationClip(cr,-1,Co)},findByName:function(cr,vn){var yn=cr;if(!Array.isArray(cr)){var Rn=cr;yn=Rn.geometry&&Rn.geometry.animations||Rn.animations}for(var Bn=0;Bn<yn.length;Bn++)if(yn[Bn].name===vn)return yn[Bn];return null},CreateClipsFromMorphTargetSequences:function(cr,vn,yn){for(var Rn={},Bn=/^([\w-]*?)([\d]+)$/,Co=0,Po=cr.length;Co<Po;Co++){var To=cr[Co],Io=To.name.match(Bn);if(Io&&Io.length>1){var $l=Io[1],Wl=Rn[$l];Wl||(Rn[$l]=Wl=[]),Wl.push(To)}}var Xl=[];for(var $l in Rn)Xl.push(AnimationClip.CreateFromMorphTargetSequence($l,Rn[$l],vn,yn));return Xl},parseAnimation:function(cr,vn){if(!cr)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var yn=function(iy,oy,ay,uy,hy){if(ay.length!==0){var my=[],ly=[];AnimationUtils.flattenJSON(ay,my,ly,uy),my.length!==0&&hy.push(new iy(oy,my,ly))}},Rn=[],Bn=cr.name||"default",Co=cr.length||-1,Po=cr.fps||30,To=cr.blendMode,Io=cr.hierarchy||[],$l=0;$l<Io.length;$l++){var Wl=Io[$l].keys;if(!(!Wl||Wl.length===0))if(Wl[0].morphTargets){for(var Xl={},Yl=0;Yl<Wl.length;Yl++)if(Wl[Yl].morphTargets)for(var Zl=0;Zl<Wl[Yl].morphTargets.length;Zl++)Xl[Wl[Yl].morphTargets[Zl]]=-1;for(var ey in Xl){for(var Rm=[],ry=[],Zl=0;Zl!==Wl[Yl].morphTargets.length;++Zl){var _g=Wl[Yl];Rm.push(_g.time),ry.push(_g.morphTarget===ey?1:0)}Rn.push(new NumberKeyframeTrack(".morphTargetInfluence["+ey+"]",Rm,ry))}Co=Xl.length*(Po||1)}else{var ty=".bones["+vn[$l].name+"]";yn(VectorKeyframeTrack,ty+".position",Wl,"pos",Rn),yn(QuaternionKeyframeTrack,ty+".quaternion",Wl,"rot",Rn),yn(VectorKeyframeTrack,ty+".scale",Wl,"scl",Rn)}}if(Rn.length===0)return null;var ny=new AnimationClip(Bn,Co,Rn,To);return ny}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var cr=this.tracks,vn=0,yn=0,Rn=cr.length;yn!==Rn;++yn){var Bn=this.tracks[yn];vn=Math.max(vn,Bn.times[Bn.times.length-1])}return this.duration=vn,this},trim:function(){for(var cr=0;cr<this.tracks.length;cr++)this.tracks[cr].trim(0,this.duration);return this},validate:function(){for(var cr=!0,vn=0;vn<this.tracks.length;vn++)cr=cr&&this.tracks[vn].validate();return cr},optimize:function(){for(var cr=0;cr<this.tracks.length;cr++)this.tracks[cr].optimize();return this},clone:function(){for(var cr=[],vn=0;vn<this.tracks.length;vn++)cr.push(this.tracks[vn].clone());return new AnimationClip(this.name,this.duration,cr,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(cr,vn){this.enabled!==!1&&(this.files[cr]=vn)},get:function(cr){if(this.enabled!==!1)return this.files[cr]},remove:function(cr){delete this.files[cr]},clear:function(){this.files={}}};function LoadingManager(cr,vn,yn){var Rn=this,Bn=!1,Co=0,Po=0,To=void 0,Io=[];this.onStart=void 0,this.onLoad=cr,this.onProgress=vn,this.onError=yn,this.itemStart=function($l){Po++,Bn===!1&&Rn.onStart!==void 0&&Rn.onStart($l,Co,Po),Bn=!0},this.itemEnd=function($l){Co++,Rn.onProgress!==void 0&&Rn.onProgress($l,Co,Po),Co===Po&&(Bn=!1,Rn.onLoad!==void 0&&Rn.onLoad())},this.itemError=function($l){Rn.onError!==void 0&&Rn.onError($l)},this.resolveURL=function($l){return To?To($l):$l},this.setURLModifier=function($l){return To=$l,this},this.addHandler=function($l,Wl){return Io.push($l,Wl),this},this.removeHandler=function($l){var Wl=Io.indexOf($l);return Wl!==-1&&Io.splice(Wl,2),this},this.getHandler=function($l){for(var Wl=0,Xl=Io.length;Wl<Xl;Wl+=2){var Yl=Io[Wl],Zl=Io[Wl+1];if(Yl.global&&(Yl.lastIndex=0),Yl.test($l))return Zl}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(cr){this.manager=cr!==void 0?cr:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(cr,vn){var yn=this;return new Promise(function(Rn,Bn){yn.load(cr,Rn,vn,Bn)})},parse:function(){},setCrossOrigin:function(cr){return this.crossOrigin=cr,this},setPath:function(cr){return this.path=cr,this},setResourcePath:function(cr){return this.resourcePath=cr,this},setRequestHeader:function(cr){return this.requestHeader=cr,this}});var loading={};function FileLoader(cr){Loader.call(this,cr)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(cr,vn,yn,Rn){cr===void 0&&(cr=""),this.path!==void 0&&(cr=this.path+cr),cr=this.manager.resolveURL(cr);var Bn=this,Co=Cache.get(cr);if(Co!==void 0)return Bn.manager.itemStart(cr),setTimeout(function(){vn&&vn(Co),Bn.manager.itemEnd(cr)},0),Co;if(loading[cr]!==void 0){loading[cr].push({onLoad:vn,onProgress:yn,onError:Rn});return}var Po=/^data:(.*?)(;base64)?,(.*)$/,To=cr.match(Po);if(To){var Io=To[1],$l=!!To[2],Wl=To[3];Wl=decodeURIComponent(Wl),$l&&(Wl=atob(Wl));try{var Xl,Yl=(this.responseType||"").toLowerCase();switch(Yl){case"arraybuffer":case"blob":for(var Zl=new Uint8Array(Wl.length),ey=0;ey<Wl.length;ey++)Zl[ey]=Wl.charCodeAt(ey);Yl==="blob"?Xl=new Blob([Zl.buffer],{type:Io}):Xl=Zl.buffer;break;case"document":var Rm=new DOMParser;Xl=Rm.parseFromString(Wl,Io);break;case"json":Xl=JSON.parse(Wl);break;default:Xl=Wl;break}setTimeout(function(){vn&&vn(Xl),Bn.manager.itemEnd(cr)},0)}catch(ty){setTimeout(function(){Rn&&Rn(ty),Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)},0)}}else{loading[cr]=[],loading[cr].push({onLoad:vn,onProgress:yn,onError:Rn});var ry=new XMLHttpRequest;ry.open("GET",cr,!0),ry.addEventListener("load",function(ty){var ny=this.response,iy=loading[cr];if(delete loading[cr],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(cr,ny);for(var oy=0,ay=iy.length;oy<ay;oy++){var uy=iy[oy];uy.onLoad&&uy.onLoad(ny)}Bn.manager.itemEnd(cr)}else{for(var oy=0,ay=iy.length;oy<ay;oy++){var uy=iy[oy];uy.onError&&uy.onError(ty)}Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)}},!1),ry.addEventListener("progress",function(ty){for(var ny=loading[cr],iy=0,oy=ny.length;iy<oy;iy++){var ay=ny[iy];ay.onProgress&&ay.onProgress(ty)}},!1),ry.addEventListener("error",function(ty){var ny=loading[cr];delete loading[cr];for(var iy=0,oy=ny.length;iy<oy;iy++){var ay=ny[iy];ay.onError&&ay.onError(ty)}Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)},!1),ry.addEventListener("abort",function(ty){var ny=loading[cr];delete loading[cr];for(var iy=0,oy=ny.length;iy<oy;iy++){var ay=ny[iy];ay.onError&&ay.onError(ty)}Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)},!1),this.responseType!==void 0&&(ry.responseType=this.responseType),this.withCredentials!==void 0&&(ry.withCredentials=this.withCredentials),ry.overrideMimeType&&ry.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var _g in this.requestHeader)ry.setRequestHeader(_g,this.requestHeader[_g]);ry.send(null)}return Bn.manager.itemStart(cr),ry},setResponseType:function(cr){return this.responseType=cr,this},setWithCredentials:function(cr){return this.withCredentials=cr,this},setMimeType:function(cr){return this.mimeType=cr,this}});function AnimationLoader(cr){Loader.call(this,cr)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new FileLoader(Bn.manager);Co.setPath(Bn.path),Co.load(cr,function(Po){try{vn(Bn.parse(JSON.parse(Po)))}catch(To){Rn?Rn(To):console.error(To),Bn.manager.itemError(cr)}},yn,Rn)},parse:function(cr){for(var vn=[],yn=0;yn<cr.length;yn++){var Rn=AnimationClip.parse(cr[yn]);vn.push(Rn)}return vn}});function CompressedTextureLoader(cr){Loader.call(this,cr)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=[],Po=new CompressedTexture;Po.image=Co;var To=new FileLoader(this.manager);To.setPath(this.path),To.setResponseType("arraybuffer");function Io(Yl){To.load(cr[Yl],function(Zl){var ey=Bn.parse(Zl,!0);Co[Yl]={width:ey.width,height:ey.height,format:ey.format,mipmaps:ey.mipmaps},$l+=1,$l===6&&(ey.mipmapCount===1&&(Po.minFilter=LinearFilter),Po.format=ey.format,Po.needsUpdate=!0,vn&&vn(Po))},yn,Rn)}if(Array.isArray(cr))for(var $l=0,Wl=0,Xl=cr.length;Wl<Xl;++Wl)Io(Wl);else To.load(cr,function(Yl){var Zl=Bn.parse(Yl,!0);if(Zl.isCubemap)for(var ey=Zl.mipmaps.length/Zl.mipmapCount,Rm=0;Rm<ey;Rm++){Co[Rm]={mipmaps:[]};for(var ry=0;ry<Zl.mipmapCount;ry++)Co[Rm].mipmaps.push(Zl.mipmaps[Rm*Zl.mipmapCount+ry]),Co[Rm].format=Zl.format,Co[Rm].width=Zl.width,Co[Rm].height=Zl.height}else Po.image.width=Zl.width,Po.image.height=Zl.height,Po.mipmaps=Zl.mipmaps;Zl.mipmapCount===1&&(Po.minFilter=LinearFilter),Po.format=Zl.format,Po.needsUpdate=!0,vn&&vn(Po)},yn,Rn);return Po}});function DataTextureLoader(cr){Loader.call(this,cr)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new DataTexture,Po=new FileLoader(this.manager);return Po.setResponseType("arraybuffer"),Po.setPath(this.path),Po.load(cr,function(To){var Io=Bn.parse(To);!Io||(Io.image!==void 0?Co.image=Io.image:Io.data!==void 0&&(Co.image.width=Io.width,Co.image.height=Io.height,Co.image.data=Io.data),Co.wrapS=Io.wrapS!==void 0?Io.wrapS:ClampToEdgeWrapping,Co.wrapT=Io.wrapT!==void 0?Io.wrapT:ClampToEdgeWrapping,Co.magFilter=Io.magFilter!==void 0?Io.magFilter:LinearFilter,Co.minFilter=Io.minFilter!==void 0?Io.minFilter:LinearFilter,Co.anisotropy=Io.anisotropy!==void 0?Io.anisotropy:1,Io.format!==void 0&&(Co.format=Io.format),Io.type!==void 0&&(Co.type=Io.type),Io.mipmaps!==void 0&&(Co.mipmaps=Io.mipmaps,Co.minFilter=LinearMipmapLinearFilter),Io.mipmapCount===1&&(Co.minFilter=LinearFilter),Co.needsUpdate=!0,vn&&vn(Co,Io))},yn,Rn),Co}});function ImageLoader(cr){Loader.call(this,cr)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(cr,vn,yn,Rn){this.path!==void 0&&(cr=this.path+cr),cr=this.manager.resolveURL(cr);var Bn=this,Co=Cache.get(cr);if(Co!==void 0)return Bn.manager.itemStart(cr),setTimeout(function(){vn&&vn(Co),Bn.manager.itemEnd(cr)},0),Co;var Po=document.createElementNS("http://www.w3.org/1999/xhtml","img");function To(){Po.removeEventListener("load",To,!1),Po.removeEventListener("error",Io,!1),Cache.add(cr,this),vn&&vn(this),Bn.manager.itemEnd(cr)}function Io($l){Po.removeEventListener("load",To,!1),Po.removeEventListener("error",Io,!1),Rn&&Rn($l),Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)}return Po.addEventListener("load",To,!1),Po.addEventListener("error",Io,!1),cr.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Po.crossOrigin=this.crossOrigin),Bn.manager.itemStart(cr),Po.src=cr,Po}});function CubeTextureLoader(cr){Loader.call(this,cr)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(cr,vn,yn,Rn){var Bn=new CubeTexture,Co=new ImageLoader(this.manager);Co.setCrossOrigin(this.crossOrigin),Co.setPath(this.path);var Po=0;function To($l){Co.load(cr[$l],function(Wl){Bn.images[$l]=Wl,Po++,Po===6&&(Bn.needsUpdate=!0,vn&&vn(Bn))},void 0,Rn)}for(var Io=0;Io<cr.length;++Io)To(Io);return Bn}});function TextureLoader(cr){Loader.call(this,cr)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(cr,vn,yn,Rn){var Bn=new Texture,Co=new ImageLoader(this.manager);return Co.setCrossOrigin(this.crossOrigin),Co.setPath(this.path),Co.load(cr,function(Po){Bn.image=Po;var To=cr.search(/\.jpe?g($|\?)/i)>0||cr.search(/^data\:image\/jpeg/)===0;Bn.format=To?RGBFormat:RGBAFormat,Bn.needsUpdate=!0,vn!==void 0&&vn(Bn)},yn,Rn),Bn}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(cr,vn){var yn=this.getUtoTmapping(cr);return this.getPoint(yn,vn)},getPoints:function(cr){cr===void 0&&(cr=5);for(var vn=[],yn=0;yn<=cr;yn++)vn.push(this.getPoint(yn/cr));return vn},getSpacedPoints:function(cr){cr===void 0&&(cr=5);for(var vn=[],yn=0;yn<=cr;yn++)vn.push(this.getPointAt(yn/cr));return vn},getLength:function(){var cr=this.getLengths();return cr[cr.length-1]},getLengths:function(cr){if(cr===void 0&&(cr=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===cr+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var vn=[],yn,Rn=this.getPoint(0),Bn,Co=0;for(vn.push(0),Bn=1;Bn<=cr;Bn++)yn=this.getPoint(Bn/cr),Co+=yn.distanceTo(Rn),vn.push(Co),Rn=yn;return this.cacheArcLengths=vn,vn},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(cr,vn){var yn=this.getLengths(),Rn=0,Bn=yn.length,Co;vn?Co=vn:Co=cr*yn[Bn-1];for(var Po=0,To=Bn-1,Io;Po<=To;)if(Rn=Math.floor(Po+(To-Po)/2),Io=yn[Rn]-Co,Io<0)Po=Rn+1;else if(Io>0)To=Rn-1;else{To=Rn;break}if(Rn=To,yn[Rn]===Co)return Rn/(Bn-1);var $l=yn[Rn],Wl=yn[Rn+1],Xl=Wl-$l,Yl=(Co-$l)/Xl,Zl=(Rn+Yl)/(Bn-1);return Zl},getTangent:function(cr,vn){var yn=1e-4,Rn=cr-yn,Bn=cr+yn;Rn<0&&(Rn=0),Bn>1&&(Bn=1);var Co=this.getPoint(Rn),Po=this.getPoint(Bn),To=vn||(Co.isVector2?new Vector2:new Vector3);return To.copy(Po).sub(Co).normalize(),To},getTangentAt:function(cr,vn){var yn=this.getUtoTmapping(cr);return this.getTangent(yn,vn)},computeFrenetFrames:function(cr,vn){var yn=new Vector3,Rn=[],Bn=[],Co=[],Po=new Vector3,To=new Matrix4,Io,$l,Wl;for(Io=0;Io<=cr;Io++)$l=Io/cr,Rn[Io]=this.getTangentAt($l,new Vector3),Rn[Io].normalize();Bn[0]=new Vector3,Co[0]=new Vector3;var Xl=Number.MAX_VALUE,Yl=Math.abs(Rn[0].x),Zl=Math.abs(Rn[0].y),ey=Math.abs(Rn[0].z);for(Yl<=Xl&&(Xl=Yl,yn.set(1,0,0)),Zl<=Xl&&(Xl=Zl,yn.set(0,1,0)),ey<=Xl&&yn.set(0,0,1),Po.crossVectors(Rn[0],yn).normalize(),Bn[0].crossVectors(Rn[0],Po),Co[0].crossVectors(Rn[0],Bn[0]),Io=1;Io<=cr;Io++)Bn[Io]=Bn[Io-1].clone(),Co[Io]=Co[Io-1].clone(),Po.crossVectors(Rn[Io-1],Rn[Io]),Po.length()>Number.EPSILON&&(Po.normalize(),Wl=Math.acos(MathUtils.clamp(Rn[Io-1].dot(Rn[Io]),-1,1)),Bn[Io].applyMatrix4(To.makeRotationAxis(Po,Wl))),Co[Io].crossVectors(Rn[Io],Bn[Io]);if(vn===!0)for(Wl=Math.acos(MathUtils.clamp(Bn[0].dot(Bn[cr]),-1,1)),Wl/=cr,Rn[0].dot(Po.crossVectors(Bn[0],Bn[cr]))>0&&(Wl=-Wl),Io=1;Io<=cr;Io++)Bn[Io].applyMatrix4(To.makeRotationAxis(Rn[Io],Wl*Io)),Co[Io].crossVectors(Rn[Io],Bn[Io]);return{tangents:Rn,normals:Bn,binormals:Co}},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.arcLengthDivisions=cr.arcLengthDivisions,this},toJSON:function(){var cr={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return cr.arcLengthDivisions=this.arcLengthDivisions,cr.type=this.type,cr},fromJSON:function(cr){return this.arcLengthDivisions=cr.arcLengthDivisions,this}});function EllipseCurve(cr,vn,yn,Rn,Bn,Co,Po,To){Curve.call(this),this.type="EllipseCurve",this.aX=cr||0,this.aY=vn||0,this.xRadius=yn||1,this.yRadius=Rn||1,this.aStartAngle=Bn||0,this.aEndAngle=Co||2*Math.PI,this.aClockwise=Po||!1,this.aRotation=To||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(cr,vn){for(var yn=vn||new Vector2,Rn=Math.PI*2,Bn=this.aEndAngle-this.aStartAngle,Co=Math.abs(Bn)<Number.EPSILON;Bn<0;)Bn+=Rn;for(;Bn>Rn;)Bn-=Rn;Bn<Number.EPSILON&&(Co?Bn=0:Bn=Rn),this.aClockwise===!0&&!Co&&(Bn===Rn?Bn=-Rn:Bn=Bn-Rn);var Po=this.aStartAngle+cr*Bn,To=this.aX+this.xRadius*Math.cos(Po),Io=this.aY+this.yRadius*Math.sin(Po);if(this.aRotation!==0){var $l=Math.cos(this.aRotation),Wl=Math.sin(this.aRotation),Xl=To-this.aX,Yl=Io-this.aY;To=Xl*$l-Yl*Wl+this.aX,Io=Xl*Wl+Yl*$l+this.aY}return yn.set(To,Io)};EllipseCurve.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.aX=cr.aX,this.aY=cr.aY,this.xRadius=cr.xRadius,this.yRadius=cr.yRadius,this.aStartAngle=cr.aStartAngle,this.aEndAngle=cr.aEndAngle,this.aClockwise=cr.aClockwise,this.aRotation=cr.aRotation,this};EllipseCurve.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.aX=this.aX,cr.aY=this.aY,cr.xRadius=this.xRadius,cr.yRadius=this.yRadius,cr.aStartAngle=this.aStartAngle,cr.aEndAngle=this.aEndAngle,cr.aClockwise=this.aClockwise,cr.aRotation=this.aRotation,cr};EllipseCurve.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.aX=cr.aX,this.aY=cr.aY,this.xRadius=cr.xRadius,this.yRadius=cr.yRadius,this.aStartAngle=cr.aStartAngle,this.aEndAngle=cr.aEndAngle,this.aClockwise=cr.aClockwise,this.aRotation=cr.aRotation,this};function ArcCurve(cr,vn,yn,Rn,Bn,Co){EllipseCurve.call(this,cr,vn,yn,yn,Rn,Bn,Co),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var cr=0,vn=0,yn=0,Rn=0;function Bn(Co,Po,To,Io){cr=Co,vn=To,yn=-3*Co+3*Po-2*To-Io,Rn=2*Co-2*Po+To+Io}return{initCatmullRom:function(Co,Po,To,Io,$l){Bn(Po,To,$l*(To-Co),$l*(Io-Po))},initNonuniformCatmullRom:function(Co,Po,To,Io,$l,Wl,Xl){var Yl=(Po-Co)/$l-(To-Co)/($l+Wl)+(To-Po)/Wl,Zl=(To-Po)/Wl-(Io-Po)/(Wl+Xl)+(Io-To)/Xl;Yl*=Wl,Zl*=Wl,Bn(Po,To,Yl,Zl)},calc:function(Co){var Po=Co*Co,To=Po*Co;return cr+vn*Co+yn*Po+Rn*To}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(cr,vn,yn,Rn){Curve.call(this),this.type="CatmullRomCurve3",this.points=cr||[],this.closed=vn||!1,this.curveType=yn||"centripetal",this.tension=Rn||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(cr,vn){var yn=vn||new Vector3,Rn=this.points,Bn=Rn.length,Co=(Bn-(this.closed?0:1))*cr,Po=Math.floor(Co),To=Co-Po;this.closed?Po+=Po>0?0:(Math.floor(Math.abs(Po)/Bn)+1)*Bn:To===0&&Po===Bn-1&&(Po=Bn-2,To=1);var Io,$l,Wl,Xl;if(this.closed||Po>0?Io=Rn[(Po-1)%Bn]:(tmp.subVectors(Rn[0],Rn[1]).add(Rn[0]),Io=tmp),$l=Rn[Po%Bn],Wl=Rn[(Po+1)%Bn],this.closed||Po+2<Bn?Xl=Rn[(Po+2)%Bn]:(tmp.subVectors(Rn[Bn-1],Rn[Bn-2]).add(Rn[Bn-1]),Xl=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Yl=this.curveType==="chordal"?.5:.25,Zl=Math.pow(Io.distanceToSquared($l),Yl),ey=Math.pow($l.distanceToSquared(Wl),Yl),Rm=Math.pow(Wl.distanceToSquared(Xl),Yl);ey<1e-4&&(ey=1),Zl<1e-4&&(Zl=ey),Rm<1e-4&&(Rm=ey),px.initNonuniformCatmullRom(Io.x,$l.x,Wl.x,Xl.x,Zl,ey,Rm),py.initNonuniformCatmullRom(Io.y,$l.y,Wl.y,Xl.y,Zl,ey,Rm),pz.initNonuniformCatmullRom(Io.z,$l.z,Wl.z,Xl.z,Zl,ey,Rm)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Io.x,$l.x,Wl.x,Xl.x,this.tension),py.initCatmullRom(Io.y,$l.y,Wl.y,Xl.y,this.tension),pz.initCatmullRom(Io.z,$l.z,Wl.z,Xl.z,this.tension));return yn.set(px.calc(To),py.calc(To),pz.calc(To)),yn};CatmullRomCurve3.prototype.copy=function(cr){Curve.prototype.copy.call(this,cr),this.points=[];for(var vn=0,yn=cr.points.length;vn<yn;vn++){var Rn=cr.points[vn];this.points.push(Rn.clone())}return this.closed=cr.closed,this.curveType=cr.curveType,this.tension=cr.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);cr.points=[];for(var vn=0,yn=this.points.length;vn<yn;vn++){var Rn=this.points[vn];cr.points.push(Rn.toArray())}return cr.closed=this.closed,cr.curveType=this.curveType,cr.tension=this.tension,cr};CatmullRomCurve3.prototype.fromJSON=function(cr){Curve.prototype.fromJSON.call(this,cr),this.points=[];for(var vn=0,yn=cr.points.length;vn<yn;vn++){var Rn=cr.points[vn];this.points.push(new Vector3().fromArray(Rn))}return this.closed=cr.closed,this.curveType=cr.curveType,this.tension=cr.tension,this};function CatmullRom(cr,vn,yn,Rn,Bn){var Co=(Rn-vn)*.5,Po=(Bn-yn)*.5,To=cr*cr,Io=cr*To;return(2*yn-2*Rn+Co+Po)*Io+(-3*yn+3*Rn-2*Co-Po)*To+Co*cr+yn}function QuadraticBezierP0(cr,vn){var yn=1-cr;return yn*yn*vn}function QuadraticBezierP1(cr,vn){return 2*(1-cr)*cr*vn}function QuadraticBezierP2(cr,vn){return cr*cr*vn}function QuadraticBezier(cr,vn,yn,Rn){return QuadraticBezierP0(cr,vn)+QuadraticBezierP1(cr,yn)+QuadraticBezierP2(cr,Rn)}function CubicBezierP0(cr,vn){var yn=1-cr;return yn*yn*yn*vn}function CubicBezierP1(cr,vn){var yn=1-cr;return 3*yn*yn*cr*vn}function CubicBezierP2(cr,vn){return 3*(1-cr)*cr*cr*vn}function CubicBezierP3(cr,vn){return cr*cr*cr*vn}function CubicBezier(cr,vn,yn,Rn,Bn){return CubicBezierP0(cr,vn)+CubicBezierP1(cr,yn)+CubicBezierP2(cr,Rn)+CubicBezierP3(cr,Bn)}function CubicBezierCurve(cr,vn,yn,Rn){Curve.call(this),this.type="CubicBezierCurve",this.v0=cr||new Vector2,this.v1=vn||new Vector2,this.v2=yn||new Vector2,this.v3=Rn||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(cr,vn){var yn=vn||new Vector2,Rn=this.v0,Bn=this.v1,Co=this.v2,Po=this.v3;return yn.set(CubicBezier(cr,Rn.x,Bn.x,Co.x,Po.x),CubicBezier(cr,Rn.y,Bn.y,Co.y,Po.y)),yn};CubicBezierCurve.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v0.copy(cr.v0),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this.v3.copy(cr.v3),this};CubicBezierCurve.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v0=this.v0.toArray(),cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr.v3=this.v3.toArray(),cr};CubicBezierCurve.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v0.fromArray(cr.v0),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this.v3.fromArray(cr.v3),this};function CubicBezierCurve3(cr,vn,yn,Rn){Curve.call(this),this.type="CubicBezierCurve3",this.v0=cr||new Vector3,this.v1=vn||new Vector3,this.v2=yn||new Vector3,this.v3=Rn||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(cr,vn){var yn=vn||new Vector3,Rn=this.v0,Bn=this.v1,Co=this.v2,Po=this.v3;return yn.set(CubicBezier(cr,Rn.x,Bn.x,Co.x,Po.x),CubicBezier(cr,Rn.y,Bn.y,Co.y,Po.y),CubicBezier(cr,Rn.z,Bn.z,Co.z,Po.z)),yn};CubicBezierCurve3.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v0.copy(cr.v0),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this.v3.copy(cr.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v0=this.v0.toArray(),cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr.v3=this.v3.toArray(),cr};CubicBezierCurve3.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v0.fromArray(cr.v0),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this.v3.fromArray(cr.v3),this};function LineCurve(cr,vn){Curve.call(this),this.type="LineCurve",this.v1=cr||new Vector2,this.v2=vn||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(cr,vn){var yn=vn||new Vector2;return cr===1?yn.copy(this.v2):(yn.copy(this.v2).sub(this.v1),yn.multiplyScalar(cr).add(this.v1)),yn};LineCurve.prototype.getPointAt=function(cr,vn){return this.getPoint(cr,vn)};LineCurve.prototype.getTangent=function(cr,vn){var yn=vn||new Vector2,yn=yn.copy(this.v2).sub(this.v1).normalize();return yn};LineCurve.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this};LineCurve.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr};LineCurve.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this};function LineCurve3(cr,vn){Curve.call(this),this.type="LineCurve3",this.v1=cr||new Vector3,this.v2=vn||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(cr,vn){var yn=vn||new Vector3;return cr===1?yn.copy(this.v2):(yn.copy(this.v2).sub(this.v1),yn.multiplyScalar(cr).add(this.v1)),yn};LineCurve3.prototype.getPointAt=function(cr,vn){return this.getPoint(cr,vn)};LineCurve3.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this};LineCurve3.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr};LineCurve3.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this};function QuadraticBezierCurve(cr,vn,yn){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=cr||new Vector2,this.v1=vn||new Vector2,this.v2=yn||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(cr,vn){var yn=vn||new Vector2,Rn=this.v0,Bn=this.v1,Co=this.v2;return yn.set(QuadraticBezier(cr,Rn.x,Bn.x,Co.x),QuadraticBezier(cr,Rn.y,Bn.y,Co.y)),yn};QuadraticBezierCurve.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v0.copy(cr.v0),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v0=this.v0.toArray(),cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr};QuadraticBezierCurve.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v0.fromArray(cr.v0),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this};function QuadraticBezierCurve3(cr,vn,yn){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=cr||new Vector3,this.v1=vn||new Vector3,this.v2=yn||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(cr,vn){var yn=vn||new Vector3,Rn=this.v0,Bn=this.v1,Co=this.v2;return yn.set(QuadraticBezier(cr,Rn.x,Bn.x,Co.x),QuadraticBezier(cr,Rn.y,Bn.y,Co.y),QuadraticBezier(cr,Rn.z,Bn.z,Co.z)),yn};QuadraticBezierCurve3.prototype.copy=function(cr){return Curve.prototype.copy.call(this,cr),this.v0.copy(cr.v0),this.v1.copy(cr.v1),this.v2.copy(cr.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);return cr.v0=this.v0.toArray(),cr.v1=this.v1.toArray(),cr.v2=this.v2.toArray(),cr};QuadraticBezierCurve3.prototype.fromJSON=function(cr){return Curve.prototype.fromJSON.call(this,cr),this.v0.fromArray(cr.v0),this.v1.fromArray(cr.v1),this.v2.fromArray(cr.v2),this};function SplineCurve(cr){Curve.call(this),this.type="SplineCurve",this.points=cr||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(cr,vn){var yn=vn||new Vector2,Rn=this.points,Bn=(Rn.length-1)*cr,Co=Math.floor(Bn),Po=Bn-Co,To=Rn[Co===0?Co:Co-1],Io=Rn[Co],$l=Rn[Co>Rn.length-2?Rn.length-1:Co+1],Wl=Rn[Co>Rn.length-3?Rn.length-1:Co+2];return yn.set(CatmullRom(Po,To.x,Io.x,$l.x,Wl.x),CatmullRom(Po,To.y,Io.y,$l.y,Wl.y)),yn};SplineCurve.prototype.copy=function(cr){Curve.prototype.copy.call(this,cr),this.points=[];for(var vn=0,yn=cr.points.length;vn<yn;vn++){var Rn=cr.points[vn];this.points.push(Rn.clone())}return this};SplineCurve.prototype.toJSON=function(){var cr=Curve.prototype.toJSON.call(this);cr.points=[];for(var vn=0,yn=this.points.length;vn<yn;vn++){var Rn=this.points[vn];cr.points.push(Rn.toArray())}return cr};SplineCurve.prototype.fromJSON=function(cr){Curve.prototype.fromJSON.call(this,cr),this.points=[];for(var vn=0,yn=cr.points.length;vn<yn;vn++){var Rn=cr.points[vn];this.points.push(new Vector2().fromArray(Rn))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(cr){this.curves.push(cr)},closePath:function(){var cr=this.curves[0].getPoint(0),vn=this.curves[this.curves.length-1].getPoint(1);cr.equals(vn)||this.curves.push(new LineCurve(vn,cr))},getPoint:function(cr){for(var vn=cr*this.getLength(),yn=this.getCurveLengths(),Rn=0;Rn<yn.length;){if(yn[Rn]>=vn){var Bn=yn[Rn]-vn,Co=this.curves[Rn],Po=Co.getLength(),To=Po===0?0:1-Bn/Po;return Co.getPointAt(To)}Rn++}return null},getLength:function(){var cr=this.getCurveLengths();return cr[cr.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var cr=[],vn=0,yn=0,Rn=this.curves.length;yn<Rn;yn++)vn+=this.curves[yn].getLength(),cr.push(vn);return this.cacheLengths=cr,cr},getSpacedPoints:function(cr){cr===void 0&&(cr=40);for(var vn=[],yn=0;yn<=cr;yn++)vn.push(this.getPoint(yn/cr));return this.autoClose&&vn.push(vn[0]),vn},getPoints:function(cr){cr=cr||12;for(var vn=[],yn,Rn=0,Bn=this.curves;Rn<Bn.length;Rn++)for(var Co=Bn[Rn],Po=Co&&Co.isEllipseCurve?cr*2:Co&&(Co.isLineCurve||Co.isLineCurve3)?1:Co&&Co.isSplineCurve?cr*Co.points.length:cr,To=Co.getPoints(Po),Io=0;Io<To.length;Io++){var $l=To[Io];yn&&yn.equals($l)||(vn.push($l),yn=$l)}return this.autoClose&&vn.length>1&&!vn[vn.length-1].equals(vn[0])&&vn.push(vn[0]),vn},copy:function(cr){Curve.prototype.copy.call(this,cr),this.curves=[];for(var vn=0,yn=cr.curves.length;vn<yn;vn++){var Rn=cr.curves[vn];this.curves.push(Rn.clone())}return this.autoClose=cr.autoClose,this},toJSON:function(){var cr=Curve.prototype.toJSON.call(this);cr.autoClose=this.autoClose,cr.curves=[];for(var vn=0,yn=this.curves.length;vn<yn;vn++){var Rn=this.curves[vn];cr.curves.push(Rn.toJSON())}return cr},fromJSON:function(cr){Curve.prototype.fromJSON.call(this,cr),this.autoClose=cr.autoClose,this.curves=[];for(var vn=0,yn=cr.curves.length;vn<yn;vn++){var Rn=cr.curves[vn];this.curves.push(new Curves[Rn.type]().fromJSON(Rn))}return this}});function Path(cr){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,cr&&this.setFromPoints(cr)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(cr){this.moveTo(cr[0].x,cr[0].y);for(var vn=1,yn=cr.length;vn<yn;vn++)this.lineTo(cr[vn].x,cr[vn].y);return this},moveTo:function(cr,vn){return this.currentPoint.set(cr,vn),this},lineTo:function(cr,vn){var yn=new LineCurve(this.currentPoint.clone(),new Vector2(cr,vn));return this.curves.push(yn),this.currentPoint.set(cr,vn),this},quadraticCurveTo:function(cr,vn,yn,Rn){var Bn=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(cr,vn),new Vector2(yn,Rn));return this.curves.push(Bn),this.currentPoint.set(yn,Rn),this},bezierCurveTo:function(cr,vn,yn,Rn,Bn,Co){var Po=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(cr,vn),new Vector2(yn,Rn),new Vector2(Bn,Co));return this.curves.push(Po),this.currentPoint.set(Bn,Co),this},splineThru:function(cr){var vn=[this.currentPoint.clone()].concat(cr),yn=new SplineCurve(vn);return this.curves.push(yn),this.currentPoint.copy(cr[cr.length-1]),this},arc:function(cr,vn,yn,Rn,Bn,Co){var Po=this.currentPoint.x,To=this.currentPoint.y;return this.absarc(cr+Po,vn+To,yn,Rn,Bn,Co),this},absarc:function(cr,vn,yn,Rn,Bn,Co){return this.absellipse(cr,vn,yn,yn,Rn,Bn,Co),this},ellipse:function(cr,vn,yn,Rn,Bn,Co,Po,To){var Io=this.currentPoint.x,$l=this.currentPoint.y;return this.absellipse(cr+Io,vn+$l,yn,Rn,Bn,Co,Po,To),this},absellipse:function(cr,vn,yn,Rn,Bn,Co,Po,To){var Io=new EllipseCurve(cr,vn,yn,Rn,Bn,Co,Po,To);if(this.curves.length>0){var $l=Io.getPoint(0);$l.equals(this.currentPoint)||this.lineTo($l.x,$l.y)}this.curves.push(Io);var Wl=Io.getPoint(1);return this.currentPoint.copy(Wl),this},copy:function(cr){return CurvePath.prototype.copy.call(this,cr),this.currentPoint.copy(cr.currentPoint),this},toJSON:function(){var cr=CurvePath.prototype.toJSON.call(this);return cr.currentPoint=this.currentPoint.toArray(),cr},fromJSON:function(cr){return CurvePath.prototype.fromJSON.call(this,cr),this.currentPoint.fromArray(cr.currentPoint),this}});function Shape(cr){Path.call(this,cr),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(cr){for(var vn=[],yn=0,Rn=this.holes.length;yn<Rn;yn++)vn[yn]=this.holes[yn].getPoints(cr);return vn},extractPoints:function(cr){return{shape:this.getPoints(cr),holes:this.getPointsHoles(cr)}},copy:function(cr){Path.prototype.copy.call(this,cr),this.holes=[];for(var vn=0,yn=cr.holes.length;vn<yn;vn++){var Rn=cr.holes[vn];this.holes.push(Rn.clone())}return this},toJSON:function(){var cr=Path.prototype.toJSON.call(this);cr.uuid=this.uuid,cr.holes=[];for(var vn=0,yn=this.holes.length;vn<yn;vn++){var Rn=this.holes[vn];cr.holes.push(Rn.toJSON())}return cr},fromJSON:function(cr){Path.prototype.fromJSON.call(this,cr),this.uuid=cr.uuid,this.holes=[];for(var vn=0,yn=cr.holes.length;vn<yn;vn++){var Rn=cr.holes[vn];this.holes.push(new Path().fromJSON(Rn))}return this}});function Light(cr,vn){Object3D.call(this),this.type="Light",this.color=new Color(cr),this.intensity=vn!==void 0?vn:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(cr){return Object3D.prototype.copy.call(this,cr),this.color.copy(cr.color),this.intensity=cr.intensity,this},toJSON:function(cr){var vn=Object3D.prototype.toJSON.call(this,cr);return vn.object.color=this.color.getHex(),vn.object.intensity=this.intensity,this.groundColor!==void 0&&(vn.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(vn.object.distance=this.distance),this.angle!==void 0&&(vn.object.angle=this.angle),this.decay!==void 0&&(vn.object.decay=this.decay),this.penumbra!==void 0&&(vn.object.penumbra=this.penumbra),this.shadow!==void 0&&(vn.object.shadow=this.shadow.toJSON()),vn}});function HemisphereLight(cr,vn,yn){Light.call(this,cr,yn),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(vn)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.groundColor.copy(cr.groundColor),this}});function LightShadow(cr){this.camera=cr,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(cr){var vn=this.camera,yn=this.matrix,Rn=this._projScreenMatrix,Bn=this._lookTarget,Co=this._lightPositionWorld;Co.setFromMatrixPosition(cr.matrixWorld),vn.position.copy(Co),Bn.setFromMatrixPosition(cr.target.matrixWorld),vn.lookAt(Bn),vn.updateMatrixWorld(),Rn.multiplyMatrices(vn.projectionMatrix,vn.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rn),yn.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),yn.multiply(vn.projectionMatrix),yn.multiply(vn.matrixWorldInverse)},getViewport:function(cr){return this._viewports[cr]},getFrameExtents:function(){return this._frameExtents},copy:function(cr){return this.camera=cr.camera.clone(),this.bias=cr.bias,this.radius=cr.radius,this.mapSize.copy(cr.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var cr={};return this.bias!==0&&(cr.bias=this.bias),this.radius!==1&&(cr.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(cr.mapSize=this.mapSize.toArray()),cr.camera=this.camera.toJSON(!1).object,delete cr.camera.matrix,cr}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(cr){var vn=this.camera,yn=MathUtils.RAD2DEG*2*cr.angle,Rn=this.mapSize.width/this.mapSize.height,Bn=cr.distance||vn.far;(yn!==vn.fov||Rn!==vn.aspect||Bn!==vn.far)&&(vn.fov=yn,vn.aspect=Rn,vn.far=Bn,vn.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,cr)}});function SpotLight(cr,vn,yn,Rn,Bn,Co){Light.call(this,cr,vn),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Po){this.intensity=Po/Math.PI}}),this.distance=yn!==void 0?yn:0,this.angle=Rn!==void 0?Rn:Math.PI/3,this.penumbra=Bn!==void 0?Bn:0,this.decay=Co!==void 0?Co:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.distance=cr.distance,this.angle=cr.angle,this.penumbra=cr.penumbra,this.decay=cr.decay,this.target=cr.target.clone(),this.shadow=cr.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(cr,vn){vn===void 0&&(vn=0);var yn=this.camera,Rn=this.matrix,Bn=this._lightPositionWorld,Co=this._lookTarget,Po=this._projScreenMatrix;Bn.setFromMatrixPosition(cr.matrixWorld),yn.position.copy(Bn),Co.copy(yn.position),Co.add(this._cubeDirections[vn]),yn.up.copy(this._cubeUps[vn]),yn.lookAt(Co),yn.updateMatrixWorld(),Rn.makeTranslation(-Bn.x,-Bn.y,-Bn.z),Po.multiplyMatrices(yn.projectionMatrix,yn.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Po)}});function PointLight(cr,vn,yn,Rn){Light.call(this,cr,vn),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(Bn){this.intensity=Bn/(4*Math.PI)}}),this.distance=yn!==void 0?yn:0,this.decay=Rn!==void 0?Rn:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.distance=cr.distance,this.decay=cr.decay,this.shadow=cr.shadow.clone(),this}});function OrthographicCamera(cr,vn,yn,Rn,Bn,Co){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=cr!==void 0?cr:-1,this.right=vn!==void 0?vn:1,this.top=yn!==void 0?yn:1,this.bottom=Rn!==void 0?Rn:-1,this.near=Bn!==void 0?Bn:.1,this.far=Co!==void 0?Co:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(cr,vn){return Camera.prototype.copy.call(this,cr,vn),this.left=cr.left,this.right=cr.right,this.top=cr.top,this.bottom=cr.bottom,this.near=cr.near,this.far=cr.far,this.zoom=cr.zoom,this.view=cr.view===null?null:Object.assign({},cr.view),this},setViewOffset:function(cr,vn,yn,Rn,Bn,Co){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=cr,this.view.fullHeight=vn,this.view.offsetX=yn,this.view.offsetY=Rn,this.view.width=Bn,this.view.height=Co,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var cr=(this.right-this.left)/(2*this.zoom),vn=(this.top-this.bottom)/(2*this.zoom),yn=(this.right+this.left)/2,Rn=(this.top+this.bottom)/2,Bn=yn-cr,Co=yn+cr,Po=Rn+vn,To=Rn-vn;if(this.view!==null&&this.view.enabled){var Io=(this.right-this.left)/this.view.fullWidth/this.zoom,$l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Bn+=Io*this.view.offsetX,Co=Bn+Io*this.view.width,Po-=$l*this.view.offsetY,To=Po-$l*this.view.height}this.projectionMatrix.makeOrthographic(Bn,Co,Po,To,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(cr){var vn=Object3D.prototype.toJSON.call(this,cr);return vn.object.zoom=this.zoom,vn.object.left=this.left,vn.object.right=this.right,vn.object.top=this.top,vn.object.bottom=this.bottom,vn.object.near=this.near,vn.object.far=this.far,this.view!==null&&(vn.object.view=Object.assign({},this.view)),vn}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(cr){LightShadow.prototype.updateMatrices.call(this,cr)}});function DirectionalLight(cr,vn){Light.call(this,cr,vn),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.target=cr.target.clone(),this.shadow=cr.shadow.clone(),this}});function AmbientLight(cr,vn){Light.call(this,cr,vn),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(cr,vn,yn,Rn){Light.call(this,cr,vn),this.type="RectAreaLight",this.width=yn!==void 0?yn:10,this.height=Rn!==void 0?Rn:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.width=cr.width,this.height=cr.height,this},toJSON:function(cr){var vn=Light.prototype.toJSON.call(this,cr);return vn.object.width=this.width,vn.object.height=this.height,vn}});function SphericalHarmonics3(){this.coefficients=[];for(var cr=0;cr<9;cr++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(cr){for(var vn=0;vn<9;vn++)this.coefficients[vn].copy(cr[vn]);return this},zero:function(){for(var cr=0;cr<9;cr++)this.coefficients[cr].set(0,0,0);return this},getAt:function(cr,vn){var yn=cr.x,Rn=cr.y,Bn=cr.z,Co=this.coefficients;return vn.copy(Co[0]).multiplyScalar(.282095),vn.addScaledVector(Co[1],.488603*Rn),vn.addScaledVector(Co[2],.488603*Bn),vn.addScaledVector(Co[3],.488603*yn),vn.addScaledVector(Co[4],1.092548*(yn*Rn)),vn.addScaledVector(Co[5],1.092548*(Rn*Bn)),vn.addScaledVector(Co[6],.315392*(3*Bn*Bn-1)),vn.addScaledVector(Co[7],1.092548*(yn*Bn)),vn.addScaledVector(Co[8],.546274*(yn*yn-Rn*Rn)),vn},getIrradianceAt:function(cr,vn){var yn=cr.x,Rn=cr.y,Bn=cr.z,Co=this.coefficients;return vn.copy(Co[0]).multiplyScalar(.886227),vn.addScaledVector(Co[1],2*.511664*Rn),vn.addScaledVector(Co[2],2*.511664*Bn),vn.addScaledVector(Co[3],2*.511664*yn),vn.addScaledVector(Co[4],2*.429043*yn*Rn),vn.addScaledVector(Co[5],2*.429043*Rn*Bn),vn.addScaledVector(Co[6],.743125*Bn*Bn-.247708),vn.addScaledVector(Co[7],2*.429043*yn*Bn),vn.addScaledVector(Co[8],.429043*(yn*yn-Rn*Rn)),vn},add:function(cr){for(var vn=0;vn<9;vn++)this.coefficients[vn].add(cr.coefficients[vn]);return this},addScaledSH:function(cr,vn){for(var yn=0;yn<9;yn++)this.coefficients[yn].addScaledVector(cr.coefficients[yn],vn);return this},scale:function(cr){for(var vn=0;vn<9;vn++)this.coefficients[vn].multiplyScalar(cr);return this},lerp:function(cr,vn){for(var yn=0;yn<9;yn++)this.coefficients[yn].lerp(cr.coefficients[yn],vn);return this},equals:function(cr){for(var vn=0;vn<9;vn++)if(!this.coefficients[vn].equals(cr.coefficients[vn]))return!1;return!0},copy:function(cr){return this.set(cr.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(cr,vn){vn===void 0&&(vn=0);for(var yn=this.coefficients,Rn=0;Rn<9;Rn++)yn[Rn].fromArray(cr,vn+Rn*3);return this},toArray:function(cr,vn){cr===void 0&&(cr=[]),vn===void 0&&(vn=0);for(var yn=this.coefficients,Rn=0;Rn<9;Rn++)yn[Rn].toArray(cr,vn+Rn*3);return cr}});Object.assign(SphericalHarmonics3,{getBasisAt:function(cr,vn){var yn=cr.x,Rn=cr.y,Bn=cr.z;vn[0]=.282095,vn[1]=.488603*Rn,vn[2]=.488603*Bn,vn[3]=.488603*yn,vn[4]=1.092548*yn*Rn,vn[5]=1.092548*Rn*Bn,vn[6]=.315392*(3*Bn*Bn-1),vn[7]=1.092548*yn*Bn,vn[8]=.546274*(yn*yn-Rn*Rn)}});function LightProbe(cr,vn){Light.call(this,void 0,vn),this.type="LightProbe",this.sh=cr!==void 0?cr:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(cr){return Light.prototype.copy.call(this,cr),this.sh.copy(cr.sh),this},fromJSON:function(cr){return this.intensity=cr.intensity,this.sh.fromArray(cr.sh),this},toJSON:function(cr){var vn=Light.prototype.toJSON.call(this,cr);return vn.object.sh=this.sh.toArray(),vn}});function MaterialLoader(cr){Loader.call(this,cr),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new FileLoader(Bn.manager);Co.setPath(Bn.path),Co.load(cr,function(Po){try{vn(Bn.parse(JSON.parse(Po)))}catch(To){Rn?Rn(To):console.error(To),Bn.manager.itemError(cr)}},yn,Rn)},parse:function(cr){var vn=this.textures;function yn(Io){return vn[Io]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Io),vn[Io]}var Rn=new Materials[cr.type];if(cr.uuid!==void 0&&(Rn.uuid=cr.uuid),cr.name!==void 0&&(Rn.name=cr.name),cr.color!==void 0&&Rn.color.setHex(cr.color),cr.roughness!==void 0&&(Rn.roughness=cr.roughness),cr.metalness!==void 0&&(Rn.metalness=cr.metalness),cr.sheen!==void 0&&(Rn.sheen=new Color().setHex(cr.sheen)),cr.emissive!==void 0&&Rn.emissive.setHex(cr.emissive),cr.specular!==void 0&&Rn.specular.setHex(cr.specular),cr.shininess!==void 0&&(Rn.shininess=cr.shininess),cr.clearcoat!==void 0&&(Rn.clearcoat=cr.clearcoat),cr.clearcoatRoughness!==void 0&&(Rn.clearcoatRoughness=cr.clearcoatRoughness),cr.fog!==void 0&&(Rn.fog=cr.fog),cr.flatShading!==void 0&&(Rn.flatShading=cr.flatShading),cr.blending!==void 0&&(Rn.blending=cr.blending),cr.combine!==void 0&&(Rn.combine=cr.combine),cr.side!==void 0&&(Rn.side=cr.side),cr.opacity!==void 0&&(Rn.opacity=cr.opacity),cr.transparent!==void 0&&(Rn.transparent=cr.transparent),cr.alphaTest!==void 0&&(Rn.alphaTest=cr.alphaTest),cr.depthTest!==void 0&&(Rn.depthTest=cr.depthTest),cr.depthWrite!==void 0&&(Rn.depthWrite=cr.depthWrite),cr.colorWrite!==void 0&&(Rn.colorWrite=cr.colorWrite),cr.stencilWrite!==void 0&&(Rn.stencilWrite=cr.stencilWrite),cr.stencilWriteMask!==void 0&&(Rn.stencilWriteMask=cr.stencilWriteMask),cr.stencilFunc!==void 0&&(Rn.stencilFunc=cr.stencilFunc),cr.stencilRef!==void 0&&(Rn.stencilRef=cr.stencilRef),cr.stencilFuncMask!==void 0&&(Rn.stencilFuncMask=cr.stencilFuncMask),cr.stencilFail!==void 0&&(Rn.stencilFail=cr.stencilFail),cr.stencilZFail!==void 0&&(Rn.stencilZFail=cr.stencilZFail),cr.stencilZPass!==void 0&&(Rn.stencilZPass=cr.stencilZPass),cr.wireframe!==void 0&&(Rn.wireframe=cr.wireframe),cr.wireframeLinewidth!==void 0&&(Rn.wireframeLinewidth=cr.wireframeLinewidth),cr.wireframeLinecap!==void 0&&(Rn.wireframeLinecap=cr.wireframeLinecap),cr.wireframeLinejoin!==void 0&&(Rn.wireframeLinejoin=cr.wireframeLinejoin),cr.rotation!==void 0&&(Rn.rotation=cr.rotation),cr.linewidth!==1&&(Rn.linewidth=cr.linewidth),cr.dashSize!==void 0&&(Rn.dashSize=cr.dashSize),cr.gapSize!==void 0&&(Rn.gapSize=cr.gapSize),cr.scale!==void 0&&(Rn.scale=cr.scale),cr.polygonOffset!==void 0&&(Rn.polygonOffset=cr.polygonOffset),cr.polygonOffsetFactor!==void 0&&(Rn.polygonOffsetFactor=cr.polygonOffsetFactor),cr.polygonOffsetUnits!==void 0&&(Rn.polygonOffsetUnits=cr.polygonOffsetUnits),cr.skinning!==void 0&&(Rn.skinning=cr.skinning),cr.morphTargets!==void 0&&(Rn.morphTargets=cr.morphTargets),cr.morphNormals!==void 0&&(Rn.morphNormals=cr.morphNormals),cr.dithering!==void 0&&(Rn.dithering=cr.dithering),cr.vertexTangents!==void 0&&(Rn.vertexTangents=cr.vertexTangents),cr.visible!==void 0&&(Rn.visible=cr.visible),cr.toneMapped!==void 0&&(Rn.toneMapped=cr.toneMapped),cr.userData!==void 0&&(Rn.userData=cr.userData),cr.vertexColors!==void 0&&(typeof cr.vertexColors=="number"?Rn.vertexColors=cr.vertexColors>0:Rn.vertexColors=cr.vertexColors),cr.uniforms!==void 0)for(var Bn in cr.uniforms){var Co=cr.uniforms[Bn];switch(Rn.uniforms[Bn]={},Co.type){case"t":Rn.uniforms[Bn].value=yn(Co.value);break;case"c":Rn.uniforms[Bn].value=new Color().setHex(Co.value);break;case"v2":Rn.uniforms[Bn].value=new Vector2().fromArray(Co.value);break;case"v3":Rn.uniforms[Bn].value=new Vector3().fromArray(Co.value);break;case"v4":Rn.uniforms[Bn].value=new Vector4().fromArray(Co.value);break;case"m3":Rn.uniforms[Bn].value=new Matrix3().fromArray(Co.value);case"m4":Rn.uniforms[Bn].value=new Matrix4().fromArray(Co.value);break;default:Rn.uniforms[Bn].value=Co.value}}if(cr.defines!==void 0&&(Rn.defines=cr.defines),cr.vertexShader!==void 0&&(Rn.vertexShader=cr.vertexShader),cr.fragmentShader!==void 0&&(Rn.fragmentShader=cr.fragmentShader),cr.extensions!==void 0)for(var Po in cr.extensions)Rn.extensions[Po]=cr.extensions[Po];if(cr.shading!==void 0&&(Rn.flatShading=cr.shading===1),cr.size!==void 0&&(Rn.size=cr.size),cr.sizeAttenuation!==void 0&&(Rn.sizeAttenuation=cr.sizeAttenuation),cr.map!==void 0&&(Rn.map=yn(cr.map)),cr.matcap!==void 0&&(Rn.matcap=yn(cr.matcap)),cr.alphaMap!==void 0&&(Rn.alphaMap=yn(cr.alphaMap)),cr.bumpMap!==void 0&&(Rn.bumpMap=yn(cr.bumpMap)),cr.bumpScale!==void 0&&(Rn.bumpScale=cr.bumpScale),cr.normalMap!==void 0&&(Rn.normalMap=yn(cr.normalMap)),cr.normalMapType!==void 0&&(Rn.normalMapType=cr.normalMapType),cr.normalScale!==void 0){var To=cr.normalScale;Array.isArray(To)===!1&&(To=[To,To]),Rn.normalScale=new Vector2().fromArray(To)}return cr.displacementMap!==void 0&&(Rn.displacementMap=yn(cr.displacementMap)),cr.displacementScale!==void 0&&(Rn.displacementScale=cr.displacementScale),cr.displacementBias!==void 0&&(Rn.displacementBias=cr.displacementBias),cr.roughnessMap!==void 0&&(Rn.roughnessMap=yn(cr.roughnessMap)),cr.metalnessMap!==void 0&&(Rn.metalnessMap=yn(cr.metalnessMap)),cr.emissiveMap!==void 0&&(Rn.emissiveMap=yn(cr.emissiveMap)),cr.emissiveIntensity!==void 0&&(Rn.emissiveIntensity=cr.emissiveIntensity),cr.specularMap!==void 0&&(Rn.specularMap=yn(cr.specularMap)),cr.envMap!==void 0&&(Rn.envMap=yn(cr.envMap)),cr.envMapIntensity!==void 0&&(Rn.envMapIntensity=cr.envMapIntensity),cr.reflectivity!==void 0&&(Rn.reflectivity=cr.reflectivity),cr.refractionRatio!==void 0&&(Rn.refractionRatio=cr.refractionRatio),cr.lightMap!==void 0&&(Rn.lightMap=yn(cr.lightMap)),cr.lightMapIntensity!==void 0&&(Rn.lightMapIntensity=cr.lightMapIntensity),cr.aoMap!==void 0&&(Rn.aoMap=yn(cr.aoMap)),cr.aoMapIntensity!==void 0&&(Rn.aoMapIntensity=cr.aoMapIntensity),cr.gradientMap!==void 0&&(Rn.gradientMap=yn(cr.gradientMap)),cr.clearcoatMap!==void 0&&(Rn.clearcoatMap=yn(cr.clearcoatMap)),cr.clearcoatRoughnessMap!==void 0&&(Rn.clearcoatRoughnessMap=yn(cr.clearcoatRoughnessMap)),cr.clearcoatNormalMap!==void 0&&(Rn.clearcoatNormalMap=yn(cr.clearcoatNormalMap)),cr.clearcoatNormalScale!==void 0&&(Rn.clearcoatNormalScale=new Vector2().fromArray(cr.clearcoatNormalScale)),Rn},setTextures:function(cr){return this.textures=cr,this}});var LoaderUtils={decodeText:function(cr){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(cr);for(var vn="",yn=0,Rn=cr.length;yn<Rn;yn++)vn+=String.fromCharCode(cr[yn]);try{return decodeURIComponent(escape(vn))}catch{return vn}},extractUrlBase:function(cr){var vn=cr.lastIndexOf("/");return vn===-1?"./":cr.substr(0,vn+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(cr){return BufferGeometry.prototype.copy.call(this,cr),this.instanceCount=cr.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var cr=BufferGeometry.prototype.toJSON.call(this);return cr.instanceCount=this.instanceCount,cr.isInstancedBufferGeometry=!0,cr}});function InstancedBufferAttribute(cr,vn,yn,Rn){typeof yn=="number"&&(Rn=yn,yn=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,cr,vn,yn),this.meshPerAttribute=Rn||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(cr){return BufferAttribute.prototype.copy.call(this,cr),this.meshPerAttribute=cr.meshPerAttribute,this},toJSON:function(){var cr=BufferAttribute.prototype.toJSON.call(this);return cr.meshPerAttribute=this.meshPerAttribute,cr.isInstancedBufferAttribute=!0,cr}});function BufferGeometryLoader(cr){Loader.call(this,cr)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new FileLoader(Bn.manager);Co.setPath(Bn.path),Co.load(cr,function(Po){try{vn(Bn.parse(JSON.parse(Po)))}catch(To){Rn?Rn(To):console.error(To),Bn.manager.itemError(cr)}},yn,Rn)},parse:function(cr){var vn=cr.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,yn=cr.data.index;if(yn!==void 0){var Rn=new TYPED_ARRAYS[yn.type](yn.array);vn.setIndex(new BufferAttribute(Rn,1))}var Bn=cr.data.attributes;for(var Co in Bn){var Po=Bn[Co],Rn=new TYPED_ARRAYS[Po.type](Po.array),To=Po.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Io=new To(Rn,Po.itemSize,Po.normalized);Po.name!==void 0&&(Io.name=Po.name),vn.setAttribute(Co,Io)}var $l=cr.data.morphAttributes;if($l)for(var Co in $l){for(var Wl=$l[Co],Xl=[],Yl=0,Zl=Wl.length;Yl<Zl;Yl++){var Po=Wl[Yl],Rn=new TYPED_ARRAYS[Po.type](Po.array),Io=new BufferAttribute(Rn,Po.itemSize,Po.normalized);Po.name!==void 0&&(Io.name=Po.name),Xl.push(Io)}vn.morphAttributes[Co]=Xl}var ey=cr.data.morphTargetsRelative;ey&&(vn.morphTargetsRelative=!0);var Rm=cr.data.groups||cr.data.drawcalls||cr.data.offsets;if(Rm!==void 0)for(var Yl=0,ry=Rm.length;Yl!==ry;++Yl){var _g=Rm[Yl];vn.addGroup(_g.start,_g.count,_g.materialIndex)}var ty=cr.data.boundingSphere;if(ty!==void 0){var ny=new Vector3;ty.center!==void 0&&ny.fromArray(ty.center),vn.boundingSphere=new Sphere(ny,ty.radius)}return cr.name&&(vn.name=cr.name),cr.userData&&(vn.userData=cr.userData),vn}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(cr){Loader.call(this,cr)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=this.path===""?LoaderUtils.extractUrlBase(cr):this.path;this.resourcePath=this.resourcePath||Co;var Po=new FileLoader(Bn.manager);Po.setPath(this.path),Po.load(cr,function(To){var Io=null;try{Io=JSON.parse(To)}catch(Wl){Rn!==void 0&&Rn(Wl),console.error("THREE:ObjectLoader: Can't parse "+cr+".",Wl.message);return}var $l=Io.metadata;if($l===void 0||$l.type===void 0||$l.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+cr);return}Bn.parse(Io,vn)},yn,Rn)},parse:function(cr,vn){var yn=this.parseShape(cr.shapes),Rn=this.parseGeometries(cr.geometries,yn),Bn=this.parseImages(cr.images,function(){vn!==void 0&&vn(To)}),Co=this.parseTextures(cr.textures,Bn),Po=this.parseMaterials(cr.materials,Co),To=this.parseObject(cr.object,Rn,Po);return cr.animations&&(To.animations=this.parseAnimations(cr.animations)),(cr.images===void 0||cr.images.length===0)&&vn!==void 0&&vn(To),To},parseShape:function(cr){var vn={};if(cr!==void 0)for(var yn=0,Rn=cr.length;yn<Rn;yn++){var Bn=new Shape().fromJSON(cr[yn]);vn[Bn.uuid]=Bn}return vn},parseGeometries:function(cr,vn){var yn={};if(cr!==void 0)for(var Rn=new BufferGeometryLoader,Bn=0,Co=cr.length;Bn<Co;Bn++){var Po,To=cr[Bn];switch(To.type){case"PlaneGeometry":case"PlaneBufferGeometry":Po=new Geometries[To.type](To.width,To.height,To.widthSegments,To.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Po=new Geometries[To.type](To.width,To.height,To.depth,To.widthSegments,To.heightSegments,To.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Po=new Geometries[To.type](To.radius,To.segments,To.thetaStart,To.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Po=new Geometries[To.type](To.radiusTop,To.radiusBottom,To.height,To.radialSegments,To.heightSegments,To.openEnded,To.thetaStart,To.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Po=new Geometries[To.type](To.radius,To.height,To.radialSegments,To.heightSegments,To.openEnded,To.thetaStart,To.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Po=new Geometries[To.type](To.radius,To.widthSegments,To.heightSegments,To.phiStart,To.phiLength,To.thetaStart,To.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Po=new Geometries[To.type](To.radius,To.detail);break;case"RingGeometry":case"RingBufferGeometry":Po=new Geometries[To.type](To.innerRadius,To.outerRadius,To.thetaSegments,To.phiSegments,To.thetaStart,To.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Po=new Geometries[To.type](To.radius,To.tube,To.radialSegments,To.tubularSegments,To.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Po=new Geometries[To.type](To.radius,To.tube,To.tubularSegments,To.radialSegments,To.p,To.q);break;case"TubeGeometry":case"TubeBufferGeometry":Po=new Geometries[To.type](new Curves[To.path.type]().fromJSON(To.path),To.tubularSegments,To.radius,To.radialSegments,To.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Po=new Geometries[To.type](To.points,To.segments,To.phiStart,To.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Po=new Geometries[To.type](To.vertices,To.indices,To.radius,To.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Xl=[],Io=0,$l=To.shapes.length;Io<$l;Io++){var Wl=vn[To.shapes[Io]];Xl.push(Wl)}Po=new Geometries[To.type](Xl,To.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Xl=[],Io=0,$l=To.shapes.length;Io<$l;Io++){var Wl=vn[To.shapes[Io]];Xl.push(Wl)}var Yl=To.options.extrudePath;Yl!==void 0&&(To.options.extrudePath=new Curves[Yl.type]().fromJSON(Yl)),Po=new Geometries[To.type](Xl,To.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Po=Rn.parse(To);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+To.type+'"');continue}Po.uuid=To.uuid,To.name!==void 0&&(Po.name=To.name),Po.isBufferGeometry===!0&&To.userData!==void 0&&(Po.userData=To.userData),yn[To.uuid]=Po}return yn},parseMaterials:function(cr,vn){var yn={},Rn={};if(cr!==void 0){var Bn=new MaterialLoader;Bn.setTextures(vn);for(var Co=0,Po=cr.length;Co<Po;Co++){var To=cr[Co];if(To.type==="MultiMaterial"){for(var Io=[],$l=0;$l<To.materials.length;$l++){var Wl=To.materials[$l];yn[Wl.uuid]===void 0&&(yn[Wl.uuid]=Bn.parse(Wl)),Io.push(yn[Wl.uuid])}Rn[To.uuid]=Io}else yn[To.uuid]===void 0&&(yn[To.uuid]=Bn.parse(To)),Rn[To.uuid]=yn[To.uuid]}}return Rn},parseAnimations:function(cr){for(var vn=[],yn=0;yn<cr.length;yn++){var Rn=cr[yn],Bn=AnimationClip.parse(Rn);Rn.uuid!==void 0&&(Bn.uuid=Rn.uuid),vn.push(Bn)}return vn},parseImages:function(cr,vn){var yn=this,Rn={};function Bn(Rm){return yn.manager.itemStart(Rm),Po.load(Rm,function(){yn.manager.itemEnd(Rm)},void 0,function(){yn.manager.itemError(Rm),yn.manager.itemEnd(Rm)})}if(cr!==void 0&&cr.length>0){var Co=new LoadingManager(vn),Po=new ImageLoader(Co);Po.setCrossOrigin(this.crossOrigin);for(var To=0,Io=cr.length;To<Io;To++){var $l=cr[To],Wl=$l.url;if(Array.isArray(Wl)){Rn[$l.uuid]=[];for(var Xl=0,Yl=Wl.length;Xl<Yl;Xl++){var Zl=Wl[Xl],ey=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Zl)?Zl:yn.resourcePath+Zl;Rn[$l.uuid].push(Bn(ey))}}else{var ey=/^(\/\/)|([a-z]+:(\/\/)?)/i.test($l.url)?$l.url:yn.resourcePath+$l.url;Rn[$l.uuid]=Bn(ey)}}}return Rn},parseTextures:function(cr,vn){function yn(Io,$l){return typeof Io=="number"?Io:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Io),$l[Io])}var Rn={};if(cr!==void 0)for(var Bn=0,Co=cr.length;Bn<Co;Bn++){var Po=cr[Bn];Po.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Po.uuid),vn[Po.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Po.image);var To;Array.isArray(vn[Po.image])?To=new CubeTexture(vn[Po.image]):To=new Texture(vn[Po.image]),To.needsUpdate=!0,To.uuid=Po.uuid,Po.name!==void 0&&(To.name=Po.name),Po.mapping!==void 0&&(To.mapping=yn(Po.mapping,TEXTURE_MAPPING)),Po.offset!==void 0&&To.offset.fromArray(Po.offset),Po.repeat!==void 0&&To.repeat.fromArray(Po.repeat),Po.center!==void 0&&To.center.fromArray(Po.center),Po.rotation!==void 0&&(To.rotation=Po.rotation),Po.wrap!==void 0&&(To.wrapS=yn(Po.wrap[0],TEXTURE_WRAPPING),To.wrapT=yn(Po.wrap[1],TEXTURE_WRAPPING)),Po.format!==void 0&&(To.format=Po.format),Po.type!==void 0&&(To.type=Po.type),Po.encoding!==void 0&&(To.encoding=Po.encoding),Po.minFilter!==void 0&&(To.minFilter=yn(Po.minFilter,TEXTURE_FILTER)),Po.magFilter!==void 0&&(To.magFilter=yn(Po.magFilter,TEXTURE_FILTER)),Po.anisotropy!==void 0&&(To.anisotropy=Po.anisotropy),Po.flipY!==void 0&&(To.flipY=Po.flipY),Po.premultiplyAlpha!==void 0&&(To.premultiplyAlpha=Po.premultiplyAlpha),Po.unpackAlignment!==void 0&&(To.unpackAlignment=Po.unpackAlignment),Rn[Po.uuid]=To}return Rn},parseObject:function(cr,vn,yn){var Rn;function Bn(ry){return vn[ry]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ry),vn[ry]}function Co(ry){if(ry!==void 0){if(Array.isArray(ry)){for(var _g=[],ty=0,ny=ry.length;ty<ny;ty++){var iy=ry[ty];yn[iy]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",iy),_g.push(yn[iy])}return _g}return yn[ry]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ry),yn[ry]}}switch(cr.type){case"Scene":Rn=new Scene,cr.background!==void 0&&Number.isInteger(cr.background)&&(Rn.background=new Color(cr.background)),cr.fog!==void 0&&(cr.fog.type==="Fog"?Rn.fog=new Fog(cr.fog.color,cr.fog.near,cr.fog.far):cr.fog.type==="FogExp2"&&(Rn.fog=new FogExp2(cr.fog.color,cr.fog.density)));break;case"PerspectiveCamera":Rn=new PerspectiveCamera(cr.fov,cr.aspect,cr.near,cr.far),cr.focus!==void 0&&(Rn.focus=cr.focus),cr.zoom!==void 0&&(Rn.zoom=cr.zoom),cr.filmGauge!==void 0&&(Rn.filmGauge=cr.filmGauge),cr.filmOffset!==void 0&&(Rn.filmOffset=cr.filmOffset),cr.view!==void 0&&(Rn.view=Object.assign({},cr.view));break;case"OrthographicCamera":Rn=new OrthographicCamera(cr.left,cr.right,cr.top,cr.bottom,cr.near,cr.far),cr.zoom!==void 0&&(Rn.zoom=cr.zoom),cr.view!==void 0&&(Rn.view=Object.assign({},cr.view));break;case"AmbientLight":Rn=new AmbientLight(cr.color,cr.intensity);break;case"DirectionalLight":Rn=new DirectionalLight(cr.color,cr.intensity);break;case"PointLight":Rn=new PointLight(cr.color,cr.intensity,cr.distance,cr.decay);break;case"RectAreaLight":Rn=new RectAreaLight(cr.color,cr.intensity,cr.width,cr.height);break;case"SpotLight":Rn=new SpotLight(cr.color,cr.intensity,cr.distance,cr.angle,cr.penumbra,cr.decay);break;case"HemisphereLight":Rn=new HemisphereLight(cr.color,cr.groundColor,cr.intensity);break;case"LightProbe":Rn=new LightProbe().fromJSON(cr);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Po=Bn(cr.geometry),To=Co(cr.material);Rn=new Mesh(Po,To);break;case"InstancedMesh":var Po=Bn(cr.geometry),To=Co(cr.material),Io=cr.count,$l=cr.instanceMatrix;Rn=new InstancedMesh(Po,To,Io),Rn.instanceMatrix=new BufferAttribute(new Float32Array($l.array),16);break;case"LOD":Rn=new LOD;break;case"Line":Rn=new Line(Bn(cr.geometry),Co(cr.material),cr.mode);break;case"LineLoop":Rn=new LineLoop(Bn(cr.geometry),Co(cr.material));break;case"LineSegments":Rn=new LineSegments(Bn(cr.geometry),Co(cr.material));break;case"PointCloud":case"Points":Rn=new Points(Bn(cr.geometry),Co(cr.material));break;case"Sprite":Rn=new Sprite(Co(cr.material));break;case"Group":Rn=new Group$1;break;default:Rn=new Object3D}if(Rn.uuid=cr.uuid,cr.name!==void 0&&(Rn.name=cr.name),cr.matrix!==void 0?(Rn.matrix.fromArray(cr.matrix),cr.matrixAutoUpdate!==void 0&&(Rn.matrixAutoUpdate=cr.matrixAutoUpdate),Rn.matrixAutoUpdate&&Rn.matrix.decompose(Rn.position,Rn.quaternion,Rn.scale)):(cr.position!==void 0&&Rn.position.fromArray(cr.position),cr.rotation!==void 0&&Rn.rotation.fromArray(cr.rotation),cr.quaternion!==void 0&&Rn.quaternion.fromArray(cr.quaternion),cr.scale!==void 0&&Rn.scale.fromArray(cr.scale)),cr.castShadow!==void 0&&(Rn.castShadow=cr.castShadow),cr.receiveShadow!==void 0&&(Rn.receiveShadow=cr.receiveShadow),cr.shadow&&(cr.shadow.bias!==void 0&&(Rn.shadow.bias=cr.shadow.bias),cr.shadow.radius!==void 0&&(Rn.shadow.radius=cr.shadow.radius),cr.shadow.mapSize!==void 0&&Rn.shadow.mapSize.fromArray(cr.shadow.mapSize),cr.shadow.camera!==void 0&&(Rn.shadow.camera=this.parseObject(cr.shadow.camera))),cr.visible!==void 0&&(Rn.visible=cr.visible),cr.frustumCulled!==void 0&&(Rn.frustumCulled=cr.frustumCulled),cr.renderOrder!==void 0&&(Rn.renderOrder=cr.renderOrder),cr.userData!==void 0&&(Rn.userData=cr.userData),cr.layers!==void 0&&(Rn.layers.mask=cr.layers),cr.children!==void 0)for(var Wl=cr.children,Xl=0;Xl<Wl.length;Xl++)Rn.add(this.parseObject(Wl[Xl],vn,yn));if(cr.type==="LOD"){cr.autoUpdate!==void 0&&(Rn.autoUpdate=cr.autoUpdate);for(var Yl=cr.levels,Zl=0;Zl<Yl.length;Zl++){var ey=Yl[Zl],Rm=Rn.getObjectByProperty("uuid",ey.object);Rm!==void 0&&Rn.addLevel(Rm,ey.distance)}}return Rn}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(cr){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,cr),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(vn){return this.options=vn,this},load:function(cr,vn,yn,Rn){cr===void 0&&(cr=""),this.path!==void 0&&(cr=this.path+cr),cr=this.manager.resolveURL(cr);var Bn=this,Co=Cache.get(cr);if(Co!==void 0)return Bn.manager.itemStart(cr),setTimeout(function(){vn&&vn(Co),Bn.manager.itemEnd(cr)},0),Co;fetch(cr).then(function(Po){return Po.blob()}).then(function(Po){return Bn.options===void 0?createImageBitmap(Po):createImageBitmap(Po,Bn.options)}).then(function(Po){Cache.add(cr,Po),vn&&vn(Po),Bn.manager.itemEnd(cr)}).catch(function(Po){Rn&&Rn(Po),Bn.manager.itemError(cr),Bn.manager.itemEnd(cr)}),Bn.manager.itemStart(cr)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(cr,vn){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(cr,vn),this},lineTo:function(cr,vn){return this.currentPath.lineTo(cr,vn),this},quadraticCurveTo:function(cr,vn,yn,Rn){return this.currentPath.quadraticCurveTo(cr,vn,yn,Rn),this},bezierCurveTo:function(cr,vn,yn,Rn,Bn,Co){return this.currentPath.bezierCurveTo(cr,vn,yn,Rn,Bn,Co),this},splineThru:function(cr){return this.currentPath.splineThru(cr),this},toShapes:function(cr,vn){function yn(dy){for(var Ay=[],gy=0,wy=dy.length;gy<wy;gy++){var Cy=dy[gy],My=new Shape;My.curves=Cy.curves,Ay.push(My)}return Ay}function Rn(dy,Ay){for(var gy=Ay.length,wy=!1,Cy=gy-1,My=0;My<gy;Cy=My++){var Py=Ay[Cy],Dy=Ay[My],qy=Dy.x-Py.x,Xy=Dy.y-Py.y;if(Math.abs(Xy)>Number.EPSILON){if(Xy<0&&(Py=Ay[My],qy=-qy,Dy=Ay[Cy],Xy=-Xy),dy.y<Py.y||dy.y>Dy.y)continue;if(dy.y===Py.y){if(dy.x===Py.x)return!0}else{var $y=Xy*(dy.x-Py.x)-qy*(dy.y-Py.y);if($y===0)return!0;if($y<0)continue;wy=!wy}}else{if(dy.y!==Py.y)continue;if(Dy.x<=dy.x&&dy.x<=Py.x||Py.x<=dy.x&&dy.x<=Dy.x)return!0}}return wy}var Bn=ShapeUtils.isClockWise,Co=this.subPaths;if(Co.length===0)return[];if(vn===!0)return yn(Co);var Po,To,Io,$l=[];if(Co.length===1)return To=Co[0],Io=new Shape,Io.curves=To.curves,$l.push(Io),$l;var Wl=!Bn(Co[0].getPoints());Wl=cr?!Wl:Wl;var Xl=[],Yl=[],Zl=[],ey=0,Rm;Yl[ey]=void 0,Zl[ey]=[];for(var ry=0,_g=Co.length;ry<_g;ry++)To=Co[ry],Rm=To.getPoints(),Po=Bn(Rm),Po=cr?!Po:Po,Po?(!Wl&&Yl[ey]&&ey++,Yl[ey]={s:new Shape,p:Rm},Yl[ey].s.curves=To.curves,Wl&&ey++,Zl[ey]=[]):Zl[ey].push({h:To,p:Rm[0]});if(!Yl[0])return yn(Co);if(Yl.length>1){for(var ty=!1,ny=[],iy=0,oy=Yl.length;iy<oy;iy++)Xl[iy]=[];for(var iy=0,oy=Yl.length;iy<oy;iy++)for(var ay=Zl[iy],uy=0;uy<ay.length;uy++){for(var hy=ay[uy],my=!0,ly=0;ly<Yl.length;ly++)Rn(hy.p,Yl[ly].p)&&(iy!==ly&&ny.push({froms:iy,tos:ly,hole:uy}),my?(my=!1,Xl[ly].push(hy)):ty=!0);my&&Xl[iy].push(hy)}ny.length>0&&(ty||(Zl=Xl))}for(var sy,ry=0,cy=Yl.length;ry<cy;ry++){Io=Yl[ry].s,$l.push(Io),sy=Zl[ry];for(var fy=0,vy=sy.length;fy<vy;fy++)Io.holes.push(sy[fy].h)}return $l}});function Font(cr){this.type="Font",this.data=cr}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(cr,vn){vn===void 0&&(vn=100);for(var yn=[],Rn=createPaths(cr,vn,this.data),Bn=0,Co=Rn.length;Bn<Co;Bn++)Array.prototype.push.apply(yn,Rn[Bn].toShapes());return yn}});function createPaths(cr,vn,yn){for(var Rn=Array.from?Array.from(cr):String(cr).split(""),Bn=vn/yn.resolution,Co=(yn.boundingBox.yMax-yn.boundingBox.yMin+yn.underlineThickness)*Bn,Po=[],To=0,Io=0,$l=0;$l<Rn.length;$l++){var Wl=Rn[$l];if(Wl===`
`)To=0,Io-=Co;else{var Xl=createPath(Wl,Bn,To,Io,yn);To+=Xl.offsetX,Po.push(Xl.path)}}return Po}function createPath(cr,vn,yn,Rn,Bn){var Co=Bn.glyphs[cr]||Bn.glyphs["?"];if(!Co){console.error('THREE.Font: character "'+cr+'" does not exists in font family '+Bn.familyName+".");return}var Po=new ShapePath,To,Io,$l,Wl,Xl,Yl,Zl,ey;if(Co.o)for(var Rm=Co._cachedOutline||(Co._cachedOutline=Co.o.split(" ")),ry=0,_g=Rm.length;ry<_g;){var ty=Rm[ry++];switch(ty){case"m":To=Rm[ry++]*vn+yn,Io=Rm[ry++]*vn+Rn,Po.moveTo(To,Io);break;case"l":To=Rm[ry++]*vn+yn,Io=Rm[ry++]*vn+Rn,Po.lineTo(To,Io);break;case"q":$l=Rm[ry++]*vn+yn,Wl=Rm[ry++]*vn+Rn,Xl=Rm[ry++]*vn+yn,Yl=Rm[ry++]*vn+Rn,Po.quadraticCurveTo(Xl,Yl,$l,Wl);break;case"b":$l=Rm[ry++]*vn+yn,Wl=Rm[ry++]*vn+Rn,Xl=Rm[ry++]*vn+yn,Yl=Rm[ry++]*vn+Rn,Zl=Rm[ry++]*vn+yn,ey=Rm[ry++]*vn+Rn,Po.bezierCurveTo(Xl,Yl,Zl,ey,$l,Wl);break}}return{offsetX:Co.ha*vn,path:Po}}function FontLoader(cr){Loader.call(this,cr)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new FileLoader(this.manager);Co.setPath(this.path),Co.load(cr,function(Po){var To;try{To=JSON.parse(Po)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),To=JSON.parse(Po.substring(65,Po.length-2))}var Io=Bn.parse(To);vn&&vn(Io)},yn,Rn)},parse:function(cr){return new Font(cr)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(cr){_context=cr}};function AudioLoader(cr){Loader.call(this,cr)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(cr,vn,yn,Rn){var Bn=this,Co=new FileLoader(Bn.manager);Co.setResponseType("arraybuffer"),Co.setPath(Bn.path),Co.load(cr,function(Po){try{var To=Po.slice(0),Io=AudioContext.getContext();Io.decodeAudioData(To,function($l){vn($l)})}catch($l){Rn?Rn($l):console.error($l),Bn.manager.itemError(cr)}},yn,Rn)}});function HemisphereLightProbe(cr,vn,yn){LightProbe.call(this,void 0,yn);var Rn=new Color().set(cr),Bn=new Color().set(vn),Co=new Vector3(Rn.r,Rn.g,Rn.b),Po=new Vector3(Bn.r,Bn.g,Bn.b),To=Math.sqrt(Math.PI),Io=To*Math.sqrt(.75);this.sh.coefficients[0].copy(Co).add(Po).multiplyScalar(To),this.sh.coefficients[1].copy(Co).sub(Po).multiplyScalar(Io)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(cr){return LightProbe.prototype.copy.call(this,cr),this},toJSON:function(cr){var vn=LightProbe.prototype.toJSON.call(this,cr);return vn}});function AmbientLightProbe(cr,vn){LightProbe.call(this,void 0,vn);var yn=new Color().set(cr);this.sh.coefficients[0].set(yn.r,yn.g,yn.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(cr){return LightProbe.prototype.copy.call(this,cr),this},toJSON:function(cr){var vn=LightProbe.prototype.toJSON.call(this,cr);return vn}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(cr){var vn=this._cache,yn=vn.focus!==cr.focus||vn.fov!==cr.fov||vn.aspect!==cr.aspect*this.aspect||vn.near!==cr.near||vn.far!==cr.far||vn.zoom!==cr.zoom||vn.eyeSep!==this.eyeSep;if(yn){vn.focus=cr.focus,vn.fov=cr.fov,vn.aspect=cr.aspect*this.aspect,vn.near=cr.near,vn.far=cr.far,vn.zoom=cr.zoom,vn.eyeSep=this.eyeSep;var Rn=cr.projectionMatrix.clone(),Bn=vn.eyeSep/2,Co=Bn*vn.near/vn.focus,Po=vn.near*Math.tan(MathUtils.DEG2RAD*vn.fov*.5)/vn.zoom,To,Io;_eyeLeft.elements[12]=-Bn,_eyeRight.elements[12]=Bn,To=-Po*vn.aspect+Co,Io=Po*vn.aspect+Co,Rn.elements[0]=2*vn.near/(Io-To),Rn.elements[8]=(Io+To)/(Io-To),this.cameraL.projectionMatrix.copy(Rn),To=-Po*vn.aspect-Co,Io=Po*vn.aspect-Co,Rn.elements[0]=2*vn.near/(Io-To),Rn.elements[8]=(Io+To)/(Io-To),this.cameraR.projectionMatrix.copy(Rn)}this.cameraL.matrixWorld.copy(cr.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(cr.matrixWorld).multiply(_eyeRight)}});function Clock(cr){this.autoStart=cr!==void 0?cr:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var cr=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var vn=(typeof performance=="undefined"?Date:performance).now();cr=(vn-this.oldTime)/1e3,this.oldTime=vn,this.elapsedTime+=cr}return cr}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(cr){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=cr,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(cr){return this.gain.gain.setTargetAtTime(cr,this.context.currentTime,.01),this},updateMatrixWorld:function(cr){Object3D.prototype.updateMatrixWorld.call(this,cr);var vn=this.context.listener,yn=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),vn.positionX){var Rn=this.context.currentTime+this.timeDelta;vn.positionX.linearRampToValueAtTime(_position$2.x,Rn),vn.positionY.linearRampToValueAtTime(_position$2.y,Rn),vn.positionZ.linearRampToValueAtTime(_position$2.z,Rn),vn.forwardX.linearRampToValueAtTime(_orientation.x,Rn),vn.forwardY.linearRampToValueAtTime(_orientation.y,Rn),vn.forwardZ.linearRampToValueAtTime(_orientation.z,Rn),vn.upX.linearRampToValueAtTime(yn.x,Rn),vn.upY.linearRampToValueAtTime(yn.y,Rn),vn.upZ.linearRampToValueAtTime(yn.z,Rn)}else vn.setPosition(_position$2.x,_position$2.y,_position$2.z),vn.setOrientation(_orientation.x,_orientation.y,_orientation.z,yn.x,yn.y,yn.z)}});function Audio$1(cr){Object3D.call(this),this.type="Audio",this.listener=cr,this.context=cr.context,this.gain=this.context.createGain(),this.gain.connect(cr.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio$1,getOutput:function(){return this.gain},setNodeSource:function(cr){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=cr,this.connect(),this},setMediaElementSource:function(cr){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(cr),this.connect(),this},setMediaStreamSource:function(cr){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(cr),this.connect(),this},setBuffer:function(cr){return this.buffer=cr,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(cr){if(cr===void 0&&(cr=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+cr;var vn=this.context.createBufferSource();return vn.buffer=this.buffer,vn.loop=this.loop,vn.loopStart=this.loopStart,vn.loopEnd=this.loopEnd,vn.onended=this.onEnded.bind(this),vn.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=vn,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var cr=1,vn=this.filters.length;cr<vn;cr++)this.filters[cr-1].connect(this.filters[cr]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var cr=1,vn=this.filters.length;cr<vn;cr++)this.filters[cr-1].disconnect(this.filters[cr]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(cr){return cr||(cr=[]),this.isPlaying===!0?(this.disconnect(),this.filters=cr,this.connect()):this.filters=cr,this},setDetune:function(cr){if(this.detune=cr,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(cr){return this.setFilters(cr?[cr]:[])},setPlaybackRate:function(cr){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=cr,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(cr){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=cr,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(cr){return this.loopStart=cr,this},setLoopEnd:function(cr){return this.loopEnd=cr,this},getVolume:function(){return this.gain.gain.value},setVolume:function(cr){return this.gain.gain.setTargetAtTime(cr,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(cr){Audio$1.call(this,cr),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio$1.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(cr){return this.panner.refDistance=cr,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(cr){return this.panner.rolloffFactor=cr,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(cr){return this.panner.distanceModel=cr,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(cr){return this.panner.maxDistance=cr,this},setDirectionalCone:function(cr,vn,yn){return this.panner.coneInnerAngle=cr,this.panner.coneOuterAngle=vn,this.panner.coneOuterGain=yn,this},updateMatrixWorld:function(cr){if(Object3D.prototype.updateMatrixWorld.call(this,cr),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var vn=this.panner;if(vn.positionX){var yn=this.context.currentTime+this.listener.timeDelta;vn.positionX.linearRampToValueAtTime(_position$3.x,yn),vn.positionY.linearRampToValueAtTime(_position$3.y,yn),vn.positionZ.linearRampToValueAtTime(_position$3.z,yn),vn.orientationX.linearRampToValueAtTime(_orientation$1.x,yn),vn.orientationY.linearRampToValueAtTime(_orientation$1.y,yn),vn.orientationZ.linearRampToValueAtTime(_orientation$1.z,yn)}else vn.setPosition(_position$3.x,_position$3.y,_position$3.z),vn.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(cr,vn){this.analyser=cr.context.createAnalyser(),this.analyser.fftSize=vn!==void 0?vn:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),cr.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var cr=0,vn=this.getFrequencyData(),yn=0;yn<vn.length;yn++)cr+=vn[yn];return cr/vn.length}});function PropertyMixer(cr,vn,yn){this.binding=cr,this.valueSize=yn;var Rn,Bn,Co;switch(vn){case"quaternion":Rn=this._slerp,Bn=this._slerpAdditive,Co=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(yn*6),this._workIndex=5;break;case"string":case"bool":Rn=this._select,Bn=this._select,Co=this._setAdditiveIdentityOther,this.buffer=new Array(yn*5);break;default:Rn=this._lerp,Bn=this._lerpAdditive,Co=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(yn*5)}this._mixBufferRegion=Rn,this._mixBufferRegionAdditive=Bn,this._setIdentity=Co,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(cr,vn){var yn=this.buffer,Rn=this.valueSize,Bn=cr*Rn+Rn,Co=this.cumulativeWeight;if(Co===0){for(var Po=0;Po!==Rn;++Po)yn[Bn+Po]=yn[Po];Co=vn}else{Co+=vn;var To=vn/Co;this._mixBufferRegion(yn,Bn,0,To,Rn)}this.cumulativeWeight=Co},accumulateAdditive:function(cr){var vn=this.buffer,yn=this.valueSize,Rn=yn*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(vn,Rn,0,cr,yn),this.cumulativeWeightAdditive+=cr},apply:function(cr){var vn=this.valueSize,yn=this.buffer,Rn=cr*vn+vn,Bn=this.cumulativeWeight,Co=this.cumulativeWeightAdditive,Po=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Bn<1){var To=vn*this._origIndex;this._mixBufferRegion(yn,Rn,To,1-Bn,vn)}Co>0&&this._mixBufferRegionAdditive(yn,Rn,this._addIndex*vn,1,vn);for(var Io=vn,$l=vn+vn;Io!==$l;++Io)if(yn[Io]!==yn[Io+vn]){Po.setValue(yn,Rn);break}},saveOriginalState:function(){var cr=this.binding,vn=this.buffer,yn=this.valueSize,Rn=yn*this._origIndex;cr.getValue(vn,Rn);for(var Bn=yn,Co=Rn;Bn!==Co;++Bn)vn[Bn]=vn[Rn+Bn%yn];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var cr=this.valueSize*3;this.binding.setValue(this.buffer,cr)},_setAdditiveIdentityNumeric:function(){for(var cr=this._addIndex*this.valueSize,vn=cr+this.valueSize,yn=cr;yn<vn;yn++)this.buffer[yn]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var cr=this._origIndex*this.valueSize,vn=this._addIndex*this.valueSize,yn=0;yn<this.valueSize;yn++)this.buffer[vn+yn]=this.buffer[cr+yn]},_select:function(cr,vn,yn,Rn,Bn){if(Rn>=.5)for(var Co=0;Co!==Bn;++Co)cr[vn+Co]=cr[yn+Co]},_slerp:function(cr,vn,yn,Rn){Quaternion.slerpFlat(cr,vn,cr,vn,cr,yn,Rn)},_slerpAdditive:function(cr,vn,yn,Rn,Bn){var Co=this._workIndex*Bn;Quaternion.multiplyQuaternionsFlat(cr,Co,cr,vn,cr,yn),Quaternion.slerpFlat(cr,vn,cr,vn,cr,Co,Rn)},_lerp:function(cr,vn,yn,Rn,Bn){for(var Co=1-Rn,Po=0;Po!==Bn;++Po){var To=vn+Po;cr[To]=cr[To]*Co+cr[yn+Po]*Rn}},_lerpAdditive:function(cr,vn,yn,Rn,Bn){for(var Co=0;Co!==Bn;++Co){var Po=vn+Co;cr[Po]=cr[Po]+cr[yn+Co]*Rn}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(cr,vn,yn){var Rn=yn||PropertyBinding.parseTrackName(vn);this._targetGroup=cr,this._bindings=cr.subscribe_(vn,Rn)}Object.assign(Composite.prototype,{getValue:function(cr,vn){this.bind();var yn=this._targetGroup.nCachedObjects_,Rn=this._bindings[yn];Rn!==void 0&&Rn.getValue(cr,vn)},setValue:function(cr,vn){for(var yn=this._bindings,Rn=this._targetGroup.nCachedObjects_,Bn=yn.length;Rn!==Bn;++Rn)yn[Rn].setValue(cr,vn)},bind:function(){for(var cr=this._bindings,vn=this._targetGroup.nCachedObjects_,yn=cr.length;vn!==yn;++vn)cr[vn].bind()},unbind:function(){for(var cr=this._bindings,vn=this._targetGroup.nCachedObjects_,yn=cr.length;vn!==yn;++vn)cr[vn].unbind()}});function PropertyBinding(cr,vn,yn){this.path=vn,this.parsedPath=yn||PropertyBinding.parseTrackName(vn),this.node=PropertyBinding.findNode(cr,this.parsedPath.nodeName)||cr,this.rootNode=cr}Object.assign(PropertyBinding,{Composite,create:function(cr,vn,yn){return cr&&cr.isAnimationObjectGroup?new PropertyBinding.Composite(cr,vn,yn):new PropertyBinding(cr,vn,yn)},sanitizeNodeName:function(cr){return cr.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(cr){var vn=_trackRe.exec(cr);if(!vn)throw new Error("PropertyBinding: Cannot parse trackName: "+cr);var yn={nodeName:vn[2],objectName:vn[3],objectIndex:vn[4],propertyName:vn[5],propertyIndex:vn[6]},Rn=yn.nodeName&&yn.nodeName.lastIndexOf(".");if(Rn!==void 0&&Rn!==-1){var Bn=yn.nodeName.substring(Rn+1);_supportedObjectNames.indexOf(Bn)!==-1&&(yn.nodeName=yn.nodeName.substring(0,Rn),yn.objectName=Bn)}if(yn.propertyName===null||yn.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+cr);return yn},findNode:function(cr,vn){if(!vn||vn===""||vn==="."||vn===-1||vn===cr.name||vn===cr.uuid)return cr;if(cr.skeleton){var yn=cr.skeleton.getBoneByName(vn);if(yn!==void 0)return yn}if(cr.children){var Rn=function(Co){for(var Po=0;Po<Co.length;Po++){var To=Co[Po];if(To.name===vn||To.uuid===vn)return To;var Io=Rn(To.children);if(Io)return Io}return null},Bn=Rn(cr.children);if(Bn)return Bn}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(vn,yn){vn[yn]=this.node[this.propertyName]},function(vn,yn){for(var Rn=this.resolvedProperty,Bn=0,Co=Rn.length;Bn!==Co;++Bn)vn[yn++]=Rn[Bn]},function(vn,yn){vn[yn]=this.resolvedProperty[this.propertyIndex]},function(vn,yn){this.resolvedProperty.toArray(vn,yn)}],SetterByBindingTypeAndVersioning:[[function(vn,yn){this.targetObject[this.propertyName]=vn[yn]},function(vn,yn){this.targetObject[this.propertyName]=vn[yn],this.targetObject.needsUpdate=!0},function(vn,yn){this.targetObject[this.propertyName]=vn[yn],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(vn,yn){for(var Rn=this.resolvedProperty,Bn=0,Co=Rn.length;Bn!==Co;++Bn)Rn[Bn]=vn[yn++]},function(vn,yn){for(var Rn=this.resolvedProperty,Bn=0,Co=Rn.length;Bn!==Co;++Bn)Rn[Bn]=vn[yn++];this.targetObject.needsUpdate=!0},function(vn,yn){for(var Rn=this.resolvedProperty,Bn=0,Co=Rn.length;Bn!==Co;++Bn)Rn[Bn]=vn[yn++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(vn,yn){this.resolvedProperty[this.propertyIndex]=vn[yn]},function(vn,yn){this.resolvedProperty[this.propertyIndex]=vn[yn],this.targetObject.needsUpdate=!0},function(vn,yn){this.resolvedProperty[this.propertyIndex]=vn[yn],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(vn,yn){this.resolvedProperty.fromArray(vn,yn)},function(vn,yn){this.resolvedProperty.fromArray(vn,yn),this.targetObject.needsUpdate=!0},function(vn,yn){this.resolvedProperty.fromArray(vn,yn),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(vn,yn){this.bind(),this.getValue(vn,yn)},setValue:function(vn,yn){this.bind(),this.setValue(vn,yn)},bind:function(){var cr=this.node,vn=this.parsedPath,yn=vn.objectName,Rn=vn.propertyName,Bn=vn.propertyIndex;if(cr||(cr=PropertyBinding.findNode(this.rootNode,vn.nodeName)||this.rootNode,this.node=cr),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!cr){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(yn){var Co=vn.objectIndex;switch(yn){case"materials":if(!cr.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!cr.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}cr=cr.material.materials;break;case"bones":if(!cr.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}cr=cr.skeleton.bones;for(var Po=0;Po<cr.length;Po++)if(cr[Po].name===Co){Co=Po;break}break;default:if(cr[yn]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}cr=cr[yn]}if(Co!==void 0){if(cr[Co]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,cr);return}cr=cr[Co]}}var To=cr[Rn];if(To===void 0){var Io=vn.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Io+"."+Rn+" but it wasn't found.",cr);return}var $l=this.Versioning.None;this.targetObject=cr,cr.needsUpdate!==void 0?$l=this.Versioning.NeedsUpdate:cr.matrixWorldNeedsUpdate!==void 0&&($l=this.Versioning.MatrixWorldNeedsUpdate);var Wl=this.BindingType.Direct;if(Bn!==void 0){if(Rn==="morphTargetInfluences"){if(!cr.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(cr.geometry.isBufferGeometry){if(!cr.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}cr.morphTargetDictionary[Bn]!==void 0&&(Bn=cr.morphTargetDictionary[Bn])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Wl=this.BindingType.ArrayElement,this.resolvedProperty=To,this.propertyIndex=Bn}else To.fromArray!==void 0&&To.toArray!==void 0?(Wl=this.BindingType.HasFromToArray,this.resolvedProperty=To):Array.isArray(To)?(Wl=this.BindingType.EntireArray,this.resolvedProperty=To):this.propertyName=Rn;this.getValue=this.GetterByBindingType[Wl],this.setValue=this.SetterByBindingTypeAndVersioning[Wl][$l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var cr={};this._indicesByUUID=cr;for(var vn=0,yn=arguments.length;vn!==yn;++vn)cr[arguments[vn].uuid]=vn;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var Rn=this;this.stats={objects:{get total(){return Rn._objects.length},get inUse(){return this.total-Rn.nCachedObjects_}},get bindingsPerObject(){return Rn._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var cr=this._objects,vn=cr.length,yn=this.nCachedObjects_,Rn=this._indicesByUUID,Bn=this._paths,Co=this._parsedPaths,Po=this._bindings,To=Po.length,Io=void 0,$l=0,Wl=arguments.length;$l!==Wl;++$l){var Xl=arguments[$l],Yl=Xl.uuid,Zl=Rn[Yl];if(Zl===void 0){Zl=vn++,Rn[Yl]=Zl,cr.push(Xl);for(var ey=0,Rm=To;ey!==Rm;++ey)Po[ey].push(new PropertyBinding(Xl,Bn[ey],Co[ey]))}else if(Zl<yn){Io=cr[Zl];var ry=--yn,_g=cr[ry];Rn[_g.uuid]=Zl,cr[Zl]=_g,Rn[Yl]=ry,cr[ry]=Xl;for(var ey=0,Rm=To;ey!==Rm;++ey){var ty=Po[ey],ny=ty[ry],iy=ty[Zl];ty[Zl]=ny,iy===void 0&&(iy=new PropertyBinding(Xl,Bn[ey],Co[ey])),ty[ry]=iy}}else cr[Zl]!==Io&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=yn},remove:function(){for(var cr=this._objects,vn=this.nCachedObjects_,yn=this._indicesByUUID,Rn=this._bindings,Bn=Rn.length,Co=0,Po=arguments.length;Co!==Po;++Co){var To=arguments[Co],Io=To.uuid,$l=yn[Io];if($l!==void 0&&$l>=vn){var Wl=vn++,Xl=cr[Wl];yn[Xl.uuid]=$l,cr[$l]=Xl,yn[Io]=Wl,cr[Wl]=To;for(var Yl=0,Zl=Bn;Yl!==Zl;++Yl){var ey=Rn[Yl],Rm=ey[Wl],ry=ey[$l];ey[$l]=Rm,ey[Wl]=ry}}}this.nCachedObjects_=vn},uncache:function(){for(var cr=this._objects,vn=cr.length,yn=this.nCachedObjects_,Rn=this._indicesByUUID,Bn=this._bindings,Co=Bn.length,Po=0,To=arguments.length;Po!==To;++Po){var Io=arguments[Po],$l=Io.uuid,Wl=Rn[$l];if(Wl!==void 0)if(delete Rn[$l],Wl<yn){var Xl=--yn,Yl=cr[Xl],Zl=--vn,ey=cr[Zl];Rn[Yl.uuid]=Wl,cr[Wl]=Yl,Rn[ey.uuid]=Xl,cr[Xl]=ey,cr.pop();for(var Rm=0,ry=Co;Rm!==ry;++Rm){var _g=Bn[Rm],ty=_g[Xl],ny=_g[Zl];_g[Wl]=ty,_g[Xl]=ny,_g.pop()}}else{var Zl=--vn,ey=cr[Zl];Rn[ey.uuid]=Wl,cr[Wl]=ey,cr.pop();for(var Rm=0,ry=Co;Rm!==ry;++Rm){var _g=Bn[Rm];_g[Wl]=_g[Zl],_g.pop()}}}this.nCachedObjects_=yn},subscribe_:function(cr,vn){var yn=this._bindingsIndicesByPath,Rn=yn[cr],Bn=this._bindings;if(Rn!==void 0)return Bn[Rn];var Co=this._paths,Po=this._parsedPaths,To=this._objects,Io=To.length,$l=this.nCachedObjects_,Wl=new Array(Io);Rn=Bn.length,yn[cr]=Rn,Co.push(cr),Po.push(vn),Bn.push(Wl);for(var Xl=$l,Yl=To.length;Xl!==Yl;++Xl){var Zl=To[Xl];Wl[Xl]=new PropertyBinding(Zl,cr,vn)}return Wl},unsubscribe_:function(cr){var vn=this._bindingsIndicesByPath,yn=vn[cr];if(yn!==void 0){var Rn=this._paths,Bn=this._parsedPaths,Co=this._bindings,Po=Co.length-1,To=Co[Po],Io=cr[Po];vn[Io]=yn,Co[yn]=To,Co.pop(),Bn[yn]=Bn[Po],Bn.pop(),Rn[yn]=Rn[Po],Rn.pop()}}});function AnimationAction(cr,vn,yn,Rn){this._mixer=cr,this._clip=vn,this._localRoot=yn||null,this.blendMode=Rn||vn.blendMode;for(var Bn=vn.tracks,Co=Bn.length,Po=new Array(Co),To={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Io=0;Io!==Co;++Io){var $l=Bn[Io].createInterpolant(null);Po[Io]=$l,$l.settings=To}this._interpolantSettings=To,this._interpolants=Po,this._propertyBindings=new Array(Co),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(cr){return this._startTime=cr,this},setLoop:function(cr,vn){return this.loop=cr,this.repetitions=vn,this},setEffectiveWeight:function(cr){return this.weight=cr,this._effectiveWeight=this.enabled?cr:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(cr){return this._scheduleFading(cr,0,1)},fadeOut:function(cr){return this._scheduleFading(cr,1,0)},crossFadeFrom:function(cr,vn,yn){if(cr.fadeOut(vn),this.fadeIn(vn),yn){var Rn=this._clip.duration,Bn=cr._clip.duration,Co=Bn/Rn,Po=Rn/Bn;cr.warp(1,Co,vn),this.warp(Po,1,vn)}return this},crossFadeTo:function(cr,vn,yn){return cr.crossFadeFrom(this,vn,yn)},stopFading:function(){var cr=this._weightInterpolant;return cr!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(cr)),this},setEffectiveTimeScale:function(cr){return this.timeScale=cr,this._effectiveTimeScale=this.paused?0:cr,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(cr){return this.timeScale=this._clip.duration/cr,this.stopWarping()},syncWith:function(cr){return this.time=cr.time,this.timeScale=cr.timeScale,this.stopWarping()},halt:function(cr){return this.warp(this._effectiveTimeScale,0,cr)},warp:function(cr,vn,yn){var Rn=this._mixer,Bn=Rn.time,Co=this._timeScaleInterpolant,Po=this.timeScale;Co===null&&(Co=Rn._lendControlInterpolant(),this._timeScaleInterpolant=Co);var To=Co.parameterPositions,Io=Co.sampleValues;return To[0]=Bn,To[1]=Bn+yn,Io[0]=cr/Po,Io[1]=vn/Po,this},stopWarping:function(){var cr=this._timeScaleInterpolant;return cr!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(cr)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(cr,vn,yn,Rn){if(!this.enabled){this._updateWeight(cr);return}var Bn=this._startTime;if(Bn!==null){var Co=(cr-Bn)*yn;if(Co<0||yn===0)return;this._startTime=null,vn=yn*Co}vn*=this._updateTimeScale(cr);var Po=this._updateTime(vn),To=this._updateWeight(cr);if(To>0){var Io=this._interpolants,$l=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Wl=0,Xl=Io.length;Wl!==Xl;++Wl)Io[Wl].evaluate(Po),$l[Wl].accumulateAdditive(To);break;case NormalAnimationBlendMode:default:for(var Wl=0,Xl=Io.length;Wl!==Xl;++Wl)Io[Wl].evaluate(Po),$l[Wl].accumulate(Rn,To)}}},_updateWeight:function(cr){var vn=0;if(this.enabled){vn=this.weight;var yn=this._weightInterpolant;if(yn!==null){var Rn=yn.evaluate(cr)[0];vn*=Rn,cr>yn.parameterPositions[1]&&(this.stopFading(),Rn===0&&(this.enabled=!1))}}return this._effectiveWeight=vn,vn},_updateTimeScale:function(cr){var vn=0;if(!this.paused){vn=this.timeScale;var yn=this._timeScaleInterpolant;if(yn!==null){var Rn=yn.evaluate(cr)[0];vn*=Rn,cr>yn.parameterPositions[1]&&(this.stopWarping(),vn===0?this.paused=!0:this.timeScale=vn)}}return this._effectiveTimeScale=vn,vn},_updateTime:function(cr){var vn=this.time+cr,yn=this._clip.duration,Rn=this.loop,Bn=this._loopCount,Co=Rn===LoopPingPong;if(cr===0)return Bn===-1?vn:Co&&(Bn&1)===1?yn-vn:vn;if(Rn===LoopOnce){Bn===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(vn>=yn)vn=yn;else if(vn<0)vn=0;else{this.time=vn;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=vn,this._mixer.dispatchEvent({type:"finished",action:this,direction:cr<0?-1:1})}}else{if(Bn===-1&&(cr>=0?(Bn=0,this._setEndings(!0,this.repetitions===0,Co)):this._setEndings(this.repetitions===0,!0,Co)),vn>=yn||vn<0){var Po=Math.floor(vn/yn);vn-=yn*Po,Bn+=Math.abs(Po);var To=this.repetitions-Bn;if(To<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,vn=cr>0?yn:0,this.time=vn,this._mixer.dispatchEvent({type:"finished",action:this,direction:cr>0?1:-1});else{if(To===1){var Io=cr<0;this._setEndings(Io,!Io,Co)}else this._setEndings(!1,!1,Co);this._loopCount=Bn,this.time=vn,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Po})}}else this.time=vn;if(Co&&(Bn&1)===1)return yn-vn}return vn},_setEndings:function(cr,vn,yn){var Rn=this._interpolantSettings;yn?(Rn.endingStart=ZeroSlopeEnding,Rn.endingEnd=ZeroSlopeEnding):(cr?Rn.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Rn.endingStart=WrapAroundEnding,vn?Rn.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Rn.endingEnd=WrapAroundEnding)},_scheduleFading:function(cr,vn,yn){var Rn=this._mixer,Bn=Rn.time,Co=this._weightInterpolant;Co===null&&(Co=Rn._lendControlInterpolant(),this._weightInterpolant=Co);var Po=Co.parameterPositions,To=Co.sampleValues;return Po[0]=Bn,To[0]=vn,Po[1]=Bn+cr,To[1]=yn,this}});function AnimationMixer(cr){this._root=cr,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(cr,vn){var yn=cr._localRoot||this._root,Rn=cr._clip.tracks,Bn=Rn.length,Co=cr._propertyBindings,Po=cr._interpolants,To=yn.uuid,Io=this._bindingsByRootAndName,$l=Io[To];$l===void 0&&($l={},Io[To]=$l);for(var Wl=0;Wl!==Bn;++Wl){var Xl=Rn[Wl],Yl=Xl.name,Zl=$l[Yl];if(Zl!==void 0)Co[Wl]=Zl;else{if(Zl=Co[Wl],Zl!==void 0){Zl._cacheIndex===null&&(++Zl.referenceCount,this._addInactiveBinding(Zl,To,Yl));continue}var ey=vn&&vn._propertyBindings[Wl].binding.parsedPath;Zl=new PropertyMixer(PropertyBinding.create(yn,Yl,ey),Xl.ValueTypeName,Xl.getValueSize()),++Zl.referenceCount,this._addInactiveBinding(Zl,To,Yl),Co[Wl]=Zl}Po[Wl].resultBuffer=Zl.buffer}},_activateAction:function(cr){if(!this._isActiveAction(cr)){if(cr._cacheIndex===null){var vn=(cr._localRoot||this._root).uuid,yn=cr._clip.uuid,Rn=this._actionsByClip[yn];this._bindAction(cr,Rn&&Rn.knownActions[0]),this._addInactiveAction(cr,yn,vn)}for(var Bn=cr._propertyBindings,Co=0,Po=Bn.length;Co!==Po;++Co){var To=Bn[Co];To.useCount++===0&&(this._lendBinding(To),To.saveOriginalState())}this._lendAction(cr)}},_deactivateAction:function(cr){if(this._isActiveAction(cr)){for(var vn=cr._propertyBindings,yn=0,Rn=vn.length;yn!==Rn;++yn){var Bn=vn[yn];--Bn.useCount===0&&(Bn.restoreOriginalState(),this._takeBackBinding(Bn))}this._takeBackAction(cr)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var cr=this;this.stats={actions:{get total(){return cr._actions.length},get inUse(){return cr._nActiveActions}},bindings:{get total(){return cr._bindings.length},get inUse(){return cr._nActiveBindings}},controlInterpolants:{get total(){return cr._controlInterpolants.length},get inUse(){return cr._nActiveControlInterpolants}}}},_isActiveAction:function(cr){var vn=cr._cacheIndex;return vn!==null&&vn<this._nActiveActions},_addInactiveAction:function(cr,vn,yn){var Rn=this._actions,Bn=this._actionsByClip,Co=Bn[vn];if(Co===void 0)Co={knownActions:[cr],actionByRoot:{}},cr._byClipCacheIndex=0,Bn[vn]=Co;else{var Po=Co.knownActions;cr._byClipCacheIndex=Po.length,Po.push(cr)}cr._cacheIndex=Rn.length,Rn.push(cr),Co.actionByRoot[yn]=cr},_removeInactiveAction:function(cr){var vn=this._actions,yn=vn[vn.length-1],Rn=cr._cacheIndex;yn._cacheIndex=Rn,vn[Rn]=yn,vn.pop(),cr._cacheIndex=null;var Bn=cr._clip.uuid,Co=this._actionsByClip,Po=Co[Bn],To=Po.knownActions,Io=To[To.length-1],$l=cr._byClipCacheIndex;Io._byClipCacheIndex=$l,To[$l]=Io,To.pop(),cr._byClipCacheIndex=null;var Wl=Po.actionByRoot,Xl=(cr._localRoot||this._root).uuid;delete Wl[Xl],To.length===0&&delete Co[Bn],this._removeInactiveBindingsForAction(cr)},_removeInactiveBindingsForAction:function(cr){for(var vn=cr._propertyBindings,yn=0,Rn=vn.length;yn!==Rn;++yn){var Bn=vn[yn];--Bn.referenceCount===0&&this._removeInactiveBinding(Bn)}},_lendAction:function(cr){var vn=this._actions,yn=cr._cacheIndex,Rn=this._nActiveActions++,Bn=vn[Rn];cr._cacheIndex=Rn,vn[Rn]=cr,Bn._cacheIndex=yn,vn[yn]=Bn},_takeBackAction:function(cr){var vn=this._actions,yn=cr._cacheIndex,Rn=--this._nActiveActions,Bn=vn[Rn];cr._cacheIndex=Rn,vn[Rn]=cr,Bn._cacheIndex=yn,vn[yn]=Bn},_addInactiveBinding:function(cr,vn,yn){var Rn=this._bindingsByRootAndName,Bn=Rn[vn],Co=this._bindings;Bn===void 0&&(Bn={},Rn[vn]=Bn),Bn[yn]=cr,cr._cacheIndex=Co.length,Co.push(cr)},_removeInactiveBinding:function(cr){var vn=this._bindings,yn=cr.binding,Rn=yn.rootNode.uuid,Bn=yn.path,Co=this._bindingsByRootAndName,Po=Co[Rn],To=vn[vn.length-1],Io=cr._cacheIndex;To._cacheIndex=Io,vn[Io]=To,vn.pop(),delete Po[Bn],Object.keys(Po).length===0&&delete Co[Rn]},_lendBinding:function(cr){var vn=this._bindings,yn=cr._cacheIndex,Rn=this._nActiveBindings++,Bn=vn[Rn];cr._cacheIndex=Rn,vn[Rn]=cr,Bn._cacheIndex=yn,vn[yn]=Bn},_takeBackBinding:function(cr){var vn=this._bindings,yn=cr._cacheIndex,Rn=--this._nActiveBindings,Bn=vn[Rn];cr._cacheIndex=Rn,vn[Rn]=cr,Bn._cacheIndex=yn,vn[yn]=Bn},_lendControlInterpolant:function(){var cr=this._controlInterpolants,vn=this._nActiveControlInterpolants++,yn=cr[vn];return yn===void 0&&(yn=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),yn.__cacheIndex=vn,cr[vn]=yn),yn},_takeBackControlInterpolant:function(cr){var vn=this._controlInterpolants,yn=cr.__cacheIndex,Rn=--this._nActiveControlInterpolants,Bn=vn[Rn];cr.__cacheIndex=Rn,vn[Rn]=cr,Bn.__cacheIndex=yn,vn[yn]=Bn},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(cr,vn,yn){var Rn=vn||this._root,Bn=Rn.uuid,Co=typeof cr=="string"?AnimationClip.findByName(Rn,cr):cr,Po=Co!==null?Co.uuid:cr,To=this._actionsByClip[Po],Io=null;if(yn===void 0&&(Co!==null?yn=Co.blendMode:yn=NormalAnimationBlendMode),To!==void 0){var $l=To.actionByRoot[Bn];if($l!==void 0&&$l.blendMode===yn)return $l;Io=To.knownActions[0],Co===null&&(Co=Io._clip)}if(Co===null)return null;var Wl=new AnimationAction(this,Co,vn,yn);return this._bindAction(Wl,Io),this._addInactiveAction(Wl,Po,Bn),Wl},existingAction:function(cr,vn){var yn=vn||this._root,Rn=yn.uuid,Bn=typeof cr=="string"?AnimationClip.findByName(yn,cr):cr,Co=Bn?Bn.uuid:cr,Po=this._actionsByClip[Co];return Po!==void 0&&Po.actionByRoot[Rn]||null},stopAllAction:function(){for(var cr=this._actions,vn=this._nActiveActions,yn=vn-1;yn>=0;--yn)cr[yn].stop();return this},update:function(cr){cr*=this.timeScale;for(var vn=this._actions,yn=this._nActiveActions,Rn=this.time+=cr,Bn=Math.sign(cr),Co=this._accuIndex^=1,Po=0;Po!==yn;++Po){var To=vn[Po];To._update(Rn,cr,Bn,Co)}for(var Io=this._bindings,$l=this._nActiveBindings,Po=0;Po!==$l;++Po)Io[Po].apply(Co);return this},setTime:function(cr){this.time=0;for(var vn=0;vn<this._actions.length;vn++)this._actions[vn].time=0;return this.update(cr)},getRoot:function(){return this._root},uncacheClip:function(cr){var vn=this._actions,yn=cr.uuid,Rn=this._actionsByClip,Bn=Rn[yn];if(Bn!==void 0){for(var Co=Bn.knownActions,Po=0,To=Co.length;Po!==To;++Po){var Io=Co[Po];this._deactivateAction(Io);var $l=Io._cacheIndex,Wl=vn[vn.length-1];Io._cacheIndex=null,Io._byClipCacheIndex=null,Wl._cacheIndex=$l,vn[$l]=Wl,vn.pop(),this._removeInactiveBindingsForAction(Io)}delete Rn[yn]}},uncacheRoot:function(cr){var vn=cr.uuid,yn=this._actionsByClip;for(var Rn in yn){var Bn=yn[Rn].actionByRoot,Co=Bn[vn];Co!==void 0&&(this._deactivateAction(Co),this._removeInactiveAction(Co))}var Po=this._bindingsByRootAndName,To=Po[vn];if(To!==void 0)for(var Io in To){var $l=To[Io];$l.restoreOriginalState(),this._removeInactiveBinding($l)}},uncacheAction:function(cr,vn){var yn=this.existingAction(cr,vn);yn!==null&&(this._deactivateAction(yn),this._removeInactiveAction(yn))}});function Uniform(cr){typeof cr=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),cr=arguments[1]),this.value=cr}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(cr,vn,yn){InterleavedBuffer.call(this,cr,vn),this.meshPerAttribute=yn||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(cr){return InterleavedBuffer.prototype.copy.call(this,cr),this.meshPerAttribute=cr.meshPerAttribute,this}});function Raycaster(cr,vn,yn,Rn){this.ray=new Ray(cr,vn),this.near=yn||0,this.far=Rn||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(cr,vn){return cr.distance-vn.distance}function intersectObject(cr,vn,yn,Rn){if(cr.layers.test(vn.layers)&&cr.raycast(vn,yn),Rn===!0)for(var Bn=cr.children,Co=0,Po=Bn.length;Co<Po;Co++)intersectObject(Bn[Co],vn,yn,!0)}Object.assign(Raycaster.prototype,{set:function(cr,vn){this.ray.set(cr,vn)},setFromCamera:function(cr,vn){vn&&vn.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(vn.matrixWorld),this.ray.direction.set(cr.x,cr.y,.5).unproject(vn).sub(this.ray.origin).normalize(),this.camera=vn):vn&&vn.isOrthographicCamera?(this.ray.origin.set(cr.x,cr.y,(vn.near+vn.far)/(vn.near-vn.far)).unproject(vn),this.ray.direction.set(0,0,-1).transformDirection(vn.matrixWorld),this.camera=vn):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(cr,vn,yn){var Rn=yn||[];return intersectObject(cr,this,Rn,vn),Rn.sort(ascSort),Rn},intersectObjects:function(cr,vn,yn){var Rn=yn||[];if(Array.isArray(cr)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Rn;for(var Bn=0,Co=cr.length;Bn<Co;Bn++)intersectObject(cr[Bn],this,Rn,vn);return Rn.sort(ascSort),Rn}});function Spherical(cr,vn,yn){return this.radius=cr!==void 0?cr:1,this.phi=vn!==void 0?vn:0,this.theta=yn!==void 0?yn:0,this}Object.assign(Spherical.prototype,{set:function(cr,vn,yn){return this.radius=cr,this.phi=vn,this.theta=yn,this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.radius=cr.radius,this.phi=cr.phi,this.theta=cr.theta,this},makeSafe:function(){var cr=1e-6;return this.phi=Math.max(cr,Math.min(Math.PI-cr,this.phi)),this},setFromVector3:function(cr){return this.setFromCartesianCoords(cr.x,cr.y,cr.z)},setFromCartesianCoords:function(cr,vn,yn){return this.radius=Math.sqrt(cr*cr+vn*vn+yn*yn),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(cr,yn),this.phi=Math.acos(MathUtils.clamp(vn/this.radius,-1,1))),this}});function Cylindrical(cr,vn,yn){return this.radius=cr!==void 0?cr:1,this.theta=vn!==void 0?vn:0,this.y=yn!==void 0?yn:0,this}Object.assign(Cylindrical.prototype,{set:function(cr,vn,yn){return this.radius=cr,this.theta=vn,this.y=yn,this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.radius=cr.radius,this.theta=cr.theta,this.y=cr.y,this},setFromVector3:function(cr){return this.setFromCartesianCoords(cr.x,cr.y,cr.z)},setFromCartesianCoords:function(cr,vn,yn){return this.radius=Math.sqrt(cr*cr+yn*yn),this.theta=Math.atan2(cr,yn),this.y=vn,this}});var _vector$7=new Vector2;function Box2(cr,vn){this.min=cr!==void 0?cr:new Vector2(1/0,1/0),this.max=vn!==void 0?vn:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(cr,vn){return this.min.copy(cr),this.max.copy(vn),this},setFromPoints:function(cr){this.makeEmpty();for(var vn=0,yn=cr.length;vn<yn;vn++)this.expandByPoint(cr[vn]);return this},setFromCenterAndSize:function(cr,vn){var yn=_vector$7.copy(vn).multiplyScalar(.5);return this.min.copy(cr).sub(yn),this.max.copy(cr).add(yn),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.min.copy(cr.min),this.max.copy(cr.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(cr){return cr===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),cr=new Vector2),this.isEmpty()?cr.set(0,0):cr.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(cr){return cr===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),cr=new Vector2),this.isEmpty()?cr.set(0,0):cr.subVectors(this.max,this.min)},expandByPoint:function(cr){return this.min.min(cr),this.max.max(cr),this},expandByVector:function(cr){return this.min.sub(cr),this.max.add(cr),this},expandByScalar:function(cr){return this.min.addScalar(-cr),this.max.addScalar(cr),this},containsPoint:function(cr){return!(cr.x<this.min.x||cr.x>this.max.x||cr.y<this.min.y||cr.y>this.max.y)},containsBox:function(cr){return this.min.x<=cr.min.x&&cr.max.x<=this.max.x&&this.min.y<=cr.min.y&&cr.max.y<=this.max.y},getParameter:function(cr,vn){return vn===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),vn=new Vector2),vn.set((cr.x-this.min.x)/(this.max.x-this.min.x),(cr.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(cr){return!(cr.max.x<this.min.x||cr.min.x>this.max.x||cr.max.y<this.min.y||cr.min.y>this.max.y)},clampPoint:function(cr,vn){return vn===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),vn=new Vector2),vn.copy(cr).clamp(this.min,this.max)},distanceToPoint:function(cr){var vn=_vector$7.copy(cr).clamp(this.min,this.max);return vn.sub(cr).length()},intersect:function(cr){return this.min.max(cr.min),this.max.min(cr.max),this},union:function(cr){return this.min.min(cr.min),this.max.max(cr.max),this},translate:function(cr){return this.min.add(cr),this.max.add(cr),this},equals:function(cr){return cr.min.equals(this.min)&&cr.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(cr,vn){this.start=cr!==void 0?cr:new Vector3,this.end=vn!==void 0?vn:new Vector3}Object.assign(Line3.prototype,{set:function(cr,vn){return this.start.copy(cr),this.end.copy(vn),this},clone:function(){return new this.constructor().copy(this)},copy:function(cr){return this.start.copy(cr.start),this.end.copy(cr.end),this},getCenter:function(cr){return cr===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),cr=new Vector3),cr.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(cr){return cr===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),cr=new Vector3),cr.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(cr,vn){return vn===void 0&&(console.warn("THREE.Line3: .at() target is now required"),vn=new Vector3),this.delta(vn).multiplyScalar(cr).add(this.start)},closestPointToPointParameter:function(cr,vn){_startP.subVectors(cr,this.start),_startEnd.subVectors(this.end,this.start);var yn=_startEnd.dot(_startEnd),Rn=_startEnd.dot(_startP),Bn=Rn/yn;return vn&&(Bn=MathUtils.clamp(Bn,0,1)),Bn},closestPointToPoint:function(cr,vn,yn){var Rn=this.closestPointToPointParameter(cr,vn);return yn===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),yn=new Vector3),this.delta(yn).multiplyScalar(Rn).add(this.start)},applyMatrix4:function(cr){return this.start.applyMatrix4(cr),this.end.applyMatrix4(cr),this},equals:function(cr){return cr.start.equals(this.start)&&cr.end.equals(this.end)}});function ImmediateRenderObject(cr){Object3D.call(this),this.material=cr,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(cr,vn){Object3D.call(this),this.light=cr,this.light.updateMatrixWorld(),this.matrix=cr.matrixWorld,this.matrixAutoUpdate=!1,this.color=vn;for(var yn=new BufferGeometry,Rn=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Bn=0,Co=1,Po=32;Bn<Po;Bn++,Co++){var To=Bn/Po*Math.PI*2,Io=Co/Po*Math.PI*2;Rn.push(Math.cos(To),Math.sin(To),1,Math.cos(Io),Math.sin(Io),1)}yn.setAttribute("position",new Float32BufferAttribute(Rn,3));var $l=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(yn,$l),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var cr=this.light.distance?this.light.distance:1e3,vn=cr*Math.tan(this.light.angle);this.cone.scale.set(vn,vn,cr),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(cr){var vn=[];cr&&cr.isBone&&vn.push(cr);for(var yn=0;yn<cr.children.length;yn++)vn.push.apply(vn,getBoneList(cr.children[yn]));return vn}function SkeletonHelper(cr){for(var vn=getBoneList(cr),yn=new BufferGeometry,Rn=[],Bn=[],Co=new Color(0,0,1),Po=new Color(0,1,0),To=0;To<vn.length;To++){var Io=vn[To];Io.parent&&Io.parent.isBone&&(Rn.push(0,0,0),Rn.push(0,0,0),Bn.push(Co.r,Co.g,Co.b),Bn.push(Po.r,Po.g,Po.b))}yn.setAttribute("position",new Float32BufferAttribute(Rn,3)),yn.setAttribute("color",new Float32BufferAttribute(Bn,3));var $l=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,yn,$l),this.type="SkeletonHelper",this.root=cr,this.bones=vn,this.matrix=cr.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(cr){var vn=this.bones,yn=this.geometry,Rn=yn.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var Bn=0,Co=0;Bn<vn.length;Bn++){var Po=vn[Bn];Po.parent&&Po.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Po.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Rn.setXYZ(Co,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Po.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),Rn.setXYZ(Co+1,_vector$9.x,_vector$9.y,_vector$9.z),Co+=2)}yn.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,cr)};function PointLightHelper(cr,vn,yn){this.light=cr,this.light.updateMatrixWorld(),this.color=yn;var Rn=new SphereBufferGeometry(vn,4,2),Bn=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,Rn,Bn),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(cr,vn,yn){Object3D.call(this),this.light=cr,this.light.updateMatrixWorld(),this.matrix=cr.matrixWorld,this.matrixAutoUpdate=!1,this.color=yn;var Rn=new OctahedronBufferGeometry(vn);Rn.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var Bn=Rn.getAttribute("position"),Co=new Float32Array(Bn.count*3);Rn.setAttribute("color",new BufferAttribute(Co,3)),this.add(new Mesh(Rn,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var cr=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var vn=cr.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var yn=0,Rn=vn.count;yn<Rn;yn++){var Bn=yn<Rn/2?_color1:_color2;vn.setXYZ(yn,Bn.r,Bn.g,Bn.b)}vn.needsUpdate=!0}cr.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(cr,vn,yn,Rn){cr=cr||10,vn=vn||10,yn=new Color(yn!==void 0?yn:4473924),Rn=new Color(Rn!==void 0?Rn:8947848);for(var Bn=vn/2,Co=cr/vn,Po=cr/2,To=[],Io=[],$l=0,Wl=0,Xl=-Po;$l<=vn;$l++,Xl+=Co){To.push(-Po,0,Xl,Po,0,Xl),To.push(Xl,0,-Po,Xl,0,Po);var Yl=$l===Bn?yn:Rn;Yl.toArray(Io,Wl),Wl+=3,Yl.toArray(Io,Wl),Wl+=3,Yl.toArray(Io,Wl),Wl+=3,Yl.toArray(Io,Wl),Wl+=3}var Zl=new BufferGeometry;Zl.setAttribute("position",new Float32BufferAttribute(To,3)),Zl.setAttribute("color",new Float32BufferAttribute(Io,3));var ey=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Zl,ey),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(cr){return LineSegments.prototype.copy.call(this,cr),this.geometry.copy(cr.geometry),this.material.copy(cr.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(cr,vn,yn,Rn,Bn,Co){cr=cr||10,vn=vn||16,yn=yn||8,Rn=Rn||64,Bn=new Color(Bn!==void 0?Bn:4473924),Co=new Color(Co!==void 0?Co:8947848);var Po=[],To=[],Io,$l,Wl,Xl,Yl,Zl,ey;for(Xl=0;Xl<=vn;Xl++)Wl=Xl/vn*(Math.PI*2),Io=Math.sin(Wl)*cr,$l=Math.cos(Wl)*cr,Po.push(0,0,0),Po.push(Io,0,$l),ey=Xl&1?Bn:Co,To.push(ey.r,ey.g,ey.b),To.push(ey.r,ey.g,ey.b);for(Xl=0;Xl<=yn;Xl++)for(ey=Xl&1?Bn:Co,Zl=cr-cr/yn*Xl,Yl=0;Yl<Rn;Yl++)Wl=Yl/Rn*(Math.PI*2),Io=Math.sin(Wl)*Zl,$l=Math.cos(Wl)*Zl,Po.push(Io,0,$l),To.push(ey.r,ey.g,ey.b),Wl=(Yl+1)/Rn*(Math.PI*2),Io=Math.sin(Wl)*Zl,$l=Math.cos(Wl)*Zl,Po.push(Io,0,$l),To.push(ey.r,ey.g,ey.b);var Rm=new BufferGeometry;Rm.setAttribute("position",new Float32BufferAttribute(Po,3)),Rm.setAttribute("color",new Float32BufferAttribute(To,3));var ry=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Rm,ry),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(cr,vn,yn){Object3D.call(this),this.light=cr,this.light.updateMatrixWorld(),this.matrix=cr.matrixWorld,this.matrixAutoUpdate=!1,this.color=yn,vn===void 0&&(vn=1);var Rn=new BufferGeometry;Rn.setAttribute("position",new Float32BufferAttribute([-vn,vn,0,vn,vn,0,vn,-vn,0,-vn,-vn,0,-vn,vn,0],3));var Bn=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(Rn,Bn),this.add(this.lightPlane),Rn=new BufferGeometry,Rn.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(Rn,Bn),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(cr){var vn=new BufferGeometry,yn=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Rn=[],Bn=[],Co={},Po=new Color(16755200),To=new Color(16711680),Io=new Color(43775),$l=new Color(16777215),Wl=new Color(3355443);Xl("n1","n2",Po),Xl("n2","n4",Po),Xl("n4","n3",Po),Xl("n3","n1",Po),Xl("f1","f2",Po),Xl("f2","f4",Po),Xl("f4","f3",Po),Xl("f3","f1",Po),Xl("n1","f1",Po),Xl("n2","f2",Po),Xl("n3","f3",Po),Xl("n4","f4",Po),Xl("p","n1",To),Xl("p","n2",To),Xl("p","n3",To),Xl("p","n4",To),Xl("u1","u2",Io),Xl("u2","u3",Io),Xl("u3","u1",Io),Xl("c","t",$l),Xl("p","c",Wl),Xl("cn1","cn2",Wl),Xl("cn3","cn4",Wl),Xl("cf1","cf2",Wl),Xl("cf3","cf4",Wl);function Xl(Zl,ey,Rm){Yl(Zl,Rm),Yl(ey,Rm)}function Yl(Zl,ey){Rn.push(0,0,0),Bn.push(ey.r,ey.g,ey.b),Co[Zl]===void 0&&(Co[Zl]=[]),Co[Zl].push(Rn.length/3-1)}vn.setAttribute("position",new Float32BufferAttribute(Rn,3)),vn.setAttribute("color",new Float32BufferAttribute(Bn,3)),LineSegments.call(this,vn,yn),this.type="CameraHelper",this.camera=cr,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=cr.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Co,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var cr=this.geometry,vn=this.pointMap,yn=1,Rn=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",vn,cr,_camera,0,0,-1),setPoint("t",vn,cr,_camera,0,0,1),setPoint("n1",vn,cr,_camera,-yn,-Rn,-1),setPoint("n2",vn,cr,_camera,yn,-Rn,-1),setPoint("n3",vn,cr,_camera,-yn,Rn,-1),setPoint("n4",vn,cr,_camera,yn,Rn,-1),setPoint("f1",vn,cr,_camera,-yn,-Rn,1),setPoint("f2",vn,cr,_camera,yn,-Rn,1),setPoint("f3",vn,cr,_camera,-yn,Rn,1),setPoint("f4",vn,cr,_camera,yn,Rn,1),setPoint("u1",vn,cr,_camera,yn*.7,Rn*1.1,-1),setPoint("u2",vn,cr,_camera,-yn*.7,Rn*1.1,-1),setPoint("u3",vn,cr,_camera,0,Rn*2,-1),setPoint("cf1",vn,cr,_camera,-yn,0,1),setPoint("cf2",vn,cr,_camera,yn,0,1),setPoint("cf3",vn,cr,_camera,0,-Rn,1),setPoint("cf4",vn,cr,_camera,0,Rn,1),setPoint("cn1",vn,cr,_camera,-yn,0,-1),setPoint("cn2",vn,cr,_camera,yn,0,-1),setPoint("cn3",vn,cr,_camera,0,-Rn,-1),setPoint("cn4",vn,cr,_camera,0,Rn,-1),cr.getAttribute("position").needsUpdate=!0};function setPoint(cr,vn,yn,Rn,Bn,Co,Po){_vector$b.set(Bn,Co,Po).unproject(Rn);var To=vn[cr];if(To!==void 0)for(var Io=yn.getAttribute("position"),$l=0,Wl=To.length;$l<Wl;$l++)Io.setXYZ(To[$l],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(cr,vn){this.object=cr,vn===void 0&&(vn=16776960);var yn=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Rn=new Float32Array(8*3),Bn=new BufferGeometry;Bn.setIndex(new BufferAttribute(yn,1)),Bn.setAttribute("position",new BufferAttribute(Rn,3)),LineSegments.call(this,Bn,new LineBasicMaterial({color:vn,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(cr){if(cr!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var vn=_box$3.min,yn=_box$3.max,Rn=this.geometry.attributes.position,Bn=Rn.array;Bn[0]=yn.x,Bn[1]=yn.y,Bn[2]=yn.z,Bn[3]=vn.x,Bn[4]=yn.y,Bn[5]=yn.z,Bn[6]=vn.x,Bn[7]=vn.y,Bn[8]=yn.z,Bn[9]=yn.x,Bn[10]=vn.y,Bn[11]=yn.z,Bn[12]=yn.x,Bn[13]=yn.y,Bn[14]=vn.z,Bn[15]=vn.x,Bn[16]=yn.y,Bn[17]=vn.z,Bn[18]=vn.x,Bn[19]=vn.y,Bn[20]=vn.z,Bn[21]=yn.x,Bn[22]=vn.y,Bn[23]=vn.z,Rn.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(cr){return this.object=cr,this.update(),this};BoxHelper.prototype.copy=function(cr){return LineSegments.prototype.copy.call(this,cr),this.object=cr.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(cr,vn){this.type="Box3Helper",this.box=cr,vn=vn||16776960;var yn=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Rn=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Bn=new BufferGeometry;Bn.setIndex(new BufferAttribute(yn,1)),Bn.setAttribute("position",new Float32BufferAttribute(Rn,3)),LineSegments.call(this,Bn,new LineBasicMaterial({color:vn,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(cr){var vn=this.box;vn.isEmpty()||(vn.getCenter(this.position),vn.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,cr))};function PlaneHelper(cr,vn,yn){this.plane=cr,this.size=vn===void 0?1:vn;var Rn=yn!==void 0?yn:16776960,Bn=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Co=new BufferGeometry;Co.setAttribute("position",new Float32BufferAttribute(Bn,3)),Co.computeBoundingSphere(),Line.call(this,Co,new LineBasicMaterial({color:Rn,toneMapped:!1})),this.type="PlaneHelper";var Po=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],To=new BufferGeometry;To.setAttribute("position",new Float32BufferAttribute(Po,3)),To.computeBoundingSphere(),this.add(new Mesh(To,new MeshBasicMaterial({color:Rn,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(cr){var vn=-this.plane.constant;Math.abs(vn)<1e-8&&(vn=1e-8),this.scale.set(.5*this.size,.5*this.size,vn),this.children[0].material.side=vn<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,cr)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(cr,vn,yn,Rn,Bn,Co){Object3D.call(this),this.type="ArrowHelper",cr===void 0&&(cr=new Vector3(0,0,1)),vn===void 0&&(vn=new Vector3(0,0,0)),yn===void 0&&(yn=1),Rn===void 0&&(Rn=16776960),Bn===void 0&&(Bn=.2*yn),Co===void 0&&(Co=.2*Bn),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(vn),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:Rn,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Rn,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(cr),this.setLength(yn,Bn,Co)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(cr){if(cr.y>.99999)this.quaternion.set(0,0,0,1);else if(cr.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(cr.z,0,-cr.x).normalize();var vn=Math.acos(cr.y);this.quaternion.setFromAxisAngle(_axis,vn)}};ArrowHelper.prototype.setLength=function(cr,vn,yn){vn===void 0&&(vn=.2*cr),yn===void 0&&(yn=.2*vn),this.line.scale.set(1,Math.max(1e-4,cr-vn),1),this.line.updateMatrix(),this.cone.scale.set(yn,vn,yn),this.cone.position.y=cr,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(cr){this.line.material.color.set(cr),this.cone.material.color.set(cr)};ArrowHelper.prototype.copy=function(cr){return Object3D.prototype.copy.call(this,cr,!1),this.line.copy(cr.line),this.cone.copy(cr.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(cr){cr=cr||1;var vn=[0,0,0,cr,0,0,0,0,0,0,cr,0,0,0,0,0,0,cr],yn=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Rn=new BufferGeometry;Rn.setAttribute("position",new Float32BufferAttribute(vn,3)),Rn.setAttribute("color",new Float32BufferAttribute(yn,3));var Bn=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Rn,Bn),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(cr){this._renderer=cr,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(cr,vn=0,yn=.1,Rn=100){_oldTarget=this._renderer.getRenderTarget();var Bn=this._allocateTargets();return this._sceneToCubeUV(cr,yn,Rn,Bn),vn>0&&this._blur(Bn,0,0,vn),this._applyPMREM(Bn),this._cleanup(Bn),Bn},fromEquirectangular:function(cr){return cr.magFilter=NearestFilter,cr.minFilter=NearestFilter,cr.generateMipmaps=!1,this.fromCubemap(cr)},fromCubemap:function(cr){_oldTarget=this._renderer.getRenderTarget();var vn=this._allocateTargets(cr);return this._textureToCubeUV(cr,vn),this._applyPMREM(vn),this._cleanup(vn),vn},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var cr=0;cr<_lodPlanes.length;cr++)_lodPlanes[cr].dispose()},_cleanup:function(cr){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),cr.scissorTest=!1,cr.setSize(cr.width,cr.height)},_allocateTargets:function(cr){var vn={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(cr)?cr.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},yn=_createRenderTarget(vn);return yn.depthBuffer=!cr,this._pingPongRenderTarget=_createRenderTarget(vn),yn},_compileMaterial:function(cr){var vn=new Mesh(_lodPlanes[0],cr);this._renderer.compile(vn,_flatCamera)},_sceneToCubeUV:function(cr,vn,yn,Rn){var Bn=90,Co=1,Po=new PerspectiveCamera(Bn,Co,vn,yn),To=[1,-1,1,1,1,1],Io=[1,1,1,-1,-1,-1],$l=this._renderer,Wl=$l.outputEncoding,Xl=$l.toneMapping,Yl=$l.toneMappingExposure,Zl=$l.getClearColor(),ey=$l.getClearAlpha();$l.toneMapping=LinearToneMapping,$l.toneMappingExposure=1,$l.outputEncoding=LinearEncoding;var Rm=cr.background;if(Rm&&Rm.isColor){Rm.convertSRGBToLinear();var ry=Math.max(Rm.r,Rm.g,Rm.b),_g=Math.min(Math.max(Math.ceil(Math.log2(ry)),-128),127);Rm=Rm.multiplyScalar(Math.pow(2,-_g));var ty=(_g+128)/255;$l.setClearColor(Rm,ty),cr.background=null}for(var ny=0;ny<6;ny++){var iy=ny%3;iy==0?(Po.up.set(0,To[ny],0),Po.lookAt(Io[ny],0,0)):iy==1?(Po.up.set(0,0,To[ny]),Po.lookAt(0,Io[ny],0)):(Po.up.set(0,To[ny],0),Po.lookAt(0,0,Io[ny])),_setViewport(Rn,iy*SIZE_MAX,ny>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),$l.setRenderTarget(Rn),$l.render(cr,Po)}$l.toneMapping=Xl,$l.toneMappingExposure=Yl,$l.outputEncoding=Wl,$l.setClearColor(Zl,ey)},_textureToCubeUV:function(cr,vn){var yn=this._renderer;cr.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var Rn=cr.isCubeTexture?this._cubemapShader:this._equirectShader,Bn=new Mesh(_lodPlanes[0],Rn),Co=Rn.uniforms;Co.envMap.value=cr,cr.isCubeTexture||Co.texelSize.value.set(1/cr.image.width,1/cr.image.height),Co.inputEncoding.value=ENCODINGS[cr.encoding],Co.outputEncoding.value=ENCODINGS[vn.texture.encoding],_setViewport(vn,0,0,3*SIZE_MAX,2*SIZE_MAX),yn.setRenderTarget(vn),yn.render(Bn,_flatCamera)},_applyPMREM:function(cr){var vn=this._renderer,yn=vn.autoClear;vn.autoClear=!1;for(var Rn=1;Rn<TOTAL_LODS;Rn++){var Bn=Math.sqrt(_sigmas[Rn]*_sigmas[Rn]-_sigmas[Rn-1]*_sigmas[Rn-1]),Co=_axisDirections[(Rn-1)%_axisDirections.length];this._blur(cr,Rn-1,Rn,Bn,Co)}vn.autoClear=yn},_blur:function(cr,vn,yn,Rn,Bn){var Co=this._pingPongRenderTarget;this._halfBlur(cr,Co,vn,yn,Rn,"latitudinal",Bn),this._halfBlur(Co,cr,yn,yn,Rn,"longitudinal",Bn)},_halfBlur:function(cr,vn,yn,Rn,Bn,Co,Po){var To=this._renderer,Io=this._blurMaterial;Co!=="latitudinal"&&Co!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var $l=3,Wl=new Mesh(_lodPlanes[Rn],Io),Xl=Io.uniforms,Yl=_sizeLods[yn]-1,Zl=isFinite(Bn)?Math.PI/(2*Yl):2*Math.PI/(2*MAX_SAMPLES-1),ey=Bn/Zl,Rm=isFinite(Bn)?1+Math.floor($l*ey):MAX_SAMPLES;Rm>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Bn}, is too large and will clip, as it requested ${Rm} samples when the maximum is set to ${MAX_SAMPLES}`);for(var ry=[],_g=0,ty=0;ty<MAX_SAMPLES;++ty){var oy=ty/ey,ny=Math.exp(-oy*oy/2);ry.push(ny),ty==0?_g+=ny:ty<Rm&&(_g+=2*ny)}for(var ty=0;ty<ry.length;ty++)ry[ty]=ry[ty]/_g;Xl.envMap.value=cr.texture,Xl.samples.value=Rm,Xl.weights.value=ry,Xl.latitudinal.value=Co==="latitudinal",Po&&(Xl.poleAxis.value=Po),Xl.dTheta.value=Zl,Xl.mipInt.value=LOD_MAX-yn,Xl.inputEncoding.value=ENCODINGS[cr.texture.encoding],Xl.outputEncoding.value=ENCODINGS[cr.texture.encoding];var iy=_sizeLods[Rn],oy=3*Math.max(0,SIZE_MAX-2*iy),ay=(Rn===0?0:2*SIZE_MAX)+2*iy*(Rn>LOD_MAX-LOD_MIN?Rn-LOD_MAX+LOD_MIN:0);_setViewport(vn,oy,ay,3*iy,2*iy),To.setRenderTarget(vn),To.render(Wl,_flatCamera)}};function _isLDR(cr){return cr===void 0||cr.type!==UnsignedByteType?!1:cr.encoding===LinearEncoding||cr.encoding===sRGBEncoding||cr.encoding===GammaEncoding}function _createPlanes(){for(var cr=[],vn=[],yn=[],Rn=LOD_MAX,Bn=0;Bn<TOTAL_LODS;Bn++){var Co=Math.pow(2,Rn);vn.push(Co);var Po=1/Co;Bn>LOD_MAX-LOD_MIN?Po=EXTRA_LOD_SIGMA[Bn-LOD_MAX+LOD_MIN-1]:Bn==0&&(Po=0),yn.push(Po);for(var To=1/(Co-1),Io=-To/2,$l=1+To/2,Wl=[Io,Io,$l,Io,$l,$l,Io,Io,$l,$l,Io,$l],Xl=6,Yl=6,Zl=3,ey=2,Rm=1,ry=new Float32Array(Zl*Yl*Xl),_g=new Float32Array(ey*Yl*Xl),ty=new Float32Array(Rm*Yl*Xl),ny=0;ny<Xl;ny++){var iy=ny%3*2/3-1,oy=ny>2?0:-1,ay=[iy,oy,0,iy+2/3,oy,0,iy+2/3,oy+1,0,iy,oy,0,iy+2/3,oy+1,0,iy,oy+1,0];ry.set(ay,Zl*Yl*ny),_g.set(Wl,ey*Yl*ny);var uy=[ny,ny,ny,ny,ny,ny];ty.set(uy,Rm*Yl*ny)}var hy=new BufferGeometry;hy.setAttribute("position",new BufferAttribute(ry,Zl)),hy.setAttribute("uv",new BufferAttribute(_g,ey)),hy.setAttribute("faceIndex",new BufferAttribute(ty,Rm)),cr.push(hy),Rn>LOD_MIN&&Rn--}return{_lodPlanes:cr,_sizeLods:vn,_sigmas:yn}}function _createRenderTarget(cr){var vn=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,cr);return vn.texture.mapping=CubeUVReflectionMapping,vn.texture.name="PMREM.cubeUv",vn.scissorTest=!0,vn}function _setViewport(cr,vn,yn,Rn,Bn){cr.viewport.set(vn,yn,Rn,Bn),cr.scissor.set(vn,yn,Rn,Bn)}function _getBlurShader(cr){var vn=new Float32Array(cr),yn=new Vector3(0,1,0),Rn=new RawShaderMaterial({defines:{n:cr},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:vn},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:yn},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return Rn.type="SphericalGaussianBlur",Rn}function _getEquirectShader(){var cr=new Vector2(1,1),vn=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:cr},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return vn.type="EquirectangularToCubeUV",vn}function _getCubemapShader(){var cr=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return cr.type="CubemapToCubeUV",cr}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}Curve.create=function(cr,vn){return console.log("THREE.Curve.create() has been deprecated"),cr.prototype=Object.create(Curve.prototype),cr.prototype.constructor=cr,cr.prototype.getPoint=vn,cr};Object.assign(CurvePath.prototype,{createPointsGeometry:function(cr){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var vn=this.getPoints(cr);return this.createGeometry(vn)},createSpacedPointsGeometry:function(cr){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var vn=this.getSpacedPoints(cr);return this.createGeometry(vn)},createGeometry:function(cr){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var vn=new Geometry,yn=0,Rn=cr.length;yn<Rn;yn++){var Bn=cr[yn];vn.vertices.push(new Vector3(Bn.x,Bn.y,Bn.z||0))}return vn}});Object.assign(Path.prototype,{fromPoints:function(cr){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(cr)}});Object.create(CatmullRomCurve3.prototype);Object.create(CatmullRomCurve3.prototype);function Spline(cr){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,cr),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Loader.prototype,{extractUrlBase:function(cr){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(cr)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(ObjectLoader.prototype,{setTexturePath:function(cr){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(cr)}});Object.assign(Box2.prototype,{center:function(cr){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(cr)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(cr){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(cr)},size:function(cr){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(cr)}});Object.assign(Box3.prototype,{center:function(cr){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(cr)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(cr){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(cr)},isIntersectionSphere:function(cr){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(cr)},size:function(cr){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(cr)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(cr){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(cr)};Line3.prototype.center=function(cr){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(cr)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(cr){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(cr)},nextPowerOfTwo:function(cr){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(cr)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(cr,vn){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(cr,vn)},multiplyVector3:function(cr){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),cr.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(cr){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),cr.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(cr){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(cr)},flattenToArrayOffset:function(cr,vn){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(cr,vn)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(cr){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(cr)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(cr){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),cr.applyMatrix4(this)},multiplyVector4:function(cr){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),cr.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(cr){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),cr.transformDirection(this)},crossVector:function(cr){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),cr.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(cr){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),cr.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(cr,vn,yn,Rn,Bn,Co){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(cr,vn,Rn,yn,Bn,Co)}});Plane.prototype.isIntersectionLine=function(cr){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(cr)};Quaternion.prototype.multiplyVector3=function(cr){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),cr.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(cr){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(cr)},isIntersectionPlane:function(cr){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(cr)},isIntersectionSphere:function(cr){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(cr)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(cr,vn){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(cr,vn)},midpoint:function(cr){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(cr)},normal:function(cr){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(cr)},plane:function(cr){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(cr)}});Object.assign(Triangle,{barycoordFromPoint:function(cr,vn,yn,Rn,Bn){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(cr,vn,yn,Rn,Bn)},normal:function(cr,vn,yn,Rn){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(cr,vn,yn,Rn)}});Object.assign(Shape.prototype,{extractAllPoints:function(cr){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(cr)},extrude:function(cr){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,cr)},makeGeometry:function(cr){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,cr)}});Object.assign(Vector2.prototype,{fromAttribute:function(cr,vn,yn){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(cr,vn,yn)},distanceToManhattan:function(cr){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(cr)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(cr){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(cr)},getScaleFromMatrix:function(cr){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(cr)},getColumnFromMatrix:function(cr,vn){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(vn,cr)},applyProjection:function(cr){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(cr)},fromAttribute:function(cr,vn,yn){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(cr,vn,yn)},distanceToManhattan:function(cr){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(cr)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(cr,vn,yn){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(cr,vn,yn)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(cr){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(cr)}});Object.assign(Object3D.prototype,{getChildByName:function(cr){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(cr)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(cr,vn){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(vn,cr)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(cr){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(cr)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(cr){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=cr}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(cr){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=cr}});PerspectiveCamera.prototype.setLens=function(cr,vn){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),vn!==void 0&&(this.filmGauge=vn),this.setFocalLength(cr)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(cr){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=cr}},shadowCameraLeft:{set:function(cr){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=cr}},shadowCameraRight:{set:function(cr){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=cr}},shadowCameraTop:{set:function(cr){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=cr}},shadowCameraBottom:{set:function(cr){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=cr}},shadowCameraNear:{set:function(cr){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=cr}},shadowCameraFar:{set:function(cr){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=cr}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(cr){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=cr}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(cr){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=cr}},shadowMapHeight:{set:function(cr){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=cr}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(cr){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(cr===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(cr){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(cr)},addAttribute:function(cr,vn){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(vn&&vn.isBufferAttribute)&&!(vn&&vn.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(cr,new BufferAttribute(arguments[1],arguments[2]))):cr==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(vn),this):this.setAttribute(cr,vn)},addDrawCall:function(cr,vn,yn){yn!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(cr,vn)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(cr){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(cr)},applyMatrix:function(cr){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(cr)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(cr){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=cr}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(cr){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=cr}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(cr){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(cr)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(cr){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(cr===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(cr){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=cr===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(cr){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=cr}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(cr){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=cr}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(cr,vn,yn,Rn){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(cr),this.clear(vn,yn,Rn)},animate:function(cr){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(cr)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(cr){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(cr)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(cr){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=cr}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(cr){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=cr}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(cr){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=cr===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(cr){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=cr}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(cr){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=cr}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(cr){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=cr}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(cr){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=cr}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(cr){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=cr}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(cr){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=cr}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(cr){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=cr}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(cr){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=cr}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(cr){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=cr}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(cr){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=cr}}});Object.defineProperties(Audio$1.prototype,{load:{value:function(cr){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var vn=this,yn=new AudioLoader;return yn.load(cr,function(Rn){vn.setBuffer(Rn)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(cr,vn){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(cr,vn)};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(cr,vn,yn,Rn){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var Bn=new TextureLoader;Bn.setCrossOrigin(this.crossOrigin);var Co=Bn.load(cr,yn,void 0,Rn);return vn&&(Co.mapping=vn),Co};ImageUtils.loadTextureCube=function(cr,vn,yn,Rn){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var Bn=new CubeTextureLoader;Bn.setCrossOrigin(this.crossOrigin);var Co=Bn.load(cr,yn,void 0,Rn);return vn&&(Co.mapping=vn),Co};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(cr,vn){for(var yn=new Array(arguments.length-1),Rn=0,Bn=2,Co=!0;Bn<arguments.length;)yn[Rn++]=arguments[Bn++];return new Promise(function(To,Io){yn[Rn]=function(Wl){if(Co)if(Co=!1,Wl)Io(Wl);else{for(var Xl=new Array(arguments.length-1),Yl=0;Yl<Xl.length;)Xl[Yl++]=arguments[Yl];To.apply(null,Xl)}};try{cr.apply(vn||null,yn)}catch($l){Co&&(Co=!1,Io($l))}})}var base64$1={};(function(cr){var vn=cr;vn.length=function(To){var Io=To.length;if(!Io)return 0;for(var $l=0;--Io%4>1&&To.charAt(Io)==="=";)++$l;return Math.ceil(To.length*3)/4-$l};for(var yn=new Array(64),Rn=new Array(123),Bn=0;Bn<64;)Rn[yn[Bn]=Bn<26?Bn+65:Bn<52?Bn+71:Bn<62?Bn-4:Bn-59|43]=Bn++;vn.encode=function(To,Io,$l){for(var Wl=null,Xl=[],Yl=0,Zl=0,ey;Io<$l;){var Rm=To[Io++];switch(Zl){case 0:Xl[Yl++]=yn[Rm>>2],ey=(Rm&3)<<4,Zl=1;break;case 1:Xl[Yl++]=yn[ey|Rm>>4],ey=(Rm&15)<<2,Zl=2;break;case 2:Xl[Yl++]=yn[ey|Rm>>6],Xl[Yl++]=yn[Rm&63],Zl=0;break}Yl>8191&&((Wl||(Wl=[])).push(String.fromCharCode.apply(String,Xl)),Yl=0)}return Zl&&(Xl[Yl++]=yn[ey],Xl[Yl++]=61,Zl===1&&(Xl[Yl++]=61)),Wl?(Yl&&Wl.push(String.fromCharCode.apply(String,Xl.slice(0,Yl))),Wl.join("")):String.fromCharCode.apply(String,Xl.slice(0,Yl))};var Co="invalid encoding";vn.decode=function(To,Io,$l){for(var Wl=$l,Xl=0,Yl,Zl=0;Zl<To.length;){var ey=To.charCodeAt(Zl++);if(ey===61&&Xl>1)break;if((ey=Rn[ey])===void 0)throw Error(Co);switch(Xl){case 0:Yl=ey,Xl=1;break;case 1:Io[$l++]=Yl<<2|(ey&48)>>4,Yl=ey,Xl=2;break;case 2:Io[$l++]=(Yl&15)<<4|(ey&60)>>2,Yl=ey,Xl=3;break;case 3:Io[$l++]=(Yl&3)<<6|ey,Xl=0;break}}if(Xl===1)throw Error(Co);return $l-Wl},vn.test=function(To){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(To)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(vn,yn,Rn){return(this._listeners[vn]||(this._listeners[vn]=[])).push({fn:yn,ctx:Rn||this}),this};EventEmitter.prototype.off=function(vn,yn){if(vn===void 0)this._listeners={};else if(yn===void 0)this._listeners[vn]=[];else for(var Rn=this._listeners[vn],Bn=0;Bn<Rn.length;)Rn[Bn].fn===yn?Rn.splice(Bn,1):++Bn;return this};EventEmitter.prototype.emit=function(vn){var yn=this._listeners[vn];if(yn){for(var Rn=[],Bn=1;Bn<arguments.length;)Rn.push(arguments[Bn++]);for(Bn=0;Bn<yn.length;)yn[Bn].fn.apply(yn[Bn++].ctx,Rn)}return this};var float=factory(factory);function factory(cr){return typeof Float32Array!="undefined"?function(){var vn=new Float32Array([-0]),yn=new Uint8Array(vn.buffer),Rn=yn[3]===128;function Bn(Io,$l,Wl){vn[0]=Io,$l[Wl]=yn[0],$l[Wl+1]=yn[1],$l[Wl+2]=yn[2],$l[Wl+3]=yn[3]}function Co(Io,$l,Wl){vn[0]=Io,$l[Wl]=yn[3],$l[Wl+1]=yn[2],$l[Wl+2]=yn[1],$l[Wl+3]=yn[0]}cr.writeFloatLE=Rn?Bn:Co,cr.writeFloatBE=Rn?Co:Bn;function Po(Io,$l){return yn[0]=Io[$l],yn[1]=Io[$l+1],yn[2]=Io[$l+2],yn[3]=Io[$l+3],vn[0]}function To(Io,$l){return yn[3]=Io[$l],yn[2]=Io[$l+1],yn[1]=Io[$l+2],yn[0]=Io[$l+3],vn[0]}cr.readFloatLE=Rn?Po:To,cr.readFloatBE=Rn?To:Po}():function(){function vn(Rn,Bn,Co,Po){var To=Bn<0?1:0;if(To&&(Bn=-Bn),Bn===0)Rn(1/Bn>0?0:2147483648,Co,Po);else if(isNaN(Bn))Rn(2143289344,Co,Po);else if(Bn>34028234663852886e22)Rn((To<<31|2139095040)>>>0,Co,Po);else if(Bn<11754943508222875e-54)Rn((To<<31|Math.round(Bn/1401298464324817e-60))>>>0,Co,Po);else{var Io=Math.floor(Math.log(Bn)/Math.LN2),$l=Math.round(Bn*Math.pow(2,-Io)*8388608)&8388607;Rn((To<<31|Io+127<<23|$l)>>>0,Co,Po)}}cr.writeFloatLE=vn.bind(null,writeUintLE),cr.writeFloatBE=vn.bind(null,writeUintBE);function yn(Rn,Bn,Co){var Po=Rn(Bn,Co),To=(Po>>31)*2+1,Io=Po>>>23&255,$l=Po&8388607;return Io===255?$l?NaN:To*(1/0):Io===0?To*1401298464324817e-60*$l:To*Math.pow(2,Io-150)*($l+8388608)}cr.readFloatLE=yn.bind(null,readUintLE),cr.readFloatBE=yn.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var vn=new Float64Array([-0]),yn=new Uint8Array(vn.buffer),Rn=yn[7]===128;function Bn(Io,$l,Wl){vn[0]=Io,$l[Wl]=yn[0],$l[Wl+1]=yn[1],$l[Wl+2]=yn[2],$l[Wl+3]=yn[3],$l[Wl+4]=yn[4],$l[Wl+5]=yn[5],$l[Wl+6]=yn[6],$l[Wl+7]=yn[7]}function Co(Io,$l,Wl){vn[0]=Io,$l[Wl]=yn[7],$l[Wl+1]=yn[6],$l[Wl+2]=yn[5],$l[Wl+3]=yn[4],$l[Wl+4]=yn[3],$l[Wl+5]=yn[2],$l[Wl+6]=yn[1],$l[Wl+7]=yn[0]}cr.writeDoubleLE=Rn?Bn:Co,cr.writeDoubleBE=Rn?Co:Bn;function Po(Io,$l){return yn[0]=Io[$l],yn[1]=Io[$l+1],yn[2]=Io[$l+2],yn[3]=Io[$l+3],yn[4]=Io[$l+4],yn[5]=Io[$l+5],yn[6]=Io[$l+6],yn[7]=Io[$l+7],vn[0]}function To(Io,$l){return yn[7]=Io[$l],yn[6]=Io[$l+1],yn[5]=Io[$l+2],yn[4]=Io[$l+3],yn[3]=Io[$l+4],yn[2]=Io[$l+5],yn[1]=Io[$l+6],yn[0]=Io[$l+7],vn[0]}cr.readDoubleLE=Rn?Po:To,cr.readDoubleBE=Rn?To:Po}():function(){function vn(Rn,Bn,Co,Po,To,Io){var $l=Po<0?1:0;if($l&&(Po=-Po),Po===0)Rn(0,To,Io+Bn),Rn(1/Po>0?0:2147483648,To,Io+Co);else if(isNaN(Po))Rn(0,To,Io+Bn),Rn(2146959360,To,Io+Co);else if(Po>17976931348623157e292)Rn(0,To,Io+Bn),Rn(($l<<31|2146435072)>>>0,To,Io+Co);else{var Wl;if(Po<22250738585072014e-324)Wl=Po/5e-324,Rn(Wl>>>0,To,Io+Bn),Rn(($l<<31|Wl/4294967296)>>>0,To,Io+Co);else{var Xl=Math.floor(Math.log(Po)/Math.LN2);Xl===1024&&(Xl=1023),Wl=Po*Math.pow(2,-Xl),Rn(Wl*4503599627370496>>>0,To,Io+Bn),Rn(($l<<31|Xl+1023<<20|Wl*1048576&1048575)>>>0,To,Io+Co)}}}cr.writeDoubleLE=vn.bind(null,writeUintLE,0,4),cr.writeDoubleBE=vn.bind(null,writeUintBE,4,0);function yn(Rn,Bn,Co,Po,To){var Io=Rn(Po,To+Bn),$l=Rn(Po,To+Co),Wl=($l>>31)*2+1,Xl=$l>>>20&2047,Yl=4294967296*($l&1048575)+Io;return Xl===2047?Yl?NaN:Wl*(1/0):Xl===0?Wl*5e-324*Yl:Wl*Math.pow(2,Xl-1075)*(Yl+4503599627370496)}cr.readDoubleLE=yn.bind(null,readUintLE,0,4),cr.readDoubleBE=yn.bind(null,readUintBE,4,0)}(),cr}function writeUintLE(cr,vn,yn){vn[yn]=cr&255,vn[yn+1]=cr>>>8&255,vn[yn+2]=cr>>>16&255,vn[yn+3]=cr>>>24}function writeUintBE(cr,vn,yn){vn[yn]=cr>>>24,vn[yn+1]=cr>>>16&255,vn[yn+2]=cr>>>8&255,vn[yn+3]=cr&255}function readUintLE(cr,vn){return(cr[vn]|cr[vn+1]<<8|cr[vn+2]<<16|cr[vn+3]<<24)>>>0}function readUintBE(cr,vn){return(cr[vn]<<24|cr[vn+1]<<16|cr[vn+2]<<8|cr[vn+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(cr){}return null}var utf8$2={};(function(cr){var vn=cr;vn.length=function(Rn){for(var Bn=0,Co=0,Po=0;Po<Rn.length;++Po)Co=Rn.charCodeAt(Po),Co<128?Bn+=1:Co<2048?Bn+=2:(Co&64512)===55296&&(Rn.charCodeAt(Po+1)&64512)===56320?(++Po,Bn+=4):Bn+=3;return Bn},vn.read=function(Rn,Bn,Co){var Po=Co-Bn;if(Po<1)return"";for(var To=null,Io=[],$l=0,Wl;Bn<Co;)Wl=Rn[Bn++],Wl<128?Io[$l++]=Wl:Wl>191&&Wl<224?Io[$l++]=(Wl&31)<<6|Rn[Bn++]&63:Wl>239&&Wl<365?(Wl=((Wl&7)<<18|(Rn[Bn++]&63)<<12|(Rn[Bn++]&63)<<6|Rn[Bn++]&63)-65536,Io[$l++]=55296+(Wl>>10),Io[$l++]=56320+(Wl&1023)):Io[$l++]=(Wl&15)<<12|(Rn[Bn++]&63)<<6|Rn[Bn++]&63,$l>8191&&((To||(To=[])).push(String.fromCharCode.apply(String,Io)),$l=0);return To?($l&&To.push(String.fromCharCode.apply(String,Io.slice(0,$l))),To.join("")):String.fromCharCode.apply(String,Io.slice(0,$l))},vn.write=function(Rn,Bn,Co){for(var Po=Co,To,Io,$l=0;$l<Rn.length;++$l)To=Rn.charCodeAt($l),To<128?Bn[Co++]=To:To<2048?(Bn[Co++]=To>>6|192,Bn[Co++]=To&63|128):(To&64512)===55296&&((Io=Rn.charCodeAt($l+1))&64512)===56320?(To=65536+((To&1023)<<10)+(Io&1023),++$l,Bn[Co++]=To>>18|240,Bn[Co++]=To>>12&63|128,Bn[Co++]=To>>6&63|128,Bn[Co++]=To&63|128):(Bn[Co++]=To>>12|224,Bn[Co++]=To>>6&63|128,Bn[Co++]=To&63|128);return Co-Po}})(utf8$2);var pool_1=pool;function pool(cr,vn,yn){var Rn=yn||8192,Bn=Rn>>>1,Co=null,Po=Rn;return function(Io){if(Io<1||Io>Bn)return cr(Io);Po+Io>Rn&&(Co=cr(Rn),Po=0);var $l=vn.call(Co,Po,Po+=Io);return Po&7&&(Po=(Po|7)+1),$l}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(cr,vn){this.lo=cr>>>0,this.hi=vn>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function cr(vn){if(vn===0)return zero;var yn=vn<0;yn&&(vn=-vn);var Rn=vn>>>0,Bn=(vn-Rn)/4294967296>>>0;return yn&&(Bn=~Bn>>>0,Rn=~Rn>>>0,++Rn>4294967295&&(Rn=0,++Bn>4294967295&&(Bn=0))),new LongBits$2(Rn,Bn)};LongBits$2.from=function cr(vn){if(typeof vn=="number")return LongBits$2.fromNumber(vn);if(util$5.isString(vn))if(util$5.Long)vn=util$5.Long.fromString(vn);else return LongBits$2.fromNumber(parseInt(vn,10));return vn.low||vn.high?new LongBits$2(vn.low>>>0,vn.high>>>0):zero};LongBits$2.prototype.toNumber=function cr(vn){if(!vn&&this.hi>>>31){var yn=~this.lo+1>>>0,Rn=~this.hi>>>0;return yn||(Rn=Rn+1>>>0),-(yn+Rn*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function cr(vn){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(vn)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(vn)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function cr(vn){return vn===zeroHash?zero:new LongBits$2((charCodeAt.call(vn,0)|charCodeAt.call(vn,1)<<8|charCodeAt.call(vn,2)<<16|charCodeAt.call(vn,3)<<24)>>>0,(charCodeAt.call(vn,4)|charCodeAt.call(vn,5)<<8|charCodeAt.call(vn,6)<<16|charCodeAt.call(vn,7)<<24)>>>0)};LongBits$2.prototype.toHash=function cr(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function cr(){var vn=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^vn)>>>0,this.lo=(this.lo<<1^vn)>>>0,this};LongBits$2.prototype.zzDecode=function cr(){var vn=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^vn)>>>0,this.hi=(this.hi>>>1^vn)>>>0,this};LongBits$2.prototype.length=function cr(){var vn=this.lo,yn=(this.lo>>>28|this.hi<<4)>>>0,Rn=this.hi>>>24;return Rn===0?yn===0?vn<16384?vn<128?1:2:vn<2097152?3:4:yn<16384?yn<128?5:6:yn<2097152?7:8:Rn<128?9:10};(function(cr){var vn=cr;vn.asPromise=aspromise,vn.base64=base64$1,vn.EventEmitter=eventemitter,vn.float=float,vn.inquire=inquire_1,vn.utf8=utf8$2,vn.pool=pool_1,vn.LongBits=longbits,vn.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),vn.global=vn.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,vn.emptyArray=Object.freeze?Object.freeze([]):[],vn.emptyObject=Object.freeze?Object.freeze({}):{},vn.isInteger=Number.isInteger||function(Co){return typeof Co=="number"&&isFinite(Co)&&Math.floor(Co)===Co},vn.isString=function(Co){return typeof Co=="string"||Co instanceof String},vn.isObject=function(Co){return Co&&typeof Co=="object"},vn.isset=vn.isSet=function(Co,Po){var To=Co[Po];return To!=null&&Co.hasOwnProperty(Po)?typeof To!="object"||(Array.isArray(To)?To.length:Object.keys(To).length)>0:!1},vn.Buffer=function(){try{var Bn=vn.inquire("buffer").Buffer;return Bn.prototype.utf8Write?Bn:null}catch{return null}}(),vn._Buffer_from=null,vn._Buffer_allocUnsafe=null,vn.newBuffer=function(Co){return typeof Co=="number"?vn.Buffer?vn._Buffer_allocUnsafe(Co):new vn.Array(Co):vn.Buffer?vn._Buffer_from(Co):typeof Uint8Array=="undefined"?Co:new Uint8Array(Co)},vn.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,vn.Long=vn.global.dcodeIO&&vn.global.dcodeIO.Long||vn.global.Long||vn.inquire("long"),vn.key2Re=/^true|false|0|1$/,vn.key32Re=/^-?(?:0|[1-9][0-9]*)$/,vn.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,vn.longToHash=function(Co){return Co?vn.LongBits.from(Co).toHash():vn.LongBits.zeroHash},vn.longFromHash=function(Co,Po){var To=vn.LongBits.fromHash(Co);return vn.Long?vn.Long.fromBits(To.lo,To.hi,Po):To.toNumber(Boolean(Po))};function yn(Bn,Co,Po){for(var To=Object.keys(Co),Io=0;Io<To.length;++Io)(Bn[To[Io]]===void 0||!Po)&&(Bn[To[Io]]=Co[To[Io]]);return Bn}vn.merge=yn,vn.lcFirst=function(Co){return Co.charAt(0).toLowerCase()+Co.substring(1)};function Rn(Bn){function Co(Po,To){if(!(this instanceof Co))return new Co(Po,To);Object.defineProperty(this,"message",{get:function(){return Po}}),Error.captureStackTrace?Error.captureStackTrace(this,Co):Object.defineProperty(this,"stack",{value:new Error().stack||""}),To&&yn(this,To)}return Co.prototype=Object.create(Error.prototype,{constructor:{value:Co,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return Bn},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),Co}vn.newError=Rn,vn.ProtocolError=Rn("ProtocolError"),vn.oneOfGetter=function(Co){for(var Po={},To=0;To<Co.length;++To)Po[Co[To]]=1;return function(){for(var Io=Object.keys(this),$l=Io.length-1;$l>-1;--$l)if(Po[Io[$l]]===1&&this[Io[$l]]!==void 0&&this[Io[$l]]!==null)return Io[$l]}},vn.oneOfSetter=function(Co){return function(Po){for(var To=0;To<Co.length;++To)Co[To]!==Po&&delete this[Co[To]]}},vn.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},vn._configure=function(){var Bn=vn.Buffer;if(!Bn){vn._Buffer_from=vn._Buffer_allocUnsafe=null;return}vn._Buffer_from=Bn.from!==Uint8Array.from&&Bn.from||function(Po,To){return new Bn(Po,To)},vn._Buffer_allocUnsafe=Bn.allocUnsafe||function(Po){return new Bn(Po)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op$1(cr,vn,yn){this.fn=cr,this.len=vn,this.next=void 0,this.val=yn}function noop$1(){}function State(cr){this.head=cr.head,this.tail=cr.tail,this.len=cr.len,this.next=cr.states}function Writer$1(){this.len=0,this.head=new Op$1(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function cr(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function cr(vn){return new util$4.Array(vn)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function cr(vn,yn,Rn){return this.tail=this.tail.next=new Op$1(vn,yn,Rn),this.len+=yn,this};function writeByte(cr,vn,yn){vn[yn]=cr&255}function writeVarint32(cr,vn,yn){for(;cr>127;)vn[yn++]=cr&127|128,cr>>>=7;vn[yn]=cr}function VarintOp(cr,vn){this.len=cr,this.next=void 0,this.val=vn}VarintOp.prototype=Object.create(Op$1.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function cr(vn){return this.len+=(this.tail=this.tail.next=new VarintOp((vn=vn>>>0)<128?1:vn<16384?2:vn<2097152?3:vn<268435456?4:5,vn)).len,this};Writer$1.prototype.int32=function cr(vn){return vn<0?this._push(writeVarint64,10,LongBits$1.fromNumber(vn)):this.uint32(vn)};Writer$1.prototype.sint32=function cr(vn){return this.uint32((vn<<1^vn>>31)>>>0)};function writeVarint64(cr,vn,yn){for(;cr.hi;)vn[yn++]=cr.lo&127|128,cr.lo=(cr.lo>>>7|cr.hi<<25)>>>0,cr.hi>>>=7;for(;cr.lo>127;)vn[yn++]=cr.lo&127|128,cr.lo=cr.lo>>>7;vn[yn++]=cr.lo}Writer$1.prototype.uint64=function cr(vn){var yn=LongBits$1.from(vn);return this._push(writeVarint64,yn.length(),yn)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function cr(vn){var yn=LongBits$1.from(vn).zzEncode();return this._push(writeVarint64,yn.length(),yn)};Writer$1.prototype.bool=function cr(vn){return this._push(writeByte,1,vn?1:0)};function writeFixed32(cr,vn,yn){vn[yn]=cr&255,vn[yn+1]=cr>>>8&255,vn[yn+2]=cr>>>16&255,vn[yn+3]=cr>>>24}Writer$1.prototype.fixed32=function cr(vn){return this._push(writeFixed32,4,vn>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function cr(vn){var yn=LongBits$1.from(vn);return this._push(writeFixed32,4,yn.lo)._push(writeFixed32,4,yn.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function cr(vn){return this._push(util$4.float.writeFloatLE,4,vn)};Writer$1.prototype.double=function cr(vn){return this._push(util$4.float.writeDoubleLE,8,vn)};var writeBytes=util$4.Array.prototype.set?function cr(vn,yn,Rn){yn.set(vn,Rn)}:function cr(vn,yn,Rn){for(var Bn=0;Bn<vn.length;++Bn)yn[Rn+Bn]=vn[Bn]};Writer$1.prototype.bytes=function cr(vn){var yn=vn.length>>>0;if(!yn)return this._push(writeByte,1,0);if(util$4.isString(vn)){var Rn=Writer$1.alloc(yn=base64.length(vn));base64.decode(vn,Rn,0),vn=Rn}return this.uint32(yn)._push(writeBytes,yn,vn)};Writer$1.prototype.string=function cr(vn){var yn=utf8$1.length(vn);return yn?this.uint32(yn)._push(utf8$1.write,yn,vn):this._push(writeByte,1,0)};Writer$1.prototype.fork=function cr(){return this.states=new State(this),this.head=this.tail=new Op$1(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function cr(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function cr(){var vn=this.head,yn=this.tail,Rn=this.len;return this.reset().uint32(Rn),Rn&&(this.tail.next=vn.next,this.tail=yn,this.len+=Rn),this};Writer$1.prototype.finish=function cr(){for(var vn=this.head.next,yn=this.constructor.alloc(this.len),Rn=0;vn;)vn.fn(vn.val,yn,Rn),Rn+=vn.len,vn=vn.next;return yn};Writer$1._configure=function(cr){BufferWriter$1=cr,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(vn,yn,Rn){yn.set(vn,Rn)}:function(vn,yn,Rn){if(vn.copy)vn.copy(yn,Rn,0,vn.length);else for(var Bn=0;Bn<vn.length;)yn[Rn++]=vn[Bn++]}};BufferWriter.prototype.bytes=function cr(vn){util$3.isString(vn)&&(vn=util$3._Buffer_from(vn,"base64"));var yn=vn.length>>>0;return this.uint32(yn),yn&&this._push(BufferWriter.writeBytesBuffer,yn,vn),this};function writeStringBuffer(cr,vn,yn){cr.length<40?util$3.utf8.write(cr,vn,yn):vn.utf8Write?vn.utf8Write(cr,yn):vn.write(cr,yn)}BufferWriter.prototype.string=function cr(vn){var yn=util$3.Buffer.byteLength(vn);return this.uint32(yn),yn&&this._push(writeStringBuffer,yn,vn),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(cr,vn){return RangeError("index out of range: "+cr.pos+" + "+(vn||1)+" > "+cr.len)}function Reader$1(cr){this.buf=cr,this.pos=0,this.len=cr.length}var create_array=typeof Uint8Array!="undefined"?function cr(vn){if(vn instanceof Uint8Array||Array.isArray(vn))return new Reader$1(vn);throw Error("illegal buffer")}:function cr(vn){if(Array.isArray(vn))return new Reader$1(vn);throw Error("illegal buffer")},create=function cr(){return util$2.Buffer?function(yn){return(Reader$1.create=function(Bn){return util$2.Buffer.isBuffer(Bn)?new BufferReader$1(Bn):create_array(Bn)})(yn)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function cr(){var vn=4294967295;return function(){if(vn=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(vn=(vn|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(vn=(vn|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(vn=(vn|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(vn=(vn|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return vn;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return vn}}();Reader$1.prototype.int32=function cr(){return this.uint32()|0};Reader$1.prototype.sint32=function cr(){var vn=this.uint32();return vn>>>1^-(vn&1)|0};function readLongVarint(){var cr=new LongBits(0,0),vn=0;if(this.len-this.pos>4){for(;vn<4;++vn)if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<vn*7)>>>0,this.buf[this.pos++]<128)return cr;if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<28)>>>0,cr.hi=(cr.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return cr;vn=0}else{for(;vn<3;++vn){if(this.pos>=this.len)throw indexOutOfRange(this);if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<vn*7)>>>0,this.buf[this.pos++]<128)return cr}return cr.lo=(cr.lo|(this.buf[this.pos++]&127)<<vn*7)>>>0,cr}if(this.len-this.pos>4){for(;vn<5;++vn)if(cr.hi=(cr.hi|(this.buf[this.pos]&127)<<vn*7+3)>>>0,this.buf[this.pos++]<128)return cr}else for(;vn<5;++vn){if(this.pos>=this.len)throw indexOutOfRange(this);if(cr.hi=(cr.hi|(this.buf[this.pos]&127)<<vn*7+3)>>>0,this.buf[this.pos++]<128)return cr}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function cr(){return this.uint32()!==0};function readFixed32_end(cr,vn){return(cr[vn-4]|cr[vn-3]<<8|cr[vn-2]<<16|cr[vn-1]<<24)>>>0}Reader$1.prototype.fixed32=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var vn=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,vn};Reader$1.prototype.double=function cr(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var vn=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,vn};Reader$1.prototype.bytes=function cr(){var vn=this.uint32(),yn=this.pos,Rn=this.pos+vn;if(Rn>this.len)throw indexOutOfRange(this,vn);if(this.pos+=vn,Array.isArray(this.buf))return this.buf.slice(yn,Rn);if(yn===Rn){var Bn=util$2.Buffer;return Bn?Bn.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,yn,Rn)};Reader$1.prototype.string=function cr(){var vn=this.bytes();return utf8.read(vn,0,vn.length)};Reader$1.prototype.skip=function cr(vn){if(typeof vn=="number"){if(this.pos+vn>this.len)throw indexOutOfRange(this,vn);this.pos+=vn}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(cr){switch(cr){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(cr=this.uint32()&7)!==4;)this.skipType(cr);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+cr+" at offset "+this.pos)}return this};Reader$1._configure=function(cr){BufferReader$1=cr,Reader$1.create=create(),BufferReader$1._configure();var vn=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[vn](!1)},uint64:function(){return readLongVarint.call(this)[vn](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[vn](!1)},fixed64:function(){return readFixed64.call(this)[vn](!0)},sfixed64:function(){return readFixed64.call(this)[vn](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(cr){Reader.call(this,cr)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function cr(){var vn=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+vn,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+vn,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(cr,vn,yn){if(typeof cr!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=cr,this.requestDelimited=Boolean(vn),this.responseDelimited=Boolean(yn)}Service.prototype.rpcCall=function cr(vn,yn,Rn,Bn,Co){if(!Bn)throw TypeError("request must be specified");var Po=this;if(!Co)return util.asPromise(cr,Po,vn,yn,Rn,Bn);if(!Po.rpcImpl){setTimeout(function(){Co(Error("already ended"))},0);return}try{return Po.rpcImpl(vn,yn[Po.requestDelimited?"encodeDelimited":"encode"](Bn).finish(),function(Io,$l){if(Io)return Po.emit("error",Io,vn),Co(Io);if($l===null){Po.end(!0);return}if(!($l instanceof Rn))try{$l=Rn[Po.responseDelimited?"decodeDelimited":"decode"]($l)}catch(Wl){return Po.emit("error",Wl,vn),Co(Wl)}return Po.emit("data",$l,vn),Co(null,$l)})}catch(To){Po.emit("error",To,vn),setTimeout(function(){Co(To)},0);return}};Service.prototype.end=function cr(vn){return this.rpcImpl&&(vn||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(cr){var vn=cr;vn.Service=service})(rpc);var roots={};(function(cr){var vn=cr;vn.build="minimal",vn.Writer=writer,vn.BufferWriter=writer_buffer,vn.Reader=reader,vn.BufferReader=reader_buffer,vn.util=minimal$1,vn.rpc=rpc,vn.roots=roots,vn.configure=yn;function yn(){vn.util._configure(),vn.Writer._configure(vn.BufferWriter),vn.Reader._configure(vn.BufferReader)}yn()})(indexMinimal);var minimal=indexMinimal,Ro=Number(REVISION);if(Ro<115||Ro>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var le$3={},Se=Se||function(cr,vn){var yn={},Rn=yn.lib={},Bn=Rn.Base=function(){function Yl(){}return{extend:function(Zl){Yl.prototype=this;var ey=new Yl;return Zl&&ey.mixIn(Zl),ey.hasOwnProperty("init")||(ey.init=function(){ey.$super.init.apply(this,arguments)}),ey.init.prototype=ey,ey.$super=this,ey},create:function(){var Zl=this.extend();return Zl.init.apply(Zl,arguments),Zl},init:function(){},mixIn:function(Zl){for(var ey in Zl)Zl.hasOwnProperty(ey)&&(this[ey]=Zl[ey]);Zl.hasOwnProperty("toString")&&(this.toString=Zl.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Co=Rn.WordArray=Bn.extend({init:function(Yl,Zl){Yl=this.words=Yl||[],Zl!=vn?this.sigBytes=Zl:this.sigBytes=Yl.length*4},toString:function(Yl){return(Yl||To).stringify(this)},concat:function(Yl){var Zl=this.words,ey=Yl.words,Rm=this.sigBytes,ry=Yl.sigBytes;if(this.clamp(),Rm%4)for(var _g=0;_g<ry;_g++){var ty=ey[_g>>>2]>>>24-_g%4*8&255;Zl[Rm+_g>>>2]|=ty<<24-(Rm+_g)%4*8}else for(var _g=0;_g<ry;_g+=4)Zl[Rm+_g>>>2]=ey[_g>>>2];return this.sigBytes+=ry,this},clamp:function(){var Yl=this.words,Zl=this.sigBytes;Yl[Zl>>>2]&=4294967295<<32-Zl%4*8,Yl.length=cr.ceil(Zl/4)},clone:function(){var Yl=Bn.clone.call(this);return Yl.words=this.words.slice(0),Yl},random:function(Yl){for(var Zl=[],ey=0;ey<Yl;ey+=4)Zl.push(cr.random()*4294967296|0);return new Co.init(Zl,Yl)}}),Po=yn.enc={},To=Po.Hex={stringify:function(Yl){for(var Zl=Yl.words,ey=Yl.sigBytes,Rm=[],ry=0;ry<ey;ry++){var _g=Zl[ry>>>2]>>>24-ry%4*8&255;Rm.push((_g>>>4).toString(16)),Rm.push((_g&15).toString(16))}return Rm.join("")},parse:function(Yl){for(var Zl=Yl.length,ey=[],Rm=0;Rm<Zl;Rm+=2)ey[Rm>>>3]|=parseInt(Yl.substr(Rm,2),16)<<24-Rm%8*4;return new Co.init(ey,Zl/2)}},Io=Po.Latin1={stringify:function(Yl){for(var Zl=Yl.words,ey=Yl.sigBytes,Rm=[],ry=0;ry<ey;ry++){var _g=Zl[ry>>>2]>>>24-ry%4*8&255;Rm.push(String.fromCharCode(_g))}return Rm.join("")},parse:function(Yl){for(var Zl=Yl.length,ey=[],Rm=0;Rm<Zl;Rm++)ey[Rm>>>2]|=(Yl.charCodeAt(Rm)&255)<<24-Rm%4*8;return new Co.init(ey,Zl)}},$l=Po.Utf8={stringify:function(Yl){try{return decodeURIComponent(escape(Io.stringify(Yl)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Yl){return Io.parse(unescape(encodeURIComponent(Yl)))}},Wl=Rn.BufferedBlockAlgorithm=Bn.extend({reset:function(){this._data=new Co.init,this._nDataBytes=0},_append:function(Yl){typeof Yl=="string"&&(Yl=$l.parse(Yl)),this._data.concat(Yl),this._nDataBytes+=Yl.sigBytes},_process:function(Yl){var Zl=this._data,ey=Zl.words,Rm=Zl.sigBytes,ry=this.blockSize,_g=ry*4,ty=Rm/_g;Yl?ty=cr.ceil(ty):ty=cr.max((ty|0)-this._minBufferSize,0);var ny=ty*ry,iy=cr.min(ny*4,Rm);if(ny){for(var oy=0;oy<ny;oy+=ry)this._doProcessBlock(ey,oy);var ay=ey.splice(0,ny);Zl.sigBytes-=iy}return new Co.init(ay,iy)},clone:function(){var Yl=Bn.clone.call(this);return Yl._data=this._data.clone(),Yl},_minBufferSize:0});Rn.Hasher=Wl.extend({cfg:Bn.extend(),init:function(Yl){this.cfg=this.cfg.extend(Yl),this.reset()},reset:function(){Wl.reset.call(this),this._doReset()},update:function(Yl){return this._append(Yl),this._process(),this},finalize:function(Yl){Yl&&this._append(Yl);var Zl=this._doFinalize();return Zl},blockSize:512/32,_createHelper:function(Yl){return function(Zl,ey){return new Yl.init(ey).finalize(Zl)}},_createHmacHelper:function(Yl){return function(Zl,ey){return new Xl.HMAC.init(Yl,ey).finalize(Zl)}}});var Xl=yn.algo={};return yn}(Math);(function(cr){for(var vn=Se,Zl=vn.lib,yn=Zl.WordArray,Rn=Zl.Hasher,Zl=vn.algo,Bn=[],Co=[],Po=function(Rm){return 4294967296*(Rm-(Rm|0))|0},To=2,Io=0;64>Io;){var $l;e:{$l=To;for(var Wl=cr.sqrt($l),Xl=2;Xl<=Wl;Xl++)if(!($l%Xl)){$l=!1;break e}$l=!0}$l&&(8>Io&&(Bn[Io]=Po(cr.pow(To,.5))),Co[Io]=Po(cr.pow(To,1/3)),Io++),To++}var Yl=[],Zl=Zl.SHA256=Rn.extend({_doReset:function(){this._hash=new yn.init(Bn.slice(0))},_doProcessBlock:function(ey,Rm){for(var ry=this._hash.words,_g=ry[0],ty=ry[1],ny=ry[2],iy=ry[3],oy=ry[4],ay=ry[5],uy=ry[6],hy=ry[7],my=0;64>my;my++){if(16>my)Yl[my]=ey[Rm+my]|0;else{var ly=Yl[my-15],sy=Yl[my-2];Yl[my]=((ly<<25|ly>>>7)^(ly<<14|ly>>>18)^ly>>>3)+Yl[my-7]+((sy<<15|sy>>>17)^(sy<<13|sy>>>19)^sy>>>10)+Yl[my-16]}ly=hy+((oy<<26|oy>>>6)^(oy<<21|oy>>>11)^(oy<<7|oy>>>25))+(oy&ay^~oy&uy)+Co[my]+Yl[my],sy=((_g<<30|_g>>>2)^(_g<<19|_g>>>13)^(_g<<10|_g>>>22))+(_g&ty^_g&ny^ty&ny),hy=uy,uy=ay,ay=oy,oy=iy+ly|0,iy=ny,ny=ty,ty=_g,_g=ly+sy|0}ry[0]=ry[0]+_g|0,ry[1]=ry[1]+ty|0,ry[2]=ry[2]+ny|0,ry[3]=ry[3]+iy|0,ry[4]=ry[4]+oy|0,ry[5]=ry[5]+ay|0,ry[6]=ry[6]+uy|0,ry[7]=ry[7]+hy|0},_doFinalize:function(){var ey=this._data,Rm=ey.words,ry=8*this._nDataBytes,_g=8*ey.sigBytes;return Rm[_g>>>5]|=128<<24-_g%32,Rm[(_g+64>>>9<<4)+14]=cr.floor(ry/4294967296),Rm[(_g+64>>>9<<4)+15]=ry,ey.sigBytes=4*Rm.length,this._process(),this._hash},clone:function(){var ey=Rn.clone.call(this);return ey._hash=this._hash.clone(),ey}});vn.SHA256=Rn._createHelper(Zl),vn.HmacSHA256=Rn._createHmacHelper(Zl)})(Math);Se.lib.Cipher||function(cr){var Zl=Se,vn=Zl.lib,yn=vn.Base,Rn=vn.WordArray,Bn=vn.BufferedBlockAlgorithm,Co=Zl.enc.Base64,Po=Zl.algo.EvpKDF,To=vn.Cipher=Bn.extend({cfg:yn.extend(),createEncryptor:function(Rm,ry){return this.create(this._ENC_XFORM_MODE,Rm,ry)},createDecryptor:function(Rm,ry){return this.create(this._DEC_XFORM_MODE,Rm,ry)},init:function(Rm,ry,_g){this.cfg=this.cfg.extend(_g),this._xformMode=Rm,this._key=ry,this.reset()},reset:function(){Bn.reset.call(this),this._doReset()},process:function(Rm){return this._append(Rm),this._process()},finalize:function(Rm){return Rm&&this._append(Rm),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(Rm){return{encrypt:function(ry,_g,ty){return(typeof _g=="string"?ey:Yl).encrypt(Rm,ry,_g,ty)},decrypt:function(ry,_g,ty){return(typeof _g=="string"?ey:Yl).decrypt(Rm,ry,_g,ty)}}}});vn.StreamCipher=To.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Xl=Zl.mode={},Io=function(Rm,ry,_g){var ty=this._iv;ty?this._iv=cr:ty=this._prevBlock;for(var ny=0;ny<_g;ny++)Rm[ry+ny]^=ty[ny]},$l=(vn.BlockCipherMode=yn.extend({createEncryptor:function(Rm,ry){return this.Encryptor.create(Rm,ry)},createDecryptor:function(Rm,ry){return this.Decryptor.create(Rm,ry)},init:function(Rm,ry){this._cipher=Rm,this._iv=ry}})).extend();$l.Encryptor=$l.extend({processBlock:function(Rm,ry){var _g=this._cipher,ty=_g.blockSize;Io.call(this,Rm,ry,ty),_g.encryptBlock(Rm,ry),this._prevBlock=Rm.slice(ry,ry+ty)}}),$l.Decryptor=$l.extend({processBlock:function(Rm,ry){var _g=this._cipher,ty=_g.blockSize,ny=Rm.slice(ry,ry+ty);_g.decryptBlock(Rm,ry),Io.call(this,Rm,ry,ty),this._prevBlock=ny}}),Xl=Xl.CBC=$l,$l=(Zl.pad={}).Pkcs7={pad:function(Rm,ry){for(var _g=4*ry,_g=_g-Rm.sigBytes%_g,ty=_g<<24|_g<<16|_g<<8|_g,ny=[],iy=0;iy<_g;iy+=4)ny.push(ty);_g=Rn.create(ny,_g),Rm.concat(_g)},unpad:function(Rm){Rm.sigBytes-=Rm.words[Rm.sigBytes-1>>>2]&255}},vn.BlockCipher=To.extend({cfg:To.cfg.extend({mode:Xl,padding:$l}),reset:function(){To.reset.call(this);var ry=this.cfg,Rm=ry.iv,ry=ry.mode;if(this._xformMode==this._ENC_XFORM_MODE)var _g=ry.createEncryptor;else _g=ry.createDecryptor,this._minBufferSize=1;this._mode=_g.call(ry,this,Rm&&Rm.words)},_doProcessBlock:function(Rm,ry){this._mode.processBlock(Rm,ry)},_doFinalize:function(){var Rm=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){Rm.pad(this._data,this.blockSize);var ry=this._process(!0)}else ry=this._process(!0),Rm.unpad(ry);return ry},blockSize:4});var Wl=vn.CipherParams=yn.extend({init:function(Rm){this.mixIn(Rm)},toString:function(Rm){return(Rm||this.formatter).stringify(this)}}),Xl=(Zl.format={}).OpenSSL={stringify:function(Rm){var ry=Rm.ciphertext;return Rm=Rm.salt,(Rm?Rn.create([1398893684,1701076831]).concat(Rm).concat(ry):ry).toString(Co)},parse:function(Rm){Rm=Co.parse(Rm);var ry=Rm.words;if(ry[0]==1398893684&&ry[1]==1701076831){var _g=Rn.create(ry.slice(2,4));ry.splice(0,4),Rm.sigBytes-=16}return Wl.create({ciphertext:Rm,salt:_g})}},Yl=vn.SerializableCipher=yn.extend({cfg:yn.extend({format:Xl}),encrypt:function(Rm,ry,_g,ty){ty=this.cfg.extend(ty);var ny=Rm.createEncryptor(_g,ty);return ry=ny.finalize(ry),ny=ny.cfg,Wl.create({ciphertext:ry,key:_g,iv:ny.iv,algorithm:Rm,mode:ny.mode,padding:ny.padding,blockSize:Rm.blockSize,formatter:ty.format})},decrypt:function(Rm,ry,_g,ty){return ty=this.cfg.extend(ty),ry=this._parse(ry,ty.format),Rm.createDecryptor(_g,ty).finalize(ry.ciphertext)},_parse:function(Rm,ry){return typeof Rm=="string"?ry.parse(Rm,this):Rm}}),Zl=(Zl.kdf={}).OpenSSL={execute:function(Rm,ry,_g,ty){return ty||(ty=Rn.random(8)),Rm=Po.create({keySize:ry+_g}).compute(Rm,ty),_g=Rn.create(Rm.words.slice(ry),4*_g),Rm.sigBytes=4*ry,Wl.create({key:Rm,iv:_g,salt:ty})}},ey=vn.PasswordBasedCipher=Yl.extend({cfg:Yl.cfg.extend({kdf:Zl}),encrypt:function(Rm,ry,_g,ty){return ty=this.cfg.extend(ty),_g=ty.kdf.execute(_g,Rm.keySize,Rm.ivSize),ty.iv=_g.iv,Rm=Yl.encrypt.call(this,Rm,ry,_g.key,ty),Rm.mixIn(_g),Rm},decrypt:function(Rm,ry,_g,ty){return ty=this.cfg.extend(ty),ry=this._parse(ry,ty.format),_g=ty.kdf.execute(_g,Rm.keySize,Rm.ivSize,ry.salt),ty.iv=_g.iv,Yl.decrypt.call(this,Rm,ry,_g.key,ty)}})}();(function(){for(var cr=Se,vn=cr.lib.BlockCipher,ay=cr.algo,yn=[],Rn=[],Bn=[],Co=[],Po=[],To=[],Io=[],$l=[],Wl=[],Xl=[],Yl=[],Zl=0;256>Zl;Zl++)Yl[Zl]=128>Zl?Zl<<1:Zl<<1^283;for(var ey=0,Rm=0,Zl=0;256>Zl;Zl++){var ry=Rm^Rm<<1^Rm<<2^Rm<<3^Rm<<4,ry=ry>>>8^ry&255^99;yn[ey]=ry,Rn[ry]=ey;var _g=Yl[ey],ty=Yl[_g],ny=Yl[ty],iy=257*Yl[ry]^16843008*ry;Bn[ey]=iy<<24|iy>>>8,Co[ey]=iy<<16|iy>>>16,Po[ey]=iy<<8|iy>>>24,To[ey]=iy,iy=16843009*ny^65537*ty^257*_g^16843008*ey,Io[ry]=iy<<24|iy>>>8,$l[ry]=iy<<16|iy>>>16,Wl[ry]=iy<<8|iy>>>24,Xl[ry]=iy,ey?(ey=_g^Yl[Yl[Yl[ny^_g]]],Rm^=Yl[Yl[Rm]]):ey=Rm=1}var oy=[0,1,2,4,8,16,32,64,128,27,54],ay=ay.AES=vn.extend({_doReset:function(){for(var my=this._key,uy=my.words,hy=my.sigBytes/4,my=4*((this._nRounds=hy+6)+1),ly=this._keySchedule=[],sy=0;sy<my;sy++)if(sy<hy)ly[sy]=uy[sy];else{var cy=ly[sy-1];sy%hy?6<hy&&sy%hy==4&&(cy=yn[cy>>>24]<<24|yn[cy>>>16&255]<<16|yn[cy>>>8&255]<<8|yn[cy&255]):(cy=cy<<8|cy>>>24,cy=yn[cy>>>24]<<24|yn[cy>>>16&255]<<16|yn[cy>>>8&255]<<8|yn[cy&255],cy^=oy[sy/hy|0]<<24),ly[sy]=ly[sy-hy]^cy}for(uy=this._invKeySchedule=[],hy=0;hy<my;hy++)sy=my-hy,cy=hy%4?ly[sy]:ly[sy-4],uy[hy]=4>hy||4>=sy?cy:Io[yn[cy>>>24]]^$l[yn[cy>>>16&255]]^Wl[yn[cy>>>8&255]]^Xl[yn[cy&255]]},encryptBlock:function(uy,hy){this._doCryptBlock(uy,hy,this._keySchedule,Bn,Co,Po,To,yn)},decryptBlock:function(uy,hy){var my=uy[hy+1];uy[hy+1]=uy[hy+3],uy[hy+3]=my,this._doCryptBlock(uy,hy,this._invKeySchedule,Io,$l,Wl,Xl,Rn),my=uy[hy+1],uy[hy+1]=uy[hy+3],uy[hy+3]=my},_doCryptBlock:function(uy,hy,my,ly,sy,cy,fy,vy){for(var dy=this._nRounds,Dy=uy[hy]^my[0],qy=uy[hy+1]^my[1],Xy=uy[hy+2]^my[2],Py=uy[hy+3]^my[3],Ay=4,gy=1;gy<dy;gy++)var wy=ly[Dy>>>24]^sy[qy>>>16&255]^cy[Xy>>>8&255]^fy[Py&255]^my[Ay++],Cy=ly[qy>>>24]^sy[Xy>>>16&255]^cy[Py>>>8&255]^fy[Dy&255]^my[Ay++],My=ly[Xy>>>24]^sy[Py>>>16&255]^cy[Dy>>>8&255]^fy[qy&255]^my[Ay++],Py=ly[Py>>>24]^sy[Dy>>>16&255]^cy[qy>>>8&255]^fy[Xy&255]^my[Ay++],Dy=wy,qy=Cy,Xy=My;wy=(vy[Dy>>>24]<<24|vy[qy>>>16&255]<<16|vy[Xy>>>8&255]<<8|vy[Py&255])^my[Ay++],Cy=(vy[qy>>>24]<<24|vy[Xy>>>16&255]<<16|vy[Py>>>8&255]<<8|vy[Dy&255])^my[Ay++],My=(vy[Xy>>>24]<<24|vy[Py>>>16&255]<<16|vy[Dy>>>8&255]<<8|vy[qy&255])^my[Ay++],Py=(vy[Py>>>24]<<24|vy[Dy>>>16&255]<<16|vy[qy>>>8&255]<<8|vy[Xy&255])^my[Ay++],uy[hy]=wy,uy[hy+1]=Cy,uy[hy+2]=My,uy[hy+3]=Py},keySize:8});cr.AES=vn._createHelper(ay)})();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var pn;function me$2(cr,vn,yn){cr!=null&&(typeof cr=="number"?this.fromNumber(cr,vn,yn):vn==null&&typeof cr!="string"?this.fromString(cr,256):this.fromString(cr,vn))}function ur$1(){return new me$2(null)}function tc(cr,vn,yn,Rn,Bn,Co){for(;--Co>=0;){var Po=vn*this[cr++]+yn[Rn]+Bn;Bn=Math.floor(Po/67108864),yn[Rn++]=Po&67108863}return Bn}function rc(cr,vn,yn,Rn,Bn,Co){for(var Po=vn&32767,To=vn>>15;--Co>=0;){var Io=this[cr]&32767,$l=this[cr++]>>15,Wl=To*Io+$l*Po;Io=Po*Io+((Wl&32767)<<15)+yn[Rn]+(Bn&1073741823),Bn=(Io>>>30)+(Wl>>>15)+To*$l+(Bn>>>30),yn[Rn++]=Io&1073741823}return Bn}function nc(cr,vn,yn,Rn,Bn,Co){for(var Po=vn&16383,To=vn>>14;--Co>=0;){var Io=this[cr]&16383,$l=this[cr++]>>14,Wl=To*Io+$l*Po;Io=Po*Io+((Wl&16383)<<14)+yn[Rn]+Bn,Bn=(Io>>28)+(Wl>>14)+To*$l,yn[Rn++]=Io&268435455}return Bn}typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(me$2.prototype.am=rc,pn=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(me$2.prototype.am=tc,pn=26):(me$2.prototype.am=nc,pn=28);me$2.prototype.DB=pn;me$2.prototype.DM=(1<<pn)-1;me$2.prototype.DV=1<<pn;var _0=52;me$2.prototype.FV=Math.pow(2,_0);me$2.prototype.F1=_0-pn;me$2.prototype.F2=2*pn-_0;var ic="0123456789abcdefghijklmnopqrstuvwxyz",ma=new Array,Yn,or;Yn=48;for(or=0;or<=9;++or)ma[Yn++]=or;Yn=97;for(or=10;or<36;++or)ma[Yn++]=or;Yn=65;for(or=10;or<36;++or)ma[Yn++]=or;function Hr$1(cr){return ic.charAt(cr)}function ac(cr,vn){var yn=ma[cr.charCodeAt(vn)];return yn==null?-1:yn}function oc(cr){for(var vn=this.t-1;vn>=0;--vn)cr[vn]=this[vn];cr.t=this.t,cr.s=this.s}function sc(cr){this.t=1,this.s=cr<0?-1:0,cr>0?this[0]=cr:cr<-1?this[0]=cr+this.DV:this.t=0}function J0(cr){var vn=ur$1();return vn.fromInt(cr),vn}function uc(cr,vn){var yn;if(vn==16)yn=4;else if(vn==8)yn=3;else if(vn==256)yn=8;else if(vn==2)yn=1;else if(vn==32)yn=5;else if(vn==4)yn=2;else{this.fromRadix(cr,vn);return}this.t=0,this.s=0;for(var Rn=cr.length,Bn=!1,Co=0;--Rn>=0;){var Po=yn==8?cr[Rn]&255:ac(cr,Rn);if(Po<0){cr.charAt(Rn)=="-"&&(Bn=!0);continue}Bn=!1,Co==0?this[this.t++]=Po:Co+yn>this.DB?(this[this.t-1]|=(Po&(1<<this.DB-Co)-1)<<Co,this[this.t++]=Po>>this.DB-Co):this[this.t-1]|=Po<<Co,Co+=yn,Co>=this.DB&&(Co-=this.DB)}yn==8&&cr[0]&128&&(this.s=-1,Co>0&&(this[this.t-1]|=(1<<this.DB-Co)-1<<Co)),this.clamp(),Bn&&me$2.ZERO.subTo(this,this)}function lc(){for(var cr=this.s&this.DM;this.t>0&&this[this.t-1]==cr;)--this.t}function cc(cr){if(this.s<0)return"-"+this.negate().toString(cr);var vn;if(cr==16)vn=4;else if(cr==8)vn=3;else if(cr==2)vn=1;else if(cr==32)vn=5;else if(cr==4)vn=2;else return this.toRadix(cr);var yn=(1<<vn)-1,Rn,Bn=!1,Co="",Po=this.t,To=this.DB-Po*this.DB%vn;if(Po-- >0)for(To<this.DB&&(Rn=this[Po]>>To)>0&&(Bn=!0,Co=Hr$1(Rn));Po>=0;)To<vn?(Rn=(this[Po]&(1<<To)-1)<<vn-To,Rn|=this[--Po]>>(To+=this.DB-vn)):(Rn=this[Po]>>(To-=vn)&yn,To<=0&&(To+=this.DB,--Po)),Rn>0&&(Bn=!0),Bn&&(Co+=Hr$1(Rn));return Bn?Co:"0"}function fc(){var cr=ur$1();return me$2.ZERO.subTo(this,cr),cr}function dc(){return this.s<0?this.negate():this}function hc(cr){var vn=this.s-cr.s;if(vn!=0)return vn;var yn=this.t;if(vn=yn-cr.t,vn!=0)return this.s<0?-vn:vn;for(;--yn>=0;)if((vn=this[yn]-cr[yn])!=0)return vn;return 0}function K0(cr){var vn=1,yn;return(yn=cr>>>16)!=0&&(cr=yn,vn+=16),(yn=cr>>8)!=0&&(cr=yn,vn+=8),(yn=cr>>4)!=0&&(cr=yn,vn+=4),(yn=cr>>2)!=0&&(cr=yn,vn+=2),(yn=cr>>1)!=0&&(cr=yn,vn+=1),vn}function pc(){return this.t<=0?0:this.DB*(this.t-1)+K0(this[this.t-1]^this.s&this.DM)}function vc(cr,vn){var yn;for(yn=this.t-1;yn>=0;--yn)vn[yn+cr]=this[yn];for(yn=cr-1;yn>=0;--yn)vn[yn]=0;vn.t=this.t+cr,vn.s=this.s}function mc(cr,vn){for(var yn=cr;yn<this.t;++yn)vn[yn-cr]=this[yn];vn.t=Math.max(this.t-cr,0),vn.s=this.s}function Ac(cr,vn){var yn=cr%this.DB,Rn=this.DB-yn,Bn=(1<<Rn)-1,Co=Math.floor(cr/this.DB),Po=this.s<<yn&this.DM,To;for(To=this.t-1;To>=0;--To)vn[To+Co+1]=this[To]>>Rn|Po,Po=(this[To]&Bn)<<yn;for(To=Co-1;To>=0;--To)vn[To]=0;vn[Co]=Po,vn.t=this.t+Co+1,vn.s=this.s,vn.clamp()}function gc(cr,vn){vn.s=this.s;var yn=Math.floor(cr/this.DB);if(yn>=this.t){vn.t=0;return}var Rn=cr%this.DB,Bn=this.DB-Rn,Co=(1<<Rn)-1;vn[0]=this[yn]>>Rn;for(var Po=yn+1;Po<this.t;++Po)vn[Po-yn-1]|=(this[Po]&Co)<<Bn,vn[Po-yn]=this[Po]>>Rn;Rn>0&&(vn[this.t-yn-1]|=(this.s&Co)<<Bn),vn.t=this.t-yn,vn.clamp()}function yc(cr,vn){for(var yn=0,Rn=0,Bn=Math.min(cr.t,this.t);yn<Bn;)Rn+=this[yn]-cr[yn],vn[yn++]=Rn&this.DM,Rn>>=this.DB;if(cr.t<this.t){for(Rn-=cr.s;yn<this.t;)Rn+=this[yn],vn[yn++]=Rn&this.DM,Rn>>=this.DB;Rn+=this.s}else{for(Rn+=this.s;yn<cr.t;)Rn-=cr[yn],vn[yn++]=Rn&this.DM,Rn>>=this.DB;Rn-=cr.s}vn.s=Rn<0?-1:0,Rn<-1?vn[yn++]=this.DV+Rn:Rn>0&&(vn[yn++]=Rn),vn.t=yn,vn.clamp()}function bc(cr,vn){var yn=this.abs(),Rn=cr.abs(),Bn=yn.t;for(vn.t=Bn+Rn.t;--Bn>=0;)vn[Bn]=0;for(Bn=0;Bn<Rn.t;++Bn)vn[Bn+yn.t]=yn.am(0,Rn[Bn],vn,Bn,0,yn.t);vn.s=0,vn.clamp(),this.s!=cr.s&&me$2.ZERO.subTo(vn,vn)}function xc(cr){for(var vn=this.abs(),yn=cr.t=2*vn.t;--yn>=0;)cr[yn]=0;for(yn=0;yn<vn.t-1;++yn){var Rn=vn.am(yn,vn[yn],cr,2*yn,0,1);(cr[yn+vn.t]+=vn.am(yn+1,2*vn[yn],cr,2*yn+1,Rn,vn.t-yn-1))>=vn.DV&&(cr[yn+vn.t]-=vn.DV,cr[yn+vn.t+1]=1)}cr.t>0&&(cr[cr.t-1]+=vn.am(yn,vn[yn],cr,2*yn,0,1)),cr.s=0,cr.clamp()}function wc(cr,vn,yn){var Rn=cr.abs();if(!(Rn.t<=0)){var Bn=this.abs();if(Bn.t<Rn.t){vn!=null&&vn.fromInt(0),yn!=null&&this.copyTo(yn);return}yn==null&&(yn=ur$1());var Co=ur$1(),Po=this.s,To=cr.s,Io=this.DB-K0(Rn[Rn.t-1]);Io>0?(Rn.lShiftTo(Io,Co),Bn.lShiftTo(Io,yn)):(Rn.copyTo(Co),Bn.copyTo(yn));var $l=Co.t,Wl=Co[$l-1];if(Wl!=0){var Xl=Wl*(1<<this.F1)+($l>1?Co[$l-2]>>this.F2:0),Yl=this.FV/Xl,Zl=(1<<this.F1)/Xl,ey=1<<this.F2,Rm=yn.t,ry=Rm-$l,_g=vn==null?ur$1():vn;for(Co.dlShiftTo(ry,_g),yn.compareTo(_g)>=0&&(yn[yn.t++]=1,yn.subTo(_g,yn)),me$2.ONE.dlShiftTo($l,_g),_g.subTo(Co,Co);Co.t<$l;)Co[Co.t++]=0;for(;--ry>=0;){var ty=yn[--Rm]==Wl?this.DM:Math.floor(yn[Rm]*Yl+(yn[Rm-1]+ey)*Zl);if((yn[Rm]+=Co.am(0,ty,yn,ry,0,$l))<ty)for(Co.dlShiftTo(ry,_g),yn.subTo(_g,yn);yn[Rm]<--ty;)yn.subTo(_g,yn)}vn!=null&&(yn.drShiftTo($l,vn),Po!=To&&me$2.ZERO.subTo(vn,vn)),yn.t=$l,yn.clamp(),Io>0&&yn.rShiftTo(Io,yn),Po<0&&me$2.ZERO.subTo(yn,yn)}}}function Sc(cr){var vn=ur$1();return this.abs().divRemTo(cr,null,vn),this.s<0&&vn.compareTo(me$2.ZERO)>0&&cr.subTo(vn,vn),vn}function $n(cr){this.m=cr}function Mc(cr){return cr.s<0||cr.compareTo(this.m)>=0?cr.mod(this.m):cr}function Ec(cr){return cr}function Cc(cr){cr.divRemTo(this.m,null,cr)}function Ic(cr,vn,yn){cr.multiplyTo(vn,yn),this.reduce(yn)}function Tc(cr,vn){cr.squareTo(vn),this.reduce(vn)}$n.prototype.convert=Mc;$n.prototype.revert=Ec;$n.prototype.reduce=Cc;$n.prototype.mulTo=Ic;$n.prototype.sqrTo=Tc;function Pc(){if(this.t<1)return 0;var cr=this[0];if(!(cr&1))return 0;var vn=cr&3;return vn=vn*(2-(cr&15)*vn)&15,vn=vn*(2-(cr&255)*vn)&255,vn=vn*(2-((cr&65535)*vn&65535))&65535,vn=vn*(2-cr*vn%this.DV)%this.DV,vn>0?this.DV-vn:-vn}function ei(cr){this.m=cr,this.mp=cr.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<cr.DB-15)-1,this.mt2=2*cr.t}function Rc(cr){var vn=ur$1();return cr.abs().dlShiftTo(this.m.t,vn),vn.divRemTo(this.m,null,vn),cr.s<0&&vn.compareTo(me$2.ZERO)>0&&this.m.subTo(vn,vn),vn}function Bc(cr){var vn=ur$1();return cr.copyTo(vn),this.reduce(vn),vn}function Fc(cr){for(;cr.t<=this.mt2;)cr[cr.t++]=0;for(var vn=0;vn<this.m.t;++vn){var yn=cr[vn]&32767,Rn=yn*this.mpl+((yn*this.mph+(cr[vn]>>15)*this.mpl&this.um)<<15)&cr.DM;for(yn=vn+this.m.t,cr[yn]+=this.m.am(0,Rn,cr,vn,0,this.m.t);cr[yn]>=cr.DV;)cr[yn]-=cr.DV,cr[++yn]++}cr.clamp(),cr.drShiftTo(this.m.t,cr),cr.compareTo(this.m)>=0&&cr.subTo(this.m,cr)}function Lc(cr,vn){cr.squareTo(vn),this.reduce(vn)}function kc(cr,vn,yn){cr.multiplyTo(vn,yn),this.reduce(yn)}ei.prototype.convert=Rc;ei.prototype.revert=Bc;ei.prototype.reduce=Fc;ei.prototype.mulTo=kc;ei.prototype.sqrTo=Lc;function Oc(){return(this.t>0?this[0]&1:this.s)==0}function zc(cr,vn){if(cr>4294967295||cr<1)return me$2.ONE;var yn=ur$1(),Rn=ur$1(),Bn=vn.convert(this),Co=K0(cr)-1;for(Bn.copyTo(yn);--Co>=0;)if(vn.sqrTo(yn,Rn),(cr&1<<Co)>0)vn.mulTo(Rn,Bn,yn);else{var Po=yn;yn=Rn,Rn=Po}return vn.revert(yn)}function Vc(cr,vn){var yn;return cr<256||vn.isEven()?yn=new $n(vn):yn=new ei(vn),this.exp(cr,yn)}me$2.prototype.copyTo=oc;me$2.prototype.fromInt=sc;me$2.prototype.fromString=uc;me$2.prototype.clamp=lc;me$2.prototype.dlShiftTo=vc;me$2.prototype.drShiftTo=mc;me$2.prototype.lShiftTo=Ac;me$2.prototype.rShiftTo=gc;me$2.prototype.subTo=yc;me$2.prototype.multiplyTo=bc;me$2.prototype.squareTo=xc;me$2.prototype.divRemTo=wc;me$2.prototype.invDigit=Pc;me$2.prototype.isEven=Oc;me$2.prototype.exp=zc;me$2.prototype.toString=cc;me$2.prototype.negate=fc;me$2.prototype.abs=dc;me$2.prototype.compareTo=hc;me$2.prototype.bitLength=pc;me$2.prototype.mod=Sc;me$2.prototype.modPowInt=Vc;me$2.ZERO=J0(0);me$2.ONE=J0(1);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function Dc(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Nc(cr){return Math.floor(Math.LN2*this.DB/Math.log(cr))}function qc(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Uc(cr){if(cr==null&&(cr=10),this.signum()==0||cr<2||cr>36)return"0";var vn=this.chunkSize(cr),yn=Math.pow(cr,vn),Rn=J0(yn),Bn=ur$1(),Co=ur$1(),Po="";for(this.divRemTo(Rn,Bn,Co);Bn.signum()>0;)Po=(yn+Co.intValue()).toString(cr).substr(1)+Po,Bn.divRemTo(Rn,Bn,Co);return Co.intValue().toString(cr)+Po}me$2.prototype.chunkSize=Nc;me$2.prototype.toRadix=Uc;me$2.prototype.intValue=Dc;me$2.prototype.signum=qc;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var Hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",du="=";function Qc(cr){var vn,yn,Rn="";for(vn=0;vn+3<=cr.length;vn+=3)yn=parseInt(cr.substring(vn,vn+3),16),Rn+=Hn.charAt(yn>>6)+Hn.charAt(yn&63);for(vn+1==cr.length?(yn=parseInt(cr.substring(vn,vn+1),16),Rn+=Hn.charAt(yn<<2)):vn+2==cr.length&&(yn=parseInt(cr.substring(vn,vn+2),16),Rn+=Hn.charAt(yn>>2)+Hn.charAt((yn&3)<<4));(Rn.length&3)>0;)Rn+=du;return Rn}function j0(cr){var vn="",yn,Rn=0,Bn,Co;for(yn=0;yn<cr.length&&cr.charAt(yn)!=du;++yn)Co=Hn.indexOf(cr.charAt(yn)),!(Co<0)&&(Rn==0?(vn+=Hr$1(Co>>2),Bn=Co&3,Rn=1):Rn==1?(vn+=Hr$1(Bn<<2|Co>>4),Bn=Co&15,Rn=2):Rn==2?(vn+=Hr$1(Bn),vn+=Hr$1(Co>>2),Bn=Co&3,Rn=3):(vn+=Hr$1(Bn<<2|Co>>4),vn+=Hr$1(Co&15),Rn=0));return Rn==1&&(vn+=Hr$1(Bn<<2)),vn}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function qt$1(cr,vn){return new me$2(cr,vn)}function Hc(cr,vn){if(vn<cr.length+11)throw"Message too long for RSA";for(var yn=new Array,Rn=cr.length-1;Rn>=0&&vn>0;){var Bn=cr.charCodeAt(Rn--);Bn<128?yn[--vn]=Bn:Bn>127&&Bn<2048?(yn[--vn]=Bn&63|128,yn[--vn]=Bn>>6|192):(yn[--vn]=Bn&63|128,yn[--vn]=Bn>>6&63|128,yn[--vn]=Bn>>12|224)}yn[--vn]=0;for(var Co=new SecureRandom,Po=new Array;vn>2;){for(Po[0]=0;Po[0]==0;)Co.nextBytes(Po);yn[--vn]=Po[0]}return yn[--vn]=2,yn[--vn]=0,new me$2(yn)}function Bo(cr,vn,yn){for(var Rn="",Bn=0;Rn.length<vn;)Rn+=yn(String.fromCharCode.apply(String,cr.concat([(Bn&4278190080)>>24,(Bn&16711680)>>16,(Bn&65280)>>8,Bn&255]))),Bn+=1;return Rn}function Gc(cr,vn,yn,Rn){var Bn=le$3.crypto.MessageDigest,Co=le$3.crypto.Util,Po=null;if(yn||(yn="sha1"),typeof yn=="string"&&(Po=Bn.getCanonicalAlgName(yn),Rn=Bn.getHashLength(Po),yn=function(Rm){return _r$1(Co.hashHex(Aa(Rm),Po))}),cr.length+2*Rn+2>vn)throw"Message too long for RSA";var To="",Io;for(Io=0;Io<vn-cr.length-2*Rn-2;Io+=1)To+="\0";var $l=yn("")+To+""+cr,Wl=new Array(Rn);new SecureRandom().nextBytes(Wl);var Xl=Bo(Wl,$l.length,yn),Yl=[];for(Io=0;Io<$l.length;Io+=1)Yl[Io]=$l.charCodeAt(Io)^Xl.charCodeAt(Io);var Zl=Bo(Yl,Wl.length,yn),ey=[0];for(Io=0;Io<Wl.length;Io+=1)ey[Io+1]=Wl[Io]^Zl.charCodeAt(Io);return new me$2(ey.concat(Yl))}function Oe$2(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function _c(cr,vn){if(this.isPublic=!0,this.isPrivate=!1,typeof cr!="string")this.n=cr,this.e=vn;else if(cr!=null&&vn!=null&&cr.length>0&&vn.length>0)this.n=qt$1(cr,16),this.e=parseInt(vn,16);else throw"Invalid RSA public key"}function Jc(cr){return cr.modPowInt(this.e,this.n)}function Kc(cr){var vn=Hc(cr,this.n.bitLength()+7>>3);if(vn==null)return null;var yn=this.doPublic(vn);if(yn==null)return null;var Rn=yn.toString(16);return Rn.length&1?"0"+Rn:Rn}function jc(cr,vn,yn){var Rn=Gc(cr,this.n.bitLength()+7>>3,vn,yn);if(Rn==null)return null;var Bn=this.doPublic(Rn);if(Bn==null)return null;var Co=Bn.toString(16);return Co.length&1?"0"+Co:Co}Oe$2.prototype.doPublic=Jc;Oe$2.prototype.setPublic=_c;Oe$2.prototype.encrypt=Kc;Oe$2.prototype.encryptOAEP=jc;Oe$2.prototype.type="RSA";/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function Xc(cr,vn){for(var yn=cr.toByteArray(),Rn=0;Rn<yn.length&&yn[Rn]==0;)++Rn;if(yn.length-Rn!=vn-1||yn[Rn]!=2)return null;for(++Rn;yn[Rn]!=0;)if(++Rn>=yn.length)return null;for(var Bn="";++Rn<yn.length;){var Co=yn[Rn]&255;Co<128?Bn+=String.fromCharCode(Co):Co>191&&Co<224?(Bn+=String.fromCharCode((Co&31)<<6|yn[Rn+1]&63),++Rn):(Bn+=String.fromCharCode((Co&15)<<12|(yn[Rn+1]&63)<<6|yn[Rn+2]&63),Rn+=2)}return Bn}function Fo(cr,vn,yn){for(var Rn="",Bn=0;Rn.length<vn;)Rn+=yn(cr+String.fromCharCode.apply(String,[(Bn&4278190080)>>24,(Bn&16711680)>>16,(Bn&65280)>>8,Bn&255])),Bn+=1;return Rn}function Wc(cr,vn,yn,Rn){var Bn=le$3.crypto.MessageDigest,Co=le$3.crypto.Util,Po=null;yn||(yn="sha1"),typeof yn=="string"&&(Po=Bn.getCanonicalAlgName(yn),Rn=Bn.getHashLength(Po),yn=function(ry){return _r$1(Co.hashHex(Aa(ry),Po))}),cr=cr.toByteArray();var Xl;for(Xl=0;Xl<cr.length;Xl+=1)cr[Xl]&=255;for(;cr.length<vn;)cr.unshift(0);if(cr=String.fromCharCode.apply(String,cr),cr.length<2*Rn+2)throw"Cipher too short";var To=cr.substr(1,Rn),Io=cr.substr(Rn+1),$l=Fo(Io,Rn,yn),Wl=[],Xl;for(Xl=0;Xl<To.length;Xl+=1)Wl[Xl]=To.charCodeAt(Xl)^$l.charCodeAt(Xl);var Yl=Fo(String.fromCharCode.apply(String,Wl),cr.length-Rn,yn),Zl=[];for(Xl=0;Xl<Io.length;Xl+=1)Zl[Xl]=Io.charCodeAt(Xl)^Yl.charCodeAt(Xl);if(Zl=String.fromCharCode.apply(String,Zl),Zl.substr(0,Rn)!==yn(""))throw"Hash mismatch";Zl=Zl.substr(Rn);var ey=Zl.indexOf(""),Rm=ey!=-1?Zl.substr(0,ey).lastIndexOf("\0"):-1;if(Rm+1!=ey)throw"Malformed data";return Zl.substr(ey+1)}function Zc(cr,vn,yn){if(this.isPrivate=!0,typeof cr!="string")this.n=cr,this.e=vn,this.d=yn;else if(cr!=null&&vn!=null&&cr.length>0&&vn.length>0)this.n=qt$1(cr,16),this.e=parseInt(vn,16),this.d=qt$1(yn,16);else throw"Invalid RSA private key"}function Yc(cr,vn,yn,Rn,Bn,Co,Po,To){if(this.isPrivate=!0,this.isPublic=!1,cr==null)throw"RSASetPrivateEx N == null";if(vn==null)throw"RSASetPrivateEx E == null";if(cr.length==0)throw"RSASetPrivateEx N.length == 0";if(vn.length==0)throw"RSASetPrivateEx E.length == 0";if(cr!=null&&vn!=null&&cr.length>0&&vn.length>0)this.n=qt$1(cr,16),this.e=parseInt(vn,16),this.d=qt$1(yn,16),this.p=qt$1(Rn,16),this.q=qt$1(Bn,16),this.dmp1=qt$1(Co,16),this.dmq1=qt$1(Po,16),this.coeff=qt$1(To,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function $c(cr){if(this.p==null||this.q==null)return cr.modPow(this.d,this.n);for(var vn=cr.mod(this.p).modPow(this.dmp1,this.p),yn=cr.mod(this.q).modPow(this.dmq1,this.q);vn.compareTo(yn)<0;)vn=vn.add(this.p);return vn.subtract(yn).multiply(this.coeff).mod(this.p).multiply(this.q).add(yn)}function ef(cr){if(cr.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var vn=qt$1(cr,16),yn=this.doPrivate(vn);return yn==null?null:Xc(yn,this.n.bitLength()+7>>3)}function tf(cr,vn,yn){if(cr.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var Rn=qt$1(cr,16),Bn=this.doPrivate(Rn);return Bn==null?null:Wc(Bn,this.n.bitLength()+7>>3,vn,yn)}Oe$2.prototype.doPrivate=$c;Oe$2.prototype.setPrivate=Zc;Oe$2.prototype.setPrivateEx=Yc;Oe$2.prototype.decrypt=ef;Oe$2.prototype.decryptOAEP=tf;(typeof le$3.lang=="undefined"||!le$3.lang)&&(le$3.lang={});le$3.lang.String=function(){};function rf(cr){return cr.length%4==2?cr=cr+"==":cr.length%4==3&&(cr=cr+"="),cr=cr.replace(/-/g,"+"),cr=cr.replace(/_/g,"/"),cr}function dt$3(cr){return j0(rf(cr))}function Fr$1(cr){return decodeURIComponent(uf(cr))}function _r$1(cr){for(var vn="",yn=0;yn<cr.length-1;yn+=2)vn+=String.fromCharCode(parseInt(cr.substr(yn,2),16));return vn}function Aa(cr){for(var vn="",yn=0;yn<cr.length;yn++)vn+=("0"+cr.charCodeAt(yn).toString(16)).slice(-2);return vn}function nf(cr){return Qc(cr)}function af(cr){var vn=nf(cr),yn=vn.replace(/(.{64})/g,`$1\r
`);return yn=yn.replace(/\r\n$/,""),yn}function of(cr){var vn=cr.replace(/[^0-9A-Za-z\/+=]*/g,""),yn=j0(vn);return yn}function sf(cr,vn){var yn=af(cr);return"-----BEGIN "+vn+`-----\r
`+yn+`\r
-----END `+vn+`-----\r
`}function In(cr,vn){if(cr.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+vn;return vn!==void 0?(cr=cr.replace(new RegExp("^[^]*-----BEGIN "+vn+"-----"),""),cr=cr.replace(new RegExp("-----END "+vn+"-----[^]*$"),"")):(cr=cr.replace(/^[^]*-----BEGIN [^-]+-----/,""),cr=cr.replace(/-----END [^-]+-----[^]*$/,"")),of(cr)}function uf(cr){return cr.replace(/(..)/g,"%$1")}function lf(cr){if(!cr.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";cr=cr.toLowerCase();for(var vn=cr.match(/.{1,4}/g),yn=0;yn<8;yn++)vn[yn]=vn[yn].replace(/^0+/,""),vn[yn]==""&&(vn[yn]="0");cr=":"+vn.join(":")+":";var Rn=cr.match(/:(0:){2,}/g);if(Rn===null)return cr.slice(1,-1);for(var Bn="",yn=0;yn<Rn.length;yn++)Rn[yn].length>Bn.length&&(Bn=Rn[yn]);return cr=cr.replace(Bn,"::"),cr.slice(1,-1)}function Lo(cr){var vn="malformed hex value";if(!cr.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw vn;if(cr.length==8){var yn;try{return yn=parseInt(cr.substr(0,2),16)+"."+parseInt(cr.substr(2,2),16)+"."+parseInt(cr.substr(4,2),16)+"."+parseInt(cr.substr(6,2),16),yn}catch{throw vn}}else return cr.length==32?lf(cr):cr}function cf(cr){function vn(Bn){var Co=parseInt(Bn.substr(0,2),16),Po=parseInt(Bn.substr(2),16);if(Co==0&Po<128)return String.fromCharCode(Po);if(Co<8){var To=192|(Co&7)<<3|(Po&192)>>6,Io=128|Po&63;return Fr$1(To.toString(16)+Io.toString(16))}var To=224|(Co&240)>>4,Io=128|(Co&15)<<2|(Po&192)>>6,$l=128|Po&63;return Fr$1(To.toString(16)+Io.toString(16)+$l.toString(16))}var yn=cr.match(/.{4}/g),Rn=yn.map(vn);return Rn.join("")}le$3.lang.String.isHex=function(cr){return hu(cr)};function hu(cr){return!!(cr.length%2==0&&(cr.match(/^[0-9a-f]+$/)||cr.match(/^[0-9A-F]+$/)))}le$3.lang.String.isMail=function(cr){return cr.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function ko(cr){return cr.length%2==1?"0"+cr:cr.substr(0,1)>"7"?"00"+cr:cr}function ff(cr){if(!hu(cr))return null;try{var vn=[],yn=cr.substr(0,2),Rn=parseInt(yn,16);vn[0]=new String(Math.floor(Rn/40)),vn[1]=new String(Rn%40);for(var Bn=cr.substr(2),Co=[],Po=0;Po<Bn.length/2;Po++)Co.push(parseInt(Bn.substr(Po*2,2),16));for(var To=[],Io="",Po=0;Po<Co.length;Po++)Co[Po]&128?Io=Io+Oo((Co[Po]&127).toString(2),7):(Io=Io+Oo((Co[Po]&127).toString(2),7),To.push(new String(parseInt(Io,2))),Io="");var $l=vn.join(".");return To.length>0&&($l=$l+"."+To.join(".")),$l}catch{return null}}var Oo=function(cr,vn,yn){return yn==null&&(yn="0"),cr.length>=vn?cr:new Array(vn-cr.length+1).join(yn)+cr};function df(cr){try{var vn=cr.substr(0,2);if(vn=="00")return parseInt(cr.substr(2),16);var yn=parseInt(vn,16),Rn=cr.substr(2),Bn=parseInt(Rn,16).toString(2);return Bn=="0"&&(Bn="00000000"),Bn=Bn.slice(0,0-yn),parseInt(Bn,2)}catch{return-1}}(typeof le$3.crypto=="undefined"||!le$3.crypto)&&(le$3.crypto={});le$3.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Se.algo.MD5,sha1:Se.algo.SHA1,sha224:Se.algo.SHA224,sha256:Se.algo.SHA256,sha384:Se.algo.SHA384,sha512:Se.algo.SHA512,ripemd160:Se.algo.RIPEMD160},this.hashString=function(cr,vn){var yn=new le$3.crypto.MessageDigest({alg:vn});return yn.digestString(cr)},this.hashHex=function(cr,vn){var yn=new le$3.crypto.MessageDigest({alg:vn});return yn.digestHex(cr)},this.sha1=function(cr){return this.hashString(cr,"sha1")},this.sha256=function(cr){return this.hashString(cr,"sha256")},this.sha256Hex=function(cr){return this.hashHex(cr,"sha256")},this.sha512=function(cr){return this.hashString(cr,"sha512")},this.sha512Hex=function(cr){return this.hashHex(cr,"sha512")}};le$3.crypto.MessageDigest=function(cr){this.setAlgAndProvider=function(vn,yn){if(vn=le$3.crypto.MessageDigest.getCanonicalAlgName(vn),vn!==null&&yn===void 0&&(yn=le$3.crypto.Util.DEFAULTPROVIDER[vn]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(vn)!=-1&&yn=="cryptojs"){try{this.md=le$3.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[vn].create()}catch(Rn){throw"setAlgAndProvider hash alg set fail alg="+vn+"/"+Rn}this.updateString=function(Rn){this.md.update(Rn)},this.updateHex=function(Rn){var Bn=Se.enc.Hex.parse(Rn);this.md.update(Bn)},this.digest=function(){var Rn=this.md.finalize();return Rn.toString(Se.enc.Hex)},this.digestString=function(Rn){return this.updateString(Rn),this.digest()},this.digestHex=function(Rn){return this.updateHex(Rn),this.digest()}}if(":sha256:".indexOf(vn)!=-1&&yn=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(Rn){throw"setAlgAndProvider hash alg set fail alg="+vn+"/"+Rn}this.updateString=function(Rn){this.md.update(Rn)},this.updateHex=function(Rn){var Bn=sjcl.codec.hex.toBits(Rn);this.md.update(Bn)},this.digest=function(){var Rn=this.md.finalize();return sjcl.codec.hex.fromBits(Rn)},this.digestString=function(Rn){return this.updateString(Rn),this.digest()},this.digestHex=function(Rn){return this.updateHex(Rn),this.digest()}}},this.updateString=function(vn){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(vn){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(vn){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(vn){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},cr!==void 0&&cr.alg!==void 0&&(this.algName=cr.alg,cr.prov===void 0&&(this.provName=le$3.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};le$3.crypto.MessageDigest.getCanonicalAlgName=function(cr){return typeof cr=="string"&&(cr=cr.toLowerCase(),cr=cr.replace(/-/,"")),cr};le$3.crypto.MessageDigest.getHashLength=function(cr){var vn=le$3.crypto.MessageDigest,yn=vn.getCanonicalAlgName(cr);if(vn.HASHLENGTH[yn]===void 0)throw"not supported algorithm: "+cr;return vn.HASHLENGTH[yn]};le$3.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};le$3.crypto.Signature=function(cr){var vn=null;if(this._setAlgNames=function(){var yn=this.algName.match(/^(.+)with(.+)$/);yn&&(this.mdAlgName=yn[1].toLowerCase(),this.pubkeyAlgName=yn[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(yn,Rn){for(var Bn="",Co=Rn/4-yn.length,Po=0;Po<Co;Po++)Bn=Bn+"0";return Bn+yn},this.setAlgAndProvider=function(yn,Rn){if(this._setAlgNames(),Rn!="cryptojs/jsrsa")throw new Error("provider not supported: "+Rn);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new le$3.crypto.MessageDigest({alg:this.mdAlgName})}catch(Bn){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Bn)}this.init=function(Bn,Co){var Po=null;try{Co===void 0?Po=Mn.getKey(Bn):Po=Mn.getKey(Bn,Co)}catch(To){throw"init failed:"+To}if(Po.isPrivate===!0)this.prvKey=Po,this.state="SIGN";else if(Po.isPublic===!0)this.pubKey=Po,this.state="VERIFY";else throw"init failed.:"+Po},this.updateString=function(Bn){this.md.updateString(Bn)},this.updateHex=function(Bn){this.md.updateHex(Bn)},this.verify=function(Bn){if(this.sHashHex=this.md.digest(),this.pubKey instanceof Oe$2&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Bn,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Oe$2&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,Bn);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(yn,Rn){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(yn){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(yn){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(yn){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=cr,cr!==void 0&&(cr.alg!==void 0&&(this.algName=cr.alg,cr.prov===void 0?this.provName=le$3.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=cr.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),cr.psssaltlen!==void 0&&(this.pssSaltLen=cr.psssaltlen),cr.prvkeypem!==void 0)){if(cr.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var vn=Mn.getKey(cr.prvkeypem);this.init(vn)}catch(yn){throw"fatal error to load pem private key: "+yn}}};le$3.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var Mn=function(){var cr=function(ey,Rm,ry){return Rn(Se.AES,ey,Rm,ry)},vn=function(ey,Rm,ry){return Rn(Se.TripleDES,ey,Rm,ry)},yn=function(ey,Rm,ry){return Rn(Se.DES,ey,Rm,ry)},Rn=function(ey,Rm,ry,_g){var ty=Se.enc.Hex.parse(Rm),ny=Se.enc.Hex.parse(ry),iy=Se.enc.Hex.parse(_g),oy={};oy.key=ny,oy.iv=iy,oy.ciphertext=ty;var ay=ey.decrypt(oy,ny,{iv:iy});return Se.enc.Hex.stringify(ay)},Bn=function(ey,Rm,ry){return To(Se.AES,ey,Rm,ry)},Co=function(ey,Rm,ry){return To(Se.TripleDES,ey,Rm,ry)},Po=function(ey,Rm,ry){return To(Se.DES,ey,Rm,ry)},To=function(ey,Rm,ry,_g){var ty=Se.enc.Hex.parse(Rm),ny=Se.enc.Hex.parse(ry),iy=Se.enc.Hex.parse(_g),oy=ey.encrypt(ty,ny,{iv:iy}),ay=Se.enc.Hex.parse(oy.toString()),uy=Se.enc.Base64.stringify(ay);return uy},Io={"AES-256-CBC":{proc:cr,eproc:Bn,keylen:32,ivlen:16},"AES-192-CBC":{proc:cr,eproc:Bn,keylen:24,ivlen:16},"AES-128-CBC":{proc:cr,eproc:Bn,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:vn,eproc:Co,keylen:24,ivlen:8},"DES-CBC":{proc:yn,eproc:Po,keylen:8,ivlen:8}},$l=function(ey){var Rm=Se.lib.WordArray.random(ey),ry=Se.enc.Hex.stringify(Rm);return ry},Wl=function(ey){var Rm={},ry=ey.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ry&&(Rm.cipher=ry[1],Rm.ivsalt=ry[2]);var _g=ey.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));_g&&(Rm.type=_g[1]);var ty=-1,ny=0;ey.indexOf(`\r
\r
`)!=-1&&(ty=ey.indexOf(`\r
\r
`),ny=2),ey.indexOf(`

`)!=-1&&(ty=ey.indexOf(`

`),ny=1);var iy=ey.indexOf("-----END");if(ty!=-1&&iy!=-1){var oy=ey.substring(ty+ny*2,iy-ny);oy=oy.replace(/\s+/g,""),Rm.data=oy}return Rm},Xl=function(ey,Rm,ry){for(var _g=ry.substring(0,16),ty=Se.enc.Hex.parse(_g),ny=Se.enc.Utf8.parse(Rm),iy=Io[ey].keylen+Io[ey].ivlen,oy="",ay=null;;){var uy=Se.algo.MD5.create();if(ay!=null&&uy.update(ay),uy.update(ny),uy.update(ty),ay=uy.finalize(),oy=oy+Se.enc.Hex.stringify(ay),oy.length>=iy*2)break}var hy={};return hy.keyhex=oy.substr(0,Io[ey].keylen*2),hy.ivhex=oy.substr(Io[ey].keylen*2,Io[ey].ivlen*2),hy},Yl=function(ey,Rm,ry,_g){var ty=Se.enc.Base64.parse(ey),ny=Se.enc.Hex.stringify(ty),iy=Io[Rm].proc,oy=iy(ny,ry,_g);return oy},Zl=function(ey,Rm,ry,_g){var ty=Io[Rm].eproc,ny=ty(ey,ry,_g);return ny};return{version:"1.0.0",parsePKCS5PEM:function(ey){return Wl(ey)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ey,Rm,ry){return Xl(ey,Rm,ry)},decryptKeyB64:function(ey,Rm,ry,_g){return Yl(ey,Rm,ry,_g)},getDecryptedKeyHex:function(ey,Rm){var ry=Wl(ey),_g=ry.cipher,ty=ry.ivsalt,ny=ry.data,iy=Xl(_g,Rm,ty),oy=iy.keyhex,ay=Yl(ny,_g,oy,ty);return ay},getEncryptedPKCS5PEMFromPrvKeyHex:function(ey,Rm,ry,_g,ty){var my="";if((typeof _g=="undefined"||_g==null)&&(_g="AES-256-CBC"),typeof Io[_g]=="undefined")throw"KEYUTIL unsupported algorithm: "+_g;if(typeof ty=="undefined"||ty==null){var ny=Io[_g].ivlen,iy=$l(ny);ty=iy.toUpperCase()}var oy=Xl(_g,ry,ty),ay=oy.keyhex,uy=Zl(Rm,_g,ay,ty),hy=uy.replace(/(.{64})/g,`$1\r
`),my="-----BEGIN "+ey+` PRIVATE KEY-----\r
`;return my+=`Proc-Type: 4,ENCRYPTED\r
`,my+="DEK-Info: "+_g+","+ty+`\r
`,my+=`\r
`,my+=hy,my+=`\r
-----END `+ey+` PRIVATE KEY-----\r
`,my},parseHexOfEncryptedPKCS8:function(ey){var Rm=he$2,ry=Rm.getChildIdx,_g=Rm.getV,ty={},ny=ry(ey,0);if(ny.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+ny.length;ty.ciphertext=_g(ey,ny[1]);var iy=ry(ey,ny[0]);if(iy.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+iy.length;if(_g(ey,iy[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var oy=ry(ey,iy[1]);if(iy.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+oy.length;var ay=ry(ey,oy[1]);if(ay.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+ay.length;if(_g(ey,ay[0])!="2a864886f70d0307")throw"this only supports TripleDES";ty.encryptionSchemeAlg="TripleDES",ty.encryptionSchemeIV=_g(ey,ay[1]);var uy=ry(ey,oy[0]);if(uy.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+uy.length;if(_g(ey,uy[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var hy=ry(ey,uy[1]);if(hy.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+hy.length;ty.pbkdf2Salt=_g(ey,hy[0]);var my=_g(ey,hy[1]);try{ty.pbkdf2Iter=parseInt(my,16)}catch{throw"malformed format pbkdf2Iter: "+my}return ty},getPBKDF2KeyHexFromParam:function(ey,Rm){var ry=Se.enc.Hex.parse(ey.pbkdf2Salt),_g=ey.pbkdf2Iter,ty=Se.PBKDF2(Rm,ry,{keySize:192/32,iterations:_g}),ny=Se.enc.Hex.stringify(ty);return ny},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ey,Rm){var ry=In(ey,"ENCRYPTED PRIVATE KEY"),_g=this.parseHexOfEncryptedPKCS8(ry),ty=Mn.getPBKDF2KeyHexFromParam(_g,Rm),ny={};ny.ciphertext=Se.enc.Hex.parse(_g.ciphertext);var iy=Se.enc.Hex.parse(ty),oy=Se.enc.Hex.parse(_g.encryptionSchemeIV),ay=Se.TripleDES.decrypt(ny,iy,{iv:oy}),uy=Se.enc.Hex.stringify(ay);return uy},getKeyFromEncryptedPKCS8PEM:function(ey,Rm){var ry=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ey,Rm),_g=this.getKeyFromPlainPrivatePKCS8Hex(ry);return _g},parsePlainPrivatePKCS8Hex:function(ey){var Rm=he$2,ry=Rm.getChildIdx,_g=Rm.getV,ty={};if(ty.algparam=null,ey.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var ny=ry(ey,0);if(ny.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ey.substr(ny[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var iy=ry(ey,ny[1]);if(iy.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ey.substr(iy[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(ty.algoid=_g(ey,iy[0]),ey.substr(iy[1],2)=="06"&&(ty.algparam=_g(ey,iy[1])),ey.substr(ny[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return ty.keyidx=Rm.getVidx(ey,ny[2]),ty},getKeyFromPlainPrivatePKCS8PEM:function(ey){var Rm=In(ey,"PRIVATE KEY"),ry=this.getKeyFromPlainPrivatePKCS8Hex(Rm);return ry},getKeyFromPlainPrivatePKCS8Hex:function(ey){var Rm=this.parsePlainPrivatePKCS8Hex(ey),ry;if(Rm.algoid=="2a864886f70d010101")ry=new Oe$2;else if(le$3.crypto.DSA&&Rm.algoid=="2a8648ce380401")ry=new le$3.crypto.DSA;else if(le$3.crypto.ECDSA&&Rm.algoid=="2a8648ce3d0201")ry=new le$3.crypto.ECDSA;else throw"unsupported private key algorithm";return ry.readPKCS8PrvKeyHex(ey),ry},_getKeyFromPublicPKCS8Hex:function(ey){var Rm,ry=he$2.getVbyList(ey,0,[0,0],"06");if(ry==="2a864886f70d010101")Rm=new Oe$2;else if(le$3.crypto.DSA&&ry==="2a8648ce380401")Rm=new le$3.crypto.DSA;else if(le$3.crypto.ECDSA&&ry==="2a8648ce3d0201")Rm=new le$3.crypto.ECDSA;else throw"unsupported PKCS#8 public key hex";return Rm.readPKCS8PubKeyHex(ey),Rm},parsePublicRawRSAKeyHex:function(ey){var Rm=he$2,ry=Rm.getChildIdx,_g=Rm.getV,ty={};if(ey.substr(0,2)!="30")throw"malformed RSA key(code:001)";var ny=ry(ey,0);if(ny.length!=2)throw"malformed RSA key(code:002)";if(ey.substr(ny[0],2)!="02")throw"malformed RSA key(code:003)";if(ty.n=_g(ey,ny[0]),ey.substr(ny[1],2)!="02")throw"malformed RSA key(code:004)";return ty.e=_g(ey,ny[1]),ty},parsePublicPKCS8Hex:function(ey){var Rm=he$2,ry=Rm.getChildIdx,_g=Rm.getV,ty={};ty.algparam=null;var ny=ry(ey,0);if(ny.length!=2)throw"outer DERSequence shall have 2 elements: "+ny.length;var iy=ny[0];if(ey.substr(iy,2)!="30")throw"malformed PKCS8 public key(code:001)";var oy=ry(ey,iy);if(oy.length!=2)throw"malformed PKCS8 public key(code:002)";if(ey.substr(oy[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(ty.algoid=_g(ey,oy[0]),ey.substr(oy[1],2)=="06"?ty.algparam=_g(ey,oy[1]):ey.substr(oy[1],2)=="30"&&(ty.algparam={},ty.algparam.p=Rm.getVbyList(ey,oy[1],[0],"02"),ty.algparam.q=Rm.getVbyList(ey,oy[1],[1],"02"),ty.algparam.g=Rm.getVbyList(ey,oy[1],[2],"02")),ey.substr(ny[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return ty.key=_g(ey,ny[1]).substr(2),ty}}}();Mn.getKey=function(cr,vn,yn){var Rn=he$2,Bn=Rn.getChildIdx;Rn.getV;var Co=Rn.getVbyList,Po=le$3.crypto,To=Po.ECDSA,Io=Po.DSA,$l=Oe$2,Wl=In,Xl=Mn;if(typeof $l!="undefined"&&cr instanceof $l||typeof To!="undefined"&&cr instanceof To||typeof Io!="undefined"&&cr instanceof Io)return cr;if(cr.curve!==void 0&&cr.xy!==void 0&&cr.d===void 0)return new To({pub:cr.xy,curve:cr.curve});if(cr.curve!==void 0&&cr.d!==void 0)return new To({prv:cr.d,curve:cr.curve});if(cr.kty===void 0&&cr.n!==void 0&&cr.e!==void 0&&cr.d===void 0){var Yl=new $l;return Yl.setPublic(cr.n,cr.e),Yl}if(cr.kty===void 0&&cr.n!==void 0&&cr.e!==void 0&&cr.d!==void 0&&cr.p!==void 0&&cr.q!==void 0&&cr.dp!==void 0&&cr.dq!==void 0&&cr.co!==void 0&&cr.qi===void 0){var Yl=new $l;return Yl.setPrivateEx(cr.n,cr.e,cr.d,cr.p,cr.q,cr.dp,cr.dq,cr.co),Yl}if(cr.kty===void 0&&cr.n!==void 0&&cr.e!==void 0&&cr.d!==void 0&&cr.p===void 0){var Yl=new $l;return Yl.setPrivate(cr.n,cr.e,cr.d),Yl}if(cr.p!==void 0&&cr.q!==void 0&&cr.g!==void 0&&cr.y!==void 0&&cr.x===void 0){var Yl=new Io;return Yl.setPublic(cr.p,cr.q,cr.g,cr.y),Yl}if(cr.p!==void 0&&cr.q!==void 0&&cr.g!==void 0&&cr.y!==void 0&&cr.x!==void 0){var Yl=new Io;return Yl.setPrivate(cr.p,cr.q,cr.g,cr.y,cr.x),Yl}if(cr.kty==="RSA"&&cr.n!==void 0&&cr.e!==void 0&&cr.d===void 0){var Yl=new $l;return Yl.setPublic(dt$3(cr.n),dt$3(cr.e)),Yl}if(cr.kty==="RSA"&&cr.n!==void 0&&cr.e!==void 0&&cr.d!==void 0&&cr.p!==void 0&&cr.q!==void 0&&cr.dp!==void 0&&cr.dq!==void 0&&cr.qi!==void 0){var Yl=new $l;return Yl.setPrivateEx(dt$3(cr.n),dt$3(cr.e),dt$3(cr.d),dt$3(cr.p),dt$3(cr.q),dt$3(cr.dp),dt$3(cr.dq),dt$3(cr.qi)),Yl}if(cr.kty==="RSA"&&cr.n!==void 0&&cr.e!==void 0&&cr.d!==void 0){var Yl=new $l;return Yl.setPrivate(dt$3(cr.n),dt$3(cr.e),dt$3(cr.d)),Yl}if(cr.kty==="EC"&&cr.crv!==void 0&&cr.x!==void 0&&cr.y!==void 0&&cr.d===void 0){var Zl=new To({curve:cr.crv}),ey=Zl.ecparams.keylen/4,Rm=("0000000000"+dt$3(cr.x)).slice(-ey),ry=("0000000000"+dt$3(cr.y)).slice(-ey),_g="04"+Rm+ry;return Zl.setPublicKeyHex(_g),Zl}if(cr.kty==="EC"&&cr.crv!==void 0&&cr.x!==void 0&&cr.y!==void 0&&cr.d!==void 0){var Zl=new To({curve:cr.crv}),ey=Zl.ecparams.keylen/4,Rm=("0000000000"+dt$3(cr.x)).slice(-ey),ry=("0000000000"+dt$3(cr.y)).slice(-ey),_g="04"+Rm+ry,ty=("0000000000"+dt$3(cr.d)).slice(-ey);return Zl.setPublicKeyHex(_g),Zl.setPrivateKeyHex(ty),Zl}if(yn==="pkcs5prv"){var ny=cr,Rn=he$2,iy,Yl;if(iy=Bn(ny,0),iy.length===9)Yl=new $l,Yl.readPKCS5PrvKeyHex(ny);else if(iy.length===6)Yl=new Io,Yl.readPKCS5PrvKeyHex(ny);else if(iy.length>2&&ny.substr(iy[1],2)==="04")Yl=new To,Yl.readPKCS5PrvKeyHex(ny);else throw"unsupported PKCS#1/5 hexadecimal key";return Yl}if(yn==="pkcs8prv"){var Yl=Xl.getKeyFromPlainPrivatePKCS8Hex(cr);return Yl}if(yn==="pkcs8pub")return Xl._getKeyFromPublicPKCS8Hex(cr);if(yn==="x509pub")return Ze$1.getPublicKeyFromCertHex(cr);if(cr.indexOf("-END CERTIFICATE-",0)!=-1||cr.indexOf("-END X509 CERTIFICATE-",0)!=-1||cr.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Ze$1.getPublicKeyFromCertPEM(cr);if(cr.indexOf("-END PUBLIC KEY-")!=-1){var oy=In(cr,"PUBLIC KEY");return Xl._getKeyFromPublicPKCS8Hex(oy)}if(cr.indexOf("-END RSA PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")==-1){var ay=Wl(cr,"RSA PRIVATE KEY");return Xl.getKey(ay,null,"pkcs5prv")}if(cr.indexOf("-END DSA PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")==-1){var uy=Wl(cr,"DSA PRIVATE KEY"),hy=Co(uy,0,[1],"02"),my=Co(uy,0,[2],"02"),ly=Co(uy,0,[3],"02"),sy=Co(uy,0,[4],"02"),cy=Co(uy,0,[5],"02"),Yl=new Io;return Yl.setPrivate(new me$2(hy,16),new me$2(my,16),new me$2(ly,16),new me$2(sy,16),new me$2(cy,16)),Yl}if(cr.indexOf("-END EC PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")==-1){var ay=Wl(cr,"EC PRIVATE KEY");return Xl.getKey(ay,null,"pkcs5prv")}if(cr.indexOf("-END PRIVATE KEY-")!=-1)return Xl.getKeyFromPlainPrivatePKCS8PEM(cr);if(cr.indexOf("-END RSA PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")!=-1){var fy=Xl.getDecryptedKeyHex(cr,vn),vy=new Oe$2;return vy.readPKCS5PrvKeyHex(fy),vy}if(cr.indexOf("-END EC PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")!=-1){var uy=Xl.getDecryptedKeyHex(cr,vn),Yl=Co(uy,0,[1],"04"),dy=Co(uy,0,[2,0],"06"),Ay=Co(uy,0,[3,0],"03").substr(2),gy="";if(le$3.crypto.OID.oidhex2name[dy]!==void 0)gy=le$3.crypto.OID.oidhex2name[dy];else throw"undefined OID(hex) in KJUR.crypto.OID: "+dy;var Zl=new To({curve:gy});return Zl.setPublicKeyHex(Ay),Zl.setPrivateKeyHex(Yl),Zl.isPublic=!1,Zl}if(cr.indexOf("-END DSA PRIVATE KEY-")!=-1&&cr.indexOf("4,ENCRYPTED")!=-1){var uy=Xl.getDecryptedKeyHex(cr,vn),hy=Co(uy,0,[1],"02"),my=Co(uy,0,[2],"02"),ly=Co(uy,0,[3],"02"),sy=Co(uy,0,[4],"02"),cy=Co(uy,0,[5],"02"),Yl=new Io;return Yl.setPrivate(new me$2(hy,16),new me$2(my,16),new me$2(ly,16),new me$2(sy,16),new me$2(cy,16)),Yl}if(cr.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Xl.getKeyFromEncryptedPKCS8PEM(cr,vn);throw new Error("not supported argument")};(typeof le$3.asn1=="undefined"||!le$3.asn1)&&(le$3.asn1={});le$3.asn1.ASN1Util={};le$3.asn1.ASN1Util.oidHexToInt=function(cr){for(var Bn="",vn=parseInt(cr.substr(0,2),16),yn=Math.floor(vn/40),Rn=vn%40,Bn=yn+"."+Rn,Co="",Po=2;Po<cr.length;Po+=2){var To=parseInt(cr.substr(Po,2),16),Io=("00000000"+To.toString(2)).slice(-8);if(Co=Co+Io.substr(1,7),Io.substr(0,1)=="0"){var $l=new me$2(Co,2);Bn=Bn+"."+$l.toString(10),Co=""}}return Bn};var he$2=new function(){};he$2.getLblen=function(cr,vn){if(cr.substr(vn+2,1)!="8")return 1;var yn=parseInt(cr.substr(vn+3,1));return yn==0?-1:0<yn&&yn<10?yn+1:-2};he$2.getL=function(cr,vn){var yn=he$2.getLblen(cr,vn);return yn<1?"":cr.substr(vn+2,yn*2)};he$2.getVblen=function(cr,vn){var yn,Rn;return yn=he$2.getL(cr,vn),yn==""?-1:(yn.substr(0,1)==="8"?Rn=new me$2(yn.substr(2),16):Rn=new me$2(yn,16),Rn.intValue())};he$2.getVidx=function(cr,vn){var yn=he$2.getLblen(cr,vn);return yn<0?yn:vn+(yn+1)*2};he$2.getV=function(cr,vn){var yn=he$2.getVidx(cr,vn),Rn=he$2.getVblen(cr,vn);return cr.substr(yn,Rn*2)};he$2.getTLV=function(cr,vn){return cr.substr(vn,2)+he$2.getL(cr,vn)+he$2.getV(cr,vn)};he$2.getTLVblen=function(cr,vn){return 2+he$2.getLblen(cr,vn)*2+he$2.getVblen(cr,vn)*2};he$2.getNextSiblingIdx=function(cr,vn){var yn=he$2.getVidx(cr,vn),Rn=he$2.getVblen(cr,vn);return yn+Rn*2};he$2.getChildIdx=function(cr,vn){var yn=he$2,Rn=[],Bn,Co,Po;Bn=yn.getVidx(cr,vn),Co=yn.getVblen(cr,vn)*2,cr.substr(vn,2)=="03"&&(Bn+=2,Co-=2),Po=0;for(var To=Bn;Po<=Co;){var Io=yn.getTLVblen(cr,To);if(Po+=Io,Po<=Co&&Rn.push(To),To+=Io,Po>=Co)break}return Rn};he$2.getNthChildIdx=function(cr,vn,yn){var Rn=he$2.getChildIdx(cr,vn);return Rn[yn]};he$2.getIdxbyList=function(cr,vn,yn,Rn){var Bn=he$2,Co,Po;return yn.length==0?Rn!==void 0&&cr.substr(vn,2)!==Rn?-1:vn:(Co=yn.shift(),Po=Bn.getChildIdx(cr,vn),Co>=Po.length?-1:Bn.getIdxbyList(cr,Po[Co],yn,Rn))};he$2.getIdxbyListEx=function(cr,vn,yn,Rn){var Bn=he$2,Co,Po;if(yn.length==0)return Rn!==void 0&&cr.substr(vn,2)!==Rn?-1:vn;Co=yn.shift(),Po=Bn.getChildIdx(cr,vn);for(var To=0,Io=0;Io<Po.length;Io++){var $l=cr.substr(Po[Io],2);if(typeof Co=="number"&&!Bn.isContextTag($l)&&To==Co||typeof Co=="string"&&Bn.isContextTag($l,Co))return Bn.getIdxbyListEx(cr,Po[Io],yn,Rn);Bn.isContextTag($l)||To++}return-1};he$2.getTLVbyList=function(cr,vn,yn,Rn){var Bn=he$2,Co=Bn.getIdxbyList(cr,vn,yn,Rn);return Co==-1||Co>=cr.length?null:Bn.getTLV(cr,Co)};he$2.getTLVbyListEx=function(cr,vn,yn,Rn){var Bn=he$2,Co=Bn.getIdxbyListEx(cr,vn,yn,Rn);return Co==-1?null:Bn.getTLV(cr,Co)};he$2.getVbyList=function(cr,vn,yn,Rn,Bn){var Co=he$2,Po,To;return Po=Co.getIdxbyList(cr,vn,yn,Rn),Po==-1||Po>=cr.length?null:(To=Co.getV(cr,Po),Bn===!0&&(To=To.substr(2)),To)};he$2.getVbyListEx=function(cr,vn,yn,Rn,Bn){var Co=he$2,Po,To;return Po=Co.getIdxbyListEx(cr,vn,yn,Rn),Po==-1?null:(To=Co.getV(cr,Po),cr.substr(Po,2)=="03"&&Bn!==!1&&(To=To.substr(2)),To)};he$2.getInt=function(cr,vn,yn){yn==null&&(yn=-1);try{var Rn=cr.substr(vn,2);if(Rn!="02"&&Rn!="03")return yn;var Bn=he$2.getV(cr,vn);return Rn=="02"?parseInt(Bn,16):df(Bn)}catch{return yn}};he$2.getOID=function(cr,vn,yn){yn==null&&(yn=null);try{if(cr.substr(vn,2)!="06")return yn;var Rn=he$2.getV(cr,vn);return ff(Rn)}catch{return yn}};he$2.getOIDName=function(cr,vn,yn){yn==null&&(yn=null);try{var Rn=he$2.getOID(cr,vn,yn);if(Rn==yn)return yn;var Bn=le$3.asn1.x509.OID.oid2name(Rn);return Bn==""?Rn:Bn}catch{return yn}};he$2.getString=function(cr,vn,yn){yn==null&&(yn=null);try{var Rn=he$2.getV(cr,vn);return _r$1(Rn)}catch{return yn}};he$2.hextooidstr=function(cr){var vn=function(Xl,Yl){return Xl.length>=Yl?Xl:new Array(Yl-Xl.length+1).join("0")+Xl},yn=[],Rn=cr.substr(0,2),Bn=parseInt(Rn,16);yn[0]=new String(Math.floor(Bn/40)),yn[1]=new String(Bn%40);for(var Co=cr.substr(2),Po=[],To=0;To<Co.length/2;To++)Po.push(parseInt(Co.substr(To*2,2),16));for(var Io=[],$l="",To=0;To<Po.length;To++)Po[To]&128?$l=$l+vn((Po[To]&127).toString(2),7):($l=$l+vn((Po[To]&127).toString(2),7),Io.push(new String(parseInt($l,2))),$l="");var Wl=yn.join(".");return Io.length>0&&(Wl=Wl+"."+Io.join(".")),Wl};he$2.isContextTag=function(cr,vn){cr=cr.toLowerCase();var yn,Rn;try{yn=parseInt(cr,16)}catch{return-1}if(vn===void 0)return(yn&192)==128;try{var Bn=vn.match(/^\[[0-9]+\]$/);return Bn==null||(Rn=parseInt(vn.substr(1,vn.length-1),10),Rn>31)?!1:(yn&192)==128&&(yn&31)==Rn}catch{return!1}};he$2.isASN1HEX=function(cr){var vn=he$2;if(cr.length%2==1)return!1;var yn=vn.getVblen(cr,0),Rn=cr.substr(0,2),Bn=vn.getL(cr,0),Co=cr.length-Rn.length-Bn.length;return Co==yn*2};he$2.checkStrictDER=function(cr,vn,yn,Rn,Bn){var Co=he$2;if(yn===void 0){if(typeof cr!="string")throw new Error("not hex string");if(cr=cr.toLowerCase(),!le$3.lang.String.isHex(cr))throw new Error("not hex string");yn=cr.length,Rn=cr.length/2,Rn<128?Bn=1:Bn=Math.ceil(Rn.toString(16))+1}var Po=Co.getL(cr,vn);if(Po.length>Bn*2)throw new Error("L of TLV too long: idx="+vn);var To=Co.getVblen(cr,vn);if(To>Rn)throw new Error("value of L too long than hex: idx="+vn);var Io=Co.getTLV(cr,vn),$l=Io.length-2-Co.getL(cr,vn).length;if($l!==To*2)throw new Error("V string length and L's value not the same:"+$l+"/"+To*2);if(vn===0&&cr.length!=Io.length)throw new Error("total length and TLV length unmatch:"+cr.length+"!="+Io.length);var Wl=cr.substr(vn,2);if(Wl==="02"){var Xl=Co.getVidx(cr,vn);if(cr.substr(Xl,2)=="00"&&cr.charCodeAt(Xl+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(Wl,16)&32){for(var Yl=Co.getVblen(cr,vn),Zl=0,ey=Co.getChildIdx(cr,vn),Rm=0;Rm<ey.length;Rm++){var ry=Co.getTLV(cr,ey[Rm]);Zl+=ry.length,Co.checkStrictDER(cr,ey[Rm],yn,Rn,Bn)}if(Yl*2!=Zl)throw new Error("sum of children's TLV length and L unmatch: "+Yl*2+"!="+Zl)}};he$2.oidname=function(cr){var vn=le$3.asn1;le$3.lang.String.isHex(cr)&&(cr=vn.ASN1Util.oidHexToInt(cr));var yn=vn.x509.OID.oid2name(cr);return yn===""&&(yn=cr),yn};(typeof le$3.asn1=="undefined"||!le$3.asn1)&&(le$3.asn1={});(typeof le$3.asn1.x509=="undefined"||!le$3.asn1.x509)&&(le$3.asn1.x509={});le$3.asn1.x509.AlgorithmIdentifier={};le$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};le$3.asn1.x509.OID=new function(cr){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(vn){if(typeof this.objCache[vn]!="undefined")return this.objCache[vn];if(typeof this.name2oidList[vn]=="undefined")throw"Name of ObjectIdentifier not defined: "+vn;var yn=this.name2oidList[vn],Rn=new le$3.asn1.DERObjectIdentifier({oid:yn});return this.objCache[vn]=Rn,Rn},this.atype2obj=function(vn){if(this.objCache[vn]!==void 0)return this.objCache[vn];var yn;if(vn.match(/^\d+\.\d+\.[0-9.]+$/))yn=vn;else if(this.atype2oidList[vn]!==void 0)yn=this.atype2oidList[vn];else if(this.name2oidList[vn]!==void 0)yn=this.name2oidList[vn];else throw"AttributeType name undefined: "+vn;var Rn=new le$3.asn1.DERObjectIdentifier({oid:yn});return this.objCache[vn]=Rn,Rn}};le$3.asn1.x509.OID.oid2name=function(cr){var vn=le$3.asn1.x509.OID.name2oidList;for(var yn in vn)if(vn[yn]==cr)return yn;return""};le$3.asn1.x509.OID.oid2atype=function(cr){var vn=le$3.asn1.x509.OID.atype2oidList;for(var yn in vn)if(vn[yn]==cr)return yn;return cr};le$3.asn1.x509.OID.name2oid=function(cr){if(cr.match(/^[0-9.]+$/))return cr;var vn=le$3.asn1.x509.OID.name2oidList;return vn[cr]===void 0?"":vn[cr]};Oe$2.getPosArrayOfChildrenFromHex=function(cr){return he$2.getChildIdx(cr,0)};Oe$2.getHexValueArrayOfChildrenFromHex=function(cr){var vn=he$2,yn=vn.getV,Yl=Oe$2.getPosArrayOfChildrenFromHex(cr),Rn=yn(cr,Yl[0]),Bn=yn(cr,Yl[1]),Co=yn(cr,Yl[2]),Po=yn(cr,Yl[3]),To=yn(cr,Yl[4]),Io=yn(cr,Yl[5]),$l=yn(cr,Yl[6]),Wl=yn(cr,Yl[7]),Xl=yn(cr,Yl[8]),Yl=new Array;return Yl.push(Rn,Bn,Co,Po,To,Io,$l,Wl,Xl),Yl};Oe$2.prototype.readPrivateKeyFromPEMString=function(cr){var vn=In(cr),yn=Oe$2.getHexValueArrayOfChildrenFromHex(vn);this.setPrivateEx(yn[1],yn[2],yn[3],yn[4],yn[5],yn[6],yn[7],yn[8])};Oe$2.prototype.readPKCS5PrvKeyHex=function(cr){var vn=Oe$2.getHexValueArrayOfChildrenFromHex(cr);this.setPrivateEx(vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],vn[8])};Oe$2.prototype.readPKCS8PrvKeyHex=function(cr){var vn,yn,Rn,Bn,Co,Po,To,Io,$l=he$2,Wl=$l.getVbyListEx;if($l.isASN1HEX(cr)===!1)throw new Error("not ASN.1 hex string");try{vn=Wl(cr,0,[2,0,1],"02"),yn=Wl(cr,0,[2,0,2],"02"),Rn=Wl(cr,0,[2,0,3],"02"),Bn=Wl(cr,0,[2,0,4],"02"),Co=Wl(cr,0,[2,0,5],"02"),Po=Wl(cr,0,[2,0,6],"02"),To=Wl(cr,0,[2,0,7],"02"),Io=Wl(cr,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(vn,yn,Rn,Bn,Co,Po,To,Io)};Oe$2.prototype.readPKCS5PubKeyHex=function(cr){var vn=he$2,yn=vn.getV;if(vn.isASN1HEX(cr)===!1)throw new Error("keyHex is not ASN.1 hex string");var Rn=vn.getChildIdx(cr,0);if(Rn.length!==2||cr.substr(Rn[0],2)!=="02"||cr.substr(Rn[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var Bn=yn(cr,Rn[0]),Co=yn(cr,Rn[1]);this.setPublic(Bn,Co)};Oe$2.prototype.readPKCS8PubKeyHex=function(cr){var vn=he$2;if(vn.isASN1HEX(cr)===!1)throw new Error("not ASN.1 hex string");if(vn.getTLVbyListEx(cr,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var yn=vn.getTLVbyListEx(cr,0,[1,0]);this.readPKCS5PubKeyHex(yn)};Oe$2.prototype.readCertPubKeyHex=function(cr,vn){var yn,Rn;yn=new Ze$1,yn.readCertHex(cr),Rn=yn.getPublicKeyHex(),this.readPKCS8PubKeyHex(Rn)};function pu(cr){for(var vn in le$3.crypto.Util.DIGESTINFOHEAD){var yn=le$3.crypto.Util.DIGESTINFOHEAD[vn],Rn=yn.length;if(cr.substring(0,Rn)==yn){var Bn=[vn,cr.substring(Rn)];return Bn}}return[]}Oe$2.prototype.verify=function(cr,vn){if(vn=vn.toLowerCase(),vn.match(/^[0-9a-f]+$/)==null)return!1;var yn=qt$1(vn,16),Rn=this.n.bitLength();if(yn.bitLength()>Rn)return!1;var Bn=this.doPublic(yn),Co=Bn.toString(16);if(Co.length+3!=Rn/4)return!1;var Po=Co.replace(/^1f+00/,""),To=pu(Po);if(To.length==0)return!1;var Io=To[0],$l=To[1],Wl=function(Yl){return le$3.crypto.Util.hashString(Yl,Io)},Xl=Wl(cr);return $l==Xl};Oe$2.prototype.verifyWithMessageHash=function(cr,vn){if(vn.length!=Math.ceil(this.n.bitLength()/4))return!1;var yn=qt$1(vn,16);if(yn.bitLength()>this.n.bitLength())return 0;var Rn=this.doPublic(yn),Bn=Rn.toString(16).replace(/^1f+00/,""),Co=pu(Bn);if(Co.length==0)return!1;Co[0];var Po=Co[1];return Po==cr};Oe$2.prototype.verifyPSS=function(cr,vn,yn,Rn){var Bn=function(Po){return le$3.crypto.Util.hashHex(Po,yn)},Co=Bn(Aa(cr));return Rn===void 0&&(Rn=-1),this.verifyWithMessageHashPSS(Co,vn,yn,Rn)};Oe$2.prototype.verifyWithMessageHashPSS=function(cr,vn,yn,Rn){if(vn.length!=Math.ceil(this.n.bitLength()/4))return!1;var Bn=new me$2(vn,16),Co=function(ty){return le$3.crypto.Util.hashHex(ty,yn)},Po=_r$1(cr),To=Po.length,Io=this.n.bitLength()-1,$l=Math.ceil(Io/8),Wl;if(Rn===-1||Rn===void 0)Rn=To;else if(Rn===-2)Rn=$l-To-2;else if(Rn<-2)throw new Error("invalid salt length");if($l<To+Rn+2)throw new Error("data too long");var Xl=this.doPublic(Bn).toByteArray();for(Wl=0;Wl<Xl.length;Wl+=1)Xl[Wl]&=255;for(;Xl.length<$l;)Xl.unshift(0);if(Xl[$l-1]!==188)throw new Error("encoded message does not end in 0xbc");Xl=String.fromCharCode.apply(String,Xl);var Yl=Xl.substr(0,$l-To-1),Zl=Xl.substr(Yl.length,To),ey=65280>>8*$l-Io&255;if(Yl.charCodeAt(0)&ey)throw new Error("bits beyond keysize not zero");var Rm=pss_mgf1_str(Zl,Yl.length,Co),ry=[];for(Wl=0;Wl<Yl.length;Wl+=1)ry[Wl]=Yl.charCodeAt(Wl)^Rm.charCodeAt(Wl);ry[0]&=~ey;var _g=$l-To-Rn-2;for(Wl=0;Wl<_g;Wl+=1)if(ry[Wl]!==0)throw new Error("leftmost octets not zero");if(ry[_g]!==1)throw new Error("0x01 marker not found");return Zl===_r$1(Co(Aa("\0\0\0\0\0\0\0\0"+Po+String.fromCharCode.apply(String,ry.slice(-Rn)))))};Oe$2.SALT_LEN_HLEN=-1;Oe$2.SALT_LEN_MAX=-2;Oe$2.SALT_LEN_RECOVER=-2;function Ze$1(cr){var vn=he$2,yn=vn.getChildIdx,Rn=vn.getV,Bn=vn.getTLV,Co=vn.getVbyList,Po=vn.getVbyListEx,To=vn.getTLVbyList,Io=vn.getTLVbyListEx,$l=vn.getIdxbyList,Wl=vn.getIdxbyListEx,Xl=vn.getVidx,Yl=vn.getInt,Zl=vn.oidname,ey=vn.hextooidstr,Rm=In,ry;try{ry=le$3.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var _g=To(this.hex,0,[0,0]);if(_g.substr(0,2)=="a0"){var ty=To(_g,0,[0]),ny=Yl(ty,0);if(ny<0||2<ny)throw new Error("malformed version field");return this.version=ny+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Po(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var _g=Io(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(_g)},this.getAlgorithmIdentifierName=function(_g){for(var ty in ry)if(_g===ry[ty])return ty;return Zl(Po(_g,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return To(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var _g=this.getIssuer();return _g.str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return To(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var _g=this.getSubject();return _g.str},this.getNotBefore=function(){var _g=Co(this.hex,0,[0,4+this.foffset,0]);return _g=_g.replace(/(..)/g,"%$1"),_g=decodeURIComponent(_g),_g},this.getNotAfter=function(){var _g=Co(this.hex,0,[0,4+this.foffset,1]);return _g=_g.replace(/(..)/g,"%$1"),_g=decodeURIComponent(_g),_g},this.getPublicKeyHex=function(){return vn.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return $l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var _g=this.getPublicKeyIdx();return $l(this.hex,_g,[1,0],"30")},this.getPublicKey=function(){return Mn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var _g=To(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(_g)},this.getSignatureValueHex=function(){return Co(this.hex,0,[2],"03",!0)},this.verifySignature=function(_g){var ty=this.getSignatureAlgorithmField(),ny=this.getSignatureValueHex(),iy=To(this.hex,0,[0],"30"),oy=new le$3.crypto.Signature({alg:ty});return oy.init(_g),oy.updateHex(iy),oy.verify(ny)},this.parseExt=function(_g){var ty,ny,iy;if(_g===void 0){if(iy=this.hex,this.version!==3)return-1;ty=$l(iy,0,[0,7,0],"30"),ny=yn(iy,ty)}else{iy=In(_g);var oy=$l(iy,0,[0,3,0,0],"06");if(Rn(iy,oy)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}ty=$l(iy,0,[0,3,0,1,0],"30"),ny=yn(iy,ty),this.hex=iy}this.aExtInfo=new Array;for(var ay=0;ay<ny.length;ay++){var uy={};uy.critical=!1;var hy=yn(iy,ny[ay]),my=0;hy.length===3&&(uy.critical=!0,my=1),uy.oid=vn.hextooidstr(Co(iy,ny[ay],[0],"06"));var ly=$l(iy,ny[ay],[1+my]);uy.vidx=Xl(iy,ly),this.aExtInfo.push(uy)}},this.getExtInfo=function(_g){var ty=this.aExtInfo,ny=_g;if(_g.match(/^[0-9.]+$/)||(ny=le$3.asn1.x509.OID.name2oid(_g)),ny!==""){for(var iy=0;iy<ty.length;iy++)if(ty[iy].oid===ny)return ty[iy]}},this.getExtBasicConstraints=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("basicConstraints");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"basicConstraints"};if(ty&&(iy.critical=!0),_g==="3000")return iy;if(_g==="30030101ff")return iy.cA=!0,iy;if(_g.substr(0,12)==="30060101ff02"){var oy=Rn(_g,10),ay=parseInt(oy,16);return iy.cA=!0,iy.pathLen=ay,iy}throw new Error("hExtV parse error: "+_g)},this.getExtKeyUsage=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("keyUsage");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"keyUsage"};return ty&&(iy.critical=!0),iy.names=this.getExtKeyUsageString(_g).split(","),iy},this.getExtKeyUsageBin=function(_g){if(_g===void 0){var ty=this.getExtInfo("keyUsage");if(ty===void 0)return"";_g=Bn(this.hex,ty.vidx)}if(_g.length!=8&&_g.length!=10)throw new Error("malformed key usage value: "+_g);var ny="000000000000000"+parseInt(_g.substr(6),16).toString(2);return _g.length==8&&(ny=ny.slice(-8)),_g.length==10&&(ny=ny.slice(-16)),ny=ny.replace(/0+$/,""),ny==""&&(ny="0"),ny},this.getExtKeyUsageString=function(_g){for(var ty=this.getExtKeyUsageBin(_g),ny=new Array,iy=0;iy<ty.length;iy++)ty.substr(iy,1)=="1"&&ny.push(Ze$1.KEYUSAGE_NAME[iy]);return ny.join(",")},this.getExtSubjectKeyIdentifier=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("subjectKeyIdentifier");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"subjectKeyIdentifier"};ty&&(iy.critical=!0);var oy=Rn(_g,0);return iy.kid={hex:oy},iy},this.getExtAuthorityKeyIdentifier=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("authorityKeyIdentifier");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"authorityKeyIdentifier"};ty&&(iy.critical=!0);for(var oy=yn(_g,0),ay=0;ay<oy.length;ay++){var uy=_g.substr(oy[ay],2);if(uy==="80"&&(iy.kid={hex:Rn(_g,oy[ay])}),uy==="a1"){var hy=Bn(_g,oy[ay]),my=this.getGeneralNames(hy);iy.issuer=my[0].dn}uy==="82"&&(iy.sn={hex:Rn(_g,oy[ay])})}return iy},this.getExtExtKeyUsage=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("extKeyUsage");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"extKeyUsage",array:[]};ty&&(iy.critical=!0);for(var oy=yn(_g,0),ay=0;ay<oy.length;ay++)iy.array.push(Zl(Rn(_g,oy[ay])));return iy},this.getExtExtKeyUsageName=function(){var _g=this.getExtInfo("extKeyUsage");if(_g===void 0)return _g;var ty=new Array,ny=Bn(this.hex,_g.vidx);if(ny==="")return ty;for(var iy=yn(ny,0),oy=0;oy<iy.length;oy++)ty.push(Zl(Rn(ny,iy[oy])));return ty},this.getExtSubjectAltName=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("subjectAltName");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"subjectAltName",array:[]};return ty&&(iy.critical=!0),iy.array=this.getGeneralNames(_g),iy},this.getExtIssuerAltName=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("issuerAltName");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"issuerAltName",array:[]};return ty&&(iy.critical=!0),iy.array=this.getGeneralNames(_g),iy},this.getGeneralNames=function(_g){for(var ty=yn(_g,0),ny=[],iy=0;iy<ty.length;iy++){var oy=this.getGeneralName(Bn(_g,ty[iy]));oy!==void 0&&ny.push(oy)}return ny},this.getGeneralName=function(_g){var ty=_g.substr(0,2),ny=Rn(_g,0),iy=_r$1(ny);if(ty=="81")return{rfc822:iy};if(ty=="82")return{dns:iy};if(ty=="86")return{uri:iy};if(ty=="87")return{ip:Lo(ny)};if(ty=="a4")return{dn:this.getX500Name(ny)}},this.getExtSubjectAltName2=function(){var _g,ty,ny,iy=this.getExtInfo("subjectAltName");if(iy===void 0)return iy;for(var oy=new Array,ay=Bn(this.hex,iy.vidx),uy=yn(ay,0),hy=0;hy<uy.length;hy++)ny=ay.substr(uy[hy],2),_g=Rn(ay,uy[hy]),ny==="81"&&(ty=Fr$1(_g),oy.push(["MAIL",ty])),ny==="82"&&(ty=Fr$1(_g),oy.push(["DNS",ty])),ny==="84"&&(ty=Ze$1.hex2dn(_g,0),oy.push(["DN",ty])),ny==="86"&&(ty=Fr$1(_g),oy.push(["URI",ty])),ny==="87"&&(ty=Lo(_g),oy.push(["IP",ty]));return oy},this.getExtCRLDistributionPoints=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("cRLDistributionPoints");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"cRLDistributionPoints",array:[]};ty&&(iy.critical=!0);for(var oy=yn(_g,0),ay=0;ay<oy.length;ay++){var uy=Bn(_g,oy[ay]);iy.array.push(this.getDistributionPoint(uy))}return iy},this.getDistributionPoint=function(_g){for(var ty={},ny=yn(_g,0),iy=0;iy<ny.length;iy++){var oy=_g.substr(ny[iy],2),ay=Bn(_g,ny[iy]);oy=="a0"&&(ty.dpname=this.getDistributionPointName(ay))}return ty},this.getDistributionPointName=function(_g){for(var ty={},ny=yn(_g,0),iy=0;iy<ny.length;iy++){var oy=_g.substr(ny[iy],2),ay=Bn(_g,ny[iy]);oy=="a0"&&(ty.full=this.getGeneralNames(ay))}return ty},this.getExtCRLDistributionPointsURI=function(){var _g=this.getExtInfo("cRLDistributionPoints");if(_g===void 0)return _g;for(var ty=new Array,ny=yn(this.hex,_g.vidx),iy=0;iy<ny.length;iy++)try{var oy=Co(this.hex,ny[iy],[0,0,0],"86"),ay=Fr$1(oy);ty.push(ay)}catch{}return ty},this.getExtAIAInfo=function(){var _g=this.getExtInfo("authorityInfoAccess");if(_g===void 0)return _g;for(var ty={ocsp:[],caissuer:[]},ny=yn(this.hex,_g.vidx),iy=0;iy<ny.length;iy++){var oy=Co(this.hex,ny[iy],[0],"06"),ay=Co(this.hex,ny[iy],[1],"86");oy==="2b06010505073001"&&ty.ocsp.push(Fr$1(ay)),oy==="2b06010505073002"&&ty.caissuer.push(Fr$1(ay))}return ty},this.getExtAuthorityInfoAccess=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("authorityInfoAccess");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"authorityInfoAccess",array:[]};ty&&(iy.critical=!0);for(var oy=yn(_g,0),ay=0;ay<oy.length;ay++){var uy=Po(_g,oy[ay],[0],"06"),hy=Co(_g,oy[ay],[1],"86"),my=Fr$1(hy);if(uy=="2b06010505073001")iy.array.push({ocsp:my});else if(uy=="2b06010505073002")iy.array.push({caissuer:my});else throw new Error("unknown method: "+uy)}return iy},this.getExtCertificatePolicies=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("certificatePolicies");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"certificatePolicies",array:[]};ty&&(iy.critical=!0);for(var oy=yn(_g,0),ay=0;ay<oy.length;ay++){var uy=Bn(_g,oy[ay]),hy=this.getPolicyInformation(uy);iy.array.push(hy)}return iy},this.getPolicyInformation=function(_g){var ty={},ny=Co(_g,0,[0],"06");ty.policyoid=Zl(ny);var iy=Wl(_g,0,[1],"30");if(iy!=-1){ty.array=[];for(var oy=yn(_g,iy),ay=0;ay<oy.length;ay++){var uy=Bn(_g,oy[ay]),hy=this.getPolicyQualifierInfo(uy);ty.array.push(hy)}}return ty},this.getPolicyQualifierInfo=function(_g){var ty={},ny=Co(_g,0,[0],"06");if(ny==="2b06010505070201"){var iy=Po(_g,0,[1],"16");ty.cps=_r$1(iy)}else if(ny==="2b06010505070202"){var oy=To(_g,0,[1],"30");ty.unotice=this.getUserNotice(oy)}return ty},this.getUserNotice=function(_g){for(var ty={},ny=yn(_g,0),iy=0;iy<ny.length;iy++){var oy=Bn(_g,ny[iy]);oy.substr(0,2)!="30"&&(ty.exptext=this.getDisplayText(oy))}return ty},this.getDisplayText=function(_g){var ty={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},ny={};return ny.type=ty[_g.substr(0,2)],ny.str=_r$1(Rn(_g,0)),ny},this.getExtCRLNumber=function(_g,ty){var ny={extname:"cRLNumber"};if(ty&&(ny.critical=!0),_g.substr(0,2)=="02")return ny.num={hex:Rn(_g,0)},ny;throw new Error("hExtV parse error: "+_g)},this.getExtCRLReason=function(_g,ty){var ny={extname:"cRLReason"};if(ty&&(ny.critical=!0),_g.substr(0,2)=="0a")return ny.code=parseInt(Rn(_g,0),16),ny;throw new Error("hExtV parse error: "+_g)},this.getExtOcspNonce=function(_g,ty){var ny={extname:"ocspNonce"};ty&&(ny.critical=!0);var iy=Rn(_g,0);return ny.hex=iy,ny},this.getExtOcspNoCheck=function(_g,ty){var ny={extname:"ocspNoCheck"};return ty&&(ny.critical=!0),ny},this.getExtAdobeTimeStamp=function(_g,ty){if(_g===void 0&&ty===void 0){var ny=this.getExtInfo("adobeTimeStamp");if(ny===void 0)return;_g=Bn(this.hex,ny.vidx),ty=ny.critical}var iy={extname:"adobeTimeStamp"};ty&&(iy.critical=!0);var oy=yn(_g,0);if(oy.length>1){var ay=Bn(_g,oy[1]),uy=this.getGeneralName(ay);uy.uri!=null&&(iy.uri=uy.uri)}if(oy.length>2){var hy=Bn(_g,oy[2]);hy=="0101ff"&&(iy.reqauth=!0),hy=="010100"&&(iy.reqauth=!1)}return iy},this.getX500NameRule=function(_g){for(var ty=null,ny=[],iy=0;iy<_g.length;iy++)for(var oy=_g[iy],ay=0;ay<oy.length;ay++)ny.push(oy[ay]);for(var iy=0;iy<ny.length;iy++){var uy=ny[iy],hy=uy.ds,my=uy.value,ly=uy.type;if(hy!="prn"&&hy!="utf8"&&hy!="ia5")return"mixed";if(hy=="ia5"){if(ly!="CN")return"mixed";if(le$3.lang.String.isMail(my))continue;return"mixed"}if(ly=="C"){if(hy=="prn")continue;return"mixed"}if(ty==null)ty=hy;else if(ty!==hy)return"mixed"}return ty==null?"prn":ty},this.getX500Name=function(_g){var ty=this.getX500NameArray(_g),ny=this.dnarraytostr(ty);return{array:ty,str:ny}},this.getX500NameArray=function(_g){for(var ty=[],ny=yn(_g,0),iy=0;iy<ny.length;iy++)ty.push(this.getRDN(Bn(_g,ny[iy])));return ty},this.getRDN=function(_g){for(var ty=[],ny=yn(_g,0),iy=0;iy<ny.length;iy++)ty.push(this.getAttrTypeAndValue(Bn(_g,ny[iy])));return ty},this.getAttrTypeAndValue=function(_g){var ty={type:null,value:null,ds:null},ny=yn(_g,0),iy=Co(_g,ny[0],[],"06"),oy=Co(_g,ny[1],[]),ay=le$3.asn1.ASN1Util.oidHexToInt(iy);return ty.type=le$3.asn1.x509.OID.oid2atype(ay),ty.ds=this.HEX2STAG[_g.substr(ny[1],2)],ty.ds!="bmp"?ty.value=Fr$1(oy):ty.value=cf(oy),ty},this.readCertPEM=function(_g){this.readCertHex(Rm(_g))},this.readCertHex=function(_g){this.hex=_g,this.getVersion();try{$l(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var _g={};return _g.version=this.getVersion(),_g.serial={hex:this.getSerialNumberHex()},_g.sigalg=this.getSignatureAlgorithmField(),_g.issuer=this.getIssuer(),_g.notbefore=this.getNotBefore(),_g.notafter=this.getNotAfter(),_g.subject=this.getSubject(),_g.sbjpubkey=sf(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(_g.ext=this.getExtParamArray()),_g.sighex=this.getSignatureValueHex(),_g},this.getExtParamArray=function(_g){if(_g==null){var ty=Wl(this.hex,0,[0,"[3]"]);ty!=-1&&(_g=Io(this.hex,0,[0,"[3]",0],"30"))}for(var ny=[],iy=yn(_g,0),oy=0;oy<iy.length;oy++){var ay=Bn(_g,iy[oy]),uy=this.getExtParam(ay);uy!=null&&ny.push(uy)}return ny},this.getExtParam=function(_g){var ty=yn(_g,0),ny=ty.length;if(ny!=2&&ny!=3)throw new Error("wrong number elements in Extension: "+ny+" "+_g);var iy=ey(Co(_g,0,[0],"06")),oy=!1;ny==3&&To(_g,0,[1])=="0101ff"&&(oy=!0);var ay=To(_g,0,[ny-1,0]),uy=void 0;if(iy=="2.5.29.14"?uy=this.getExtSubjectKeyIdentifier(ay,oy):iy=="2.5.29.15"?uy=this.getExtKeyUsage(ay,oy):iy=="2.5.29.17"?uy=this.getExtSubjectAltName(ay,oy):iy=="2.5.29.18"?uy=this.getExtIssuerAltName(ay,oy):iy=="2.5.29.19"?uy=this.getExtBasicConstraints(ay,oy):iy=="2.5.29.31"?uy=this.getExtCRLDistributionPoints(ay,oy):iy=="2.5.29.32"?uy=this.getExtCertificatePolicies(ay,oy):iy=="2.5.29.35"?uy=this.getExtAuthorityKeyIdentifier(ay,oy):iy=="2.5.29.37"?uy=this.getExtExtKeyUsage(ay,oy):iy=="1.3.6.1.5.5.7.1.1"?uy=this.getExtAuthorityInfoAccess(ay,oy):iy=="2.5.29.20"?uy=this.getExtCRLNumber(ay,oy):iy=="2.5.29.21"?uy=this.getExtCRLReason(ay,oy):iy=="1.3.6.1.5.5.7.48.1.2"?uy=this.getExtOcspNonce(ay,oy):iy=="1.3.6.1.5.5.7.48.1.5"?uy=this.getExtOcspNoCheck(ay,oy):iy=="1.2.840.113583.1.1.9.1"&&(uy=this.getExtAdobeTimeStamp(ay,oy)),uy!=null)return uy;var hy={extname:iy,extn:ay};return oy&&(hy.critical=!0),hy},this.findExt=function(_g,ty){for(var ny=0;ny<_g.length;ny++)if(_g[ny].extname==ty)return _g[ny];return null},this.dnarraytostr=function(_g){function ty(iy){return iy.map(function(oy){return ny(oy).replace(/\+/,"\\+")}).join("+")}function ny(iy){return iy.type+"="+iy.value}return"/"+_g.map(function(iy){return ty(iy).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var _g=function(wy){var Cy=JSON.stringify(wy.array).replace(/[\[\]\{\}\"]/g,"");return Cy},ty=function(wy){for(var Cy="",My=wy.array,Py=0;Py<My.length;Py++){var Dy=My[Py];if(Cy+="    policy oid: "+Dy.policyoid+`
`,Dy.array!==void 0)for(var qy=0;qy<Dy.array.length;qy++){var Xy=Dy.array[qy];Xy.cps!==void 0&&(Cy+="    cps: "+Xy.cps+`
`)}}return Cy},ny=function(wy){for(var Cy="",My=wy.array,Py=0;Py<My.length;Py++){var Dy=My[Py];try{Dy.dpname.full[0].uri!==void 0&&(Cy+="    "+Dy.dpname.full[0].uri+`
`)}catch{}try{Dy.dname.full[0].dn.hex!==void 0&&(Cy+="    "+Ze$1.hex2dn(Dy.dpname.full[0].dn.hex)+`
`)}catch{}}return Cy},iy=function(wy){for(var Cy="",My=wy.array,Py=0;Py<My.length;Py++){var Dy=My[Py];Dy.caissuer!==void 0&&(Cy+="    caissuer: "+Dy.caissuer+`
`),Dy.ocsp!==void 0&&(Cy+="    ocsp: "+Dy.ocsp+`
`)}return Cy},oy,ay,uy;if(oy=`Basic Fields
`,oy+="  serial number: "+this.getSerialNumberHex()+`
`,oy+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,oy+="  issuer: "+this.getIssuerString()+`
`,oy+="  notBefore: "+this.getNotBefore()+`
`,oy+="  notAfter: "+this.getNotAfter()+`
`,oy+="  subject: "+this.getSubjectString()+`
`,oy+=`  subject public key info: 
`,ay=this.getPublicKey(),oy+="    key algorithm: "+ay.type+`
`,ay.type==="RSA"&&(oy+="    n="+ko(ay.n.toString(16)).substr(0,16)+`...
`,oy+="    e="+ko(ay.e.toString(16))+`
`),uy=this.aExtInfo,uy!=null){oy+=`X509v3 Extensions:
`;for(var hy=0;hy<uy.length;hy++){var my=uy[hy],ly=le$3.asn1.x509.OID.oid2name(my.oid);ly===""&&(ly=my.oid);var sy="";if(my.critical===!0&&(sy="CRITICAL"),oy+="  "+ly+" "+sy+`:
`,ly==="basicConstraints"){var cy=this.getExtBasicConstraints();cy.cA===void 0?oy+=`    {}
`:(oy+="    cA=true",cy.pathLen!==void 0&&(oy+=", pathLen="+cy.pathLen),oy+=`
`)}else if(ly==="keyUsage")oy+="    "+this.getExtKeyUsageString()+`
`;else if(ly==="subjectKeyIdentifier")oy+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(ly==="authorityKeyIdentifier"){var fy=this.getExtAuthorityKeyIdentifier();fy.kid!==void 0&&(oy+="    kid="+fy.kid.hex+`
`)}else if(ly==="extKeyUsage"){var vy=this.getExtExtKeyUsage().array;oy+="    "+vy.join(", ")+`
`}else if(ly==="subjectAltName"){var dy=_g(this.getExtSubjectAltName());oy+="    "+dy+`
`}else if(ly==="cRLDistributionPoints"){var Ay=this.getExtCRLDistributionPoints();oy+=ny(Ay)}else if(ly==="authorityInfoAccess"){var gy=this.getExtAuthorityInfoAccess();oy+=iy(gy)}else ly==="certificatePolicies"&&(oy+=ty(this.getExtCertificatePolicies()))}}return oy+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,oy+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,oy},typeof cr=="string"&&(cr.indexOf("-----BEGIN")!=-1?this.readCertPEM(cr):le$3.lang.String.isHex(cr)&&this.readCertHex(cr))}Ze$1.hex2dn=function(cr,vn){vn===void 0&&(vn=0);var yn=new Ze$1;he$2.getTLV(cr,vn);var Rn=yn.getX500Name(cr);return Rn.str};Ze$1.hex2rdn=function(cr,vn){if(vn===void 0&&(vn=0),cr.substr(vn,2)!=="31")throw new Error("malformed RDN");for(var yn=new Array,Rn=he$2.getChildIdx(cr,vn),Bn=0;Bn<Rn.length;Bn++)yn.push(Ze$1.hex2attrTypeValue(cr,Rn[Bn]));return yn=yn.map(function(Co){return Co.replace("+","\\+")}),yn.join("+")};Ze$1.hex2attrTypeValue=function(cr,vn){var yn=he$2,Rn=yn.getV;if(vn===void 0&&(vn=0),cr.substr(vn,2)!=="30")throw new Error("malformed attribute type and value");var Bn=yn.getChildIdx(cr,vn);Bn.length!==2||cr.substr(Bn[0],2);var Co=Rn(cr,Bn[0]),Po=le$3.asn1.ASN1Util.oidHexToInt(Co),To=le$3.asn1.x509.OID.oid2atype(Po),Io=Rn(cr,Bn[1]),$l=_r$1(Io);return To+"="+$l};Ze$1.getPublicKeyFromCertHex=function(cr){var vn=new Ze$1;return vn.readCertHex(cr),vn.getPublicKey()};Ze$1.getPublicKeyFromCertPEM=function(cr){var vn=new Ze$1;return vn.readCertPEM(cr),vn.getPublicKey()};Ze$1.getPublicKeyInfoPropOfCertPEM=function(cr){var vn=he$2,yn=vn.getVbyList,Rn={},Bn,Co;return Rn.algparam=null,Bn=new Ze$1,Bn.readCertPEM(cr),Co=Bn.getPublicKeyHex(),Rn.keyhex=yn(Co,0,[1],"03").substr(2),Rn.algoid=yn(Co,0,[0,0],"06"),Rn.algoid==="2a8648ce3d0201"&&(Rn.algparam=yn(Co,0,[0,1],"06")),Rn};Ze$1.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];function zo(cr){return Se.SHA256(cr).toString()}var vu=[function(){var cr=new Ze$1;return cr.readCertPEM(function(){var vn=113,yn=126,Rn=0,Bn="";return arguments[Rn].split(Bn).map(function(Co){return Co.charCodeAt(Rn)>yn?Co:String.fromCharCode((Co.charCodeAt(Rn)+vn)%yn)}).join(Bn)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),cr}()];function hf(cr,vn){for(var yn=0,Rn=vn;yn<Rn.length;yn++){var Bn=Rn[yn];if(Bn.getSubjectHex()===cr)return Bn}}function mu(cr,vn){var yn=cr.getIssuerHex();if(yn===cr.getSubjectHex())return cr.verifySignature(cr.getPublicKey());var Rn=hf(yn,vn);return!Rn||cr.verifySignature(Rn.getPublicKey())===!1?!1:mu(Rn,vn)}function Au(cr){var vn=cr.getIssuerHex();return vn===cr.getSubjectHex()?!1:mu(cr,vu)}function pf(cr){var vn=new Ze$1;typeof cr=="string"?vn.readCertPEM(cr):vn.readCertHex(cr.hex);var yn=Au(vn);return vu.push(vn),yn}function vf(cr,vn,yn){var Rn=new Ze$1;if(typeof yn=="string"?Rn.readCertPEM(yn):Rn.readCertHex(yn.hex),Au(Rn)===!1)return!1;var Bn=new Oe$2;return Bn.readCertPubKeyHex(Rn.hex,6),!!Bn.verify(cr,j0(vn))}pf(function(){var cr=113,vn=126,yn=0,Rn="";return arguments[yn].split(Rn).map(function(Bn){return Bn.charCodeAt(yn)>vn?Bn:String.fromCharCode((Bn.charCodeAt(yn)+cr)%vn)}).join(Rn)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var x0=function(cr,vn){return x0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yn,Rn){yn.__proto__=Rn}||function(yn,Rn){for(var Bn in Rn)Object.prototype.hasOwnProperty.call(Rn,Bn)&&(yn[Bn]=Rn[Bn])},x0(cr,vn)};function fe$6(cr,vn){if(typeof vn!="function"&&vn!==null)throw new TypeError("Class extends value "+String(vn)+" is not a constructor or null");x0(cr,vn);function yn(){this.constructor=cr}cr.prototype=vn===null?Object.create(vn):(yn.prototype=vn.prototype,new yn)}var O$n=function(){return O$n=Object.assign||function(cr){for(var vn,yn=1,Rn=arguments.length;yn<Rn;yn++){vn=arguments[yn];for(var Bn in vn)Object.prototype.hasOwnProperty.call(vn,Bn)&&(cr[Bn]=vn[Bn])}return cr},O$n.apply(this,arguments)};function Jt$2(cr,vn,yn,Rn){var Bn=arguments.length,Co=Bn<3?vn:Rn===null?Rn=Object.getOwnPropertyDescriptor(vn,yn):Rn,Po;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Co=Reflect.decorate(cr,vn,yn,Rn);else for(var To=cr.length-1;To>=0;To--)(Po=cr[To])&&(Co=(Bn<3?Po(Co):Bn>3?Po(vn,yn,Co):Po(vn,yn))||Co);return Bn>3&&Co&&Object.defineProperty(vn,yn,Co),Co}function Kt$1(cr,vn){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(cr,vn)}function ga(cr,vn,yn,Rn){function Bn(Co){return Co instanceof yn?Co:new yn(function(Po){Po(Co)})}return new(yn||(yn=Promise))(function(Co,Po){function To(Wl){try{$l(Rn.next(Wl))}catch(Xl){Po(Xl)}}function Io(Wl){try{$l(Rn.throw(Wl))}catch(Xl){Po(Xl)}}function $l(Wl){Wl.done?Co(Wl.value):Bn(Wl.value).then(To,Io)}$l((Rn=Rn.apply(cr,vn||[])).next())})}function ya(cr,vn){var yn={label:0,sent:function(){if(Co[0]&1)throw Co[1];return Co[1]},trys:[],ops:[]},Rn,Bn,Co,Po=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Po.next=To(0),Po.throw=To(1),Po.return=To(2),typeof Symbol=="function"&&(Po[Symbol.iterator]=function(){return this}),Po;function To($l){return function(Wl){return Io([$l,Wl])}}function Io($l){if(Rn)throw new TypeError("Generator is already executing.");for(;Po&&(Po=0,$l[0]&&(yn=0)),yn;)try{if(Rn=1,Bn&&(Co=$l[0]&2?Bn.return:$l[0]?Bn.throw||((Co=Bn.return)&&Co.call(Bn),0):Bn.next)&&!(Co=Co.call(Bn,$l[1])).done)return Co;switch(Bn=0,Co&&($l=[$l[0]&2,Co.value]),$l[0]){case 0:case 1:Co=$l;break;case 4:return yn.label++,{value:$l[1],done:!1};case 5:yn.label++,Bn=$l[1],$l=[0];continue;case 7:$l=yn.ops.pop(),yn.trys.pop();continue;default:if(Co=yn.trys,!(Co=Co.length>0&&Co[Co.length-1])&&($l[0]===6||$l[0]===2)){yn=0;continue}if($l[0]===3&&(!Co||$l[1]>Co[0]&&$l[1]<Co[3])){yn.label=$l[1];break}if($l[0]===6&&yn.label<Co[1]){yn.label=Co[1],Co=$l;break}if(Co&&yn.label<Co[2]){yn.label=Co[2],yn.ops.push($l);break}Co[2]&&yn.ops.pop(),yn.trys.pop();continue}$l=vn.call(cr,yn)}catch(Wl){$l=[6,Wl],Bn=0}finally{Rn=Co=0}if($l[0]&5)throw $l[1];return{value:$l[0]?$l[1]:void 0,done:!0}}}function yt$3(cr,vn,yn){if(yn||arguments.length===2)for(var Rn=0,Bn=vn.length,Co;Rn<Bn;Rn++)(Co||!(Rn in vn))&&(Co||(Co=Array.prototype.slice.call(vn,0,Rn)),Co[Rn]=vn[Rn]);return cr.concat(Co||Array.prototype.slice.call(vn))}function mf(cr){return typeof Symbol=="undefined"?"$Symbol<".concat(cr,">$"):Symbol(cr)}var di=mf("$$FIVE_EVENT$$");function Ui(cr){return cr[di]||(cr[di]={}),cr[di]}function Af(cr){cr[di]&&delete cr[di]}var X0=function(){function cr(){}return cr.prototype.hasListener=function(vn){var yn=Ui(this);return yn&&yn[vn]&&yn[vn].callbacks.length>0},cr.prototype.on=function(vn,yn,Rn){var Bn=this,Co=Ui(this);return Co[vn]||(Co[vn]={callbacks:[]}),Co[vn].callbacks.push([yn,Rn||!1]),function(){return Bn.off(vn,yn)}},cr.prototype.once=function(vn,yn){return this.on(vn,yn,!0)},cr.prototype.off=function(vn,yn){if(vn===void 0){Af(this);return}var Rn=Ui(this);if(Rn[vn]||(Rn[vn]={callbacks:[]}),yn===void 0){Rn[vn].callbacks.length=0;return}for(var Bn=0;Bn<Rn[vn].callbacks.length&&Rn[vn].callbacks[Bn][0]!==yn;Bn++);Bn<Rn[vn].callbacks.length&&Rn[vn].callbacks.splice(Bn,1)},cr.prototype.emit=function(vn){for(var yn=[],Rn=1;Rn<arguments.length;Rn++)yn[Rn-1]=arguments[Rn];var Bn=!1,Co=Ui(this);Co[vn]||(Co[vn]={callbacks:[]});for(var Po=Co[vn].callbacks.slice(),To=0,Io=Po;To<Io.length;To++){var $l=Io[To],Wl=$l[0],Xl=$l[1],Yl=Xl===void 0?!1:Xl,Zl=Wl.apply(void 0,yn);Yl&&this.off(vn,Wl),Zl===!1&&(Bn=!0)}return Bn},cr.prototype.waitUntil=function(vn,yn){var Rn=this;return new Promise(function(Bn){var Co=Rn.on(vn,function(){for(var Po=[],To=0;To<arguments.length;To++)Po[To]=arguments[To];(!yn||yn.apply(void 0,Po)!==!1)&&(Bn(Po),Co())})})},cr}();function q$q(){}var gf=typeof performance!="undefined"&&typeof performance.timing!="undefined"?performance.timing.navigationStart:Date.now(),Ae$3=typeof performance!="undefined"?function(){return gf+performance.now()}:function(){return Date.now()};function dn(cr){Object.freeze(cr);var vn=typeof cr=="function",yn=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(cr).forEach(function(Rn){yn.call(cr,Rn)&&(!vn||Rn!=="caller"&&Rn!=="callee"&&Rn!=="arguments")&&cr[Rn]!==null&&(typeof cr[Rn]=="object"||typeof cr[Rn]=="function")&&!Object.isFrozen(cr[Rn])&&dn(cr[Rn])}),cr}var Vo=/^([^.]+)(\.([^.]+))*$/;function yf(cr,vn){if(cr==="*")return!0;var yn=cr.split(".").reverse(),Rn=vn.split(".").reverse();if(yn.length<=1)return cr===vn;for(var Bn=0;Bn<yn.length;Bn++)if(yn[Bn]!==Rn[Bn])return!1;return!0}function Tn(cr){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(cr)}function mn(cr,vn){return Vo.test(cr)&&Vo.test(vn)&&yf(cr,vn)}var bf=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],kr$1=dn(JSON.parse(function(){var cr=113,vn=126,yn=0,Rn="";return arguments[yn].split(Rn).map(function(Bn){return Bn.charCodeAt(yn)>vn?Bn:String.fromCharCode((Bn.charCodeAt(yn)+cr)%vn)}).join(Rn)}("h/y|pnyu|/9/xr;p|z/9/yvn{wvn;p|z/9/rnyrr;p|z/9/rnyrr;p{/9/rnyrr;w}/9/uv;p|z/9/uv;p{/9/rnyrr;p{/9/rnyrr;p|z/9/ywpq{;p|z/9/rnyrr:pq{;p|z/9/rnyrr:pq{;p{/9/rnyrr;nv/9/;p{/9/pq{;p{/9/pnyp{|qr;vr/j"))),Si=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){return cr.call(this,"[NETWORK]: request proxy error(type: ".concat(Rn,", reason: ").concat(Bn,"): ").concat(yn))||this}return vn}(Error),Wn=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){var Co=cr.call(this,"[NETWORK]: response error(type: ".concat(Rn,", status: ").concat(Bn,"): ").concat(yn))||this;return Co.httpStatus=Bn,Co}return vn}(Error);(function(cr){fe$6(vn,cr);function vn(yn,Rn){return cr.call(this,"[NETWORK]: request abort(type: ".concat(Rn,"): ").concat(yn))||this}return vn})(Error);var gi=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){return cr.call(this,"[NETWORK]: request timeout(type: ".concat(Rn,", timeout: ").concat(Bn,"ms): ").concat(yn))||this}return vn}(Error),W0=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){return cr.call(this,"[NETWORK]: request forbidden(type: ".concat(Rn,", reason: ").concat(Bn,"): ").concat(yn))||this}return vn}(Error);function xf(cr){if(!cr)return{};for(var vn={},yn=cr.trim().split(`
`),Rn=0;Rn<yn.length;Rn++){var Bn=yn[Rn],Co=Bn.indexOf(":"),Po=Bn.slice(0,Co).trim().toLowerCase(),To=Bn.slice(Co+1).trim();To&&(vn[Po]?vn[Po]+=", "+To:vn[Po]=To)}return vn}function w0(cr){for(var vn=0,yn=bf;vn<yn.length;vn++){var Rn=yn[vn],Bn=cr.match(Rn);if(Bn)return"jsonp_"+Bn[1]}return null}function Do(cr){return w0(cr)!==null}function No$1(cr){var vn=cr.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return vn?vn[1]:location.protocol}function Z0(cr){if(/^blob\:/i.test(cr))return"blob:";if(/^data\:/i.test(cr))return"data:";var vn=cr.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/i);return vn?vn[2]:location.hostname}var wf=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn}(X0);function Kn(cr,vn,yn,Rn,Bn){vn===void 0&&(vn={}),yn===void 0&&(yn=q$q),Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q);var Co=Ae$3(),Po=cr;return Promise.resolve().then(function(){return vn.requestProxy?vn.requestProxy(cr):cr}).then(function(To){return/^https\:/.test(location.href)&&/^http\:/.test(To)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(To,"'. This request was automatically upgraded to HTTPS")),To.replace(/^http\:/,"https:")):To}).catch(function(To){var Io,$l=w0(cr),Wl=$l?"Script":"XMLHttpRequest",Xl=new Si(Po,Wl,To&&To.message?String(To.message):String(To));return(Io=vn.networkSubscribe)===null||Io===void 0||Io.emit("network",cr,Wl,"proxy-error",Xl.message),Promise.reject(Xl)}).then(function(To){return new Promise(function(Io,$l){var Wl,Xl=vn.allowHosts?kr$1.concat(vn.allowHosts):kr$1.slice(),Yl=Z0(To),Zl=w0(To);if(location.hostname.length!==0&&!Tn(location.hostname)&&kr$1.filter(function(fy){return mn(fy,location.hostname)}).length===0&&!Tn(Yl)&&Xl.filter(function(fy){return mn(fy,Yl)}).length===0){var ey=Zl?"Script":"XMLHttpRequest",Rm=new W0(To,ey,"request host(".concat(Yl,") is not allowed"));Rn(Rm),$l(Rm),(Wl=vn.networkSubscribe)===null||Wl===void 0||Wl.emit("network",To,ey,"forbidden",Rm.message);return}if(Zl){var ry=window,_g=null,ty=!1,ny=document.createElement("script"),iy=function(){var fy;if(_g=null,ty!==!0){ty=!0;var vy=new gi(To,"Script",vn.timeout||NaN);Rn(vy),$l(vy),(fy=vn.networkSubscribe)===null||fy===void 0||fy.emit("network",To,"Script","timeout",vy.message)}},oy=function(fy){var vy,dy,Ay=Ae$3(),gy=Ay-Co;if(delete ry[Zl],ny.parentNode&&ny.parentNode.removeChild(ny),_g!==null&&(window.clearTimeout(_g),_g=null),ty!==!0){if(fy.indexOf("data:")!==0){var wy=new Wn(To,"Script",500);Rn(wy),$l(wy),(vy=vn.networkSubscribe)===null||vy===void 0||vy.emit("network",To,"Script","error",wy.message);return}var Cy=fy.split(","),My=(Cy[0].match(/:(.*?);/)||[])[1],Py=Cy[1];if(vn.responseType==="arraybuffer"||vn.responseType==="blob"){for(var Dy=atob(Cy[1]),qy=Dy.length,Xy=new Uint8Array(qy),$y=0;$y<qy;$y++)Xy[$y]=Dy.charCodeAt($y);vn.responseType==="arraybuffer"?Py=Xy.buffer:Py=new Blob([Xy],{type:My})}var xy={},Ry={body:Py,meta:{origin:Po,source:To,requestTime:Co,responseTime:Ay,costs:gy,headers:xy}};yn(Ry),Io(Ry),(dy=vn.networkSubscribe)===null||dy===void 0||dy.emit("network",To,"Script","ok",JSON.stringify(Ry.meta)),ty=!0}};ry[Zl]=oy,ny.src=To,document.body.appendChild(ny),typeof vn.timeout=="number"&&(_g=window.setTimeout(iy,vn.timeout))}else{var ay=!1,uy=new XMLHttpRequest,hy=function(){uy&&(uy.removeEventListener("timeout",my,!1),uy.removeEventListener("progress",ly,!1),uy.removeEventListener("load",sy,!1),uy.removeEventListener("error",cy,!1)),uy=null,hy=q$q},my=function(){var fy;if(ay!==!0){ay=!0,hy();var vy=new gi(To,"XMLHttpRequest",vn.timeout||NaN);Rn(vy),$l(vy),(fy=vn.networkSubscribe)===null||fy===void 0||fy.emit("network",To,"XMLHttpRequest","timeout",vy.message)}},ly=function(fy){ay!==!0&&fy.lengthComputable&&(fy.total<=0||Bn(fy.loaded/fy.total))},sy=function(fy){var vy;if(ay!==!0){var dy=this.status;if(dy===0||dy>=200&&dy<400){ay=!0,hy();var Ay=Ae$3(),gy=Ay-Co,wy=xf(this.getAllResponseHeaders()),Cy=fy.total,My={body:this.response,meta:{origin:Po,source:To,requestTime:Co,responseTime:Ay,costs:gy,headers:wy,size:Cy}};yn(My),Io(My),(vy=vn.networkSubscribe)===null||vy===void 0||vy.emit("network",To,"XMLHttpRequest","ok",JSON.stringify(My.meta))}else cy.call(this)}},cy=function(){var fy;if(ay!==!0){ay=!0,hy();var vy=new Wn(To,"XMLHttpRequest",this.status);Rn(vy),$l(vy),(fy=vn.networkSubscribe)===null||fy===void 0||fy.emit("network",To,"XMLHttpRequest","error",vy.message)}};uy.addEventListener("timeout",my,!1),uy.addEventListener("progress",ly,!1),uy.addEventListener("load",sy,!1),uy.addEventListener("error",cy,!1),vn.responseType&&(uy.responseType=vn.responseType),typeof vn.timeout=="number"&&(uy.timeout=vn.timeout),uy.open("GET",To,!0),uy.send(null)}})})}var La={};function Sf(cr,vn){vn===void 0&&(vn={});var yn=Ae$3(),Rn=cr;return Promise.resolve().then(function(){return vn.requestProxy?vn.requestProxy(cr):cr}).then(function(Bn){return/^https\:/.test(location.href)&&/^http\:/.test(Bn)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Bn,"'. This request was automatically upgraded to HTTPS")),Bn.replace(/^http\:/,"https:")):Bn}).catch(function(Bn){var Co,Po=new Si(Rn,"Link",Bn&&Bn.message?String(Bn.message):String(Bn));return(Co=vn.networkSubscribe)===null||Co===void 0||Co.emit("network",cr,"Link","proxy-error",Po.message),Promise.reject(Po)}).then(function(Bn){return Bn in La?La[Bn]:La[Bn]=new Promise(function(Co,Po){var To,Io=vn.allowHosts?kr$1.concat(vn.allowHosts):kr$1.slice(),$l=Z0(Bn);if(location.hostname.length!==0&&!Tn(location.hostname)&&kr$1.filter(function(Rm){return mn(Rm,location.hostname)}).length===0&&!Tn($l)&&Io.filter(function(Rm){return mn(Rm,$l)}).length===0){var Wl=new W0(Bn,"Link","request host(".concat($l,") is not allowed"));Po(Wl),(To=vn.networkSubscribe)===null||To===void 0||To.emit("network",Bn,"Link","forbidden",Wl.message);return}var Xl=document.createElement("link"),Yl=!1,Zl=null;Xl.onload=function(Rm){var ry;if(Zl!==null&&(clearTimeout(Zl),Zl=null),Yl!==!0){Yl=!0,Co();var _g=Ae$3(),ty=_g-yn,ny={},iy={origin:Rn,source:Bn,requestTime:yn,responseTime:_g,costs:ty,headers:ny};(ry=vn.networkSubscribe)===null||ry===void 0||ry.emit("network",Bn,"Link","preload",JSON.stringify(iy))}},Xl.onerror=function(Rm){var ry;if(Zl!==null&&(clearTimeout(Zl),Zl=null),Yl!==!0){Yl=!0;var _g=new Wn(Bn,"Link",0);Po(_g),(ry=vn.networkSubscribe)===null||ry===void 0||ry.emit("network",Bn,"Link","error",_g.message)}},typeof vn.timeout=="number"&&(Zl=window.setTimeout(function(){var Rm;if(Zl=null,Yl!==!0){Yl=!0,Co();var ry=Ae$3(),_g=ry-yn,ty={},ny={origin:Rn,source:Bn,requestTime:yn,responseTime:ry,costs:_g,headers:ty};(Rm=vn.networkSubscribe)===null||Rm===void 0||Rm.emit("network",Bn,"Link","timeout",JSON.stringify(ny))}},vn.timeout)),Xl.rel=Xl.relList&&Xl.relList.supports("prefetch")?"prefetch":"preload",Xl.as="fetch",Xl.crossOrigin="",Xl.fetchPriority="high",Xl.href=Bn;var ey=document.head||document.getElementsByTagName("head")[0];ey&&ey.appendChild(Xl)})})}function Mf(cr,vn,yn,Rn,Bn,Co){vn===void 0&&(vn={}),yn===void 0&&(yn=q$q),Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q);var Po=Ae$3(),To=cr;return Promise.resolve().then(function(){return vn.requestProxy?vn.requestProxy(cr):cr}).then(function(Io){return/^https\:/.test(location.href)&&/^http\:/.test(Io)?(console.warn("The page at '".concat(location.href,"' was loaded over HTTPS, but requested an insecure element '").concat(Io,"'. This request was automatically upgraded to HTTPS")),Io.replace(/^http\:/,"https:")):Io}).catch(function(Io){var $l,Wl=new Si(To,"Image",Io&&Io.message?String(Io.message):String(Io));return($l=vn.networkSubscribe)===null||$l===void 0||$l.emit("network",cr,"Image","proxy-error",Wl.message),Promise.reject(Wl)}).then(function(Io){return new Promise(function($l,Wl){var Xl,Yl=vn.allowHosts?kr$1.concat(vn.allowHosts):kr$1.slice(),Zl=Z0(Io);if(location.hostname.length!==0&&!Tn(location.hostname)&&kr$1.filter(function(iy){return mn(iy,location.hostname)}).length===0&&!Tn(Zl)&&Yl.filter(function(iy){return mn(iy,Zl)}).length===0){var ey=new W0(Io,"Image","request host(".concat(Zl,") is not allowed"));Rn(ey),Wl(ey),(Xl=vn.networkSubscribe)===null||Xl===void 0||Xl.emit("network",Io,"Image","forbidden",ey.message);return}var Rm=Co!=null?Co:new Image,ry=!1,_g=null,ty=function(){var iy;if(Rm.onload=q$q,Rm.onerror=q$q,_g!==null&&(clearTimeout(_g),_g=null),ry!==!0){var oy=Ae$3(),ay={headers:{},origin:To,source:Io,requestTime:Po,responseTime:oy,costs:oy-Po};ry=!0;var uy={body:Rm,meta:ay};Bn(1),yn(uy),$l(uy),(iy=vn.networkSubscribe)===null||iy===void 0||iy.emit("network",Io,"Image","ok",JSON.stringify(uy.meta))}},ny=function(){var iy;if(Rm.onload=q$q,Rm.onerror=q$q,_g!==null&&(clearTimeout(_g),_g=null),ry!==!0){ry=!0;var oy=new Wn(Io,"Image",0);Rn(oy),Wl(oy),(iy=vn.networkSubscribe)===null||iy===void 0||iy.emit("network",Io,"Image","ok",oy.message)}};typeof vn.timeout=="number"&&(_g=window.setTimeout(function(){var iy;if(Rm.onload=q$q,Rm.onerror=q$q,_g=null,ry!==!0){ry=!0;var oy=new gi(Io,"Image",vn.timeout);Rn(oy),Wl(oy),(iy=vn.networkSubscribe)===null||iy===void 0||iy.emit("network",Io,"Image","timeout",oy.message)}},vn.timeout)),Rm.onload=ty,Rm.onerror=ny,Bn(0),Rm.src=Io})})}var Zt$1=function(){function cr(vn){vn===void 0&&(vn={}),this.options=Object.freeze(vn),this.options.allowHosts&&Object.freeze(this.options.allowHosts)}return cr.prototype.ajax=function(vn,yn,Rn,Bn,Co){var Po;yn===void 0&&(yn={}),Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q),Co===void 0&&(Co=q$q);var To=this.options,Io={responseType:yn.responseType,timeout:(Po=yn.timeout)!==null&&Po!==void 0?Po:To.timeout,get allowHosts(){var $l;return($l=yn.allowHosts)!==null&&$l!==void 0?$l:To.allowHosts},get requestProxy(){var $l;return($l=yn.requestProxy)!==null&&$l!==void 0?$l:To.requestProxy},get networkSubscribe(){var $l;return($l=yn.networkSubscribe)!==null&&$l!==void 0?$l:To.networkSubscribe}};return Kn(vn,Io,Rn,Bn,Co)},cr.prototype.loadImage=function(vn,yn,Rn,Bn,Co,Po){var To;yn===void 0&&(yn={}),Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q),Co===void 0&&(Co=q$q);var Io=this.options,$l={timeout:(To=yn.timeout)!==null&&To!==void 0?To:Io.timeout,get allowHosts(){var Wl;return(Wl=yn.allowHosts)!==null&&Wl!==void 0?Wl:Io.allowHosts},get requestProxy(){var Wl;return(Wl=yn.requestProxy)!==null&&Wl!==void 0?Wl:Io.requestProxy},get networkSubscribe(){var Wl;return(Wl=yn.networkSubscribe)!==null&&Wl!==void 0?Wl:Io.networkSubscribe}};return Mf(vn,$l,Rn,Bn,Co,Po)},cr.prototype.preload=function(vn,yn){var Rn;yn===void 0&&(yn={});var Bn=this.options,Co={timeout:(Rn=yn.timeout)!==null&&Rn!==void 0?Rn:Bn.timeout,get allowHosts(){var Po;return(Po=yn.allowHosts)!==null&&Po!==void 0?Po:Bn.allowHosts},get requestProxy(){var Po;return(Po=yn.requestProxy)!==null&&Po!==void 0?Po:Bn.requestProxy},get networkSubscribe(){var Po;return(Po=yn.networkSubscribe)!==null&&Po!==void 0?Po:Bn.networkSubscribe}};return Sf(vn,Co)},cr}(),ua=new Zt$1;function pe$4(cr,vn,yn){return cr<vn?vn:cr>yn?yn:cr}var S0=function(){var cr=Ae$3();return{requestAnimationFrame:function(vn){var yn=Ae$3(),Rn=pe$4(16+(yn-cr),16,33),Bn=setTimeout(function(){vn(yn+Rn)},Rn);return cr=yn+Rn,Bn},cancelAnimationFrame:function(vn){return clearTimeout(vn)}}}(),qo=function(){if(typeof window!="undefined"){var cr=window;if(cr.requestAnimationFrame)return{requestAnimationFrame:cr.requestAnimationFrame.bind(cr),cancelAnimationFrame:cr.cancelAnimationFrame.bind(cr)};if(cr.mozRequestAnimationFrame)return{requestAnimationFrame:cr.mozRequestAnimationFrame.bind(cr),cancelAnimationFrame:cr.mozCancelAnimationFrame.bind(cr)};if(cr.webkitRequestAnimationFrame)return{requestAnimationFrame:cr.webkitRequestAnimationFrame.bind(cr),cancelAnimationFrame:cr.webkitCancelAnimationFrame.bind(cr)};if(cr.msRequestAnimationFrame)return{requestAnimationFrame:cr.msRequestAnimationFrame.bind(cr),cancelAnimationFrame:cr.msCancelAnimationFrame.bind(cr)}}return S0}(),Ef=5,Uo=16,Ft$2=function(){function cr(){this.loopType="raf",this.frames=[],this.isAnimating=!1,this.context=null;var vn=Ae$3();this.loop=function(){for(var yn=[],Rn=0;Rn<arguments.length;Rn++)yn[Rn]=arguments[Rn];if(this.isAnimating!==!1){var Bn=Ae$3(),Co=Bn-vn;vn=Bn,Uo=Co;for(var Po=0;Po<this.frames.length;Po++){var To=this.frames[Po];if(To.delay>0){To.delay=To.delay-1;continue}try{To.callback.apply(To,yt$3([Bn,Co],yn,!1))}catch(Io){console.error(Io)}To.once&&(this.frames.splice(Po,1),Po--)}this.requestId=this.requestAnimationFrame(this.loop)}}.bind(this),this.start()}return Object.defineProperty(cr,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new cr),this.sharedInstance},enumerable:!1,configurable:!0}),cr.getFrameTime=function(){return Uo},cr.prototype.start=function(){this.isAnimating!==!0&&(this.isAnimating=!0,this.requestId=this.requestAnimationFrame(this.loop))},cr.prototype.stop=function(){this.isAnimating=!1,this.cancelAnimationFrame(this.requestId)},cr.prototype.setContext=function(vn){vn!==this.context&&(this.stop(),this.context=vn,this.start())},cr.prototype.getContext=function(){return this.context},cr.prototype.setLoopType=function(vn){vn!==this.loopType&&(this.stop(),this.loopType=vn,this.start())},cr.prototype.getLoopType=function(){return this.loopType},cr.prototype.requestAnimationFrame=function(vn){if(this.context)return this.context.requestAnimationFrame(vn);if(this.loopType==="raf")return qo.requestAnimationFrame(vn);if(this.loopType==="sto")return S0.requestAnimationFrame(vn)},cr.prototype.cancelAnimationFrame=function(vn){if(this.context)this.context.cancelAnimationFrame(vn);else if(this.loopType==="raf")qo.cancelAnimationFrame(vn);else if(this.loopType==="sto")return S0.cancelAnimationFrame(vn)},cr.prototype.remove=function(vn){var yn=this.frames.indexOf(vn);yn>=0&&this.frames.splice(yn,1)},cr.prototype.add=function(vn,yn,Rn,Bn){var Co=this;yn===void 0&&(yn=!1),Rn===void 0&&(Rn=0),Bn===void 0&&(Bn=Ef);for(var Po={callback:vn,once:yn,delay:Rn,order:Bn},To=this.frames.length;--To>=0;)if(this.frames[To].order<=Bn){this.frames.splice(To+1,0,Po);break}return To<0&&this.frames.unshift(Po),function(){return Co.remove(Po)}},cr.prototype.clear=function(){this.frames.length=0},cr}(),Cf="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAIAAUAmJaQAA3AA/vz0AAA=",If="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAGhbWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAsaWxvYwAAAABEAAACAAEAAAABAAAB3gAAABkAAgAAAAEAAAHJAAAAFQAAAEJpaW5mAAAAAAACAAAAGmluZmUCAAAAAAEAAGF2MDFDb2xvcgAAAAAaaW5mZQIAAAAAAgAAYXYwMUFscGhhAAAAABppcmVmAAAAAAAAAA5hdXhsAAIAAQABAAAA12lwcnAAAACxaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIAAoAAAAAUaXNwZQAAAAAAAAACAAAAAgAAAA5waXhpAAAAAAEIAAAADGF2MUOBABwAAAAAOGF1eEMAAAAAdXJuOm1wZWc6bXBlZ0I6Y2ljcDpzeXN0ZW1zOmF1eGlsaWFyeTphbHBoYQAAAAAeaXBtYQAAAAAAAAACAAEEAQKDBAACBAUGhwgAAAA2bWRhdBIACgQYADLVMgsWQBhhIAQqrNj/+BIACgUYADLEoDIOFkADDDDCQAACDaqCCb4=",Tf="data:image/heif;base64,AAAAGGZ0eXBoZWljAAAAAG1pZjFoZWljAAABL21ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAjaWluZgAAAAAAAQAAABVpbmZlAgAAAAABAABodmMxAAAAAK9pcHJwAAAAkmlwY28AAAB2aHZjQwEBYAAAAAAAAAAAAADwAPz9+PgAACcDoAABAB5AAQwG//8BYAAAAwAAAwAAAwAAAwAAAwAAreTLgSChAAEAI0IBBwFgAAADAAADAAADAAADAAADAAChInJJlreTLySZNdggogABAAdEAcA98DMkAAAAFGlzcGUAAAAAAAAAAgAAAAIAAAAVaXBtYQAAAAAAAAABAAECgQIAAAAiaWxvYwAAAABEQAABAAEAAAAAAU8AAQAAAAAAAAAOAAAAFm1kYXQAAAAKJgGvLvkQwuWM4A==";function ka(cr){return new Promise(function(vn){if(typeof Image=="undefined"){vn(!1);return}var yn=new Image,Rn=setTimeout(function(){yn.onload=yn.onerror=function(){},clearTimeout(Rn),vn(!1)},100);yn.onload=yn.onerror=function(){yn.onload=yn.onerror=function(){},clearTimeout(Rn),vn(yn.height===2)},yn.src=cr})}var Oa=null;function gu(){return Oa||(Oa=Promise.all([ka(Cf),ka(If),ka(Tf)]).then(function(cr){return{webp:cr[0],avif:cr[1],heif:cr[2]}}))}var Y0=!1,$0=!1,eo=!1;gu().then(function(cr){Y0=cr.avif,$0=cr.webp,eo=cr.heif});var Pf=["jpg","jpeg","png","heif","heic","webp","avif"];function yu(cr){return Pf.indexOf(cr)>=0}var Rf={"vrlab-public.ljcdn.com":{type:"tencentCloud",pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],model:["vr-model-1.realsee-cdn.cn","vr-model-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{type:"tencentCloud",pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],model:["vr-model-1.realsee-cdn.cn","vr-model-2.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"vr-public.rscdn.cn":{type:"tencentCloud",pano:["vr-image-1.rscdn.cn","vr-image-2.rscdn.cn"],texture:["vr-image-3.rscdn.cn"],tile:["vr-tile-1.rscdn.cn","vr-tile-2.rscdn.cn"],model:["vr-model-1.rscdn.cn","vr-model-2.rscdn.cn"],default:["vr-image-4.rscdn.cn"]},"mars-public.realsee-cdn.cn":{type:"aliyun",pano:["mars-image-1.realsee-cdn.cn","mars-image-2.realsee-cdn.cn"],texture:["mars-image-3.realsee-cdn.cn"],tile:["mars-tile-1.realsee-cdn.cn","mars-tile-2.realsee-cdn.cn"],model:["mars-model-1.realsee-cdn.cn","mars-model-2.realsee-cdn.cn"],default:["mars-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{type:"tencentCloud",pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],model:["global-model-1.realsee-cdn.com","global-model-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"earth-ga-public.realsee-cdn.cn":{type:"tencentCloud",pano:["earth-ga-image-1.realsee-cdn.cn","earth-ga-image-2.realsee-cdn.cn"],texture:["earth-ga-image-3.realsee-cdn.cn"],tile:["earth-ga-tile-1.realsee-cdn.cn","earth-ga-tile-2.realsee-cdn.cn"],model:["earth-ga-model-1.realsee-cdn.cn","earth-ga-model-2.realsee-cdn.cn"],default:["earth-ga-image-4.realsee-cdn.cn"]},"test-vr-public.realsee-cdn.com":{type:"tencentCloud",pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],model:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]},"test-vr-public.realsee-cdn.cn":{type:"tencentCloud",pano:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],texture:["test-vr-image.realsee-cdn.cn"],tile:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],model:["test-vr-image.realsee-cdn.cn","test-vr-image.realsee-cdn.cn"],default:["test-vr-image.realsee-cdn.cn"]}},bu=/^https?\:\/\/?([^\/]+)/;function Bf(cr){var vn=cr.match(bu);return vn===null?null:vn[1]}function Fn(cr,vn){return cr.replace(bu,function(yn,Rn){return yn.slice(0,yn.length-Rn.length)+vn})}function Ff(cr,vn,yn){var Rn=vn.split("."),Bn=Rn[0],Co=Rn.slice(1);if(Bn==="texture")return Fn(cr,yn.texture[0]);if(Bn==="pano"||Bn==="pano_luminance"){Co[0];var Po=Co[1];switch(Po){case"front":case"left":case"up":return Fn(cr,yn.pano[0]);case"down":case"right":case"back":return Fn(cr,yn.pano[1])}}else if(Bn==="pano_tile"||Bn==="pano_tile_luminance"){Co[0],Co[1];var To=Co[2],Io=Co[3],$l=Co[4],Wl=Math.pow(2,Number(To))*Number(Io)+Number($l);if(!isNaN(Wl))return Fn(cr,yn.tile[Wl%2])}else if(Bn==="model"){var Xl=Co[0],Wl=Number(Xl);if(!isNaN(Wl))return Fn(cr,yn.model[Wl%2])}return Fn(cr,yn.default[0])}var Lf=function(cr,vn){var yn=cr.split("?")[0],Rn=yn.split(".").pop();if(Rn==="jpeg"&&(Rn="jpg"),Rn==="heif"&&(Rn="heic"),Rn&&!yu(Rn))return cr;var Bn=[],Co=vn.format,Po=vn.cut,To=vn.quality,Io=vn.size,$l=vn.sharpen;if(Co==="jpeg"&&(Co="jpg"),Co==="heif"&&(Co="heic"),(!Y0&&(Co!=null?Co:Rn)==="avif"||!$0&&(Co!=null?Co:Rn)==="webp"||!eo&&(Co!=null?Co:Rn)==="heic")&&(Co="jpg"),Co!==void 0&&Co!==Rn&&Bn.push("format/".concat(Co)),Po!==void 0&&Bn.push("cut/".concat(Po[2],"x").concat(Po[3],"x").concat(Po[0],"x").concat(Po[1])),To!==void 0){var Wl=Co!=null?Co:Rn;Wl&&["jpg","webp","heic","avif"].indexOf(Wl)>=0&&Bn.push("quality/".concat(To))}if(Io!==void 0){var Xl=cr.match(/\/cube_(\d+)\//),Yl=Xl?Number(Xl[1]):NaN;Yl!==Number(Io)&&Bn.push("thumbnail/".concat(Io,"x"))}$l!==void 0&&Bn.push("sharpen/".concat($l));var Zl="";return Bn.length&&(Zl="?imageMogr2/"+Bn.join("/")),yn+Zl},kf=function(cr,vn){var yn=cr.split("?")[0],Rn=yn.split(".").pop();if(Rn==="jpeg"&&(Rn="jpg"),Rn==="heif"&&(Rn="heic"),Rn&&!yu(Rn))return cr;var Bn=[],Co=vn.format,Po=vn.cut,To=vn.quality,Io=vn.size,$l=vn.sharpen;if(Co==="jpeg"&&(Co="jpg"),Co==="heif"&&(Co="heic"),(!Y0&&(Co!=null?Co:Rn)==="avif"||!$0&&(Co!=null?Co:Rn)==="webp"||!eo&&(Co!=null?Co:Rn)==="heic")&&(Co="jpg"),Co!==void 0&&Co!==Rn&&Bn.push("format,".concat(Co)),Po!==void 0){var Wl=Po[0],Xl=Po[1],Yl=Po[2],Zl=Po[3];Bn.push("crop,x_".concat(Wl,",y_").concat(Xl,",w_").concat(Yl,",h_").concat(Zl,",g_nw"))}if(To!==void 0&&To!==100){var ey=Co!=null?Co:Rn;ey&&["jpg","webp","heic","avif"].indexOf(ey)>=0&&Bn.push("quality,Q_".concat(To))}Io&&Io!==2048&&Bn.push("resize,w_".concat(Io)),$l!==void 0&&Bn.push("sharpen,".concat($l));var Rm="";return Bn.length&&(Rm="?x-oss-process=image/"+Bn.join("/")),yn+Rm},Ln=9007199254740991;function bn$1(cr){var vn=Math.round(cr);return Math.abs(vn-cr)<.001?vn:Math.floor(cr)}function Of(cr){return cr=Object.assign({},cr),cr.size!==void 0&&(cr.size=bn$1(pe$4(cr.size,0,Ln))),cr.quality!==void 0&&(cr.quality=bn$1(pe$4(cr.quality,0,100))),cr.cut!==void 0&&(cr.cut=[bn$1(pe$4(cr.cut[0],0,Ln)),bn$1(pe$4(cr.cut[1],0,Ln)),bn$1(pe$4(cr.cut[2],0,Ln)),bn$1(pe$4(cr.cut[3],0,Ln))]),cr.sharpen!==void 0&&(cr.sharpen=bn$1(pe$4(cr.sharpen,0,Ln))),cr}function At$1(cr,vn){var yn=O$n(O$n({},Rf),vn.mappings),Rn=Bf(cr);if(Rn===null)return cr;vn=Of(vn);var Bn=yn[Rn];return Bn?(cr=Ff(cr,vn.key,Bn),/\.basis(\?|$)/.test(cr)&&(cr=cr.replace(/\.basis(\?|$)/,".jpg$1")),Bn.type==="tencentCloud"?Lf(cr,vn):Bn.type==="aliyun"?kf(cr,vn):cr):cr}function En(cr,vn,yn){vn===void 0&&(vn=At$1);var Rn=vn(cr,yn);if(Rn===cr&&yn.cut)throw new Error("ImageURL: cut option not applied.");return Rn}var xu=/\/cube_(\d+)\//;function yi(cr){var vn=cr.match(xu);return vn?Number(vn[1]):null}function ar$1(cr,vn){return cr.replace(xu,"/cube_".concat(vn,"/"))}var wu=/^(.*)\[(\d+)\]$/;function _e$3(cr){if(!isNaN(cr.panoIndex)&&isFinite(cr.panoIndex))return"".concat(cr.workCode,"[").concat(cr.panoIndex,"]");throw new Error("Invalid Pano")}function Qt$2(cr){var vn=cr.match(wu);if(vn){vn[0];var yn=vn[1],Rn=vn[2],Bn=Math.floor(Number(Rn));if(!isNaN(Bn)&&isFinite(Bn))return{workCode:yn,panoIndex:Bn}}throw new Error("Invalid PanoId")}function Or$1(cr,vn){return _e$3(cr)===_e$3(vn)}function zf(cr){return typeof cr=="string"&&wu.test(cr)}(function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn})(Group$1);var Ht$2=function(cr){fe$6(vn,cr);function vn(yn,Rn){var Bn=cr.call(this,yn,Rn)||this;return Bn.castShadow=!0,Bn.receiveShadow=!0,Bn}return vn.prototype.update=function(yn,Rn,Bn,Co){for(var Po=0,To=this.material;Po<To.length;Po++){var Io=To[Po];Io.update(yn,Rn,Bn)}},vn}(Mesh),Jr$2=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){var Co=cr.call(this,yn,Rn,Bn)||this;return Co.castShadow=!0,Co.receiveShadow=!0,Co}return vn.prototype.update=function(yn,Rn,Bn,Co){for(var Po=0,To=this.material;Po<To.length;Po++){var Io=To[Po];Io.update(yn,Rn,Bn)}},vn}(SkinnedMesh);function oi(cr,vn){vn===void 0&&(vn=!1);var yn=typeof cr;if(yn==="string")return JSON.stringify(cr);if(cr===!0)return"true";if(cr===!1)return"false";if(cr===null)return"null";if(cr instanceof Array){for(var Rn="[",Bn=cr.length-1,Co=0;Co<Bn;Co++)Rn+=oi(cr[Co],!1)+",";return Bn>-1&&(Rn+=oi(cr[Co],!1)),Rn+"]"}if(cr instanceof Object){if(typeof cr.toJSON=="function")return oi(cr.toJSON(),vn);for(var Po=Object.keys(cr).sort(),To=Po.length,Rn="",Co=0;Co<To;){var Io=Po[Co],$l=oi(cr[Io],!0);$l!==void 0&&(Co&&Rn!==""&&(Rn+=","),Rn+=JSON.stringify(Io)+":"+$l),Co++}return"{"+Rn+"}"}switch(yn){case"function":return JSON.stringify(cr.toString());case"undefined":return vn?void 0:null;case"number":return cr;default:return isFinite(cr)?cr:null}}function ba(cr){return"hash::".concat(oi(cr,!1))}var Mi=function(){return typeof document!="undefined"?new TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAABCAYAAACouxZ2AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACAKADAAQAAAABAAAAAQAAAAB7UD0+AAACA0lEQVRIDXWUW3YjIQxEwdnV/GT/q8kO3FO3pAJst3PSAaR6Cbszf//9XeMxxpjXmI+pVXudp2s6PC4dqHff9e6D7/PZLy46xQvG+sZvrfK8xgXUeq85yINe9bdmtOK1+kun5vjgq58a+eZPna9jvmjiserqG/+Whathvo3L3WhV89L9sXI/m18z2uene9ap/ftsuT9WZxoHXzW56/fpj8l7+tTw7P011NdpqnY19sRsfuHMA9u8oZWfDz4+fra/dfG1V60ydZ7qba1g7UNAeK0JP7ydD7/OqH6wO2f7HTq+B/lbL9qsB3/N1/UzR81XfPzw4tp5OPvRneacteq8Xo0xR3vuv/kPz0KtX0Nhg0eHuaNXdWI3X/ld427h++vzyp99V6VPrzWFhbv4ayay4oFecm198MmUXN/mL+x7npq/uJXBGb/MTw4+t+SvbLoTZnUW5uHhz7nWcTxT73OwXV7cxT9wbBf/0LnDBgcnHmtPLYba32Hp808sMy1u88yhr58n70/v4xX92GSN19l/2UsqGmiH94Hpxjcs+DO/ccpIVNVp62PUWXu//ur1GQy1Cf+GZ13rtNYN1po3/NI79fGXibHkq4z25xvV2pW3szpneXsW8SsreTe/NIPrtXMnH7wPf+LEN6tqhUVHj3XKD/72p9eafCeYB3zuonnbv7yqP8d/o4K6gRb1wbYAAAAASUVORK5CYII="):new Texture}();Mi.minFilter=NearestFilter;Mi.magFilter=NearestFilter;Mi.wrapS=RepeatWrapping;Mi.wrapT=RepeatWrapping;var ye$3={customShaders:[],pano0:null,pano1:null,floorStyle:"OPACITY",colorStyle:"RGB",constantColor:new Vector3(.6,.6,.6),shownFloorIndex:-1,modelAlpha:1,opacity:1,progress:0,transition:"FADE",clippers:null,brightness:1,useEDL:!1,useHQWeight:!1,useHQDepth:!1,pointSize:"ATTENUATION",pointBack:"DARK",pointShape:"CIRCLE",pointScale:.03,pointMaxPixel:40,pointMinPixel:1,gradientTexture:Mi,colorSaturation:0,colorBrightness:0,outlineGain:0,distanceGain:0,useAddBlend:!1};function Vf(cr,vn){var yn=cr!=null?cr:[],Rn=vn!=null?vn:[];if(Rn.length!==yn.length)return!1;for(var Bn=0;Bn<Rn.length;Bn++)if(!yn[Bn].clippingBoxMatrix.equals(Rn[Bn].clippingBoxMatrix)||yn[Bn].floorIndex!==Rn[Bn].floorIndex)return!1;return!0}function Df(cr,vn){return cr&&vn?cr.luminanceMap===vn.luminanceMap&&cr.map===vn.map&&cr.zoom===vn.zoom&&cr.matrix.equals(vn.matrix):!cr&&!vn}function Su(cr,vn){var yn=!1;for(var Rn in vn)if(vn[Rn]!==void 0)switch(Rn){case"clippers":Vf(cr[Rn],vn[Rn])||(cr[Rn]=vn[Rn],yn=!0);break;case"pano0":case"pano1":Df(cr[Rn],vn[Rn])||(cr[Rn]=vn[Rn],yn=!0);break;default:cr[Rn]!==vn[Rn]&&(cr[Rn]=vn[Rn],yn=!0);break}return yn}function ea(cr,vn,yn){return cr+(vn-cr)*yn}function Nf(cr,vn,yn,Rn){var Bn=(vn*yn+2*cr)/Math.pow(yn,3),Co=-(2*vn*yn+3*cr)/Math.pow(yn,2),Po=vn,To=cr;return Bn*Math.pow(Rn,3)+Co*Math.pow(Rn,2)+Po*Rn+To}function qf(cr,vn,yn,Rn){var Bn=(vn*yn+2*cr)/Math.pow(yn,3),Co=-(2*vn*yn+3*cr)/Math.pow(yn,2),Po=vn;return 3*Bn*Math.pow(Rn,2)+2*Co*Rn+Po}function Uf(cr,vn,yn,Rn){var Bn=Rn[1]-Rn[0];return cr=la(cr,Rn),vn=la(vn,Rn),vn-cr>Bn/2?ea(cr+Bn,vn,yn):cr-vn>Bn/2?ea(cr-Bn,vn,yn):ea(cr,vn,yn)}function la(cr,vn){var yn=vn[1]-vn[0];return cr<vn[0]?la(cr+yn,vn):cr>=vn[1]?la(cr-yn,vn):cr}function Qf(cr,vn,yn,Rn){return Rn?Uf(cr,vn,yn,Rn):ea(cr,vn,yn)}function Qo$1(cr){var vn=Number(cr);return isNaN(vn)||!isFinite(vn)?0:vn}var Ce$2=function(){function cr(vn){this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ae$3(),this.startVelocity=0,this.duration=0,this.keyframes=[];for(var yn in vn){var Rn=vn[yn];typeof Rn=="object"?(this.value[yn]=Qo$1(Rn.value),this.config[yn]={circle:Rn.circle}):(this.value[yn]=Qo$1(Rn),this.config[yn]={circle:!1})}this.keyframes=[{progress:0,value:O$n({},this.value)},{progress:1,value:O$n({},this.value)}]}return cr.prototype.getProgress=function(vn){var yn=vn-this.startTime;return yn<0?0:yn>=this.duration?1:1-Nf(1,this.startVelocity,this.duration,yn)},cr.prototype.getValue=function(vn){for(var yn=1;yn<this.keyframes.length;yn++)if(this.keyframes[yn].progress>vn){var Rn=this.keyframes[yn-1],Bn=this.keyframes[yn],Co={};for(var Po in this.config){var To=(vn-Rn.progress)/(Bn.progress-Rn.progress);Co[Po]=Qf(Rn.value[Po],Bn.value[Po],To,this.config[Po].circle)}return Co}return O$n({},this.keyframes[this.keyframes.length-1].value)},cr.prototype.getProgressVelocity=function(vn){var yn=vn-this.startTime;return yn>=this.duration?0:qf(1,this.startVelocity,this.duration,yn)},cr.prototype.update=function(vn){return this.ended?!0:(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(vn))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},cr.prototype.getKeyFrameSegment=function(vn){for(var yn=this.getProgress(vn),Rn=1;Rn<this.keyframes.length;Rn++)if(this.keyframes[Rn].progress>yn)return[this.keyframes[Rn-1],this.keyframes[Rn]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},cr.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},cr.prototype.set=function(vn,yn,Rn,Bn){var Co;Rn===void 0&&(Rn=0),isNaN(yn)&&(yn=0),isNaN(Rn)&&(Rn=0),Bn=Bn!=null?Bn:Ae$3();var Po=this.getProgress(Bn),To=this.getValue(Po),Io={};for(var $l in this.config)Io[$l]=(Co=vn[$l])!==null&&Co!==void 0?Co:To[$l];var Wl=[{progress:0,value:To},{progress:1,value:Io}];return this.setKeyframes(Wl,yn,Rn,Bn)},cr.prototype.setKeyframes=function(vn,yn,Rn,Bn){var Co=this;if(Rn===void 0&&(Rn=0),vn.length<2)throw new Error("keyframes invalid.");return isNaN(yn)&&(yn=0),isNaN(Rn)&&(Rn=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Po,To){Bn=Bn!=null?Bn:Ae$3(),Co.progress=0,Co.ended=!1,Co.startTime=Bn,Co.startVelocity=Rn,Co.keyframes=vn,Co.duration=yn,yn===0?(Co.progress=1,Co.value=O$n({},vn[vn.length-1].value)):Co.value=O$n({},vn[0].value),Co.callbacks=[Po,To]})},cr.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},cr}(),Hf=500;function Gf(cr){return cr*cr*cr}var Vr$1=function(cr){fe$6(vn,cr);function vn(yn,Rn){var Bn=cr.call(this,yn,Rn)||this;return Bn.appearMotion=new Ce$2({appear:0}),Bn}return vn.prototype.update=function(yn,Rn,Bn,Co){var Po,To;if(this.material.update(yn,Rn,Bn),Co&&Co.refine==="ADD"&&Co.tileset.rootMeta.pntsOrder==="RANDOM"){var Io=this.geometry,$l=this.appearMotion,Wl=Bn.visible&&Co.state.selectedFrameNumber===Co.tileset.frameNumber,Xl=Co.tileset.currentMaxScreenSpaceError,Yl=Co.state.screenSpaceError,Zl=(To=(Po=Co.parent)===null||Po===void 0?void 0:Po.state.screenSpaceError)!==null&&To!==void 0?To:Yl,ey=1;if(Zl!==Yl&&(ey=(Zl-Xl)/(Zl-Yl)),ey=pe$4(ey,0,1),ey=Gf(ey),Wl){var Rm=1;$l.getTargetKeyframe().value.appear!==Rm&&$l.set({appear:Rm},Hf).catch(q$q)}else{var Rm=0;$l.getTargetKeyframe().value.appear!==Rm&&$l.set({appear:Rm},0).catch(q$q)}$l.ended!==!0&&$l.update(Rn.time);var ry=Io.index?Io.index.count:Io.attributes.position?Io.attributes.position.count:1/0,_g=Math.floor(ry*ey*$l.value.appear);Io.drawRange.count!==_g&&(this.geometry.setDrawRange(0,_g),Bn.needsRender=!0)}},vn}(Points),kn=new Set;(function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.needsRender=!0,yn.pbmMaterialParametersVersion=0,yn.materialParameters=O$n({},ye$3),yn}return vn.prototype.getMaterial=function(){return O$n({},this.materialParameters)},vn.prototype.setMaterial=function(yn){var Rn=this;Object.assign(this.materialParameters,yn),kn.clear(),this.traverse(function(Bn){if(Bn instanceof Ht$2||Bn instanceof Jr$2)for(var Co=0,Po=Bn.material;Co<Po.length;Co++){var To=Po[Co];kn.has(To)||(Object.assign(To,Rn.materialParameters),kn.add(To))}Bn instanceof Vr$1&&(kn.has(Bn.material)||(Object.assign(Bn.material,Rn.materialParameters),kn.add(Bn.material)))}),kn.clear(),this.needsRender=!0},vn})(Group$1);var _f=["right","left","up","down","front","back"];function Mu(cr,vn,yn,Rn){var Bn=new Box3;switch(cr){case"up":Bn.min.y=.5,Bn.max.y=.5,Bn.min.x=+vn-.5,Bn.max.x=+vn-.5+Rn,Bn.min.z=-yn+.5-Rn,Bn.max.z=-yn+.5;break;case"down":Bn.min.y=-.5,Bn.max.y=-.5,Bn.min.x=+vn-.5,Bn.max.x=+vn-.5+Rn,Bn.min.z=+yn-.5,Bn.max.z=+yn-.5+Rn;break;case"left":Bn.min.x=-.5,Bn.max.x=-.5,Bn.min.z=-vn+.5-Rn,Bn.max.z=-vn+.5,Bn.min.y=-yn+.5-Rn,Bn.max.y=-yn+.5;break;case"right":Bn.min.x=.5,Bn.max.x=.5,Bn.min.z=+vn-.5,Bn.max.z=+vn-.5+Rn,Bn.min.y=-yn+.5-Rn,Bn.max.y=-yn+.5;break;case"front":Bn.min.z=-.5,Bn.max.z=-.5,Bn.min.x=+vn-.5,Bn.max.x=+vn-.5+Rn,Bn.min.y=-yn+.5-Rn,Bn.max.y=-yn+.5;break;case"back":Bn.min.z=.5,Bn.max.z=.5,Bn.min.x=-vn+.5-Rn,Bn.max.x=-vn+.5,Bn.min.y=-yn+.5-Rn,Bn.max.y=-yn+.5;break}return Bn.applyMatrix4(new Matrix4().makeRotationY(Math.PI))}var Eu=function(cr,vn){if(!(cr.level>=vn))for(var yn=cr.level+1,Rn=cr.size/2,Bn=[new Vector2(cr.position.x,cr.position.y),new Vector2(cr.position.x+Rn,cr.position.y),new Vector2(cr.position.x,cr.position.y+Rn),new Vector2(cr.position.x+Rn,cr.position.y+Rn)],Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co],Io={face:cr.face,level:yn,size:Rn,position:To,box:Mu(cr.face,To.x,To.y,Rn),parent:cr,children:[]};cr.children.push(Io),Eu(Io,vn)}};function Jf(cr,vn){var yn={level:0,face:cr,position:new Vector2(0,0),size:1,box:Mu(cr,0,0,1),parent:null,children:[]};return Eu(yn,vn),yn}function M0(cr){var vn=_f.map(function(yn){return Jf(yn,cr)});return{children:vn}}function to(cr,vn){for(var yn=0,Rn=cr.children;yn<Rn.length;yn++){var Bn=Rn[yn],Co=vn(Bn);Co!==!1&&to(Bn,vn)}}function Xt$2(cr,vn){for(var yn={},Rn=0,Bn=vn;Rn<Bn.length;Rn++){var Co=Bn[Rn];Co in cr&&(yn[Co]=cr[Co])}return yn}function xa(cr,vn){for(var yn=O$n({},cr),Rn=0,Bn=vn;Rn<Bn.length;Rn++){var Co=Bn[Rn];Co in yn&&delete yn[Co]}return yn}var Ei=new BoxBufferGeometry(1,1,1,1,1);Ei.deleteAttribute("uv");Ei.deleteAttribute("normal");Ei.groups=[];Ei.scale(-1,1,1);var Kf=`
varying vec3 worldPosition;
void main() {
  vec4 transform = vec4(position, 1.0);
  worldPosition = (modelMatrix * transform).xyz;
  gl_Position = projectionMatrix * modelViewMatrix * transform;
}
`,jf=`
uniform samplerCube map;
varying vec3 worldPosition;
void main() {
  gl_FragColor = textureCube(map, worldPosition);
}
`,E0=new ShaderMaterial({uniforms:{map:{value:null}},vertexShader:Kf,fragmentShader:jf,depthTest:!1,depthWrite:!1,stencilWrite:!1,blending:NoBlending,lights:!1,toneMapped:!1,fog:!1}),ro=new Scene;ro.matrixAutoUpdate=!1;var Cu=new Mesh(Ei,E0);Cu.matrixAutoUpdate=!1;ro.add(Cu);function C0(cr,vn,yn){E0.uniforms.map.value=cr;var Rn=yn.autoClear;yn.autoClear=!1;var Bn=new CubeCamera(.1,2,vn);Bn.matrixAutoUpdate=!1,Bn.update(yn,ro),yn.autoClear=Rn,E0.uniforms.map.value=null}var za,Zr$1=(za=Math.SQRT1_2)!==null&&za!==void 0?za:Math.sqrt(2),Xf={up:new Quaternion(Zr$1,0,0,Zr$1),down:new Quaternion(-Zr$1,0,0,Zr$1),left:new Quaternion(0,Zr$1,0,Zr$1),right:new Quaternion(0,-Zr$1,0,Zr$1),front:new Quaternion(0,0,0,1),back:new Quaternion(0,1,0,0)},Wf=function(){var cr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),vn=new Float32Array([0,0,1,0,0,1,1,1]),yn=new Uint8Array([0,1,2,1,3,2]),Rn=new BufferGeometry;return Rn.setAttribute("position",new BufferAttribute(cr,3)),Rn.setAttribute("uv",new BufferAttribute(vn,2)),Rn.setIndex(new BufferAttribute(yn,1)),Rn}(),Zf=`
varying vec2 vUv;
uniform float flipY;
void main() {
  vUv = vec2(uv.x, mix(uv.y, (1.0 - uv.y), flipY));
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Yf=`
uniform sampler2D map;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(map, vUv);
}
`,Iu=[],Ci=new PerspectiveCamera(90,1,.1,2);Ci.up.set(0,-1,0);Ci.lookAt(new Vector3(1,0,0));Ci.updateMatrix();Ci.matrixAutoUpdate=!1;var Ii=new PerspectiveCamera(90,1,.1,2);Ii.up.set(0,-1,0);Ii.lookAt(new Vector3(-1,0,0));Ii.updateMatrix();Ii.matrixAutoUpdate=!1;var Ti=new PerspectiveCamera(90,1,.1,2);Ti.up.set(0,0,1);Ti.lookAt(new Vector3(0,1,0));Ti.updateMatrix();Ti.matrixAutoUpdate=!1;var Pi=new PerspectiveCamera(90,1,.1,2);Pi.up.set(0,0,-1);Pi.lookAt(new Vector3(0,-1,0));Pi.updateMatrix();Pi.matrixAutoUpdate=!1;var Ri=new PerspectiveCamera(90,1,.1,2);Ri.up.set(0,-1,0);Ri.lookAt(new Vector3(0,0,1));Ri.updateMatrix();Ri.matrixAutoUpdate=!1;var Bi=new PerspectiveCamera(90,1,.1,2);Bi.up.set(0,-1,0);Bi.lookAt(new Vector3(0,0,-1));Bi.updateMatrix();Bi.matrixAutoUpdate=!1;var Ho={front:{camera:Ri,index:4},back:{camera:Bi,index:5},up:{camera:Ti,index:2},down:{camera:Pi,index:3},left:{camera:Ii,index:1},right:{camera:Ci,index:0}};function $f(){var cr=Iu.pop();return cr||new ShaderMaterial({uniforms:{map:{value:null},flipY:{value:0}},vertexShader:Zf,fragmentShader:Yf,depthTest:!1,depthWrite:!1,stencilWrite:!1,blending:NoBlending,lights:!1,toneMapped:!1,fog:!1})}function ed(cr){cr.uniforms.map.value=null,Iu.push(cr)}function td(cr,vn,yn){var Rn=new Scene;Rn.matrixAutoUpdate=!1;var Bn=new Group$1;Bn.scale.set(1,1,-1),Rn.add(Bn);for(var Co=[],Po=new Set,To=0,Io=cr;To<Io.length;To++){var $l=Io[To];Po.add($l.face);var Wl=$f();Co.push(Wl),Wl.uniforms.map.value=$l.texture,Wl.uniforms.flipY.value=$l.flipY?1:0;var Xl=new Group$1,Yl=new Mesh(Wf,Wl);Yl.position.set($l.position.x+$l.size.x/2-.5,1-($l.position.y+$l.size.y/2)-.5,-.5),Yl.scale.set($l.size.x,$l.size.y,1),Xl.quaternion.copy(Xf[$l.face]),Xl.add(Yl),Bn.add(Xl)}var Zl=yn.autoClear,ey=yn.sortObjects,Rm=yn.xr.enabled,ry=vn.texture.generateMipmaps;yn.autoClear=!1,yn.sortObjects=!1,yn.xr.enabled=!1,vn.texture.generateMipmaps=!1;var _g=yn.getRenderTarget(),ty=0;Po.forEach(function(oy){++ty===Po.size&&(vn.texture.generateMipmaps=ry),yn.setRenderTarget(vn,Ho[oy].index),yn.render(Rn,Ho[oy].camera)}),yn.setRenderTarget(_g),yn.autoClear=Zl,yn.sortObjects=ey,yn.xr.enabled=Rm;for(var ny=0,iy=Co;ny<iy.length;ny++){var Wl=iy[ny];ed(Wl)}}var rd=function(){return!1}();function bi(cr){cr===void 0&&(cr={});var vn=Object.assign(document.createElementNS("http://www.w3.org/1999/xhtml","img"),{crossOrigin:"",close:function(){cr.onClose&&cr.onClose.call(this),this.onerror=this.onload=this.close=q$q,this.removeAttribute("src")}});return vn}function I0(cr){return new Promise(function(vn,yn){var Rn=URL.createObjectURL(cr),Bn=bi({onClose:function(){this.src===Rn&&URL.revokeObjectURL(Rn)}});Bn.onload=function(){Bn.src===Rn&&URL.revokeObjectURL(Rn),Bn.onload=Bn.onerror=q$q,setTimeout(function(){vn(Bn)},10)},Bn.onerror=function(){var Co=Bn.src;Bn.onload=Bn.onerror=q$q,Bn.close(),yn(new Error("image load error: ".concat(Co)))},Bn.decoding="async",Bn.src=Rn})}var Go=[];function nd(cr,vn){var yn=Go.shift();if(yn)return yn.width=cr,yn.height=vn,yn;var Rn=Object.assign(document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),{close:function(){Rn.close=q$q,Go.push(Rn)}});return Rn}function _o(cr,vn){if(vn&&(cr.width>vn.width||cr.height>vn.height)){var yn=nd(Math.min(cr.width,vn.width),Math.min(cr.height,vn.height)),Rn=yn.getContext("2d");Rn.clearRect(0,0,yn.width,yn.height),Rn.drawImage(cr,0,0,yn.width,yn.height),cr.close();var Bn=new Texture(yn);Bn.needsUpdate=!0,Bn.flipY=!0;var Co=Bn.dispose;return Bn.dispose=function(){yn.close(),Co.call(Bn),Bn.dispose=Co},Bn}else{var Po=new Texture(cr);Po.needsUpdate=!0,typeof ImageBitmap!="undefined"&&cr instanceof ImageBitmap?Po.flipY=!1:Po.flipY=!0;var To=Po.dispose;return Po.dispose=function(){cr.close(),To.call(Po),Po.dispose=To},Po}}function id$1(cr){var vn=new CubeTexture(cr);vn.needsUpdate=!0,vn.flipY=!1;var yn=vn.dispose;return vn.dispose=function(){for(var Rn=0,Bn=cr;Rn<Bn.length;Rn++){var Co=Bn[Rn];Co.close()}yn.call(vn),vn.dispose=yn},vn}var Jo=new Vector3,xn=["right","left","up","down","front","back"],Ge$3=function(){function cr(vn,yn,Rn,Bn,Co){var Po,To,Io;this.tileTree=yn,this.tileSources=Rn,this.options=Bn,this.renderer=Co,this.name="",this.needsRender=!1,this.baseLevel=0,this.maxRequest=cr.DEFAULT_MAX_REQUEST,this.disposed=!1,this.loadedCubeNodes=new Set,this.loadingCubeNodes=new Set,this.drawedCubeNodes=new Set,this.baseCubeTexture=null,this._cubeRenderTarget=null,this.prepareToRender=[],this.baseCubeTexture=vn;var $l=(Po=this.baseCubeTexture.images)!==null&&Po!==void 0?Po:[],Wl=Array.isArray($l)&&$l[0]&&$l[0].width||((Io=(To=Bn.imageURL)===null||To===void 0?void 0:To.options)===null||Io===void 0?void 0:Io.size);typeof Wl!="number"&&(Wl=2048),this.baseLevel=Math.floor(Wl/512)-1}return Object.defineProperty(cr.prototype,"cubeRenderTarget",{get:function(){return this._cubeRenderTarget},set:function(vn){var yn,Rn,Bn,Co,Po,To;if(vn===null)throw new Error("cannot set cubeRenderTarget to null.");vn.width!==this.options.textureSize&&vn.setSize(this.options.textureSize,this.options.textureSize),vn.texture.format=(yn=this.options.format)!==null&&yn!==void 0?yn:RGBAFormat,vn.texture.minFilter=(Rn=this.options.minFilter)!==null&&Rn!==void 0?Rn:LinearFilter,vn.texture.magFilter=(Bn=this.options.magFilter)!==null&&Bn!==void 0?Bn:LinearFilter,vn.texture.wrapS=(Co=this.options.wrapS)!==null&&Co!==void 0?Co:ClampToEdgeWrapping,vn.texture.wrapT=(Po=this.options.wrapT)!==null&&Po!==void 0?Po:ClampToEdgeWrapping,vn.texture.generateMipmaps=(To=this.options.generateMipmaps)!==null&&To!==void 0?To:!0,this.baseCubeTexture&&(C0(this.baseCubeTexture,vn,this.renderer),this.baseCubeTexture.dispose(),this.baseCubeTexture=null),this._cubeRenderTarget&&C0(this._cubeRenderTarget.texture,vn,this.renderer),this._cubeRenderTarget=vn},enumerable:!1,configurable:!0}),cr.prototype.requestTile=function(vn){var yn=this,Rn,Bn,Co,Po,To,Io,$l=this.tileSources.filter(function(Rm){return Rm.level===vn.level})[0];if(this.baseLevel>=vn.level||!$l)return this.loadedCubeNodes.add(vn),this.prepareToRender.push({node:vn,texture:null}),!1;var Wl=$l.size,Xl=Math.pow(2,vn.level)*vn.position.y,Yl=Math.pow(2,vn.level)*vn.position.x,Zl="".concat(((Co=(Bn=(Rn=this.options.imageURL)===null||Rn===void 0?void 0:Rn.options)===null||Bn===void 0?void 0:Bn.key)!==null&&Co!==void 0?Co:"pano.0").replace(/^pano/,"pano_tile"),".").concat(vn.face,".").concat(vn.level,".").concat(Xl,".").concat(Yl),ey=O$n(O$n({},Xt$2((To=(Po=this.options.imageURL)===null||Po===void 0?void 0:Po.options)!==null&&To!==void 0?To:{key:"unknown"},["format","sharpen","mappings"])),{key:Zl,size:$l.scale>=1?void 0:Wl*vn.size*$l.scale,cut:vn.size===1?void 0:[Wl*vn.position.x,Wl*vn.position.y,Wl*vn.size,Wl*vn.size]});return vn.size===1&&console.warn("tile: ".concat(ey.key," should not appear.")),vn.level===1&&$l.scale>=.5&&(ey.format==="jpg"||/\.jpg$/.test($l[vn.face]))&&(ey.size=void 0,ey.quality||(ey.quality=70)),this.loadingCubeNodes.add(vn),this.options.textureLoader.loadTexture($l[vn.face],{imageURL:{transform:(Io=this.options.imageURL)===null||Io===void 0?void 0:Io.transform,options:O$n({},ey)},format:RGBAFormat,timeout:this.options.timeout,magFilter:this.options.magFilter,minFilter:this.options.minFilter,fetcher:this.options.fetcher}).then(function(Rm){if(yn.disposed){Rm.body.dispose();return}yn.prepareToRender.push({node:vn,texture:Rm.body}),yn.loadedCubeNodes.add(vn)}).catch(q$q).then(function(){yn.disposed||yn.loadingCubeNodes.delete(vn)}),!0},cr.prototype.update=function(vn,yn){var Rn=this;if(!this.disposed){var Bn=vn.planes[5].normal,Co=Math.max(this.maxRequest-this.loadingCubeNodes.size,0),Po=[];to(this.tileTree,function(_g){if(_g.level>yn||!vn.intersectsBox(_g.box))return!1;!Rn.loadedCubeNodes.has(_g)&&!Rn.loadingCubeNodes.has(_g)&&Po.push(_g)}),Po.sort(function(_g,ty){return _g.level!==ty.level?_g.level-ty.level:_g.box.getCenter(Jo).angleTo(Bn)-ty.box.getCenter(Jo).angleTo(Bn)});for(var To=0,Io=Po;To<Io.length;To++){var $l=Io[To];if(Co<=0)break;var Wl=this.requestTile($l);Wl&&Co--}if(this.cubeRenderTarget&&this.prepareToRender.length){this.prepareToRender.sort(function(_g,ty){return _g.node.level-ty.node.level});for(var Xl=[],Yl=0;Yl<this.prepareToRender.length;Yl++){var Zl=this.prepareToRender[Yl],$l=Zl.node,ey=Zl.texture;($l.parent===null||this.drawedCubeNodes.has($l.parent))&&(this.drawedCubeNodes.add($l),ey&&Xl.push({face:$l.face,position:$l.position,size:new Vector2($l.size,$l.size),texture:ey,flipY:!ey.flipY}),this.prepareToRender.splice(Yl,1),Yl--)}if(Xl.length){td(Xl,this.cubeRenderTarget,this.renderer);for(var Rm=0,ry=Xl;Rm<ry.length;Rm++){var ey=ry[Rm];ey.texture.dispose()}this.needsRender=!0}}}},Object.defineProperty(cr.prototype,"tilePending",{get:function(){return this.loadingCubeNodes.size},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"texture",{get:function(){if(!this._cubeRenderTarget)throw new Error("cubeRenderTarget never set.");return this._cubeRenderTarget.texture},enumerable:!1,configurable:!0}),cr.prototype.dispose=function(){if(!this.disposed){this.disposed=!0,this.baseCubeTexture&&(this.baseCubeTexture.dispose(),this.baseCubeTexture=null),this.loadingCubeNodes.clear(),this.loadedCubeNodes.clear();for(var vn=0,yn=this.prepareToRender;vn<yn.length;vn++){var Rn=yn[vn];Rn.texture&&Rn.texture.dispose()}this.prepareToRender.length=0}},cr.DEFAULT_MAX_REQUEST=3,cr}(),Fi$1=function(){function cr(){}return cr.prototype.loadTexture=function(vn,yn,Rn,Bn,Co,Po){var To,Io,$l,Wl,Xl,Yl,Zl;Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q),Co===void 0&&(Co=q$q);var ey={};typeof yn.flipY!="undefined"&&(ey.flipY=yn.flipY),typeof yn.format!="undefined"&&(ey.format=yn.format),typeof yn.encoding!="undefined"&&(ey.encoding=yn.encoding),ey.generateMipmaps=(To=yn.generateMipmaps)!==null&&To!==void 0?To:!1,ey.minFilter=(Io=yn.minFilter)!==null&&Io!==void 0?Io:LinearFilter,ey.magFilter=($l=yn.magFilter)!==null&&$l!==void 0?$l:LinearFilter;var Rm=(Xl=(Wl=yn.imageURL)===null||Wl===void 0?void 0:Wl.options)!==null&&Xl!==void 0?Xl:{key:"unknown"};vn=En(vn,(Yl=yn.imageURL)===null||Yl===void 0?void 0:Yl.transform,Rm);var ry=No$1(vn),_g=(Zl=yn.viaAjax)!==null&&Zl!==void 0?Zl:rd,ty=Do(vn),ny=/^https?:/.test(ry);if(ty?_g=!0:ny||(_g=!1),_g){var iy=null,oy="blob";return yn.fetcher.ajax(vn,{timeout:yn.timeout,responseType:oy},void 0,void 0,Co).then(function(hy){return I0(hy.body)}).then(function(hy){return _o(hy,yn.maxSize)}).then(function(hy){return Object.assign(hy,ey),hy}).then(function(hy){var my={meta:iy,body:hy};return Rn(my),my}).catch(function(hy){return Bn(hy),Promise.reject(hy)})}else{var ay=null,uy;return Promise.resolve().then(function(){return bi()}).then(function(hy){return uy=hy,yn.fetcher.loadImage(vn,{timeout:yn.timeout},void 0,void 0,Co,hy)}).then(function(hy){return ay=hy.meta,_o(hy.body,yn.maxSize)}).then(function(hy){return Object.assign(hy,ey),hy}).then(function(hy){var my={meta:ay,body:hy};return Rn(my),my}).catch(function(hy){return uy&&uy.close(),Bn(hy),Promise.reject(hy)})}},cr.prototype.loadCubeTexture=function(vn,yn,Rn,Bn,Co,Po){var To,Io,$l,Wl,Xl,Yl,Zl;Rn===void 0&&(Rn=q$q),Bn===void 0&&(Bn=q$q),Co===void 0&&(Co=q$q);var ey={};typeof yn.format!="undefined"&&(ey.format=yn.format),ey.generateMipmaps=(To=yn.generateMipmaps)!==null&&To!==void 0?To:!1,ey.minFilter=(Io=yn.minFilter)!==null&&Io!==void 0?Io:LinearFilter,ey.magFilter=($l=yn.magFilter)!==null&&$l!==void 0?$l:LinearFilter;for(var Rm=[vn[xn[0]],vn[xn[1]],vn[xn[2]],vn[xn[3]],vn[xn[4]],vn[xn[5]]],ry=[],_g=[0,0,0,0,0,0],ty=[],ny=function(oy){var ay=(Xl=(Wl=yn.imageURL)===null||Wl===void 0?void 0:Wl.options)!==null&&Xl!==void 0?Xl:{key:"unknown"},uy=En(Rm[oy],(Yl=yn.imageURL)===null||Yl===void 0?void 0:Yl.transform,O$n(O$n({},ay),{key:ay.key+"."+xn[oy]})),hy=No$1(uy),my=function(Ay){_g[oy]=Ay,Co(_g.reduce(function(gy,wy){return gy+wy},0)/6)},ly=(Zl=yn.viaAjax)!==null&&Zl!==void 0?Zl:!1,sy=/^https?:$/.test(hy),cy=Do(uy);if(cy?ly=!0:sy||(ly=!1),ly){var fy="blob",vy=yn.fetcher.ajax(uy,{timeout:yn.timeout,responseType:fy},void 0,void 0,my).then(function(Ay){return ty[oy]=Ay.meta,I0(Ay.body)});ry.push(vy)}else{var dy,vy=Promise.resolve().then(function(){return bi()}).then(function(gy){return dy=gy,yn.fetcher.loadImage(uy,{timeout:yn.timeout},void 0,void 0,my,gy)}).then(function(gy){return ty[oy]=gy.meta,gy.body}).catch(function(gy){return dy&&dy.close(),Promise.reject(gy)});ry.push(vy)}},iy=0;iy<6;iy++)ny(iy);return Promise.all(ry).then(function(oy){return id$1(oy)}).then(function(oy){return Object.assign(oy,O$n({encoding:sRGBEncoding},ey)),oy}).then(function(oy){var ay={body:oy,meta:ty};return Rn(ay),ay}).catch(function(oy){for(var ay=0,uy=ry;ay<uy.length;ay++){var hy=uy[ay];hy.then(function(my){return my.close()}).catch(q$q)}return Bn(oy),Promise.reject(oy)})},cr.prototype.loadTiledCubeTexture=function(vn,yn,Rn,Bn,Co,Po,To){var Io=this;return Bn===void 0&&(Bn=q$q),Co===void 0&&(Co=q$q),Po===void 0&&(Po=q$q),new Promise(function($l,Wl){var Xl,Yl;Io.loadCubeTexture(vn,{imageURL:{transform:(Xl=Rn.imageURL)===null||Xl===void 0?void 0:Xl.transform,options:(Yl=Rn.imageURL)===null||Yl===void 0?void 0:Yl.options},format:RGBAFormat,viaAjax:Rn.viaAjax,timeout:Rn.timeout,fetcher:Rn.fetcher,magFilter:Rn.magFilter,minFilter:Rn.minFilter,generateMipmaps:Rn.generateMipmaps},function(Zl){var ey,Rm=Zl.meta,ry=Zl.body,_g=(ey=Rn.tileMaxLevel)!==null&&ey!==void 0?ey:2,ty=Math.max(1024*_g,512),ny=M0(_g),iy=new Ge$3(ry,ny,yn,{textureSize:ty,textureLoader:Io,imageURL:Rn.imageURL,magFilter:Rn.magFilter,minFilter:Rn.minFilter,generateMipmaps:Rn.generateMipmaps,timeout:Rn.timeout,fetcher:Rn.fetcher},To),oy={meta:Rm,body:iy};Bn(oy),$l(oy)},function(Zl){Co(Zl),Wl(Zl)},Po,To).catch(q$q)})},cr}();const ad=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("n\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Iz|}untrl}nlrr\x07K0v{pyqr-Ixv{{v{tl}nlrr\x07K0v{pyqr-Iy|tqr}uosl}nlrr\x07K0v{pyqr-Ipyv}}v{tl}yn{rl}nlrr\x07KZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Ixv{onrlrr\x07K--0v{pyqr-Iortv{lrr\x07K--0v{pyqr-Iz|}untrlrr\x07K--0v{pyqr-Ixv{{v{tlrr\x07K--0v{pyqr-I}|wrplrr\x07K--0v{pyqr-Iy|tqr}uoslrr\x07K--0v{pyqr-Ipyv}}v{tl}yn{rlrr\x07K--Sv{ny]|vv|{-J-rpA5n{s|zrq9->;=6H--0vsqrs-b`RlV[`aN[PV[T----Sv{ny]|vv|{-J-v{n{prZnv\x07-7-Sv{ny]|vv|{H--0r{qvs--Sv{ny]|vv|{-J-z|qryZnv\x07-7-Sv{ny]|vv|{H--zn@-pnzrn_|nv|{Znv\x07-J-zn@5vrZnv\x07h=jh=j9-vrZnv\x07h>jh=j9-vrZnv\x07h?jh=j9-vrZnv\x07h=jh>j9-vrZnv\x07h>jh>j9-vrZnv\x07h?jh>j9-vrZnv\x07h=jh?j9-vrZnv\x07h>jh?j9-vrZnv\x07h?jh?j6H--PnzrnQvrpv|{-J-{|znyv	r5pnzrn_|nv|{Znv\x07-7-rp@5=;=9-=;=9-:>;=66H--0v{pyqr-I|yq}|lrr\x07K--0v{pyqr-Is|tlrr\x07K--ZNV[lR[Q\f"),od=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=6{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H{vs|z-sy|n-}n{|=l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H{vs|z-sy|n-}n{|>l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trHn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{H{vs|z-sy|n-u|{Sy||V{qr\x07H{vs|z-rp?-r|yv|{H{vs|z-sy|n-}v\x07ry_nv|H0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Iqvurv{tl}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-I}rpynzn}l}nlsntzr{K0v{pyqr-Iy|tqr}uosl}nlsntzr{K0v{pyqr-Ipyv}}v{tl}yn{rl}nlsntzr{Krp@-	||zcrp|5rp@-qvrpv|{9-rp@-rp|9-sy|n-	||z6-\n--sy|n-urn-J-q|5qvrpv|{9-rp|6H--rp@-q-J-qvrpv|{-7-urnH--rp@-}-J-rp|-:-qH--rp@-\0-J-}-7-	||zH--r{-{|znyv	r5q-8-\x006H\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Ipyv}}v{tl}yn{rlsntzr{K--<<-JJJ-\u5168\u666F\u56FE-JJJ--rp@-}n{|=a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6H--}n{|=a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|=a|crr\x079-}n{|=l	||z6H--}n{|=a|crr\x07-J-}n{|=a|crr\x07-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6H--}n{|>a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|>a|crr\x079-}n{|>l	||z6H--}n{|>a|crr\x07-J-}n{|>a|crr\x07-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-]V-8->;=66H--0ryvs-qrsv{rq5b`Rl`]_RNQla_N[`VaV\\[6----rp?-prr{Pr{rP||q-J-r|yv|{-7-}v\x07ry_nv|-<-?;=H----sy|n-n{vv|{_nqv-J-qvn{pr5rp?5=;=9-=;=69-prr{Pr{rP||q6-7->;?H----sy|n-n{vv|{]|tr-J--qvn{pr5tylSntP||q;\x07\b9-prr{Pr{rP||q6-<-n{vv|{_nqvH----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-z||ur}5=;=9-=;?9-}|tr-:-n{vv|{]|tr66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--tylSntP|y|-J-zv\x075}n{|P|y|9-rpA5}n{|P|y|;to9-=;=69-pynz}5z|qryNy}un-7-@=;=9-=;=9->;=66H--<<-JJJJJJJJJJJJJJJJ--ZNV[lZ\\QRYlP\\Y\\_--0v{pyqr-Is|tlsntzr{K--0v{pyqr-I}rzyv}yvrqlny}unlsntzr{K--0v{pyqr-Iqvurv{tlsntzr{K--ZNV[lR[Q\f"),sd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvs0vs-qrsv{rq5b`RlcR_aRelZN_X6--nvor-sy|n-znxH0r{qvsn\bv{t-sy|n-V_||sZnxHn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-cvr]|vv|{H0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ir{zn}l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Is|tl}nlrr\x07K0v{pyqr-Iz|}untrl}nlrr\x07K0v{pyqr-Ixv{{v{tl}nlrr\x07K0v{pyqr-Iy|tqr}uosl}nlrr\x07K0v{pyqr-Ipyv}}v{tl}yn{rl}nlrr\x07KZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Ixv{onrlrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iz|}u{|znylrr\x07K--0v{pyqr-Ixv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--0vs{qrs-SYNal`UNQRQ-<<-[|zny-p|z}rq-vu-qrvnvr-ur{-SYNal`UNQRQ--[|zny-J-{|znyv	r5-n{s|zrq[|zny-6H--0r{qvs--0v{pyqr-Iortv{lrr\x07K--0v{pyqr-Iz|}untrlrr\x07K--0v{pyqr-Ixv{{v{tlrr\x07K--0v{pyqr-I}|wrplrr\x07K--0v{pyqr-Iy|tqr}uoslrr\x07K--0v{pyqr-Ipyv}}v{tl}yn{rlrr\x07K--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--Sv{ny]|vv|{-J-rpA5n{s|zrq9->;=6H--0vsqrs-b`RlV[`aN[PV[T----Sv{ny]|vv|{-J-v{n{prZnv\x07-7-Sv{ny]|vv|{H--0r{qvs--Sv{ny]|vv|{-J-z|qryZnv\x07-7-Sv{ny]|vv|{H--zn@-pnzrn_|nv|{Znv\x07-J-zn@5vrZnv\x07h=jh=j9-vrZnv\x07h>jh=j9-vrZnv\x07h?jh=j9-vrZnv\x07h=jh>j9-vrZnv\x07h>jh>j9-vrZnv\x07h?jh>j9-vrZnv\x07h=jh?j9-vrZnv\x07h>jh?j9-vrZnv\x07h?jh?j6H--PnzrnQvrpv|{-J-{|znyv	r5pnzrn_|nv|{Znv\x07-7-rp@5=;=9-=;=9-:>;=66H--0vs-qrsv{rq5b`RlRQY6----Y|tQr}u-J-y|t?5:z]|vv|{;	6H--0r{qvs--V_||sZnx-J-=;=H--0vs-qrsv{rq5b`RlcR_aRelZN_X6----V_||sZnx-J-r}5no5znx-:->;=69-=;>6H--0r{qvs--0v{pyqr-I|yq}|lrr\x07K--0v{pyqr-Ir{zn}lrr\x07K--0v{pyqr-Is|tlrr\x07K--ZNV[lR[Q\f"),ud=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=6{vs|z-sy|n-sy||V{qr\x07H{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H{vs|z-sy|n-}n{|=l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H{vs|z-sy|n-}n{|>l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6--{vs|z-rp@-p|{n{P|y|H0r{qvs0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6--{vs|z-nz}yr?Q-tnqvr{ar\x07rH0r{qvsp-Pyv}}r-\n--znA-znv\x07V{rrH--sy|n-sy||V{qr\x07H\fH0vs-[bZlPYV]]R_`-K-=--{vs|z-Pyv}}r-pyv}}rh[bZlPYV]]R_`jH0r{qvs0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvsn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-cvr]|vv|{Hn\bv{t-sy|n-V_||sZnxH{vs|z-sy|n-u|{Sy||V{qr\x07H{vs|z-rp?-r|yv|{H{vs|z-sy|n-}v\x07ry_nv|H{vs|z-rp@-qvssrH{vs|z-sy|n-p|y|Ny}unH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-ovtu{rH{vs|z-rp@-z|qryO|{qv{tZn\x07H{vs|z-rp@-z|qryO|{qv{tZv{H<<u\u8C03\u6574{vs|z-sy|n-p|y|`nnv|{H{vs|z-sy|n-p|y|Ovtu{rH0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Iqvurv{tl}nlsntzr{K0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Ir{zn}lp|zz|{l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Iporllrsyrpv|{lsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-I}rpynzn}l}nlsntzr{K0v{pyqr-Iy|tqr}uosl}nlsntzr{K0v{pyqr-Ipyv}}v{tl}yn{rl}nlsntzr{Krp@-	||zcrp|5rp@-qvrpv|{9-rp@-rp|9-sy|n-	||z6-\n--sy|n-urn-J-q|5qvrpv|{9-rp|6H--rp@-q-J-qvrpv|{-7-urnH--rp@-}-J-rp|-:-qH--rp@-\0-J-}-7-	||zH--r{-{|znyv	r5q-8-\x006H\frp@-to?u5rp@-p6-\n----rpA-X-J-rpA5=;=9-:>;=-<-@;=9-?;=-<-@;=9-:>;=6H----rpA-}-J-zv\x075rpA5p;ot9-X;	69-rpA5p;to9-X;\x07\b69-r}5p;o9-p;t66H----rpA-\0-J-zv\x075rpA5};\x07\b9-p;69-rpA5p;9-};\b	\x0769-r}5};\x079-p;66H----sy|n-q-J-\0;\x07-:-zv{5\0;9-\0;\b6H----sy|n-r-J->;=r:>=H----r{-rp@5no5\0;	-8-5\0;-:-\0;\b6-<-5C;=-7-q-8-r669-q-<-5\0;\x07-8-r69-\0;\x076H\frp@-u?to5rp@-p6-\n----rpA-X-J-rpA5>;=9-?;=-<-@;=9->;=-<-@;=9-@;=6H----rp@-}-J-no5snp5p;\x07\x07\x07-8-X;\x07\b	6-7-C;=-:-X;6H----r{-p;	-7-zv\x075X;\x07\x07\x079-pynz}5}-:-X;\x07\x07\x079-=;=9->;=69-p;\b6H\frp@-trP|y|O\bUrvtu5nz}yr?Q-tnqvr{ar\x07r9-rpA-Sv{ny]|vv|{6-\n--sy|n--J-5Sv{ny]|vv|{;\b-:-z|qryO|{qv{tZv{;\b6-<-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6H--r{-r\x07r?Q5tnqvr{ar\x07r9-rp?59-=;B66;toH\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--<<-JJJ-\u9876\u90E8\u88C1\u5207-JJJ--sy|n-||sP]|tr-J-}|5pynz}5:PnzrnQvrpv|{;\b9-=;=9->;=69-@;=6H--vs-5----V_||sZnx-K-=;B-33----Sv{ny]|vv|{;\b-K-z|qryO|{qv{tZn\x07;\b-:-||sP]|tr-7-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6--6-\n----qvpnqH--\f--<<-JJJJJJJJJJJJJJ--<<-JJJ-\u524D\u7F6E\u88C1\u5207\u8BA1\u7B97-JJJ--0vs-[bZlPYV]]R_`-K-=----o||y-pyv}}rqH----rpA-pyv}}r]|vv|{H----0}ntzn-{|yyly||}ln----s|-5-v{-v-J-=H-v-I-[bZlPYV]]R_`H-v-88-6-\n------pyv}}r]|vv|{-J-pyv}}rh-v-j;znv\x07V{rr-7-Sv{ny]|vv|{H------pyv}}rq-J-5pyv}}rh-v-j;sy||V{qr\x07-I-=;=-\v\v-no5sy||V{qr\x07-:-pyv}}rh-v-j;sy||V{qr\x076-I->;=6H------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\x07-K-:=;B-33-pyv}}r]|vv|{;\x07-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\b-K-:=;B-33-pyv}}r]|vv|{;\b-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;	-K-:=;B-33-pyv}}r]|vv|{;	-I-=;BH------vs-5pyv}}rq6-\n--------qvpnqH------\f----\f----0}ntzn-{|yyly||}lr{q--0r{qvs--<<-JJJJJJJJJJJJJJJJJJ--0v{pyqr-Ipyv}}v{tl}yn{rlsntzr{K--rpA-qvssrP|y|-J-rpA5-qvssr9-p|y|Ny}un-7-|}npv\b-6H--<<-JJJ-\u9AD8\u5EA6\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6----qvssrP|y|;to-J-trP|y|O\bUrvtu5tnqvr{ar\x07r9-Sv{ny]|vv|{6H--0r{qvs--<<-JJJJJJJJJJJ--<<-JJJ-\u7EAF\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6----qvssrP|y|;to-J-p|{n{P|y|H--0r{qvs--<<-JJJJJJJJJJJ--0v{pyqr-Iy|tqr}uoslsntzr{K--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-6-6H--<<-nppzynv|{-5onxrq-v{qvrp-yvtuv{t-|{y\b6--0vsqrs-b`RlYVTUaZN]----rpA-yvtuZn}ar\x07ryJ-r\x07r?Q5-yvtuZn}9-b?-6H----rsyrprqYvtu;v{qvrpQvssr-8J-yvtuZn}ar\x07rya|Yv{rn5-yvtuZn}ar\x07ry-6;to-7-yvtuZn}V{r{v\bH--0ryr----rsyrprqYvtu;v{qvrpQvssr-8J-rp@5->;=-6H--0r{qvs--<<-z|qynv|{--0v{pyqr-In|zn}lsntzr{K--rsyrprqYvtu;v{qvrpQvssr-7J-qvssrP|y|;toH--rp@-|t|v{tYvtu-J-rsyrprqYvtu;v{qvrpQvssrH--0v{pyqr-Ir{zn}lsntzr{K--tylSntP|y|-J-rpA5-|t|v{tYvtu9-qvssrP|y|;n-6H--<<-JJJ-\u697C\u5C42\u663E\u793A-JJJ--sy|n-sy||\\}npv\b-J->;=H--vs-5u|{Sy||V{qr\x07-K-:=;=>-33-no5sy||V{qr\x07-:-u|{Sy||V{qr\x076-K-=;FF6-\n----sy||\\}npv\b-J-=;?-7-zv{55>;=-8-PnzrnQvrpv|{;\b69->;=6H--\f--tylSntP|y|;n-J-tylSntP|y|;n-7-sy||\\}npv\b-7-ovtu{rH--<<-JJJJJJJJJJJJJJ--ZNV[lZ\\QRYlP\\Y\\_--<<\u8272\u8C03\u6620\u5C04-\u8272\u5F69\u7A7A\u95F4\u8F6C\u6362--0v{pyqr-I|{rzn}}v{tlsntzr{K--0v{pyqr-Ir{p|qv{tlsntzr{K--<<-JJJ-\u989C\u8272\u589E\u76CA\u8C03\u6574-JJJ--rp@-toP|y|-J-tylSntP|y|;toH--rp@-uP|y|-J-to?u5toP|y|6H--uP|y|;\b-8J-p|y|`nnv|{H--uP|y|;	-8J-p|y|Ovtu{rH--tylSntP|y|;to-J-u?to5uP|y|6H--<<-JJJ-\u5168\u666F\u56FE-JJJ--rp@-}n{|=a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6H--}n{|=a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|=a|crr\x079-}n{|=l	||z6H--}n{|=a|crr\x07-J-}n{|=a|crr\x07-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6H--}n{|>a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|>a|crr\x079-}n{|>l	||z6H--}n{|>a|crr\x07-J-}n{|>a|crr\x07-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-]V-8->;=66H--0ryvs-qrsv{rq5b`Rl`]_RNQla_N[`VaV\\[6----rp?-prr{Pr{rP||q-J-r|yv|{-7-}v\x07ry_nv|-<-?;=H----sy|n-n{vv|{_nqv-J-qvn{pr5rp?5=;=9-=;=69-prr{Pr{rP||q6-7->;?H----sy|n-n{vv|{]|tr-J-qvn{pr5tylSntP||q;\x07\b9-prr{Pr{rP||q6-<-n{vv|{_nqvH----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-z||ur}5=;=9-=;?9-}|tr-:-n{vv|{]|tr66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H--<<-JJJJJJJJJJJJJ--0v{pyqr-Is|tlsntzr{K--0v{pyqr-I}rzyv}yvrqlny}unlsntzr{K--0v{pyqr-Iqvurv{tlsntzr{K--0vs-qrsv{rq5b`RlRQY6----tylSntP|y|;n-J-Y|tQr}uH--0r{qvs--ZNV[lR[Q\f"),ld=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-]U\\[T0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvs0vs-qrsv{rq5b`RlcR_aRelZN_X6--nvor-sy|n-znxH0r{qvsn\bv{t-sy|n-V_||sZnxHn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-cvr]|vv|{H0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Iqv}ynprzr{zn}l}nlrr\x07K0v{pyqr-Ir{zn}l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Is|tl}nlrr\x07K0v{pyqr-Iz|}untrl}nlrr\x07K0v{pyqr-Ixv{{v{tl}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K0v{pyqr-Iy|tqr}uosl}nlrr\x07K0v{pyqr-Ipyv}}v{tl}yn{rl}nlrr\x07KZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iz|}u{|znylrr\x07K--0v{pyqr-Ixv{onrlrr\x07K--0v{pyqr-Ixv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--0vs{qrs-SYNal`UNQRQ-<<-[|zny-p|z}rq-vu-qrvnvr-ur{-SYNal`UNQRQ----[|zny-J-{|znyv	r5-n{s|zrq[|zny-6H----0vsqrs-b`RlaN[TR[a------an{tr{-J-{|znyv	r5-n{s|zrqan{tr{-6H------Ovn{tr{-J-{|znyv	r5-p|5-[|zny9-an{tr{-6-7-n{tr{;-6H----0r{qvs--0r{qvs--0v{pyqr-Iortv{lrr\x07K--0v{pyqr-Iz|}untrlrr\x07K--0v{pyqr-Ixv{{v{tlrr\x07K--0v{pyqr-Iqv}ynprzr{zn}lrr\x07K--0v{pyqr-I}|wrplrr\x07K--0v{pyqr-Iy|tqr}uoslrr\x07K--0v{pyqr-Ipyv}}v{tl}yn{rlrr\x07K--cvr]|vv|{-J-:-z]|vv|{;\x07\b	H--Sv{ny]|vv|{-J-rpA5n{s|zrq9->;=6H--0vsqrs-b`RlV[`aN[PV[T----Sv{ny]|vv|{-J-v{n{prZnv\x07-7-Sv{ny]|vv|{H--0r{qvs--Sv{ny]|vv|{-J-z|qryZnv\x07-7-Sv{ny]|vv|{H--zn@-pnzrn_|nv|{Znv\x07-J-zn@5vrZnv\x07h=jh=j9-vrZnv\x07h>jh=j9-vrZnv\x07h?jh=j9-vrZnv\x07h=jh>j9-vrZnv\x07h>jh>j9-vrZnv\x07h?jh>j9-vrZnv\x07h=jh?j9-vrZnv\x07h>jh?j9-vrZnv\x07h?jh?j6H--PnzrnQvrpv|{-J-{|znyv	r5pnzrn_|nv|{Znv\x07-7-rp@5=;=9-=;=9-:>;=66H--0vs-qrsv{rq5b`RlRQY6----Y|tQr}u-J-y|t?5:z]|vv|{;	6H--0r{qvs--V_||sZnx-J-=;=H--0vs-qrsv{rq5b`RlcR_aRelZN_X6----V_||sZnx-J-r}5no5znx-:->;=69-=;>6H--0r{qvs--0v{pyqr-I|yq}|lrr\x07K--0v{pyqr-Ir{zn}lrr\x07K--0v{pyqr-Iunq|zn}lrr\x07K--0v{pyqr-Is|tlrr\x07K--ZNV[lR[Q\f"),cd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-]U\\[T0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=6{vs|z-sy|n-sy||V{qr\x07H{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H{vs|z-sy|n-}n{|=l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H{vs|z-sy|n-}n{|>l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6--{vs|z-rp@-p|{n{P|y|H0r{qvs0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6--{vs|z-nz}yr?Q-tnqvr{ar\x07rH0r{qvsp-Pyv}}r-\n--znA-znv\x07V{rrH--sy|n-sy||V{qr\x07H\fH0vs-[bZlPYV]]R_`-K-=--{vs|z-Pyv}}r-pyv}}rh[bZlPYV]]R_`jH0r{qvs0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvsn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-sy|n-V_||sZnxH{vs|z-sy|n-u|{Sy||V{qr\x07H{vs|z-rp?-r|yv|{H{vs|z-sy|n-}v\x07ry_nv|H{vs|z-rp@-qvssrH{vs|z-sy|n-p|y|Ny}unH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-ovtu{rH{vs|z-rp@-z|qryO|{qv{tZn\x07H{vs|z-rp@-z|qryO|{qv{tZv{H<<u\u8C03\u6574{vs|z-sy|n-p|y|`nnv|{H{vs|z-sy|n-p|y|Ovtu{rH0vs{qrs-SYNal`UNQRQ--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Iqvurv{tl}nlsntzr{K0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iporllrsyrpv|{lsntzr{K0v{pyqr-Ir{zn}lp|zz|{l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{K0v{pyqr-Ioz}zn}l}nlsntzr{K0v{pyqr-I{|znyzn}l}nlsntzr{K0v{pyqr-I}rpynzn}l}nlsntzr{K0v{pyqr-Iy|tqr}uosl}nlsntzr{K0v{pyqr-Ipyv}}v{tl}yn{rl}nlsntzr{Krp@-	||zcrp|5rp@-qvrpv|{9-rp@-rp|9-sy|n-	||z6-\n--sy|n-urn-J-q|5qvrpv|{9-rp|6H--rp@-q-J-qvrpv|{-7-urnH--rp@-}-J-rp|-:-qH--rp@-\0-J-}-7-	||zH--r{-{|znyv	r5q-8-\x006H\frp@-to?u5rp@-p6-\n----rpA-X-J-rpA5=;=9-:>;=-<-@;=9-?;=-<-@;=9-:>;=6H----rpA-}-J-zv\x075rpA5p;ot9-X;	69-rpA5p;to9-X;\x07\b69-r}5p;o9-p;t66H----rpA-\0-J-zv\x075rpA5};\x07\b9-p;69-rpA5p;9-};\b	\x0769-r}5};\x079-p;66H----sy|n-q-J-\0;\x07-:-zv{5\0;9-\0;\b6H----sy|n-r-J->;=r:>=H----r{-rp@5no5\0;	-8-5\0;-:-\0;\b6-<-5C;=-7-q-8-r669-q-<-5\0;\x07-8-r69-\0;\x076H\frp@-u?to5rp@-p6-\n----rpA-X-J-rpA5>;=9-?;=-<-@;=9->;=-<-@;=9-@;=6H----rp@-}-J-no5snp5p;\x07\x07\x07-8-X;\x07\b	6-7-C;=-:-X;6H----r{-p;	-7-zv\x075X;\x07\x07\x079-pynz}5}-:-X;\x07\x07\x079-=;=9->;=69-p;\b6H\frp@-trP|y|O\bUrvtu5nz}yr?Q-tnqvr{ar\x07r9-rpA-Sv{ny]|vv|{6-\n--sy|n--J-5Sv{ny]|vv|{;\b-:-z|qryO|{qv{tZv{;\b6-<-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6H--r{-r\x07r?Q5tnqvr{ar\x07r9-rp?59-=;B66;toH\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--<<-JJJ-\u9876\u90E8\u88C1\u5207-JJJ--sy|n-||sP]|tr-J-}|5pynz}5:PnzrnQvrpv|{;\b9-=;=9->;=69-@;=6H--vs-5----V_||sZnx-K-=;B-33----Sv{ny]|vv|{;\b-K-z|qryO|{qv{tZn\x07;\b-:-||sP]|tr-7-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6--6-\n----qvpnqH--\f--<<-JJJJJJJJJJJJJJ--<<-JJJ-\u524D\u7F6E\u88C1\u5207\u8BA1\u7B97-JJJ--0vs-[bZlPYV]]R_`-K-=----o||y-pyv}}rqH----rpA-pyv}}r]|vv|{H----0}ntzn-{|yyly||}ln----s|-5-v{-v-J-=H-v-I-[bZlPYV]]R_`H-v-88-6-\n------pyv}}r]|vv|{-J-pyv}}rh-v-j;znv\x07V{rr-7-Sv{ny]|vv|{H------pyv}}rq-J-5pyv}}rh-v-j;sy||V{qr\x07-I-=;=-\v\v-no5sy||V{qr\x07-:-pyv}}rh-v-j;sy||V{qr\x076-I->;=6H------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\x07-K-:=;B-33-pyv}}r]|vv|{;\x07-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\b-K-:=;B-33-pyv}}r]|vv|{;\b-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;	-K-:=;B-33-pyv}}r]|vv|{;	-I-=;BH------vs-5pyv}}rq6-\n--------qvpnqH------\f----\f----0}ntzn-{|yyly||}lr{q--0r{qvs--<<-JJJJJJJJJJJJJJJJ--0v{pyqr-Ipyv}}v{tl}yn{rlsntzr{K--rpA-qvssrP|y|-J-rpA5-qvssr9-p|y|Ny}un-7-|}npv\b-6H--<<-JJJ-\u9AD8\u5EA6\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6----qvssrP|y|;to-J-trP|y|O\bUrvtu5tnqvr{ar\x07r9-Sv{ny]|vv|{6H--0r{qvs--<<-JJJJJJJJJJJ--<<-JJJ-\u7EAF\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6----qvssrP|y|;to-J-p|{n{P|y|H--0r{qvs--<<-JJJJJJJJJJJ--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-6-6H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Iy|tqr}uoslsntzr{K--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--<<-nppzynv|{--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--<<-z|qynv|{--0v{pyqr-In|zn}lsntzr{K--rp@-|t|v{tYvtu-J-rsyrprqYvtu;qvrpQvssr-8-rsyrprqYvtu;v{qvrpQvssr-8-rsyrprqYvtu;qvrp`}rpyn-8-rsyrprqYvtu;v{qvrp`}rpyn-8-|nyRzvvr_nqvn{prH--0v{pyqr-Ir{zn}lsntzr{K--tylSntP|y|-J-rpA5-|t|v{tYvtu9-qvssrP|y|;n-6H--<<-JJJ-\u697C\u5C42\u663E\u793A-JJJ--sy|n-sy||\\}npv\b-J->;=H--vs-5u|{Sy||V{qr\x07-K-:=;=>-33-no5sy||V{qr\x07-:-u|{Sy||V{qr\x076-K-=;FF6-\n----sy||\\}npv\b-J-=;?-7-zv{55>;=-8-PnzrnQvrpv|{;\b69->;=6H--\f--tylSntP|y|;n-J-tylSntP|y|;n-7-sy||\\}npv\b-7-ovtu{rH--<<-JJJJJJJJJJJJJJ--ZNV[lZ\\QRYlP\\Y\\_--<<\u8272\u8C03\u6620\u5C04-\u8272\u5F69\u7A7A\u95F4\u8F6C\u6362--0v{pyqr-I|{rzn}}v{tlsntzr{K--0v{pyqr-Ir{p|qv{tlsntzr{K--<<-JJJ-\u989C\u8272\u589E\u76CA\u8C03\u6574-JJJ--rp@-toP|y|-J-tylSntP|y|;toH--rp@-uP|y|-J-to?u5toP|y|6H--uP|y|;\b-8J-p|y|`nnv|{H--uP|y|;	-8J-p|y|Ovtu{rH--tylSntP|y|;to-J-u?to5uP|y|6H--<<-JJJ-\u5168\u666F\u56FE-JJJ--rp@-}n{|=a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6H--}n{|=a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|=a|crr\x079-}n{|=l	||z6H--}n{|=a|crr\x07-J-}n{|=a|crr\x07-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6H--}n{|>a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|>a|crr\x079-}n{|>l	||z6H--}n{|>a|crr\x07-J-}n{|>a|crr\x07-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-]V-8->;=66H--0ryvs-qrsv{rq5b`Rl`]_RNQla_N[`VaV\\[6----rp?-prr{Pr{rP||q-J-r|yv|{-7-}v\x07ry_nv|-<-?;=H----sy|n-n{vv|{_nqv-J-qvn{pr5rp?5=;=9-=;=69-prr{Pr{rP||q6-7->;?H----sy|n-n{vv|{]|tr-J-qvn{pr5tylSntP||q;\x07\b9-prr{Pr{rP||q6-<-n{vv|{_nqvH----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-z||ur}5=;=9-=;?9-}|tr-:-n{vv|{]|tr66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H--<<-JJJJJJJJJJJJJJ--0v{pyqr-Is|tlsntzr{K--0v{pyqr-I}rzyv}yvrqlny}unlsntzr{K--0v{pyqr-Iqvurv{tlsntzr{K--0vs-qrsv{rq5b`RlRQY6----tylSntP|y|;n-J-Y|tQr}uH--0r{qvs--ZNV[lR[Q\f"),fd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-`aN[QN_Q0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvs0vs-qrsv{rq5b`RlcR_aRelZN_X6--nvor-sy|n-znxH0r{qvsn\bv{t-sy|n-V_||sZnxHn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-cvr]|vv|{H0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Iqv}ynprzr{zn}l}nlrr\x07K0v{pyqr-Ir{zn}l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Is|tl}nlrr\x07K0v{pyqr-Iz|}untrl}nlrr\x07K0v{pyqr-Ixv{{v{tl}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K0v{pyqr-Iy|tqr}uosl}nlrr\x07K0v{pyqr-Ipyv}}v{tl}yn{rl}nlrr\x07KZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iz|}u{|znylrr\x07K--0v{pyqr-Ixv{onrlrr\x07K--0v{pyqr-Ixv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K0vs{qrs-SYNal`UNQRQ-<<-[|zny-p|z}rq-vu-qrvnvr-ur{-SYNal`UNQRQ--[|zny-J-{|znyv	r5-n{s|zrq[|zny-6H--0vsqrs-b`RlaN[TR[a----an{tr{-J-{|znyv	r5-n{s|zrqan{tr{-6H----Ovn{tr{-J-{|znyv	r5-p|5-[|zny9-an{tr{-6-7-n{tr{;-6H--0r{qvs0r{qvs--0v{pyqr-Iortv{lrr\x07K--0v{pyqr-Iz|}untrlrr\x07K--0v{pyqr-Ixv{{v{tlrr\x07K--0v{pyqr-Iqv}ynprzr{zn}lrr\x07K--0v{pyqr-I}|wrplrr\x07K--0v{pyqr-Iy|tqr}uoslrr\x07K--0v{pyqr-Ipyv}}v{tl}yn{rlrr\x07K--cvr]|vv|{-J-:-z]|vv|{;\x07\b	H--Sv{ny]|vv|{-J-rpA5n{s|zrq9->;=6H--0vsqrs-b`RlV[`aN[PV[T----Sv{ny]|vv|{-J-v{n{prZnv\x07-7-Sv{ny]|vv|{H--0r{qvs--Sv{ny]|vv|{-J-z|qryZnv\x07-7-Sv{ny]|vv|{H--zn@-pnzrn_|nv|{Znv\x07-J-zn@5vrZnv\x07h=jh=j9-vrZnv\x07h>jh=j9-vrZnv\x07h?jh=j9-vrZnv\x07h=jh>j9-vrZnv\x07h>jh>j9-vrZnv\x07h?jh>j9-vrZnv\x07h=jh?j9-vrZnv\x07h>jh?j9-vrZnv\x07h?jh?j6H--PnzrnQvrpv|{-J-{|znyv	r5pnzrn_|nv|{Znv\x07-7-rp@5=;=9-=;=9-:>;=66H--0vs-qrsv{rq5b`RlRQY6----Y|tQr}u-J-y|t?5:z]|vv|{;	6H--0r{qvs--V_||sZnx-J-=;=H--0vs-qrsv{rq5b`RlcR_aRelZN_X6----V_||sZnx-J-r}5no5znx-:->;=69-=;>6H--0r{qvs--0v{pyqr-I|yq}|lrr\x07K--0v{pyqr-Ir{zn}lrr\x07K--0v{pyqr-Iunq|zn}lrr\x07K--0v{pyqr-Is|tlrr\x07K--ZNV[lR[Q\f"),dd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("0qrsv{r-`aN[QN_Q0qrsv{r-_RSYRPaVcVaf0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=6{vs|z-sy|n-sy||V{qr\x07H{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H{vs|z-sy|n-}n{|=l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H{vs|z-sy|n-}n{|>l	||zH0vs-qrsv{rq5b`RlYbZV[N[PR6--{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6--{vs|z-rp@-p|{n{P|y|H0r{qvs0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6--{vs|z-nz}yr?Q-tnqvr{ar\x07rH0r{qvsp-Pyv}}r-\n--znA-znv\x07V{rrH--sy|n-sy||V{qr\x07H\fH0vs-[bZlPYV]]R_`-K-=--{vs|z-Pyv}}r-pyv}}rh[bZlPYV]]R_`jH0r{qvs0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvsn\bv{t-rpA-Sv{ny]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-sy|n-V_||sZnxH{vs|z-sy|n-u|{Sy||V{qr\x07H{vs|z-rp?-r|yv|{H{vs|z-sy|n-}v\x07ry_nv|H{vs|z-rp@-qvssrH{vs|z-sy|n-p|y|Ny}unH{vs|z-rp@-rzvvrH{vs|z-sy|n-|tu{rH{vs|z-sy|n-zrny{rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-ovtu{rH0vsqrs-_RSYRPaVcVaf--{vs|z-sy|n-rsyrpvv\bH0r{qvs{vs|z-rp@-z|qryO|{qv{tZn\x07H{vs|z-rp@-z|qryO|{qv{tZv{H<<u\u8C03\u6574{vs|z-sy|n-p|y|`nnv|{H{vs|z-sy|n-p|y|Ovtu{rHn\bv{t-rp@-cvr]|vv|{H0vs{qrs-SYNal`UNQRQ--n\bv{t-rp@-[|znyH--0vsqrs-b`RlaN[TR[a----n\bv{t-rp@-an{tr{H----n\bv{t-rp@-Ovn{tr{H--0r{qvs0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Iqvurv{tl}nlsntzr{K0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iporllrsyrpv|{lsntzr{K0v{pyqr-Ir{zn}lp|zz|{l}nlsntzr{K0v{pyqr-Ir{zn}l}u\bvpnyl}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u\bvpnyl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{K0v{pyqr-Ioz}zn}l}nlsntzr{K0v{pyqr-I{|znyzn}l}nlsntzr{K0v{pyqr-I|tu{rzn}l}nlsntzr{K0v{pyqr-Izrny{rzn}l}nlsntzr{K0v{pyqr-Iy|tqr}uosl}nlsntzr{K0v{pyqr-Ipyv}}v{tl}yn{rl}nlsntzr{Krp@-	||zcrp|5rp@-qvrpv|{9-rp@-rp|9-sy|n-	||z6-\n--sy|n-urn-J-q|5qvrpv|{9-rp|6H--rp@-q-J-qvrpv|{-7-urnH--rp@-}-J-rp|-:-qH--rp@-\0-J-}-7-	||zH--r{-{|znyv	r5q-8-\x006H\frp@-to?u5rp@-p6-\n----rpA-X-J-rpA5=;=9-:>;=-<-@;=9-?;=-<-@;=9-:>;=6H----rpA-}-J-zv\x075rpA5p;ot9-X;	69-rpA5p;to9-X;\x07\b69-r}5p;o9-p;t66H----rpA-\0-J-zv\x075rpA5};\x07\b9-p;69-rpA5p;9-};\b	\x0769-r}5};\x079-p;66H----sy|n-q-J-\0;\x07-:-zv{5\0;9-\0;\b6H----sy|n-r-J->;=r:>=H----r{-rp@5no5\0;	-8-5\0;-:-\0;\b6-<-5C;=-7-q-8-r669-q-<-5\0;\x07-8-r69-\0;\x076H\frp@-u?to5rp@-p6-\n----rpA-X-J-rpA5>;=9-?;=-<-@;=9->;=-<-@;=9-@;=6H----rp@-}-J-no5snp5p;\x07\x07\x07-8-X;\x07\b	6-7-C;=-:-X;6H----r{-p;	-7-zv\x075X;\x07\x07\x079-pynz}5}-:-X;\x07\x07\x079-=;=9->;=69-p;\b6H\frp@-trP|y|O\bUrvtu5nz}yr?Q-tnqvr{ar\x07r9-rpA-Sv{ny]|vv|{6-\n--sy|n--J-5Sv{ny]|vv|{;\b-:-z|qryO|{qv{tZv{;\b6-<-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6H--r{-r\x07r?Q5tnqvr{ar\x07r9-rp?59-=;B66;toH\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--<<-JJJ-\u9876\u90E8\u88C1\u5207-JJJ--sy|n-||sP]|tr-J-}|5pynz}5:PnzrnQvrpv|{;\b9-=;=9->;=69-@;=6H--vs-5----V_||sZnx-K-=;B-33----Sv{ny]|vv|{;\b-K-z|qryO|{qv{tZn\x07;\b-:-||sP]|tr-7-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6--6-\n----qvpnqH--\f--<<-JJJJJJJJJJJJJJ--<<-JJJ-\u524D\u7F6E\u88C1\u5207\u8BA1\u7B97-JJJ--0vs-[bZlPYV]]R_`-K-=----o||y-pyv}}rqH----rpA-pyv}}r]|vv|{H----0}ntzn-{|yyly||}ln----s|-5-v{-v-J-=H-v-I-[bZlPYV]]R_`H-v-88-6-\n------pyv}}r]|vv|{-J-pyv}}rh-v-j;znv\x07V{rr-7-Sv{ny]|vv|{H------pyv}}rq-J-5pyv}}rh-v-j;sy||V{qr\x07-I-=;=-\v\v-no5sy||V{qr\x07-:-pyv}}rh-v-j;sy||V{qr\x076-I->;=6H------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\x07-K-:=;B-33-pyv}}r]|vv|{;\x07-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\b-K-:=;B-33-pyv}}r]|vv|{;\b-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;	-K-:=;B-33-pyv}}r]|vv|{;	-I-=;BH------vs-5pyv}}rq6-\n--------qvpnqH------\f----\f----0}ntzn-{|yyly||}lr{q--0r{qvs--<<-JJJJJJJJJJJJJJJJ--0v{pyqr-Ipyv}}v{tl}yn{rlsntzr{K--rpA-qvssrP|y|-J-rpA5-qvssr9-p|y|Ny}un-7-|}npv\b-6H--<<-JJJ-\u9AD8\u5EA6\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6----qvssrP|y|;to-J-trP|y|O\bUrvtu5tnqvr{ar\x07r9-Sv{ny]|vv|{6H--0r{qvs--<<-JJJJJJJJJJJ--<<-JJJ-\u7EAF\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6----qvssrP|y|;to-J-p|{n{P|y|H--0r{qvs--<<-JJJJJJJJJJJ--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-69-rp@5-=;=-6-6H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Iy|tqr}uoslsntzr{K--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I|tu{rzn}lsntzr{K0v{pyqr-Izrny{rzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--<<-nppzynv|{--0v{pyqr-Iyvtul}u\bvpnylsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--<<-z|qynv|{--0v{pyqr-In|zn}lsntzr{K--rp@-|t|v{tYvtu-J-rsyrprqYvtu;qvrpQvssr-8-rsyrprqYvtu;v{qvrpQvssr-8-rsyrprqYvtu;qvrp`}rpyn-8-rsyrprqYvtu;v{qvrp`}rpyn-8-|nyRzvvr_nqvn{prH--tylSntP|y|-J-rpA5-|t|v{tYvtu9-qvssrP|y|;n-6H--<<-JJJ-\u697C\u5C42\u663E\u793A-JJJ--sy|n-sy||\\}npv\b-J->;=H--vs-5u|{Sy||V{qr\x07-K-:=;=>-33-no5sy||V{qr\x07-:-u|{Sy||V{qr\x076-K-=;FF6-\n----sy||\\}npv\b-J-=;?-7-zv{55>;=-8-PnzrnQvrpv|{;\b69->;=6H--\f--tylSntP|y|;n-J-tylSntP|y|;n-7-sy||\\}npv\b-7-ovtu{rH--<<-JJJJJJJJJJJJJJ--ZNV[lZ\\QRYlP\\Y\\_--<<\u8272\u8C03\u6620\u5C04-\u8272\u5F69\u7A7A\u95F4\u8F6C\u6362--0v{pyqr-I|{rzn}}v{tlsntzr{K--0v{pyqr-Ir{p|qv{tlsntzr{K--<<-JJJ-\u989C\u8272\u589E\u76CA\u8C03\u6574-JJJ--rp@-toP|y|-J-tylSntP|y|;toH--rp@-uP|y|-J-to?u5toP|y|6H--uP|y|;\b-8J-p|y|`nnv|{H--uP|y|;	-8J-p|y|Ovtu{rH--tylSntP|y|;to-J-u?to5uP|y|6H--<<-JJJ-\u5168\u666F\u56FE-JJJ--rp@-}n{|=a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6H--}n{|=a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|=a|crr\x079-}n{|=l	||z6H--}n{|=a|crr\x07-J-}n{|=a|crr\x07-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-{|znyv	r5Sv{ny]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6H--}n{|>a|crr\x07-J-	||zcrp|5PnzrnQvrpv|{9-}n{|>a|crr\x079-}n{|>l	||z6H--}n{|>a|crr\x07-J-}n{|>a|crr\x07-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-]V-8->;=66H--0ryvs-qrsv{rq5b`Rl`]_RNQla_N[`VaV\\[6----rp?-prr{Pr{rP||q-J-r|yv|{-7-}v\x07ry_nv|-<-?;=H----sy|n-n{vv|{_nqv-J-qvn{pr5rp?5=;=9-=;=69-prr{Pr{rP||q6-7->;?H----sy|n-n{vv|{]|tr-J-qvn{pr5tylSntP||q;\x07\b9-prr{Pr{rP||q6-<-n{vv|{_nqvH----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-z||ur}5=;=9-=;?9-}|tr-:-n{vv|{]|tr66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H--<<-JJJJJJJJJJJJJJ--0v{pyqr-Is|tlsntzr{K--0v{pyqr-I}rzyv}yvrqlny}unlsntzr{K--0v{pyqr-Iqvurv{tlsntzr{K--0vs-qrsv{rq5b`RlRQY6----tylSntP|y|;n-J-Y|tQr}uH--0r{qvs--ZNV[lR[Q\f");var Qi$1={colorAlpha:new Uniform(0),modelAlpha:new Uniform(0),progress:new Uniform(0),pano0_map:new Uniform(null),pano0_luminanceMap:new Uniform(null),pano0_matrix:new Uniform(new Matrix4),pano0_zoom:new Uniform(1),pano1_map:new Uniform(null),pano1_luminanceMap:new Uniform(null),pano1_matrix:new Uniform(new Matrix4),pano1_zoom:new Uniform(1),gradientTexture:new Uniform(null),clippers:new Uniform([]),shownFloorIndex:new Uniform(-1),constantColor:new Uniform(new Vector3),geometricError:new Uniform(0),pixelRatio:new Uniform(1),resolution:new Uniform(new Vector2(512,512)),floorIndex:new Uniform(0),brightness:new Uniform(1),modelBoundingMin:new Uniform(new Vector3),modelBoundingMax:new Uniform(new Vector3),colorSaturation:new Uniform(0),colorBrightness:new Uniform(0),outlineGain:new Uniform(0),distanceGain:new Uniform(0)},hd={none:{vertexShader:ad,fragmentShader:od,uniforms:UniformsUtils.merge([Qi$1,{opacity:{value:1}},UniformsLib.fog]),lights:!1,clipping:!1},basic:{vertexShader:sd,fragmentShader:ud,uniforms:UniformsUtils.merge([Qi$1,ShaderLib.basic.uniforms]),lights:!1,clipping:!0},phong:{vertexShader:ld,fragmentShader:cd,uniforms:UniformsUtils.merge([Qi$1,ShaderLib.phong.uniforms]),lights:!0,clipping:!0},standard:{vertexShader:fd,fragmentShader:dd,uniforms:UniformsUtils.merge([Qi$1,ShaderLib.standard.uniforms]),lights:!0,clipping:!0}},Mr$1=function(cr){fe$6(vn,cr);function vn(yn,Rn){yn===void 0&&(yn="basic"),Rn===void 0&&(Rn={});var Bn=this,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy,oy,ay,uy,hy,my,ly,sy,cy,fy,vy,dy,Ay,gy=hd[yn];Bn=cr.call(this,{vertexShader:gy.vertexShader,fragmentShader:gy.fragmentShader,uniforms:UniformsUtils.clone(gy.uniforms),lights:gy.lights,clipping:gy.clipping,defines:{USE_COLOR_CONSTANT:!1,USE_COLOR_ALTITUDE:!1,USE_EDL:!1,USE_HQ_WEIGHT:!1,USE_HQ_DEPTH:!1,NUM_CLIPPING_BOX:!1,USE_CLIPFLOOR:!1,USE_VERTEX_MARK:!1,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_SPREAD_TRANSITION:!1,USE_POINT_NORMAL:!1,USE_POINT_CIRCLE:!1,USE_POINT_ADAPTIVE_SIZE:!1,USE_POINT_COLOR_ALTITUDE:!1}})||this,Bn.shaderType=yn,Bn.vertexTangents=!1,Bn.color=new Color(16777215),Bn.colorAlpha=1,Bn.map=null,Bn.lightMap=null,Bn.lightMapIntensity=1,Bn.aoMap=null,Bn.aoMapIntensity=1,Bn.specularMap=null,Bn.specular=new Color(1118481),Bn.roughnessMap=null,Bn.roughness=1,Bn.metalnessMap=null,Bn.metalness=0,Bn.alphaMap=null,Bn.alphaMode="OPAQUE",Bn.combine=null,Bn.envMap=null,Bn.envMapIntensity=1,Bn.reflectivity=.4,Bn.refractionRatio=.98,Bn.emissiveMap=null,Bn.emissive=new Color(0),Bn.emissiveIntensity=1,Bn.bumpMap=null,Bn.bumpScale=1,Bn.normalMap=null,Bn.normalMapType=TangentSpaceNormalMap,Bn.normalScale=new Vector2(1,1),Bn.displacementMap=null,Bn.displacementScale=1,Bn.displacementBias=0,Bn.shininess=30;var wy,Cy=null,My=null;return Bn.shaderType==="phong"&&(Bn.combine=MultiplyOperation),Object.defineProperties(Bn,{pano0:{get:function(){return Cy},set:function(Py){if(Cy!==Py){Cy=Py,Py===null?(this.uniforms.pano0_map.value=null,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity(),this.uniforms.pano0_zoom.value=1):(this.uniforms.pano0_map.value=Py.map instanceof Ge$3?Py.map.texture:Py.map,this.uniforms.pano0_luminanceMap.value=Py.luminanceMap instanceof Ge$3?Py.luminanceMap.texture:Py.luminanceMap,this.uniforms.pano0_matrix.value.copy(Py.matrix),this.uniforms.pano0_zoom.value=Py.zoom);var Dy=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null,qy=this.defines.USE_LUMINANCE;qy!==Dy&&(this.defines.USE_LUMINANCE=Dy,this.needsUpdate=!0)}}},pano1:{get:function(){return My},set:function(Py){if(My!==Py){My=Py,Py===null?(this.uniforms.pano1_map.value=null,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity(),this.uniforms.pano1_zoom.value=1):(this.uniforms.pano1_map.value=Py.map instanceof Ge$3?Py.map.texture:Py.map,this.uniforms.pano1_luminanceMap.value=Py.luminanceMap instanceof Ge$3?Py.luminanceMap.texture:Py.luminanceMap,this.uniforms.pano1_matrix.value.copy(Py.matrix),this.uniforms.pano1_zoom.value=Py.zoom);var Dy=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null,qy=this.defines.USE_LUMINANCE;qy!==Dy&&(this.defines.USE_LUMINANCE=Dy,this.needsUpdate=!0)}}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Py){this.uniforms.modelAlpha.value=Py}},progress:{get:function(){return this.uniforms.progress.value},set:function(Py){this.uniforms.progress.value=Py}},transition:{get:function(){return this.defines.USE_BLACK_TRANSITION?"BLACK":this.defines.USE_SPREAD_TRANSITION?"SPREAD":"FADE"},set:function(Py){var Dy=this.defines.USE_BLACK_TRANSITION,qy=this.defines.USE_SPREAD_TRANSITION;this.defines.USE_BLACK_TRANSITION=!1,this.defines.USE_SPREAD_TRANSITION=!1,this.defines["USE_".concat(Py,"_TRANSITION")]=!0;var Xy=!1;Dy!==this.defines.USE_BLACK_TRANSITION&&(Xy=!0),qy!==this.defines.USE_SPREAD_TRANSITION&&(Xy=!0),Xy&&(this.needsUpdate=!0)}},colorStyle:{get:function(){return this.defines.USE_COLOR_CONSTANT?"CONSTANT":this.defines.USE_COLOR_ALTITUDE?"ALTITUDE":"RGB"},set:function(Py){var Dy=Py==="CONSTANT",qy=Py==="ALTITUDE";this.defines.USE_COLOR_CONSTANT!==Dy&&(this.defines.USE_COLOR_CONSTANT=Dy,this.needsUpdate=!0),this.defines.USE_COLOR_ALTITUDE!==qy&&(this.defines.USE_COLOR_ALTITUDE=qy,this.needsUpdate=!0)}},constantColor:{get:function(){return this.uniforms.constantColor.value},set:function(Py){this.uniforms.constantColor.value=Py}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Py){this.uniforms.opacity.value=Py}},shownFloorIndex:{get:function(){return this.uniforms.shownFloorIndex.value},set:function(Py){this.uniforms.shownFloorIndex.value=Py}},gradientTexture:{get:function(){return this.uniforms.gradientTexture.value},set:function(Py){this.uniforms.gradientTexture.value=Py}},brightness:{get:function(){return this.uniforms.brightness.value},set:function(Py){this.uniforms.brightness.value=Py}},clippers:{get:function(){return wy},set:function(Py){wy!==Py&&(wy=Py,this.uniforms.clippers.value=(wy||[]).map(function(Dy){var qy=typeof Dy.floorIndex=="number"?Dy.floorIndex:-1,Xy=new Matrix4().getInverse(Dy.clippingBoxMatrix);return{matrixInverse:Xy,floorIndex:qy}}),this.needsUpdate=!0)}},useEDL:{get:function(){return this.defines.USE_EDL},set:function(Py){Py!==this.defines.USE_EDL&&(this.defines.USE_EDL=Py,this.needsUpdate=!0)}},useHQWeight:{get:function(){return this.defines.USE_HQ_WEIGHT},set:function(Py){Py!==this.defines.USE_HQ_WEIGHT&&(this.defines.USE_HQ_WEIGHT=Py,this.needsUpdate=!0)}},useHQDepth:{get:function(){return this.defines.USE_HQ_DEPTH},set:function(Py){Py!==this.defines.USE_HQ_DEPTH&&(this.defines.USE_HQ_DEPTH=Py,this.needsUpdate=!0)}},floorIndex:{get:function(){return this.uniforms.floorIndex.value},set:function(Py){this.uniforms.floorIndex.value=Py}},colorSaturation:{get:function(){return this.uniforms.colorSaturation.value},set:function(Py){this.uniforms.colorSaturation.value=Py}},colorBrightness:{get:function(){return this.uniforms.colorBrightness.value},set:function(Py){this.uniforms.colorBrightness.value=Py}},outlineGain:{get:function(){return this.uniforms.outlineGain.value},set:function(Py){this.uniforms.outlineGain.value=Py}},distanceGain:{get:function(){return this.uniforms.distanceGain.value},set:function(Py){this.uniforms.distanceGain.value=Py}}}),Bn.pano0=(Co=Rn.pano0)!==null&&Co!==void 0?Co:ye$3.pano0,Bn.pano1=(Po=Rn.pano1)!==null&&Po!==void 0?Po:ye$3.pano1,Bn.modelAlpha=(To=Rn.modelAlpha)!==null&&To!==void 0?To:ye$3.modelAlpha,Bn.progress=(Io=Rn.progress)!==null&&Io!==void 0?Io:ye$3.progress,Bn.transition=($l=Rn.transition)!==null&&$l!==void 0?$l:ye$3.transition,Bn.constantColor=(Wl=Rn.constantColor)!==null&&Wl!==void 0?Wl:ye$3.constantColor,Bn.opacity=(Xl=Rn.opacity)!==null&&Xl!==void 0?Xl:ye$3.opacity,Bn.floorStyle=(Yl=Rn.floorStyle)!==null&&Yl!==void 0?Yl:ye$3.floorStyle,Bn.shownFloorIndex=(Zl=Rn.shownFloorIndex)!==null&&Zl!==void 0?Zl:ye$3.shownFloorIndex,Bn.clippers=(ey=Rn.clippers)!==null&&ey!==void 0?ey:ye$3.clippers,Bn.useEDL=(Rm=Rn.useEDL)!==null&&Rm!==void 0?Rm:ye$3.useEDL,Bn.useHQWeight=(ry=Rn.useHQWeight)!==null&&ry!==void 0?ry:ye$3.useHQWeight,Bn.useHQDepth=(_g=Rn.useHQDepth)!==null&&_g!==void 0?_g:ye$3.useHQDepth,Bn.pointSize=(ty=Rn.pointSize)!==null&&ty!==void 0?ty:ye$3.pointSize,Bn.colorStyle=(ny=Rn.colorStyle)!==null&&ny!==void 0?ny:ye$3.colorStyle,Bn.pointShape=(iy=Rn.pointShape)!==null&&iy!==void 0?iy:ye$3.pointShape,Bn.pointScale=(oy=Rn.pointScale)!==null&&oy!==void 0?oy:ye$3.pointScale,Bn.pointBack=(ay=Rn.pointBack)!==null&&ay!==void 0?ay:ye$3.pointBack,Bn.pointMinPixel=(uy=Rn.pointMinPixel)!==null&&uy!==void 0?uy:ye$3.pointMinPixel,Bn.pointMaxPixel=(hy=Rn.pointMaxPixel)!==null&&hy!==void 0?hy:ye$3.pointMaxPixel,Bn.gradientTexture=(my=Rn.gradientTexture)!==null&&my!==void 0?my:ye$3.gradientTexture,Bn.brightness=(ly=Rn.brightness)!==null&&ly!==void 0?ly:ye$3.brightness,Bn.colorSaturation=(sy=Rn.colorSaturation)!==null&&sy!==void 0?sy:ye$3.colorSaturation,Bn.colorBrightness=(cy=Rn.colorBrightness)!==null&&cy!==void 0?cy:ye$3.colorBrightness,Bn.customShaders=(fy=Rn.customShaders)!==null&&fy!==void 0?fy:ye$3.customShaders,Bn.outlineGain=(vy=Rn.outlineGain)!==null&&vy!==void 0?vy:ye$3.outlineGain,Bn.distanceGain=(dy=Rn.distanceGain)!==null&&dy!==void 0?dy:ye$3.distanceGain,Bn.useAddBlend=(Ay=Rn.useAddBlend)!==null&&Ay!==void 0?Ay:ye$3.useAddBlend,Bn.customShaderHash="",Bn.customShaderUniforms={},Bn.customShaderDefines={},Bn.floorIndex=0,Bn.transparent=!1,Bn}return vn.prototype.onBeforeCompile=function(yn,Rn){var Bn=this,Co,Po,To=this.customShaders.filter(function(ry){return ry.type.includes(Bn.shaderType)}),Io=To.reduce(function(ry,_g){return ry+_g.vertex.mainBefore},""),$l=To.reduce(function(ry,_g){return ry+_g.vertex.mainStart},""),Wl=To.reduce(function(ry,_g){return ry+_g.vertex.mainEnd},""),Xl=To.reduce(function(ry,_g){return ry+_g.fragment.mainBefore},""),Yl=To.reduce(function(ry,_g){return ry+_g.fragment.mainStart},""),Zl=To.reduce(function(ry,_g){return ry+_g.fragment.mainModelColor},""),ey=To.reduce(function(ry,_g){return ry+_g.fragment.mainEnd},"");yn.vertexShader=yn.vertexShader.replace(/MAIN_BEFORE/g,Io),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_BEFORE/g,Xl),yn.vertexShader=yn.vertexShader.replace(/MAIN_START/g,$l),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_START/g,Yl),yn.vertexShader=yn.vertexShader.replace(/MAIN_END/g,Wl),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_END/g,ey),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_MODEL_COLOR/g,Zl);var Rm=String((Po=(Co=this.clippers)===null||Co===void 0?void 0:Co.length)!==null&&Po!==void 0?Po:0);yn.vertexShader=yn.vertexShader.replace(/NUM_CLIPPERS/g,Rm),yn.fragmentShader=yn.fragmentShader.replace(/NUM_CLIPPERS/g,Rm),To.forEach(function(ry){ry.onBeforeCompile(yn,Rn)})},vn.prototype.refreshUniforms=function(yn){var Rn,Bn,Co=this.uniforms;Co.diffuse&&Co.diffuse.value.copy(this.color),Co.opacity&&(Co.opacity.value=this.opacity),Co.color&&Co.diffuse.value.copy(this.color),Co.colorAlpha&&(Co.colorAlpha.value=this.colorAlpha),Co.emissive&&Co.emissive.value.copy(this.emissive).multiplyScalar(this.emissiveIntensity),Co.roughness&&(Co.roughness.value=this.roughness),Co.metalness&&(Co.metalness.value=this.metalness),Co.map&&(Co.map.value=this.map),Co.alphaMap&&(Co.alphaMap.value=this.alphaMap),Co.specularMap&&(Co.specularMap.value=this.specularMap),Co.roughnessMap&&(Co.roughnessMap.value=this.roughnessMap),Co.metalnessMap&&(Co.metalnessMap.value=this.metalnessMap),Co.envMap&&(Co.envMap.value=this.envMap,Co.flipEnvMap.value=!((Rn=this.envMap)===null||Rn===void 0)&&Rn.isCubeTexture?-1:1,Co.reflectivity.value=this.reflectivity,Co.refractionRatio.value=this.refractionRatio,Co.maxMipLevel.value=this.envMap&&(Bn=yn==null?void 0:yn.properties.get(this.envMap).__maxMipLevel)!==null&&Bn!==void 0?Bn:0,Co.envMapIntensity&&(Co.envMapIntensity.value=this.envMapIntensity)),Co.lightMap&&(Co.lightMap.value=this.lightMap,Co.lightMapIntensity.value=this.lightMapIntensity),Co.aoMap&&(Co.aoMap.value=this.aoMap,Co.aoMapIntensity.value=this.aoMapIntensity),Co.specular&&Co.specular.value.copy(this.specular),Co.shininess&&(Co.shininess.value=Math.max(this.shininess,1e-4)),Co.emissiveMap&&(Co.emissiveMap.value=this.emissiveMap),Co.bumpMap&&(Co.bumpMap.value=this.bumpMap,Co.bumpScale.value=this.bumpScale,this.side===BackSide&&(Co.bumpScale.value*=-1)),Co.normalMap&&(Co.normalMap.value=this.normalMap,Co.normalScale.value.copy(this.normalScale),this.side===BackSide&&Co.normalScale.value.negate()),Co.displacementMap&&(Co.displacementMap.value=this.displacementMap,Co.displacementScale.value=this.displacementScale,Co.displacementBias.value=this.displacementBias);var Po;this.map?Po=this.map:this.specularMap?Po=this.specularMap:this.displacementMap?Po=this.displacementMap:this.normalMap?Po=this.normalMap:this.bumpMap?Po=this.bumpMap:this.alphaMap?Po=this.alphaMap:this.emissiveMap&&(Po=this.emissiveMap),Po!==void 0&&(Po.matrixAutoUpdate===!0&&Po.updateMatrix(),Co.uvTransform.value.copy(Po.matrix));var To;this.aoMap?To=this.aoMap:this.lightMap&&(To=this.lightMap),To!==void 0&&(To.matrixAutoUpdate===!0&&To.updateMatrix(),Co.uv2Transform.value.copy(To.matrix))},vn.prototype.update=function(yn,Rn,Bn){var Co="".concat(Bn.id,":").concat(Bn.materialVersion);Co!==this.syncModelVersion&&(Object.assign(this,Bn.getMaterial()),this.syncModelVersion=Co);var Po=this.customShaders.map(function(_g){return _g.getHash()}).join("");this.customShaderHash!==Po&&(this.customShaderHash=Po,this.needsUpdate=!0);for(var To=this.customShaders.reduce(function(_g,ty){return Object.assign(_g,ty.defines)},{}),Io=Object.keys(this.customShaderDefines),$l=0,Wl=Io;$l<Wl.length;$l++){var Xl=Wl[$l];delete this.defines[Xl]}this.customShaderDefines=To,Object.assign(this.defines,this.customShaderDefines);for(var Yl=this.customShaders.reduce(function(_g,ty){return Object.assign(_g,ty.uniforms)},{}),Zl=Object.keys(this.customShaderUniforms),ey=0,Rm=Zl;ey<Rm.length;ey++){var ry=Rm[ey];delete this.uniforms[ry]}this.customShaderUniforms=Yl,Object.assign(this.uniforms,this.customShaderUniforms),this.visible=!0,this.envMap||(this.envMap=Rn.environment),this.refreshUniforms(yn),this.useAddBlend?(this.depthWrite=!1,this.depthTest=!1,this.blending=AdditiveBlending):(this.depthWrite=!0,this.depthTest=!0,this.blending=NormalBlending),this.shaderType==="none"?(this.depthWrite=!1,this.transparent=!0):(this.transparent=this.alphaMode==="BLEND",this.depthWrite=!0,this.shownFloorIndex>-1&&this.shownFloorIndex!==this.floorIndex&&(this.transparent=!0),this.opacity*this.colorAlpha<1&&(this.transparent=!0),this.alphaMap&&(this.transparent=!0),this.brightness<1&&(this.transparent=!0),this.transparent&&(this.depthWrite=!1),this.floorStyle==="VISIBILITY"&&this.shownFloorIndex!==-1&&this.floorIndex!==this.shownFloorIndex&&(this.visible=!1)),this.uniforms.pixelRatio.value=Rn.pixelRatio,this.uniforms.resolution.value.copy(Rn.resolution),this.uniforms.modelBoundingMax.value.copy(Bn.bounding.max),this.uniforms.modelBoundingMin.value.copy(Bn.bounding.min)},vn.prototype.copy=function(yn){return cr.prototype.copy.call(this,yn),this.color.copy(yn.color),this.colorAlpha=yn.colorAlpha,this.map=yn.map,this.lightMap=yn.lightMap,this.lightMapIntensity=yn.lightMapIntensity,this.aoMap=yn.aoMap,this.aoMapIntensity=yn.aoMapIntensity,this.specularMap=yn.specularMap,this.specular.copy(yn.specular),this.alphaMap=yn.alphaMap,this.envMap=yn.envMap,this.reflectivity=yn.reflectivity,this.refractionRatio=yn.refractionRatio,this.emissiveMap=yn.emissiveMap,this.emissive.copy(yn.emissive),this.emissiveIntensity=yn.emissiveIntensity,this.bumpMap=yn.bumpMap,this.bumpScale=yn.bumpScale,this.normalMap=yn.normalMap,this.normalMapType=yn.normalMapType,this.normalScale.copy(yn.normalScale),this.displacementMap=yn.displacementMap,this.displacementScale=yn.displacementScale,this.displacementBias=yn.displacementBias,this.shininess=yn.shininess,this.customShaders=yn.customShaders,this.pano0=yn.pano0,this.pano1=yn.pano1,this.modelAlpha=yn.modelAlpha,this.progress=yn.progress,this.transition=yn.transition,this.opacity=yn.opacity,this.floorStyle=yn.floorStyle,this.colorStyle=yn.colorStyle,this.constantColor=yn.constantColor,this.shownFloorIndex=yn.shownFloorIndex,this.brightness=yn.brightness,this.clippers=yn.clippers,this.useEDL=yn.useEDL,this.useHQWeight=yn.useHQWeight,this.useHQDepth=yn.useHQDepth,this.pointSize=yn.pointSize,this.pointShape=yn.pointShape,this.pointScale=yn.pointScale,this.pointBack=yn.pointBack,this.pointMinPixel=yn.pointMinPixel,this.pointMaxPixel=yn.pointMaxPixel,this.gradientTexture=yn.gradientTexture,this.floorIndex=yn.floorIndex,this.colorSaturation=yn.colorSaturation,this.colorBrightness=yn.colorBrightness,this.outlineGain=yn.outlineGain,this.distanceGain=yn.distanceGain,this.useAddBlend=yn.useAddBlend,this.refreshUniforms(),this},vn.prototype.clone=function(){return new this.constructor(this.shaderType).copy(this)},vn}(ShaderMaterial);const pd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("{vs|z-sy|n-sy||V{qr\x07H0vs-qrsv{rq5b`Rl]\\V[al[\\_ZNY6--n\bv{t-rp@-[|znyH0r{qvs0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvsp-Pyv}}r-\n--znA-znv\x07V{rrH--sy|n-sy||V{qr\x07H\fH0vs-[bZlPYV]]R_`-K-=--{vs|z-Pyv}}r-pyv}}rh[bZlPYV]]R_`jH0r{qvsn\bv{t-rpA-d|yq]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-P|y|Hn\bv{t-sy|n-]|v{`v	rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-u|{Sy||V{qr\x07H<<u\u8C03\u6574{vs|z-sy|n-p|y|`nnv|{H{vs|z-sy|n-p|y|Ovtu{rH{vs|z-rp@-z|qryO|{qv{tZn\x07H{vs|z-rp@-z|qryO|{qv{tZv{H<<-\u8FB9\u7F18\u589E\u76CA{vs|z-sy|n-|yv{rTnv{H{vs|z-sy|n-qvn{prTnv{H0v{pyqr-Ip|zz|{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-Iy|tqr}uosl}nlsntzr{K0v{pyqr-Ipyv}}v{tl}yn{rl}nlsntzr{Krp@-nqwP|y|arz}rnr5rp@-p|y|9-sy|n-rz}rnr6\n----<<-\u5C06\u8272\u6E29\u8303\u56F4\u4ECE-:>;=-\u5230->;=-\u6620\u5C04\u5230\u5B9E\u9645\u7684\u8272\u6E29\u8303\u56F4----sy|n-rz}-J-5rz}rnr-8->;=6-7-B===;=H-<<-\u8303\u56F4\u4ECE-=-\u5230->====----<<-\u8BA1\u7B97\u8272\u6E29\u7CFB\u6570----sy|n-lsnp|9-tlsnp|9-olsnp|H----vs-5rz}-IJ-CC==;=6-\n--------lsnp|-J->;=H--------tlsnp|-J-=;@F==E>BDEDCF=>FC=DEA-7-y|t5rz}-<->==;=6-:-=;C@>EA>AA@DEEC?DAB=FEH--------olsnp|-J-rz}-IJ->F==;=-L-=;=-G-=;BA@?=CDEF>>=>FC=DEA@-7-y|t5rz}-<->==;=-:->=;=6-:->;>FC?BA=EF>AH----\f-ryr-\n--------lsnp|-J->;?F?F@C>EC=C?DAB=FE=A-7-}|5rz}-<->==;=-:-C=;=9-:=;>@@?=ADBF?6H--------tlsnp|-J->;>?FEF=EC=EFB?FA>>DCB-7-}|5rz}-<->==;=-:-C=;=9-:=;=DBB>AEAF?6H--------olsnp|-J->;=H----\f----<<-\u8C03\u6574\u989C\u8272----rp@-nqwrqP|y|H----nqwrqP|y|;-J-pynz}5p|y|;-7-lsnp|9-=;=9->;=6H----nqwrqP|y|;t-J-pynz}5p|y|;t-7-tlsnp|9-=;=9->;=6H----nqwrqP|y|;o-J-pynz}5p|y|;o-7-olsnp|9-=;=9->;=6H----r{-nqwrqP|y|H\frp@-to?u5rp@-p6-\n----rpA-X-J-rpA5=;=9-:>;=-<-@;=9-?;=-<-@;=9-:>;=6H----rpA-}-J-zv\x075rpA5p;ot9-X;	69-rpA5p;to9-X;\x07\b69-r}5p;o9-p;t66H----rpA-\0-J-zv\x075rpA5};\x07\b9-p;69-rpA5p;9-};\b	\x0769-r}5};\x079-p;66H----sy|n-q-J-\0;\x07-:-zv{5\0;9-\0;\b6H----sy|n-r-J->;=r:>=H----r{-rp@5no5\0;	-8-5\0;-:-\0;\b6-<-5C;=-7-q-8-r669-q-<-5\0;\x07-8-r69-\0;\x076H\frp@-u?to5rp@-p6-\n----rpA-X-J-rpA5>;=9-?;=-<-@;=9->;=-<-@;=9-@;=6H----rp@-}-J-no5snp5p;\x07\x07\x07-8-X;\x07\b	6-7-C;=-:-X;6H----r{-p;	-7-zv\x075X;\x07\x07\x079-pynz}5}-:-X;\x07\x07\x079-=;=9->;=69-p;\b6H\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--<<-JJJ-\u70B9\u5927\u5C0F\u5254\u9664-JJJ--vs-5]|v{`v	r-I-=;==>6-\n----qvpnqH--\f--<<-JJJ-\u524D\u7F6E\u88C1\u5207\u8BA1\u7B97-JJJ--0vs-[bZlPYV]]R_`-K-=----o||y-pyv}}rqH----rpA-pyv}}r]|vv|{H----0}ntzn-{|yyly||}ln----s|-5-v{-v-J-=H-v-I-[bZlPYV]]R_`H-v-88-6-\n------pyv}}r]|vv|{-J-pyv}}rh-v-j;znv\x07V{rr-7-d|yq]|vv|{H------pyv}}rq-J-5pyv}}rh-v-j;sy||V{qr\x07-I-=;=-\v\v-no5sy||V{qr\x07-:-pyv}}rh-v-j;sy||V{qr\x076-I->;=6H------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\x07-K-:=;B-33-pyv}}r]|vv|{;\x07-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;\b-K-:=;B-33-pyv}}r]|vv|{;\b-I-=;BH------pyv}}rq-J-pyv}}rq-33-pyv}}r]|vv|{;	-K-:=;B-33-pyv}}r]|vv|{;	-I-=;BH------vs-5pyv}}rq6-\n--------qvpnqH------\f----\f----0}ntzn-{|yyly||}lr{q--0r{qvs--<<-JJJJJJJJJJJJJJJJ--sy|n-}-J-?;=-7-tyl]|v{P||q;\x07-:->;=H--sy|n-}-J-?;=-7-tyl]|v{P||q;\b-:->;=H--sy|n-}-J-}-7-}-8-}-7-}H--<<-JJJ-\u5F62\u72B6\u88C1\u5207-JJJ--0vs-qrsv{rq5b`Rl]\\V[al`UN]RlPV_PYR6----vs-5]|v{`v	r-K-@;=-33-}-K->;=6-\n------qvpnqH----\f--0r{qvs--<<-JJJJJJJJJJJJJ--0v{pyqr-Ipyv}}v{tl}yn{rlsntzr{K--0v{pyqr-Iy|tqr}uoslsntzr{K--<<-JJJ-\u989C\u8272-JJJ--rpA-sv{nyP|y|-J-_TOa|Yv{rn5rpA5P|y|9-|}npv\b66H--0vs-qrsv{rq5b`Rl]\\V[al[\\_ZNY6----0vs-qrsv{rq5b`Rl]\\V[alONPXlUVQQR[6------rp@-pnzrnQvrpv|{-J-{|znyv	r5pnzrn]|vv|{-:-d|yq]|vv|{;\x07\b	6H------vs-5q|5pnzrnQvrpv|{9-[|zny6-I-=;=6-\n--------qvpnqH------\f----0ryvs-qrsv{rq5b`Rl]\\V[alONPXlQN_X6------rp@-pnzrnQvrpv|{-J-{|znyv	r5pnzrn]|vv|{-:-d|yq]|vv|{;\x07\b	6H------vs-5q|5pnzrnQvrpv|{9-[|zny6-I-=;=6-\n--------sv{nyP|y|;\x07\b	-J-sv{nyP|y|;\x07\b	-7-=;EH------\f----0r{qvs--0r{qvs--tylSntP|y|-J-sv{nyP|y|H--<<-JJJJJJJJJJJ--<<-JJJ-\u697C\u5C42\u663E\u793A-JJJ--sy|n-sy||\\}npv\b-J->;=H--vs-5u|{Sy||V{qr\x07-K-:=;=>-33-no5sy||V{qr\x07-:-u|{Sy||V{qr\x076-K-=;FF6-\n----sy||\\}npv\b-J-=;>-7-zv{55>;=-8-PnzrnQvrpv|{;\b69->;=6H--\f--tylSntP|y|;n-J-tylSntP|y|;n-7-sy||\\}npv\bH--<<-JJJJJJJJJJJJJJ--tylSntP|y|;n-J-tylSntP|y|;n-7-z|qryNy}unH--ZNV[lZ\\QRYlP\\Y\\_--0v{pyqr-I|{rzn}}v{tlsntzr{K--0v{pyqr-Ir{p|qv{tlsntzr{K--<<-JJJ-\u989C\u8272\u589E\u76CA\u8C03\u6574-JJJ--rp@-toP|y|-J-tylSntP|y|;toH--rp@-uP|y|-J-to?u5toP|y|6H--uP|y|;\b-8J-p|y|`nnv|{H--uP|y|;	-8J-p|y|Ovtu{rH--tylSntP|y|;to-J-u?to5uP|y|6H--0v{pyqr-Is|tlsntzr{K--0v{pyqr-I}rzyv}yvrqlny}unlsntzr{K--<<-\u8FB9\u7F18\u589E\u5F3A--0vs-qrsv{rq5b`Rl]\\V[al[\\_ZNY6----rp@-toP|y|?-J-tylSntP|y|;toH----rp@-uP|y|?-J-to?u5toP|y|?6H----rp@-vrQv-J-{|znyv	r5v\\u|tn}uvp-L-PnzrnQvrpv|{-G-d|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{6H----<<-\u8BA1\u7B97\u8FB9\u7F18\u589E\u76CA----sy|n-p|aurn-J-q|5{|znyv	r5[|zny69-vrQv6H----sy|n-n{tyr-J-np|5p|aurn6H----sy|n-|yv{rSnp|-J-}|5>;=-:-no5n{tyr-:-]VlUNYS6-<-]VlUNYS9-B;=6H----uP|y|?;	-8J-|yv{rTnv{-7-|yv{rSnp|H-<<-\u589E\u52A0\u4EAE\u5EA6----uP|y|?;	-J-pynz}5uP|y|?;	9-=;=9->;=6H------<<-\u8DDD\u79BB\u589E\u76CA----rp@-o|{qv{tPr{r-J-5z|qryO|{qv{tZn\x07-8-z|qryO|{qv{tZv{6-<-?;=H----sy|n-o|{qv{tYr{tu-J-yr{tu5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6-7->;BH----sy|n-nrntrQvn{pr-J-B;=H-<<-\u8BBE\u5B9A\u4E00\u4E2A\u5E73\u5747\u8DDD\u79BB----rp@-pnzrna|]|v{-J-d|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----sy|n-pnzrnO|{qv{tQvn{pr-J-zn\x075=;=9-yr{tu5pnzrn]|vv|{-:-o|{qv{tPr{r6-:-o|{qv{tYr{tu-<-?;=6H----sy|n-pnzrnQvn{pr-J-yr{tu5v\\u|tn}uvp-L-vrQv-7-q|5vrQv9-pnzrna|]|v{6-G-pnzrna|]|v{6-:-pnzrnO|{qv{tQvn{prH----sy|n-qvn{prSnp|-J-pynz}5zn\x075pnzrnQvn{pr-:-nrntrQvn{pr9-=;=6-<-o|{qv{tYr{tu9-=;=9->;=6H----qvn{prSnp|-J-5=;A-:-pynz}5>;=-:-}|5>;=-:-qvn{prSnp|9-?;=69-=;=9->;=66-7->=;=H----tylSntP|y|;n-8J-zv\x075tylSntP|y|;n-7-qvn{prTnv{-7-qvn{prSnp|9-=;=9-|yv{rSnp|6H-<<-\u589E\u52A0\u900F\u660E\u5EA6----tylSntP|y|;n-J-pynz}5tylSntP|y|;n9-=;=9->;=6H----tylSntP|y|;to-J-u?to5uP|y|?6H--0r{qvs--0vs-qrsv{rq5b`RlRQY6----tylSntP|y|;n-J-Y|tQr}uH--0r{qvs--0vs-qrsv{rq5b`RlU^ldRVTUa6----sy|n-qvn{pr-J-?;=-7-yr{tu5tyl]|v{P||q;\x07\b-:-=;B6H----sy|n-rvtu-J-zn\x075=;=9->;=-:-qvn{pr6H----rvtu-J-}|5rvtu9->;B6H----tylSntP|y|;n-J-rvtuH----tylSntP|y|;\x07\b	-J-tylSntP|y|;\x07\b	-7-rvtuH--0r{qvs--ZNV[lR[Q\f"),vd=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}("nvor-rp@-p|y|H0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6--{vs|z-rp@-p|{n{P|y|H0r{qvs0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6--{vs|z-nz}yr?Q-tnqvr{ar\x07rH0r{qvs0vs-qrsv{rq5b`RlRQY6--n\bv{t-sy|n-Y|tQr}uH0r{qvs{vs|z-rp?-r|yv|{H{vs|z-sy|n-}v\x07ry_nv|H{vs|z-sy|n-}|v{`pnyrH{vs|z-sy|n-}|v{Zv{]v\x07ryH{vs|z-sy|n-}|v{Zn\x07]v\x07ryH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-tr|zrvpR|H{vs|z-rp@-z|qryO|{qv{tZn\x07H{vs|z-rp@-z|qryO|{qv{tZv{Hn\bv{t-rpA-d|yq]|vv|{Hn\bv{t-rp@-PnzrnQvrpv|{Hn\bv{t-rp@-P|y|Hn\bv{t-sy|n-]|v{`v	rH0vs-qrsv{rq5b`Rl]\\V[al[\\_ZNY6--n\bv{t-rp@-[|znyH0r{qvs0v{pyqr-Ip|zz|{K0v{pyqr-Is|tl}nlrr\x07K0v{pyqr-Iz|}untrl}nlrr\x07K0v{pyqr-Iy|tqr}uosl}nlrr\x07K0v{pyqr-Ipyv}}v{tl}yn{rl}nlrr\x07Krp@-trP|y|O\bUrvtu5nz}yr?Q-tnqvr{ar\x07r9-rpA-d|yq]|vv|{6-\n--sy|n--J-5d|yq]|vv|{;\b-:-z|qryO|{qv{tZv{;\b6-<-5z|qryO|{qv{tZn\x07;\b-:-z|qryO|{qv{tZv{;\b6H--r{-r\x07r?Q5tnqvr{ar\x07r9-rp?59-=;B66;toH\fZNV[lORS\\_R|vq-znv{56-\n--ZNV[l`aN_a--0v{pyqr-Iortv{lrr\x07K--d|yq]|vv|{-J-rpA5n{s|zrq9->;=6H--0vsqrs-b`RlV[`aN[PV[T----d|yq]|vv|{-J-v{n{prZnv\x07-7-d|yq]|vv|{H--0r{qvs--d|yq]|vv|{-J-z|qryZnv\x07-7-d|yq]|vv|{H--rpA-z]|vv|{-J-vrZnv\x07-7-d|yq]|vv|{H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z]|vv|{H--0v{pyqr-Iy|tqr}uoslrr\x07K--0v{pyqr-Ipyv}}v{tl}yn{rlrr\x07K--zn@-pnzrn_|nv|{Znv\x07-J-zn@5vrZnv\x07h=jh=j9-vrZnv\x07h>jh=j9-vrZnv\x07h?jh=j9-vrZnv\x07h=jh>j9-vrZnv\x07h>jh>j9-vrZnv\x07h?jh>j9-vrZnv\x07h=jh?j9-vrZnv\x07h>jh?j9-vrZnv\x07h?jh?j6H--PnzrnQvrpv|{-J-{|znyv	r5pnzrn_|nv|{Znv\x07-7-rp@5=;=9-=;=9-:>;=66H--<<\u4F20\u9012nvor\u7684p|y|\u5230s\u91CC\u4F7F\u7528--<<\u52A8\u6001\u8C03\u6574}|v{`v	r--sy|n-rny]|v{`v	r-J-}|v{`pnyr-7-}v\x07ry_nv|H--0vs-qrsv{rq5b`Rl]\\V[al`VgRlTR\\ZRa_VP6----rny]|v{`v	r-7J-tr|zrvpR|H----sy|n-urvtu-J->;=-<-}|wrpv|{Znv\x07h>jh>j-7-zv\x075>;=9-:z]|vv|{;	9-:}|wrpv|{Znv\x07h?jh@j6-7-?;=H----rny]|v{`v	r-J-r|yv|{;\b-7-rny]|v{`v	r-<-urvtuH--0ryvs-qrsv{rq5b`Rl]\\V[al`VgRlNaaR[bNaV\\[6----sy|n-urvtu-J->;=-<-}|wrpv|{Znv\x07h>jh>j-7-zv\x075>;=9-:z]|vv|{;	9-:}|wrpv|{Znv\x07h?jh@j6-7-?;=H----rny]|v{`v	r-J-r|yv|{;\b-7-rny]|v{`v	r-<-urvtuH--0r{qvs--tyl]|v{`v	r-J-pynz}5rny]|v{`v	r9-}|v{Zv{]v\x07ry-7-}v\x07ry_nv|9-}|v{Zn\x07]v\x07ry-7-}v\x07ry_nv|6H--]|v{`v	r-J-tyl]|v{`v	rH--P|y|-J-p|y|H--<<-JJJ-\u9AD8\u5EA6\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lNYaVabQR6----P|y|-J-trP|y|O\bUrvtu5tnqvr{ar\x07r9-d|yq]|vv|{6H--0r{qvs--<<-JJJJJJJJJJJ--<<-JJJ-\u7EAF\u8272-JJJ--0vs-qrsv{rq5b`RlP\\Y\\_lP\\[`aN[a6----P|y|-J-p|{n{P|y|H--0r{qvs--<<-JJJJJJJJJJJ--0vs-qrsv{rq5b`Rl]\\V[al[\\_ZNY6----[|zny-J-{|znyv	r5zn@5z|qryZnv\x076-7-{|zny6H--0r{qvs--0vs-qrsv{rq5b`RlRQY6----Y|tQr}u-J-y|t?5:z]|vv|{;	6H--0r{qvs--0vs-qrsv{rq5b`RlU^lQR]aU6----<<-sy|n-}|wSnp|-J-:=;B-7-r|yv|{;\b-<-5n{5s|-<-?;=6-7-z]|vv|{;	6H----<<-sy|n-_nqv-J-rny]|v{`v	r-<-}|wSnp|H----sy|n-|vtv{nyQr}u-J-tyl]|vv|{;H----sy|n-nqwrqQr}u-J-|vtv{nyQr}u-8-=;>H----sy|n-nqw-J-nqwrqQr}u-<-|vtv{nyQr}uH----z]|vv|{;\x07\b	-J-z]|vv|{;\x07\b	-7-nqwH----tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z]|vv|{H--0r{qvs--0v{pyqr-I|yq}|lrr\x07K--0v{pyqr-Is|tlrr\x07K--ZNV[lR[Q\f");var md=Object.assign({pointScale:new Uniform(1),pointMinPixel:new Uniform(1),pointMaxPixel:new Uniform(1),opacity:new Uniform(1),gradientTexture:new Uniform(null),modelAlpha:new Uniform(0),clippers:new Uniform([]),shownFloorIndex:new Uniform(-1),constantColor:new Uniform(new Vector3),geometricError:new Uniform(0),pixelRatio:new Uniform(1),resolution:new Uniform(new Vector2(512,512)),floorIndex:new Uniform(0),brightness:new Uniform(1),modelBoundingMin:new Uniform(new Vector3),modelBoundingMax:new Uniform(new Vector3),colorSaturation:new Uniform(0),colorBrightness:new Uniform(0),outlineGain:new Uniform(0),distanceGain:new Uniform(0)},UniformsUtils.clone(UniformsLib.fog)),wa=function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy,oy,ay,uy,hy,my,ly,sy,cy,fy,vy,dy=cr.call(this,{vertexShader:vd,fragmentShader:pd,uniforms:UniformsUtils.clone(md),lights:!1,clipping:!0,defines:{USE_COLOR_CONSTANT:!1,USE_COLOR_ALTITUDE:!1,USE_EDL:!1,USE_HQ_WEIGHT:!1,USE_HQ_DEPTH:!1,NUM_CLIPPING_BOX:!1,USE_CLIPFLOOR:!1,USE_VERTEX_MARK:!1,USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_POINT_NORMAL:!1,USE_POINT_SHAPE_CIRCLE:!1,USE_POINT_SIZE_ATTENUATION:!1,USE_POINT_SIZE_GEOMETRIC:!1,USE_POINT_BACK_HIDDEN:!1,USE_POINT_BACK_DARK:!1}})||this,Ay;return dy.customShaderHash="",dy.customShaderUniforms={},dy.customShaderDefines={},Object.defineProperties(dy,{constantColor:{get:function(){return this.uniforms.constantColor.value},set:function(gy){this.uniforms.constantColor.value=gy}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(gy){this.uniforms.opacity.value=gy}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(gy){this.uniforms.modelAlpha.value=gy}},shownFloorIndex:{get:function(){return this.uniforms.shownFloorIndex.value},set:function(gy){this.uniforms.shownFloorIndex.value=gy}},clippers:{get:function(){return Ay},set:function(gy){Ay!==gy&&(Ay=gy,this.uniforms.clippers.value=(Ay||[]).map(function(wy){var Cy=typeof wy.floorIndex=="number"?wy.floorIndex:-1,My=new Matrix4().getInverse(wy.clippingBoxMatrix);return{matrixInverse:My,floorIndex:Cy}}),this.needsUpdate=!0)}},colorStyle:{get:function(){return this.defines.USE_COLOR_CONSTANT?"CONSTANT":this.defines.USE_COLOR_ALTITUDE?"ALTITUDE":"RGB"},set:function(gy){var wy=gy==="CONSTANT",Cy=gy==="ALTITUDE";this.defines.USE_COLOR_CONSTANT!==wy&&(this.defines.USE_COLOR_CONSTANT=wy,this.needsUpdate=!0),this.defines.USE_COLOR_ALTITUDE!==Cy&&(this.defines.USE_COLOR_ALTITUDE=Cy,this.needsUpdate=!0)}},pointSize:{get:function(){return this.defines.USE_POINT_SIZE_GEOMETRIC===!0?"GEOMETRIC":this.defines.USE_POINT_SIZE_ATTENUATION===!0?"ATTENUATION":"FIXED"},set:function(gy){var wy=gy==="ATTENUATION",Cy=gy==="GEOMETRIC";this.defines.USE_POINT_SIZE_GEOMETRIC!==Cy&&(this.defines.USE_POINT_SIZE_GEOMETRIC=Cy,this.needsUpdate=!0),this.defines.USE_POINT_SIZE_ATTENUATION!==wy&&(this.defines.USE_POINT_SIZE_ATTENUATION=wy,this.needsUpdate=!0)}},pointShape:{get:function(){return this.defines.USE_POINT_SHAPE_CIRCLE===!0?"CIRCLE":"SQUARE"},set:function(gy){var wy=gy==="CIRCLE";this.defines.USE_POINT_SHAPE_CIRCLE!==wy&&(this.defines.USE_POINT_SHAPE_CIRCLE=wy,this.needsUpdate=!0)}},pointScale:{get:function(){return this.uniforms.pointScale.value},set:function(gy){this.uniforms.pointScale.value=gy}},pointBack:{get:function(){return this.defines.USE_POINT_BACK_HIDDEN===!0?"HIDDEN":this.defines.USE_POINT_BACK_DARK===!0?"DARK":"VISIBLE"},set:function(gy){var wy=gy==="HIDDEN",Cy=gy==="DARK";this.defines.USE_POINT_BACK_HIDDEN!==wy&&(this.defines.USE_POINT_BACK_HIDDEN=wy,this.needsUpdate=!0),this.defines.USE_POINT_BACK_DARK!==Cy&&(this.defines.USE_POINT_BACK_DARK=Cy,this.needsUpdate=!0)}},pointMinPixel:{get:function(){return this.uniforms.pointMinPixel.value},set:function(gy){this.uniforms.pointMinPixel.value=gy}},pointMaxPixel:{get:function(){return this.uniforms.pointMaxPixel.value},set:function(gy){this.uniforms.pointMaxPixel.value=gy}},useEDL:{get:function(){return this.defines.USE_EDL},set:function(gy){gy!==this.defines.USE_EDL&&(this.defines.USE_EDL=gy,this.needsUpdate=!0)}},useHQWeight:{get:function(){return this.defines.USE_HQ_WEIGHT},set:function(gy){gy!==this.defines.USE_HQ_WEIGHT&&(this.defines.USE_HQ_WEIGHT=gy,this.needsUpdate=!0)}},useHQDepth:{get:function(){return this.defines.USE_HQ_DEPTH},set:function(gy){gy!==this.defines.USE_HQ_DEPTH&&(this.defines.USE_HQ_DEPTH=gy,this.needsUpdate=!0)}},gradientTexture:{get:function(){return this.uniforms.gradientTexture.value},set:function(gy){this.uniforms.gradientTexture.value=gy}},floorIndex:{get:function(){return this.uniforms.floorIndex.value},set:function(gy){this.uniforms.floorIndex.value=gy}},brightness:{get:function(){return this.uniforms.brightness.value},set:function(gy){this.uniforms.brightness.value=gy}},colorSaturation:{get:function(){return this.uniforms.colorSaturation.value},set:function(gy){this.uniforms.colorSaturation.value=gy}},colorBrightness:{get:function(){return this.uniforms.colorBrightness.value},set:function(gy){this.uniforms.colorBrightness.value=gy}},outlineGain:{get:function(){return this.uniforms.outlineGain.value},set:function(gy){this.uniforms.outlineGain.value=gy}},distanceGain:{get:function(){return this.uniforms.distanceGain.value},set:function(gy){this.uniforms.distanceGain.value=gy}}}),dy.pano0=(Rn=yn.pano0)!==null&&Rn!==void 0?Rn:ye$3.pano0,dy.pano1=(Bn=yn.pano1)!==null&&Bn!==void 0?Bn:ye$3.pano1,dy.modelAlpha=(Co=yn.modelAlpha)!==null&&Co!==void 0?Co:ye$3.modelAlpha,dy.progress=(Po=yn.progress)!==null&&Po!==void 0?Po:ye$3.progress,dy.transition=(To=yn.transition)!==null&&To!==void 0?To:ye$3.transition,dy.colorStyle=(Io=yn.colorStyle)!==null&&Io!==void 0?Io:ye$3.colorStyle,dy.constantColor=($l=yn.constantColor)!==null&&$l!==void 0?$l:ye$3.constantColor,dy.opacity=(Wl=yn.opacity)!==null&&Wl!==void 0?Wl:ye$3.opacity,dy.floorStyle=(Xl=yn.floorStyle)!==null&&Xl!==void 0?Xl:ye$3.floorStyle,dy.shownFloorIndex=(Yl=yn.shownFloorIndex)!==null&&Yl!==void 0?Yl:ye$3.shownFloorIndex,dy.clippers=(Zl=yn.clippers)!==null&&Zl!==void 0?Zl:ye$3.clippers,dy.useEDL=(ey=yn.useEDL)!==null&&ey!==void 0?ey:ye$3.useEDL,dy.useHQWeight=(Rm=yn.useHQWeight)!==null&&Rm!==void 0?Rm:ye$3.useHQWeight,dy.useHQDepth=(ry=yn.useHQDepth)!==null&&ry!==void 0?ry:ye$3.useHQDepth,dy.pointShape=(_g=yn.pointShape)!==null&&_g!==void 0?_g:ye$3.pointShape,dy.pointSize=(ty=yn.pointSize)!==null&&ty!==void 0?ty:ye$3.pointSize,dy.pointScale=(ny=yn.pointScale)!==null&&ny!==void 0?ny:ye$3.pointScale,dy.pointBack=(iy=yn.pointBack)!==null&&iy!==void 0?iy:ye$3.pointBack,dy.pointMinPixel=(oy=yn.pointMinPixel)!==null&&oy!==void 0?oy:ye$3.pointMinPixel,dy.pointMaxPixel=(ay=yn.pointMaxPixel)!==null&&ay!==void 0?ay:ye$3.pointMaxPixel,dy.gradientTexture=(uy=yn.gradientTexture)!==null&&uy!==void 0?uy:ye$3.gradientTexture,dy.brightness=(hy=yn.brightness)!==null&&hy!==void 0?hy:ye$3.brightness,dy.colorSaturation=(my=yn.colorSaturation)!==null&&my!==void 0?my:ye$3.colorSaturation,dy.colorBrightness=(ly=yn.colorBrightness)!==null&&ly!==void 0?ly:ye$3.colorBrightness,dy.outlineGain=(sy=yn.outlineGain)!==null&&sy!==void 0?sy:ye$3.outlineGain,dy.distanceGain=(cy=yn.distanceGain)!==null&&cy!==void 0?cy:ye$3.distanceGain,dy.customShaders=(fy=yn.customShaders)!==null&&fy!==void 0?fy:ye$3.customShaders,dy.useAddBlend=(vy=yn.useAddBlend)!==null&&vy!==void 0?vy:ye$3.useAddBlend,dy.customShaderHash="",dy.floorIndex=0,dy.transparent=!0,dy}return vn.prototype.onBeforeCompile=function(yn,Rn){var Bn,Co,Po=this.customShaders.filter(function(Rm){return Rm.type.includes("pointcloud")}),To=Po.reduce(function(Rm,ry){return Rm+ry.vertex.mainBefore},""),Io=Po.reduce(function(Rm,ry){return Rm+ry.vertex.mainStart},""),$l=Po.reduce(function(Rm,ry){return Rm+ry.vertex.mainEnd},""),Wl=Po.reduce(function(Rm,ry){return Rm+ry.fragment.mainBefore},""),Xl=Po.reduce(function(Rm,ry){return Rm+ry.fragment.mainStart},""),Yl=Po.reduce(function(Rm,ry){return Rm+ry.fragment.mainModelColor},""),Zl=Po.reduce(function(Rm,ry){return Rm+ry.fragment.mainEnd},"");yn.vertexShader=yn.vertexShader.replace(/MAIN_BEFORE/g,To),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_BEFORE/g,Wl),yn.vertexShader=yn.vertexShader.replace(/MAIN_START/g,Io),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_START/g,Xl),yn.vertexShader=yn.vertexShader.replace(/MAIN_END/g,$l),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_END/g,Zl),yn.fragmentShader=yn.fragmentShader.replace(/MAIN_MODEL_COLOR/g,Yl);var ey=String((Co=(Bn=this.clippers)===null||Bn===void 0?void 0:Bn.length)!==null&&Co!==void 0?Co:0);yn.vertexShader=yn.vertexShader.replace(/NUM_CLIPPERS/g,ey),yn.fragmentShader=yn.fragmentShader.replace(/NUM_CLIPPERS/g,ey),Po.forEach(function(Rm){Rm.onBeforeCompile(yn,Rn)})},vn.prototype.update=function(yn,Rn,Bn){var Co="".concat(Bn.id,":").concat(Bn.materialVersion);Co!==this.syncModelVersion&&(Object.assign(this,Bn.getMaterial()),this.syncModelVersion=Co);var Po=this.customShaders.map(function(_g){return _g.getHash()}).join("");this.customShaderHash!==Po&&(this.customShaderHash=Po,this.needsUpdate=!0);for(var To=this.customShaders.reduce(function(_g,ty){return Object.assign(_g,ty.defines)},{}),Io=Object.keys(this.customShaderDefines),$l=0,Wl=Io;$l<Wl.length;$l++){var Xl=Wl[$l];delete this.defines[Xl]}this.customShaderDefines=To,Object.assign(this.defines,this.customShaderDefines);for(var Yl=this.customShaders.reduce(function(_g,ty){return Object.assign(_g,ty.uniforms)},{}),Zl=Object.keys(this.customShaderUniforms),ey=0,Rm=Zl;ey<Rm.length;ey++){var ry=Rm[ey];delete this.uniforms[ry]}this.customShaderUniforms=Yl,Object.assign(this.uniforms,this.customShaderUniforms),this.visible=!0,this.transparent=!1,this.shownFloorIndex>-1&&(this.transparent=this.shownFloorIndex!==this.floorIndex),this.modelAlpha<1&&(this.transparent=!0),this.opacity<1&&(this.transparent=!0),this.brightness<1&&(this.transparent=!0),this.useAddBlend?(this.depthWrite=!1,this.depthTest=!1,this.blending=AdditiveBlending):(this.depthWrite=!0,this.depthTest=!0,this.blending=NormalBlending),this.useEDL&&(this.transparent=!1),this.useHQWeight?(this.depthWrite=!1,this.blending=CustomBlending,this.blendSrc=SrcAlphaFactor,this.blendSrcAlpha=SrcAlphaFactor,this.blendDst=OneFactor,this.blendDstAlpha=OneFactor):(this.blending=NormalBlending,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null),this.floorStyle==="VISIBILITY"&&this.shownFloorIndex!==-1&&this.floorIndex!==this.shownFloorIndex&&(this.visible=!1),this.uniforms.pixelRatio.value=Rn.pixelRatio,this.uniforms.resolution.value.copy(Rn.resolution),this.uniforms.modelBoundingMax.value.copy(Bn.bounding.max),this.uniforms.modelBoundingMin.value.copy(Bn.bounding.min)},vn.prototype.copy=function(yn){return cr.prototype.copy.call(this,this),this.customShaders=yn.customShaders,this.pano0=yn.pano0,this.pano1=yn.pano1,this.progress=yn.progress,this.transition=yn.transition,this.floorStyle=yn.floorStyle,this.shownFloorIndex=yn.shownFloorIndex,this.brightness=yn.brightness,this.clippers=yn.clippers,this.constantColor=yn.constantColor,this.modelAlpha=yn.modelAlpha,this.useEDL=yn.useEDL,this.useHQWeight=yn.useHQWeight,this.useHQDepth=yn.useHQDepth,this.colorStyle=yn.colorStyle,this.pointSize=yn.pointSize,this.pointShape=yn.pointShape,this.pointScale=yn.pointScale,this.pointBack=yn.pointBack,this.pointMinPixel=yn.pointMinPixel,this.pointMaxPixel=yn.pointMaxPixel,this.gradientTexture=yn.gradientTexture,this.colorSaturation=yn.colorSaturation,this.colorBrightness=yn.colorBrightness,this.outlineGain=yn.outlineGain,this.distanceGain=yn.distanceGain,this.useAddBlend=yn.useAddBlend,this},vn}(ShaderMaterial),On=function(cr){fe$6(vn,cr);function vn(yn){var Rn=yn.preserveDrawingBuffer,Bn=Rn===void 0?!0:Rn,Co=yn.premultipliedAlpha,Po=Co===void 0?!0:Co,To=yn.stencil,Io=To===void 0?!0:To,$l=yn.backgroundColor,Wl=$l===void 0?1579548:$l,Xl=yn.backgroundAlpha,Yl=Xl===void 0?1:Xl,Zl=yn.pixelRatio,ey=Zl===void 0?1:Zl,Rm=yn.antialias,ry=Rm===void 0?!1:Rm,_g=yn.webgl2,ty=yn.logarithmicDepthBuffer,ny=yn.precision,iy=yn.powerPreference,oy=this,ay={antialias:ry,alpha:!0,depth:!0,preserveDrawingBuffer:Bn,stencil:Io,premultipliedAlpha:Po,powerPreference:iy},uy={logarithmicDepthBuffer:ty,precision:ny};if(_g){var hy=document.createElement("canvas"),my=hy.getContext("webgl2",ay);my?oy=cr.call(this,O$n(O$n(O$n({},ay),uy),{antialias:!0,canvas:hy,context:my}))||this:(console.error("error occurred when getting webgl2 canvas context, mybe webgl2 not support, fallback to webgl."),oy=cr.call(this,O$n(O$n({},ay),uy))||this)}else oy=cr.call(this,O$n(O$n({},ay),uy))||this;return oy.setPixelRatio(ey),oy.setClearColor(Wl,Yl),oy.outputEncoding=sRGBEncoding,oy.autoClear=!0,oy}return vn}(WebGLRenderer),Tu=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.add=function(){for(var yn=[],Rn=0;Rn<arguments.length;Rn++)yn[Rn]=arguments[Rn];return cr.prototype.add.apply(this,yn)},vn.prototype.remove=function(){for(var yn=[],Rn=0;Rn<arguments.length;Rn++)yn[Rn]=arguments[Rn];return cr.prototype.remove.apply(this,yn)},vn}(Scene);function Ut$1(cr,vn){var yn=Math.abs(Math.cos(cr.latitude)),Rn=-Math.sin(cr.longitude)*yn,Bn=-Math.sin(cr.latitude),Co=-Math.cos(cr.longitude)*yn;return vn?vn.set(Rn,Bn,Co):new Vector3(Rn,Bn,Co)}var Ad=1,gd=.1,yd=2e3,Hi=Math.PI*2,Ko=Math.PI/2;function Va(cr){return cr>0&&cr<=Hi?cr:(cr%Hi+Hi)%Hi}function bd(cr,vn,yn,Rn){yn=Math.pow(yn,4);for(var Bn=0;Bn<16;Bn++)Rn.elements[Bn]=cr.elements[Bn]+(vn.elements[Bn]-cr.elements[Bn])*yn;return Rn}var xd=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn,Co,Po,To,Io){Rn===void 0&&(Rn=Ad),Bn===void 0&&(Bn=gd),Co===void 0&&(Co=yd),Po===void 0&&(Po=new Vector2),To===void 0&&(To=new Vector2(512,512)),Io===void 0&&(Io=1);var $l=cr.call(this)||this;$l.fov=yn,$l.aspect=Rn,$l.near=Bn,$l.far=Co,$l.perspToOrtho=Po,$l.resolution=To,$l.pixelRatio=Io,$l.time=0,$l.needsRender=!0,$l.refineModel=!0,$l.pose={longitude:0,latitude:0,fov:yn,distance:0,offset:new Vector3},$l.computePose(),$l.perspectiveCamera=new PerspectiveCamera($l.fov,$l.aspect,.001,$l.far);var Wl=Math.max($l.orthoDistance,.01)*Math.tan(.5*$l.fov/180*Math.PI),Xl=-.5*$l.aspect*2*Wl;return $l.orthographicCamera=new OrthographicCamera(Xl,-Xl,Wl,-Wl,.001,$l.far),$l.computeProjectionMatrix(),$l.lastValues={position:$l.position.clone(),quaternion:$l.quaternion.clone(),scale:$l.scale.clone(),fov:$l.fov,aspect:$l.aspect,near:$l.near,far:$l.far,orthoDistance:$l.orthoDistance,perspToOrtho:$l.perspToOrtho.clone()},$l.type=$l.perspToOrtho.x<1?"PerspectiveCamera":"OrthographicCamera",$l.autoNearFar=!0,$l.environment=null,$l}return Object.defineProperty(vn.prototype,"orthoDistance",{get:function(){return this.pose.distance>1?this.pose.distance:1+(this.pose.distance-1)*this.perspToOrtho.x},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"zoom",{get:function(){return this.type==="OrthographicCamera"?this.orthographicCamera.zoom:this.type==="PerspectiveCamera"?this.perspectiveCamera.zoom:1},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"top",{get:function(){return this.type==="OrthographicCamera"?this.orthographicCamera.top:0},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"bottom",{get:function(){return this.type==="OrthographicCamera"?this.orthographicCamera.bottom:0},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"left",{get:function(){return this.type==="OrthographicCamera"?this.orthographicCamera.left:0},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"right",{get:function(){return this.type==="OrthographicCamera"?this.orthographicCamera.right:0},enumerable:!1,configurable:!0}),vn.prototype.getDirection=function(yn){return Ut$1(this.pose,yn)},vn.prototype.computePose=function(yn){yn===void 0&&(yn=0),this.updateMatrix();var Rn=this.matrix.elements;return this.pose.latitude=Math.asin(pe$4(Rn[9],-1,1)),Math.abs(Rn[9])<.9999999?this.pose.longitude=Va(Math.atan2(Rn[8],Rn[10])):this.pose.longitude=Va(Math.atan2(-Rn[2],Rn[0])),this.pose.fov=this.fov,this.pose.distance=yn,this.pose.offset=new Vector3(-Rn[8],-Rn[9],-Rn[10]).setLength(this.pose.distance).add(this.position),this},vn.prototype.setFromPose=function(yn){var Rn,Bn,Co,Po,To,Io=Va((Rn=yn.longitude)!==null&&Rn!==void 0?Rn:this.pose.longitude),$l=Math.max(-Ko+1e-4,Math.min(Ko-1e-4,(Bn=yn.latitude)!==null&&Bn!==void 0?Bn:this.pose.latitude)),Wl=(Co=yn.fov)!==null&&Co!==void 0?Co:this.pose.fov,Xl=(Po=yn.distance)!==null&&Po!==void 0?Po:this.pose.distance,Yl=(To=yn.offset)!==null&&To!==void 0?To:this.pose.offset,Zl=Ut$1({longitude:Io,latitude:$l}).normalize();return this.position.set(0,0,0),this.lookAt(Zl),this.position.add(Yl).sub(Zl.clone().setLength(Xl)),this.fov!==Wl&&(this.fov=Wl,this.updateProjectionMatrix()),this.updateMatrixWorld(!0),this.pose.longitude=Io,this.pose.latitude=$l,this.pose.fov=Wl,this.pose.distance=Xl,this.pose.offset.copy(Yl),this.needsRender=!0,this},vn.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},vn.prototype.computeProjectionMatrix=function(){bd(this.orthographicCamera.projectionMatrix,this.perspectiveCamera.projectionMatrix,1-this.perspToOrtho.x,this.projectionMatrix),this.projectionMatrixInverse.getInverse(this.projectionMatrix),this.needsRender=!0},vn.prototype.setViewOffset=function(yn,Rn,Bn,Co,Po,To){this.perspectiveCamera.setViewOffset(yn,Rn,Bn,Co,Po,To),this.orthographicCamera.setViewOffset(yn,Rn,Bn,Co,Po,To),this.computeProjectionMatrix()},vn.prototype.clearViewOffset=function(){this.perspectiveCamera.clearViewOffset(),this.orthographicCamera.clearViewOffset(),this.computeProjectionMatrix()},vn.prototype.updateProjectionMatrix=function(){this.perspectiveCamera.updateProjectionMatrix(),this.orthographicCamera.updateProjectionMatrix(),this.computeProjectionMatrix()},Object.defineProperty(vn.prototype,"perspectiveProjectionMatrix",{get:function(){return this.perspectiveCamera.projectionMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"perspectiveProjectionMatrixInverse",{get:function(){return this.perspectiveCamera.projectionMatrixInverse},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"orthographicProjectionMatrix",{get:function(){return this.orthographicCamera.projectionMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"orthographicProjectionMatrixInverse",{get:function(){return this.orthographicCamera.projectionMatrixInverse},enumerable:!1,configurable:!0}),vn.prototype.updateTime=function(yn){this.time=yn;var Rn=!1;if((this.lastValues.fov!==this.fov||this.lastValues.near!==this.near||this.lastValues.far!==this.far||this.lastValues.aspect!==this.aspect)&&(this.perspectiveCamera.fov=this.fov,this.perspectiveCamera.near=this.near,this.perspectiveCamera.far=this.far,this.perspectiveCamera.aspect=this.aspect,this.perspectiveCamera.updateProjectionMatrix(),Rn=!0),!this.lastValues.position.equals(this.position)||!this.lastValues.quaternion.equals(this.quaternion)||!this.lastValues.scale.equals(this.scale)||!this.lastValues.perspToOrtho.equals(this.perspToOrtho)||this.lastValues.fov!==this.fov||this.lastValues.near!==this.near||this.lastValues.far!==this.far||this.lastValues.orthoDistance!==this.orthoDistance||this.lastValues.aspect!==this.aspect){var Bn=Math.max(this.orthoDistance,.01)*Math.tan(.5*this.fov/180*Math.PI),Co=-.5*this.aspect*2*Bn;this.orthographicCamera.left=Co,this.orthographicCamera.right=-Co,this.orthographicCamera.top=Bn,this.orthographicCamera.bottom=-Bn,this.orthographicCamera.near=this.near,this.orthographicCamera.far=this.far,this.orthographicCamera.updateProjectionMatrix(),Rn=!0}Rn&&this.computeProjectionMatrix(),this.lastValues.position.copy(this.position),this.lastValues.quaternion.copy(this.quaternion),this.lastValues.scale.copy(this.scale),this.lastValues.fov=this.fov,this.lastValues.aspect=this.aspect,this.lastValues.near=this.near,this.lastValues.far=this.far,this.lastValues.orthoDistance=this.orthoDistance,this.lastValues.perspToOrtho.copy(this.perspToOrtho),this.type=this.perspToOrtho.x<1?"PerspectiveCamera":"OrthographicCamera"},Object.defineProperty(vn.prototype,"isPerspectiveCamera",{get:function(){return this.perspToOrtho.x<1},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"isOrthographicCamera",{get:function(){return this.perspToOrtho.x>=1},enumerable:!1,configurable:!0}),vn.prototype.copy=function(yn,Rn){return cr.prototype.copy.call(this,yn,Rn),this.fov=yn.fov,this.aspect=yn.aspect,this.near=yn.near,this.far=yn.far,this.perspToOrtho.copy(yn.perspToOrtho),this.updateTime(Ae$3()),this},vn}(Camera),Bt$1;(function(cr){cr[cr.Outside=-1]="Outside",cr[cr.Intersecting=0]="Intersecting",cr[cr.Inside=1]="Inside"})(Bt$1||(Bt$1={}));var Pu=1e-6,Je$1=new Vector3,fn=new Matrix4,Yr$1=new Vector3,$r$2=new Vector3,en=new Vector3,T0=new Vector3,Da=new Box3,Na=new Sphere,jo=new Matrix4,qa=new Ray,Pt$1=new Object3D,Xo=new Frustum;function Ru(cr,vn){var yn=cr.elements;return vn.setFromRotationMatrix(fn.set(yn[0],yn[3],yn[6],0,yn[1],yn[4],yn[7],0,yn[2],yn[5],yn[8],0,0,0,0,1)),vn}var hi=function(){function cr(vn){vn===void 0&&(vn=[]),this.planes=vn}return Object.defineProperty(cr,"MASK_OUTSIDE",{get:function(){return 4294967295},enumerable:!1,configurable:!0}),Object.defineProperty(cr,"MASK_INSIDE",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(cr,"MASK_INDETERMINATE",{get:function(){return 2147483647},enumerable:!1,configurable:!0}),cr.prototype.setFromFrustum=function(vn){return this.planes=vn.planes.map(function(yn){return yn.clone()}),this},cr.prototype.setFromCamera=function(vn){return fn.multiplyMatrices(vn.projectionMatrix,vn.matrixWorldInverse),Xo.setFromProjectionMatrix(fn),this.setFromFrustum(Xo),this},cr.prototype.applyMatrix4=function(vn){for(var yn=0,Rn=this.planes;yn<Rn.length;yn++){var Bn=Rn[yn];Bn.applyMatrix4(vn)}},cr.prototype.copy=function(vn){return this.planes=vn.planes.map(function(yn){return yn.clone()}),this},cr.prototype.clone=function(){return new cr().copy(this)},cr.prototype.computeVisibility=function(vn){for(var yn=Bt$1.Inside,Rn=0,Bn=this.planes;Rn<Bn.length;Rn++){var Co=Bn[Rn],Po=vn.intersectPlane(Co);switch(Po){case Bt$1.Outside:return Bt$1.Outside;case Bt$1.Intersecting:yn=Bt$1.Intersecting;break}}return yn},cr.prototype.computeVisibilityWithPlaneMask=function(vn,yn){if(yn===cr.MASK_OUTSIDE||yn===cr.MASK_INSIDE)return yn;for(var Rn=cr.MASK_INSIDE,Bn=Math.min(32,this.planes.length),Co=0;Co<Bn;++Co){var Po=1<<Co;if(yn&Po){var To=this.planes[Co],Io=vn.intersectPlane(To);if(Io===Bt$1.Outside)return cr.MASK_OUTSIDE;Io===Bt$1.Intersecting&&(Rn|=Po)}}return Rn},cr}(),no=function(){function cr(){this.type="box",this.center=new Vector3,this.halfSize=new Vector3,this.rotation=new Matrix3}return cr.prototype.fromJson=function(vn){var yn=vn.box;this.center.set(yn[0],yn[1],yn[2]);var Rn=yn[3],Bn=yn[4],Co=yn[5],Po=yn[6],To=yn[7],Io=yn[8],$l=yn[9],Wl=yn[10],Xl=yn[11],Yl=Math.max(Math.sqrt(Rn*Rn+Bn*Bn+Co*Co),.001),Zl=Math.max(Math.sqrt(Po*Po+To*To+Io*Io),.001),ey=Math.max(Math.sqrt($l*$l+Wl*Wl+Xl*Xl),.001);this.halfSize.set(Yl,Zl,ey);var Rm=this.halfSize.toArray().reduce(function(ry,_g){return ry+_g},0);return(isNaN(Rm)||Rm<=0)&&this.halfSize.setScalar(Pu),this.rotation.fromArray([Rn/Yl,Bn/Yl,Co/Yl,Po/Zl,To/Zl,Io/Zl,$l/ey,Wl/ey,Xl/ey]),isNaN(this.rotation.toArray().reduce(function(ry,_g){return ry+_g},0))&&this.rotation.identity(),this},cr.prototype.toJson=function(){return this.rotation.extractBasis(Yr$1,$r$2,en),{box:yt$3(yt$3(yt$3(yt$3([],this.center.toArray(),!0),Yr$1.multiplyScalar(this.halfSize.x).toArray(),!0),$r$2.multiplyScalar(this.halfSize.y).toArray(),!0),en.multiplyScalar(this.halfSize.z).toArray(),!0)}},cr.prototype.copy=function(vn){return this.center.copy(vn.center),this.halfSize.copy(vn.halfSize),this.rotation.copy(vn.rotation),this},cr.prototype.clone=function(){return new cr().copy(this)},cr.prototype.applyMatrix4=function(vn){return Pt$1.position.copy(this.center),Ru(this.rotation,Pt$1.quaternion),Pt$1.scale.copy(this.halfSize),Pt$1.matrix.compose(Pt$1.position,Pt$1.quaternion,Pt$1.scale),Pt$1.matrix.premultiply(vn),Pt$1.matrix.decompose(Pt$1.position,Pt$1.quaternion,Pt$1.scale),this.center.copy(Pt$1.position),this.rotation.setFromMatrix4(fn.makeRotationFromQuaternion(Pt$1.quaternion)),this.halfSize.copy(Pt$1.scale),this},cr.prototype.getCenter=function(vn){return vn.copy(this.center)},cr.prototype.distanceSquaredToPoint=function(vn){var yn=this.rotation.elements,Rn=vn.x-this.center.x,Bn=vn.y-this.center.y,Co=vn.z-this.center.z,Po=0,To;return To=Rn*yn[0]+Bn*yn[1]+Co*yn[2],To<0&&(To=-To),To-=this.halfSize.x,To>0&&(Po+=To*To),To=Rn*yn[3]+Bn*yn[4]+Co*yn[5],To<0&&(To=-To),To-=this.halfSize.y,To>0&&(Po+=To*To),To=Rn*yn[6]+Bn*yn[7]+Co*yn[8],To<0&&(To=-To),To-=this.halfSize.z,To>0&&(Po+=To*To),Po},cr.prototype.distanceToPoint=function(vn){return Math.sqrt(this.distanceSquaredToPoint(vn))},cr.prototype.distanceToPlane=function(vn){var yn=vn.projectPoint(this.center,new Vector3);return this.distanceToPoint(yn)},cr.prototype.getBoundingBox=function(vn){return vn.makeEmpty(),this.rotation.extractBasis(Yr$1,$r$2,en),Yr$1.setLength(this.halfSize.x),$r$2.setLength(this.halfSize.y),en.setLength(this.halfSize.z),vn.expandByPoint(Je$1.copy(this.center).add(Yr$1)),vn.expandByPoint(Je$1.copy(this.center).sub(Yr$1)),vn.expandByPoint(Je$1.copy(this.center).add($r$2)),vn.expandByPoint(Je$1.copy(this.center).sub($r$2)),vn.expandByPoint(Je$1.copy(this.center).add(en)),vn.expandByPoint(Je$1.copy(this.center).sub(en)),vn},cr.prototype.toGeometry=function(){var vn=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),yn=new Float32Array(8*3);Je$1.set(this.halfSize.x,this.halfSize.y,this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,0),Je$1.set(-this.halfSize.x,this.halfSize.y,this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,3),Je$1.set(-this.halfSize.x,-this.halfSize.y,this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,6),Je$1.set(this.halfSize.x,-this.halfSize.y,this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,9),Je$1.set(this.halfSize.x,this.halfSize.y,-this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,12),Je$1.set(-this.halfSize.x,this.halfSize.y,-this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,15),Je$1.set(-this.halfSize.x,-this.halfSize.y,-this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,18),Je$1.set(this.halfSize.x,-this.halfSize.y,-this.halfSize.z).applyMatrix3(this.rotation).add(this.center).toArray(yn,21);var Rn=new BufferGeometry;return Rn.setIndex(new BufferAttribute(vn,1)),Rn.setAttribute("position",new BufferAttribute(yn,3)),Rn.computeBoundingBox(),Rn.computeBoundingSphere(),Rn},cr.prototype.intersectPlane=function(vn){var yn=this.center,Rn=vn.normal,Bn=this.rotation.elements,Co=this.halfSize,Po=Rn.x,To=Rn.y,Io=Rn.z,$l=Math.abs(Po*Bn[0]*Co.x+To*Bn[1]*Co.x+Io*Bn[2]*Co.x)+Math.abs(Po*Bn[3]*Co.y+To*Bn[4]*Co.y+Io*Bn[5]*Co.y)+Math.abs(Po*Bn[6]*Co.z+To*Bn[7]*Co.z+Io*Bn[8]*Co.z),Wl=Rn.dot(yn)+vn.constant;return Wl<=-$l?Bt$1.Outside:Wl>=$l?Bt$1.Inside:Bt$1.Intersecting},cr.prototype.intersectRay=function(vn,yn){if(T0.copy(this.halfSize).multiplyScalar(2),Da.setFromCenterAndSize(Je$1.set(0,0,0),T0),this.rotation.extractBasis(Yr$1,$r$2,en),fn.makeBasis(Yr$1,$r$2,en),fn.setPosition(this.center),jo.getInverse(fn),qa.copy(vn).applyMatrix4(jo),Da.containsPoint(qa.origin))return!0;var Rn=qa.intersectBox(Da,Je$1);return Rn?yn!==void 0?Rn.applyMatrix4(fn).distanceTo(vn.origin)<yn:!0:!1},cr}(),io=function(){function cr(){this.type="sphere",this.center=new Vector3,this.radius=-1}return cr.prototype.fromJson=function(vn){var yn=vn.sphere;return this.center.set(yn[0],yn[1],yn[2]),this.radius=Math.max(yn[3],Pu),this},cr.prototype.toJson=function(){return{sphere:yt$3(yt$3([],this.center.toArray(),!0),[this.radius],!1)}},cr.prototype.copy=function(vn){return this.center.copy(vn.center),this.radius=vn.radius,this},cr.prototype.clone=function(){return new cr().copy(this)},cr.prototype.getBoundingBox=function(vn){return vn.setFromCenterAndSize(this.center,T0.set(1,1,1).multiplyScalar(this.radius*2)),vn},cr.prototype.toGeometry=function(){for(var vn=32,yn=new Float32Array(vn*3*2*2),Rn=0;Rn<=vn;Rn++){var Bn=0;Bn=Rn/vn*Math.PI*2,yn[Rn*6+0]=this.center.x+Math.cos(Bn)*this.radius,yn[Rn*6+1]=this.center.y+Math.sin(Bn)*this.radius,yn[Rn*6+2]=this.center.z+0,Bn=(Rn+1)/vn*Math.PI*2,yn[Rn*6+3]=this.center.x+Math.cos(Bn)*this.radius,yn[Rn*6+4]=this.center.y+Math.sin(Bn)*this.radius,yn[Rn*6+5]=this.center.z+0}for(var Rn=vn;Rn<=vn*2;Rn++){var Bn=0;Bn=Rn/vn*Math.PI*2,yn[Rn*6+0]=this.center.x+Math.cos(Bn)*this.radius,yn[Rn*6+1]=this.center.y+0,yn[Rn*6+2]=this.center.z+Math.sin(Bn)*this.radius,Bn=(Rn+1)/vn*Math.PI*2,yn[Rn*6+3]=this.center.x+Math.cos(Bn)*this.radius,yn[Rn*6+4]=this.center.y+0,yn[Rn*6+5]=this.center.z+Math.sin(Bn)*this.radius}var Co=new BufferGeometry;return Co.setAttribute("position",new BufferAttribute(yn,3)),Co.computeBoundingBox(),Co.computeBoundingSphere(),Co},cr.prototype.applyMatrix4=function(vn){return this.center.applyMatrix4(vn),this.radius=this.radius*vn.getMaxScaleOnAxis(),this},cr.prototype.getCenter=function(vn){return vn.copy(this.center)},cr.prototype.distanceSquaredToPoint=function(vn){var yn=this.distanceToPoint(vn);return yn*yn},cr.prototype.distanceToPoint=function(vn){var yn=this.center.distanceTo(vn)-this.radius;return yn<=0?0:yn},cr.prototype.distanceToPlane=function(vn){var yn=Math.abs(vn.distanceToPoint(this.center));return Math.max(0,yn-this.radius)},cr.prototype.intersectPlane=function(vn){var yn=this.center,Rn=this.radius,Bn=vn.normal,Co=Bn.dot(yn)+vn.constant;return Co<-Rn?Bt$1.Outside:Co<Rn?Bt$1.Intersecting:Bt$1.Inside},cr.prototype.intersectRay=function(vn,yn){if(Na.set(this.center,this.radius),Na.containsPoint(vn.origin))return!0;var Rn=vn.intersectSphere(Na,Je$1);return Rn?yn!==void 0?vn.origin.distanceTo(Rn)<yn:!0:!1},cr}(),Bu=function(){function cr(){throw this.type="regin",this.west=0,this.south=0,this.east=0,this.north=0,this.minHeight=0,this.maxHeight=0,new Error("Region bounding volume not supported.")}return cr.prototype.fromJson=function(vn){var yn=vn.region;return this.west=yn[0],this.south=yn[1],this.east=yn[2],this.north=yn[3],this.minHeight=yn[4],this.maxHeight=yn[5],this},cr.prototype.toJson=function(){return{region:[this.west,this.south,this.east,this.north,this.minHeight,this.maxHeight]}},cr.prototype.copy=function(vn){return this.west=vn.west,this.south=vn.south,this.east=vn.east,this.north=vn.north,this.minHeight=vn.minHeight,this.maxHeight=vn.maxHeight,this},cr.prototype.clone=function(){return new cr().copy(this)},cr.prototype.getBoundingBox=function(vn){throw new Error("not implemented")},cr.prototype.toGeometry=function(){throw new Error("not implemented")},cr.prototype.applyMatrix4=function(vn){throw new Error("not implemented")},cr.prototype.getCenter=function(vn){throw new Error("not implemented")},cr.prototype.distanceToPoint=function(vn){throw new Error("not implemented")},cr.prototype.distanceSquaredToPoint=function(vn){throw new Error("not implemented")},cr.prototype.distanceToPlane=function(vn){throw new Error("not implemented")},cr.prototype.intersectPlane=function(vn){throw new Error("not implemented")},cr.prototype.intersectRay=function(vn){throw new Error("not implemented")},cr}();function Ua(cr){return cr instanceof no||cr instanceof io||cr instanceof Bu}function Sn(cr){if("box"in cr)return new no().fromJson(cr);if("sphere"in cr)return new io().fromJson(cr);if("region"in cr)return new Bu().fromJson(cr);throw new Error("BoundingVolume ".concat(JSON.stringify(cr)," never suppored."))}var Gi=[4821759,8191922,16637280,16739958,5822969,376977,16747077,9259235,14514687].map(function(cr){return new LineBasicMaterial({color:cr,depthWrite:!1,depthTest:!1,transparent:!0})}),wd=function(){var cr=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),vn=new Float32Array(8*3);Je$1.set(1,1,1).toArray(vn,0),Je$1.set(-1,1,1).toArray(vn,3),Je$1.set(-1,-1,1).toArray(vn,6),Je$1.set(1,-1,1).toArray(vn,9),Je$1.set(1,1,-1).toArray(vn,12),Je$1.set(-1,1,-1).toArray(vn,15),Je$1.set(-1,-1,-1).toArray(vn,18),Je$1.set(1,-1,-1).toArray(vn,21);var yn=new BufferGeometry;return yn.setIndex(new BufferAttribute(cr,1)),yn.setAttribute("position",new BufferAttribute(vn,3)),yn.computeBoundingBox(),yn.computeBoundingSphere(),yn}(),Sd=function(){for(var cr=32,vn=new Float32Array(cr*3*2*2),yn=0;yn<=cr;yn++){var Rn=0;Rn=yn/cr*Math.PI*2,vn[yn*6+0]=Math.cos(Rn),vn[yn*6+1]=Math.sin(Rn),vn[yn*6+2]=0,Rn=(yn+1)/cr*Math.PI*2,vn[yn*6+3]=Math.cos(Rn),vn[yn*6+4]=Math.sin(Rn),vn[yn*6+5]=0}for(var yn=cr;yn<=cr*2;yn++){var Rn=0;Rn=yn/cr*Math.PI*2,vn[yn*6+0]=Math.cos(Rn),vn[yn*6+1]=0,vn[yn*6+2]=Math.sin(Rn),Rn=(yn+1)/cr*Math.PI*2,vn[yn*6+3]=Math.cos(Rn),vn[yn*6+4]=0,vn[yn*6+5]=Math.sin(Rn)}var Bn=new BufferGeometry;return Bn.setAttribute("position",new BufferAttribute(vn,3)),Bn.computeBoundingBox(),Bn.computeBoundingSphere(),Bn}();function Md(cr,vn){if(cr instanceof no){var yn=new LineSegments(wd,Gi[Math.min(vn,Gi.length-1)]);return yn.position.copy(cr.center),Ru(cr.rotation,yn.quaternion),yn.scale.set(cr.halfSize.x,cr.halfSize.y,cr.halfSize.z),yn.matrix.compose(yn.position,yn.quaternion,yn.scale),yn}else if(cr instanceof io){var yn=new LineSegments(Sd,Gi[Math.min(vn,Gi.length-1)]);return yn.position.copy(cr.center),yn.scale.set(cr.radius,cr.radius,cr.radius),yn.matrix.compose(yn.position,yn.quaternion,yn.scale),yn}throw new Error("never")}var Ed=new Vector3,Fu=function(){function cr(vn,yn,Rn,Bn){var Co=this,Po,To,Io,$l;this.parent=null,this.contentParent=null,this.floor=0,this.id=vn,this.state={visible:!1,frameNumber:0,selectedFrameNumber:0,requestedFrameNumber:0,touchedFrameNumber:0,distanceToCamera:0,centerZDepth:0,centerScreenY:0,screenSpaceError:0,visibilityPlaneMask:0,inRequestVolume:!1,shouldRefine:!1,stackLength:0,finalResolution:!0,selectionDepth:0,shouldSelect:!1,lastSelect:!1,ancestorWithContent:null,ancestorWithContentAvailable:null},this.parent=Bn!=null?Bn:null,this.contentParent=Bn?Bn.hasRenderContent?Bn:Bn.contentParent:null,this.level=this.parent?this.parent.level+1:0,this.tileset=Rn,this.refine=(Po=yn.refine)!==null&&Po!==void 0?Po:this.parent?this.parent.refine:"REPLACE",this.transform=new Matrix4,yn.transform&&this.transform.fromArray(yn.transform),this.parent&&this.transform.premultiply(this.parent.transform),typeof yn.geometricError=="number"?this.geometricError=yn.geometricError*this.transform.getMaxScaleOnAxis():this.geometricError=(Io=(To=this.parent)===null||To===void 0?void 0:To.geometricError)!==null&&Io!==void 0?Io:0,yn.content&&yn.content.uri?(this.content={uri:yn.content.uri,loadState:"UNLOADED",loadStateUpdateTime:Ae$3(),loadfailRetryDelay:0,byteLength:0,memoryUsage:0},yn.content.group!==void 0&&(this.content.group=yn.content.group),yn.content.boundingVolume&&(this.content.boundingVolume=Sn(yn.content.boundingVolume).applyMatrix4(this.transform)),/\.json$/.test(this.content.uri)?this.type="TILESET":this.type="SCENEGRAPH"):(this.content=null,this.type="EMPTY"),this.levelOfContent=this.parent?this.parent.levelOfContent:-1,this.type==="SCENEGRAPH"&&(this.levelOfContent=this.levelOfContent+1),yn.boundingVolume&&(this.boundingVolume=Sn(yn.boundingVolume).applyMatrix4(this.transform)),yn.viewerRequestVolume&&(this.viewerRequestVolume=Sn(yn.viewerRequestVolume).applyMatrix4(this.transform)),this.extras=($l=yn.extras)!==null&&$l!==void 0?$l:{},typeof this.extras.floor!="number"&&Bn&&typeof Bn.extras.floor=="number"&&(this.extras.floor=Bn.extras.floor),typeof this.extras.floor=="number"&&(this.floor=this.extras.floor,this.tileset.floorLength=Math.max(this.tileset.floorLength,this.floor+1)),this.boundingVolume&&(this.boundingVolumeDebugObject=Md(this.boundingVolume,this.levelOfContent)),yn.children?this.children=yn.children.map(function(Wl,Xl){return new cr("".concat(Co.id,".").concat(Xl),Wl,Rn,Co)}):this.children=[]}return cr.prototype.traverse=function(vn){vn(this);for(var yn=0,Rn=this.children;yn<Rn.length;yn++){var Bn=Rn[yn];Bn.traverse(vn)}},cr.prototype.updateState=function(vn){this.state.frameNumber=vn.frameNumber;var yn=this.tileset.transformIsIdentity?null:this.tileset.transform;if(this.boundingVolume){var Rn=yn?this.boundingVolume.clone().applyMatrix4(yn):this.boundingVolume;if(vn.camera.type==="OrthographicCamera"){var Bn=new Plane().setFromNormalAndCoplanarPoint(vn.camera.direction,vn.camera.position);this.state.distanceToCamera=Rn.distanceToPlane(Bn)}else this.state.distanceToCamera=Rn.distanceToPoint(vn.camera.position);var Co=Rn.getCenter(Ed).sub(vn.camera.position);this.state.centerZDepth=vn.camera.direction.dot(Co),this.state.centerScreenY=vn.camera.up.dot(Co);var Po=this.parent?this.parent.state.visibilityPlaneMask:hi.MASK_INDETERMINATE;this.state.visibilityPlaneMask=vn.cullingVolume.computeVisibilityWithPlaneMask(Rn,Po),this.state.visible=this.state.visibilityPlaneMask!==hi.MASK_OUTSIDE}else this.state.distanceToCamera=0,this.state.centerZDepth=0,this.state.visibilityPlaneMask=hi.MASK_INDETERMINATE,this.state.visible=!0;if((this.levelOfContent<=vn.minLevelOfDetail||this.geometricError>=vn.maxGeometricError)&&(this.state.visible=!0),this.viewerRequestVolume){var To=yn?this.viewerRequestVolume.clone().applyMatrix4(yn):this.viewerRequestVolume;this.state.inRequestVolume=To.distanceSquaredToPoint(vn.camera.position)<=0}else this.state.inRequestVolume=!0;this.state.screenSpaceError=this.getScreenSpaceError(vn,this.state.distanceToCamera,!1)},Object.defineProperty(cr.prototype,"selected",{get:function(){return this.state.selectedFrameNumber===this.tileset.frameNumber},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"hasChildren",{get:function(){return this.children.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"siblingIndex",{get:function(){var vn,yn;return(yn=(vn=this.parent)===null||vn===void 0?void 0:vn.children.indexOf(this))!==null&&yn!==void 0?yn:0},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"hasTilesetContent",{get:function(){return this.children.length>0&&this.type==="TILESET"},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"hasRenderContent",{get:function(){return this.type==="SCENEGRAPH"},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"contentAvailable",{get:function(){var vn;return this.hasRenderContent&&((vn=this.content)===null||vn===void 0?void 0:vn.loadState)==="READY"},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"hasUnloadedContent",{get:function(){var vn;return((vn=this.content)===null||vn===void 0?void 0:vn.loadState)==="UNLOADED"},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"hasEmptyContent",{get:function(){return this.type==="EMPTY"},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"contentReady",{get:function(){var vn;return((vn=this.content)===null||vn===void 0?void 0:vn.loadState)==="READY"||this.hasEmptyContent},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"contentByteLength",{get:function(){return this.content?this.content.byteLength:0},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"contentMemoryUsage",{get:function(){return this.content?this.content.memoryUsage:0},enumerable:!1,configurable:!0}),cr.prototype.getScreenSpaceError=function(vn,yn,Rn){var Bn=this.tileset.transformIsIdentity?1:this.tileset.transform.getMaxScaleOnAxis(),Co=this.parent?this.parent.geometricError:this.tileset.geometricError,Po=Bn*(Rn?Co:this.geometricError);if(Po===0)return 0;var To=vn.height,Io=vn.sseDenominator;if(vn.camera.type==="OrthographicCamera"){var $l=vn.camera.projectionMatrix.elements,Wl=1/($l[5]/2),Xl=.9,Yl=Wl/To*Xl,Zl=Po/Yl;return Zl}else{var ey=Math.max(yn,.001),Yl=ey*Io/To,Zl=Po/Yl;return Zl}},cr.prototype.getPriority=function(){var vn=this.refine==="ADD"||this.tileset.skipLevelOfDetail;if(vn&&!this.state.visible||this.tileset.frameNumber-this.state.touchedFrameNumber>=1)return-1;var yn=this.parent,Rn=yn&&(!vn||this.state.screenSpaceError===0),Bn=Rn?yn.state.screenSpaceError:this.state.screenSpaceError,Co=this.tileset.root?this.tileset.root.state.screenSpaceError:0,Po=Math.max(Co-Bn,0);return Po},cr}(),Qa=new Map;function Wo(cr,vn){if(vn&&vn.has(cr))return vn.get(cr);var yn=cr.refine==="ADD"||cr.tileset.skipLevelOfDetail,Rn=cr.parent,Bn=Rn&&(!yn||cr.state.screenSpaceError===0),Co=Bn?Rn.state.screenSpaceError:cr.state.screenSpaceError,Po=cr.tileset.root?cr.tileset.root.state.screenSpaceError:0,To=Math.max(Po-Co,0);return vn&&vn.set(cr,To),To}var Cd=function(){function cr(vn,yn){this.tileset=vn,this.options=yn,this.activeRequests=0,this.requestQueue=[]}return cr.prototype.reset=function(){for(var vn=0,yn=this.requestQueue;vn<yn.length;vn++){var Rn=yn[vn];this.options.onTileSkip&&this.options.onTileSkip(Rn.tile)}this.requestQueue.length=0},cr.prototype.update=function(vn,yn,Rn){for(var Bn=this,Co=Rn.time,Po=this.requestQueue,To=new Set(vn),Io=0;Io<Po.length;Io++){var $l=Po[Io];if(To.has($l.tile)){To.delete($l.tile);continue}$l.status==="WAITING"&&(Po.splice(Io,1),Io--,this.options.onTileSkip&&this.options.onTileSkip($l.tile))}To.size>0&&(To.forEach(function(_g){Po.push({tile:_g,status:"WAITING",time:Co,error:null})}),To.clear());for(var Wl=this.tileset.maxRequests,Io=0;Io<Po.length&&Wl>0;Io++){var $l=Po[Io];if($l.status==="DONE")$l.error!==null?this.options.onTileError&&this.options.onTileError($l.tile,$l.error):(Wl--,$l.tile.content&&($l.tile.content.loadState="READY"),this.options.onTileLoad&&this.options.onTileLoad($l.tile)),Po.splice(Io,1),Io--;else if($l.status==="PENDING"&&Co-$l.time<1e3)break}switch(Qa.clear(),yn){case"SCREEN_SPACE_ERROR":{Po.sort(function(_g,ty){if(_g.tile.state.requestedFrameNumber!==ty.tile.state.requestedFrameNumber)return ty.tile.state.requestedFrameNumber-_g.tile.state.requestedFrameNumber;if(_g.tile.state.requestedFrameNumber===Rn.frameNumber){var ny=Wo(_g.tile,Qa),iy=Wo(ty.tile,Qa);return ny-iy}else return _g.tile.level!==ty.tile.level?_g.tile.level-ty.tile.level:_g.tile.state.distanceToCamera-ty.tile.state.distanceToCamera});break}case"SCREEN_VERTICAL":{Po.sort(function(_g,ty){return _g.tile.state.requestedFrameNumber!==ty.tile.state.requestedFrameNumber?ty.tile.state.requestedFrameNumber-_g.tile.state.requestedFrameNumber:_g.tile.state.requestedFrameNumber===Rn.frameNumber?_g.tile.state.centerScreenY!==ty.tile.state.centerScreenY?_g.tile.state.centerScreenY-ty.tile.state.centerScreenY:_g.tile.state.centerZDepth!==ty.tile.state.centerZDepth?_g.tile.state.centerZDepth-ty.tile.state.centerZDepth:_g.tile.level!==ty.tile.level?_g.tile.level-ty.tile.level:_g.tile.state.distanceToCamera-ty.tile.state.distanceToCamera:_g.tile.level!==ty.tile.level?_g.tile.level-ty.tile.level:_g.tile.state.distanceToCamera-ty.tile.state.distanceToCamera});break}case"SCREEN_LEVEL_VERTICAL":{Po.sort(function(_g,ty){return _g.tile.state.requestedFrameNumber!==ty.tile.state.requestedFrameNumber?ty.tile.state.requestedFrameNumber-_g.tile.state.requestedFrameNumber:_g.tile.state.requestedFrameNumber===Rn.frameNumber?_g.tile.level!==ty.tile.level?_g.tile.level-ty.tile.level:_g.tile.state.centerScreenY!==ty.tile.state.centerScreenY?_g.tile.state.centerScreenY-ty.tile.state.centerScreenY:_g.tile.state.centerZDepth!==ty.tile.state.centerZDepth?_g.tile.state.centerZDepth-ty.tile.state.centerZDepth:_g.tile.state.distanceToCamera-ty.tile.state.distanceToCamera:_g.tile.level!==ty.tile.level?_g.tile.level-ty.tile.level:_g.tile.state.distanceToCamera-ty.tile.state.distanceToCamera});break}}if(Wl=Math.max(this.tileset.maxRequests-this.activeRequests,0),!this.tileset.skipLevelOfDetail)for(var Xl=0,Yl=Po.length,Io=0;Io<Yl;Io++){var Zl=Po[Io].tile;if(Zl.hasTilesetContent||Zl.contentParent===null||Zl.contentParent.state.selectedFrameNumber===this.tileset.frameNumber){var ey=Po.splice(Io,1);Po.splice.apply(Po,yt$3([Xl++,0],ey,!1))}}for(var Rm=function(ty){var ny=Po[ty];ny.status==="WAITING"&&(Wl--,ny.status="PENDING",ny.time=Co,ry.activeRequests++,ry.tileset.options.tileLoader(ny.tile).catch(function(iy){ny.error=iy}).then(function(){ny.status="DONE",ny.tile.content&&ny.tile.content.loadState==="READY"&&(ny.tile.content.loadState="LOADING"),Bn.activeRequests--}))},ry=this,Io=0;Io<Po.length&&Wl>0;Io++)Rm(Io)},cr}(),Id=function(){function cr(vn,yn,Rn){this.item=vn,this.previous=yn,this.next=Rn}return cr}(),Td=function(){function cr(){this.head=null,this.tail=null,this._length=0}return Object.defineProperty(cr.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),cr.prototype.add=function(vn){var yn=new Id(vn,this.tail,null);return this.tail?(this.tail.next=yn,this.tail=yn):(this.head=yn,this.tail=yn),this._length++,yn},cr.prototype.remove=function(vn){vn.previous&&vn.next?(vn.previous.next=vn.next,vn.next.previous=vn.previous):vn.previous?(vn.previous.next=null,this.tail=vn.previous):vn.next?(vn.next.previous=null,this.head=vn.next):(this.head=null,this.tail=null),vn.next=null,vn.previous=null,this._length--},cr.prototype.splice=function(vn,yn){vn!==yn&&(this.remove(yn),this.insert(vn,yn))},cr.prototype.insert=function(vn,yn){var Rn=vn.next;vn.next=yn,this.tail===vn?this.tail=yn:Rn.previous=yn,yn.next=Rn,yn.previous=vn,this._length++},cr.prototype.toArray=function(){for(var vn=[],yn=this.head;yn;)vn.push(yn),yn=yn.next;return vn},cr}(),Pd=function(){function cr(vn){vn===void 0&&(vn={}),this.options=vn,this.cacheNodeMap=new Map,this.list=new Td,this.sentinel=this.list.add("sentinel")}return cr.prototype.reset=function(){this.list.tail&&this.list.splice(this.list.tail,this.sentinel)},cr.prototype.touchTile=function(vn){var yn=this.cacheNodeMap.get(vn);yn&&this.list.splice(this.sentinel,yn)},cr.prototype.loadTile=function(vn){if(!this.cacheNodeMap.has(vn)){var yn=this.list.add(vn);this.cacheNodeMap.set(vn,yn),this.options.onTileLoad&&this.options.onTileLoad(vn)}},cr.prototype.unloadTile=function(vn){var yn=this.cacheNodeMap.get(vn);yn&&(this.list.remove(yn),this.cacheNodeMap.delete(vn),this.options.onTileUnload&&this.options.onTileUnload(vn))},cr.prototype.unloadTiles=function(vn){for(var yn=this.list.head;yn!==this.sentinel&&vn();){var Rn=yn.item;yn=yn.next,this.unloadTile(Rn)}},cr.prototype.toArray=function(){for(var vn=[],yn=0,Rn=this.list.toArray();yn<Rn.length;yn++){var Bn=Rn[yn];Bn.item!=="sentinel"&&vn.push(Bn.item)}return vn},cr}(),hn=function(){function cr(){this.map=new Map,this.array=[],this._length=0}return Object.defineProperty(cr.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),cr.prototype.get=function(vn){return this.array[vn]},cr.prototype.set=function(vn,yn){vn>=this.length&&(this._length=vn+1),this.map.has(this.array[vn])&&this.map.delete(this.array[vn]),this.array[vn]=yn,this.map.set(yn,vn)},cr.prototype.delete=function(vn){var yn=this.map.get(vn);yn!==void 0&&yn>=0&&(this.array.splice(yn,1),this.map.delete(vn),this._length--)},cr.prototype.push=function(vn){if(!this.map.has(vn)){var yn=this._length++;this.array[yn]=vn,this.map.set(vn,yn)}},cr.prototype.pop=function(){var vn=this.array[--this._length];return this.map.delete(vn),this.array[this._length]=void 0,vn},cr.prototype.reset=function(){this.array=[],this.map=new Map,this._length=0},cr.prototype.find=function(vn){return this.map.has(vn)},cr.prototype.peek=function(){return this.array[this._length-1]},cr}(),ao=function(){function cr(vn){this.tileset=vn,this._canSelectTile=!0,this._loadAllTilesTraversalStack=new hn,this.root=null}return cr.prototype.traverse=function(vn,yn,Rn){this.root=vn,this.reset()},cr.prototype.reset=function(){this._loadAllTilesTraversalStack.reset(),this.tileset.hasMixedContent=!1,this.tileset.needsRefinedTiles.clear(),this.tileset.requestedTiles.length=0,this.tileset.selectedTiles.length=0},cr.prototype.updateTile=function(vn,yn){this.updateTileVisibility(vn,yn),vn.state.shouldSelect=!1,vn.state.finalResolution=!0},cr.prototype.selectTile=function(vn,yn){var Rn=vn.contentAvailable&&this._canSelectTile;Rn&&vn.state.selectedFrameNumber<yn.frameNumber&&(vn.state.selectedFrameNumber=yn.frameNumber,this.tileset.selectedTiles.push(vn),this.tileset.needsRefinedTiles.add(vn))},cr.prototype.loadTile=function(vn,yn){vn.state.requestedFrameNumber<yn.frameNumber&&(vn.state.requestedFrameNumber=yn.frameNumber,vn.content&&(vn.content.loadState==="FAILED"&&yn.time-vn.content.loadStateUpdateTime>vn.content.loadfailRetryDelay&&(vn.content.loadState="UNLOADED",vn.content.loadStateUpdateTime=yn.time),vn.content.loadState==="UNLOADED"&&this.tileset.requestedTiles.push(vn))),this.tileset.needsRefinedTiles.add(vn)},cr.prototype.touchTile=function(vn,yn){this.tileset.cache.touchTile(vn),vn.state.touchedFrameNumber=yn.frameNumber},cr.prototype.canTraverse=function(vn,yn){return!vn.state.inRequestVolume||vn.levelOfContent>=yn.maxLevelOfDetail||vn.levelOfContent>=0&&vn.geometricError<=yn.minGeometricError||vn.children.length===0?!1:vn.levelOfContent<=yn.minLevelOfDetail||vn.geometricError>=yn.maxGeometricError||vn.hasTilesetContent?!0:vn.state.screenSpaceError>this.tileset.currentMaxScreenSpaceError},cr.prototype.updateTileVisibility=function(vn,yn){if(vn.updateState(yn),!(!vn.state.visible||!vn.state.inRequestVolume)){var Rn=vn.children.length>0;if(vn.hasTilesetContent&&Rn){var Bn=vn.children[0];this.updateTileVisibility(Bn,yn),vn.state.visible=Bn.state.visible;return}if(this.meetsScreenSpaceErrorEarly(vn,yn)){vn.state.visible=!1;return}var Co=vn.refine==="REPLACE";if(Co&&Rn&&!this.anyChildrenVisible(vn,yn)){vn.state.visible=!1;return}}},cr.prototype.anyChildrenVisible=function(vn,yn){for(var Rn=!1,Bn=vn.children,Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];To.updateState(yn),Rn=Rn||To.state.visible}return Rn},cr.prototype.meetsScreenSpaceErrorEarly=function(vn,yn){var Rn=vn.parent;return!Rn||Rn.refine!=="ADD"||Rn.levelOfContent<yn.minLevelOfDetail||Rn.geometricError>yn.maxGeometricError?!1:Rn.levelOfContent>yn.maxLevelOfDetail||Rn.levelOfContent>=0&&Rn.geometricError<yn.minGeometricError?!0:vn.getScreenSpaceError(yn,vn.state.distanceToCamera,!0)<this.tileset.currentMaxScreenSpaceError},cr.prototype.sortTilesByDistanceToCamera=function(vn){vn.sort(function(yn,Rn){return Rn.state.distanceToCamera===0&&yn.state.distanceToCamera===0?Rn.state.centerZDepth-yn.state.centerZDepth:Rn.state.distanceToCamera-yn.state.distanceToCamera})},cr.prototype.loadAllTiles=function(vn,yn){var Rn=this._loadAllTilesTraversalStack;for(Rn.push(vn);Rn.length>0;){var Bn=Rn.pop();Bn.content&&Bn.content.loadState==="UNLOADED"&&Bn.state.requestedFrameNumber<yn.frameNumber&&this.tileset.requestedTiles.push(Bn),this.touchTile(Bn,yn);for(var Co=0,Po=Bn.children;Co<Po.length;Co++){var To=Po[Co];Rn.push(To)}}},cr}(),Rd=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,yn)||this;return Rn.tileset=yn,Rn._traversalStack=new hn,Rn._emptyTraversalStack=new hn,Rn}return vn.prototype.traverse=function(yn,Rn,Bn){Bn===void 0&&(Bn=[]),cr.prototype.traverse.call(this,yn,Rn,Bn);for(var Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];this._traversalStack.reset(),this._emptyTraversalStack.reset(),To.camera.refine&&(this._canSelectTile=To.camera.visible,this.updateTile(yn,To),this.executeTraversal(yn,To))}this._traversalStack.reset(),this._emptyTraversalStack.reset(),Rn.camera.refine&&(this._canSelectTile=Rn.camera.visible,this.updateTile(yn,Rn),this.executeTraversal(yn,Rn)),this.tileset.loadAll&&this.loadAllTiles(yn,Rn)},vn.prototype.reset=function(){cr.prototype.reset.call(this),this._traversalStack.reset(),this._emptyTraversalStack.reset()},vn.prototype.executeTraversal=function(yn,Rn){var Bn=this._traversalStack;for(yn.state.visible&&yn.state.inRequestVolume&&Bn.push(yn);Bn.length>0;){var Co=Bn.pop(),Po=Co.parent,To=!Po||Po.state.shouldRefine,Io=!1;this.canTraverse(Co,Rn)&&(Io=this.updateAndPushChildren(Co,Rn,Bn)&&To);var $l=!Io&&To;Co.hasRenderContent?Co.refine==="ADD"?(this.loadTile(Co,Rn),this.selectDesiredTile(Co,Rn)):Co.refine==="REPLACE"&&(this.loadTile(Co,Rn),$l&&this.selectDesiredTile(Co,Rn)):(this.loadTile(Co,Rn),$l&&this.selectDesiredTile(Co,Rn)),this.touchTile(Co,Rn),Co.state.shouldRefine=Io}},vn.prototype.updateAndPushChildren=function(yn,Rn,Bn){for(var Co=yn.children,Po=0,To=Co;Po<To.length;Po++){var Io=To[Po];this.updateTile(Io,Rn)}this.sortTilesByDistanceToCamera(Co);for(var $l=yn.refine==="REPLACE"&&yn.hasRenderContent,Wl=!1,Xl=!0,Yl=0,Zl=Co;Yl<Zl.length;Yl++){var Io=Zl[Yl];if(Io.levelOfContent<=Rn.minLevelOfDetail||Io.geometricError>=Rn.maxGeometricError||Io.state.visible&&Io.state.inRequestVolume?(Bn.find(Io)&&Bn.delete(Io),Bn.push(Io),Wl===!1&&(Wl=!0)):($l||this.tileset.loadSiblings)&&(this.loadTile(Io,Rn),this.touchTile(Io,Rn)),$l){var ey=void 0;Io.state.inRequestVolume?Io.hasRenderContent?ey=Io.contentAvailable:ey=this.executeEmptyTraversal(Io,Rn):ey=!1,Xl=Xl&&ey}}return Wl||(Xl=!1),Xl},vn.prototype.selectDesiredTile=function(yn,Rn){yn.contentAvailable&&cr.prototype.selectTile.call(this,yn,Rn)},vn.prototype.executeEmptyTraversal=function(yn,Rn){var Bn=!0,Co=this._emptyTraversalStack;for(Co.push(yn);Co.length>0&&Bn;){var Po=Co.pop(),To=!Po.hasRenderContent&&this.canTraverse(Po,Rn);if(!To&&!Po.contentAvailable&&(Bn=!1),this.updateTile(Po,Rn),Po.state.visible||(this.loadTile(Po,Rn),this.touchTile(Po,Rn)),To)for(var Io=Po.children,$l=0,Wl=Io;$l<Wl.length;$l++){var Xl=Wl[$l];Co.find(Xl)&&Co.delete(Xl),Co.push(Xl)}}return Bn},vn}(ao),Bd=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,yn)||this;return Rn.tileset=yn,Rn.baseScreenSpaceError=1024,Rn.skipScreenSpaceErrorFactor=16,Rn.skipLevels=1,Rn._traversalStack=new hn,Rn._descendantTraversalStack=new hn,Rn._selectionTraversalStack=new hn,Rn._selectionTraversalancestorStack=new hn,Rn}return vn.prototype.traverse=function(yn,Rn,Bn){Bn===void 0&&(Bn=[]),cr.prototype.traverse.call(this,yn,Rn,Bn);for(var Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];this._traversalStack.reset(),To.camera.refine&&(this._canSelectTile=To.camera.visible,this.updateTile(yn,To),this.executeTraversal(yn,To),this.traverseAndSelect(yn,To))}this.tileset.hasMixedContent=!1,this._traversalStack.reset(),this._descendantTraversalStack.reset(),this._selectionTraversalStack.reset(),this._selectionTraversalancestorStack.reset(),Rn.camera.refine&&(this._canSelectTile=Rn.camera.visible,this.updateTile(yn,Rn),this.executeTraversal(yn,Rn),this.traverseAndSelect(yn,Rn)),this.tileset.loadAll&&this.loadAllTiles(yn,Rn)},vn.prototype.reset=function(){cr.prototype.reset.call(this),this._traversalStack.reset(),this._descendantTraversalStack.reset(),this._selectionTraversalStack.reset(),this._selectionTraversalancestorStack.reset()},vn.prototype.executeTraversal=function(yn,Rn){var Bn=this._traversalStack;for(yn.state.visible&&yn.state.inRequestVolume&&Bn.push(yn);Bn.length>0;){var Co=Bn.pop();this.updateTileAncestorContentLinks(Co,Rn);var Po=Co.parent,To=!Po||Po.state.shouldRefine,Io=!1;this.canTraverse(Co,Rn)&&(Io=this.updateAndPushChildren(Co,Rn,Bn)&&To);var $l=!Io&&To;Co.hasRenderContent?Co.refine==="ADD"?(this.loadTile(Co,Rn),this.selectDesiredTile(Co,Rn)):Co.refine==="REPLACE"&&(this.inBaseTraversal(Co,this.baseScreenSpaceError)?(this.loadTile(Co,Rn),$l&&this.selectDesiredTile(Co,Rn)):$l?(this.loadTile(Co,Rn),this.selectDesiredTile(Co,Rn)):this.reachedSkippingThreshold(Co)&&this.loadTile(Co,Rn)):(this.loadTile(Co,Rn),$l&&this.selectDesiredTile(Co,Rn)),this.touchTile(Co,Rn),Co.state.shouldRefine=Io}},vn.prototype.updateAndPushChildren=function(yn,Rn,Bn){for(var Co=yn.children,Po=0,To=Co;Po<To.length;Po++){var Io=To[Po];this.updateTile(Io,Rn)}this.sortTilesByDistanceToCamera(Co);for(var $l=!1,Wl=0,Xl=Co;Wl<Xl.length;Wl++){var Io=Xl[Wl];Io.levelOfContent<=Rn.minLevelOfDetail||Io.geometricError>=Rn.maxGeometricError||Io.state.visible&&Io.state.inRequestVolume?(Bn.push(Io),$l===!1&&($l=!0)):this.tileset.loadSiblings&&(this.loadTile(Io,Rn),this.touchTile(Io,Rn))}return $l},vn.prototype.selectDesiredTile=function(yn,Rn){var Bn=yn.contentAvailable?yn:yn.state.ancestorWithContentAvailable;Bn&&(Bn.state.shouldSelect=!0),yn.contentAvailable||this.selectDescendants(yn,Rn)},vn.prototype.selectDescendants=function(yn,Rn){var Bn=this._descendantTraversalStack;for(Bn.push(yn);Bn.length>0;)for(var Co=Bn.pop(),Po=Co.children,To=0,Io=Po;To<Io.length;To++){var $l=Io[To];$l.state.visible&&($l.contentAvailable?(this.updateTile($l,Rn),this.touchTile($l,Rn),this.selectTile($l,Rn)):Bn.push($l))}},vn.prototype.reachedSkippingThreshold=function(yn){var Rn=yn.state.ancestorWithContent,Bn=Rn!==null&&yn.state.screenSpaceError<Rn.state.screenSpaceError/this.skipScreenSpaceErrorFactor&&yn.levelOfContent>Rn.levelOfContent+this.skipLevels;return Bn},vn.prototype.updateTileAncestorContentLinks=function(yn,Rn){yn.state.ancestorWithContent=null,yn.state.ancestorWithContentAvailable=null;var Bn=yn.parent;if(Bn){var Co=!(Bn.hasRenderContent&&Bn.hasUnloadedContent)||Bn.state.requestedFrameNumber===Rn.frameNumber;yn.state.ancestorWithContent=Co?Bn:Bn.state.ancestorWithContent,yn.state.ancestorWithContentAvailable=Bn.contentAvailable?Bn:Bn.state.ancestorWithContentAvailable}},vn.prototype.inBaseTraversal=function(yn,Rn){return yn.state.ancestorWithContent?yn.parent&&yn.state.screenSpaceError===0?yn.parent.state.screenSpaceError>Rn:yn.state.screenSpaceError>Rn:!0},vn.prototype.traverseAndSelect=function(yn,Rn){var Bn=this._selectionTraversalStack,Co=this._selectionTraversalancestorStack,Po;for(Bn.push(yn);Bn.length>0||Co.length>0;){if(Co.length>0){var To=Co.peek();if(To.state.stackLength===Bn.length){Co.pop(),To!==Po&&(To.state.finalResolution=!1),this.selectTile(To,Rn);continue}}var Io=Bn.pop();if(Io){var $l=this.canTraverse(Io,Rn);if(Io.state.shouldSelect)if(Io.refine==="ADD")this.selectTile(Io,Rn);else{if(Io.state.selectionDepth=Co.length,Io.state.selectionDepth>0&&(Io.tileset.hasMixedContent=!0),Po=Io,!$l){this.selectTile(Io,Rn);continue}Co.push(Io),Io.state.stackLength=Bn.length}if($l)for(var Wl=0,Xl=Io.children;Wl<Xl.length;Wl++){var Yl=Xl[Wl];Yl.state.visible&&Bn.push(Yl)}}}},vn}(ao),Fd=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,yn)||this;return Rn.tileset=yn,Rn._traversalStack=new hn,Rn}return vn.prototype.canTraverse=function(yn,Rn){return!(!yn.state.inRequestVolume||yn.levelOfContent>=Rn.maxLevelOfDetail||yn.levelOfContent>=0&&yn.geometricError<=Rn.minGeometricError||yn.children.length===0)},vn.prototype.traverse=function(yn,Rn,Bn){cr.prototype.traverse.call(this,yn,Rn,[]),this._traversalStack.reset(),yn.updateState(Rn);for(var Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];this._traversalStack.reset(),To.camera.refine&&(this._canSelectTile=To.camera.visible,yn.updateState(To),this.executeTraversal(yn,To))}this._traversalStack.reset(),Rn.camera.refine&&(this._canSelectTile=Rn.camera.visible,yn.updateState(Rn),this.executeTraversal(yn,Rn)),this.tileset.loadAll&&this.loadAllTiles(yn,Rn)},vn.prototype.reset=function(){cr.prototype.reset.call(this),this._traversalStack.reset()},vn.prototype.executeTraversal=function(yn,Rn){var Bn=this._traversalStack;for(Bn.push(yn);Bn.length>0;){var Co=Bn.pop(),Po=Co.refine==="ADD",To=Co.refine==="REPLACE",Io=this.canTraverse(Co,Rn);Io&&this.updateAndPushChildren(Co,Rn,Bn),(Po||To&&!Io)&&(this.loadTile(Co,Rn),this.touchTile(Co,Rn),this.selectDesiredTile(Co,Rn))}},vn.prototype.updateAndPushChildren=function(yn,Rn,Bn){for(var Co=yn.children,Po=0;Po<Co.length;++Po){var To=Co[Po];To.updateState(Rn),To.state.visible&&Bn.push(To)}},vn.prototype.selectDesiredTile=function(yn,Rn){yn.contentAvailable&&cr.prototype.selectTile.call(this,yn,Rn)},vn}(ao),Ld=function(){function cr(vn,yn,Rn){this.index=vn,this.name=yn.name,this.visible=!1,this.tileset=Rn,this.transform=new Matrix4,yn.transform&&this.transform.fromArray(yn.transform),this.transform.premultiply(this.tileset.root.transform),this.content={uri:yn.file,byteLength:0,memoryUsage:0,loadState:"UNLOADED",loadStateUpdateTime:Ae$3(),loadfailRetryDelay:0,data:void 0}}return cr}(),kd=new Matrix4,tn=function(){function cr(vn,yn,Rn){var Bn=this,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl;if(this.id=vn,this.transform=new Matrix4,this.transformIsIdentity=!0,this.hasMixedContent=!1,this.url=(Co=Rn.url)!==null&&Co!==void 0?Co:"",this.referer=(Po=Rn.referer)!==null&&Po!==void 0?Po:"",this.asset={version:yn.asset.version,tilesetVersion:yn.asset.tilesetVersion||"",gltfUpAxis:(To=yn.asset.gltfUpAxis)!==null&&To!==void 0?To:"Y",overview:yn.asset.overview,trajectories:($l=(Io=yn.asset.trajectories)===null||Io===void 0?void 0:Io.list)!==null&&$l!==void 0?$l:[],extras:yn.asset.extras},this.rootMeta=(Wl=yn.rootMeta)!==null&&Wl!==void 0?Wl:{},this.pointLength=(Xl=this.rootMeta.numTotalPoints)!==null&&Xl!==void 0?Xl:1/0,this.floorLength=(Yl=this.rootMeta.numFloors)!==null&&Yl!==void 0?Yl:1,this.properties=(Zl=yn.properties)!==null&&Zl!==void 0?Zl:{},this.options=Rn,this.memoryOverflow=cr.DEFAULT_MEMORY_OVERFLOW,this.maxMemoryUsage=cr.DEFAULT_MAX_MEMORY_USAGE,this.memoryAdjustedScreenSpaceError=cr.DEFAULT_MEMORY_ADJUSTED_SCREEN_SPACE_ERROR,this.maxScreenSpaceError=cr.DEFAULT_MAX_SCREEN_SPACE_ERROR,this.skipLevelOfDetail=cr.DEFAULT_SKIP_LEVEL_OF_DETAIL,this.mostDetail=cr.DEFAULT_MOST_DETAIL,this.loadSiblings=cr.DEFAULT_LOAD_SIBLINGS,this.loadAll=cr.DEFAULT_LOAD_ALL,this.maxRequests=cr.DEFAULT_MAX_REQUESTS,this.tileRequestOrder=cr.DEFAULT_REQUEST_ORDER,this.requestedTiles=[],this.selectedTiles=[],this.unloadTiles=[],this.needsRefinedTiles=new Set,this.selectedTrajectories=[],this.normalTraverser=new Rd(this),this.skipTraverser=new Bd(this),this.mostDetailTraverser=new Fd(this),this.cache=new Pd({onTileLoad:function(ry){Bn.cacheMemoryUsageInBytes+=ry.contentMemoryUsage},onTileUnload:function(ry){Bn.cacheMemoryUsageInBytes-=ry.contentMemoryUsage,Bn.unloadTiles.push(ry)}}),this.requestScheduler=new Cd(this,{onTileSkip:function(ry){},onTileLoad:function(ry){var _g;!((_g=ry.content)===null||_g===void 0)&&_g.data&&(Bn.loadedTiles.add(ry),Bn.cache.loadTile(ry)),Bn.options.onTileLoad(ry)},onTileError:function(ry,_g){Bn.options.onTileError(ry,_g)}}),this.frameNumber=0,this.maxLevelOfDetail=0,this.minLevelOfDetail=0,this.minGeometricError=0,this.maxGeometricError=0,this.loadedTiles=new Set,this.cacheMemoryUsageInBytes=0,this.currentMaxScreenSpaceError=this.maxScreenSpaceError,this.root=new Fu("".concat(this.id,".0"),yn.root,this),this.geometricError=yn.geometricError,this.trajectories=[],this.asset.trajectories)for(var ey=0;ey<this.asset.trajectories.length;ey++){var Rm=new Ld(ey,this.asset.trajectories[ey],this);this.trajectories.push(Rm)}}return cr.prototype.adjustScreenSpaceError=function(){if(this.memoryAdjustedScreenSpaceError){var vn=0;this.needsRefinedTiles.forEach(function(Bn){Bn.content&&(vn+=Bn.content.memoryUsage)});var yn=(this.maxMemoryUsage-this.memoryOverflow)*1024*1024,Rn=this.maxMemoryUsage*1024*1024;vn<yn?this.currentMaxScreenSpaceError=Math.max(this.currentMaxScreenSpaceError/1.02,this.maxScreenSpaceError):vn>Rn&&this.selectedTiles.length>0&&(this.currentMaxScreenSpaceError*=1.02)}else this.currentMaxScreenSpaceError=this.maxScreenSpaceError},Object.defineProperty(cr.prototype,"traverser",{get:function(){return this.mostDetail?this.mostDetailTraverser:this.skipLevelOfDetail?this.skipTraverser:this.normalTraverser},enumerable:!1,configurable:!0}),cr.prototype.reset=function(){for(var vn=this,yn=[this.root],Rn;Rn=yn.pop();){for(var Bn=0,Co=Rn.children.length;Bn<Co;Bn++)yn.push(Rn.children[Bn]);this.cache.unloadTile(Rn)}for(var Po=function(){var Wl=To.unloadTiles.pop();Wl&&(To.loadedTiles.delete(Wl),To.cacheMemoryUsageInBytes-=Wl.contentMemoryUsage,To.options.tileUnloader(Wl).catch(function(){}).then(function(){vn.options.onTileUnload&&vn.options.onTileUnload(Wl)}))},To=this;this.unloadTiles.length;)Po();this.cache.reset(),this.traverser.reset(),this.requestScheduler.reset(),this.loadedTiles.clear();for(var Io=function(){var Wl=$l.trajectories.pop();Wl&&$l.options.trajectoryUnloader(Wl).catch(function(){}).then(function(){vn.options.onTrajectoryUnload&&vn.options.onTrajectoryUnload(Wl)})},$l=this;this.trajectories.length;)Io()},cr.prototype.update=function(vn,yn){var Rn=this,Bn;yn===void 0&&(yn=[]),this.frameNumber=vn.frameNumber,this.minLevelOfDetail=vn.minLevelOfDetail,this.maxLevelOfDetail=vn.maxLevelOfDetail,this.minGeometricError=vn.minGeometricError,this.maxGeometricError=vn.maxGeometricError,this.adjustScreenSpaceError(),this.transformIsIdentity=this.transform.equals(kd),this.traverser.traverse(this.root,vn,yn),this.cache.unloadTiles(function(){var Yl=Rn.cacheMemoryUsageInBytes>Rn.maxMemoryUsage*1024*1024;return Yl}),this.requestScheduler.update(this.requestedTiles,this.tileRequestOrder,vn);for(var Co=function(){var Yl=Po.unloadTiles.pop();Yl&&(Po.loadedTiles.delete(Yl),Po.options.tileUnloader(Yl).catch(function(){}).then(function(){Rn.options.onTileUnload&&Rn.options.onTileUnload(Yl)}))},Po=this;this.unloadTiles.length;)Co();this.selectedTrajectories.length=0;for(var To=function(Yl){Yl.visible===!0&&Yl.content.loadState==="READY"&&!((Bn=Yl.content.data)===null||Bn===void 0)&&Bn.object?Io.selectedTrajectories.push(Yl):Yl.visible===!0&&(Yl.content.loadState==="FAILED"&&vn.time-Yl.content.loadStateUpdateTime>Yl.content.loadfailRetryDelay&&(Yl.content.loadState="UNLOADED",Yl.content.loadStateUpdateTime=vn.time),Yl.content.loadState==="UNLOADED"&&Io.options.trajectoryLoader(Yl).then(function(){Rn.options.onTrajectoryLoad(Yl)}).catch(function(Zl){Rn.options.onTrajectoryError(Yl,Zl)}))},Io=this,$l=0,Wl=this.trajectories;$l<Wl.length;$l++){var Xl=Wl[$l];To(Xl)}},cr.DEFAULT_MAX_MEMORY_USAGE=16,cr.DEFAULT_MEMORY_OVERFLOW=4,cr.DEFAULT_MEMORY_ADJUSTED_SCREEN_SPACE_ERROR=!1,cr.DEFAULT_MAX_SCREEN_SPACE_ERROR=4,cr.DEFAULT_SKIP_LEVEL_OF_DETAIL=!1,cr.DEFAULT_MOST_DETAIL=!1,cr.DEFAULT_LOAD_SIBLINGS=!1,cr.DEFAULT_LOAD_ALL=!1,cr.DEFAULT_MAX_REQUESTS=6,cr.DEFAULT_REQUEST_ORDER="SCREEN_SPACE_ERROR",cr}(),Lu=function(){function cr(vn,yn){this.position=vn,this.indices=yn}return cr.prototype.getPositionCount=function(){var vn,yn,Rn=this.indices,Bn=this.position;return Rn?Rn.array.length/((vn=Rn.stride)!==null&&vn!==void 0?vn:1):Bn.array.length/((yn=Bn.stride)!==null&&yn!==void 0?yn:3)},cr.prototype.getPositionByIndex=function(vn,yn){var Rn,Bn,Co,Po,To=this.indices,Io=this.position,$l=vn;if(To){var Wl=To.array,Xl=(Rn=To.stride)!==null&&Rn!==void 0?Rn:1,Yl=(Bn=To.offset)!==null&&Bn!==void 0?Bn:0;$l=Wl[vn*Xl+Yl]}var Zl=Io.array,ey=(Co=Io.stride)!==null&&Co!==void 0?Co:3,Rm=(Po=Io.offset)!==null&&Po!==void 0?Po:0;return $l=$l*ey+Rm,yn.x=Zl[$l],yn.y=Zl[$l+1],yn.z=Zl[$l+2],yn},cr.prototype.createTree=function(vn,yn,Rn){throw new Error("not implemented")},cr.prototype.trianglesInSphere=function(vn,yn){throw new Error("not implemented")},cr.prototype.intersectRay=function(vn,yn,Rn,Bn){throw new Error("not implemented")},cr}(),jn=function(){function cr(vn,yn,Rn,Bn,Co){this.id=vn,this.extents=yn,this.startIndex=Rn,this.endIndex=Bn,this.deepth=Co}return cr}(),Gr$1=6*4+4+4+2+2;function ku(cr,vn){for(var yn=new ArrayBuffer(vn*Gr$1),Rn=new Float32Array(yn),Bn=new Uint32Array(yn),Co=new Uint16Array(yn),Po=[cr],To,Io;To=Po.pop();)Io=To.id*Gr$1/4,Rn[Io]=To.extents[0],Rn[Io+1]=To.extents[1],Rn[Io+2]=To.extents[2],Rn[Io+3]=To.extents[3],Rn[Io+4]=To.extents[4],Rn[Io+5]=To.extents[5],Bn[Io+6]=To.startIndex,Bn[Io+7]=To.endIndex,Io=To.id*Gr$1/2,To.node0&&(Co[Io+16]=To.node0.id,Po.push(To.node0)),To.node1&&(Co[Io+17]=To.node1.id,Po.push(To.node1));return yn}function Ou(cr,vn,yn,Rn,Bn,Co,Po,To,Io){Io===void 0&&(Io=0),yn=yn-Io,Rn=Rn-Io,Bn=Bn-Io,Co=Co+Io,Po=Po+Io,To=To+Io;var $l=0,Wl=0,Xl=0,Yl=0,Zl=0,ey=0;return vn.x>=0?($l=(yn-cr.x)*vn.x,Wl=(Co-cr.x)*vn.x):($l=(Co-cr.x)*vn.x,Wl=(yn-cr.x)*vn.x),vn.y>=0?(Xl=(Rn-cr.y)*vn.y,Yl=(Po-cr.y)*vn.y):(Xl=(Po-cr.y)*vn.y,Yl=(Rn-cr.y)*vn.y),!($l>Yl||Xl>Wl||(Xl>$l&&($l=Xl),Yl<Wl&&(Wl=Yl),vn.z>=0?(Zl=(Bn-cr.z)*vn.z,ey=(To-cr.z)*vn.z):(Zl=(To-cr.z)*vn.z,ey=(Bn-cr.z)*vn.z),$l>ey||Zl>Wl)||(Zl>$l&&($l=Zl),ey<Wl&&(Wl=ey),Wl<0))}var Pn=function(){function cr(vn,yn,Rn){this.x=vn,this.y=yn,this.z=Rn}return cr.prototype.copy=function(vn){return this.x=vn.x,this.y=vn.y,this.z=vn.z,this},cr.prototype.set=function(vn,yn,Rn){return this.x=vn,this.y=yn,this.z=Rn,this},cr.prototype.fromArray=function(vn,yn){return yn===void 0&&(yn=0),this.x=vn[yn],this.y=vn[yn+1],this.z=vn[yn+2],this},cr.prototype.toArray=function(vn,yn){return vn===void 0&&(vn=[]),yn===void 0&&(yn=0),vn[yn]=this.x,vn[yn+1]=this.y,vn[yn+2]=this.z,vn},cr.prototype.add=function(vn){return this.x+=vn.x,this.y+=vn.y,this.z+=vn.z,this},cr.prototype.multiplyScalar=function(vn){return this.x*=vn,this.y*=vn,this.z*=vn,this},cr.prototype.subVectors=function(vn,yn){return this.x=vn.x-yn.x,this.y=vn.y-yn.y,this.z=vn.z-yn.z,this},cr.prototype.addScaledVector=function(vn,yn){return this.x+=vn.x*yn,this.y+=vn.y*yn,this.z+=vn.z*yn,this},cr.prototype.dot=function(vn){return this.x*vn.x+this.y*vn.y+this.z*vn.z},cr.prototype.cross=function(vn){var yn=this.x,Rn=this.y,Bn=this.z;return this.x=Rn*vn.z-Bn*vn.y,this.y=Bn*vn.x-yn*vn.z,this.z=yn*vn.y-Rn*vn.x,this},cr.prototype.crossVectors=function(vn,yn){var Rn=vn.x,Bn=vn.y,Co=vn.z,Po=yn.x,To=yn.y,Io=yn.z;return this.x=Bn*Io-Co*To,this.y=Co*Po-Rn*Io,this.z=Rn*To-Bn*Po,this},cr.prototype.distanceTo=function(vn){return Math.sqrt(this.distanceToSquared(vn))},cr.prototype.distanceToSquared=function(vn){var yn=this.x-vn.x,Rn=this.y-vn.y,Bn=this.z-vn.z;return yn*yn+Rn*Rn+Bn*Bn},cr.prototype.clone=function(){return new cr(this.x,this.y,this.z)},cr}(),zu=function(){function cr(vn,yn,Rn){this.triangle=vn,this.intersectionPoint=yn,this.index=Rn}return cr}(),Zo=1e-6,Xe$1=new Pn(0,0,0),rn=new Pn(0,0,0),nn=new Pn(0,0,0),an=new Pn(0,0,0),Vu=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.createTree=function(yn,Rn,Bn){Rn=Math.min(Rn,16);var Co=this.getPositionCount()/3,Po=Co>65535?new Uint32Array(Co):new Uint16Array(Co),To=new Float32Array(Co*6),Io=[],$l=0,Wl=-1;if(Bn)for(var Xl=0,Yl=0,Zl=0,ey=void 0,Rm=void 0,ry=void 0,_g=void 0,ty=void 0,ny=void 0,iy=void 0;Xl<Co;Xl+=1,Yl+=3,Zl+=6)Po[Xl]=Xl,this.getPositionByIndex(Yl,rn),this.getPositionByIndex(Yl+1,nn),this.getPositionByIndex(Yl+2,an),ey=_g=rn.x,iy=nn.x,iy<ey&&(ey=iy),iy>_g&&(_g=iy),iy=an.x,iy<ey&&(ey=iy),iy>_g&&(_g=iy),Rm=ty=rn.y,iy=nn.y,iy<Rm&&(Rm=iy),iy>ty&&(ty=iy),iy=an.y,iy<Rm&&(Rm=iy),iy>ty&&(ty=iy),ry=ny=rn.z,iy=nn.z,iy<ry&&(ry=iy),iy>ny&&(ny=iy),iy=an.z,iy<ry&&(ry=iy),iy>ny&&(ny=iy),To[Zl]=ey,To[Zl+1]=Rm,To[Zl+2]=ry,To[Zl+3]=_g,To[Zl+4]=ty,To[Zl+5]=ny;else{for(var oy=1/0,ay=1/0,uy=1/0,hy=-1/0,my=-1/0,ly=-1/0,Xl=0,Yl=0,Zl=0,ey=void 0,Rm=void 0,ry=void 0,_g=void 0,ty=void 0,ny=void 0,iy=void 0;Xl<Co;Xl+=1,Yl+=3,Zl+=6)Po[Xl]=Xl,this.getPositionByIndex(Yl,rn),this.getPositionByIndex(Yl+1,nn),this.getPositionByIndex(Yl+2,an),ey=_g=rn.x,iy=nn.x,iy<ey&&(ey=iy),iy>_g&&(_g=iy),iy=an.x,iy<ey&&(ey=iy),iy>_g&&(_g=iy),Rm=ty=rn.y,iy=nn.y,iy<Rm&&(Rm=iy),iy>ty&&(ty=iy),iy=an.y,iy<Rm&&(Rm=iy),iy>ty&&(ty=iy),ry=ny=rn.z,iy=nn.z,iy<ry&&(ry=iy),iy>ny&&(ny=iy),iy=an.z,iy<ry&&(ry=iy),iy>ny&&(ny=iy),To[Zl]=ey,To[Zl+1]=Rm,To[Zl+2]=ry,To[Zl+3]=_g,To[Zl+4]=ty,To[Zl+5]=ny,ey<oy&&(oy=ey),_g>hy&&(hy=_g),Rm<ay&&(ay=Rm),ty>my&&(my=ty),ry<uy&&(uy=ry),ny>ly&&(ly=ny);Bn=[oy,ay,uy,hy,my,ly]}var sy=new jn(++Wl,Bn,0,Co,0);Io[$l++]=sy;var cy=[],fy=[0,1,2],vy=function(Ay,gy){return cy[gy]-cy[Ay]};function dy(Ay){var gy=Ay.startIndex,wy=Ay.endIndex,Cy=Ay.extents;cy[0]=Cy[3]-Cy[0],cy[1]=Cy[4]-Cy[1],cy[2]=Cy[5]-Cy[2],fy.sort(vy);for(var My=0;My<3;My++){for(var Py=fy[My],Dy=Cy[Py]+Cy[Py+3],qy=gy,Xy=wy-1,$y=-1,xy=void 0;qy<=Xy;)$y===-1?(xy=Po[qy],To[xy*6+Py]+To[xy*6+Py+3]<Dy?qy++:$y=xy):(xy=Po[Xy],To[xy*6+Py]+To[xy*6+Py+3]>=Dy||(Po[qy]=xy,Po[Xy]=$y,$y=-1,qy++),Xy--);if(qy>gy&&qy<wy){var Ry=new jn(++Wl,Yo(Po,To,gy,qy,Zo),gy,qy,Ay.deepth+1);Ry.deepth<Rn&&Ry.endIndex-Ry.startIndex>yn&&(Io[$l++]=Ry);var Ly=new jn(++Wl,Yo(Po,To,qy,wy,Zo),qy,wy,Ay.deepth+1);Ly.deepth<Rn&&Ly.endIndex-Ly.startIndex>yn&&(Io[$l++]=Ly),Ay.node0=Ry,Ay.node1=Ly,Ay.startIndex=0,Ay.endIndex=0;break}}}for(;$l;)dy(Io[--$l]);return this.offsetArray=Po,this.rootNodePacked=ku(sy,Wl+1),Io.length=0,this},vn.prototype.trianglesInSphere=function(yn,Rn){for(var Bn=this.offsetArray,Co=this.rootNodePacked,Po=new Float32Array(Co),To=new Uint32Array(Co),Io=new Uint16Array(Co),$l=[0],Wl=[],Xl,Yl,Zl,ey;(Xl=$l.pop())!==void 0;){ey=Xl*Gr$1/4;var Rm=Ha(yn.x,Po[ey],Po[ey+3])-yn.x,ry=Ha(yn.y,Po[ey+1],Po[ey+4])-yn.y,_g=Ha(yn.z,Po[ey+2],Po[ey+5])-yn.z;if(Rm*Rm+ry*ry+_g*_g<=Rn*Rn){for(var ty=To[ey+6];ty<To[ey+7];ty++)Wl.push(Bn[ty]);ey=Xl*Gr$1/2,Yl=Io[ey+16],Zl=Io[ey+17],Yl&&$l.push(Yl),Zl&&$l.push(Zl)}}for(var ny=Wl.length,iy=new Float32Array(ny*9),ty=0;ty<ny;ty++){var oy=Wl[ty];this.getPositionByIndex(oy,Xe$1),iy[ty*9]=Xe$1.x,iy[ty*9+1]=Xe$1.y,iy[ty*9+2]=Xe$1.z,this.getPositionByIndex(oy+1,Xe$1),iy[ty*9+3]=Xe$1.x,iy[ty*9+4]=Xe$1.y,iy[ty*9+5]=Xe$1.z,this.getPositionByIndex(oy+2,Xe$1),iy[ty*9+6]=Xe$1.x,iy[ty*9+7]=Xe$1.y,iy[ty*9+8]=Xe$1.z}return iy},vn.prototype.intersectRay=function(yn,Rn,Bn,Co){for(var Po=this.offsetArray,To=this.rootNodePacked,Io=new Float32Array(To),$l=new Uint32Array(To),Wl=new Uint16Array(To),Xl=new Pn(1/Rn.x,1/Rn.y,1/Rn.z),Yl=[0],Zl,ey,Rm,ry;(Zl=Yl.pop())!==void 0;)if(ry=Zl*Gr$1/4,Ou(yn,Xl,Io[ry],Io[ry+1],Io[ry+2],Io[ry+3],Io[ry+4],Io[ry+5])){for(var _g=$l[ry+6],ty=$l[ry+7],ny=void 0,iy=void 0,oy=void 0,ay=yn.x,uy=yn.y,hy=yn.z,my=Rn.x,ly=Rn.y,sy=Rn.z,cy=void 0,fy=void 0,vy=void 0,dy=void 0,Ay=void 0,gy=void 0,wy=void 0,Cy=void 0,My=void 0,Py=void 0,Dy=void 0,qy=void 0,Xy=void 0,$y=void 0,xy=void 0,Ry=void 0,Ly=void 0,ky=void 0,Ey=void 0,Iy=void 0,zy=void 0,Uy=void 0,Qy=void 0,Gy=void 0,Zy=void 0,Ty=void 0,Vy=void 0;_g<ty;_g++){if(ny=Po[_g],iy=ny*3,this.getPositionByIndex(iy,Xe$1),cy=Xe$1.x,fy=Xe$1.y,vy=Xe$1.z,this.getPositionByIndex(iy+1,Xe$1),dy=Xe$1.x,Ay=Xe$1.y,gy=Xe$1.z,this.getPositionByIndex(iy+2,Xe$1),wy=Xe$1.x,Cy=Xe$1.y,My=Xe$1.z,Py=dy-cy,Dy=Ay-fy,qy=gy-vy,Xy=wy-cy,$y=Cy-fy,xy=My-vy,Ry=Dy*xy-qy*$y,Ly=qy*Xy-Py*xy,ky=Py*$y-Dy*Xy,Qy=my*Ry+ly*Ly+sy*ky,Qy>0)Uy=1;else if(Qy<0)Uy=-1,Qy=-Qy;else continue;Ey=ay-cy,Iy=uy-fy,zy=hy-vy,Gy=Uy*(my*(Iy*xy-zy*$y)+ly*(zy*Xy-Ey*xy)+sy*(Ey*$y-Iy*Xy)),!(Gy<0)&&(Zy=Uy*(my*(Dy*zy-qy*Iy)+ly*(qy*Ey-Py*zy)+sy*(Py*Iy-Dy*Ey)),!(Zy<0)&&(Gy+Zy>Qy||(Ty=-Uy*(Ey*Ry+Iy*Ly+zy*ky),!(Ty<0)&&(Vy=Ty/Qy,Co.push(new zu([cy,fy,vy,dy,Ay,gy,wy,Cy,My],[ay+my*Vy,uy+ly*Vy,hy+sy*Vy],ny))))))}ry=Zl*Gr$1/2,ey=Wl[ry+16],Rm=Wl[ry+17],ey&&Yl.push(ey),Rm&&Yl.push(Rm)}return Co},vn}(Lu);function Ha(cr,vn,yn){return cr<vn?vn:cr>yn?yn:cr}function Yo(cr,vn,yn,Rn,Bn){if(yn>=Rn)return[0,0,0,0,0,0];for(var Co=1/0,Po=1/0,To=1/0,Io=-1/0,$l=-1/0,Wl=-1/0,Xl=yn,Yl=void 0,Zl=void 0;Xl<Rn;Xl++)Yl=cr[Xl]*6,Zl=vn[Yl],Zl<Co&&(Co=Zl),Zl=vn[Yl+1],Zl<Po&&(Po=Zl),Zl=vn[Yl+2],Zl<To&&(To=Zl),Zl=vn[Yl+3],Zl>Io&&(Io=Zl),Zl=vn[Yl+4],Zl>$l&&($l=Zl),Zl=vn[Yl+5],Zl>Wl&&(Wl=Zl);return[Co-Bn,Po-Bn,To-Bn,Io+Bn,$l+Bn,Wl+Bn]}var $o=1e-6,Od=["x","y","z"],St$2=new Pn(0,0,0),Du=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.createTree=function(yn,Rn,Bn){Rn=Math.min(Rn,16);var Co=this.getPositionByIndex.bind(this),Po=this.getPositionCount(),To=Po>65535?new Uint32Array(Po):new Uint16Array(Po),Io=[],$l=0,Wl=-1;if(Bn)for(var Xl=0;Xl<Po;Xl+=1)To[Xl]=Xl;else{Co(0,St$2);for(var Yl=St$2.x,Zl=St$2.y,ey=St$2.z,Rm=Yl,ry=Zl,_g=ey,Xl=0,ty=void 0,ny=void 0,iy=void 0;Xl<Po;Xl+=1)To[Xl]=Xl,Co(Xl,St$2),ty=St$2.x,ny=St$2.y,iy=St$2.z,ty<Yl?Yl=ty:ty>Rm&&(Rm=ty),ny<Zl?Zl=ny:ny>ry&&(ry=ny),iy<ey?ey=iy:iy>_g&&(_g=iy);Bn=[Yl,Zl,ey,Rm,ry,_g]}var oy=new jn(++Wl,Bn,0,Po,0);Io[$l++]=oy;var ay=[],uy=[0,1,2],hy=function(ly,sy){return ay[sy]-ay[ly]};function my(ly){var sy=ly.startIndex,cy=ly.endIndex,fy=ly.extents;ay[0]=fy[3]-fy[0],ay[1]=fy[4]-fy[1],ay[2]=fy[5]-fy[2];for(var vy=uy.sort(hy)[0],dy=Od[vy],Ay=(fy[vy]+fy[vy+3])/2,gy=sy,wy=cy-1,Cy=-1,My;gy<=wy;)Cy===-1?(My=To[gy],Co(My,St$2),St$2[dy]<Ay?gy++:Cy=My):(My=To[wy],Co(My,St$2),St$2[dy]>=Ay||(To[gy]=My,To[wy]=Cy,Cy=-1,gy++),wy--);if(gy>sy){var Py=fy.slice();Py[vy+3]=Ay+$o;var Dy=new jn(++Wl,Py,sy,gy,ly.deepth+1);Dy.deepth<Rn&&Dy.endIndex-Dy.startIndex>yn&&(Io[$l++]=Dy),ly.node0=Dy}if(cy>gy){var qy=fy.slice();qy[vy]=Ay-$o;var Xy=new jn(++Wl,qy,gy,cy,ly.deepth+1);Xy.deepth<Rn&&Xy.endIndex-Xy.startIndex>yn&&(Io[$l++]=Xy),ly.node1=Xy}ly.startIndex=0,ly.endIndex=0}for(;$l;)my(Io[--$l]);return this.offsetArray=To,this.rootNodePacked=ku(oy,Wl+1),Io.length=0,this},vn.prototype.intersectRay=function(yn,Rn,Bn,Co){for(var Po=this.offsetArray,To=this.rootNodePacked,Io=new Float32Array(To),$l=new Uint32Array(To),Wl=new Uint16Array(To),Xl=Bn*Bn,Yl=new Pn(1/Rn.x,1/Rn.y,1/Rn.z),Zl=[0],ey,Rm,ry,_g;(ey=Zl.pop())!==void 0;)if(_g=ey*Gr$1/4,Ou(yn,Yl,Io[_g],Io[_g+1],Io[_g+2],Io[_g+3],Io[_g+4],Io[_g+5],Bn)){for(var ty=$l[_g+6],ny=$l[_g+7],iy=void 0,oy=void 0,ay=void 0,uy=void 0,hy=void 0,my=void 0,ly=void 0,sy=void 0,cy=void 0,fy=void 0,vy=void 0,dy=void 0;ty<ny;ty++)iy=Po[ty],this.getPositionByIndex(iy,St$2),oy=St$2.x,ay=St$2.y,uy=St$2.z,hy=yn.x,my=yn.y,ly=yn.z,sy=Rn.x,cy=Rn.y,fy=Rn.z,vy=sy*(oy-hy)+cy*(ay-my)+fy*(uy-ly),vy>0&&(hy+=sy*vy,my+=cy*vy,ly+=fy*vy),sy=oy-hy,cy=ay-my,fy=uy-ly,vy=sy*sy+cy*cy+fy*fy,vy<=Xl&&Co.push(new zu([oy,ay,uy,oy,ay,uy,oy,ay,uy],[hy,my,ly],iy));_g=ey*Gr$1/2,Rm=Wl[_g+16],ry=Wl[_g+17],Rm&&Zl.push(Rm),ry&&Zl.push(ry)}return Co},vn}(Lu);const Nu="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlcj1mdW5jdGlvbihlLHIpe3JldHVybiBlcj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxvKXt0Ll9fcHJvdG9fXz1vfXx8ZnVuY3Rpb24odCxvKXtmb3IodmFyIGYgaW4gbylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobyxmKSYmKHRbZl09b1tmXSl9LGVyKGUscil9O2Z1bmN0aW9uIGhyKGUscil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiImJnIhPT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcocikrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZXIoZSxyKTtmdW5jdGlvbiB0KCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWUucHJvdG90eXBlPXI9PT1udWxsP09iamVjdC5jcmVhdGUocik6KHQucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyB0KX10eXBlb2YgU3VwcHJlc3NlZEVycm9yPT0iZnVuY3Rpb24iJiZTdXBwcmVzc2VkRXJyb3I7dmFyIGRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLHQpe3RoaXMucG9zaXRpb249cix0aGlzLmluZGljZXM9dH1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0UG9zaXRpb25Db3VudD1mdW5jdGlvbigpe3ZhciByLHQsbz10aGlzLmluZGljZXMsZj10aGlzLnBvc2l0aW9uO3JldHVybiBvP28uYXJyYXkubGVuZ3RoLygocj1vLnN0cmlkZSkhPT1udWxsJiZyIT09dm9pZCAwP3I6MSk6Zi5hcnJheS5sZW5ndGgvKCh0PWYuc3RyaWRlKSE9PW51bGwmJnQhPT12b2lkIDA/dDozKX0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb25CeUluZGV4PWZ1bmN0aW9uKHIsdCl7dmFyIG8sZixkLHYsbj10aGlzLmluZGljZXMscz10aGlzLnBvc2l0aW9uLHU9cjtpZihuKXt2YXIgdz1uLmFycmF5LHk9KG89bi5zdHJpZGUpIT09bnVsbCYmbyE9PXZvaWQgMD9vOjEscD0oZj1uLm9mZnNldCkhPT1udWxsJiZmIT09dm9pZCAwP2Y6MDt1PXdbcip5K3BdfXZhciBhPXMuYXJyYXksaD0oZD1zLnN0cmlkZSkhPT1udWxsJiZkIT09dm9pZCAwP2Q6MyxBPSh2PXMub2Zmc2V0KSE9PW51bGwmJnYhPT12b2lkIDA/djowO3JldHVybiB1PXUqaCtBLHQueD1hW3VdLHQueT1hW3UrMV0sdC56PWFbdSsyXSx0fSxlLnByb3RvdHlwZS5jcmVhdGVUcmVlPWZ1bmN0aW9uKHIsdCxvKXt0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfSxlLnByb3RvdHlwZS50cmlhbmdsZXNJblNwaGVyZT1mdW5jdGlvbihyLHQpe3Rocm93IG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9LGUucHJvdG90eXBlLmludGVyc2VjdFJheT1mdW5jdGlvbihyLHQsbyxmKXt0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfSxlfSgpLG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHIsdCxvLGYsZCl7dGhpcy5pZD1yLHRoaXMuZXh0ZW50cz10LHRoaXMuc3RhcnRJbmRleD1vLHRoaXMuZW5kSW5kZXg9Zix0aGlzLmRlZXB0aD1kfXJldHVybiBlfSgpLFE9Nio0KzQrNCsyKzI7ZnVuY3Rpb24geXIoZSxyKXtmb3IodmFyIHQ9bmV3IEFycmF5QnVmZmVyKHIqUSksbz1uZXcgRmxvYXQzMkFycmF5KHQpLGY9bmV3IFVpbnQzMkFycmF5KHQpLGQ9bmV3IFVpbnQxNkFycmF5KHQpLHY9W2VdLG4scztuPXYucG9wKCk7KXM9bi5pZCpRLzQsb1tzXT1uLmV4dGVudHNbMF0sb1tzKzFdPW4uZXh0ZW50c1sxXSxvW3MrMl09bi5leHRlbnRzWzJdLG9bcyszXT1uLmV4dGVudHNbM10sb1tzKzRdPW4uZXh0ZW50c1s0XSxvW3MrNV09bi5leHRlbnRzWzVdLGZbcys2XT1uLnN0YXJ0SW5kZXgsZltzKzddPW4uZW5kSW5kZXgscz1uLmlkKlEvMixuLm5vZGUwJiYoZFtzKzE2XT1uLm5vZGUwLmlkLHYucHVzaChuLm5vZGUwKSksbi5ub2RlMSYmKGRbcysxN109bi5ub2RlMS5pZCx2LnB1c2gobi5ub2RlMSkpO3JldHVybiB0fWZ1bmN0aW9uIGNyKGUscix0LG8sZixkLHYsbixzKXtzPT09dm9pZCAwJiYocz0wKSx0PXQtcyxvPW8tcyxmPWYtcyxkPWQrcyx2PXYrcyxuPW4rczt2YXIgdT0wLHc9MCx5PTAscD0wLGE9MCxoPTA7cmV0dXJuIHIueD49MD8odT0odC1lLngpKnIueCx3PShkLWUueCkqci54KToodT0oZC1lLngpKnIueCx3PSh0LWUueCkqci54KSxyLnk+PTA/KHk9KG8tZS55KSpyLnkscD0odi1lLnkpKnIueSk6KHk9KHYtZS55KSpyLnkscD0oby1lLnkpKnIueSksISh1PnB8fHk+d3x8KHk+dSYmKHU9eSkscDx3JiYodz1wKSxyLno+PTA/KGE9KGYtZS56KSpyLnosaD0obi1lLnopKnIueik6KGE9KG4tZS56KSpyLnosaD0oZi1lLnopKnIueiksdT5ofHxhPncpfHwoYT51JiYodT1hKSxoPHcmJih3PWgpLHc8MCkpfXZhciBZPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLHQsbyl7dGhpcy54PXIsdGhpcy55PXQsdGhpcy56PW99cmV0dXJuIGUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMueD1yLngsdGhpcy55PXIueSx0aGlzLno9ci56LHRoaXN9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihyLHQsbyl7cmV0dXJuIHRoaXMueD1yLHRoaXMueT10LHRoaXMuej1vLHRoaXN9LGUucHJvdG90eXBlLmZyb21BcnJheT1mdW5jdGlvbihyLHQpe3JldHVybiB0PT09dm9pZCAwJiYodD0wKSx0aGlzLng9clt0XSx0aGlzLnk9clt0KzFdLHRoaXMuej1yW3QrMl0sdGhpc30sZS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbihyLHQpe3JldHVybiByPT09dm9pZCAwJiYocj1bXSksdD09PXZvaWQgMCYmKHQ9MCksclt0XT10aGlzLngsclt0KzFdPXRoaXMueSxyW3QrMl09dGhpcy56LHJ9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihyKXtyZXR1cm4gdGhpcy54Kz1yLngsdGhpcy55Kz1yLnksdGhpcy56Kz1yLnosdGhpc30sZS5wcm90b3R5cGUubXVsdGlwbHlTY2FsYXI9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMueCo9cix0aGlzLnkqPXIsdGhpcy56Kj1yLHRoaXN9LGUucHJvdG90eXBlLnN1YlZlY3RvcnM9ZnVuY3Rpb24ocix0KXtyZXR1cm4gdGhpcy54PXIueC10LngsdGhpcy55PXIueS10LnksdGhpcy56PXIuei10LnosdGhpc30sZS5wcm90b3R5cGUuYWRkU2NhbGVkVmVjdG9yPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHRoaXMueCs9ci54KnQsdGhpcy55Kz1yLnkqdCx0aGlzLnorPXIueip0LHRoaXN9LGUucHJvdG90eXBlLmRvdD1mdW5jdGlvbihyKXtyZXR1cm4gdGhpcy54KnIueCt0aGlzLnkqci55K3RoaXMueipyLnp9LGUucHJvdG90eXBlLmNyb3NzPWZ1bmN0aW9uKHIpe3ZhciB0PXRoaXMueCxvPXRoaXMueSxmPXRoaXMuejtyZXR1cm4gdGhpcy54PW8qci56LWYqci55LHRoaXMueT1mKnIueC10KnIueix0aGlzLno9dCpyLnktbypyLngsdGhpc30sZS5wcm90b3R5cGUuY3Jvc3NWZWN0b3JzPWZ1bmN0aW9uKHIsdCl7dmFyIG89ci54LGY9ci55LGQ9ci56LHY9dC54LG49dC55LHM9dC56O3JldHVybiB0aGlzLng9ZipzLWQqbix0aGlzLnk9ZCp2LW8qcyx0aGlzLno9bypuLWYqdix0aGlzfSxlLnByb3RvdHlwZS5kaXN0YW5jZVRvPWZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZChyKSl9LGUucHJvdG90eXBlLmRpc3RhbmNlVG9TcXVhcmVkPWZ1bmN0aW9uKHIpe3ZhciB0PXRoaXMueC1yLngsbz10aGlzLnktci55LGY9dGhpcy56LXIuejtyZXR1cm4gdCp0K28qbytmKmZ9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMueCx0aGlzLnksdGhpcy56KX0sZX0oKSxwcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUocix0LG8pe3RoaXMudHJpYW5nbGU9cix0aGlzLmludGVyc2VjdGlvblBvaW50PXQsdGhpcy5pbmRleD1vfXJldHVybiBlfSgpLGxyPTFlLTYsUz1uZXcgWSgwLDAsMCksRD1uZXcgWSgwLDAsMCksZz1uZXcgWSgwLDAsMCksWD1uZXcgWSgwLDAsMCksQXI9ZnVuY3Rpb24oZSl7aHIocixlKTtmdW5jdGlvbiByKCl7cmV0dXJuIGUhPT1udWxsJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gci5wcm90b3R5cGUuY3JlYXRlVHJlZT1mdW5jdGlvbih0LG8sZil7bz1NYXRoLm1pbihvLDE2KTt2YXIgZD10aGlzLmdldFBvc2l0aW9uQ291bnQoKS8zLHY9ZD42NTUzNT9uZXcgVWludDMyQXJyYXkoZCk6bmV3IFVpbnQxNkFycmF5KGQpLG49bmV3IEZsb2F0MzJBcnJheShkKjYpLHM9W10sdT0wLHc9LTE7aWYoZilmb3IodmFyIHk9MCxwPTAsYT0wLGg9dm9pZCAwLEE9dm9pZCAwLGw9dm9pZCAwLEk9dm9pZCAwLGM9dm9pZCAwLHo9dm9pZCAwLGk9dm9pZCAwO3k8ZDt5Kz0xLHArPTMsYSs9Nil2W3ldPXksdGhpcy5nZXRQb3NpdGlvbkJ5SW5kZXgocCxEKSx0aGlzLmdldFBvc2l0aW9uQnlJbmRleChwKzEsZyksdGhpcy5nZXRQb3NpdGlvbkJ5SW5kZXgocCsyLFgpLGg9ST1ELngsaT1nLngsaTxoJiYoaD1pKSxpPkkmJihJPWkpLGk9WC54LGk8aCYmKGg9aSksaT5JJiYoST1pKSxBPWM9RC55LGk9Zy55LGk8QSYmKEE9aSksaT5jJiYoYz1pKSxpPVgueSxpPEEmJihBPWkpLGk+YyYmKGM9aSksbD16PUQueixpPWcueixpPGwmJihsPWkpLGk+eiYmKHo9aSksaT1YLnosaTxsJiYobD1pKSxpPnomJih6PWkpLG5bYV09aCxuW2ErMV09QSxuW2ErMl09bCxuW2ErM109SSxuW2ErNF09YyxuW2ErNV09ejtlbHNle2Zvcih2YXIgaz0xLzAsSD0xLzAsaj0xLzAscT0tMS8wLE09LTEvMCxQPS0xLzAseT0wLHA9MCxhPTAsaD12b2lkIDAsQT12b2lkIDAsbD12b2lkIDAsST12b2lkIDAsYz12b2lkIDAsej12b2lkIDAsaT12b2lkIDA7eTxkO3krPTEscCs9MyxhKz02KXZbeV09eSx0aGlzLmdldFBvc2l0aW9uQnlJbmRleChwLEQpLHRoaXMuZ2V0UG9zaXRpb25CeUluZGV4KHArMSxnKSx0aGlzLmdldFBvc2l0aW9uQnlJbmRleChwKzIsWCksaD1JPUQueCxpPWcueCxpPGgmJihoPWkpLGk+SSYmKEk9aSksaT1YLngsaTxoJiYoaD1pKSxpPkkmJihJPWkpLEE9Yz1ELnksaT1nLnksaTxBJiYoQT1pKSxpPmMmJihjPWkpLGk9WC55LGk8QSYmKEE9aSksaT5jJiYoYz1pKSxsPXo9RC56LGk9Zy56LGk8bCYmKGw9aSksaT56JiYoej1pKSxpPVgueixpPGwmJihsPWkpLGk+eiYmKHo9aSksblthXT1oLG5bYSsxXT1BLG5bYSsyXT1sLG5bYSszXT1JLG5bYSs0XT1jLG5bYSs1XT16LGg8ayYmKGs9aCksST5xJiYocT1JKSxBPEgmJihIPUEpLGM+TSYmKE09YyksbDxqJiYoaj1sKSx6PlAmJihQPXopO2Y9W2ssSCxqLHEsTSxQXX12YXIgVD1uZXcgbSgrK3csZiwwLGQsMCk7c1t1KytdPVQ7dmFyIE49W10sQj1bMCwxLDJdLFY9ZnVuY3Rpb24oVSxfKXtyZXR1cm4gTltfXS1OW1VdfTtmdW5jdGlvbiBSKFUpe3ZhciBfPVUuc3RhcnRJbmRleCwkPVUuZW5kSW5kZXgsRj1VLmV4dGVudHM7TlswXT1GWzNdLUZbMF0sTlsxXT1GWzRdLUZbMV0sTlsyXT1GWzVdLUZbMl0sQi5zb3J0KFYpO2Zvcih2YXIgVz0wO1c8MztXKyspe2Zvcih2YXIgTD1CW1ddLEc9RltMXStGW0wrM10seD1fLEM9JC0xLEs9LTEsSj12b2lkIDA7eDw9QzspSz09PS0xPyhKPXZbeF0sbltKKjYrTF0rbltKKjYrTCszXTxHP3grKzpLPUopOihKPXZbQ10sbltKKjYrTF0rbltKKjYrTCszXT49R3x8KHZbeF09Six2W0NdPUssSz0tMSx4KyspLEMtLSk7aWYoeD5fJiZ4PCQpe3ZhciBiPW5ldyBtKCsrdyxJcih2LG4sXyx4LGxyKSxfLHgsVS5kZWVwdGgrMSk7Yi5kZWVwdGg8byYmYi5lbmRJbmRleC1iLnN0YXJ0SW5kZXg+dCYmKHNbdSsrXT1iKTt2YXIgTz1uZXcgbSgrK3csSXIodixuLHgsJCxscikseCwkLFUuZGVlcHRoKzEpO08uZGVlcHRoPG8mJk8uZW5kSW5kZXgtTy5zdGFydEluZGV4PnQmJihzW3UrK109TyksVS5ub2RlMD1iLFUubm9kZTE9TyxVLnN0YXJ0SW5kZXg9MCxVLmVuZEluZGV4PTA7YnJlYWt9fX1mb3IoO3U7KVIoc1stLXVdKTtyZXR1cm4gdGhpcy5vZmZzZXRBcnJheT12LHRoaXMucm9vdE5vZGVQYWNrZWQ9eXIoVCx3KzEpLHMubGVuZ3RoPTAsdGhpc30sci5wcm90b3R5cGUudHJpYW5nbGVzSW5TcGhlcmU9ZnVuY3Rpb24odCxvKXtmb3IodmFyIGY9dGhpcy5vZmZzZXRBcnJheSxkPXRoaXMucm9vdE5vZGVQYWNrZWQsdj1uZXcgRmxvYXQzMkFycmF5KGQpLG49bmV3IFVpbnQzMkFycmF5KGQpLHM9bmV3IFVpbnQxNkFycmF5KGQpLHU9WzBdLHc9W10seSxwLGEsaDsoeT11LnBvcCgpKSE9PXZvaWQgMDspe2g9eSpRLzQ7dmFyIEE9c3IodC54LHZbaF0sdltoKzNdKS10LngsbD1zcih0LnksdltoKzFdLHZbaCs0XSktdC55LEk9c3IodC56LHZbaCsyXSx2W2grNV0pLXQuejtpZihBKkErbCpsK0kqSTw9bypvKXtmb3IodmFyIGM9bltoKzZdO2M8bltoKzddO2MrKyl3LnB1c2goZltjXSk7aD15KlEvMixwPXNbaCsxNl0sYT1zW2grMTddLHAmJnUucHVzaChwKSxhJiZ1LnB1c2goYSl9fWZvcih2YXIgej13Lmxlbmd0aCxpPW5ldyBGbG9hdDMyQXJyYXkoeio5KSxjPTA7Yzx6O2MrKyl7dmFyIGs9d1tjXTt0aGlzLmdldFBvc2l0aW9uQnlJbmRleChrLFMpLGlbYyo5XT1TLngsaVtjKjkrMV09Uy55LGlbYyo5KzJdPVMueix0aGlzLmdldFBvc2l0aW9uQnlJbmRleChrKzEsUyksaVtjKjkrM109Uy54LGlbYyo5KzRdPVMueSxpW2MqOSs1XT1TLnosdGhpcy5nZXRQb3NpdGlvbkJ5SW5kZXgoaysyLFMpLGlbYyo5KzZdPVMueCxpW2MqOSs3XT1TLnksaVtjKjkrOF09Uy56fXJldHVybiBpfSxyLnByb3RvdHlwZS5pbnRlcnNlY3RSYXk9ZnVuY3Rpb24odCxvLGYsZCl7Zm9yKHZhciB2PXRoaXMub2Zmc2V0QXJyYXksbj10aGlzLnJvb3ROb2RlUGFja2VkLHM9bmV3IEZsb2F0MzJBcnJheShuKSx1PW5ldyBVaW50MzJBcnJheShuKSx3PW5ldyBVaW50MTZBcnJheShuKSx5PW5ldyBZKDEvby54LDEvby55LDEvby56KSxwPVswXSxhLGgsQSxsOyhhPXAucG9wKCkpIT09dm9pZCAwOylpZihsPWEqUS80LGNyKHQseSxzW2xdLHNbbCsxXSxzW2wrMl0sc1tsKzNdLHNbbCs0XSxzW2wrNV0pKXtmb3IodmFyIEk9dVtsKzZdLGM9dVtsKzddLHo9dm9pZCAwLGk9dm9pZCAwLGs9dm9pZCAwLEg9dC54LGo9dC55LHE9dC56LE09by54LFA9by55LFQ9by56LE49dm9pZCAwLEI9dm9pZCAwLFY9dm9pZCAwLFI9dm9pZCAwLFU9dm9pZCAwLF89dm9pZCAwLCQ9dm9pZCAwLEY9dm9pZCAwLFc9dm9pZCAwLEw9dm9pZCAwLEc9dm9pZCAwLHg9dm9pZCAwLEM9dm9pZCAwLEs9dm9pZCAwLEo9dm9pZCAwLGI9dm9pZCAwLE89dm9pZCAwLGFyPXZvaWQgMCxycj12b2lkIDAsdHI9dm9pZCAwLG9yPXZvaWQgMCxpcj12b2lkIDAsWj12b2lkIDAsdnI9dm9pZCAwLGZyPXZvaWQgMCx1cj12b2lkIDAsbnI9dm9pZCAwO0k8YztJKyspe2lmKHo9dltJXSxpPXoqMyx0aGlzLmdldFBvc2l0aW9uQnlJbmRleChpLFMpLE49Uy54LEI9Uy55LFY9Uy56LHRoaXMuZ2V0UG9zaXRpb25CeUluZGV4KGkrMSxTKSxSPVMueCxVPVMueSxfPVMueix0aGlzLmdldFBvc2l0aW9uQnlJbmRleChpKzIsUyksJD1TLngsRj1TLnksVz1TLnosTD1SLU4sRz1VLUIseD1fLVYsQz0kLU4sSz1GLUIsSj1XLVYsYj1HKkoteCpLLE89eCpDLUwqSixhcj1MKkstRypDLFo9TSpiK1AqTytUKmFyLFo+MClpcj0xO2Vsc2UgaWYoWjwwKWlyPS0xLFo9LVo7ZWxzZSBjb250aW51ZTtycj1ILU4sdHI9ai1CLG9yPXEtVix2cj1pciooTSoodHIqSi1vcipLKStQKihvcipDLXJyKkopK1QqKHJyKkstdHIqQykpLCEodnI8MCkmJihmcj1pciooTSooRypvci14KnRyKStQKih4KnJyLUwqb3IpK1QqKEwqdHItRypycikpLCEoZnI8MCkmJih2citmcj5afHwodXI9LWlyKihycipiK3RyKk8rb3IqYXIpLCEodXI8MCkmJihucj11ci9aLGQucHVzaChuZXcgcHIoW04sQixWLFIsVSxfLCQsRixXXSxbSCtNKm5yLGorUCpucixxK1QqbnJdLHopKSkpKSl9bD1hKlEvMixoPXdbbCsxNl0sQT13W2wrMTddLGgmJnAucHVzaChoKSxBJiZwLnB1c2goQSl9cmV0dXJuIGR9LHJ9KGRyKTtmdW5jdGlvbiBzcihlLHIsdCl7cmV0dXJuIGU8cj9yOmU+dD90OmV9ZnVuY3Rpb24gSXIoZSxyLHQsbyxmKXtpZih0Pj1vKXJldHVyblswLDAsMCwwLDAsMF07Zm9yKHZhciBkPTEvMCx2PTEvMCxuPTEvMCxzPS0xLzAsdT0tMS8wLHc9LTEvMCx5PXQscD12b2lkIDAsYT12b2lkIDA7eTxvO3krKylwPWVbeV0qNixhPXJbcF0sYTxkJiYoZD1hKSxhPXJbcCsxXSxhPHYmJih2PWEpLGE9cltwKzJdLGE8biYmKG49YSksYT1yW3ArM10sYT5zJiYocz1hKSxhPXJbcCs0XSxhPnUmJih1PWEpLGE9cltwKzVdLGE+dyYmKHc9YSk7cmV0dXJuW2QtZix2LWYsbi1mLHMrZix1K2YsdytmXX12YXIgd3I9MWUtNix6cj1bIngiLCJ5IiwieiJdLEU9bmV3IFkoMCwwLDApLFByPWZ1bmN0aW9uKGUpe2hyKHIsZSk7ZnVuY3Rpb24gcigpe3JldHVybiBlIT09bnVsbCYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIHIucHJvdG90eXBlLmNyZWF0ZVRyZWU9ZnVuY3Rpb24odCxvLGYpe289TWF0aC5taW4obywxNik7dmFyIGQ9dGhpcy5nZXRQb3NpdGlvbkJ5SW5kZXguYmluZCh0aGlzKSx2PXRoaXMuZ2V0UG9zaXRpb25Db3VudCgpLG49dj42NTUzNT9uZXcgVWludDMyQXJyYXkodik6bmV3IFVpbnQxNkFycmF5KHYpLHM9W10sdT0wLHc9LTE7aWYoZilmb3IodmFyIHk9MDt5PHY7eSs9MSluW3ldPXk7ZWxzZXtkKDAsRSk7Zm9yKHZhciBwPUUueCxhPUUueSxoPUUueixBPXAsbD1hLEk9aCx5PTAsYz12b2lkIDAsej12b2lkIDAsaT12b2lkIDA7eTx2O3krPTEpblt5XT15LGQoeSxFKSxjPUUueCx6PUUueSxpPUUueixjPHA/cD1jOmM+QSYmKEE9YyksejxhP2E9ejp6PmwmJihsPXopLGk8aD9oPWk6aT5JJiYoST1pKTtmPVtwLGEsaCxBLGwsSV19dmFyIGs9bmV3IG0oKyt3LGYsMCx2LDApO3NbdSsrXT1rO3ZhciBIPVtdLGo9WzAsMSwyXSxxPWZ1bmN0aW9uKFAsVCl7cmV0dXJuIEhbVF0tSFtQXX07ZnVuY3Rpb24gTShQKXt2YXIgVD1QLnN0YXJ0SW5kZXgsTj1QLmVuZEluZGV4LEI9UC5leHRlbnRzO0hbMF09QlszXS1CWzBdLEhbMV09Qls0XS1CWzFdLEhbMl09Qls1XS1CWzJdO2Zvcih2YXIgVj1qLnNvcnQocSlbMF0sUj16cltWXSxVPShCW1ZdK0JbViszXSkvMixfPVQsJD1OLTEsRj0tMSxXO188PSQ7KUY9PT0tMT8oVz1uW19dLGQoVyxFKSxFW1JdPFU/XysrOkY9Vyk6KFc9blskXSxkKFcsRSksRVtSXT49VXx8KG5bX109VyxuWyRdPUYsRj0tMSxfKyspLCQtLSk7aWYoXz5UKXt2YXIgTD1CLnNsaWNlKCk7TFtWKzNdPVUrd3I7dmFyIEc9bmV3IG0oKyt3LEwsVCxfLFAuZGVlcHRoKzEpO0cuZGVlcHRoPG8mJkcuZW5kSW5kZXgtRy5zdGFydEluZGV4PnQmJihzW3UrK109RyksUC5ub2RlMD1HfWlmKE4+Xyl7dmFyIHg9Qi5zbGljZSgpO3hbVl09VS13cjt2YXIgQz1uZXcgbSgrK3cseCxfLE4sUC5kZWVwdGgrMSk7Qy5kZWVwdGg8byYmQy5lbmRJbmRleC1DLnN0YXJ0SW5kZXg+dCYmKHNbdSsrXT1DKSxQLm5vZGUxPUN9UC5zdGFydEluZGV4PTAsUC5lbmRJbmRleD0wfWZvcig7dTspTShzWy0tdV0pO3JldHVybiB0aGlzLm9mZnNldEFycmF5PW4sdGhpcy5yb290Tm9kZVBhY2tlZD15cihrLHcrMSkscy5sZW5ndGg9MCx0aGlzfSxyLnByb3RvdHlwZS5pbnRlcnNlY3RSYXk9ZnVuY3Rpb24odCxvLGYsZCl7Zm9yKHZhciB2PXRoaXMub2Zmc2V0QXJyYXksbj10aGlzLnJvb3ROb2RlUGFja2VkLHM9bmV3IEZsb2F0MzJBcnJheShuKSx1PW5ldyBVaW50MzJBcnJheShuKSx3PW5ldyBVaW50MTZBcnJheShuKSx5PWYqZixwPW5ldyBZKDEvby54LDEvby55LDEvby56KSxhPVswXSxoLEEsbCxJOyhoPWEucG9wKCkpIT09dm9pZCAwOylpZihJPWgqUS80LGNyKHQscCxzW0ldLHNbSSsxXSxzW0krMl0sc1tJKzNdLHNbSSs0XSxzW0krNV0sZikpe2Zvcih2YXIgYz11W0krNl0sej11W0krN10saT12b2lkIDAsaz12b2lkIDAsSD12b2lkIDAsaj12b2lkIDAscT12b2lkIDAsTT12b2lkIDAsUD12b2lkIDAsVD12b2lkIDAsTj12b2lkIDAsQj12b2lkIDAsVj12b2lkIDAsUj12b2lkIDA7Yzx6O2MrKylpPXZbY10sdGhpcy5nZXRQb3NpdGlvbkJ5SW5kZXgoaSxFKSxrPUUueCxIPUUueSxqPUUueixxPXQueCxNPXQueSxQPXQueixUPW8ueCxOPW8ueSxCPW8ueixWPVQqKGstcSkrTiooSC1NKStCKihqLVApLFY+MCYmKHErPVQqVixNKz1OKlYsUCs9QipWKSxUPWstcSxOPUgtTSxCPWotUCxWPVQqVCtOKk4rQipCLFY8PXkmJmQucHVzaChuZXcgcHIoW2ssSCxqLGssSCxqLGssSCxqXSxbcSxNLFBdLGkpKTtJPWgqUS8yLEE9d1tJKzE2XSxsPXdbSSsxN10sQSYmYS5wdXNoKEEpLGwmJmEucHVzaChsKX1yZXR1cm4gZH0scn0oZHIpO2Z1bmN0aW9uIEJyKGUpe29ubWVzc2FnZT1mdW5jdGlvbihyKXtQcm9taXNlLnJlc29sdmUoci5kYXRhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSkudGhlbihmdW5jdGlvbih0KXt2YXIgbz10Lm91dHB1dCxmPXQudHJhbnNmZXI7cmV0dXJuIHBvc3RNZXNzYWdlKG8sZil9KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gcG9zdE1lc3NhZ2UoeyQkZXJyb3I6dH0pfSl9fUJyKGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihyKXtmb3IodmFyIHQ9W10sbz1uZXcgU2V0LGY9MCxkPXI7ZjxkLmxlbmd0aDtmKyspe3ZhciB2PWRbZl0sbj12b2lkIDA7aWYodi50eXBlPT09Im1lc2giKW49bmV3IEFyKHYuYXR0cmlidXRlcy5wb3NpdGlvbix2LmluZGljZXMpO2Vsc2UgaWYodi50eXBlPT09InBvaW50cyIpbj1uZXcgUHIodi5hdHRyaWJ1dGVzLnBvc2l0aW9uLHYuaW5kaWNlcyk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgVHlwZSIpO24uY3JlYXRlVHJlZSh2Lm1heEl0ZW1QZXJOb2RlLHYubWF4VHJlZURlcHRoLHYuZXh0ZW50cyk7dmFyIHM9e3R5cGU6di50eXBlLGF0dHJpYnV0ZXM6di5hdHRyaWJ1dGVzLGluZGljZXM6di5pbmRpY2VzLG9mZnNldEFycmF5Om4ub2Zmc2V0QXJyYXkscm9vdE5vZGVQYWNrZWQ6bi5yb290Tm9kZVBhY2tlZH07dC5wdXNoKHMpO3ZhciB1PXZvaWQgMDtmb3IodmFyIHcgaW4gcy5hdHRyaWJ1dGVzKXt2YXIgeT1zLmF0dHJpYnV0ZXNbd107eSYmeS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmby5hZGQoeS5idWZmZXIpfXU9cy5pbmRpY2VzLHUmJnUuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJm8uYWRkKHUuYnVmZmVyKSx1PXMub2Zmc2V0QXJyYXksdSYmdS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmby5hZGQodS5idWZmZXIpLG8uYWRkKHMucm9vdE5vZGVQYWNrZWQpfXJldHVybntvdXRwdXQ6dCx0cmFuc2ZlcjpBcnJheS5mcm9tKG8pfX0pfSl9KSgpOwo=",zd=cr=>Uint8Array.from(atob(cr),vn=>vn.charCodeAt(0)),es=typeof self!="undefined"&&self.Blob&&new Blob([zd(Nu)],{type:"text/javascript;charset=utf-8"});function Vd(cr){let vn;try{if(vn=es&&(self.URL||self.webkitURL).createObjectURL(es),!vn)throw"";const yn=new Worker(vn,{name:cr==null?void 0:cr.name});return yn.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(vn)}),yn}catch{return new Worker("data:text/javascript;base64,"+Nu,{name:cr==null?void 0:cr.name})}finally{vn&&(self.URL||self.webkitURL).revokeObjectURL(vn)}}var qu=function(){function cr(vn,yn){this.pool=yn,this.workerCreator=vn,this.queue=[],this.workers=[],this.workersResolver=[],this.workerStatus=0}return cr.prototype.initWorker=function(vn){if(this.workerCreator&&!this.workers[vn]){var yn=this.workerCreator();yn.addEventListener("message",this.onMessage.bind(this,vn)),this.workers[vn]=yn}},cr.prototype.getIdleWorker=function(){for(var vn=0;vn<this.pool;vn++)if(!(this.workerStatus&1<<vn))return vn;return-1},cr.prototype.onMessage=function(vn,yn){var Rn=this.workersResolver[vn],Bn=Rn.resolve,Co=Rn.reject;if(yn.data&&"$$error"in yn.data?Co(yn.data.$$error):Bn(yn.data),this.queue.length){var Po=this.queue.shift(),To=Po.resolve,Io=Po.reject,$l=Po.input,Wl=Po.transfer;this.workersResolver[vn]={resolve:To,reject:Io},this.workers[vn].postMessage($l,Wl)}else this.workerStatus^=1<<vn},cr.prototype.postMessage=function(vn,yn){var Rn=this;return yn===void 0&&(yn=[]),new Promise(function(Bn,Co){var Po=Rn.getIdleWorker();Po!==-1?(Rn.initWorker(Po),Rn.workerStatus|=1<<Po,Rn.workersResolver[Po]={resolve:Bn,reject:Co},Rn.workers[Po].postMessage(vn,yn)):Rn.queue.push({resolve:Bn,reject:Co,input:vn,transfer:yn})})},cr.prototype.dispose=function(){this.workers.forEach(function(vn){return vn.terminate()}),this.workersResolver.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0},cr}(),Dd=new qu(function(){return new Vd},4),Nd=new Map,Xn=new Ray,ts=new Matrix3,pi=new Matrix4,Uu=new Vector3,qd=new Vector3,Ud=new Vector3,Qd=new Triangle;function Hd(cr,vn,yn,Rn){var Bn,Co=cr.matrixWorld;pi.getInverse(Co),Xn.copy(yn.ray).applyMatrix4(pi);for(var Po=vn.intersectRay(Xn.origin,Xn.direction,0,[]),To=cr.geometry,Io=cr.material,$l=To.groups,Wl=To.index,Xl=0,Yl=Po.length;Xl<Yl;Xl++){var Zl=Po[Xl],ey=Zl.triangle,Rm=Zl.index,ry=Zl.intersectionPoint,_g=new Vector3(ry[0],ry[1],ry[2]).applyMatrix4(Co),ty=yn.ray.origin.distanceTo(_g);if(!(ty<yn.near||ty>yn.far)){var ny=void 0;if(Array.isArray(Io)){if($l)for(var iy=Rm*3,oy=0,ay=$l;oy<ay.length;oy++){var uy=ay[oy];if(iy>=uy.start&&iy-uy.start<uy.count){ny=Io[(Bn=uy.materialIndex)!==null&&Bn!==void 0?Bn:0];break}}}else ny=Io;if(ny){var hy=Qd.set(Uu.set(ey[0],ey[1],ey[2]).applyMatrix4(Co),qd.set(ey[3],ey[4],ey[5]).applyMatrix4(Co),Ud.set(ey[6],ey[7],ey[8]).applyMatrix4(Co)).getNormal(new Vector3),my=Rm*3,ly=new Face3(Wl?Wl.array[my]:my,Wl?Wl.array[my+1]:my+1,Wl?Wl.array[my+2]:my+2,hy),sy=yn.ray.direction.dot(hy);ny.side===FrontSide&&sy>=0||ny.side===BackSide&&sy<=0||Rn.push({distance:ty,object:cr,face:ly,point:_g,distanceToRay:0,faceIndex:Rm})}}}}function Gd(cr,vn,yn,Rn){var Bn,Co,Po=cr.matrixWorld;ts.getNormalMatrix(Po),pi.getInverse(Po);var To=((Co=(Bn=yn.params.Points)===null||Bn===void 0?void 0:Bn.threshold)!==null&&Co!==void 0?Co:1)*pi.getMaxScaleOnAxis();Xn.copy(yn.ray).applyMatrix4(pi);for(var Io=vn.intersectRay(Xn.origin,Xn.direction,To,[]),$l=cr.geometry,Wl=$l.index,Xl=$l.getAttribute("normal"),Yl=0,Zl=Io.length;Yl<Zl;Yl++){var ey=Io[Yl],Rm=ey.triangle,ry=ey.index,_g=ey.intersectionPoint,ty=new Vector3(_g[0],_g[1],_g[2]).applyMatrix4(Po),ny=yn.ray.origin.distanceTo(ty);if(!(ny<yn.near||ny>yn.far)){var iy=Uu.set(Rm[0],Rm[1],Rm[2]).applyMatrix4(Po),oy=Wl?Wl.array[ry]:ry,ay=void 0;if(Xl instanceof BufferAttribute){var uy=new Vector3().fromBufferAttribute(Xl,oy).applyNormalMatrix(ts);ay=new Face3(oy,oy,oy,uy)}Rn.push({distance:ny,object:cr,face:ay,point:ty,distanceToRay:ty.distanceTo(iy),index:ry})}}}var Qu="__bvh_mesh__",_d=Mesh.prototype.raycast;function Jd(cr,vn){var yn=Kd(this);yn?Hd(this,yn,cr,vn):_d.call(this,cr,vn)}function Kd(cr){var vn=cr[Qu];return vn}function jd(cr,vn){var yn;Object.assign(cr,(yn={},yn[Qu]=vn,yn.raycast=Jd,yn))}var Hu="__bvh_points__",Xd=Points.prototype.raycast;function Wd(cr,vn){var yn=Zd(this);yn?Gd(this,yn,cr,vn):Xd.call(this,cr,vn)}function Zd(cr){var vn=cr[Hu];return vn}function Yd(cr,vn){var yn;Object.assign(cr,(yn={},yn[Hu]=vn,yn.raycast=Wd,yn))}function $d(cr,vn,yn,Rn){var Bn=[];return cr.traverse(function(Co){(Co instanceof Mesh||Co instanceof Points)&&Co.geometry instanceof BufferGeometry&&Bn.push(Co)}),Promise.resolve().then(function(){for(var Co=[],Po=new Set,To=null,Io=0;Io<Bn.length;Io++){var $l=Bn[Io],Wl=$l.geometry;if(Wl instanceof BufferGeometry){var Xl=void 0;if($l instanceof Mesh?Xl="mesh":$l instanceof Points&&(Xl="points"),!!Xl){var Yl=Wl.boundingBox,Zl=Yl?[Yl.min.x,Yl.min.y,Yl.min.z,Yl.max.x,Yl.max.y,Yl.max.z]:void 0,ey={};for(var Rm in Wl.attributes){var ry=Wl.attributes[Rm];ry instanceof InterleavedBufferAttribute?(ey[Rm]={array:ry.data.array,stride:ry.data.stride,offset:ry.offset},To=ry.data.array,To&&To.buffer instanceof ArrayBuffer&&Po.add(To.buffer)):(ey[Rm]={array:ry.array},To=ry.array,To&&To.buffer instanceof ArrayBuffer&&Po.add(To.buffer))}var _g=void 0,ty=Wl.getIndex();ty&&(ty instanceof InterleavedBufferAttribute?(_g={array:ty.data.array,stride:ty.data.stride,offset:ty.offset},To=ty.data.array,To&&To.buffer instanceof ArrayBuffer&&Po.add(To.buffer)):(_g={array:ty.array},To=ty.array,To&&To.buffer instanceof ArrayBuffer&&Po.add(To.buffer)));var ny={type:Xl,attributes:ey,indices:_g,maxItemPerNode:yn,maxTreeDepth:Rn,extents:Zl};Co.push(ny)}}}return Dd.postMessage(Co,Array.from(Po))}).then(function(Co){for(var Po=0;Po<Bn.length;Po++){var To=Bn[Po],Io=To.geometry,$l=Co[Po];if(Io instanceof BufferGeometry){for(var Wl in $l.attributes){var Xl=$l.attributes[Wl].array,Yl=Io.attributes[Wl];Yl instanceof InterleavedBufferAttribute?Yl.data.array=Xl:Yl.array=Xl}var Zl=Io.getIndex();if(Zl&&$l.indices){var Xl=$l.indices.array;Zl instanceof InterleavedBufferAttribute?Zl.data.array=Xl:Zl.array=Xl}if(To instanceof Mesh){var ey=new Vu($l.attributes.position,$l.indices);ey.offsetArray=$l.offsetArray,ey.rootNodePacked=$l.rootNodePacked,jd(To,ey)}else if(To instanceof Points){var ey=new Du($l.attributes.position,$l.indices);ey.offsetArray=$l.offsetArray,ey.rootNodePacked=$l.rootNodePacked,Yd(To,ey)}}}return cr})}var eh=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){Bn===void 0&&(Bn=q$q);var Co=cr.call(this)||this;return Co.contentObject=Rn,Co.name=yn,Co.materials=[],Co.pbmObjects=[],Co.disposers=[Bn],Co.add(Rn),Rn.traverse(function(Po){var To;if(Po instanceof Mesh||Po instanceof Points){var Io=Po.material;Array.isArray(Io)?(To=Co.materials).push.apply(To,Io):Co.materials.push(Io)}(Po instanceof Ht$2||Po instanceof Jr$2||Po instanceof Vr$1)&&Co.pbmObjects.push(Po)}),Co}return vn.prototype.generateBvhTree=function(){return $d(this,!0,200,10)},vn.prototype.intersectRaycaster=function(yn,Rn,Bn){Rn===void 0&&(Rn=!0),Bn===void 0&&(Bn=[]);for(var Co=this.children.slice(),Po,To=[];Po=Co.pop();)if(Po.visible){Po.raycast(yn,To);for(var Io=0,$l=Po.children.length;Io<$l;Io++)Co.push(Po.children[Io])}return To.forEach(function(Wl){var Xl=0;if((Wl.object instanceof Ht$2||Wl.object instanceof Jr$2||Wl.object instanceof Vr$1)&&Wl.face){var Yl=Array.isArray(Wl.object.material)?Wl.object.material[Wl.face.materialIndex]:Wl.object.material;Yl&&(Xl=Yl.floorIndex)}Wl.floor=Xl}),Rn&&To.sort(function(Wl,Xl){return Wl.distance-Xl.distance}),Bn.push.apply(Bn,To),Bn},vn.prototype.update=function(yn,Rn,Bn,Co){for(var Po=0,To=this.pbmObjects;Po<To.length;Po++){var Io=To[Po];Io.update(yn,Rn,Bn,Co)}},vn.prototype.dispose=function(){for(var yn=0,Rn=this.disposers;yn<Rn.length;yn++){var Bn=Rn[yn];Bn()}this.disposers.length=0,this.pbmObjects.length=0},vn.prototype.clone=function(){return new vn(this.name,this.contentObject.clone())},vn}(Object3D);function ct$4(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=[];cr=cr.map(function(To){return(To!=null?To:"").trim()}).filter(function(To){return To.length>0&&!/^\/+$/.test(To)});for(var Rn=0;Rn<cr.length;Rn++){var Bn=Rn===0,Co=Rn===cr.length-1,Po=cr[Rn];Bn||(Po=Po.replace(/^\.\//,"").replace(/^\/+/,"")),Co||(Po=Po.replace(/\/+$/,"")),yn.push(Po)}return yn.join("/")}function ta(cr){var vn,yn=/^(http\:|https\:|file\:)?\/\/[^/]/.exec(cr);if(!yn)return cr;var Rn=yn[1]||"",Bn=cr.slice(Rn.length+2),Co=Bn.indexOf("#");Co>=0&&(cr.slice(Co),Bn=cr.slice(0,Co));var Po=Bn.indexOf("?");Po>=0&&(cr.slice(Po),Bn=cr.slice(0,Po));for(var To=Bn.split("/"),Io=To.shift(),$l=(vn=To.pop())!==null&&vn!==void 0?vn:"",Wl=[],Xl=0,Yl=To;Xl<Yl.length;Xl++){var Zl=Yl[Xl];if(!(Zl===""||Zl===".")){if(Zl===".."){Wl.pop();continue}Wl.push(Zl)}}return Rn+"//"+Io+"/"+Wl.join("/")+"/"+$l}function Kr$1(cr){return cr.indexOf("//")===0||/^[0-9a-z]+\:/i.test(cr)}function Gu(cr,vn,yn){var Rn;if(cr.content){var Bn=(Rn=cr.content.uri)!==null&&Rn!==void 0?Rn:cr.content.url;typeof Bn=="string"&&!Kr$1(Bn)&&(cr.content.uri=ta(ct$4(vn,Bn)))}if(cr.transform){for(var Co=!1,Po=0;Po<16;Po++){var To=cr.transform[Po];if(typeof To!="number"||isNaN(To)||!isFinite(To)){Co=!0;break}}if(cr.transform[15]===0&&(Co=!0),Co)throw new Error("Invalid Tile Transform: "+JSON.stringify(cr.transform))}if(cr.children)for(var Io=0,$l=cr.children;Io<$l.length;Io++){var Wl=$l[Io];Gu(Wl,vn)}return cr}function ra(cr,vn){if(cr.asset||(cr.asset={}),cr.rootMeta||(cr.rootMeta={}),cr.rootMeta.taskParameters||(cr.rootMeta.taskParameters={}),cr.asset.overview){var yn=cr.asset.overview;Kr$1(yn.imageFile)||(yn.imageFile=ta(ct$4(vn,yn.imageFile))),Kr$1(yn.worldFile)||(yn.worldFile=ta(ct$4(vn,yn.worldFile)))}if(cr.asset.trajectories)for(var Rn=0;Rn<cr.asset.trajectories.list.length;Rn++){var Bn=cr.asset.trajectories.list[Rn];Bn.file=ta(ct$4(vn,Bn.file))}return Gu(cr.root,vn),cr}function th(cr,vn,yn){for(var Rn,Bn,Co=Promise.resolve(),Po=cr.slice(),To=function(){for(var Io=[],$l=0,Wl=void 0;Wl=Po.shift();){Io.push(Wl);var Xl=((Rn=Wl.image)===null||Rn===void 0?void 0:Rn.width)*((Bn=Wl.image)===null||Bn===void 0?void 0:Bn.height);if(!isNaN(Xl)&&isFinite(Xl)&&($l+=Xl),$l>=yn)break}Co=Co.then(function(){return new Promise(function(Yl){Ft$2.shared.add(function(){for(var Zl=0,ey=Io;Zl<ey.length;Zl++){var Rm=ey[Zl];vn.initTexture(Rm)}Yl()},!0)})}).catch(function(){})};Po.length>0;)To();return Co}function Sa(cr,vn){if(vn===void 0&&(vn=""),(vn[0]==="?"||vn[0]==="&")&&(vn=vn.slice(1)),!vn)return cr;var yn=cr.indexOf("#"),Rn="";return yn>=0&&(Rn=cr.slice(yn),cr=cr.slice(0,yn)),(cr[cr.length-1]==="?"||cr[cr.length-1]==="&")&&(cr=cr.slice(0,-1)),cr.indexOf("?")>=0?"".concat(cr,"&").concat(vn).concat(Rn):"".concat(cr,"?").concat(vn).concat(Rn)}var Ga=4;function _u(cr,vn,yn){var Rn=new DataView(vn);if(cr.magic=Rn.getUint32(yn,!0),yn+=Ga,cr.version=Rn.getUint32(yn,!0),yn+=Ga,cr.byteLength=Rn.getUint32(yn,!0),yn+=Ga,cr.version!==1)throw new Error("3D Tile Version ".concat(cr.version," not supported"));return yn}var Pr$1,ut$4;(function(cr){cr[cr.BYTE=5120]="BYTE",cr[cr.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",cr[cr.SHORT=5122]="SHORT",cr[cr.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",cr[cr.INT=5124]="INT",cr[cr.UNSIGNED_INT=5125]="UNSIGNED_INT",cr[cr.FLOAT=5126]="FLOAT",cr[cr.DOUBLE=5130]="DOUBLE"})(ut$4||(ut$4={}));var rh=(Pr$1={},Pr$1[ut$4.DOUBLE]=Float64Array,Pr$1[ut$4.FLOAT]=Float32Array,Pr$1[ut$4.UNSIGNED_SHORT]=Uint16Array,Pr$1[ut$4.UNSIGNED_INT]=Uint32Array,Pr$1[ut$4.UNSIGNED_BYTE]=Uint8Array,Pr$1[ut$4.BYTE]=Int8Array,Pr$1[ut$4.SHORT]=Int16Array,Pr$1[ut$4.INT]=Int32Array,Pr$1),nh={DOUBLE:ut$4.DOUBLE,FLOAT:ut$4.FLOAT,UNSIGNED_SHORT:ut$4.UNSIGNED_SHORT,UNSIGNED_INT:ut$4.UNSIGNED_INT,UNSIGNED_BYTE:ut$4.UNSIGNED_BYTE,BYTE:ut$4.BYTE,SHORT:ut$4.SHORT,INT:ut$4.INT};function ca(cr){var vn=rh[cr];if(!vn)throw new Error("Failed to convert GL type");return vn}function _a$1(cr){var vn=ca(cr);return vn.BYTES_PER_ELEMENT}function rs(cr,vn,yn,Rn){yn===void 0&&(yn=0);var Bn=ca(cr);if(yn%_a$1(cr)!==0){var Co=Rn?vn.slice(yn,yn+Rn*_a$1(cr)):vn.slice(yn);return new Bn(Co)}else return new Bn(vn,yn,Rn!=null?Rn:(vn.byteLength-yn)/_a$1(cr))}function ih(cr){var vn=nh[cr];if(!vn)throw new Error("Failed to convert GL type");return vn}var Ju=function(){function cr(vn,yn){this.featuresLength=0,this.cachedTypedArrays={},this.json=vn,this.buffer=yn;var Rn=this.getGlobalProperty("POINTS_LENGTH",ut$4.UNSIGNED_INT,1);Rn&&Rn.length&&(this.featuresLength=Rn[0])}return cr.prototype.getExtension=function(vn){return this.json.extensions&&this.json.extensions[vn]},cr.prototype.hasProperty=function(vn){return!!this.json[vn]},cr.prototype.getGlobalProperty=function(vn,yn,Rn){var Bn=this.json[vn];if(typeof Bn=="number"){var Co=ca(yn);return new Co([Bn])}else if(Array.isArray(Bn)){var Co=ca(yn);return new Co(Bn)}else if(Bn&&Number.isFinite(Bn.byteOffset))return this.getTypedArrayFromBinary(vn,yn,Rn,1,Bn.byteOffset);return null},cr.prototype.getPropertyArray=function(vn,yn,Rn){var Bn=this.json[vn];return Bn&&Number.isFinite(Bn.byteOffset)?("componentType"in Bn&&(yn=ih(Bn.componentType)),this.getTypedArrayFromBinary(vn,yn,Rn,this.featuresLength,Bn.byteOffset)):this.getTypedArrayFromArray(vn,yn,Bn)},cr.prototype.getProperty=function(vn,yn,Rn,Bn,Co){var Po=this.json[vn];if(!Po)return null;var To=this.getPropertyArray(vn,yn,Rn);if(Rn===1)return Co[0]=To[Bn],Co;for(var Io=0;Io<Rn;++Io)Co[Io]=To[Rn*Bn+Io];return Co},cr.prototype.getTypedArrayFromBinary=function(vn,yn,Rn,Bn,Co){var Po=this.cachedTypedArrays,To=Po[vn];return To||(To=rs(yn,this.buffer.buffer,this.buffer.byteOffset+Co,Bn*Rn),Po[vn]=To),To},cr.prototype.getTypedArrayFromArray=function(vn,yn,Rn){var Bn=this.cachedTypedArrays,Co=Bn[vn];return Co||(Co=rs(yn,Rn),Bn[vn]=Co),Co},cr}(),zn=4,ns="b3dm tile in legacy format.";function Ku(cr,vn,yn){var Rn=new TextDecoder("utf8"),Bn=new Uint8Array(cr,vn,yn),Co=Rn.decode(Bn);return Co}function ju(cr,vn,yn){return yn=ah(cr,vn,yn),yn=oh(cr,vn,yn),yn=sh(cr,vn,yn),yn}function ah(cr,vn,yn){var Rn=new DataView(vn),Bn=0;cr.header=cr.header||{};var Co=Rn.getUint32(yn,!0);yn+=zn;var Po=Rn.getUint32(yn,!0);yn+=zn;var To=Rn.getUint32(yn,!0);yn+=zn;var Io=Rn.getUint32(yn,!0);return yn+=zn,To>=570425344?(yn-=zn*2,Bn=Co,To=Po,Io=0,Co=0,Po=0,console.warn(ns)):Io>=570425344&&(yn-=zn,Bn=To,To=Co,Io=Po,Co=0,Po=0,console.warn(ns)),cr.header.featureTableJsonByteLength=Co,cr.header.featureTableBinaryByteLength=Po,cr.header.batchTableJsonByteLength=To,cr.header.batchTableBinaryByteLength=Io,cr.header.batchLength=Bn,yn}function oh(cr,vn,yn){var Rn=cr.header||{},Bn=Rn.featureTableJsonByteLength,Co=Rn.featureTableBinaryByteLength,Po=Rn.batchLength;if(cr.featureTableJson={BATCH_LENGTH:Po||0},Bn&&Bn>0){var To=Ku(vn,yn,Bn);cr.featureTableJson=JSON.parse(To)}yn+=Bn||0,cr.featureTableBinary=new Uint8Array(vn,yn,Co),yn+=Co||0,cr.rtcCenter=[0,0,0];var Io=new Ju(cr.featureTableJson,cr.featureTableBinary);if(Array.isArray(Io.json.RTC_CENTER)){var $l=Io.json.RTC_CENTER;cr.rtcCenter[0]=$l[0],cr.rtcCenter[1]=$l[1],cr.rtcCenter[2]=$l[2]}else{var $l=Io.getGlobalProperty("RTC_CENTER",ut$4.FLOAT,3);$l&&(cr.rtcCenter[0]=$l[0],cr.rtcCenter[1]=$l[1],cr.rtcCenter[2]=$l[2])}return yn}function sh(cr,vn,yn){var Rn=cr.header||{},Bn=Rn.batchTableJsonByteLength,Co=Rn.batchTableBinaryByteLength;if(Bn&&Bn>0){var Po=Ku(vn,yn,Bn);cr.batchTableJson=JSON.parse(Po),yn+=Bn,Co&&Co>0&&(cr.batchTableBinary=new Uint8Array(vn,yn,Co),cr.batchTableBinary=new Uint8Array(cr.batchTableBinary),yn+=Co)}return yn}function uh(cr,vn,yn){var Rn=yn!==void 0?new Uint8Array(cr).subarray(vn,vn+yn):new Uint8Array(cr).subarray(vn),Bn=new Uint8Array(Rn);return Bn.buffer}function lh(cr,vn,yn){var Rn=cr.byteLength-yn;if(Rn===0)throw new Error("glTF byte length must be greater than 0.");return yn%4!==0&&console.warn("".concat(cr.type,": embedded glb is not aligned to a 4-byte boundary.")),cr.gltfArrayBuffer=uh(vn,yn,Rn),cr.byteLength}function fa(cr){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(cr);for(var vn="",yn=0,Rn=cr.length;yn<Rn;yn++)vn+=String.fromCharCode(cr[yn]);try{return decodeURIComponent(escape(vn))}catch{return vn}}var Ue$1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},si={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},da={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},Zn={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},is$1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mt$1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},on={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ch={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},Rt$1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mt$3(cr){var vn=[];for(var yn in cr)vn.push(cr[yn]);return vn}function fh(cr){var vn=Array.from(cr);return function(){for(var yn=0,Rn=vn;yn<Rn.length;yn++){var Bn=Rn[yn];typeof Bn.dispose=="function"&&Bn.dispose(),typeof Bn.close=="function"&&Bn.close()}}}var dh=function(){function cr(vn,yn,Rn){this.json=vn,this.extensions=yn,this.options=Rn,this.cache=new Map,this.disposeSet=new Set,this.textureSet=new Set,this.nodeNamesUsed={}}return cr.prototype.dispose=function(){this.cache.clear(),this.disposeSet.forEach(function(vn){typeof vn.dispose=="function"&&vn.dispose(),typeof vn.close=="function"&&vn.close()}),this.disposeSet.clear(),this.textureSet.clear(),this.extensions={},this.json={asset:{version:"unknown"}}},cr.prototype.markDefs=function(){for(var vn=this.json.nodes||[],yn=this.json.skins||[],Rn=this.json.meshes||[],Bn=0,Co=yn.length;Bn<Co;Bn++)for(var Po=yn[Bn].joints,To=0,Io=Po.length;To<Io;To++)vn[Po[To]].isBone=!0;for(var $l=0,Wl=vn.length;$l<Wl;$l++){var Xl=vn[$l];Xl.mesh!==void 0&&Xl.skin!==void 0&&(Rn[Xl.mesh].isSkinnedMesh=!0)}},cr.prototype.parse=function(){var vn=this,yn=this.json,Rn=this.extensions;this.markDefs();for(var Bn=0,Co=mt$3(Rn);Bn<Co.length;Bn++){var Po=Co[Bn];Po.markDefs(this)}return Promise.all(mt$3(Rn).map(function(To){return To.prepare(vn)})).then(function(){var To,Io,$l;return Promise.all([Promise.all(((To=yn.scenes)!==null&&To!==void 0?To:[]).map(function(Wl,Xl){return vn.loadScene(Xl)})),Promise.all(((Io=yn.animations)!==null&&Io!==void 0?Io:[]).map(function(Wl,Xl){return vn.loadAnimation(Xl)})),Promise.all((($l=yn.cameras)!==null&&$l!==void 0?$l:[]).map(function(Wl,Xl){return vn.loadCamera(Xl)}))])}).then(function(To){var Io=To[0],$l=To[1],Wl=To[2],Xl={json:yn,scene:Io[yn.scene||0],scenes:Io,animations:$l,cameras:Wl,textures:[],dispose:q$q};return Xl}).then(function(To){return Promise.all(mt$3(Rn).map(function(Io){return Io.emitResult(To,vn)})).then(function(){return To})}).then(function(To){var Io=Array.from(vn.textureSet),$l=fh(vn.disposeSet);return Object.assign(To,{textures:Io,dispose:$l}),vn.textureSet.clear(),vn.disposeSet.clear(),vn.dispose(),To})},cr.prototype.loadCamera=function(vn){var yn="camera:"+vn,Rn=this.cache.get(yn);if(Rn)return Rn;for(var Bn=null,Co=0,Po=mt$3(this.extensions);Co<Po.length;Co++){var To=Po[Co];if(Bn=To.loadCamera(vn,this),Bn)break}if(!Bn){var Io=void 0,$l=this.json.cameras[vn],Wl=$l[$l.type];Wl?$l.type==="perspective"?Io=new PerspectiveCamera(MathUtils.radToDeg(Wl.yfov),Wl.aspectRatio||1,Wl.znear||1,Wl.zfar||2e6):$l.type==="orthographic"?Io=new OrthographicCamera(-Wl.xmag,Wl.xmag,Wl.ymag,-Wl.ymag,Wl.znear,Wl.zfar):(console.warn("glTF: Invalid camera type ".concat($l.type,".")),Io=new Camera):(console.warn("glTF: Missing camera parameters."),Io=new Camera),$l.name&&(Io.name=this.createUniqueName($l.name)),Bn=Promise.resolve(Io)}return this.cache.set(yn,Bn),Bn},cr.prototype.loadSkin=function(vn){var yn="animation:"+vn,Rn=this.cache.get(yn);if(Rn)return Rn;var Bn,Co=this.json.skins[vn],Po={joints:Co.joints};return Co.inverseBindMatrices===void 0?Bn=Promise.resolve(Po):Bn=this.loadAccessor(Co.inverseBindMatrices).then(function(To){return To&&(Po.inverseBindMatrices=To),Po}),this.cache.set(yn,Bn),Bn},cr.prototype.loadAnimation=function(vn){var yn="animation:"+vn,Rn=this.cache.get(yn);if(Rn)return Rn;for(var Bn=null,Co=0,Po=mt$3(this.extensions);Co<Po.length;Co++){var To=Po[Co];if(Bn=To.loadAnimation(vn,this),Bn)break}if(!Bn){for(var Io=this.json,$l=Io.animations[vn],Wl=[],Xl=[],Yl=[],Zl=[],ey=[],Rm=0,ry=$l.channels.length;Rm<ry;Rm++){var _g=$l.channels[Rm],ty=$l.samplers[_g.sampler],ny=_g.target,iy=ny.node!==void 0?ny.node:ny.id,oy=$l.parameters!==void 0?$l.parameters[ty.input]:ty.input,ay=$l.parameters!==void 0?$l.parameters[ty.output]:ty.output;Wl.push(this.loadNode(iy)),Xl.push(this.loadAccessor(oy)),Yl.push(this.loadAccessor(ay)),Zl.push(ty),ey.push(ny)}Bn=Promise.all([Promise.all(Wl),Promise.all(Xl),Promise.all(Yl),Promise.all(Zl),Promise.all(ey)]).then(function(uy){for(var hy=uy[0],my=uy[1],ly=uy[2],sy=uy[3],cy=uy[4],fy=[],vy=function(wy,Cy){var My=hy[wy],Py=my[wy],Dy=ly[wy],qy=sy[wy],Xy=cy[wy];if(My===void 0)return"continue";My.updateMatrix(),My.matrixAutoUpdate=!0;var $y=void 0;switch(on[Xy.path]){case on.weights:$y=NumberKeyframeTrack;break;case on.rotation:$y=QuaternionKeyframeTrack;break;case on.position:case on.scale:default:$y=VectorKeyframeTrack;break}var xy=My.name?My.name:My.uuid,Ry=qy.interpolation!==void 0?ch[qy.interpolation]:InterpolateLinear,Ly=[];on[Xy.path]===on.weights?My.traverse(function(Gy){Gy.morphTargetInfluences&&Ly.push(Gy.name?Gy.name:Gy.uuid)}):Ly.push(xy);var ky=Dy.array;if(Dy.normalized){for(var Ey=Ja(ky.constructor),Iy=new Float32Array(ky.length),zy=0,Uy=ky.length;zy<Uy;zy++)Iy[zy]=ky[zy]*Ey;ky=Iy}for(var zy=0,Uy=Ly.length;zy<Uy;zy++){var Qy=new $y(Ly[zy]+"."+on[Xy.path],Py.array,ky,Ry);fy.push(Qy)}},dy=0,Ay=hy.length;dy<Ay;dy++)vy(dy);var gy=$l.name?$l.name:"animation_"+vn;return new AnimationClip(gy,void 0,fy)})}return this.cache.set(yn,Bn),Bn},cr.prototype.loadBuffer=function(vn){var yn=this.json.buffers[vn];if(yn.type&&yn.type!=="arraybuffer")throw new Error("glTF: "+yn.type+" buffer type is not supported.");var Rn="buffer:"+vn,Bn=this.cache.get(Rn);if(Bn)return Bn;for(var Co=null,Po=0,To=mt$3(this.extensions);Po<To.length;Po++){var Io=To[Po];if(Co=Io.loadBuffer(vn,this),Co)break}if(!Co){var $l=this.json.buffers[vn];Co=this.options.fetcher.ajax(this.resolveResouce($l.uri),{responseType:"arraybuffer"}).then(function(Wl){return Wl.body})}return this.cache.set(Rn,Co),Co},cr.prototype.loadBufferView=function(vn){var yn="bufferView:"+vn,Rn=this.cache.get(yn);if(Rn)return Rn;for(var Bn=null,Co=0,Po=mt$3(this.extensions);Co<Po.length;Co++){var To=Po[Co];if(Bn=To.loadBufferView(vn,this),Bn)break}if(!Bn){var Io=this.json.bufferViews[vn];Bn=this.loadBuffer(Io.buffer).then(function($l){var Wl=Io.byteLength||0,Xl=Io.byteOffset||0;return $l.slice(Xl,Xl+Wl)})}return this.cache.set(yn,Bn),Bn},cr.prototype.loadAccessor=function(vn){var yn=this,Rn="accessor:"+vn,Bn=this.cache.get(Rn);if(Bn)return Bn;var Co=null;if(!Co){var Po=this.json.accessors[vn];if(Po.bufferView===void 0&&Po.sparse===void 0)Co=Promise.resolve(null);else{var To=[];Po.bufferView!==void 0?To.push(this.loadBufferView(Po.bufferView)):To.push(Promise.resolve(null)),Po.sparse!==void 0&&(To.push(this.loadBufferView(Po.sparse.indices.bufferView)),To.push(this.loadBufferView(Po.sparse.values.bufferView))),Co=Promise.all(To).then(function(Io){var $l=Io[0],Wl=is$1[Po.type],Xl=si[Po.componentType],Yl=Xl.BYTES_PER_ELEMENT,Zl=Yl*Wl,ey=Po.byteOffset||0,Rm=Po.bufferView!==void 0?yn.json.bufferViews[Po.bufferView].byteStride:void 0,ry=Po.normalized===!0,_g,ty;if(Rm&&Rm!==Zl){var ny=Math.floor(ey/Rm),iy="InterleavedBuffer:"+Po.bufferView+":"+Po.componentType+":"+ny+":"+Po.count,oy=yn.cache.get(iy);oy||(_g=new Xl($l,ny*Rm,Po.count*Rm/Yl),oy=new InterleavedBuffer(_g,Rm/Yl),yn.cache.set(iy,oy)),ty=new InterleavedBufferAttribute(oy,Wl,ey%Rm/Yl,ry)}else $l===null?_g=new Xl(Po.count*Wl):_g=new Xl($l,ey,Po.count*Wl),ty=new BufferAttribute(_g,Wl,ry);if(Po.sparse!==void 0){var ay=is$1.SCALAR,uy=si[Po.sparse.indices.componentType],hy=Po.sparse.indices.byteOffset||0,my=Po.sparse.values.byteOffset||0,ly=new uy(Io[1],hy,Po.sparse.count*ay),sy=new Xl(Io[2],my,Po.sparse.count*Wl);$l!==null&&(ty=new BufferAttribute(ty.array.slice(),ty.itemSize,ty.normalized));for(var cy=0,fy=ly.length;cy<fy;cy++){var vy=ly[cy];if(ty.setX(vy,sy[cy*Wl]),Wl>=2&&ty.setY(vy,sy[cy*Wl+1]),Wl>=3&&ty.setZ(vy,sy[cy*Wl+2]),Wl>=4&&ty.setW(vy,sy[cy*Wl+3]),Wl>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return ty})}}return this.cache.set(Rn,Co),Co},cr.prototype.createPrimitiveKey=function(vn){for(var yn=0,Rn=mt$3(this.extensions);yn<Rn.length;yn++){var Bn=Rn[yn],Co=Bn.createPrimitiveKey(vn,this);if(Co)return Co}for(var Po="",To=Object.keys(vn.attributes).sort(),Io=0,$l=To.length;Io<$l;Io++)Po+=To[Io]+":"+vn.attributes[To[Io]]+";";return vn.indices+":"+Po+":"+vn.mode},cr.prototype.loadGeometry=function(vn){for(var yn=this,Rn=null,Bn=0,Co=mt$3(this.extensions);Bn<Co.length;Bn++){var Po=Co[Bn];if(Rn=Po.loadGeometry(vn,this),Rn)break}return Rn||(Rn=this.addGeometryPrimitiveAttributes(new BufferGeometry,vn)),Rn=Rn.then(function(To){return yn.disposeSet.add(To),To}),Rn},cr.prototype.loadImage=function(vn){for(var yn=this,Rn=null,Bn=0,Co=mt$3(this.extensions);Bn<Co.length;Bn++){var Po=Co[Bn];if(Rn=Po.loadImage(vn,this),Rn)break}if(!Rn){var To=this.json.images[vn];if(To.bufferView!==void 0){var Io=this.json.bufferViews[To.bufferView];Rn=this.loadBuffer(Io.buffer).then(function(Wl){var Xl=Io.byteOffset||0,Yl=Io.byteLength||0,Zl=new Uint8Array(Wl,Xl,Yl),ey=new Blob([Zl],{type:To.mimeType});return I0(ey)})}else if(To.uri){var $l=this.resolveResouce(To.uri);Rn=this.options.fetcher.loadImage($l,{},void 0,void 0,void 0,bi()).then(function(Wl){return Wl.body})}else throw new Error("glTF: Invalid image defs.")}return Rn=Rn.then(function(Wl){return yn.disposeSet.add(Wl),Wl}),Rn},cr.prototype.loadMaterialAsMeshStandardMaterial=function(vn){var yn=this,Rn=[],Bn=new MeshStandardMaterial;if(Bn.color=new Color(1,1,1),Bn.opacity=1,Object.keys(vn.attributes).filter(function(Wl){return Mt$1[Wl]==="color"}).length>0&&(Bn.vertexColors=!0),Object.keys(vn.attributes).filter(function(Wl){return Mt$1[Wl]==="normal"}).length===0&&(Bn.flatShading=!0),Object.keys(vn.attributes).filter(function(Wl){return Mt$1[Wl]==="tangent"}).length===0?(Bn.normalScale&&(Bn.normalScale.y*=-1),Bn.clearcoatNormalScale&&(Bn.clearcoatNormalScale.y*=-1)):Bn.vertexTangents=!0,vn.material!==void 0){var Co=this.json.materials[vn.material];Co.name&&(Bn.name=Co.name);var Po=Co.pbrMetallicRoughness||{};if(Array.isArray(Po.baseColorFactor)){var To=Po.baseColorFactor;Bn.color.fromArray(To),Bn.opacity=To[3]}Po.baseColorTexture!==void 0&&Rn.push(this.createMaterialTexture(Po.baseColorTexture).then(function(Wl){Wl.encoding=sRGBEncoding,Bn.map=Wl,yn.disposeSet.add(Wl)})),Bn.metalness=Po.metallicFactor!==void 0?Po.metallicFactor:1,Bn.roughness=Po.roughnessFactor!==void 0?Po.roughnessFactor:1,Po.metallicRoughnessTexture!==void 0&&Rn.push(this.createMaterialTexture(Po.metallicRoughnessTexture).then(function(Wl){Bn.metalnessMap=Wl,Bn.roughnessMap=Wl,yn.disposeSet.add(Wl)})),Co.doubleSided===!0&&(Bn.side=DoubleSide);var Io=Co.alphaMode||Rt$1.OPAQUE;if(Io===Rt$1.BLEND?(Bn.transparent=!0,Bn.depthWrite=!1):(Bn.transparent=!1,Io===Rt$1.MASK&&(Bn.alphaTest=Co.alphaCutoff!==void 0?Co.alphaCutoff:.5)),Co.normalTexture!==void 0&&(Rn.push(this.createMaterialTexture(Co.normalTexture).then(function(Wl){Bn.normalMap=Wl,yn.disposeSet.add(Wl)})),Bn.normalScale=new Vector2(1,1),Co.normalTexture.scale!==void 0)){var $l=Co.normalTexture.scale;Bn.normalScale.set($l,$l)}Co.occlusionTexture!==void 0&&(Rn.push(this.createMaterialTexture(Co.occlusionTexture).then(function(Wl){Bn.aoMap=Wl,yn.disposeSet.add(Wl)})),Co.occlusionTexture.strength!==void 0&&(Bn.aoMapIntensity=Co.occlusionTexture.strength)),Co.emissiveFactor!==void 0&&(Bn.emissive=new Color().fromArray(Co.emissiveFactor)),Co.emissiveTexture!==void 0&&Rn.push(this.createMaterialTexture(Co.emissiveTexture).then(function(Wl){Bn.emissiveMap=Wl,yn.disposeSet.add(Wl)}))}return this.disposeSet.add(Bn),Promise.all(Rn).then(function(){return Bn})},cr.prototype.loadMaterialAsMeshBasicMaterial=function(vn){var yn=this,Rn=[],Bn=new MeshBasicMaterial;if(Bn.color=new Color(1,1,1),Bn.opacity=1,Object.keys(vn.attributes).filter(function($l){return Mt$1[$l]==="color"}).length>0&&(Bn.vertexColors=!0),Object.keys(vn.attributes).filter(function($l){return Mt$1[$l]==="normal"}).length===0&&(Bn.flatShading=!0),Object.keys(vn.attributes).filter(function($l){return Mt$1[$l]==="tangent"}).length===0&&(Bn.normalScale&&(Bn.normalScale.y*=-1),Bn.clearcoatNormalScale&&(Bn.clearcoatNormalScale.y*=-1)),vn.material!==void 0){var Co=this.json.materials[vn.material];Co.name&&(Bn.name=Co.name);var Po=Co.pbrMetallicRoughness||{};if(Array.isArray(Po.baseColorFactor)){var To=Po.baseColorFactor;Bn.color.fromArray(To),Bn.opacity=To[3]}Po.baseColorTexture!==void 0&&Rn.push(this.createMaterialTexture(Po.baseColorTexture).then(function($l){Bn.map=$l,yn.disposeSet.add($l)})),Co.doubleSided===!0&&(Bn.side=DoubleSide);var Io=Co.alphaMode||Rt$1.OPAQUE;Io===Rt$1.BLEND?(Bn.transparent=!0,Bn.depthWrite=!1):(Bn.transparent=!1,Io===Rt$1.MASK&&(Bn.alphaTest=Co.alphaCutoff!==void 0?Co.alphaCutoff:.5)),Co.occlusionTexture!==void 0&&(Rn.push(this.createMaterialTexture(Co.occlusionTexture).then(function($l){Bn.aoMap=$l,yn.disposeSet.add($l)})),Co.occlusionTexture.strength!==void 0&&(Bn.aoMapIntensity=Co.occlusionTexture.strength))}return this.disposeSet.add(Bn),Promise.all(Rn).then(function(){return Bn})},cr.prototype.loadMaterialAsLineBasicMaterial=function(vn){var yn=[],Rn=new LineBasicMaterial;if(Rn.color=new Color(1,1,1),Rn.opacity=1,Object.keys(vn.attributes).filter(function(Io){return Mt$1[Io]==="color"}).length>0&&(Rn.vertexColors=!0),Object.keys(vn.attributes).filter(function(Io){return Mt$1[Io]==="tangent"}).length===0&&(Rn.normalScale&&(Rn.normalScale.y*=-1),Rn.clearcoatNormalScale&&(Rn.clearcoatNormalScale.y*=-1)),vn.material!==void 0){var Bn=this.json.materials[vn.material];Bn.name&&(Rn.name=Bn.name);var Co=Bn.pbrMetallicRoughness||{};if(Array.isArray(Co.baseColorFactor)){var Po=Co.baseColorFactor;Rn.color.fromArray(Po),Rn.opacity=Po[3]}Bn.doubleSided===!0&&(Rn.side=DoubleSide);var To=Bn.alphaMode||Rt$1.OPAQUE;To===Rt$1.BLEND?(Rn.transparent=!0,Rn.depthWrite=!1):(Rn.transparent=!1,To===Rt$1.MASK&&(Rn.alphaTest=Bn.alphaCutoff!==void 0?Bn.alphaCutoff:.5))}return this.disposeSet.add(Rn),Promise.all(yn).then(function(){return Rn})},cr.prototype.loadMaterialAsPointsMaterial=function(vn){var yn=this,Rn=[],Bn=new PointsMaterial;if(Bn.color=new Color(1,1,1),Bn.opacity=1,Bn.sizeAttenuation=!1,Object.keys(vn.attributes).filter(function($l){return Mt$1[$l]==="color"}).length>0&&(Bn.vertexColors=!0),Object.keys(vn.attributes).filter(function($l){return Mt$1[$l]==="tangent"}).length===0&&(Bn.normalScale&&(Bn.normalScale.y*=-1),Bn.clearcoatNormalScale&&(Bn.clearcoatNormalScale.y*=-1)),vn.material!==void 0){var Co=this.json.materials[vn.material];Co.name&&(Bn.name=Co.name);var Po=Co.pbrMetallicRoughness||{};if(Array.isArray(Po.baseColorFactor)){var To=Po.baseColorFactor;Bn.color.fromArray(To),Bn.opacity=To[3]}Po.baseColorTexture!==void 0&&Rn.push(this.createMaterialTexture(Po.baseColorTexture).then(function($l){$l.encoding=sRGBEncoding,Bn.map=$l,yn.disposeSet.add($l)})),Co.doubleSided===!0&&(Bn.side=DoubleSide);var Io=Co.alphaMode||Rt$1.OPAQUE;Io===Rt$1.BLEND?(Bn.transparent=!0,Bn.depthWrite=!1):(Bn.transparent=!1,Io===Rt$1.MASK&&(Bn.alphaTest=Co.alphaCutoff!==void 0?Co.alphaCutoff:.5))}return this.disposeSet.add(Bn),Promise.all(Rn).then(function(){return Bn})},cr.prototype.loadMaterial=function(vn){var yn=this,Rn,Bn=(Rn=vn.mode)!==null&&Rn!==void 0?Rn:Ue$1.TRIANGLES,Co="material:"+this.createPrimitiveKey(vn),Po=this.cache.get(Co);if(Po)return Po;for(var To=null,Io=0,$l=mt$3(this.extensions);Io<$l.length;Io++){var Wl=$l[Io];if(To=Wl.loadMaterial(vn,this),To)break}if(!To)if(Bn===Ue$1.TRIANGLES||Bn===Ue$1.TRIANGLE_STRIP||Bn===Ue$1.TRIANGLE_FAN)To=this.loadMaterialAsMeshStandardMaterial(vn);else if(Bn===Ue$1.LINES||Bn===Ue$1.LINE_STRIP||Bn===Ue$1.LINE_LOOP)To=this.loadMaterialAsLineBasicMaterial(vn);else if(Bn===Ue$1.POINTS)To=this.loadMaterialAsPointsMaterial(vn);else throw new Error("glTF: Primitive mode unsupported: "+Bn);return To=To.then(function(Xl){return Promise.all(mt$3(yn.extensions).map(function(Yl){return Yl.extendMaterial(Xl,vn,yn)})).then(function(){return Xl})}),this.cache.set(Co,To),To},cr.prototype.loadTexture=function(vn){var yn=this,Rn="texture:"+vn,Bn=this.cache.get(Rn);if(Bn)return Bn;for(var Co=null,Po=0,To=mt$3(this.extensions);Po<To.length;Po++){var Io=To[Po];if(Co=Io.loadTexture(vn,this),Co)break}if(!Co){var $l=this.json.textures[vn];Co=this.loadImage($l.source).then(function(Wl){var Xl=new Texture(Wl);Xl.needsUpdate=!0,Xl.flipY=!1,$l.name&&(Xl.name=$l.name);var Yl=yn.json.samplers||{},Zl=Yl[$l.sampler]||{};return Xl.magFilter=da[Zl.magFilter]||LinearFilter,Xl.minFilter=da[Zl.minFilter]||LinearMipmapLinearFilter,Xl.wrapS=Zn[Zl.wrapS]||RepeatWrapping,Xl.wrapT=Zn[Zl.wrapT]||RepeatWrapping,Xl.onUpdate=function(){Wl.close()},Xl})}return Co=Co.then(function(Wl){return yn.disposeSet.add(Wl),Wl}),this.cache.set(Rn,Co),Co},cr.prototype.loadMesh=function(vn){for(var yn=this,Rn=null,Bn=0,Co=mt$3(this.extensions);Bn<Co.length;Bn++){var Po=Co[Bn];if(Rn=Po.loadMesh(vn,this),Rn)break}if(!Rn){var To=this.json.meshes[vn],Io=To.primitives,$l=Promise.all(Io.map(function(Xl){return yn.loadGeometry(Xl)})),Wl=Promise.all(Io.map(function(Xl){return yn.loadMaterial(Xl)}));Rn=Promise.all([$l,Wl]).then(function(Xl){for(var Yl=Xl[0],Zl=Xl[1],ey=[],Rm=0;Rm<Io.length;Rm++){var ry=Io[Rm],_g=Yl[Rm],ty=Zl[Rm],ny=ry.mode||Ue$1.TRIANGLES,iy=void 0;if(ny===Ue$1.TRIANGLES||ny===Ue$1.TRIANGLE_STRIP||ny===Ue$1.TRIANGLE_FAN)if(ny===Ue$1.TRIANGLE_STRIP?_g=yn.toGeometryTrianglesDrawMode(_g,TriangleStripDrawMode):ny===Ue$1.TRIANGLE_FAN&&(_g=yn.toGeometryTrianglesDrawMode(_g,TriangleFanDrawMode)),yn.disposeSet.add(_g),To.isSkinnedMesh){var oy=new SkinnedMesh(_g,ty);_g.attributes.skinWeight.normalized||oy.normalizeSkinWeights(),iy=oy}else iy=new Mesh(_g,ty);else if(ny===Ue$1.POINTS)iy=new Points(_g,ty);else if(ny===Ue$1.LINES)iy=new LineSegments(_g,ty);else if(ny===Ue$1.LINE_STRIP)iy=new Line(_g,ty);else if(ny===Ue$1.LINE_LOOP)iy=new LineLoop(_g,ty);else throw new Error("glTF: Primitive mode unsupported: "+ny);if(Object.keys(_g.morphAttributes).length>0){if(To.weights!==void 0)for(var ay=0,uy=To.weights.length;ay<uy;ay++)iy.morphTargetInfluences[ay]=To.weights[ay];if(To.extras&&Array.isArray(To.extras.targetNames)){var hy=To.extras.targetNames;if(iy.morphTargetInfluences.length===hy.length){iy.morphTargetDictionary={};for(var ay=0,uy=hy.length;ay<uy;ay++)iy.morphTargetDictionary[hy[ay]]=ay}else console.warn("glTF: Invalid extras.targetNames length. Ignoring names.")}}iy.name=yn.createUniqueName(To.name||"mesh_"+vn),ey.push(iy)}if(ey.length===1)return ey[0];for(var my=new Group$1,ly=0,sy=ey;ly<sy.length;ly++){var iy=sy[ly];my.add(iy)}return my})}return Rn},cr.prototype.loadNodeAttachments=function(vn){for(var yn=[],Rn=0,Bn=mt$3(this.extensions);Rn<Bn.length;Rn++){var Co=Bn[Rn],Po=Co.loadNodeAttachments(vn,this);Po&&yn.push(Po)}return yn},cr.prototype.loadNode=function(vn){var yn="node:"+vn,Rn=this.cache.get(yn);if(Rn)return Rn;var Bn=this.json,Co=Bn.nodes[vn],Po=Co.name?this.createUniqueName(Co.name):"",To=[];Co.mesh!==void 0&&To.push(this.loadMesh(Co.mesh).then(function(Yl){if(Co.weights!==void 0){var Zl=Co.weights;Yl.traverse(function(ey){if(ey instanceof Mesh||ey instanceof Line||ey instanceof Points)for(var Rm=0,ry=Zl.length;Rm<ry;Rm++)ey.morphTargetInfluences[Rm]=Zl[Rm]})}return Yl})),Co.camera!==void 0&&To.push(this.loadCamera(Co.camera));for(var Io=this.loadNodeAttachments(vn),$l=0,Wl=Io;$l<Wl.length;$l++){var Xl=Wl[$l];To.push(Xl)}return Promise.all(To).then(function(Yl){var Zl;if(Co.isBone===!0?Zl=new Bone:Yl.length>1?Zl=new Group$1:Yl.length===1?Zl=Yl[0]:Zl=new Object3D,Zl!==Yl[0])for(var ey=0,Rm=Yl.length;ey<Rm;ey++)Zl.add(Yl[ey]);if(Co.name&&(Zl.name=Po),Co.matrix!==void 0){var ry=new Matrix4;ry.fromArray(Co.matrix),Zl.applyMatrix4(ry)}else Co.translation!==void 0&&Zl.position.fromArray(Co.translation),Co.rotation!==void 0&&Zl.quaternion.fromArray(Co.rotation),Co.scale!==void 0&&Zl.scale.fromArray(Co.scale);return Zl})},cr.prototype.loadScene=function(vn){var yn=this.json,Rn=yn.scenes[vn],Bn=new Group$1;Rn.name&&(Bn.name=this.createUniqueName(Rn.name));for(var Co=Rn.nodes||[],Po=[],To=0,Io=Co.length;To<Io;To++)Po.push(this.buildNodeHierarchy(Co[To],Bn));return Promise.all(Po).then(function(){return Bn})},cr.prototype.createMaterialTexture=function(vn){var yn=this;return this.loadTexture(vn.index).then(function(Rn){for(var Bn=0,Co=mt$3(yn.extensions);Bn<Co.length;Bn++){var Po=Co[Bn],To=Po.extendTexture(Rn,vn,yn);To&&(Rn=To)}return yn.textureSet.add(Rn),yn.disposeSet.add(Rn),Rn})},cr.prototype.addGeometryPrimitiveAttributes=function(vn,yn){var Rn=this,Bn=yn.attributes,Co=[],Po=function(oy){var ay=Mt$1[oy]||oy.toLowerCase();if(ay in vn.attributes)return"continue";Co.push(To.loadAccessor(Bn[oy]).then(function(uy){uy&&vn.setAttribute(ay,uy)}))},To=this;for(var Io in Bn)Po(Io);yn.indices!==void 0&&!vn.index&&Co.push(this.loadAccessor(yn.indices).then(function(oy){oy&&vn.setIndex(oy)}));var $l=new Box3;if(Bn.POSITION!==void 0){var Wl=this.json.accessors[Bn.POSITION],Xl=Wl.min,Yl=Wl.max;if(Xl!==void 0&&Yl!==void 0){if($l.set(new Vector3(Xl[0],Xl[1],Xl[2]),new Vector3(Yl[0],Yl[1],Yl[2])),Wl.normalized){var Zl=Ja(si[Wl.componentType]);$l.min.multiplyScalar(Zl),$l.max.multiplyScalar(Zl)}}else console.warn("glTF: Missing min/max properties for accessor POSITION.")}var ey=yn.targets;if(ey!==void 0){for(var Rm=new Vector3,ry=new Vector3,_g=0,ty=ey.length;_g<ty;_g++){var ny=ey[_g];if(ny.POSITION!==void 0){var Wl=this.json.accessors[ny.POSITION],Xl=Wl.min,Yl=Wl.max;if(Xl!==void 0&&Yl!==void 0){if(ry.setX(Math.max(Math.abs(Xl[0]),Math.abs(Yl[0]))),ry.setY(Math.max(Math.abs(Xl[1]),Math.abs(Yl[1]))),ry.setZ(Math.max(Math.abs(Xl[2]),Math.abs(Yl[2]))),Wl.normalized){var Zl=Ja(si[Wl.componentType]);ry.multiplyScalar(Zl)}Rm.max(ry)}else console.warn("glTF: Missing min/max properties for accessor POSITION.")}}$l.expandByVector(Rm)}vn.boundingBox=$l;var iy=new Sphere;return $l.getCenter(iy.center),iy.radius=$l.min.distanceTo($l.max)/2,vn.boundingSphere=iy,Promise.all(Co).then(function(){if(vn.attributes.uv&&!vn.attributes.uv2&&Rn.options.copyUV2&&vn.setAttribute("uv2",vn.attributes.uv),yn.targets){for(var oy=!1,ay=!1,uy=0,hy=yn.targets.length;uy<hy;uy++){var my=yn.targets[uy];if(my.POSITION!==void 0&&(oy=!0),my.NORMAL!==void 0&&(ay=!0),oy&&ay)break}if(!oy&&!ay)return vn;var ly=[];vn.morphTargetsRelative=!0;for(var sy=function(vy,dy){var Ay=yn.targets[vy];oy?ly.push(Rn.loadAccessor(Ay.POSITION).then(function(gy){gy&&(vn.morphAttributes.position[vy]=gy)})):vn.morphAttributes.position[vy]=vn.attributes.position,ay?ly.push(Rn.loadAccessor(Ay.NORMAL).then(function(gy){gy&&(vn.morphAttributes.normal[vy]=gy)})):vn.morphAttributes.normal[vy]=vn.attributes.normal},uy=0,hy=yn.targets.length;uy<hy;uy++)sy(uy,hy);return Promise.all(ly).then(function(){return vn})}else return vn})},cr.prototype.buildNodeHierarchy=function(vn,yn){var Rn=this,Bn=this.json.nodes[vn];return this.loadNode(vn).then(function(Co){if(Bn.skin===void 0)return Co;var Po;return Rn.loadSkin(Bn.skin).then(function(To){Po=To;for(var Io=[],$l=0,Wl=Po.joints.length;$l<Wl;$l++)Io.push(Rn.loadNode(Po.joints[$l]));return Promise.all(Io)}).then(function(To){return Co.traverse(function(Io){if(Io instanceof SkinnedMesh){for(var $l=[],Wl=[],Xl=0,Yl=To.length;Xl<Yl;Xl++){var Zl=To[Xl];if(Zl instanceof Bone){$l.push(Zl);var ey=new Matrix4;Po.inverseBindMatrices!==void 0&&ey.fromArray(Po.inverseBindMatrices.array,Xl*16),Wl.push(ey)}else console.warn('glTF: Joint "%s" could not be found.',Po.joints[Xl])}Io.bind(new Skeleton($l,Wl),Io.matrixWorld)}}),Co})}).then(function(Co){yn.add(Co);var Po=[];if(Bn.children)for(var To=Bn.children,Io=0,$l=To.length;Io<$l;Io++){var Wl=To[Io];Po.push(Rn.buildNodeHierarchy(Wl,Co))}return Promise.all(Po).then(function(){return Co})})},cr.prototype.createUniqueName=function(vn){for(var yn=PropertyBinding.sanitizeNodeName(vn||""),Rn=yn,Bn=1;this.nodeNamesUsed[Rn];++Bn)Rn=yn+"_"+Bn;return this.nodeNamesUsed[Rn]=!0,Rn},cr.prototype.resolveResouce=function(vn){return ct$4(this.options.resourcePath,Sa(vn,this.options.search))},cr.prototype.toGeometryTrianglesDrawMode=function(vn,yn){var Rn=vn.getIndex();if(Rn===null){var Bn=[],Co=vn.getAttribute("position");if(Co!==void 0){for(var Po=0;Po<Co.count;Po++)Bn.push(Po);vn.setIndex(Bn),Rn=vn.getIndex()}}if(Rn===null)return console.error("glTF: Undefined position attribute. Processing not possible."),vn;var To=Rn.count-2,Io=[];if(yn===TriangleFanDrawMode)for(var Po=1;Po<=To;Po++)Io.push(Rn.getX(0)),Io.push(Rn.getX(Po)),Io.push(Rn.getX(Po+1));else for(var Po=0;Po<To;Po++)Po%2===0?(Io.push(Rn.getX(Po)),Io.push(Rn.getX(Po+1)),Io.push(Rn.getX(Po+2))):(Io.push(Rn.getX(Po+2)),Io.push(Rn.getX(Po+1)),Io.push(Rn.getX(Po)));Io.length/3!==To&&console.error("glTF: Unable to generate correct amount of triangles.");var $l=vn.clone();return $l.setIndex(Io),this.disposeSet.add($l),$l},cr}();function Ja(cr){switch(cr){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("glTF: Unsupported normalized accessor component type.")}}var Er$1=function(){function cr(){}return cr.prototype.markDefs=function(vn){},cr.prototype.prepare=function(vn){},cr.prototype.emitResult=function(vn,yn){},cr.prototype.createPrimitiveKey=function(vn,yn){},cr.prototype.extendTexture=function(vn,yn,Rn){return null},cr.prototype.loadBuffer=function(vn,yn){return null},cr.prototype.loadBufferView=function(vn,yn){return null},cr.prototype.loadImage=function(vn,yn){return null},cr.prototype.loadTexture=function(vn,yn){return null},cr.prototype.loadGeometry=function(vn,yn){return null},cr.prototype.loadMaterial=function(vn,yn){return null},cr.prototype.extendMaterial=function(vn,yn,Rn){return Promise.resolve()},cr.prototype.loadMesh=function(vn,yn){return null},cr.prototype.loadNodeAttachments=function(vn,yn){return null},cr.prototype.loadCamera=function(vn,yn){return null},cr.prototype.loadAnimation=function(vn,yn){return null},cr}(),hh=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.header={magic:"",version:0,length:0},yn.content="",yn.body=null,yn}return vn.getMagic=function(yn){return fa(new Uint8Array(yn.slice(0,4)))},vn.prototype.loadGlbBinary=function(yn){var Rn=new DataView(yn,0,vn.HEADER_LENGTH);if(this.header={magic:vn.getMagic(yn),version:Rn.getUint32(4,!0),length:Rn.getUint32(8,!0)},this.header.magic!==vn.HEADER_MAGIC)throw new Error("glTF:KHR_binary_glTF: Unsupported.");if(this.header.version<2)throw new Error("glTF:KHR_binary_glTF: Legacy binary file detected.");for(var Bn=new DataView(yn,vn.HEADER_LENGTH),Co=0,Po=null,To=null;Co<Bn.byteLength;){var Io=Bn.getUint32(Co,!0);if(Co+=4,Io!==0){var $l=Bn.getUint32(Co,!0);if(Co+=4,$l===vn.CHUNK_TYPES.JSON){var Wl=new Uint8Array(yn,vn.HEADER_LENGTH+Co,Io);Po=fa(Wl)}else if($l===vn.CHUNK_TYPES.BIN){var Xl=vn.HEADER_LENGTH+Co;To=yn.slice(Xl,Xl+Io)}Co+=Io}}if(Po===null)throw new Error("glTF:KHR_binary_glTF: JSON content not found.");this.content=Po,this.body=To},vn.prototype.loadBuffer=function(yn,Rn){var Bn=Rn.json.buffers[yn];return Bn.uri===void 0&&yn===0&&this.body?Promise.resolve(this.body):null},vn.prototype.clear=function(){this.body=null,this.content=""},vn.HEADER_MAGIC="glTF",vn.HEADER_LENGTH=12,vn.CHUNK_TYPES={JSON:1313821514,BIN:5130562},vn}(Er$1),ph="https://vr-public.realsee-cdn.cn/release/static/image/release/five/resource/draco/1.5.6/",as={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},os={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},vh=function(){function cr(){this.decoderPath=ph,this.decoderConfig={},this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL=""}return cr.prototype.setDecoderPath=function(vn){this.decoderPath=vn},cr.prototype.setDecoderConfig=function(vn){return this.decoderConfig=vn,this},cr.prototype.setWorkerLimit=function(vn){return this.workerLimit=vn,this},cr.prototype.decodeDracoFile=function(vn,yn,Rn,Bn){var Co={attributeIDs:Rn||as,attributeTypes:Bn||os,useUniqueIDs:!!Rn};this.decodeGeometry(vn,Co).then(yn)},cr.prototype.decodeGeometry=function(vn,yn){var Rn=this;yn===void 0&&(yn={attributeIDs:as,attributeTypes:os,useUniqueIDs:!1});for(var Bn in yn.attributeTypes){var Co=yn.attributeTypes[Bn];Co.BYTES_PER_ELEMENT!==void 0&&(yn.attributeTypes[Bn]=Co.name)}var Po,To=this.workerNextTaskID++,Io=vn.byteLength,$l=this._getWorker(To,Io).then(function(Wl){return Po=Wl,new Promise(function(Xl,Yl){Po._callbacks[To]={resolve:Xl,reject:Yl},Po.postMessage({type:"decode",id:To,taskConfig:yn,buffer:vn},[vn])})}).then(function(Wl){return Rn._createGeometry(Wl.geometry)});return $l.catch(function(){return!0}).then(function(){Po&&To&&Rn._releaseTask(Po,To)}),$l},cr.prototype._createGeometry=function(vn){var yn=new BufferGeometry;vn.index&&yn.setIndex(new BufferAttribute(vn.index.array,1));for(var Rn=0;Rn<vn.attributes.length;Rn++){var Bn=vn.attributes[Rn],Co=Bn.name,Po=Bn.array,To=Bn.itemSize,Io=!(Po instanceof Float32Array||Po instanceof Float64Array);yn.setAttribute(Co,new BufferAttribute(Po,To,Io))}return yn},cr.prototype._initDecoder=function(){var vn=this;if(this.decoderPending)return this.decoderPending;var yn=typeof WebAssembly!="object"||this.decoderConfig.type==="js";if(yn){var Rn=Kn(this.decoderPath+"draco_decoder.js",{responseType:"text"}).then(function(Co){return Co.body});this.decoderPending=Rn.then(function(Co){var Po=["/* draco decoder */",Co,"","/* worker */",ss].join(`
`);vn.workerSourceURL=URL.createObjectURL(new Blob([Po]))})}else{var Rn=Kn(this.decoderPath+"draco_wasm_wrapper.js",{responseType:"text"}).then(function(Po){return Po.body}),Bn=Kn(this.decoderPath+"draco_decoder.wasm",{responseType:"arraybuffer"}).then(function(Po){return Po.body});this.decoderPending=Promise.all([Rn,Bn]).then(function(Po){var To=Po[0],Io=Po[1];vn.decoderConfig.wasmBinary=Io;var $l=["/* draco decoder */",To,"","/* worker */",ss].join(`
`);vn.workerSourceURL=URL.createObjectURL(new Blob([$l]))})}return this.decoderPending},cr.prototype._getWorker=function(vn,yn){var Rn=this;return this._initDecoder().then(function(){if(Rn.workerPool.length<Rn.workerLimit){var Bn=new Worker(Rn.workerSourceURL);Bn._callbacks={},Bn._taskCosts={},Bn._taskLoad=0,Bn.postMessage({type:"init",decoderConfig:Rn.decoderConfig}),Bn.onmessage=function(Po){var To=Po.data;switch(To.type){case"decode":Bn._callbacks[To.id].resolve(To);break;case"error":Bn._callbacks[To.id].reject(To);break;default:console.error('DRACO: Unexpected message, "'+To.type+'"')}},Rn.workerPool.push(Bn)}else Rn.workerPool.sort(function(Po,To){return Po._taskLoad>To._taskLoad?-1:1});var Co=Rn.workerPool[Rn.workerPool.length-1];return Co._taskCosts[vn]=yn,Co._taskLoad+=yn,Co})},cr.prototype._releaseTask=function(vn,yn){vn._taskLoad-=vn._taskCosts[yn],delete vn._callbacks[yn],delete vn._taskCosts[yn]},cr.prototype.dispose=function(){for(var vn=0;vn<this.workerPool.length;++vn)this.workerPool[vn].terminate();return this.workerPool.length=0,this},cr}(),ha=new vh,ss=`
  let decoderConfig;
  let decoderPending;

  onmessage = function ( e ) {

    const message = e.data;

    switch ( message.type ) {

      case 'init':
        decoderConfig = message.decoderConfig;
        decoderPending = new Promise( function ( resolve/*, reject*/ ) {

          decoderConfig.onModuleLoaded = function ( draco ) {

            // Module is Promise-like. Wrap before resolving to avoid loop.
            resolve( { draco: draco } );

          };

          DracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef

        } );
        break;

      case 'decode':
        const buffer = message.buffer;
        const taskConfig = message.taskConfig;
        decoderPending.then( ( module ) => {

          const draco = module.draco;
          const decoder = new draco.Decoder();
          const decoderBuffer = new draco.DecoderBuffer();
          decoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );

          try {

            const geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );

            const buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );

            if ( geometry.index ) buffers.push( geometry.index.array.buffer );

            self.postMessage( { type: 'decode', id: message.id, geometry }, buffers );

          } catch ( error ) {

            console.error( error );

            self.postMessage( { type: 'error', id: message.id, error: error.message } );

          } finally {

            draco.destroy( decoderBuffer );
            draco.destroy( decoder );

          }

        } );
        break;

    }

  };

  function decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {

    const attributeIDs = taskConfig.attributeIDs;
    const attributeTypes = taskConfig.attributeTypes;

    let dracoGeometry;
    let decodingStatus;

    const geometryType = decoder.GetEncodedGeometryType( decoderBuffer );

    if ( geometryType === draco.TRIANGULAR_MESH ) {

      dracoGeometry = new draco.Mesh();
      decodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );

    } else if ( geometryType === draco.POINT_CLOUD ) {

      dracoGeometry = new draco.PointCloud();
      decodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );

    } else {

      throw new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );

    }

    if ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {

      throw new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );

    }

    const geometry = { index: null, attributes: [] };

    // Gather all vertex attributes.
    for ( const attributeName in attributeIDs ) {

      const attributeType = self[ attributeTypes[ attributeName ] ];

      let attribute;
      let attributeID;

      // A Draco file may be created with default vertex attributes, whose attribute IDs
      // are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,
      // a Draco file may contain a custom set of attributes, identified by known unique
      // IDs. glTF files always do the latter, and .drc files typically do the former.
      if ( taskConfig.useUniqueIDs ) {

        attributeID = attributeIDs[ attributeName ];
        attribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );

      } else {

        attributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );

        if ( attributeID === - 1 ) continue;

        attribute = decoder.GetAttribute( dracoGeometry, attributeID );

      }

      geometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );

    }

    // Add index.
    if ( geometryType === draco.TRIANGULAR_MESH ) {

      geometry.index = decodeIndex( draco, decoder, dracoGeometry );

    }

    draco.destroy( dracoGeometry );

    return geometry;

  }

  function decodeIndex( draco, decoder, dracoGeometry ) {

    const numFaces = dracoGeometry.num_faces();
    const numIndices = numFaces * 3;
    const byteLength = numIndices * 4;

    const ptr = draco._malloc( byteLength );
    decoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );
    const index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();
    draco._free( ptr );

    return { array: index, itemSize: 1 };

  }

  function decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {

    const numComponents = attribute.num_components();
    const numPoints = dracoGeometry.num_points();
    const numValues = numPoints * numComponents;
    const byteLength = numValues * attributeType.BYTES_PER_ELEMENT;
    const dataType = getDracoDataType( draco, attributeType );

    const ptr = draco._malloc( byteLength );
    decoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );
    const array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();
    draco._free( ptr );

    return {
      name: attributeName,
      array: array,
      itemSize: numComponents
    };

  }

  function getDracoDataType( draco, attributeType ) {

    switch ( attributeType ) {

      case Float32Array: return draco.DT_FLOAT32;
      case Int8Array: return draco.DT_INT8;
      case Int16Array: return draco.DT_INT16;
      case Int32Array: return draco.DT_INT32;
      case Uint8Array: return draco.DT_UINT8;
      case Uint16Array: return draco.DT_UINT16;
      case Uint32Array: return draco.DT_UINT32;

    }

  }
`,Ka="KHR_draco_mesh_compression",mh=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.loadGeometry=function(yn,Rn){return yn.extensions&&yn.extensions[Ka]?this.decodePrimitive(yn,Rn).then(function(Bn){return Rn.addGeometryPrimitiveAttributes(Bn,yn)}):null},vn.prototype.decodePrimitive=function(yn,Rn){var Bn=Rn.json,Co=yn.extensions[Ka].bufferView,Po=yn.extensions[Ka].attributes,To={},Io={},$l={};for(var Wl in Po){var Xl=Mt$1[Wl]||Wl.toLowerCase();To[Xl]=Po[Wl]}for(var Wl in yn.attributes){var Xl=Mt$1[Wl]||Wl.toLowerCase();if(Po[Wl]!==void 0){var Yl=Bn.accessors[yn.attributes[Wl]],Zl=si[Yl.componentType];$l[Xl]=Zl,Io[Xl]=Yl.normalized===!0}}return Rn.loadBufferView(Co).then(function(ey){return new Promise(function(Rm){ha.decodeDracoFile(ey,function(ry){for(var _g in ry.attributes){var ty=ry.attributes[_g],ny=Io[_g];ny!==void 0&&(ty.normalized=ny)}Rm(ry)},To,$l)})})},vn}(Er$1),Ah="https://vr-public.realsee-cdn.cn/release/static/image/release/five/resource/basis/1.16/",gh=2,yh=1,bh=function(){function cr(vn){this.pool=vn,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0,this.workerCreator=null}return cr.prototype._initWorker=function(vn){if(this.workerCreator&&!this.workers[vn]){var yn=this.workerCreator();yn.addEventListener("message",this._onMessage.bind(this,vn)),this.workers[vn]=yn}},cr.prototype._getIdleWorker=function(){for(var vn=0;vn<this.pool;vn++)if(!(this.workerStatus&1<<vn))return vn;return-1},cr.prototype._onMessage=function(vn,yn){var Rn=this.workersResolve[vn];if(Rn&&Rn(yn),this.queue.length){var Bn=this.queue.shift(),Co=Bn.resolve,Po=Bn.msg,To=Bn.transfer;this.workersResolve[vn]=Co,this.workers[vn].postMessage(Po,To)}else this.workerStatus^=1<<vn},cr.prototype.setWorkerCreator=function(vn){this.workerCreator=vn},cr.prototype.setWorkerLimit=function(vn){this.pool=vn},cr.prototype.postMessage=function(vn,yn){var Rn=this;return new Promise(function(Bn){var Co=Rn._getIdleWorker();Co!==-1?(Rn._initWorker(Co),Rn.workerStatus|=1<<Co,Rn.workersResolve[Co]=Bn,Rn.workers[Co].postMessage(vn,yn)):Rn.queue.push({resolve:Bn,msg:vn,transfer:yn})})},cr.prototype.dispose=function(){this.workers.forEach(function(vn){return vn.terminate()}),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0},cr}(),xh=function(){function cr(){this.transcoderPath=Ah,this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new bh(4),this.workerSourceURL="",this.workerConfig=null}return cr.prototype.setTranscoderPath=function(vn){this.transcoderPath=vn},cr.prototype.detectSupport=function(vn){if(!this.workerConfig){var yn=console.warn;console.warn=function(){},this.workerConfig={astcSupported:!!vn.extensions.get("WEBGL_compressed_texture_astc"),etc1Supported:!!vn.extensions.get("WEBGL_compressed_texture_etc1"),etc2Supported:!!vn.extensions.get("WEBGL_compressed_texture_etc"),dxtSupported:!!vn.extensions.get("WEBGL_compressed_texture_s3tc"),bptcSupported:!!vn.extensions.get("EXT_texture_compression_bptc"),pvrtcSupported:!!vn.extensions.get("WEBGL_compressed_texture_pvrtc")||!!vn.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc")},console.warn=yn}return this},cr.prototype.init=function(){var vn=this;if(!this.transcoderPending){var yn=Kn(this.transcoderPath+"basis_transcoder.js",{responseType:"text"}).then(function(Bn){return Bn.body}),Rn=Kn(this.transcoderPath+"basis_transcoder.wasm",{responseType:"arraybuffer"}).then(function(Bn){return Bn.body});this.transcoderPending=Promise.all([yn,Rn]).then(function(Bn){var Co=Bn[0],Po=Bn[1],To=["/* constants */","let _EngineFormat = "+JSON.stringify(Mh),"let _TranscoderFormat = "+JSON.stringify(Sh),"let _BasisFormat = "+JSON.stringify(wh),"/* basis_transcoder.js */",Co,"/* worker */",Eh].join(`
`);vn.workerSourceURL=URL.createObjectURL(new Blob([To])),vn.transcoderBinary=Po,vn.workerPool.setWorkerCreator(function(){var Io=new Worker(vn.workerSourceURL),$l=vn.transcoderBinary.slice(0);return Io.postMessage({type:"init",config:vn.workerConfig,transcoderBinary:$l},[$l]),Io})})}return this.transcoderPending},cr.prototype.parse=function(vn){return this._createTexture([vn])},cr.prototype._createTextureFrom=function(vn){var yn=vn.mipmaps,Rn=vn.width,Bn=vn.height,Co=vn.format,Po=vn.type,To=vn.error,Io=vn.dfdTransferFn,$l=vn.dfdFlags;if(Po==="error")return Promise.reject(To);var Wl=new CompressedTexture(yn,Rn,Bn,Co,UnsignedByteType);return Wl.minFilter=yn.length===1?LinearFilter:LinearMipmapLinearFilter,Wl.magFilter=LinearFilter,Wl.generateMipmaps=!1,Wl.needsUpdate=!0,Wl.encoding=Io===gh?sRGBEncoding:LinearEncoding,Wl.premultiplyAlpha=!!($l&yh),Promise.resolve(Wl)},cr.prototype._createTexture=function(vn){var yn=this,Rn=this.init().then(function(){return yn.workerPool.postMessage({type:"transcode",buffers:vn},vn)}).then(function(Bn){return yn._createTextureFrom(Bn.data)});return Rn},cr.prototype.dispose=function(){return URL.revokeObjectURL(this.workerSourceURL),this.workerPool.dispose(),this},cr}(),vi=new xh,wh={ETC1S:0,UASTC_4x4:1},Sh={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Mh={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format},Eh=`

  let config;
  let transcoderPending;
  let BasisModule;

  const EngineFormat = _EngineFormat; // eslint-disable-line no-undef
  const TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef
  const BasisFormat = _BasisFormat; // eslint-disable-line no-undef

  self.addEventListener( 'message', function ( e ) {

    const message = e.data;

    switch ( message.type ) {

      case 'init':
        config = message.config;
        init( message.transcoderBinary );
        break;

      case 'transcode':
        transcoderPending.then( () => {

          try {

            const { width, height, hasAlpha, mipmaps, format, dfdTransferFn, dfdFlags } = transcode( message.buffers[ 0 ] );

            const buffers = [];

            for ( let i = 0; i < mipmaps.length; ++ i ) {

              buffers.push( mipmaps[ i ].data.buffer );

            }

            self.postMessage( { type: 'transcode', id: message.id, width, height, hasAlpha, mipmaps, format, dfdTransferFn, dfdFlags }, buffers );

          } catch ( error ) {

            console.error( error );

            self.postMessage( { type: 'error', id: message.id, error: error.message } );

          }

        } );
        break;

    }

  } );

  function init( wasmBinary ) {

    transcoderPending = new Promise( ( resolve ) => {

      BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
      BASIS( BasisModule ); // eslint-disable-line no-undef

    } ).then( () => {

      BasisModule.initializeBasis();

      if ( BasisModule.KTX2File === undefined ) {

        console.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );

      }

    } );

  }

  function transcode( buffer ) {

    const ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );

    function cleanup() {

      ktx2File.close();
      ktx2File.delete();

    }

    if ( ! ktx2File.isValid() ) {

      cleanup();
      throw new Error( 'THREE.KTX2Loader:	Invalid or unsupported .ktx2 file' );

    }

    const basisFormat = ktx2File.isUASTC() ? BasisFormat.UASTC_4x4 : BasisFormat.ETC1S;
    const width = ktx2File.getWidth();
    const height = ktx2File.getHeight();
    const levels = ktx2File.getLevels();
    const hasAlpha = ktx2File.getHasAlpha();
    const dfdTransferFn = ktx2File.getDFDTransferFunc();
    const dfdFlags = ktx2File.getDFDFlags();

    const { transcoderFormat, engineFormat } = getTranscoderFormat( basisFormat, width, height, hasAlpha );

    if ( ! width || ! height || ! levels ) {

      cleanup();
      throw new Error( 'THREE.KTX2Loader:	Invalid texture' );

    }

    if ( ! ktx2File.startTranscoding() ) {

      cleanup();
      throw new Error( 'THREE.KTX2Loader: .startTranscoding failed' );

    }

    const mipmaps = [];

    for ( let mip = 0; mip < levels; mip ++ ) {

      const levelInfo = ktx2File.getImageLevelInfo( mip, 0, 0 );
      const mipWidth = levelInfo.origWidth;
      const mipHeight = levelInfo.origHeight;
      const dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, 0, 0, transcoderFormat ) );

      const status = ktx2File.transcodeImage(
        dst,
        mip,
        0,
        0,
        transcoderFormat,
        0,
        - 1,
        - 1,
      );

      if ( ! status ) {

        cleanup();
        throw new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );

      }

      mipmaps.push( { data: dst, width: mipWidth, height: mipHeight } );

    }

    cleanup();

    return { width, height, hasAlpha, mipmaps, format: engineFormat, dfdTransferFn, dfdFlags };

  }

  //

  // Optimal choice of a transcoder target format depends on the Basis format (ETC1S or UASTC),
  // device capabilities, and texture dimensions. The list below ranks the formats separately
  // for ETC1S and UASTC.
  //
  // In some cases, transcoding UASTC to RGBA32 might be preferred for higher quality (at
  // significant memory cost) compared to ETC1/2, BC1/3, and PVRTC. The transcoder currently
  // chooses RGBA32 only as a last resort and does not expose that option to the caller.
  const FORMAT_OPTIONS = [
    {
      if: 'astcSupported',
      basisFormat: [ BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],
      engineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],
      priorityETC1S: Infinity,
      priorityUASTC: 1,
      needsPowerOfTwo: false,
    },
    {
      if: 'bptcSupported',
      basisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],
      engineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],
      priorityETC1S: 3,
      priorityUASTC: 2,
      needsPowerOfTwo: false,
    },
    {
      if: 'dxtSupported',
      basisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],
      engineFormat: [ EngineFormat.RGB_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],
      priorityETC1S: 4,
      priorityUASTC: 5,
      needsPowerOfTwo: false,
    },
    {
      if: 'etc2Supported',
      basisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],
      engineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],
      priorityETC1S: 1,
      priorityUASTC: 3,
      needsPowerOfTwo: false,
    },
    {
      if: 'etc1Supported',
      basisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC1 ],
      engineFormat: [ EngineFormat.RGB_ETC1_Format, EngineFormat.RGB_ETC1_Format ],
      priorityETC1S: 2,
      priorityUASTC: 4,
      needsPowerOfTwo: false,
    },
    {
      if: 'pvrtcSupported',
      basisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],
      transcoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],
      engineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],
      priorityETC1S: 5,
      priorityUASTC: 6,
      needsPowerOfTwo: true,
    },
  ];

  const ETC1S_OPTIONS = FORMAT_OPTIONS.sort( function ( a, b ) {

    return a.priorityETC1S - b.priorityETC1S;

  } );
  const UASTC_OPTIONS = FORMAT_OPTIONS.sort( function ( a, b ) {

    return a.priorityUASTC - b.priorityUASTC;

  } );

  function getTranscoderFormat( basisFormat, width, height, hasAlpha ) {

    let transcoderFormat;
    let engineFormat;

    const options = basisFormat === BasisFormat.ETC1S ? ETC1S_OPTIONS : UASTC_OPTIONS;

    for ( let i = 0; i < options.length; i ++ ) {

      const opt = options[ i ];

      if ( ! config[ opt.if ] ) continue;
      if ( ! opt.basisFormat.includes( basisFormat ) ) continue;
      if ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;

      transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];
      engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];

      return { transcoderFormat, engineFormat };

    }

    console.warn( 'KTX2: No suitable compressed texture format found. Decoding to RGBA32.' );

    transcoderFormat = TranscoderFormat.RGBA32;
    engineFormat = EngineFormat.RGBAFormat;

    return { transcoderFormat, engineFormat };

  }

  function isPowerOfTwo( value ) {

    if ( value <= 2 ) return true;

    return ( value & ( value - 1 ) ) === 0 && value !== 0;

  }
`,us="KHR_texture_basisu",Ch=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.loadTexture=function(yn,Rn){var Bn=Rn.json.textures[yn];if(!Bn.extensions||!Bn.extensions[us])return null;var Co=Bn.extensions[us],Po=Rn.json.images[Co.source],To=null;if(Po.bufferView!==void 0)To=Rn.loadBufferView(Po.bufferView).then(function(Wl){return vi.parse(Wl)});else if(Po.uri)To=Rn.options.fetcher.ajax(Rn.resolveResouce(Po.uri),{responseType:"arraybuffer"}).then(function(Wl){return vi.parse(Wl.body)});else throw new Error("glTF: Invalid image defs.");var Io=Rn.json.samplers||{},$l=Io[Bn.sampler]||{};return To=To.then(function(Wl){return Wl.magFilter=LinearFilter,Wl.minFilter=LinearFilter,Wl.wrapS=Zn[$l.wrapS]||RepeatWrapping,Wl.wrapT=Zn[$l.wrapT]||RepeatWrapping,Wl}),To},vn}(Er$1),ls="KHR_texture_transform",Ih=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.extendTexture=function(yn,Rn,Bn){var Co=Rn.extensions!==void 0?Rn.extensions[ls]:void 0;return Co?(Co.texCoord!==void 0&&console.warn('glTF: Custom UV sets in "'+ls+'" extension not yet supported.'),Co.offset===void 0&&Co.rotation===void 0&&Co.scale===void 0||(yn=yn.clone(),yn.needsUpdate=!0,Co.offset!==void 0&&yn.offset.fromArray(Co.offset),Co.rotation!==void 0&&(yn.rotation=Co.rotation),Co.scale!==void 0&&yn.repeat.fromArray(Co.scale)),yn):null},vn}(Er$1),Th=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn}(Er$1),Ph=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn}(Er$1),ja=function(){var cr="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:78Yqdbk:qzezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhlaicefhodnadTmbalc;WFbGglcjdalcjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfglcl4cifcd4hxdndndndnalc9WGgmTmbcbhPcehsawcjdfhzaohHinaraH9Rax6midnaraHaxfgo9RcK6mbczhlinalgic9Wfglawcj;cbffhOdndndndndnaHalco4fRbbalci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOaoRblaoRbbgAco4glalciSgCE86bbawcj;cbfaifglcGfaoclfaCfgORbbaAcl4ciGgCaCciSgCE86bbalcVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbalc7faOaCfgORbbaAciGgAaAciSgAE86bbalctfaOaAfgARbbaoRbegOco4gCaCciSgCE86bbalc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc93faAaCfgARbbaOciGgOaOciSgOE86bbalc94faAaOfgARbbaoRbdgOco4gCaCciSgCE86bbalc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc97faAaCfgARbbaOciGgOaOciSgOE86bbalc98faAaOfgORbbaoRbigoco4gAaAciSgAE86bbalc99faOaAfgORbbaocl4ciGgAaAciSgAE86bbalc9:faOaAfgORbbaocd4ciGgAaAciSgAE86bbalcufaOaAfglRbbaociGgoaociSgoE86bbalaofhoxdkaOaoRbwaoRbbgAcl4glalcsSgCE86bbawcj;cbfaifglcGfaocwfaCfgORbbaAcsGgAaAcsSgAE86bbalcVfaOaAfgORbbaoRbegAcl4gCaCcsSgCE86bbalc7faOaCfgORbbaAcsGgAaAcsSgAE86bbalctfaOaAfgORbbaoRbdgAcl4gCaCcsSgCE86bbalc91faOaCfgORbbaAcsGgAaAcsSgAE86bbalc4faOaAfgORbbaoRbigAcl4gCaCcsSgCE86bbalc93faOaCfgORbbaAcsGgAaAcsSgAE86bbalc94faOaAfgORbbaoRblgAcl4gCaCcsSgCE86bbalc95faOaCfgORbbaAcsGgAaAcsSgAE86bbalc96faOaAfgORbbaoRbvgAcl4gCaCcsSgCE86bbalc97faOaCfgORbbaAcsGgAaAcsSgAE86bbalc98faOaAfgORbbaoRbogAcl4gCaCcsSgCE86bbalc99faOaCfgORbbaAcsGgAaAcsSgAE86bbalc9:faOaAfgORbbaoRbrgocl4gAaAcsSgAE86bbalcufaOaAfglRbbaocsGgoaocsSgoE86bbalaofhoxekaOao8Pbb83bbaOcwfaocwf8Pbb83bbaoczfhokdnaiam9pmbaiczfhlarao9RcL0mekkaiam6miaoTmidnakTmbawaPfRbbhOawcj;cbfhlazhiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkkazcefhzaPcefgPad6hsaohHaPad9hmexvkkcbhoasceGmdxikaoaxad2fhPdnakTmbcbhmcehsawcjdfhCinarao9Rax6miaoTmdaoaxfhoawamfRbbhOawcj;cbfhlaChiakhHinaialRbbgAce4cbaAceG9R7aOfgO86bbaiadfhialcefhlaHcufgHmbkaCcefhCamcefgmad6hsamad9hmbkaPhoxikcbhlcehsinarao9Rax6mdaoTmeaoaxfhoalcefglad6hsadal9hmbkaPhoxdkcbhoasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqaombkc9:hoxekcbc99arao9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;xzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj;8ifcjjj98G::NUdbabclfhbadcufgdmbkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",vn="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;a9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;d8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgAclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;tzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhrcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgDc;Ve0mbavc;abfalaDcu7gPcl4fcsGcitfgsydlhzasydbhHdnaDcsGgDak9pmbavaiaPfcsGcdtfydbaxaDEhsaDThDdndnadcd9hmbabarcetfgPaH87ebaPcdfaz87ebaPclfas87ebxekabarcdtfgPaHBdbaPclfazBdbaPcwfasBdbkaxaDfhxavc;abfalcitfgPasBdbaPazBdlavaicdtfasBdbavc;abfalcefcsGglcitfgPaHBdbaPasBdlaiaDfhialcefhlxdkdndnaDcsSmbamaDfaDc987fcefhmxekaocefhDao8SbbgscFeGhPdndnascu9mmbaDhoxekaocvfhoaPcFbGhPcrhsdninaD8SbbgOcFbGastaPVhPaOcu9kmeaDcefhDascrfgsc8J9hmbxdkkaDcefhokaPce4cbaPceG9R7amfhmkdndnadcd9hmbabarcetfgDaH87ebaDcdfaz87ebaDclfam87ebxekabarcdtfgDaHBdbaDclfazBdbaDcwfamBdbkavc;abfalcitfgDamBdbaDazBdlavaicdtfamBdbavc;abfalcefcsGglcitfgDaHBdbaDamBdlaicefhialcefhlxekdnaDcpe0mbaxcefgOavaiaqaDcsGfRbbgscl49RcsGcdtfydbascz6gPEhDavaias9RcsGcdtfydbaOaPfgzascsGgOEhsaOThOdndnadcd9hmbabarcetfgHax87ebaHcdfaD87ebaHclfas87ebxekabarcdtfgHaxBdbaHclfaDBdbaHcwfasBdbkavaicdtfaxBdbavc;abfalcitfgHaDBdbaHaxBdlavaicefgicsGcdtfaDBdbavc;abfalcefcsGcitfgHasBdbaHaDBdlavaiaPfcsGgicdtfasBdbavc;abfalcdfcsGglcitfgDaxBdbaDasBdlalcefhlaiaOfhiazaOfhxxekaxcbaoRbbgHEgAaDc;:eSgDfhzaHcsGhCaHcl4hXdndnaHcs0mbazcefhOxekazhOavaiaX9RcsGcdtfydbhzkdndnaCmbaOcefhxxekaOhxavaiaH9RcsGcdtfydbhOkdndnaDTmbaocefhDxekaocdfhDao8SbegPcFeGhsdnaPcu9kmbaocofhAascFbGhscrhodninaD8SbbgPcFbGaotasVhsaPcu9kmeaDcefhDaocrfgoc8J9hmbkaAhDxekaDcefhDkasce4cbasceG9R7amfgmhAkdndnaXcsSmbaDhsxekaDcefhsaD8SbbgocFeGhPdnaocu9kmbaDcvfhzaPcFbGhPcrhodninas8SbbgDcFbGaotaPVhPaDcu9kmeascefhsaocrfgoc8J9hmbkazhsxekascefhskaPce4cbaPceG9R7amfgmhzkdndnaCcsSmbashoxekascefhoas8SbbgDcFeGhPdnaDcu9kmbascvfhOaPcFbGhPcrhDdninao8SbbgscFbGaDtaPVhPascu9kmeaocefhoaDcrfgDc8J9hmbkaOhoxekaocefhokaPce4cbaPceG9R7amfgmhOkdndnadcd9hmbabarcetfgDaA87ebaDcdfaz87ebaDclfaO87ebxekabarcdtfgDaABdbaDclfazBdbaDcwfaOBdbkavc;abfalcitfgDazBdbaDaABdlavaicdtfaABdbavc;abfalcefcsGcitfgDaOBdbaDazBdlavaicefgicsGcdtfazBdbavc;abfalcdfcsGcitfgDaABdbaDaOBdlavaiaHcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiarcifgrae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:wPliuo97eue978Jjjjjbca9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskdnalTmbcbhvabhdinadczfgxaxpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabalcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbadczfhdaeclfgeav6mbkkdnaval9pmbaialciGgecdtgdVcbc;abad9R;8kbaiabavcdtfgvad;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiad;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",yn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Rn=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var Bn=WebAssembly.validate(yn)?vn:cr,Co,Po=WebAssembly.instantiate(To(Bn),{}).then(function(_g){Co=_g.instance,Co.exports.__wasm_call_ctors()});function To(_g){for(var ty=new Uint8Array(_g.length),ny=0;ny<_g.length;++ny){var iy=_g.charCodeAt(ny);ty[ny]=iy>96?iy-97:iy>64?iy-39:iy+4}for(var oy=0,ny=0;ny<_g.length;++ny)ty[oy++]=ty[ny]<60?Rn[ty[ny]]:(ty[ny]-60)*64+ty[++ny];return ty.buffer.slice(0,oy)}function Io(_g,ty,ny,iy,oy,ay){var uy=Co.exports.sbrk,hy=ny+3&-4,my=uy(hy*iy),ly=uy(oy.length),sy=new Uint8Array(Co.exports.memory.buffer);sy.set(oy,ly);var cy=_g(my,ny,iy,ly,oy.length);if(cy==0&&ay&&ay(my,hy,iy),ty.set(sy.subarray(my,my+ny*iy)),uy(my-uy(0)),cy!=0)throw new Error("Malformed buffer data: "+cy)}var $l={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Wl={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},Xl=[],Yl=0;function Zl(_g){var ty={object:new Worker(_g),pending:0,requests:{}};return ty.object.onmessage=function(ny){var iy=ny.data;ty.pending-=iy.count,ty.requests[iy.id][iy.action](iy.value),delete ty.requests[iy.id]},ty}function ey(_g){for(var ty="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(To(Bn))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+Io.toString()+ry.toString(),ny=new Blob([ty],{type:"text/javascript"}),iy=URL.createObjectURL(ny),oy=0;oy<_g;++oy)Xl[oy]=Zl(iy);URL.revokeObjectURL(iy)}function Rm(_g,ty,ny,iy,oy){for(var ay=Xl[0],uy=1;uy<Xl.length;++uy)Xl[uy].pending<ay.pending&&(ay=Xl[uy]);return new Promise(function(hy,my){var ly=new Uint8Array(ny),sy=Yl++;ay.pending+=_g,ay.requests[sy]={resolve:hy,reject:my},ay.object.postMessage({id:sy,count:_g,size:ty,source:ly,mode:iy,filter:oy},[ly.buffer])})}function ry(_g){Po.then(function(){var ty=_g.data;try{var ny=new Uint8Array(ty.count*ty.size);Io(Co.exports[ty.mode],ny,ty.count,ty.size,ty.source,Co.exports[ty.filter]),self.postMessage({id:ty.id,count:ty.count,action:"resolve",value:ny},[ny.buffer])}catch(iy){self.postMessage({id:ty.id,count:ty.count,action:"reject",value:iy})}})}return{ready:Po,supported:!0,useWorkers:function(_g){ey(_g)},decodeVertexBuffer:function(_g,ty,ny,iy,oy){Io(Co.exports.meshopt_decodeVertexBuffer,_g,ty,ny,iy,Co.exports[$l[oy]])},decodeIndexBuffer:function(_g,ty,ny,iy){Io(Co.exports.meshopt_decodeIndexBuffer,_g,ty,ny,iy)},decodeIndexSequence:function(_g,ty,ny,iy){Io(Co.exports.meshopt_decodeIndexSequence,_g,ty,ny,iy)},decodeGltfBuffer:function(_g,ty,ny,iy,oy,ay){Io(Co.exports[Wl[oy]],_g,ty,ny,iy,Co.exports[$l[ay]])},decodeGltfBufferAsync:function(_g,ty,ny,iy,oy){return Xl.length>0?Rm(_g,ty,ny,Wl[iy],$l[oy]):Po.then(function(){var ay=new Uint8Array(_g*ty);return Io(Co.exports[Wl[iy]],ay,_g,ty,ny,Co.exports[$l[oy]]),ay})}}}(),Xa="EXT_meshopt_compression",Rh=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.loadBufferView=function(yn,Rn){var Bn=Rn.json,Co=Bn.bufferViews[yn];if(Co.extensions&&Co.extensions[Xa]){var Po=Co.extensions[Xa],To=Rn.loadBuffer(Po.buffer);if(!ja.supported){if(Bn.extensionsRequired&&Bn.extensionsRequired.indexOf(Xa)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([To,ja.ready]).then(function(Io){var $l=Io[0],Wl=Po.byteOffset||0,Xl=Po.byteLength||0,Yl=Po.count,Zl=Po.byteStride,ey=new ArrayBuffer(Yl*Zl),Rm=new Uint8Array($l,Wl,Xl);return ja.decodeGltfBuffer(new Uint8Array(ey),Yl,Zl,Rm,Po.mode,Po.filter),ey})}else return null},vn}(Er$1),cs="EXT_texture_webp",Bh=function(cr){fe$6(vn,cr);function vn(){var yn=cr!==null&&cr.apply(this,arguments)||this;return yn.supportsWep=!1,yn}return vn.prototype.prepare=function(yn){var Rn=this;return gu().then(function(Bn){Rn.supportsWep=Bn.webp})},vn.prototype.loadTexture=function(yn,Rn){var Bn=Rn.json,Co=Bn.textures[yn];if(!Co.extensions||!Co.extensions[cs]||!this.supportsWep)return null;var Po=Co.extensions[cs];return Rn.loadImage(Po.source).then(function(To){var Io=new Texture(To);Io.needsUpdate=!0,Io.flipY=!1,Co.name&&(Io.name=Co.name);var $l=Rn.json.samplers||{},Wl=$l[Co.sampler]||{};return Io.magFilter=da[Wl.magFilter]||LinearFilter,Io.minFilter=da[Wl.minFilter]||LinearMipmapLinearFilter,Io.wrapS=Zn[Wl.wrapS]||RepeatWrapping,Io.wrapT=Zn[Wl.wrapT]||RepeatWrapping,Io.onUpdate=function(){To.close()},Io})},vn}(Er$1),Wa="CESIUM_RTC",Fh=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.emitResult=function(yn,Rn){if(Rn.json.extensions[Wa]&&Rn.json.extensions[Wa].center){var Bn=Rn.json.extensions[Wa].center;yn.CESIUM_RTC={center:new Vector3().fromArray(Bn)}}},vn}(Er$1),Lh=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.loadMesh=function(yn,Rn){var Bn=this,Co=Rn.json.meshes[yn],Po=Co.primitives,To=Promise.all(Po.map(function(Wl){return Rn.loadGeometry(Wl)})),Io=Promise.all(Po.map(function(Wl){return Bn.loadPBMMaterial(Wl,Rn)})),$l=Promise.all([To,Io]).then(function(Wl){for(var Xl=Wl[0],Yl=Wl[1],Zl=[],ey=0;ey<Po.length;ey++){var Rm=Po[ey],ry=Xl[ey],_g=Yl[ey];ry.attributes.normal===void 0&&(_g.flatShading=!0),ry.attributes.tangent===void 0&&_g.normalScale&&(_g.normalScale.y*=-1);var ty=Rm.mode||Ue$1.TRIANGLES,ny=void 0;if(ty===Ue$1.TRIANGLES||ty===Ue$1.TRIANGLE_STRIP||ty===Ue$1.TRIANGLE_FAN)if(ty===Ue$1.TRIANGLE_STRIP?ry=Rn.toGeometryTrianglesDrawMode(ry,TriangleStripDrawMode):ty===Ue$1.TRIANGLE_FAN&&(ry=Rn.toGeometryTrianglesDrawMode(ry,TriangleFanDrawMode)),ry.clearGroups(),ry.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,0),Rn.disposeSet.add(ry),Co.isSkinnedMesh){var iy=new Jr$2(ry,[_g]);ry.attributes.skinWeight.normalized||iy.normalizeSkinWeights(),ny=iy}else ny=new Ht$2(ry,[_g]);else if(ty===Ue$1.POINTS)ny=new Vr$1(ry,_g);else throw new Error("glTF: Primitive mode unsupported: "+ty);if(Object.keys(ry.morphAttributes).length>0){if(Co.weights!==void 0)for(var oy=0,ay=Co.weights.length;oy<ay;oy++)ny.morphTargetInfluences[oy]=Co.weights[oy];if(Co.extras&&Array.isArray(Co.extras.targetNames)){var uy=Co.extras.targetNames;if(ny.morphTargetInfluences.length===uy.length){ny.morphTargetDictionary={};for(var oy=0,ay=uy.length;oy<ay;oy++)ny.morphTargetDictionary[uy[oy]]=oy}else console.warn("glTF: Invalid extras.targetNames length. Ignoring names.")}}ny.name=Rn.createUniqueName(Co.name||"mesh_"+yn),Zl.push(ny)}if(Zl.length===1)return Zl[0];for(var hy=new Group$1,my=0,ly=Zl;my<ly.length;my++){var ny=ly[my];hy.add(ny)}return hy});return $l},vn.prototype.loadPBMMaterial=function(yn,Rn){var Bn,Co=(Bn=yn.mode)!==null&&Bn!==void 0?Bn:Ue$1.TRIANGLES,Po=null;if(Co===Ue$1.TRIANGLES||Co===Ue$1.TRIANGLE_STRIP||Co===Ue$1.TRIANGLE_FAN)Po=this.loadPBMMeshMaterial(yn,Rn);else if(Co===Ue$1.POINTS)Po=this.loadPBMPointCloudMaterial(yn,Rn);else throw new Error("glTF: Primitive mode unsupported: "+Co);return Po=Po.then(function(To){return Promise.all(mt$3(Rn.extensions).map(function(Io){return Io.extendMaterial(To,yn,Rn)})).then(function(){return To})}),Po},vn.prototype.extendTexture=function(yn,Rn,Bn){return yn.minFilter=LinearFilter,yn.magFilter=LinearFilter,yn.generateMipmaps=!1,yn},vn.prototype.loadPBMPointCloudMaterial=function(yn,Rn){var Bn=new wa;return Object.keys(yn.attributes).filter(function(Co){return Mt$1[Co]==="normal"}).length>0&&(Bn.defines.USE_POINT_NORMAL=!0),Rn.disposeSet.add(Bn),Promise.resolve(Bn)},vn.prototype.loadPBMMeshMaterial=function(yn,Rn){var Bn=[],Co=Rn.extensions.KHR_materials_unlit?"basic":"standard",Po=new Mr$1(Co);if(Po.color=new Color(1,1,1),Object.keys(yn.attributes).filter(function(Yl){return Mt$1[Yl]==="color"}).length>0&&(Po.vertexColors=!0),Object.keys(yn.attributes).filter(function(Yl){return Mt$1[Yl]==="tangent"}).length===0?(Po.normalScale&&(Po.normalScale.y*=-1),Po.clearcoatNormalScale&&(Po.clearcoatNormalScale.y*=-1)):Po.vertexTangents=!0,yn.material!==void 0){var To=Rn.json.materials[yn.material];To.name&&(Po.name=To.name);var Io=To.pbrMetallicRoughness||{};if(Array.isArray(Io.baseColorFactor)){var $l=Io.baseColorFactor;Po.color=new Color().fromArray($l),Po.colorAlpha=$l[3]}Io.baseColorTexture!==void 0&&Bn.push(Rn.createMaterialTexture(Io.baseColorTexture).then(function(Yl){Rn.disposeSet.add(Yl),Yl.encoding=sRGBEncoding,Po.map=Yl})),typeof Io.roughnessFactor=="number"&&(Po.roughness=Io.roughnessFactor),typeof Io.metallicFactor=="number"&&(Po.metalness=Io.metallicFactor),Io.metallicRoughnessTexture!==void 0&&Bn.push(Rn.createMaterialTexture(Io.metallicRoughnessTexture).then(function(Yl){Rn.disposeSet.add(Yl),Yl.encoding=sRGBEncoding,Po.roughnessMap=Yl,Po.metalnessMap=Yl})),To.doubleSided===!0&&(Po.side=DoubleSide);var Wl=To.alphaMode||Rt$1.OPAQUE;if(Po.alphaMode="OPAQUE",Wl===Rt$1.BLEND?(Po.alphaMode="BLEND",Po.transparent=!0,Po.depthWrite=!1):(Po.transparent=!1,Wl===Rt$1.MASK&&(Po.alphaMode="MASK",Po.alphaTest=To.alphaCutoff!==void 0?To.alphaCutoff:.5)),To.normalTexture!==void 0&&(Bn.push(Rn.createMaterialTexture(To.normalTexture).then(function(Yl){Rn.disposeSet.add(Yl),Po.normalMap=Yl})),Po.normalScale=new Vector2(1,1),To.normalTexture.scale!==void 0)){var Xl=To.normalTexture.scale;Po.normalScale.set(Xl,Xl)}}return Rn.disposeSet.add(Po),Promise.all(Bn).then(function(){return Po.refreshUniforms(),Po})},vn}(Er$1),kh="REALSEE_materials_lightmap",Oh=function(cr){fe$6(vn,cr);function vn(){return cr!==null&&cr.apply(this,arguments)||this}return vn.prototype.extendMaterial=function(yn,Rn,Bn){var Co=[];if(Bn.json.materials&&Rn.material!==void 0){var Po=Bn.json.materials[Rn.material],To=Po.extensions[kh];To&&(To.lightMapTexture!==void 0&&Co.push(Bn.createMaterialTexture(To.lightMapTexture).then(function(Io){yn.lightMap=Io})),To.lightMapIntensity!==void 0&&(yn.lightMapIntensity=To.lightMapIntensity))}return Promise.all(Co).then(function(){})},vn}(Er$1),ri={KHR_binary_glTF:hh,KHR_draco_mesh_compression:mh,KHR_texture_basisu:Ch,KHR_texture_transform:Ih,KHR_mesh_quantization:Th,KHR_materials_unlit:Ph,EXT_meshopt_compression:Rh,EXT_texture_webp:Bh,CESIUM_RTC:Fh,REALSEE_materials_lightmap:Oh,PBM_mesh:Lh};function oo$1(cr,vn){var yn,Rn,Bn,Co={},Po,To;if(typeof cr=="string")To=cr;else{var Io=ri.KHR_binary_glTF.getMagic(cr);if(Io===ri.KHR_binary_glTF.HEADER_MAGIC){Po=new ri.KHR_binary_glTF;try{Po.loadGlbBinary(cr)}catch(ey){return Promise.reject(ey)}Co.KHR_binary_glTF=Po,To=Po.content}else To=fa(new Uint8Array(cr))}var $l=JSON.parse(To);if(vn.jsonModify&&($l=vn.jsonModify($l)),$l.asset===void 0||Number($l.asset.version[0])<2)return Promise.reject(new Error("glTF: Unsupported asset. glTF versions >=2.0 are supported."));if($l.extensionsUsed)for(var Wl=$l.extensionsRequired||[],Xl=0;Xl<$l.extensionsUsed.length;Xl++){var Yl=$l.extensionsUsed[Xl];Co[Yl]||(ri[Yl]?Co[Yl]=new ri[Yl]:Wl.indexOf(Yl)>=0&&console.warn('glTF: Unknown extension "'+Yl+'".'))}var Zl=new dh($l,Co,{copyUV2:(yn=vn.copyUV2)!==null&&yn!==void 0?yn:!0,resourcePath:(Rn=vn.resourcePath)!==null&&Rn!==void 0?Rn:"",search:(Bn=vn.search)!==null&&Bn!==void 0?Bn:"",fetcher:vn.fetcher});return Zl.parse().then(function(ey){return Po&&Po.clear(),ey})}function Gn(cr){return isNaN(cr)||!isFinite(cr)?0:cr}function Xu(cr){var vn=0;if(cr instanceof BufferGeometry){for(var yn in cr.attributes){var Rn=cr.getAttribute(yn),Bn=4;"BYTES_PER_ELEMENT"in Rn.array&&typeof Rn.array.BYTES_PER_ELEMENT=="number"&&(Bn=Rn.array.BYTES_PER_ELEMENT),vn+=Gn(Rn.count*Rn.itemSize*Bn)}var Co=cr.getIndex();if(Co){var Bn=4;"BYTES_PER_ELEMENT"in Co.array&&typeof Co.array.BYTES_PER_ELEMENT=="number"&&(Bn=Co.array.BYTES_PER_ELEMENT),vn+=Gn(Co.count*Co.itemSize*Bn)}}else cr instanceof Geometry&&(vn+=Gn(cr.faces.length*3*3*4),vn+=Gn(cr.faceVertexUvs.length*3*2*4));return vn}function Fe$1(cr,vn,yn){return function(Rn,Bn,Co){var Po=(Rn+cr-1)/cr|0,To=(Bn+vn-1)/vn|0;return Po*To*yn*Co}}function _i(cr,vn,yn){return function(Rn,Bn,Co){return(Math.max(Rn,cr)*Math.max(Bn,vn)/yn|0)*Co}}var zh=new Map([[RGB_S3TC_DXT1_Format,Fe$1(4,4,8)],[RGBA_S3TC_DXT1_Format,Fe$1(4,4,8)],[RGBA_S3TC_DXT3_Format,Fe$1(4,4,16)],[RGBA_S3TC_DXT5_Format,Fe$1(4,4,16)],[RGB_ETC1_Format,Fe$1(4,4,8)],[RGB_PVRTC_4BPPV1_Format,_i(8,8,2)],[RGBA_PVRTC_4BPPV1_Format,_i(8,8,2)],[RGB_PVRTC_2BPPV1_Format,_i(16,8,4)],[RGBA_PVRTC_2BPPV1_Format,_i(16,8,4)],[RGB_ETC2_Format,Fe$1(4,4,8)],[RGBA_ETC2_EAC_Format,Fe$1(4,4,16)],[RGBA_ASTC_4x4_Format,Fe$1(4,4,16)],[SRGB8_ALPHA8_ASTC_4x4_Format,Fe$1(4,4,16)],[RGBA_ASTC_5x4_Format,Fe$1(5,4,16)],[SRGB8_ALPHA8_ASTC_5x4_Format,Fe$1(5,4,16)],[RGBA_ASTC_5x5_Format,Fe$1(5,5,16)],[SRGB8_ALPHA8_ASTC_5x5_Format,Fe$1(5,5,16)],[RGBA_ASTC_6x5_Format,Fe$1(6,5,16)],[SRGB8_ALPHA8_ASTC_6x5_Format,Fe$1(6,5,16)],[RGBA_ASTC_6x6_Format,Fe$1(6,6,16)],[SRGB8_ALPHA8_ASTC_6x6_Format,Fe$1(6,6,16)],[RGBA_ASTC_8x5_Format,Fe$1(8,5,16)],[SRGB8_ALPHA8_ASTC_8x5_Format,Fe$1(8,5,16)],[RGBA_ASTC_8x6_Format,Fe$1(8,6,16)],[SRGB8_ALPHA8_ASTC_8x6_Format,Fe$1(8,6,16)],[RGBA_ASTC_8x8_Format,Fe$1(8,8,16)],[SRGB8_ALPHA8_ASTC_8x8_Format,Fe$1(8,8,16)],[RGBA_ASTC_10x5_Format,Fe$1(10,5,16)],[SRGB8_ALPHA8_ASTC_10x5_Format,Fe$1(10,5,16)],[RGBA_ASTC_10x6_Format,Fe$1(10,6,16)],[SRGB8_ALPHA8_ASTC_10x6_Format,Fe$1(10,6,16)],[RGBA_ASTC_10x8_Format,Fe$1(10,8,16)],[SRGB8_ALPHA8_ASTC_10x8_Format,Fe$1(10,8,16)],[RGBA_ASTC_10x10_Format,Fe$1(10,10,16)],[SRGB8_ALPHA8_ASTC_10x10_Format,Fe$1(10,10,16)],[RGBA_ASTC_12x10_Format,Fe$1(12,10,16)],[SRGB8_ALPHA8_ASTC_12x10_Format,Fe$1(12,10,16)],[RGBA_ASTC_12x12_Format,Fe$1(12,12,16)],[SRGB8_ALPHA8_ASTC_12x12_Format,Fe$1(12,12,16)],[RGBA_BPTC_Format,Fe$1(4,4,16)]]);function P0(cr){var vn=0,yn=1;(cr.generateMipmaps===!0||cr.mipmaps&&cr.mipmaps.length>1)&&(yn=1.33);for(var Rn=cr instanceof CompressedTexture,Bn=Rn?zh.get(cr.format):void 0,Co=[].concat(cr.image),Po=0,To=Co;Po<To.length;Po++){var Io=To[Po];if(Io instanceof Texture)vn+=P0(Io);else{var $l=Io.width,Wl=$l===void 0?1:$l,Xl=Io.height,Yl=Xl===void 0?1:Xl,Zl=Io.depth,ey=Zl===void 0?1:Zl;Bn?vn+=Gn(Bn(Wl,Yl,ey)*yn):vn+=Gn(Wl*Yl*ey*4*yn)}}return vn}var Vn=new Set,Vh=["map","alphaMap","bumpMap","normalMap","displacementMap","emissiveMap","specularMap","envMap","flipEnvMap","lightMap","aoMap","gradientMap","metalnessMap","roughnessMap","sheenColorMap","sheenRoughnessMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","iridescenceMap","iridescenceThicknessMap","transmissionMap","thicknessMap","anisotropyMap","specularColorMap","specularIntensityMap"];function Dh(cr){var vn=0;if(Vn.clear(),cr instanceof ShaderMaterial)for(var yn in cr.uniforms){var Rn=cr.uniforms[yn],Bn=Rn&&Rn.value&&Rn.value instanceof Texture?Rn.value:void 0;Bn instanceof Texture&&(Vn.has(Bn)||(vn=P0(Bn),Vn.add(Bn)))}else for(var Co=0,Po=Vh;Co<Po.length;Co++){var To=Po[Co],Bn=cr[To];Bn instanceof Texture&&(Vn.has(Bn)||(vn=P0(Bn),Vn.add(Bn)))}return Vn.clear(),vn}var Dn=new Set;function Wt$2(cr){var vn=0;return Dn.clear(),cr.traverse(function(yn){if(yn instanceof Mesh||yn instanceof Line||yn instanceof Points){var Rn=yn.geometry;(Rn instanceof BufferGeometry||Rn instanceof Geometry)&&(Dn.has(Rn)||(vn+=Xu(Rn),Dn.add(Rn)));for(var Bn=[].concat(yn.material),Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];To instanceof Material&&(Dn.has(To)||(vn+=Dh(To),Dn.add(To)))}}}),Dn.clear(),vn}var Nh=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);function qh(cr,vn){var yn,Rn;vn===void 0&&(vn={});var Bn=(yn=vn.upAxis)!==null&&yn!==void 0?yn:"Y",Co=(Rn=vn.fetcher)!==null&&Rn!==void 0?Rn:new Zt$1({allowHosts:["*"]}),Po={uri:cr,gltfUpAxis:Bn};return Promise.resolve().then(function(){return Co.ajax(cr,{responseType:"arraybuffer"}).then(function(To){return To.body})}).then(function(To){return Promise.resolve(0).then(function(Io){return _u(Po,To,Io)}).then(function(Io){return ju(Po,To,Io)}).then(function(Io){return lh(Po,To,Io)})}).then(function(){var To;return oo$1(Po.gltfArrayBuffer,{copyUV2:!1,resourcePath:cr.slice(0,cr.lastIndexOf("/")+1),search:(To=cr.split("?")[1])!==null&&To!==void 0?To:"",jsonModify:function(Io){var $l;if(Io.extensionsUsed=($l=Io.extensionsUsed)!==null&&$l!==void 0?$l:[],typeof vn.light=="boolean"){var Wl="KHR_materials_unlit";if(vn.light){var Xl=Io.extensionsUsed.indexOf(Wl);Xl>=0&&Io.extensionsUsed.splice(Xl,1)}else{var Xl=Io.extensionsUsed.indexOf(Wl);Xl===-1&&Io.extensionsUsed.push(Wl)}}{var Wl="PBM_mesh",Xl=Io.extensionsUsed.indexOf(Wl);Xl===-1&&Io.extensionsUsed.push(Wl)}return Io},fetcher:Co}).then(function(Io){var $l=new Matrix4;Bn==="Y"&&$l.premultiply(Nh);var Wl=new Matrix4().setPosition(Po.rtcCenter[0],Po.rtcCenter[1],Po.rtcCenter[2]);if($l.premultiply(Wl),Io.CESIUM_RTC){var Xl=new Matrix4().setPosition(Io.CESIUM_RTC.center);$l.premultiply(Xl)}var Yl=Io.scene;return Yl.applyMatrix4($l),delete Po.featureTableBinary,delete Po.batchTableBinary,delete Po.gltfArrayBuffer,{type:"b3dm",upAxis:"Z",uri:Po.uri,byteLength:Po.byteLength,memoryUsage:Wt$2(Yl),scene:Yl,textures:Io.textures,dispose:function(){return Io.dispose()}}})})}const Wu="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEIoYSl7b25tZXNzYWdlPWZ1bmN0aW9uKHIpe1Byb21pc2UucmVzb2x2ZShyLmRhdGEpLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGEobil9KS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBlPW4ub3V0cHV0LHQ9bi50cmFuc2ZlcjtyZXR1cm4gcG9zdE1lc3NhZ2UoZSx0KX0pLmNhdGNoKGZ1bmN0aW9uKG4pe3JldHVybiBwb3N0TWVzc2FnZSh7JCRlcnJvcjpufSl9KX19dmFyIHUseTsoZnVuY3Rpb24oYSl7YVthLkJZVEU9NTEyMF09IkJZVEUiLGFbYS5VTlNJR05FRF9CWVRFPTUxMjFdPSJVTlNJR05FRF9CWVRFIixhW2EuU0hPUlQ9NTEyMl09IlNIT1JUIixhW2EuVU5TSUdORURfU0hPUlQ9NTEyM109IlVOU0lHTkVEX1NIT1JUIixhW2EuSU5UPTUxMjRdPSJJTlQiLGFbYS5VTlNJR05FRF9JTlQ9NTEyNV09IlVOU0lHTkVEX0lOVCIsYVthLkZMT0FUPTUxMjZdPSJGTE9BVCIsYVthLkRPVUJMRT01MTMwXT0iRE9VQkxFIn0pKHl8fCh5PXt9KSk7dmFyIGM9KHU9e30sdVt5LkRPVUJMRV09RmxvYXQ2NEFycmF5LHVbeS5GTE9BVF09RmxvYXQzMkFycmF5LHVbeS5VTlNJR05FRF9TSE9SVF09VWludDE2QXJyYXksdVt5LlVOU0lHTkVEX0lOVF09VWludDMyQXJyYXksdVt5LlVOU0lHTkVEX0JZVEVdPVVpbnQ4QXJyYXksdVt5LkJZVEVdPUludDhBcnJheSx1W3kuU0hPUlRdPUludDE2QXJyYXksdVt5LklOVF09SW50MzJBcnJheSx1KSxGPXtET1VCTEU6eS5ET1VCTEUsRkxPQVQ6eS5GTE9BVCxVTlNJR05FRF9TSE9SVDp5LlVOU0lHTkVEX1NIT1JULFVOU0lHTkVEX0lOVDp5LlVOU0lHTkVEX0lOVCxVTlNJR05FRF9CWVRFOnkuVU5TSUdORURfQllURSxCWVRFOnkuQllURSxTSE9SVDp5LlNIT1JULElOVDp5LklOVH07ZnVuY3Rpb24gTyhhKXt2YXIgcj1jW2FdO2lmKCFyKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGNvbnZlcnQgR0wgdHlwZSIpO3JldHVybiByfWZ1bmN0aW9uIHAoYSl7dmFyIHI9TyhhKTtyZXR1cm4gci5CWVRFU19QRVJfRUxFTUVOVH1mdW5jdGlvbiBfKGEscixuLGUpe249PT12b2lkIDAmJihuPTApO3ZhciB0PU8oYSk7aWYobiVwKGEpIT09MCl7dmFyIGk9ZT9yLnNsaWNlKG4sbitlKnAoYSkpOnIuc2xpY2Uobik7cmV0dXJuIG5ldyB0KGkpfWVsc2UgcmV0dXJuIG5ldyB0KHIsbixlIT1udWxsP2U6KHIuYnl0ZUxlbmd0aC1uKS9wKGEpKX1mdW5jdGlvbiBsKGEpe3ZhciByPUZbYV07aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gY29udmVydCBHTCB0eXBlIik7cmV0dXJuIHJ9dmFyIFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKHIsbil7dGhpcy5mZWF0dXJlc0xlbmd0aD0wLHRoaXMuY2FjaGVkVHlwZWRBcnJheXM9e30sdGhpcy5qc29uPXIsdGhpcy5idWZmZXI9bjt2YXIgZT10aGlzLmdldEdsb2JhbFByb3BlcnR5KCJQT0lOVFNfTEVOR1RIIix5LlVOU0lHTkVEX0lOVCwxKTtlJiZlLmxlbmd0aCYmKHRoaXMuZmVhdHVyZXNMZW5ndGg9ZVswXSl9cmV0dXJuIGEucHJvdG90eXBlLmdldEV4dGVuc2lvbj1mdW5jdGlvbihyKXtyZXR1cm4gdGhpcy5qc29uLmV4dGVuc2lvbnMmJnRoaXMuanNvbi5leHRlbnNpb25zW3JdfSxhLnByb3RvdHlwZS5oYXNQcm9wZXJ0eT1mdW5jdGlvbihyKXtyZXR1cm4hIXRoaXMuanNvbltyXX0sYS5wcm90b3R5cGUuZ2V0R2xvYmFsUHJvcGVydHk9ZnVuY3Rpb24ocixuLGUpe3ZhciB0PXRoaXMuanNvbltyXTtpZih0eXBlb2YgdD09Im51bWJlciIpe3ZhciBpPU8obik7cmV0dXJuIG5ldyBpKFt0XSl9ZWxzZSBpZihBcnJheS5pc0FycmF5KHQpKXt2YXIgaT1PKG4pO3JldHVybiBuZXcgaSh0KX1lbHNlIGlmKHQmJk51bWJlci5pc0Zpbml0ZSh0LmJ5dGVPZmZzZXQpKXJldHVybiB0aGlzLmdldFR5cGVkQXJyYXlGcm9tQmluYXJ5KHIsbixlLDEsdC5ieXRlT2Zmc2V0KTtyZXR1cm4gbnVsbH0sYS5wcm90b3R5cGUuZ2V0UHJvcGVydHlBcnJheT1mdW5jdGlvbihyLG4sZSl7dmFyIHQ9dGhpcy5qc29uW3JdO3JldHVybiB0JiZOdW1iZXIuaXNGaW5pdGUodC5ieXRlT2Zmc2V0KT8oImNvbXBvbmVudFR5cGUiaW4gdCYmKG49bCh0LmNvbXBvbmVudFR5cGUpKSx0aGlzLmdldFR5cGVkQXJyYXlGcm9tQmluYXJ5KHIsbixlLHRoaXMuZmVhdHVyZXNMZW5ndGgsdC5ieXRlT2Zmc2V0KSk6dGhpcy5nZXRUeXBlZEFycmF5RnJvbUFycmF5KHIsbix0KX0sYS5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocixuLGUsdCxpKXt2YXIgbz10aGlzLmpzb25bcl07aWYoIW8pcmV0dXJuIG51bGw7dmFyIHY9dGhpcy5nZXRQcm9wZXJ0eUFycmF5KHIsbixlKTtpZihlPT09MSlyZXR1cm4gaVswXT12W3RdLGk7Zm9yKHZhciBBPTA7QTxlOysrQSlpW0FdPXZbZSp0K0FdO3JldHVybiBpfSxhLnByb3RvdHlwZS5nZXRUeXBlZEFycmF5RnJvbUJpbmFyeT1mdW5jdGlvbihyLG4sZSx0LGkpe3ZhciBvPXRoaXMuY2FjaGVkVHlwZWRBcnJheXMsdj1vW3JdO3JldHVybiB2fHwodj1fKG4sdGhpcy5idWZmZXIuYnVmZmVyLHRoaXMuYnVmZmVyLmJ5dGVPZmZzZXQraSx0KmUpLG9bcl09diksdn0sYS5wcm90b3R5cGUuZ2V0VHlwZWRBcnJheUZyb21BcnJheT1mdW5jdGlvbihyLG4sZSl7dmFyIHQ9dGhpcy5jYWNoZWRUeXBlZEFycmF5cyxpPXRbcl07cmV0dXJuIGl8fChpPV8obixlKSx0W3JdPWkpLGl9LGF9KCk7QihmdW5jdGlvbihhKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49bmV3IFIoci5mZWF0dXJlVGFibGVKc29uLHIuZmVhdHVyZVRhYmxlQmluYXJ5KSxlPWQobiksdD1nKG4pLGk9UChuKSxvPVtdO3JldHVybiBlJiZvLnB1c2goZS5hcnJheS5idWZmZXIpLHQmJm8ucHVzaCh0LmFycmF5LmJ1ZmZlciksaSYmby5wdXNoKGkuYXJyYXkuYnVmZmVyKSx7b3V0cHV0Ontwb3NpdGlvbjplLGNvbG9yOnQsbm9ybWFsOml9LHRyYW5zZmVyOm99fSl9KTt2YXIgVT02NTUzNTtmdW5jdGlvbiBkKGEpe2lmKGEuaGFzUHJvcGVydHkoIlBPU0lUSU9OIikpe3ZhciByPWEuZ2V0UHJvcGVydHlBcnJheSgiUE9TSVRJT04iLHkuRkxPQVQsMyk7cmV0dXJue2FycmF5OnIsaXRlbVNpemU6Myxub3JtYWxpemVkOiExfX1lbHNlIGlmKGEuaGFzUHJvcGVydHkoIlBPU0lUSU9OX1FVQU5USVpFRCIpKXt2YXIgbj1hLmdldFByb3BlcnR5QXJyYXkoIlBPU0lUSU9OX1FVQU5USVpFRCIseS5VTlNJR05FRF9TSE9SVCwzKSxlPWEuZ2V0R2xvYmFsUHJvcGVydHkoIlFVQU5USVpFRF9WT0xVTUVfU0NBTEUiLHkuRkxPQVQsMyksdD1hLmdldEdsb2JhbFByb3BlcnR5KCJRVUFOVElaRURfVk9MVU1FX09GRlNFVCIseS5GTE9BVCwzKTtpZighZXx8IXQpdGhyb3cgbmV3IEVycm9yKCJRVUFOVElaRURfVk9MVU1FX1NDQUxFIG9yIFFVQU5USVpFRF9WT0xVTUVfT0ZGU0VUIG5ldmVyIGZvdW5kLiIpO2Zvcih2YXIgaT1uZXcgRmxvYXQzMkFycmF5KG4ubGVuZ3RoKSxvPW4ubGVuZ3RoLzMsdj1lWzBdL1UsQT1lWzFdL1UsTj1lWzJdL1UsRT10WzBdLFM9dFsxXSxzPXRbMl0sVD0wLEk9dm9pZCAwO1Q8bztUKyspST1UKjMsaVtJXT1uW0ldKnYrRSxpWysrSV09bltJXSpBK1MsaVsrK0ldPW5bSV0qTitzO3JldHVybnthcnJheTppLGl0ZW1TaXplOjMsbm9ybWFsaXplZDohMX19cmV0dXJuIG51bGx9ZnVuY3Rpb24gZyhhKXtpZihhLmhhc1Byb3BlcnR5KCJSR0IiKSl7Zm9yKHZhciByPWEuZ2V0UHJvcGVydHlBcnJheSgiUkdCIix5LlVOU0lHTkVEX0JZVEUsMyksbj1yLmxlbmd0aC8zLGU9bmV3IFVpbnQ4QXJyYXkobio0KSx0PTAsaT12b2lkIDAsbz12b2lkIDA7dDxuO3QrKylvPXQqNCxpPXQqMyxlW29dPXJbaV0sZVsrK29dPXJbKytpXSxlWysrb109clsrK2ldO3JldHVybnthcnJheTplLGl0ZW1TaXplOjQsbm9ybWFsaXplZDohMH19ZWxzZSBpZihhLmhhc1Byb3BlcnR5KCJSR0JBIikpe3ZhciByPWEuZ2V0UHJvcGVydHlBcnJheSgiUkdCQSIseS5VTlNJR05FRF9CWVRFLDQpO3JldHVybnthcnJheTpyLGl0ZW1TaXplOjQsbm9ybWFsaXplZDohMH19ZWxzZSBpZihhLmhhc1Byb3BlcnR5KCJSR0I1NjUiKSl7Zm9yKHZhciByPWEuZ2V0UHJvcGVydHlBcnJheSgiUkdCNTY1Iix5LlVOU0lHTkVEX1NIT1JULDEpLG49ci5sZW5ndGgsZT1uZXcgVWludDhBcnJheShuKjQpLHQ9MCx2PXZvaWQgMCxBPXZvaWQgMDt0PG47dCsrKUE9clt0XSx2PXQqNCxlW3ZdPShBPj4xMSYzMSk8PDMsZVsrK3ZdPShBPj41JjYzKTw8MixlWysrdl09KEEmMzEpPDwzO3JldHVybnthcnJheTplLGl0ZW1TaXplOjQsbm9ybWFsaXplZDohMH19cmV0dXJuIG51bGx9dmFyIEc9MjU1LGg9MTI3LEQ9Mi9HO2Z1bmN0aW9uIFAoYSl7aWYoYS5oYXNQcm9wZXJ0eSgiTk9STUFMIikpe2Zvcih2YXIgcj1hLmdldFByb3BlcnR5QXJyYXkoIk5PUk1BTCIseS5GTE9BVCwzKSxuPXIubGVuZ3RoLzMsZT1uZXcgSW50OEFycmF5KG4qNCksdD0wLGk9dm9pZCAwLG89dm9pZCAwO3Q8bjt0Kyspbz10KjQsaT10KjMsZVtvXT1yW2ldKmgsZVsrK29dPXJbKytpXSpoLGVbKytvXT1yWysraV0qaDtyZXR1cm57YXJyYXk6ZSxpdGVtU2l6ZTo0LG5vcm1hbGl6ZWQ6ITB9fWVsc2UgaWYoYS5oYXNQcm9wZXJ0eSgiTk9STUFMX09DVDE2UCIpKXtmb3IodmFyIHI9YS5nZXRQcm9wZXJ0eUFycmF5KCJOT1JNQUxfT0NUMTZQIix5LlVOU0lHTkVEX0JZVEUsMiksbj1yLmxlbmd0aC8yLGU9bmV3IEludDhBcnJheShuKjQpLHQ9MCx2PXZvaWQgMCxBPXZvaWQgMCxOPXZvaWQgMCxFPXZvaWQgMCxTPXZvaWQgMCxzPXZvaWQgMCxUPXZvaWQgMDt0PG47dCsrKXY9dCoyLEE9clt2XSpELTEsTj1yWysrdl0qRC0xLFM9QTwwPy1BOkEscz1OPDA/LU46TixFPTEtKFMrcyksRTwwJiYoQT0oMS1zKSooQTwwPy0xOjEpLE49KDEtUykqKE48MD8tMToxKSksVD1NYXRoLnNxcnQoQSpBK04qTitFKkUpLHY9dCo0LGVbdl09QS9UKmgsZVsrK3ZdPU4vVCpoLGVbKyt2XT1FL1QqaDtyZXR1cm57YXJyYXk6ZSxpdGVtU2l6ZTo0LG5vcm1hbGl6ZWQ6ITB9fXJldHVybiBudWxsfX0pKCk7Cg==",Uh=cr=>Uint8Array.from(atob(cr),vn=>vn.charCodeAt(0)),fs=typeof self!="undefined"&&self.Blob&&new Blob([Uh(Wu)],{type:"text/javascript;charset=utf-8"});function Qh(cr){let vn;try{if(vn=fs&&(self.URL||self.webkitURL).createObjectURL(fs),!vn)throw"";const yn=new Worker(vn,{name:cr==null?void 0:cr.name});return yn.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(vn)}),yn}catch{return new Worker("data:text/javascript;base64,"+Wu,{name:cr==null?void 0:cr.name})}finally{vn&&(self.URL||self.webkitURL).revokeObjectURL(vn)}}var Hh=new qu(function(){return new Qh},2);function Gh(cr,vn,yn){var Rn=new Ju(cr.featureTableJson,cr.featureTableBinary);return Promise.resolve().then(function(){var Bn=Rn.getExtension("3DTILES_draco_point_compression");return Bn?_h(Bn,Rn):Hh.postMessage({featureTableBinary:Rn.buffer,featureTableJson:Rn.json},[Rn.buffer.buffer])}).then(function(Bn){return cr.attributes=Bn,yn})}function _h(cr,vn){return ga(this,void 0,void 0,function(){var yn,Rn,Bn,Co,Po,To;return ya(this,function(Io){if(yn=cr.properties||{},Rn=cr.byteOffset,Bn=cr.byteLength,!yn||!Number.isFinite(Rn)||!Bn)throw new Error("Draco properties, byteOffset, and byteLength must be defined");return Co=vn.buffer.slice(Rn,Rn+Bn),Po=cr.properties,To={POSITION:"Float32Array",NORMAL:"Float32Array",RGB:"Uint8Array",RGBA:"Uint8Array"},[2,ha.decodeGeometry(Co.buffer,{attributeIDs:Po,attributeTypes:To,useUniqueIDs:!0}).then(function($l){var Wl=$l.getAttribute("POSITION"),Xl=$l.getAttribute("RGB"),Yl=$l.getAttribute("RGBA"),Zl=$l.getAttribute("NORMAL"),ey;if(Yl)ey=Yl;else if(Xl){for(var Rm=Xl.count,ry=Xl.array,_g=new Uint8Array(Rm*4),ty=0,ny=void 0,iy=void 0;ty<Rm;ty++)iy=ty*4,ny=ty*3,_g[iy]=ry[ny],_g[++iy]=ry[++ny],_g[++iy]=ry[++ny];ey=new BufferAttribute(_g,4,Xl.normalized)}return{position:Wl?{array:Wl.array,itemSize:Wl.itemSize,normalized:Wl.normalized}:null,color:ey?{array:ey.array,itemSize:ey.itemSize,normalized:ey.normalized}:null,normal:Zl?{array:Zl.array,itemSize:Zl.itemSize,normalized:Zl.normalized}:null}})]})})}function Jh(cr,vn){var yn;vn===void 0&&(vn={});var Rn=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),Bn={uri:cr};return Promise.resolve().then(function(){return Rn.ajax(cr,{responseType:"arraybuffer"}).then(function(Co){return Co.body})}).then(function(Co){return Promise.resolve(0).then(function(Po){return _u(Bn,Co,Po)}).then(function(Po){return ju(Bn,Co,Po)}).then(function(Po){return Gh(Bn,Co,Po)})}).then(function(){var Co;return Kh(Bn.attributes,{computeBoundingBox:(Co=vn.computeBoundingBox)!==null&&Co!==void 0?Co:!0})}).then(function(Co){var Po=new Matrix4,To=new Matrix4().setPosition(Bn.rtcCenter[0],Bn.rtcCenter[1],Bn.rtcCenter[2]);return Po.premultiply(To),Co.object.applyMatrix4(Po),delete Bn.gltfArrayBuffer,delete Bn.featureTableBinary,delete Bn.batchTableBinary,{type:"pnts",upAxis:"Z",uri:Bn.uri,byteLength:Bn.byteLength,memoryUsage:Wt$2(Co.object),scene:Co.object,textures:[],dispose:function(){return Co.dispose()}}})}function Kh(cr,vn){var yn=new Set,Rn=new BufferGeometry;yn.add(Rn);var Bn=new wa;yn.add(Bn),cr.position&&Rn.setAttribute("position",new BufferAttribute(cr.position.array,cr.position.itemSize,cr.position.normalized)),cr.color&&Rn.setAttribute("color",new BufferAttribute(cr.color.array,cr.color.itemSize,cr.color.normalized)),cr.normal&&(Rn.setAttribute("normal",new BufferAttribute(cr.normal.array,cr.normal.itemSize,cr.normal.normalized)),Bn.defines.USE_POINT_NORMAL=!0),vn.computeBoundingBox&&Rn.computeBoundingBox();var Co=new Vr$1(Rn,Bn);return Co.matrix.compose(Co.position,Co.quaternion,Co.scale),Co.matrixAutoUpdate=!1,Co.frustumCulled=!1,Promise.resolve({object:Co,dispose:function(){yn.forEach(function(Po){Po.dispose()}),yn.clear()}})}function Zu(){var cr={};return cr.OutWindow=function(){this._windowSize=0},cr.OutWindow.prototype.create=function(vn){(!this._buffer||this._windowSize!==vn)&&(this._buffer=[]),this._windowSize=vn,this._pos=0,this._streamPos=0},cr.OutWindow.prototype.flush=function(){var vn=this._pos-this._streamPos;if(vn!==0){for(;vn--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},cr.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},cr.OutWindow.prototype.setStream=function(vn){this.releaseStream(),this._stream=vn},cr.OutWindow.prototype.init=function(vn){vn||(this._streamPos=0,this._pos=0)},cr.OutWindow.prototype.copyBlock=function(vn,yn){var Rn=this._pos-vn-1;for(Rn<0&&(Rn+=this._windowSize);yn--;)Rn>=this._windowSize&&(Rn=0),this._buffer[this._pos++]=this._buffer[Rn++],this._pos>=this._windowSize&&this.flush()},cr.OutWindow.prototype.putByte=function(vn){this._buffer[this._pos++]=vn,this._pos>=this._windowSize&&this.flush()},cr.OutWindow.prototype.getByte=function(vn){var yn=this._pos-vn-1;return yn<0&&(yn+=this._windowSize),this._buffer[yn]},cr.RangeDecoder=function(){},cr.RangeDecoder.prototype.setStream=function(vn){this._stream=vn},cr.RangeDecoder.prototype.releaseStream=function(){this._stream=null},cr.RangeDecoder.prototype.init=function(){var vn=5;for(this._code=0,this._range=-1;vn--;)this._code=this._code<<8|this._stream.readByte()},cr.RangeDecoder.prototype.decodeDirectBits=function(vn){for(var yn=0,Rn=vn,Bn;Rn--;)this._range>>>=1,Bn=this._code-this._range>>>31,this._code-=this._range&Bn-1,yn=yn<<1|1-Bn,this._range&4278190080||(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return yn},cr.RangeDecoder.prototype.decodeBit=function(vn,yn){var Rn=vn[yn],Bn=(this._range>>>11)*Rn;return(this._code^2147483648)<(Bn^2147483648)?(this._range=Bn,vn[yn]+=2048-Rn>>>5,this._range&4278190080||(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=Bn,this._code-=Bn,vn[yn]-=Rn>>>5,this._range&4278190080||(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},cr.initBitModels=function(vn,yn){for(;yn--;)vn[yn]=1024},cr.BitTreeDecoder=function(vn){this._models=[],this._numBitLevels=vn},cr.BitTreeDecoder.prototype.init=function(){cr.initBitModels(this._models,1<<this._numBitLevels)},cr.BitTreeDecoder.prototype.decode=function(vn){for(var yn=1,Rn=this._numBitLevels;Rn--;)yn=yn<<1|vn.decodeBit(this._models,yn);return yn-(1<<this._numBitLevels)},cr.BitTreeDecoder.prototype.reverseDecode=function(vn){for(var yn=1,Rn=0,Bn=0,Co;Bn<this._numBitLevels;++Bn)Co=vn.decodeBit(this._models,yn),yn=yn<<1|Co,Rn|=Co<<Bn;return Rn},cr.reverseDecode2=function(vn,yn,Rn,Bn){for(var Co=1,Po=0,To=0,Io;To<Bn;++To)Io=Rn.decodeBit(vn,yn+Co),Co=Co<<1|Io,Po|=Io<<To;return Po},cr.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new cr.BitTreeDecoder(8),this._numPosStates=0},cr.LenDecoder.prototype.create=function(vn){for(;this._numPosStates<vn;++this._numPosStates)this._lowCoder[this._numPosStates]=new cr.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new cr.BitTreeDecoder(3)},cr.LenDecoder.prototype.init=function(){var vn=this._numPosStates;for(cr.initBitModels(this._choice,2);vn--;)this._lowCoder[vn].init(),this._midCoder[vn].init();this._highCoder.init()},cr.LenDecoder.prototype.decode=function(vn,yn){return vn.decodeBit(this._choice,0)===0?this._lowCoder[yn].decode(vn):vn.decodeBit(this._choice,1)===0?8+this._midCoder[yn].decode(vn):16+this._highCoder.decode(vn)},cr.Decoder2=function(){this._decoders=[]},cr.Decoder2.prototype.init=function(){cr.initBitModels(this._decoders,768)},cr.Decoder2.prototype.decodeNormal=function(vn){var yn=1;do yn=yn<<1|vn.decodeBit(this._decoders,yn);while(yn<256);return yn&255},cr.Decoder2.prototype.decodeWithMatchByte=function(vn,yn){var Rn=1,Bn,Co;do if(Bn=yn>>7&1,yn<<=1,Co=vn.decodeBit(this._decoders,(1+Bn<<8)+Rn),Rn=Rn<<1|Co,Bn!==Co){for(;Rn<256;)Rn=Rn<<1|vn.decodeBit(this._decoders,Rn);break}while(Rn<256);return Rn&255},cr.LiteralDecoder=function(){},cr.LiteralDecoder.prototype.create=function(vn,yn){var Rn;if(!(this._coders&&this._numPrevBits===yn&&this._numPosBits===vn))for(this._numPosBits=vn,this._posMask=(1<<vn)-1,this._numPrevBits=yn,this._coders=[],Rn=1<<this._numPrevBits+this._numPosBits;Rn--;)this._coders[Rn]=new cr.Decoder2},cr.LiteralDecoder.prototype.init=function(){for(var vn=1<<this._numPrevBits+this._numPosBits;vn--;)this._coders[vn].init()},cr.LiteralDecoder.prototype.getDecoder=function(vn,yn){return this._coders[((vn&this._posMask)<<this._numPrevBits)+((yn&255)>>>8-this._numPrevBits)]},cr.Decoder=function(){this._outWindow=new cr.OutWindow,this._rangeDecoder=new cr.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new cr.BitTreeDecoder(4),this._lenDecoder=new cr.LenDecoder,this._repLenDecoder=new cr.LenDecoder,this._literalDecoder=new cr.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new cr.BitTreeDecoder(6),this._posSlotDecoder[1]=new cr.BitTreeDecoder(6),this._posSlotDecoder[2]=new cr.BitTreeDecoder(6),this._posSlotDecoder[3]=new cr.BitTreeDecoder(6)},cr.Decoder.prototype.setDictionarySize=function(vn){return vn<0?!1:(this._dictionarySize!==vn&&(this._dictionarySize=vn,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},cr.Decoder.prototype.setLcLpPb=function(vn,yn,Rn){var Bn=1<<Rn;return vn>8||yn>4||Rn>4?!1:(this._literalDecoder.create(yn,vn),this._lenDecoder.create(Bn),this._repLenDecoder.create(Bn),this._posStateMask=Bn-1,!0)},cr.Decoder.prototype.init=function(){var vn=4;for(this._outWindow.init(!1),cr.initBitModels(this._isMatchDecoders,192),cr.initBitModels(this._isRep0LongDecoders,192),cr.initBitModels(this._isRepDecoders,12),cr.initBitModels(this._isRepG0Decoders,12),cr.initBitModels(this._isRepG1Decoders,12),cr.initBitModels(this._isRepG2Decoders,12),cr.initBitModels(this._posDecoders,114),this._literalDecoder.init();vn--;)this._posSlotDecoder[vn].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},cr.Decoder.prototype.decode=function(vn,yn,Rn){var Bn=0,Co=0,Po=0,To=0,Io=0,$l=0,Wl=0,Xl,Yl,Zl,ey,Rm,ry;for(this._rangeDecoder.setStream(vn),this._outWindow.setStream(yn),this.init();Rn<0||$l<Rn;)if(Xl=$l&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Bn<<4)+Xl)===0)Yl=this._literalDecoder.getDecoder($l++,Wl),Bn>=7?Wl=Yl.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Co)):Wl=Yl.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Wl),Bn=Bn<4?0:Bn-(Bn<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Bn)===1)Zl=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Bn)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Bn<<4)+Xl)===0&&(Bn=Bn<7?9:11,Zl=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Bn)===0?ey=Po:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Bn)===0?ey=To:(ey=Io,Io=To),To=Po),Po=Co,Co=ey),Zl===0&&(Zl=2+this._repLenDecoder.decode(this._rangeDecoder,Xl),Bn=Bn<7?8:11);else if(Io=To,To=Po,Po=Co,Zl=2+this._lenDecoder.decode(this._rangeDecoder,Xl),Bn=Bn<7?7:10,Rm=this._posSlotDecoder[Zl<=5?Zl-2:3].decode(this._rangeDecoder),Rm>=4){if(ry=(Rm>>1)-1,Co=(2|Rm&1)<<ry,Rm<14)Co+=cr.reverseDecode2(this._posDecoders,Co-Rm-1,this._rangeDecoder,ry);else if(Co+=this._rangeDecoder.decodeDirectBits(ry-4)<<4,Co+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),Co<0){if(Co===-1)break;return!1}}else Co=Rm;if(Co>=$l||Co>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Co,Zl),$l+=Zl,Wl=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},cr.Decoder.prototype.setDecoderProperties=function(vn){var yn,Rn,Bn,Co,Po;return vn.size<5||(yn=vn.readByte(),Rn=yn%9,yn=~~(yn/9),Bn=yn%5,Co=~~(yn/5),!this.setLcLpPb(Rn,Bn,Co))?!1:(Po=vn.readByte(),Po|=vn.readByte()<<8,Po|=vn.readByte()<<16,Po+=vn.readByte()*16777216,this.setDictionarySize(Po))},cr.decompress=function(vn,yn,Rn,Bn){var Co=new cr.Decoder;if(!Co.setDecoderProperties(vn))throw"Incorrect stream properties";if(!Co.decode(yn,Rn,Bn))throw"Error in data stream";return!0},cr.decompressFile=function(vn,yn){var Rn=new cr.Decoder,Bn;if(!Rn.setDecoderProperties(vn))throw"Incorrect stream properties";if(Bn=vn.readByte(),Bn|=vn.readByte()<<8,Bn|=vn.readByte()<<16,Bn+=vn.readByte()*16777216,vn.readByte(),vn.readByte(),vn.readByte(),vn.readByte(),!Rn.decode(vn,yn,Bn))throw"Error in data stream";return!0},cr}var jh=Zu();function Xh(){function cr(yn){for(var Rn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bn=new Uint8Array(256),Co=0;Co<Rn.length;Co++)Bn[Rn.charCodeAt(Co)]=Co;var Po=yn.length*.75,To=yn.length,Io,$l=0,Wl,Xl,Yl,Zl;yn[yn.length-1]==="="&&(Po--,yn[yn.length-2]==="="&&Po--);var ey=new ArrayBuffer(Po),Rm=new Uint8Array(ey);for(Io=0;Io<To;Io+=4)Wl=Bn[yn.charCodeAt(Io)],Xl=Bn[yn.charCodeAt(Io+1)],Yl=Bn[yn.charCodeAt(Io+2)],Zl=Bn[yn.charCodeAt(Io+3)],Rm[$l++]=Wl<<2|Xl>>4,Rm[$l++]=(Xl&15)<<4|Yl>>2,Rm[$l++]=(Yl&3)<<6|Zl&63;return ey}var vn="AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=";return cr(vn)}function Wh(cr,vn,yn){try{var Rn={data:vn,offset:0,readByte:function(){return this.data[this.offset++]}},Bn=Rn.data.length,Co={data:[],offset:0,writeByte:function(Io){var $l=Math.floor(this.offset/Bn);this.data[$l]||(this.data[$l]=new Uint8Array(Bn)),this.data[$l][this.offset%Bn]=Io,this.offset++}};cr.decompressFile(Rn,Co);for(var Po=new Uint8Array(Co.offset),To=0;To<Co.offset;To++)Po[To]=Co.data[Math.floor(To/Bn)][To%Bn];yn(null,Po)}catch(Io){yn(Io)}}function Zh(cr,vn,yn){var Rn=24;try{var Bn=new WebAssembly.Memory({initial:16}),Co=new WebAssembly.Module(cr),Po=new WebAssembly.Instance(Co,{env:{memory:Bn,abort:function(){yn(new Error("webAssembly abort"))}}}),To=Po.exports,Io=To.newU8Array(vn.length),$l=new Uint8Array(Bn.buffer,Io+Rn,vn.length);$l.set(vn);var Wl=To.decode(Io),Xl=new Uint32Array(Bn.buffer,Wl,4),Yl=Xl[0],Zl=Xl[2],ey=Xl[3];Yl?yn(null,new Uint8Array(Bn.buffer,ey+Rn,Zl).slice(0,Zl)):yn(new Error("lzma deocder error"))}catch(Rm){yn(Rm)}}var Yh=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Zu.toString(),`)();
  return function(data, callback) {
    return (`).concat(Wh.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(Xh.toString(),`)();
  return function(data, callback) {
    return (`).concat(Zh.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),R0=typeof Worker!="undefined"&&typeof Blob!="undefined",Yu="";if(R0)try{var $h=new Blob([Yh],{type:"text/javascript"});Yu=URL.createObjectURL($h)}catch(cr){}var $u=function(){function cr(){var vn=this;if(!R0)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var yn=this.worker=new Worker(Yu);yn.onmessage=function(Rn){var Bn=Rn.data,Co=Bn.id,Po=Bn.result,To=Bn.error,Io=vn.getKey(Co);vn.requests[Io]&&(To?vn.requests[Io](new Error(To)):vn.requests[Io](null,Po),delete vn.requests[Io])},yn.onerror=function(Rn){return console.error(Rn)}}return cr.prototype.getKey=function(vn){return"key_"+String(vn)},cr.prototype.decompress=function(vn,yn){var Rn=++this.callCounter;this.requests[this.getKey(Rn)]=yn,this.worker.postMessage({type:"decompress",id:Rn,data:vn},[vn.buffer])},cr.prototype.terminate=function(){this.worker.terminate()},cr.support=R0,cr}();function ds(cr){return Array.prototype.reduce.call(cr,function(vn,yn,Rn){return vn|yn<<Rn*8},0)}function ep(cr){for(var vn=[],yn=cr.length,Rn=function(Po){var To={data:cr[Po],offset:0,readByte:function(){return this.data[this.offset++]}},Io=To.data.length,$l={data:[],offset:0,writeByte:function(Xl){var Yl=Math.floor(this.offset/Io);this.data[Yl]||(this.data[Yl]=new Uint8Array(Io)),this.data[Yl][this.offset%Io]=Xl,this.offset++}};jh.decompressFile(To,$l),Bn=new Uint8Array($l.offset);for(var Wl=0;Wl<$l.offset;Wl++)Bn[Wl]=$l.data[Math.floor(Wl/Io)][Wl%Io];vn.push(Bn)},Bn,Co=0;Co<yn;Co++)Rn(Co);return vn}function tp(cr){for(var vn=[],yn=cr.length,Rn=function(Co){vn.push(new Promise(function(Po,To){var Io=new $u;Io.decompress(cr[Co],function($l,Wl){if(Io.terminate(),$l)return To($l);Po(Wl)})}))},Bn=0;Bn<yn;Bn++)Rn(Bn);return Promise.all(vn)}function el(cr){var vn=new Uint8Array(cr),yn=ds(vn.slice(0,4));if(yn>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var Rn=[],Bn=[],Co=4+yn*4,Po=0;Po<yn;Po++)Bn[Po]=ds(vn.slice(4+Po*4,8+Po*4)),Po===yn-1?Rn[Po]=vn.subarray(Co,Co+Bn[Po]):Rn[Po]=vn.slice(Co,Co+Bn[Po]),Co+=Bn[Po];return $u.support?tp(Rn):Promise.resolve(ep(Rn))}var Za=!1,tl=[];function rl(cr){if(cr===void 0&&(cr=!1),!(!cr&&Za)){Za=!0;var vn=tl.shift();if(vn){try{vn()}catch{}Ft$2.shared.add(function(){return rl(!0)},!0,2,-100)}else Za=!1}}function pa(cr){return new Promise(function(vn,yn){var Rn=function(){try{vn(cr())}catch(Bn){yn(Bn)}};tl.push(Rn),Ft$2.shared.add(function(){return rl()},!0,2,-100)})}const An=minimal.Reader,Sr$1=minimal.util,sr=minimal.roots["@REALSEE/FIVE:five/loaders/model/parsers/protobuf/pbm.proto"]||(minimal.roots["@REALSEE/FIVE:five/loaders/model/parsers/protobuf/pbm.proto"]={}),nl=sr.Model=(()=>{function cr(vn){if(this.chunks=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.chunks=Sr$1.emptyArray,cr.prototype.createAt=Sr$1.Long?Sr$1.Long.fromBits(0,0,!0):0,cr.prototype.description="",cr.decode=function(vn,yn){vn instanceof An||(vn=An.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new sr.Model;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.chunks&&Bn.chunks.length||(Bn.chunks=[]),Bn.chunks.push(sr.Chunk.decode(vn,vn.uint32()));break}case 2:{Bn.createAt=vn.uint64();break}case 3:{Bn.description=vn.string();break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Model"},cr})();sr.Chunk=(()=>{function cr(vn){if(vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.vertices=null,cr.prototype.faces=null,cr.prototype.name="",cr.prototype.texture="",cr.decode=function(vn,yn){vn instanceof An||(vn=An.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new sr.Chunk;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.vertices=sr.Vertices.decode(vn,vn.uint32());break}case 2:{Bn.faces=sr.Faces.decode(vn,vn.uint32());break}case 3:{Bn.name=vn.string();break}case 4:{Bn.texture=vn.string();break}default:vn.skipType(Co&7);break}}if(!Bn.hasOwnProperty("vertices"))throw Sr$1.ProtocolError("missing required 'vertices'",{instance:Bn});if(!Bn.hasOwnProperty("faces"))throw Sr$1.ProtocolError("missing required 'faces'",{instance:Bn});if(!Bn.hasOwnProperty("name"))throw Sr$1.ProtocolError("missing required 'name'",{instance:Bn});return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Chunk"},cr})();sr.Vertices=(()=>{function cr(vn){if(this.xyz=[],this.uvs=[],this.marks=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.xyz=Sr$1.emptyArray,cr.prototype.uvs=Sr$1.emptyArray,cr.prototype.marks=Sr$1.emptyArray,cr.decode=function(vn,yn){vn instanceof An||(vn=An.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new sr.Vertices;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.xyz&&Bn.xyz.length||(Bn.xyz=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.xyz.push(vn.float())}else Bn.xyz.push(vn.float());break}case 2:{if(Bn.uvs&&Bn.uvs.length||(Bn.uvs=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.uvs.push(vn.float())}else Bn.uvs.push(vn.float());break}case 3:{if(Bn.marks&&Bn.marks.length||(Bn.marks=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.marks.push(vn.int32())}else Bn.marks.push(vn.int32());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Vertices"},cr})();sr.Faces=(()=>{function cr(vn){if(this.indices=[],this.normals=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.indices=Sr$1.emptyArray,cr.prototype.normals=Sr$1.emptyArray,cr.decode=function(vn,yn){vn instanceof An||(vn=An.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new sr.Faces;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.indices&&Bn.indices.length||(Bn.indices=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.indices.push(vn.uint32())}else Bn.indices.push(vn.uint32());break}case 2:{if(Bn.normals&&Bn.normals.length||(Bn.normals=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.normals.push(vn.float())}else Bn.normals.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Faces"},cr})();sr.VertexMark=(()=>{const cr={},vn=Object.create(cr);return vn[cr[0]="VERTEX_MARK_UNSPECIFIED"]=0,vn[cr[1]="VERTEX_MARK_ROOF"]=1,vn})();function rp(cr,vn){var yn,Rn,Bn,Co;vn===void 0&&(vn={});var Po=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),To={byteLength:0},Io=uo((Rn=vn.textureOptions)!==null&&Rn!==void 0?Rn:{},(Co=(Bn=vn.textureArray)===null||Bn===void 0?void 0:Bn.length)!==null&&Co!==void 0?Co:0),$l={};if(vn.textureArray)for(var Wl=0,Xl=vn.textureArray;Wl<Xl.length;Wl++){var Yl=Xl[Wl];$l[Yl]=so$1(Yl,Io,Po)}return Promise.resolve().then(function(){return Po.ajax(cr,{responseType:"arraybuffer"})}).then(function(Zl){return To.byteLength=Zl.body.byteLength,pa(function(){var ey=new Uint8Array(Zl.body);return nl.decode(ey)})}).then(function(Zl){return pa(function(){var ey,Rm,ry;return al(Zl,(ey=vn.light)!==null&&ey!==void 0?ey:!1,(Rm=vn.textureBaseUri)!==null&&Rm!==void 0?Rm:function(){var _g=cr.lastIndexOf("/");if(_g>=0){var ty=cr.slice(0,_g)+"/";return/\/model\/$/.test(ty)&&(ty=ty.replace(/\/model\/$/,"/materials/")),ty}return""}(),((ry=vn.textureArray)!==null&&ry!==void 0?ry:[]).slice(),Io,$l,Po)})}).then(function(Zl){var ey=new Group$1;ey.matrixAutoUpdate=!1,ey.matrix.compose(ey.position,ey.quaternion,ey.scale),ey.name=cr;for(var Rm=0,ry=Zl.objects;Rm<ry.length;Rm++){var _g=ry[Rm];ey.add(_g)}return{type:"pbm",upAxis:"Z",uri:cr,byteLength:To.byteLength,memoryUsage:Wt$2(ey),scene:ey,textures:Zl.textures,dispose:function(){return Zl.dispose()}}})}function il(cr){var vn=cr.match(/(group|floor)-?(\d+)/);return vn?parseInt(vn[2],10):0}function B0(cr){var vn=cr.match(/(chunk)-?(\d+)/);return vn?parseInt(vn[2],10):0}function np(cr){var vn=cr.match(/(sub)-?(\d+)/);return vn?parseInt(vn[2],10):0}function hs(cr){var vn=il(cr.name),yn=B0(cr.name),Rn=np(cr.name);return vn*1e6+yn*1e3+Rn}function ip(cr){for(var vn,yn,Rn,Bn=typeof cr.createAt=="number"?cr.createAt:0,Co=(vn=cr.description)!==null&&vn!==void 0?vn:"",Po=[],To=!0,Io=!0,$l=0,Wl=cr.chunks;$l<Wl.length;$l++){var Xl=Wl[$l];if(!Xl.vertices.marks||Xl.vertices.marks.length===0){Io=!1;break}}for(var Yl=0,Zl=cr.chunks;Yl<Zl.length;Yl++){var Xl=Zl[Yl];if(!Xl.faces.normals||Xl.faces.normals.length===0){To=!1;break}}for(var ey=cr.chunks.sort(function(Qy,Gy){return hs(Qy)-hs(Gy)}),Rm=[],ry=0,_g=ey;ry<_g.length;ry++){var Xl=_g[ry],ty=il(Xl.name);Rm[ty]||(Rm[ty]=[]),Rm[ty].push(Xl)}for(var ny=0;ny<Rm.length;ny++){var iy=Rm[ny];if(iy)if(To){for(var oy=0,ay=0;ay<iy.length;ay++){var Xl=iy[ay];oy+=Xl.faces.indices.length}for(var uy=new Float32Array(oy*3),hy=new Float32Array(oy*2),my=new Float32Array(oy*3),ly=Io?new Float32Array(oy):void 0,sy=[],cy=[1/0,1/0,1/0,-1/0,-1/0,-1/0],fy=0,vy=0;vy<iy.length;vy++){for(var dy=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Xl=iy[vy],Ay=Xl.vertices.xyz,gy=Xl.vertices.uvs,wy=Xl.faces.indices,Cy=Xl.faces.normals,My=Xl.vertices.marks,Py=wy.length,ay=0;ay<Py;ay++){var Dy=wy[ay],qy=uy[fy*3+ay*3]=Ay[Dy*3],Xy=uy[fy*3+ay*3+1]=Ay[Dy*3+1],$y=uy[fy*3+ay*3+2]=Ay[Dy*3+2];ly&&(ly[fy+ay]=My[Dy]),hy[fy*2+ay*2]=gy[Dy*2],hy[fy*2+ay*2+1]=gy[Dy*2+1];var xy=Math.floor(ay/3)*3;my[fy*3+ay*3]=Cy[xy],my[fy*3+ay*3+1]=Cy[xy+1],my[fy*3+ay*3+2]=Cy[xy+2],qy<dy[0]&&(dy[0]=qy),Xy<dy[1]&&(dy[1]=Xy),$y<dy[2]&&(dy[2]=$y),qy>dy[3]&&(dy[3]=qy),Xy>dy[4]&&(dy[4]=Xy),$y>dy[5]&&(dy[5]=$y)}dy[0]<cy[0]&&(cy[0]=dy[0]),dy[1]<cy[1]&&(cy[1]=dy[1]),dy[2]<cy[2]&&(cy[2]=dy[2]),dy[3]>cy[3]&&(cy[3]=dy[3]),dy[4]>cy[4]&&(cy[4]=dy[4]),dy[5]>cy[5]&&(cy[5]=dy[5]),sy.push({materialIndex:vy,name:Xl.name,chunkName:B0(Xl.name),start:fy,count:Xl.faces.indices.length,texture:(yn=Xl.texture)!==null&&yn!==void 0?yn:void 0}),fy+=Py}var Ry={createAt:Bn,description:Co,vertices:uy,uvs:hy,normals:my,masks:ly,indices:null,floorIndex:ny,groups:sy,extents:cy};Po.push(Ry)}else{for(var oy=0,Ly=0,ay=0;ay<iy.length;ay++){var Xl=iy[ay];Ly+=Xl.vertices.xyz.length/3,oy+=Xl.faces.indices.length}for(var uy=new Float32Array(Ly*3),hy=new Float32Array(Ly*2),my=void 0,ky=new Float32Array(Ly),Ey=new Uint32Array(oy),ly=Io?new Float32Array(oy):void 0,sy=[],cy=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Iy=0,fy=0,vy=0;vy<iy.length;vy++){for(var dy=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Xl=iy[vy],Ay=Xl.vertices.xyz,zy=Xl.vertices.marks,gy=Xl.vertices.uvs,wy=Xl.faces.indices,Uy=Ay.length/3,Py=wy.length,ay=0;ay<Uy;ay++){var qy=uy[fy*3+ay*3]=Ay[ay*3],Xy=uy[fy*3+ay*3+1]=Ay[ay*3+1],$y=uy[fy*3+ay*3+2]=Ay[ay*3+2];ly&&(ly[fy+ay]=zy[ay]),hy[fy*2+ay*2]=gy[ay*2],hy[fy*2+ay*2+1]=gy[ay*2+1],ky[fy+ay]=ny,qy<dy[0]&&(dy[0]=qy),Xy<dy[1]&&(dy[1]=Xy),$y<dy[2]&&(dy[2]=$y),qy>dy[3]&&(dy[3]=qy),Xy>dy[4]&&(dy[4]=Xy),$y>dy[5]&&(dy[5]=$y)}dy[0]<cy[0]&&(cy[0]=dy[0]),dy[1]<cy[1]&&(cy[1]=dy[1]),dy[2]<cy[2]&&(cy[2]=dy[2]),dy[3]>cy[3]&&(cy[3]=dy[3]),dy[4]>cy[4]&&(cy[4]=dy[4]),dy[5]>cy[5]&&(cy[5]=dy[5]);for(var ay=0;ay<Py;ay++)Ey[Iy+ay]=fy+wy[ay];sy.push({materialIndex:vy,name:Xl.name,chunkName:B0(Xl.name),start:Iy,count:Xl.faces.indices.length,texture:(Rn=Xl.texture)!==null&&Rn!==void 0?Rn:void 0}),fy+=Uy,Iy+=Py}var Ry={createAt:Bn,description:Co,vertices:uy,uvs:hy,normals:my,masks:ly,indices:Ey,floorIndex:ny,groups:sy,extents:cy};Po.push(Ry)}}return Po}function so$1(cr,vn,yn){var Rn=O$n({key:"texture.pbm"},Xt$2(vn,["format","quality","size","sharpen","mappings"])),Bn=new Fi$1,Co=Bn.loadTexture(cr,{imageURL:{transform:vn.transform,options:Rn},encoding:sRGBEncoding,wrapS:ClampToEdgeWrapping,wrapT:ClampToEdgeWrapping,minFilter:LinearFilter,maxSize:typeof Rn.size=="number"?new Vector2(Rn.size,Rn.size):void 0,fetcher:yn}).then(function(Po){var To=Po.body;return To.needsUpdate=!0,To});return Object.assign(Co,{url:cr,textureOptions:vn})}function al(cr,vn,yn,Rn,Bn,Co,Po){Co===void 0&&(Co={});for(var To=ip(cr),Io=0,$l="",Wl=[],Xl={},Yl=new Set,Zl=0,ey=0,Rm=To;ey<Rm.length;ey++){var ry=Rm[ey],_g=ry.createAt,ty=ry.description,ny=ry.vertices,iy=ry.masks,oy=ry.uvs,ay=ry.normals,uy=ry.indices,hy=ry.floorIndex,my=ry.groups,ly=ry.extents,sy=new Box3;sy.min.x=ly[0],sy.min.y=ly[1],sy.min.z=ly[2],sy.max.x=ly[3],sy.max.y=ly[4],sy.max.z=ly[5];var cy=new BufferGeometry;cy.setAttribute("position",new BufferAttribute(ny,3)),cy.setAttribute("uv",new BufferAttribute(oy,2)),ay&&cy.setAttribute("normal",new BufferAttribute(ay,3)),iy&&cy.setAttribute("mask",new BufferAttribute(iy,1)),uy&&cy.setIndex(new BufferAttribute(uy,1)),cy.boundingBox=sy,cy.boundingSphere=sy.getBoundingSphere(new Sphere);for(var fy=0,vy=my;fy<vy.length;fy++){var dy=vy[fy];cy.addGroup(dy.start,dy.count,dy.materialIndex)}Yl.add(cy);for(var Ay=[],gy=0,wy=my;gy<wy.length;gy++){var dy=wy[gy],Cy=Rn[dy.chunkName]||(dy.texture?ct$4(yn||"",dy.texture):void 0),My=new Mr$1(vn?"phong":"basic");My.floorIndex=hy,cy.attributes.normal===void 0&&(My.flatShading=!0),cy.attributes.mask&&(My.defines.USE_VERTEX_MARK=!0),Ay.push(My),Cy?(Zl++,Xl[Cy]?Xl[Cy].push(My):Xl[Cy]=[My]):My.color=new Color(16777215),Yl.add(My),My.refreshUniforms()}var Py=new Ht$2(cy,Ay);Py.name="model_floor_"+hy,Py.userData.createAt=_g,Py.userData.description=ty,Py.matrix.compose(Py.position,Py.quaternion,Py.scale),Py.matrixAutoUpdate=!1,Py.frustumCulled=!1,Io=_g,$l=ty,Wl.push(Py)}var Dy=function(qy){qy=uo(qy,Zl);for(var Xy=[],$y=function(ky){var Ey=null;ky in Co&&(Ey=Co[ky]),Ey||(Ey=so$1(ky,qy,Po)),Xy.push(Ey.then(function(Iy){for(var zy=0,Uy=Xl[ky];zy<Uy.length;zy++){var Qy=Uy[zy];Qy.map&&(Yl.delete(Qy.map),Qy.map.dispose()),Qy.map=Iy,Qy.refreshUniforms(),Yl.add(Iy)}return Iy}).catch(function(){for(var Iy=0,zy=Xl[ky];Iy<zy.length;Iy++){var Uy=zy[Iy];Uy.map&&(Yl.delete(Uy.map),Uy.map.dispose()),Uy.map=null,Uy.color=new Color(16777215),Uy.refreshUniforms()}return null}))},xy=0,Ry=Object.keys(Xl);xy<Ry.length;xy++){var Ly=Ry[xy];$y(Ly)}for(var Ly in Co)delete Co[Ly];return Promise.all(Xy).then(function(ky){return ky.filter(function(Ey){return Ey})})};return Dy(Bn).then(function(qy){return{createAt:Io,description:$l,objects:Wl,textures:qy,dispose:function(){Yl.forEach(function(Xy){Xy.dispose()}),Yl.clear()}}})}function uo(cr,vn){return cr=Object.assign({},cr),cr.autoResize!==!1&&(vn>96?cr.size=Math.min(cr.size||1/0,100):vn>48?cr.size=Math.min(cr.size||1/0,200):vn>24?cr.size=Math.min(cr.size||1/0,400):vn>22?cr.size=Math.min(cr.size||1/0,800):vn>5&&(cr.size=Math.min(cr.size||1/0,1024))),cr}function ap(cr,vn){var yn,Rn,Bn,Co;vn===void 0&&(vn={});var Po=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),To={byteLength:0},Io=uo((Rn=vn.textureOptions)!==null&&Rn!==void 0?Rn:{},(Co=(Bn=vn.textureArray)===null||Bn===void 0?void 0:Bn.length)!==null&&Co!==void 0?Co:0),$l={};if(vn.textureArray)for(var Wl=0,Xl=vn.textureArray;Wl<Xl.length;Wl++){var Yl=Xl[Wl];$l[Yl]=so$1(Yl,Io,Po)}return Promise.resolve().then(function(){return Po.ajax(cr,{responseType:"arraybuffer"})}).then(function(Zl){return el(Zl.body)}).then(function(Zl){return pa(function(){for(var ey,Rm={chunks:[],createAt:void 0,description:void 0},ry=0,_g=Zl;ry<_g.length;ry++){var ty=_g[ry],ny=nl.decode(ty);ny.chunks.length&&((ey=Rm.chunks).push.apply(ey,ny.chunks),Rm.createAt=ny.createAt,Rm.description=ny.description)}return Rm})}).then(function(Zl){return pa(function(){var ey,Rm,ry,_g;return al(Zl,(ey=vn.light)!==null&&ey!==void 0?ey:!1,(Rm=vn.textureBaseUri)!==null&&Rm!==void 0?Rm:function(){var ty=cr.lastIndexOf("/");if(ty>=0){var ny=cr.slice(0,ty)+"/";return/\/model\/$/.test(ny)&&(ny=ny.replace(/\/model\/$/,"/materials/")),ny}return""}(),((ry=vn.textureArray)!==null&&ry!==void 0?ry:[]).slice(),(_g=vn.textureOptions)!==null&&_g!==void 0?_g:{},$l,Po)})}).then(function(Zl){var ey=new Group$1;ey.name=cr;for(var Rm=0,ry=Zl.objects;Rm<ry.length;Rm++){var _g=ry[Rm];ey.add(_g)}return{type:"at3d",upAxis:"Z",uri:cr,byteLength:To.byteLength,memoryUsage:Wt$2(ey),scene:ey,textures:Zl.textures,dispose:function(){return Zl.dispose()}}})}const tt$4=minimal.Reader,bt$3=minimal.util,ke$3=minimal.roots["@REALSEE/FIVE:five/loaders/model/parsers/protobuf/dome.proto"]||(minimal.roots["@REALSEE/FIVE:five/loaders/model/parsers/protobuf/dome.proto"]={}),op=ke$3.Model=(()=>{function cr(vn){if(this.meshes=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.meshes=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Model;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.meshes&&Bn.meshes.length||(Bn.meshes=[]),Bn.meshes.push(ke$3.Mesh.decode(vn,vn.uint32()));break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Model"},cr})();ke$3.Mesh=(()=>{function cr(vn){if(this.chunks=[],this.matrix=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.name="",cr.prototype.chunks=bt$3.emptyArray,cr.prototype.matrix=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Mesh;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.name=vn.string();break}case 2:{Bn.chunks&&Bn.chunks.length||(Bn.chunks=[]),Bn.chunks.push(ke$3.Chunk.decode(vn,vn.uint32()));break}case 3:{Bn.matrix&&Bn.matrix.length||(Bn.matrix=[]),Bn.matrix.push(ke$3.Matrix.decode(vn,vn.uint32()));break}default:vn.skipType(Co&7);break}}if(!Bn.hasOwnProperty("name"))throw bt$3.ProtocolError("missing required 'name'",{instance:Bn});return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Mesh"},cr})();ke$3.Matrix=(()=>{function cr(vn){if(this.elements=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.elements=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Matrix;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.elements&&Bn.elements.length||(Bn.elements=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.elements.push(vn.float())}else Bn.elements.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Matrix"},cr})();ke$3.Chunk=(()=>{function cr(vn){if(this.material=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.geometry=null,cr.prototype.material=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Chunk;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 2:{Bn.geometry=ke$3.Geometry.decode(vn,vn.uint32());break}case 3:{Bn.material&&Bn.material.length||(Bn.material=[]),Bn.material.push(ke$3.Material.decode(vn,vn.uint32()));break}default:vn.skipType(Co&7);break}}if(!Bn.hasOwnProperty("geometry"))throw bt$3.ProtocolError("missing required 'geometry'",{instance:Bn});return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Chunk"},cr})();ke$3.Geometry=(()=>{function cr(vn){if(this.groups=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.position=null,cr.prototype.uv=null,cr.prototype.uv2=null,cr.prototype.normal=null,cr.prototype.groups=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Geometry;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.position=ke$3.Position.decode(vn,vn.uint32());break}case 2:{Bn.uv=ke$3.UV.decode(vn,vn.uint32());break}case 3:{Bn.uv2=ke$3.UV.decode(vn,vn.uint32());break}case 4:{Bn.normal=ke$3.Normal.decode(vn,vn.uint32());break}case 5:{Bn.groups&&Bn.groups.length||(Bn.groups=[]),Bn.groups.push(ke$3.Group.decode(vn,vn.uint32()));break}default:vn.skipType(Co&7);break}}if(!Bn.hasOwnProperty("position"))throw bt$3.ProtocolError("missing required 'position'",{instance:Bn});if(!Bn.hasOwnProperty("normal"))throw bt$3.ProtocolError("missing required 'normal'",{instance:Bn});return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Geometry"},cr})();ke$3.Position=(()=>{function cr(vn){if(this.array=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.array=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Position;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.array&&Bn.array.length||(Bn.array=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.array.push(vn.float())}else Bn.array.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Position"},cr})();ke$3.UV=(()=>{function cr(vn){if(this.array=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.array=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.UV;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.array&&Bn.array.length||(Bn.array=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.array.push(vn.float())}else Bn.array.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/UV"},cr})();ke$3.Normal=(()=>{function cr(vn){if(this.array=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.array=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Normal;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.array&&Bn.array.length||(Bn.array=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.array.push(vn.float())}else Bn.array.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Normal"},cr})();ke$3.Group=(()=>{function cr(vn){if(vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.start=0,cr.prototype.count=0,cr.prototype.materialIndex=0,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Group;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.start=vn.uint32();break}case 2:{Bn.count=vn.uint32();break}case 3:{Bn.materialIndex=vn.uint32();break}default:vn.skipType(Co&7);break}}if(!Bn.hasOwnProperty("start"))throw bt$3.ProtocolError("missing required 'start'",{instance:Bn});if(!Bn.hasOwnProperty("count"))throw bt$3.ProtocolError("missing required 'count'",{instance:Bn});if(!Bn.hasOwnProperty("materialIndex"))throw bt$3.ProtocolError("missing required 'materialIndex'",{instance:Bn});return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Group"},cr})();ke$3.Material=(()=>{function cr(vn){if(vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.kd=null,cr.prototype.ks=null,cr.prototype.ke=null,cr.prototype.mapkd="",cr.prototype.mapks="",cr.prototype.mapke="",cr.prototype.norm="",cr.prototype.mapbump="",cr.prototype.bump="",cr.prototype.mapd="",cr.prototype.ns=0,cr.prototype.d=0,cr.prototype.tr=0,cr.prototype.mapkdrepeat="",cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Material;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{Bn.kd=ke$3.Color.decode(vn,vn.uint32());break}case 2:{Bn.ks=ke$3.Color.decode(vn,vn.uint32());break}case 3:{Bn.ke=ke$3.Color.decode(vn,vn.uint32());break}case 4:{Bn.mapkd=vn.string();break}case 5:{Bn.mapks=vn.string();break}case 6:{Bn.mapke=vn.string();break}case 7:{Bn.norm=vn.string();break}case 8:{Bn.mapbump=vn.string();break}case 9:{Bn.bump=vn.string();break}case 10:{Bn.mapd=vn.string();break}case 11:{Bn.ns=vn.float();break}case 12:{Bn.d=vn.float();break}case 13:{Bn.tr=vn.float();break}case 14:{Bn.mapkdrepeat=vn.string();break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Material"},cr})();ke$3.Color=(()=>{function cr(vn){if(this.rgb=[],vn)for(let yn=Object.keys(vn),Rn=0;Rn<yn.length;++Rn)vn[yn[Rn]]!=null&&(this[yn[Rn]]=vn[yn[Rn]])}return cr.prototype.rgb=bt$3.emptyArray,cr.decode=function(vn,yn){vn instanceof tt$4||(vn=tt$4.create(vn));let Rn=yn===void 0?vn.len:vn.pos+yn,Bn=new ke$3.Color;for(;vn.pos<Rn;){let Co=vn.uint32();switch(Co>>>3){case 1:{if(Bn.rgb&&Bn.rgb.length||(Bn.rgb=[]),(Co&7)===2){let Po=vn.uint32()+vn.pos;for(;vn.pos<Po;)Bn.rgb.push(vn.float())}else Bn.rgb.push(vn.float());break}default:vn.skipType(Co&7);break}}return Bn},cr.getTypeUrl=function(vn){return vn===void 0&&(vn="type.googleapis.com"),vn+"/Color"},cr})();var sp=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);function up(cr,vn){var yn;vn===void 0&&(vn={});var Rn=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),Bn={byteLength:0};return Promise.resolve().then(function(){return Rn.ajax(cr,{responseType:"arraybuffer"})}).then(function(Co){var Po,To;return Bn.byteLength=Co.body.byteLength,ol(new Uint8Array(Co.body),(Po=vn.light)!==null&&Po!==void 0?Po:!0,vn.textureBaseUri||"",(To=vn.textureOptions)!==null&&To!==void 0?To:{},Rn)}).then(function(Co){var Po=new Group$1;Po.matrixAutoUpdate=!1,Po.applyMatrix4(sp),Po.matrix.compose(Po.position,Po.quaternion,Po.scale),Po.name=cr;for(var To=0,Io=Co.objects;To<Io.length;To++){var $l=Io[To];Po.add($l)}return{type:"dome",upAxis:"Z",uri:cr,byteLength:Bn.byteLength,memoryUsage:Wt$2(Po),scene:Po,textures:Co.textures,dispose:function(){return Co.dispose()}}})}function lp(cr){for(var vn=[0,0,0],yn=0;yn<cr.attributes.normal.array.length/9;yn++)vn[0]=cr.attributes.normal.array[yn*9],vn[1]=cr.attributes.normal.array[yn*9+1],vn[2]=cr.attributes.normal.array[yn*9+2],cr.attributes.normal.array[yn*9]=cr.attributes.normal.array[yn*9+6],cr.attributes.normal.array[yn*9+1]=cr.attributes.normal.array[yn*9+7],cr.attributes.normal.array[yn*9+2]=cr.attributes.normal.array[yn*9+8],cr.attributes.normal.array[yn*9+6]=vn[0],cr.attributes.normal.array[yn*9+7]=vn[1],cr.attributes.normal.array[yn*9+8]=vn[2];for(var yn=0;yn<cr.attributes.position.array.length/9;yn++)vn[0]=cr.attributes.position.array[yn*9],vn[1]=cr.attributes.position.array[yn*9+1],vn[2]=cr.attributes.position.array[yn*9+2],cr.attributes.position.array[yn*9]=cr.attributes.position.array[yn*9+6],cr.attributes.position.array[yn*9+1]=cr.attributes.position.array[yn*9+7],cr.attributes.position.array[yn*9+2]=cr.attributes.position.array[yn*9+8],cr.attributes.position.array[yn*9+6]=vn[0],cr.attributes.position.array[yn*9+7]=vn[1],cr.attributes.position.array[yn*9+8]=vn[2];for(var yn=0;yn<cr.attributes.uv.array.length/6;yn++)vn[0]=cr.attributes.uv.array[yn*6],vn[1]=cr.attributes.uv.array[yn*6+1],cr.attributes.uv.array[yn*6]=cr.attributes.uv.array[yn*6+4],cr.attributes.uv.array[yn*6+1]=cr.attributes.uv.array[yn*6+5],cr.attributes.uv.array[yn*6+4]=vn[0],cr.attributes.uv.array[yn*6+5]=vn[1];cr.attributes.normal.needsUpdate=!0,cr.attributes.position.needsUpdate=!0,cr.attributes.uv.needsUpdate=!0}function cp(cr){var vn=cr.position,yn=cr.normal,Rn=cr.uv,Bn=cr.uv2,Co=cr.groups,Po=new BufferGeometry;Po.setAttribute("position",new BufferAttribute(new Float32Array(vn.array),3)),yn&&Po.setAttribute("normal",new BufferAttribute(new Float32Array(yn.array),3)),Rn&&Po.setAttribute("uv",new BufferAttribute(new Float32Array(Rn.array),2)),Bn&&Po.setAttribute("uv2",new BufferAttribute(new Float32Array(Bn.array),2));for(var To=0,Io=Co;To<Io.length;To++){var $l=Io[To];Po.addGroup($l.start,$l.count,$l.materialIndex)}return Po}function Nn(cr,vn,yn,Rn,Bn,Co,Po){if(Po.hasOwnProperty(cr))return Po[cr];cr=cr.split("?")[0],Kr$1(cr)||(cr=ct$4(vn,cr)),cr=cr.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/"),cr.indexOf("//")===0&&(cr="https:"+cr);var To=O$n({key:"texture.dome",size:64},Xt$2(yn,["quality","format","sharpen","mappings"])),Io=Po[cr]=Bn.loadTexture(cr,{imageURL:{transform:yn.transform,options:To},wrapS:RepeatWrapping,wrapT:RepeatWrapping,fetcher:Co}).then(function($l){var Wl=$l.body;return Rn&&Wl.repeat.copy(Rn),Wl.needsUpdate=!0,Wl.updateMatrix(),Wl});return Io}function fp(cr,vn,yn,Rn,Bn,Co,Po,To,Io){var $l=[],Wl=new Mr$1(vn?"phong":"basic");if(To.add(Wl),cr.kd&&(Wl.color=new Color().fromArray(cr.kd.rgb).convertLinearToSRGB()),cr.mapkd){var Xl=null;if(cr.mapkdrepeat){var Yl=cr.mapkdrepeat.split(/\s+/).map(function(ry){return Number(ry)}),Zl=Yl[0],ey=Yl[1];Xl=new Vector2(Zl,ey)}$l.push(Nn(cr.mapkd,yn,Rn,Xl,Bn,Co,Po).then(function(ry){ry.encoding=sRGBEncoding,Wl.map=ry,To.add(ry),Io.add(ry),Wl.needsUpdate=!0}).catch(q$q))}if(cr.ks&&(Wl.specular=new Color().fromArray(cr.ks.rgb).convertLinearToSRGB()),cr.mapks&&$l.push(Nn(cr.mapks,yn,Rn,null,Bn,Co,Po).then(function(ry){Wl.specularMap=ry,To.add(ry),Io.add(ry)}).catch(q$q)),cr.ke&&(Wl.emissive=new Color().fromArray(cr.ke.rgb).convertLinearToSRGB()),cr.mapke&&$l.push(Nn(cr.mapke,yn,Rn,null,Bn,Co,Po).then(function(ry){ry.encoding=sRGBEncoding,Wl.emissiveMap=ry,To.add(ry),Io.add(ry)}).catch(q$q)),cr.norm&&$l.push(Nn(cr.norm,yn,Rn,null,Bn,Co,Po).then(function(ry){Wl.normalMap=ry,To.add(ry),Io.add(ry)}).catch(q$q)),cr.mapbump&&$l.push(Nn(cr.mapbump,yn,Rn,null,Bn,Co,Po).then(function(ry){Wl.bumpMap=ry,To.add(ry),Io.add(ry)}).catch(q$q)),cr.bump&&$l.push(Nn(cr.bump,yn,Rn,null,Bn,Co,Po).then(function(ry){Wl.bumpMap=ry,To.add(ry),Io.add(ry)}).catch(q$q)),typeof cr.ns=="number"&&(Wl.shininess=cr.ns),typeof cr.d=="number"){var Rm=cr.d;Rm>0&&Rm<1&&(Wl.opacity=Rm)}return Wl.floorIndex=0,Wl.refreshUniforms(),{material:Wl,textureReady:Promise.all($l).then(function(){return Wl.refreshUniforms()}).then(q$q)}}function dp(cr){return op.decode(cr).meshes}function ol(cr,vn,yn,Rn,Bn){for(var Co=[],Po=[],To=new Set,Io=dp(cr),$l=new Fi$1,Wl=new Matrix4,Xl=new Vector3,Yl=new Quaternion,Zl=new Vector3,ey={},Rm=new Set,ry=0,_g=Io;ry<_g.length;ry++){var ty=_g[ry],ny=ty.name,iy=ty.chunks,oy=ty.matrix;if(!(ny==="Ceiling"||ny==="CeilingDrop"))for(var ay=0,uy=oy;ay<uy.length;ay++){var hy=uy[ay];Wl.elements=hy.elements;for(var my=new Group$1,ly=0;ly<iy.length;ly++){var sy=cp(iy[ly].geometry);sy.applyMatrix4(Wl),Wl.decompose(Xl,Yl,Zl),Zl.x*Zl.y*Zl.z<0&&sy.attributes.normal&&sy.attributes.position&&sy.attributes.uv&&lp(sy),To.add(sy);for(var cy=[],fy=0,vy=iy[ly].material;fy<vy.length;fy++){var dy=vy[fy],Ay=fp(dy,vn,yn||"",Rn,$l,Bn,ey,To,Rm),gy=Ay.material,wy=Ay.textureReady;Po.push(wy),cy.push(gy)}var Cy=new Ht$2(sy,cy);Cy.name="chunk_"+ly,Cy.matrix.compose(Cy.position,Cy.quaternion,Cy.scale),Cy.matrixAutoUpdate=!1,Cy.frustumCulled=!1,my.add(Cy)}my.name=ny,Co.push(my)}}return Promise.all(Po).catch(q$q).then(function(){return{createAt:0,description:"",objects:Co,textures:Array.from(Rm),dispose:function(){To.forEach(function(My){My.dispose()}),To.clear()}}})}var hp=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);function pp(cr,vn){var yn;vn===void 0&&(vn={});var Rn=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),Bn={byteLength:0};return Promise.resolve().then(function(){return Rn.ajax(cr,{responseType:"arraybuffer"})}).then(function(Co){return Bn.byteLength=Co.body.byteLength,el(Co.body)}).then(function(Co){var Po=Co.reduce(function($l,Wl){return $l+Wl.length},0),To=new Uint8Array(Po),Io=0;return Co.forEach(function($l){To.set($l,Io),Io+=$l.length}),To}).then(function(Co){var Po,To;return ol(Co,(Po=vn.light)!==null&&Po!==void 0?Po:!0,vn.textureBaseUri||"",(To=vn.textureOptions)!==null&&To!==void 0?To:{},Rn)}).then(function(Co){var Po=new Group$1;Po.matrixAutoUpdate=!1,Po.applyMatrix4(hp),Po.matrix.compose(Po.position,Po.quaternion,Po.scale),Po.name=cr;for(var To=0,Io=Co.objects;To<Io.length;To++){var $l=Io[To];Po.add($l)}return{type:"domez",upAxis:"Z",uri:cr,byteLength:Bn.byteLength,memoryUsage:Wt$2(Po),scene:Po,textures:Co.textures,dispose:function(){return Co.dispose()}}})}var vp=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);function mp(cr,vn){var yn,Rn;vn===void 0&&(vn={});var Bn=(yn=vn.upAxis)!==null&&yn!==void 0?yn:"Y",Co=(Rn=vn.fetcher)!==null&&Rn!==void 0?Rn:new Zt$1({allowHosts:["*"]}),Po=0;return Promise.resolve().then(function(){return Co.ajax(cr,{responseType:"arraybuffer"}).then(function(To){return Po=To.body.byteLength,To.body})}).then(function(To){var Io;return oo$1(To,{copyUV2:!1,resourcePath:cr.slice(0,cr.lastIndexOf("/")+1),search:(Io=cr.split("?")[1])!==null&&Io!==void 0?Io:"",jsonModify:function($l){var Wl;if($l.extensionsUsed=(Wl=$l.extensionsUsed)!==null&&Wl!==void 0?Wl:[],typeof vn.light=="boolean"){var Xl="KHR_materials_unlit";if(vn.light){var Yl=$l.extensionsUsed.indexOf(Xl);Yl>=0&&$l.extensionsUsed.splice(Yl,1)}else{var Yl=$l.extensionsUsed.indexOf(Xl);Yl===-1&&$l.extensionsUsed.push(Xl)}}{var Xl="PBM_mesh",Yl=$l.extensionsUsed.indexOf(Xl);Yl===-1&&$l.extensionsUsed.push(Xl)}return $l},fetcher:Co})}).then(function(To){var Io=new Matrix4;if(Bn==="Y"&&Io.premultiply(vp),To.CESIUM_RTC){var $l=new Matrix4().setPosition(To.CESIUM_RTC.center);Io.premultiply($l)}var Wl=To.scene;return Wl.applyMatrix4(Io),{type:"gltf",upAxis:"Z",uri:cr,byteLength:Po,memoryUsage:Wt$2(Wl),scene:Wl,textures:To.textures,dispose:function(){return To.dispose()}}})}var Ji$1=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),Dt$2=new Color;function sl(cr,vn){var yn,Rn;vn===void 0&&(vn={});var Bn=(yn=vn.upAxis)!==null&&yn!==void 0?yn:"Z",Co=(Rn=vn.fetcher)!==null&&Rn!==void 0?Rn:new Zt$1({allowHosts:["*"]}),Po=0;return Promise.resolve().then(function(){return Co.ajax(cr,{responseType:"arraybuffer"}).then(function(To){return Po=To.body.byteLength,To.body})}).then(function(To){var Io,$l;return Ap(To,{propertyNameMapping:(Io=vn.propertyNameMapping)!==null&&Io!==void 0?Io:{},customPropertyMapping:($l=vn.customPropertyMapping)!==null&&$l!==void 0?$l:{}})}).then(function(To){var Io=To.geometry;switch(vn.type){case"geometry":{var $l=Io;return Bn==="Y"&&$l.applyMatrix4(Ji$1),{type:"ply",upAxis:"Z",uri:cr,byteLength:Po,memoryUsage:Xu($l),scene:$l,meta:{},textures:[],dispose:function(){Io.dispose()}}}case"line":{var Wl="color"in Io.attributes,Xl=new LineBasicMaterial({vertexColors:Wl}),$l=new Line(Io,Xl);return $l.computeLineDistances(),Bn==="Y"&&$l.applyMatrix4(Ji$1),{type:"ply",upAxis:"Z",uri:cr,byteLength:Po,memoryUsage:Wt$2($l),scene:$l,meta:{},textures:[],dispose:function(){Io.dispose(),Xl.dispose()}}}case"pbmMesh":{var Yl=new Mr$1(vn.light?"phong":"basic");Yl.vertexColors="color"in Io.attributes;var $l=new Mesh(Io,Yl);return Bn==="Y"&&$l.applyMatrix4(Ji$1),{type:"ply",upAxis:"Z",uri:cr,byteLength:Po,memoryUsage:Wt$2($l),scene:$l,meta:{},textures:[],dispose:function(){Io.dispose(),Yl.dispose()}}}case"pbmPointCloud":{var Zl=new wa,$l=new Vr$1(Io,Zl);return Bn==="Y"&&$l.applyMatrix4(Ji$1),{type:"ply",upAxis:"Z",uri:cr,byteLength:Po,memoryUsage:Wt$2($l),scene:$l,meta:{},textures:[],dispose:function(){Io.dispose(),Zl.dispose()}}}}throw new Error("Invalid Type: ".concat(vn.type))})}function Ap(cr,vn){var yn=new Uint8Array(cr),Rn=Ep(yn),Bn=Rn.headerText,Co=Rn.headerLength,Po=yp(Bn,Co,vn);if(Po.format==="ascii"){var To=new TextDecoder().decode(yn);return{header:Po,geometry:xp(To,Po,vn)}}else return{header:Po,geometry:Mp(cr,Po,vn)}}function gp(cr,vn){var yn={name:"",type:cr[0]};return yn.type==="list"?(yn.name=cr[3],yn.countType=cr[1],yn.itemType=cr[2]):yn.name=cr[1],yn.name in vn.propertyNameMapping&&(yn.name=vn.propertyNameMapping[yn.name]),yn}function yp(cr,vn,yn){vn===void 0&&(vn=0);var Rn=/^ply([\s\S]*)end_header(\r\n|\r|\n)/,Bn="",Co=Rn.exec(cr);Co!==null&&(Bn=Co[1]);for(var Po={format:"",version:"",comments:[],elements:[],headerLength:vn,objInfo:""},To=Bn.split(/\r\n|\r|\n/),Io=null,$l=0;$l<To.length;$l++){var Wl=To[$l];if(Wl=Wl.trim(),Wl!==""){var Xl=Wl.split(/\s+/),Yl=Xl.shift();switch(Wl=Xl.join(" "),Yl){case"format":Po.format=Xl[0],Po.version=Xl[1];break;case"comment":Po.comments.push(Wl);break;case"element":Io&&Po.elements.push(Io),Io={name:Xl[0],count:parseInt(Xl[1]),properties:[]};break;case"property":Io&&Io.properties.push(gp(Xl,yn));break;case"obj_info":Po.objInfo=Wl;break;default:console.log("unhandled",Yl,Xl)}}}return Io&&Po.elements.push(Io),Po}function Ya(cr,vn){switch(vn){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(cr);case"float":case"double":case"float32":case"float64":return parseFloat(cr);default:throw new Error("unspport type: "+vn)}}function bp(cr,vn){for(var yn={},Rn=0;Rn<cr.length;Rn++){if(vn.empty())return null;if(cr[Rn].type==="list"){for(var Bn=[],Co=Ya(vn.next(),cr[Rn].countType),Po=0;Po<Co;Po++){if(vn.empty())return null;Bn.push(Ya(vn.next(),cr[Rn].itemType))}yn[cr[Rn].name]=Bn}else yn[cr[Rn].name]=Ya(vn.next(),cr[Rn].type)}return yn}function ul(cr){for(var vn={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]},yn=0,Rn=Object.keys(cr.customPropertyMapping);yn<Rn.length;yn++){var Bn=Rn[yn];vn[Bn]=[]}return vn}function ll(cr){var vn=cr.map(function(Rn){return Rn.name});function yn(Rn){for(var Bn=0,Co=Rn.length;Bn<Co;Bn++){var Po=Rn[Bn];if(vn.includes(Po))return Po}return null}return{attrX:yn(["x","px","posx"])||"x",attrY:yn(["y","py","posy"])||"y",attrZ:yn(["z","pz","posz"])||"z",attrNX:yn(["nx","normalx"]),attrNY:yn(["ny","normaly"]),attrNZ:yn(["nz","normalz"]),attrS:yn(["s","u","texture_u","tx"]),attrT:yn(["t","v","texture_v","ty"]),attrR:yn(["red","diffuse_red","r","diffuse_r"]),attrG:yn(["green","diffuse_green","g","diffuse_g"]),attrB:yn(["blue","diffuse_blue","b","diffuse_b"])}}function xp(cr,vn,yn){var Rn=ul(yn),Bn=/end_header\s+(\S[\s\S]*\S|\S)\s*$/,Co,Po=null;(Po=Bn.exec(cr))!==null?Co=Po[1].split(/\s+/):Co=[];var To=new Cp(Co);e:for(var Io=0;Io<vn.elements.length;Io++)for(var $l=vn.elements[Io],Wl=ll($l.properties),Xl=0;Xl<$l.count;Xl++){var Yl=bp($l.properties,To);if(!Yl)break e;fl(Rn,$l.name,Yl,Wl,yn)}return cl(Rn,yn)}function cl(cr,vn){var yn=new BufferGeometry;cr.indices.length>0&&yn.setIndex(cr.indices),yn.setAttribute("position",new Float32BufferAttribute(cr.vertices,3)),cr.normals.length>0&&yn.setAttribute("normal",new Float32BufferAttribute(cr.normals,3)),cr.uvs.length>0&&yn.setAttribute("uv",new Float32BufferAttribute(cr.uvs,2)),cr.colors.length>0&&yn.setAttribute("color",new Float32BufferAttribute(cr.colors,3)),(cr.faceVertexUvs.length>0||cr.faceVertexColors.length>0)&&(yn=yn.toNonIndexed(),cr.faceVertexUvs.length>0&&yn.setAttribute("uv",new Float32BufferAttribute(cr.faceVertexUvs,2)),cr.faceVertexColors.length>0&&yn.setAttribute("color",new Float32BufferAttribute(cr.faceVertexColors,3)));for(var Rn=0,Bn=Object.keys(vn.customPropertyMapping);Rn<Bn.length;Rn++){var Co=Bn[Rn];if(cr[Co].length>0){var Po=vn.customPropertyMapping[Co],To=Po.itemType,Io=Po.itemNames,$l=Po.normalized,Wl=Io.length,Xl=void 0;switch(To){case"float32":Xl=new Float32BufferAttribute(cr[Co],Wl,$l);break;case"uint32":Xl=new Uint32BufferAttribute(cr[Co],Wl,$l);break;case"int32":Xl=new Int32BufferAttribute(cr[Co],Wl,$l);break;case"uint16":Xl=new Uint16BufferAttribute(cr[Co],Wl,$l);break;case"int16":Xl=new Int16BufferAttribute(cr[Co],Wl,$l);break;case"uint8":Xl=new Uint8BufferAttribute(cr[Co],Wl,$l);break;case"int8":Xl=new Int8BufferAttribute(cr[Co],Wl,$l);break;default:Xl=new Float32BufferAttribute(cr[Co],Wl,$l);break}yn.setAttribute(Co,Xl)}}return yn.computeBoundingSphere(),yn}function fl(cr,vn,yn,Rn,Bn){if(vn==="vertex"){Rn.attrX!==null&&Rn.attrY!==null&&Rn.attrZ!==null&&cr.vertices.push(yn[Rn.attrX],yn[Rn.attrY],yn[Rn.attrZ]),Rn.attrNX!==null&&Rn.attrNY!==null&&Rn.attrNZ!==null&&cr.normals.push(yn[Rn.attrNX],yn[Rn.attrNY],yn[Rn.attrNZ]),Rn.attrS!==null&&Rn.attrT!==null&&cr.uvs.push(yn[Rn.attrS],yn[Rn.attrT]),Rn.attrR!==null&&Rn.attrG!==null&&Rn.attrB!==null&&(Dt$2.setRGB(yn[Rn.attrR]/255,yn[Rn.attrG]/255,yn[Rn.attrB]/255),cr.colors.push(Dt$2.r,Dt$2.g,Dt$2.b));for(var Co=0,Po=Object.keys(Bn.customPropertyMapping);Co<Po.length;Co++)for(var To=Po[Co],Io=0,$l=Bn.customPropertyMapping[To].itemNames;Io<$l.length;Io++){var Wl=$l[Io];cr[To].push(yn[Wl])}}else if(vn==="face"){var Xl=yn.vertex_indices||yn.vertex_index,Yl=yn.texcoord;Xl.length===3?(cr.indices.push(Xl[0],Xl[1],Xl[2]),Yl&&Yl.length===6&&(cr.faceVertexUvs.push(Yl[0],Yl[1]),cr.faceVertexUvs.push(Yl[2],Yl[3]),cr.faceVertexUvs.push(Yl[4],Yl[5]))):Xl.length===4&&(cr.indices.push(Xl[0],Xl[1],Xl[3]),cr.indices.push(Xl[1],Xl[2],Xl[3])),Rn.attrR!==null&&Rn.attrG!==null&&Rn.attrB!==null&&(Dt$2.setRGB(yn[Rn.attrR]/255,yn[Rn.attrG]/255,yn[Rn.attrB]/255),cr.faceVertexColors.push(Dt$2.r,Dt$2.g,Dt$2.b),cr.faceVertexColors.push(Dt$2.r,Dt$2.g,Dt$2.b),cr.faceVertexColors.push(Dt$2.r,Dt$2.g,Dt$2.b))}}function wp(cr,vn){for(var yn={},Rn=0,Bn=0;Bn<vn.length;Bn++){var Co=vn[Bn],Po=Co.valueReader;if(Co.type==="list"){var To=[],Io=Co.countReader.read(cr+Rn);Rn+=Co.countReader.size;for(var $l=0;$l<Io;$l++)To.push(Po.read(cr+Rn)),Rn+=Po.size;yn[Co.name]=To}else yn[Co.name]=Po.read(cr+Rn),Rn+=Po.size}return[yn,Rn]}function Sp(cr,vn,yn){function Rn(To,Io,$l){switch(Io){case"int8":case"char":return{read:function(Wl){return To.getInt8(Wl)},size:1};case"uint8":case"uchar":return{read:function(Wl){return To.getUint8(Wl)},size:1};case"int16":case"short":return{read:function(Wl){return To.getInt16(Wl,$l)},size:2};case"uint16":case"ushort":return{read:function(Wl){return To.getUint16(Wl,$l)},size:2};case"int32":case"int":return{read:function(Wl){return To.getInt32(Wl,$l)},size:4};case"uint32":case"uint":return{read:function(Wl){return To.getUint32(Wl,$l)},size:4};case"float32":case"float":return{read:function(Wl){return To.getFloat32(Wl,$l)},size:4};case"float64":case"double":return{read:function(Wl){return To.getFloat64(Wl,$l)},size:8};default:throw new Error("not support type: "+Io)}}for(var Bn=0,Co=cr.length;Bn<Co;Bn++){var Po=cr[Bn];Po.type==="list"?(Po.countReader=Rn(vn,Po.countType,yn),Po.valueReader=Rn(vn,Po.itemType,yn)):Po.valueReader=Rn(vn,Po.type,yn)}}function Mp(cr,vn,yn){for(var Rn=ul(yn),Bn=vn.format==="binary_little_endian",Co=new DataView(cr,vn.headerLength),Po,To=0,Io=0;Io<vn.elements.length;Io++){var $l=vn.elements[Io],Wl=$l.properties,Xl=ll(Wl);Sp(Wl,Co,Bn);for(var Yl=0;Yl<$l.count;Yl++){Po=wp(To,Wl),To+=Po[1];var Zl=Po[0];fl(Rn,$l.name,Zl,Xl,yn)}}return cl(Rn,yn)}function Ep(cr){var vn=0,yn=!0,Rn="",Bn=[],Co=new TextDecoder().decode(cr.subarray(0,5)),Po=/^ply\r\n/.test(Co);do{var To=String.fromCharCode(cr[vn++]);To!==`
`&&To!=="\r"?Rn+=To:(Rn==="end_header"&&(yn=!1),Rn!==""&&(Bn.push(Rn),Rn=""))}while(yn&&vn<cr.length);return Po===!0&&vn++,{headerText:Bn.join("\r")+"\r",headerLength:vn}}var Cp=function(){function cr(vn){this.arr=vn,this.i=0}return cr.prototype.empty=function(){return this.i>=this.arr.length},cr.prototype.next=function(){return this.arr[this.i++]},cr}(),Ip=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),Tp=/^[og]\s*(.+)?/,Pp=/^mtllib /,Rp=/^usemtl /,Bp=/^usemap /,ps=/\s+/,ni=new Color,Fp=function(){function cr(){this.objects=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materials={},this.materialLibraries=[],this.startObject("",!1)}return cr.prototype.startObject=function(vn,yn){if(this.object&&this.object.fromDeclaration===!1){this.object.name=vn,this.object.fromDeclaration=yn!==!1;return}var Rn=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:vn||"",fromDeclaration:yn!==!1,geometry:{vertices:[],hasNormal:!0,normals:[],hasColor:!0,colors:[],hasUV:!0,uvs:[],index:[],indexMap:{}},materials:[],smooth:!0,startMaterial:function(Co,Po){var To,Io,$l=this._finalize(!1);$l&&($l.inherited||((To=$l.groupCount)!==null&&To!==void 0?To:0)<=0)&&this.materials.splice((Io=$l.index)!==null&&Io!==void 0?Io:0,1);var Wl={index:this.materials.length,name:Co||"",mtllib:Array.isArray(Po)&&Po.length>0?Po[Po.length-1]:"",smooth:$l!==void 0?$l.smooth:this.smooth,groupStart:$l!==void 0?$l.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(Xl){var Yl={index:typeof Xl=="number"?Xl:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(){return this}};return Yl.clone=this.clone.bind(Yl),Yl}};return this.materials.push(Wl),Wl},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(Co){var Po,To,Io=this.currentMaterial();if(Io&&Io.groupEnd===-1&&(Io.groupEnd=this.geometry.index.length,Io.groupCount=Io.groupEnd-((Po=Io.groupStart)!==null&&Po!==void 0?Po:0),Io.inherited=!1),Co&&this.materials.length>1)for(var $l=this.materials.length-1;$l>=0;$l--)((To=this.materials[$l].groupCount)!==null&&To!==void 0?To:0)<=0&&this.materials.splice($l,1);return Co&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),Io}},Rn&&Rn.name&&typeof Rn.clone=="function"){var Bn=Rn.clone(0);Bn.inherited=!0,this.object.materials.push(Bn)}this.objects.push(this.object)},cr.prototype.finalize=function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},cr.prototype.parseVertexIndex=function(vn,yn){var Rn=parseInt(vn,10);return(Rn>=0?Rn-1:Rn+yn/3)*3},cr.prototype.parseNormalIndex=function(vn,yn){var Rn=parseInt(vn,10);return(Rn>=0?Rn-1:Rn+yn/3)*3},cr.prototype.parseUVIndex=function(vn,yn){var Rn=parseInt(vn,10);return(Rn>=0?Rn-1:Rn+yn/2)*2},cr.prototype.addFace=function(vn,yn,Rn,Bn,Co,Po,To,Io,$l){var Wl=this.object.geometry,Xl=this.vertices.length,Yl=this.normals.length,Zl=this.uvs.length,ey=this.parseVertexIndex(vn,Xl),Rm=this.parseVertexIndex(yn,Xl),ry=this.parseVertexIndex(Rn,Xl),_g=To!==void 0?this.parseNormalIndex(To,Yl):void 0,ty=Io!==void 0?this.parseNormalIndex(Io,Yl):void 0,ny=$l!==void 0?this.parseNormalIndex($l,Yl):void 0,iy=Bn!==void 0?this.parseUVIndex(Bn,Zl):void 0,oy=Co!==void 0?this.parseUVIndex(Co,Zl):void 0,ay=Po!==void 0?this.parseUVIndex(Po,Zl):void 0;(Wl.hasNormal===!0&&_g===void 0||ty===void 0||ny===void 0)&&(Wl.hasNormal=!1),(Wl.hasUV===!0&&iy===void 0||oy===void 0||ay===void 0)&&(Wl.hasUV=!1);var uy=[ey,iy,_g].join(":"),hy=Wl.indexMap[uy];hy===void 0&&(hy=Wl.vertices.length/3,Wl.indexMap[uy]=hy,Wl.vertices.push(this.vertices[ey+0],this.vertices[ey+1],this.vertices[ey+2]),Wl.hasColor&&(this.colors[ey]===void 0?Wl.hasColor=!1:Wl.colors.push(this.colors[ey+0],this.colors[ey+1],this.colors[ey+2])),Wl.hasNormal&&Wl.normals.push(this.normals[ey+0],this.normals[ey+1],this.normals[ey+2]),Wl.hasUV&&Wl.uvs.push(this.uvs[iy+0],this.uvs[iy+1])),Wl.index.push(hy);var my=[Rm,oy,ty].join(":"),ly=Wl.indexMap[my];ly===void 0&&(ly=Wl.vertices.length/3,Wl.indexMap[my]=ly,Wl.vertices.push(this.vertices[Rm+0],this.vertices[Rm+1],this.vertices[Rm+2]),Wl.hasColor&&(this.colors[Rm]===void 0?Wl.hasColor=!1:Wl.colors.push(this.colors[Rm+0],this.colors[Rm+1],this.colors[Rm+2])),Wl.hasNormal&&Wl.normals.push(this.normals[Rm+0],this.normals[Rm+1],this.normals[Rm+2]),Wl.hasUV&&Wl.uvs.push(this.uvs[oy+0],this.uvs[oy+1])),Wl.index.push(ly);var sy=[ry,ay,ny].join(":"),cy=Wl.indexMap[sy];cy===void 0&&(cy=Wl.vertices.length/3,Wl.indexMap[sy]=cy,Wl.vertices.push(this.vertices[ry+0],this.vertices[ry+1],this.vertices[ry+2]),Wl.hasColor&&(this.colors[ry]===void 0?Wl.hasColor=!1:Wl.colors.push(this.colors[ry+0],this.colors[ry+1],this.colors[ry+2])),Wl.hasNormal&&Wl.normals.push(this.normals[ry+0],this.normals[ry+1],this.normals[ry+2]),Wl.hasUV&&Wl.uvs.push(this.uvs[ay+0],this.uvs[ay+1])),Wl.index.push(cy)},cr}();function Lp(cr){var vn=new Fp;cr.indexOf(`\r
`)!==-1&&(cr=cr.replace(/\r\n/g,`
`)),cr.indexOf(`\\
`)!==-1&&(cr=cr.replace(/\\\n/g,""));for(var yn=cr.split(`
`),Rn=[],Bn=0,Co=yn.length;Bn<Co;Bn++){var Po=yn[Bn].trimStart();if(Po.length!==0){var To=Po.charAt(0);if(To!=="#"){if(To==="v"){var Io=Po.split(ps);switch(Io[0]){case"v":vn.vertices.push(parseFloat(Io[1]),parseFloat(Io[2]),parseFloat(Io[3])),Io.length>=7?(ni.setRGB(parseFloat(Io[4]),parseFloat(Io[5]),parseFloat(Io[6])),ni.convertSRGBToLinear(),vn.colors.push(ni.r,ni.g,ni.b)):vn.colors.push(void 0,void 0,void 0);break;case"vn":vn.normals.push(parseFloat(Io[1]),parseFloat(Io[2]),parseFloat(Io[3]));break;case"vt":vn.uvs.push(parseFloat(Io[1]),parseFloat(Io[2]));break}}else if(To==="f"){for(var $l=Po.slice(1).trim(),Wl=$l.split(ps),Xl=[],Yl=0,Zl=Wl.length;Yl<Zl;Yl++){var ey=Wl[Yl];if(ey.length>0){var Rm=ey.split("/");Xl.push(Rm)}}for(var ry=Xl[0],Yl=1,Zl=Xl.length-1;Yl<Zl;Yl++){var _g=Xl[Yl],ty=Xl[Yl+1];vn.addFace(ry[0],_g[0],ty[0],ry[1],_g[1],ty[1],ry[2],_g[2],ty[2])}}else if(To!=="l"&&To!=="p")if((Rn=Tp.exec(Po))!==null){var ny=(" "+Rn[0].slice(1).trim()).slice(1);vn.startObject(ny)}else if(Rp.test(Po))vn.object.startMaterial(Po.substring(7).trim(),vn.materialLibraries);else if(Pp.test(Po))vn.materialLibraries.push(Po.substring(7).trim());else if(Bp.test(Po))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(To==="s"){if(Rn=Po.split(" "),Rn.length>1){var iy=Rn[1].trim().toLowerCase();vn.object.smooth=iy!=="0"&&iy!=="off"}else vn.object.smooth=!0;var oy=vn.object.currentMaterial();oy&&(oy.smooth=vn.object.smooth)}else{if(Po==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+Po+'"')}}}}return vn.finalize(),vn}function kp(cr,vn,yn){for(var Rn=new Fi$1,Bn=vn.split(`
`),Co={name:""},Po=/\s+/,To={},Io=0;Io<Bn.length;Io++){var $l=Bn[Io];if($l=$l.trim(),!($l.length===0||$l.charAt(0)==="#")){var Wl=$l.indexOf(" "),Xl=Wl>=0?$l.substring(0,Wl):$l;Xl=Xl.toLowerCase();var Yl=Wl>=0?$l.substring(Wl+1):"";if(Yl=Yl.trim(),Xl==="newmtl")Co={name:Yl},To[Yl]=Co;else if(Xl==="ka"||Xl==="kd"||Xl==="ks"||Xl==="ke"){var Zl=Yl.split(Po,3);Co[Xl]=[parseFloat(Zl[0]),parseFloat(Zl[1]),parseFloat(Zl[2])]}else(Xl==="map_kd"||Xl==="map_ks"||Xl==="map_ke"||Xl==="norm"||Xl==="map_bump"||Xl==="bump"||Xl==="map_d"||Xl==="ns"||Xl==="d"||Xl==="tr")&&(Co[Xl]=Yl)}}function ey(ry){var _g={url:"",scale:new Vector2(1,1),offset:new Vector2(0,0),bumpScale:1},ty=ry.split(/\s+/),ny;return ny=ty.indexOf("-bm"),ny>=0&&(_g.bumpScale=parseFloat(ty[ny+1]),ty.splice(ny,2)),ny=ty.indexOf("-s"),ny>=0&&(_g.scale.set(parseFloat(ty[ny+1]),parseFloat(ty[ny+2])),ty.splice(ny,4)),ny=ty.indexOf("-o"),ny>=0&&(_g.offset.set(parseFloat(ty[ny+1]),parseFloat(ty[ny+2])),ty.splice(ny,4)),_g.url=ty.join(" ").trim(),_g}function Rm(ry,_g,ty){var ny=ey(ty),iy=ct$4(yn.path,ny.url);return Rn.loadTexture(iy,{fetcher:yn.fetcher,encoding:_g==="map"||_g==="emissiveMap"?sRGBEncoding:LinearEncoding,minFilter:LinearFilter,magFilter:LinearFilter,wrapS:RepeatWrapping,wrapT:RepeatWrapping}).then(function(oy){var ay=oy.body;return ay.repeat.copy(ny.scale),ay.offset.copy(ny.offset),ry.bumpScale=ny.bumpScale,ry[_g]=ay,ay})}return{name:cr,create:function(ry){var _g=new Mr$1(yn.light?"phong":"basic"),ty=[],ny=To[ry];if(ny){if(ny.kd!==void 0&&_g.color.fromArray(ny.kd),ny.ks!==void 0&&_g.specular.fromArray(ny.ks),ny.ke!==void 0&&_g.emissive.fromArray(ny.ke),ny.map_kd!==void 0&&ty.push(Rm(_g,"map",ny.map_kd)),ny.map_ks!==void 0&&ty.push(Rm(_g,"specularMap",ny.map_ks)),ny.map_ke!==void 0&&ty.push(Rm(_g,"emissiveMap",ny.map_ke)),ny.norm!==void 0&&ty.push(Rm(_g,"normalMap",ny.norm)),ny.map_bump!==void 0&&ty.push(Rm(_g,"bumpMap",ny.map_bump)),ny.bump!==void 0&&ty.push(Rm(_g,"bumpMap",ny.bump)),ny.map_d!==void 0&&ty.push(Rm(_g,"alphaMap",ny.map_d)),ny.ns!==void 0&&(_g.shininess=parseFloat(ny.ns)),ny.d!==void 0){var iy=parseFloat(ny.d);iy<1&&(_g.opacity=iy,_g.transparent=!0)}if(ny.tr!==void 0){var iy=parseFloat(ny.tr);iy>0&&(_g.opacity=1-iy,_g.transparent=!0)}}var oy=Promise.all(ty).then(function(ay){return _g.refreshUniforms(),ay});return[_g,oy]}}}function Op(cr,vn){for(var yn,Rn=[],Bn=[],Co=new Group$1,Po=function($l,Wl){var Xl=cr.objects[$l],Yl=Xl.geometry,Zl=Xl.materials,ey=!1;if(Yl.vertices.length===0)return"continue";var Rm=new BufferGeometry;Bn.push(function(){return Rm.dispose()}),Rm.setAttribute("position",new BufferAttribute(new Float32Array(Yl.vertices),3)),Yl.normals.length>0&&Rm.setAttribute("normal",new BufferAttribute(new Float32Array(Yl.normals),3)),Yl.colors.length>0&&(ey=!0,Rm.setAttribute("color",new BufferAttribute(new Float32Array(Yl.colors),3))),Yl.uvs.length>0&&Rm.setAttribute("uv",new BufferAttribute(new Float32Array(Yl.uvs),2)),Yl.index.length>0&&Rm.setIndex(new BufferAttribute(new Uint32Array(Yl.index),1)),Rm.computeBoundingBox(),Rm.computeBoundingSphere();for(var ry=[],_g=function(ay,uy){var hy=Zl[ay],my=hy.name+"_"+hy.smooth+"_"+ey,ly=cr.materials[my];if(!ly){for(var sy=null,cy=0,fy=vn;cy<fy.length;cy++){var vy=fy[cy],dy=vy.name,Ay=vy.create;dy===hy.mtllib&&(sy=Ay(hy.name))}if(!sy){var gy=new Mr$1;gy.refreshUniforms(),sy=[gy,Promise.resolve([])]}ly=sy[0],ly.name=hy.name,ly.flatShading=!(hy.smooth||Rm.attributes.normal),ly.vertexColors=ey,cr.materials[my]=ly;var wy=sy[1];Rn.push(wy),Bn.push(function(){return ly.dispose()})}ry.push(ly)},ty=0,ny=Zl.length;ty<ny;ty++)_g(ty);Rm.clearGroups();for(var ty=0,ny=Zl.length;ty<ny;ty++){var iy=Zl[ty];iy.groupCount&&Rm.addGroup((yn=iy.groupStart)!==null&&yn!==void 0?yn:0,iy.groupCount,ty)}(!Rm.groups||Rm.groups.length===0)&&Rm.addGroup(0,Rm.index?Rm.index.count:Rm.attributes.position.count,0);var oy=new Ht$2(Rm,ry);oy.name=Xl.name,Co.add(oy)},To=0,Io=cr.objects.length;To<Io;To++)Po(To);return Promise.all(Rn).then(function($l){for(var Wl=[],Xl=0,Yl=$l;Xl<Yl.length;Xl++){var Zl=Yl[Xl];Wl=Wl.concat(Zl)}return{scene:Co,textures:Wl,dispose:function(){return Bn.forEach(function(ey){return ey()})}}})}function zp(cr,vn){var yn,Rn;vn===void 0&&(vn={});var Bn=(yn=vn.upAxis)!==null&&yn!==void 0?yn:"Z",Co=(Rn=vn.fetcher)!==null&&Rn!==void 0?Rn:new Zt$1({allowHosts:["*"]}),Po=cr.slice(0,cr.lastIndexOf("/")+1),To=0,Io;return Promise.resolve().then(function(){return Co.ajax(cr,{responseType:"arraybuffer"})}).then(function($l){To=$l.body.byteLength;var Wl=new TextDecoder;return Wl.decode($l.body)}).then(function($l){return Io=Lp($l),Promise.all(Io.materialLibraries.map(function(Wl){var Xl=ct$4(Po,Wl),Yl=Xl.slice(0,Xl.lastIndexOf("/")+1);return Co.ajax(Xl,{responseType:"text"}).then(function(Zl){var ey;return kp(Wl,Zl.body,{path:Yl,light:(ey=vn.light)!==null&&ey!==void 0?ey:!1,fetcher:Co})})}))}).then(function($l){return Op(Io,$l)}).then(function($l){var Wl=new Matrix4;return Bn==="Y"&&Wl.premultiply(Ip),$l.scene.applyMatrix4(Wl),{type:"obj",upAxis:"Z",uri:cr,byteLength:To,memoryUsage:Wt$2($l.scene),scene:$l.scene,textures:$l.textures,dispose:function(){return $l.dispose()}}})}var jt$3=Uint8Array,_n=Uint16Array,Vp=Int32Array,dl=new jt$3([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hl=new jt$3([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dp=new jt$3([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pl=function(cr,vn){for(var yn=new _n(31),Rn=0;Rn<31;++Rn)yn[Rn]=vn+=1<<cr[Rn-1];for(var Bn=new Vp(yn[30]),Rn=1;Rn<30;++Rn)for(var Co=yn[Rn];Co<yn[Rn+1];++Co)Bn[Co]=Co-yn[Rn]<<5|Rn;return{b:yn,r:Bn}},vl=pl(dl,2),ml=vl.b,Np=vl.r;ml[28]=258,Np[258]=28;var qp=pl(hl,0),Up=qp.b,F0=new _n(32768);for(var Ke$1=0;Ke$1<32768;++Ke$1){var sn=(Ke$1&43690)>>1|(Ke$1&21845)<<1;sn=(sn&52428)>>2|(sn&13107)<<2,sn=(sn&61680)>>4|(sn&3855)<<4,F0[Ke$1]=((sn&65280)>>8|(sn&255)<<8)>>1}var mi=function(cr,vn,yn){for(var Rn=cr.length,Bn=0,Co=new _n(vn);Bn<Rn;++Bn)cr[Bn]&&++Co[cr[Bn]-1];var Po=new _n(vn);for(Bn=1;Bn<vn;++Bn)Po[Bn]=Po[Bn-1]+Co[Bn-1]<<1;var To;if(yn){To=new _n(1<<vn);var Io=15-vn;for(Bn=0;Bn<Rn;++Bn)if(cr[Bn])for(var $l=Bn<<4|cr[Bn],Wl=vn-cr[Bn],Xl=Po[cr[Bn]-1]++<<Wl,Yl=Xl|(1<<Wl)-1;Xl<=Yl;++Xl)To[F0[Xl]>>Io]=$l}else for(To=new _n(Rn),Bn=0;Bn<Rn;++Bn)cr[Bn]&&(To[Bn]=F0[Po[cr[Bn]-1]++]>>15-cr[Bn]);return To},Li=new jt$3(288);for(var Ke$1=0;Ke$1<144;++Ke$1)Li[Ke$1]=8;for(var Ke$1=144;Ke$1<256;++Ke$1)Li[Ke$1]=9;for(var Ke$1=256;Ke$1<280;++Ke$1)Li[Ke$1]=7;for(var Ke$1=280;Ke$1<288;++Ke$1)Li[Ke$1]=8;var Al=new jt$3(32);for(var Ke$1=0;Ke$1<32;++Ke$1)Al[Ke$1]=5;var Qp=mi(Li,9,1),Hp=mi(Al,5,1),$a=function(cr){for(var vn=cr[0],yn=1;yn<cr.length;++yn)cr[yn]>vn&&(vn=cr[yn]);return vn},pr$1=function(cr,vn,yn){var Rn=vn/8|0;return(cr[Rn]|cr[Rn+1]<<8)>>(vn&7)&yn},e0=function(cr,vn){var yn=vn/8|0;return(cr[yn]|cr[yn+1]<<8|cr[yn+2]<<16)>>(vn&7)},Gp=function(cr){return(cr+7)/8|0},lo=function(cr,vn,yn){return(vn==null||vn<0)&&(vn=0),(yn==null||yn>cr.length)&&(yn=cr.length),new jt$3(cr.subarray(vn,yn))},_p=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Nt$1=function(cr,vn,yn){var Rn=new Error(vn||_p[cr]);if(Rn.code=cr,Error.captureStackTrace&&Error.captureStackTrace(Rn,Nt$1),!yn)throw Rn;return Rn},gl=function(cr,vn,yn,Rn){var Bn=cr.length,Co=Rn?Rn.length:0;if(!Bn||vn.f&&!vn.l)return yn||new jt$3(0);var Po=!yn,To=Po||vn.i!=2,Io=vn.i;Po&&(yn=new jt$3(Bn*3));var $l=function(Iy){var zy=yn.length;if(Iy>zy){var Uy=new jt$3(Math.max(zy*2,Iy));Uy.set(yn),yn=Uy}},Wl=vn.f||0,Xl=vn.p||0,Yl=vn.b||0,Zl=vn.l,ey=vn.d,Rm=vn.m,ry=vn.n,_g=Bn*8;do{if(!Zl){Wl=pr$1(cr,Xl,1);var ty=pr$1(cr,Xl+1,3);if(Xl+=3,ty)if(ty==1)Zl=Qp,ey=Hp,Rm=9,ry=5;else if(ty==2){var ny=pr$1(cr,Xl,31)+257,iy=pr$1(cr,Xl+10,15)+4,oy=ny+pr$1(cr,Xl+5,31)+1;Xl+=14;for(var ay=new jt$3(oy),uy=new jt$3(19),hy=0;hy<iy;++hy)uy[Dp[hy]]=pr$1(cr,Xl+hy*3,7);Xl+=iy*3;for(var my=$a(uy),ly=(1<<my)-1,sy=mi(uy,my,1),hy=0;hy<oy;){var cy=sy[pr$1(cr,Xl,ly)];Xl+=cy&15;var fy=cy>>4;if(fy<16)ay[hy++]=fy;else{var vy=0,dy=0;for(fy==16?(dy=3+pr$1(cr,Xl,3),Xl+=2,vy=ay[hy-1]):fy==17?(dy=3+pr$1(cr,Xl,7),Xl+=3):fy==18&&(dy=11+pr$1(cr,Xl,127),Xl+=7);dy--;)ay[hy++]=vy}}var Ay=ay.subarray(0,ny),gy=ay.subarray(ny);Rm=$a(Ay),ry=$a(gy),Zl=mi(Ay,Rm,1),ey=mi(gy,ry,1)}else Nt$1(1);else{var fy=Gp(Xl)+4,wy=cr[fy-4]|cr[fy-3]<<8,Cy=fy+wy;if(Cy>Bn){Io&&Nt$1(0);break}To&&$l(Yl+wy),yn.set(cr.subarray(fy,Cy),Yl),vn.b=Yl+=wy,vn.p=Xl=Cy*8,vn.f=Wl;continue}if(Xl>_g){Io&&Nt$1(0);break}}To&&$l(Yl+131072);for(var My=(1<<Rm)-1,Py=(1<<ry)-1,Dy=Xl;;Dy=Xl){var vy=Zl[e0(cr,Xl)&My],qy=vy>>4;if(Xl+=vy&15,Xl>_g){Io&&Nt$1(0);break}if(vy||Nt$1(2),qy<256)yn[Yl++]=qy;else if(qy==256){Dy=Xl,Zl=null;break}else{var Xy=qy-254;if(qy>264){var hy=qy-257,$y=dl[hy];Xy=pr$1(cr,Xl,(1<<$y)-1)+ml[hy],Xl+=$y}var xy=ey[e0(cr,Xl)&Py],Ry=xy>>4;xy||Nt$1(3),Xl+=xy&15;var gy=Up[Ry];if(Ry>3){var $y=hl[Ry];gy+=e0(cr,Xl)&(1<<$y)-1,Xl+=$y}if(Xl>_g){Io&&Nt$1(0);break}To&&$l(Yl+131072);var Ly=Yl+Xy;if(Yl<gy){var ky=Co-gy,Ey=Math.min(gy,Ly);for(ky+Yl<0&&Nt$1(3);Yl<Ey;++Yl)yn[Yl]=Rn[ky+Yl]}for(;Yl<Ly;++Yl)yn[Yl]=yn[Yl-gy]}}vn.l=Zl,vn.p=Dy,vn.b=Yl,vn.f=Wl,Zl&&(Wl=1,vn.m=Rm,vn.d=ey,vn.n=ry)}while(!Wl);return Yl!=yn.length&&Po?lo(yn,0,Yl):yn.subarray(0,Yl)},Jp=new jt$3(0),Lr$1=function(cr,vn){return cr[vn]|cr[vn+1]<<8},wr$2=function(cr,vn){return(cr[vn]|cr[vn+1]<<8|cr[vn+2]<<16|cr[vn+3]<<24)>>>0},t0=function(cr,vn){return wr$2(cr,vn)+wr$2(cr,vn+4)*4294967296},Kp=function(cr,vn){return((cr[0]&15)!=8||cr[0]>>4>7||(cr[0]<<8|cr[1])%31)&&Nt$1(6,"invalid zlib data"),(cr[1]>>5&1)==+!vn&&Nt$1(6,"invalid zlib data: "+(cr[1]&32?"need":"unexpected")+" dictionary"),(cr[1]>>3&4)+2};function jp(cr,vn){return gl(cr,{i:2},vn&&vn.out,vn&&vn.dictionary)}function Xp(cr,vn){return gl(cr.subarray(Kp(cr,vn),-4),{i:2},vn,vn)}var L0=typeof TextDecoder!="undefined"&&new TextDecoder,Wp=0;try{L0.decode(Jp,{stream:!0}),Wp=1}catch(cr){}var Zp=function(cr){for(var vn="",yn=0;;){var Rn=cr[yn++],Bn=(Rn>127)+(Rn>223)+(Rn>239);if(yn+Bn>cr.length)return{s:vn,r:lo(cr,yn-1)};Bn?Bn==3?(Rn=((Rn&15)<<18|(cr[yn++]&63)<<12|(cr[yn++]&63)<<6|cr[yn++]&63)-65536,vn+=String.fromCharCode(55296|Rn>>10,56320|Rn&1023)):Bn&1?vn+=String.fromCharCode((Rn&31)<<6|cr[yn++]&63):vn+=String.fromCharCode((Rn&15)<<12|(cr[yn++]&63)<<6|cr[yn++]&63):vn+=String.fromCharCode(Rn)}};function Yp(cr,vn){if(vn){for(var yn="",Rn=0;Rn<cr.length;Rn+=16384)yn+=String.fromCharCode.apply(null,cr.subarray(Rn,Rn+16384));return yn}else{if(L0)return L0.decode(cr);var Bn=Zp(cr),Co=Bn.s,yn=Bn.r;return yn.length&&Nt$1(8),Co}}var $p=function(cr,vn){return vn+30+Lr$1(cr,vn+26)+Lr$1(cr,vn+28)},ev=function(cr,vn,yn){var Rn=Lr$1(cr,vn+28),Bn=Yp(cr.subarray(vn+46,vn+46+Rn),!(Lr$1(cr,vn+8)&2048)),Co=vn+46+Rn,Po=wr$2(cr,vn+20),To=yn&&Po==4294967295?tv(cr,Co):[Po,wr$2(cr,vn+24),wr$2(cr,vn+42)],Io=To[0],$l=To[1],Wl=To[2];return[Lr$1(cr,vn+10),Io,$l,Bn,Co+Lr$1(cr,vn+30)+Lr$1(cr,vn+32),Wl]},tv=function(cr,vn){for(;Lr$1(cr,vn)!=1;vn+=4+Lr$1(cr,vn+2));return[t0(cr,vn+12),t0(cr,vn+4),t0(cr,vn+20)]};function rv(cr,vn){for(var yn={},Rn=cr.length-22;wr$2(cr,Rn)!=101010256;--Rn)(!Rn||cr.length-Rn>65558)&&Nt$1(13);var Bn=Lr$1(cr,Rn+8);if(!Bn)return{};var Co=wr$2(cr,Rn+16),Po=Co==4294967295||Bn==65535;if(Po){var To=wr$2(cr,Rn-12);Po=wr$2(cr,To)==101075792,Po&&(Bn=wr$2(cr,To+32),Co=wr$2(cr,To+48))}for(var Io=0;Io<Bn;++Io){var $l=ev(cr,Co,Po),Wl=$l[0],Xl=$l[1],Yl=$l[2],Zl=$l[3],ey=$l[4],Rm=$l[5],ry=$p(cr,Rm);Co=ey,Wl?Wl==8?yn[Zl]=jp(cr.subarray(ry,ry+Xl),{out:new jt$3(Yl)}):Nt$1(14,"unknown compression type "+Wl):yn[Zl]=lo(cr,ry,ry+Xl)}return yn}var nv=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);function iv(cr,vn){var yn;vn===void 0&&(vn={});var Rn=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),Bn=0;return Promise.resolve().then(function(){return Rn.ajax(cr,{responseType:"arraybuffer"}).then(function(Co){return Bn=Co.body.byteLength,Co.body})}).then(function(Co){var Po;return av(Co,{light:vn.light,resourcePath:cr.slice(0,cr.lastIndexOf("/")+1),search:(Po=cr.split("?")[1])!==null&&Po!==void 0?Po:"",fetcher:Rn})}).then(function(Co){var Po=Co.scene,To=Co.unitScale/100,Io=new Matrix4;return Io.makeScale(To,To,To),Co.upAxis==="Y"&&Io.premultiply(nv),Po.applyMatrix4(Io),{type:"fbx",upAxis:"Z",uri:cr,byteLength:Bn,memoryUsage:Wt$2(Po),scene:Po,textures:Co.textures,dispose:function(){return Co.dispose()}}})}function av(cr,vn){var yn;if(fv(cr))yn=new cv().parse(cr);else{var Rn=bl(cr);if(!dv(Rn))throw new Error("THREE.FBXLoader: Unknown format.");if(ms(Rn)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ms(Rn));yn=new lv().parse(Rn)}return new ov(vn).parse(yn)}var ov=function(){function cr(vn){var yn,Rn,Bn;this.light=(yn=vn.light)!==null&&yn!==void 0?yn:!0,this.resourcePath=(Rn=vn.resourcePath)!==null&&Rn!==void 0?Rn:"",this.search=(Bn=vn.search)!==null&&Bn!==void 0?Bn:"",this.fetcher=vn.fetcher}return cr.prototype.parse=function(vn){var yn,Rn,Bn,Co,Po,To,Io=this.parseConnections(vn),$l=new Group$1,Wl=[],Xl=this.parseImages(vn),Yl=this.parseTextures(vn,Xl,Io,Wl),Zl=this.parseMaterials(vn,Yl,Io),ey=this.parseDeformers(vn,Io),Rm=new sv().parse(vn,ey,Io);this.parseScene(vn,ey,Rm,Zl,Io,$l);var ry=(Rn=(yn=vn.GlobalSettings.UpAxis)===null||yn===void 0?void 0:yn.value)!==null&&Rn!==void 0?Rn:1,_g=(Co=(Bn=vn.GlobalSettings.FrontAxis)===null||Bn===void 0?void 0:Bn.value)!==null&&Co!==void 0?Co:2,ty=(To=(Po=vn.GlobalSettings.UnitScaleFactor)===null||Po===void 0?void 0:Po.value)!==null&&To!==void 0?To:1,ny;if(vn.GlobalSettings.AmbientColor){var iy=vn.GlobalSettings.AmbientColor.value,oy=iy[0],ay=iy[1],uy=iy[2];if(oy!==0||ay!==0||uy!==0){var hy=new Color().setRGB(oy,ay,uy);ny=new AmbientLight(hy,1)}}return Promise.all(Wl).then(function(my){return{scene:$l,textures:my,ambientLight:ny,upAxis:["X","Y","Z"][ry],frontAxis:["X","Y","Z"][_g],unitScale:ty,dispose:function(){my.forEach(function(ly){return ly.dispose()}),Zl.forEach(function(ly){return ly.dispose()}),Rm.forEach(function(ly){return ly.dispose()})}}})},cr.prototype.parseConnections=function(vn){var yn=new Map;if("Connections"in vn){var Rn=vn.Connections.connections;Rn.forEach(function(Bn){var Co=Bn[0],Po=Bn[1],To=Bn[2];yn.has(Co)||yn.set(Co,{parents:[],children:[]});var Io={ID:Po,relationship:To};yn.get(Co).parents.push(Io),yn.has(Po)||yn.set(Po,{parents:[],children:[]});var $l={ID:Co,relationship:To};yn.get(Po).children.push($l)})}return yn},cr.prototype.parseImages=function(vn){var yn={},Rn={};if("Video"in vn.Objects){var Bn=vn.Objects.Video;for(var Co in Bn){var Po=Bn[Co],To=parseInt(Co);if(yn[To]=Po.RelativeFilename||Po.Filename,"Content"in Po){var Io=Po.Content instanceof ArrayBuffer&&Po.Content.byteLength>0,$l=typeof Po.Content=="string"&&Po.Content!=="";if(Io||$l){var Wl=this.parseImage(Bn[Co]);Rn[Po.RelativeFilename||Po.Filename]=Wl}}}}for(var To in yn){var Xl=yn[To];Rn[Xl]!==void 0?yn[To]=Rn[Xl]:yn[To]=yn[To].split("\\").pop()}return yn},cr.prototype.parseImage=function(vn){var yn=vn.Content,Rn=vn.RelativeFilename||vn.Filename,Bn=Rn.slice(Rn.lastIndexOf(".")+1).toLowerCase(),Co;switch(Bn){case"bmp":Co="image/bmp";break;case"jpg":case"jpeg":Co="image/jpeg";break;case"png":Co="image/png";break;case"tif":Co="image/tiff";break;case"tga":Co="image/tga";break;default:return}if(typeof yn=="string")return"data:"+Co+";base64,"+yn;var Po=new Uint8Array(yn);return window.URL.createObjectURL(new Blob([Po],{type:Co}))},cr.prototype.parseTextures=function(vn,yn,Rn,Bn){var Co=new Map;if("Texture"in vn.Objects){var Po=vn.Objects.Texture;for(var To in Po){var Io=this.parseTexture(Po[To],yn,Rn,Bn);Co.set(parseInt(To),Io)}}return Co},cr.prototype.parseTexture=function(vn,yn,Rn,Bn){var Co=this.loadTexture(vn,yn,Rn,Bn);Co.ID=vn.id,Co.name=vn.attrName;var Po=vn.WrapModeU,To=vn.WrapModeV,Io=Po!==void 0?Po.value:0,$l=To!==void 0?To.value:0;if(Co.wrapS=Io===0?RepeatWrapping:ClampToEdgeWrapping,Co.wrapT=$l===0?RepeatWrapping:ClampToEdgeWrapping,vn.Scaling){var Wl=vn.Scaling.value;Co.repeat.x=Wl[0],Co.repeat.y=Wl[1]}if(vn.Translation){var Wl=vn.Translation.value;Co.offset.x=Wl[0],Co.offset.y=Wl[1]}return Co},cr.prototype.loadTexture=function(vn,yn,Rn,Bn){var Co=Rn.get(vn.id).children,Po="";Co!==void 0&&Co.length>0&&yn[Co[0].ID]!==void 0&&(Po=yn[Co[0].ID]),Po=ct$4(this.resourcePath,Sa(Po,this.search));var To=Object.assign(new Texture,{ID:0}),Io;Io=this.fetcher.loadImage(Po,{},void 0,void 0,void 0,bi()).then(function(Wl){return Wl.body});var $l=Io.then(function(Wl){return To.image=Wl,To.needsUpdate=!0,To});return Bn.push($l),To},cr.prototype.parseMaterials=function(vn,yn,Rn){var Bn=new Map;if("Material"in vn.Objects){var Co=vn.Objects.Material;for(var Po in Co){var To=this.parseMaterial(vn,Co[Po],yn,Rn);To!==null&&Bn.set(parseInt(Po),To)}}return Bn},cr.prototype.parseMaterial=function(vn,yn,Rn,Bn){var Co=yn.id;yn.attrName;var Po=yn.ShadingModel;if(typeof Po=="object"&&(Po=Po.value),Po=Po.toLowerCase(),!Bn.has(Co))return null;var To=new Mr$1(this.light?"phong":"basic");yn.BumpFactor&&(To.bumpScale=yn.BumpFactor.value),yn.Diffuse?To.color=new Color().fromArray(yn.Diffuse.value):yn.DiffuseColor&&(yn.DiffuseColor.type==="Color"||yn.DiffuseColor.type==="ColorRGB")&&(To.color=new Color().fromArray(yn.DiffuseColor.value)),yn.DisplacementFactor&&(To.displacementScale=yn.DisplacementFactor.value),yn.Emissive?To.emissive=new Color().fromArray(yn.Emissive.value):yn.EmissiveColor&&(yn.EmissiveColor.type==="Color"||yn.EmissiveColor.type==="ColorRGB")&&(To.emissive=new Color().fromArray(yn.EmissiveColor.value)),yn.EmissiveFactor&&(To.emissiveIntensity=parseFloat(yn.EmissiveFactor.value));var Io=1-(yn.TransparencyFactor?parseFloat(yn.TransparencyFactor.value):0);(Io===1||Io===0)&&(Io=yn.Opacity?parseFloat(yn.Opacity.value):null,Io===null&&(Io=1-(yn.TransparentColor?parseFloat(yn.TransparentColor.value[0]):0))),To.opacity=Io,To.opacity<1&&(To.transparent=!0),yn.ReflectionFactor&&(To.reflectivity=yn.ReflectionFactor.value),yn.Shininess&&(To.shininess=yn.Shininess.value),yn.Specular?To.specular=new Color().fromArray(yn.Specular.value):yn.SpecularColor&&yn.SpecularColor.type==="Color"&&(To.specular=new Color().fromArray(yn.SpecularColor.value));var $l=this;return Bn.get(Co).children.forEach(function(Wl){var Xl=Wl.relationship;switch(Xl){case"Bump":To.bumpMap=$l.getTexture(vn,Rn,Wl.ID,Bn);break;case"Maya|TEX_ao_map":To.aoMap=$l.getTexture(vn,Rn,Wl.ID,Bn);break;case"DiffuseColor":case"Maya|TEX_color_map":To.map=$l.getTexture(vn,Rn,Wl.ID,Bn),To.map!==void 0&&(To.map.encoding=sRGBEncoding);break;case"DisplacementColor":To.displacementMap=$l.getTexture(vn,Rn,Wl.ID,Bn);break;case"EmissiveColor":To.emissiveMap=$l.getTexture(vn,Rn,Wl.ID,Bn),To.emissiveMap!==void 0&&(To.emissiveMap.encoding=sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":To.normalMap=$l.getTexture(vn,Rn,Wl.ID,Bn);break;case"ReflectionColor":To.envMap=$l.getTexture(vn,Rn,Wl.ID,Bn),To.envMap!==void 0&&(To.envMap.mapping=EquirectangularReflectionMapping,To.envMap.encoding=sRGBEncoding);break;case"SpecularColor":To.specularMap=$l.getTexture(vn,Rn,Wl.ID,Bn),To.specularMap!==void 0&&(To.specularMap.encoding=sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":To.alphaMap=$l.getTexture(vn,Rn,Wl.ID,Bn),To.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",Xl);break}}),To.refreshUniforms(),To},cr.prototype.getTexture=function(vn,yn,Rn,Bn){return vn.Objects.LayeredTexture&&Rn in vn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),Rn=Bn.get(Rn).children[0].ID),yn.get(Rn)},cr.prototype.parseDeformers=function(vn,yn){var Rn={},Bn={};if("Deformer"in vn.Objects){var Co=vn.Objects.Deformer;for(var Po in Co){var To=Co[Po],Io=yn.get(parseInt(Po));if(To.attrType==="Skin"){var $l=this.parseSkeleton(Io,Co);$l.ID=Po,Io.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),$l.geometryID=Io.parents[0].ID,Rn[Po]=$l}else if(To.attrType==="BlendShape"){var Wl={id:Po};Wl.rawTargets=this.parseMorphTargets(Io,Co,yn),Wl.id=Po,Io.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),Bn[Po]=Wl}}}return{skeletons:Rn,morphTargets:Bn}},cr.prototype.parseSkeleton=function(vn,yn){var Rn=[];return vn.children.forEach(function(Bn){var Co=yn[Bn.ID];if(Co.attrType==="Cluster"){var Po={ID:Bn.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(Co.TransformLink.a)};Co.Indexes&&(Po.indices=Co.Indexes.a,Po.weights=Co.Weights.a),Rn.push(Po)}}),{ID:"",geometryID:0,rawBones:Rn,bones:[]}},cr.prototype.parseMorphTargets=function(vn,yn,Rn){for(var Bn=[],Co=0;Co<vn.children.length;Co++){var Po=vn.children[Co],To=yn[Po.ID],Io={name:To.attrName,initialWeight:To.DeformPercent,id:To.id,fullWeights:To.FullWeights.a,geoID:0};if(To.attrType!=="BlendShapeChannel")return;Io.geoID=Rn.get(parseInt(Po.ID)).children.filter(function($l){return $l.relationship===void 0})[0].ID,Bn.push(Io)}return Bn},cr.prototype.parseScene=function(vn,yn,Rn,Bn,Co,Po){var To=this.parseModels(vn,yn.skeletons,Rn,Bn,Co),Io=vn.Objects.Model,$l=this;To.forEach(function(Xl){var Yl=Io[Xl.ID];$l.setLookAtProperties(vn,Xl,Yl,Co,Po);var Zl=Co.get(Xl.ID).parents;Zl.forEach(function(ey){var Rm=To.get(ey.ID);Rm!==void 0&&Rm.add(Xl)}),Xl.parent===null&&Po.add(Xl)}),this.bindSkeleton(vn,yn.skeletons,Rn,To,Co),Po.traverse(function(Xl){if(Xl.userData.transformData){Xl.parent&&(Xl.userData.transformData.parentMatrix=Xl.parent.matrix,Xl.userData.transformData.parentMatrixWorld=Xl.parent.matrixWorld);var Yl=yl(Xl.userData.transformData);Xl.applyMatrix4(Yl),Xl.updateWorldMatrix(!0,!0)}});var Wl=new uv().parse(vn,Co,Po);Po.children.length===1&&Po.children[0]instanceof Group$1&&(Po.children[0].animations=Wl,Po=Po.children[0]),Po.animations=Wl},cr.prototype.parseModels=function(vn,yn,Rn,Bn,Co){var Po=new Map,To=vn.Objects.Model;for(var Io in To){var $l=parseInt(Io),Wl=To[Io],Xl=Co.get($l),Yl=this.buildSkeleton(Xl,yn,$l,Wl.attrName);if(!Yl){switch(Wl.attrType){case"Camera":Yl=this.createCamera(vn,Xl);break;case"Light":Yl=this.createLight(vn,Xl);break;case"Mesh":Yl=this.createMesh(Xl,Rn,Bn);break;case"NurbsCurve":case"LimbNode":case"Root":Yl=new Bone;break;case"Null":default:Yl=new Group$1;break}Yl.name=Wl.attrName?PropertyBinding.sanitizeNodeName(Wl.attrName):"",Yl.userData.originalName=Wl.attrName,Yl.ID=$l}this.getTransformData(Yl,Wl),Po.set($l,Yl)}return Po},cr.prototype.buildSkeleton=function(vn,yn,Rn,Bn){var Co=null;return vn.parents.forEach(function(Po){var To=function($l){var Wl=yn[$l];Wl.rawBones.forEach(function(Xl,Yl){if(Xl.ID===Po.ID){var Zl=Co;Co=new Bone,Co.matrixWorld.copy(Xl.transformLink),Co.name=Bn?PropertyBinding.sanitizeNodeName(Bn):"",Co.userData.originalName=Bn,Co.ID=Rn,Wl.bones[Yl]=Co,Zl!==null&&Co.add(Zl)}})};for(var Io in yn)To(Io)}),Co},cr.prototype.createCamera=function(vn,yn){var Rn,Bn;if(yn.children.forEach(function(Zl){var ey=vn.Objects.NodeAttribute[Zl.ID];ey!==void 0&&(Bn=ey)}),Bn===void 0)Rn=new Object3D;else{var Co=0;Bn.CameraProjectionType!==void 0&&Bn.CameraProjectionType.value===1&&(Co=1);var Po=1;Bn.NearPlane!==void 0&&(Po=Bn.NearPlane.value/1e3);var To=1e3;Bn.FarPlane!==void 0&&(To=Bn.FarPlane.value/1e3);var Io=window.innerWidth,$l=window.innerHeight;Bn.AspectWidth!==void 0&&Bn.AspectHeight!==void 0&&(Io=Bn.AspectWidth.value,$l=Bn.AspectHeight.value);var Wl=Io/$l,Xl=45;Bn.FieldOfView!==void 0&&(Xl=Bn.FieldOfView.value);var Yl=Bn.FocalLength?Bn.FocalLength.value:null;switch(Co){case 0:Rn=new PerspectiveCamera(Xl,Wl,Po,To),Yl!==null&&Rn.setFocalLength(Yl);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),Rn=new Object3D;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+Co+"."),Rn=new Object3D;break}}return Rn},cr.prototype.createLight=function(vn,yn){var Rn,Bn;if(yn.children.forEach(function(Yl){var Zl=vn.Objects.NodeAttribute[Yl.ID];Zl!==void 0&&(Bn=Zl)}),Bn===void 0)Rn=new Object3D;else{var Co=void 0;Bn.LightType===void 0?Co=0:Co=Bn.LightType.value;var Po=new Color(16777215);Bn.Color!==void 0&&(Po=new Color().fromArray(Bn.Color.value));var To=Bn.Intensity===void 0?1:Bn.Intensity.value/100;Bn.CastLightOnObject!==void 0&&Bn.CastLightOnObject.value===0&&(To=0);var Io=0;Bn.FarAttenuationEnd!==void 0&&(Bn.EnableFarAttenuation!==void 0&&Bn.EnableFarAttenuation.value===0?Io=0:Io=Bn.FarAttenuationEnd.value);var $l=1;switch(Co){case 0:Rn=new PointLight(Po,To,Io,$l);break;case 1:Rn=new DirectionalLight(Po,To);break;case 2:var Wl=Math.PI/3;Bn.InnerAngle!==void 0&&(Wl=MathUtils.degToRad(Bn.InnerAngle.value));var Xl=0;Bn.OuterAngle!==void 0&&(Xl=MathUtils.degToRad(Bn.OuterAngle.value),Xl=Math.max(Xl,1)),Rn=new SpotLight(Po,To,Io,Wl,Xl,$l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Bn.LightType.value+", defaulting to a PointLight."),Rn=new PointLight(Po,To);break}Bn.CastShadows!==void 0&&Bn.CastShadows.value===1&&(Rn.castShadow=!0)}return Rn},cr.prototype.createMesh=function(vn,yn,Rn){var Bn,Co=null,Po=[];if(vn.children.forEach(function(Io){yn.has(Io.ID)&&(Co=yn.get(Io.ID)),Rn.has(Io.ID)&&Po.push(Rn.get(Io.ID))}),Po.length===0){var To=new Mr$1(this.light?"phong":"basic");To.color=new Color(13421772),Po.push(To)}return"color"in Co.attributes&&Po.forEach(function(Io){Io.vertexColors=!0}),(!Co.groups||Co.groups.length===0)&&Co.addGroup(0,Co.index?Co.index.count:Co.attributes.position.count,0),Co.FBX_Deformer?(Bn=new Jr$2(Co,Po),Bn.normalizeSkinWeights()):Bn=new Ht$2(Co,Po),Bn},cr.prototype.createCurve=function(vn,yn){var Rn=vn.children.reduce(function(Co,Po){return yn.has(Po.ID)&&(Co=yn.get(Po.ID)),Co},null),Bn=new LineBasicMaterial({name:"",color:3342591,linewidth:1});return new Line(Rn,Bn)},cr.prototype.getTransformData=function(vn,yn){var Rn={};yn.InheritType&&(Rn.inheritType=parseInt(yn.InheritType.value)),yn.RotationOrder?Rn.eulerOrder=xi(yn.RotationOrder.value):Rn.eulerOrder=xi(0),yn.Lcl_Translation&&(Rn.translation=yn.Lcl_Translation.value),yn.PreRotation&&(Rn.preRotation=yn.PreRotation.value),yn.Lcl_Rotation&&(Rn.rotation=yn.Lcl_Rotation.value),yn.PostRotation&&(Rn.postRotation=yn.PostRotation.value),yn.Lcl_Scaling&&(Rn.scale=yn.Lcl_Scaling.value),yn.ScalingOffset&&(Rn.scalingOffset=yn.ScalingOffset.value),yn.ScalingPivot&&(Rn.scalingPivot=yn.ScalingPivot.value),yn.RotationOffset&&(Rn.rotationOffset=yn.RotationOffset.value),yn.RotationPivot&&(Rn.rotationPivot=yn.RotationPivot.value),vn.userData.transformData=Rn},cr.prototype.setLookAtProperties=function(vn,yn,Rn,Bn,Co){if("LookAtProperty"in Rn){var Po=Bn.get(yn.ID).children;Po.forEach(function(To){if(To.relationship==="LookAtProperty"){var Io=vn.Objects.Model[To.ID];if(Io.Lcl_Translation){var $l=Io.Lcl_Translation.value;"target"in yn&&yn.target instanceof Object3D?(yn.target.position.fromArray($l),Co.add(yn.target)):yn.lookAt(new Vector3().fromArray($l))}}})}},cr.prototype.bindSkeleton=function(vn,yn,Rn,Bn,Co){var Po=this.parsePoseNodes(vn),To=function($l){var Wl=yn[$l],Xl=Co.get(parseInt(Wl.ID)).parents;Xl.forEach(function(Yl){if(Rn.has(Yl.ID)){var Zl=Yl.ID,ey=Co.get(Zl);ey.parents.forEach(function(Rm){if(Bn.has(Rm.ID)){var ry=Bn.get(Rm.ID);ry instanceof SkinnedMesh&&ry.bind(new Skeleton(Wl.bones),Po[Rm.ID])}})}})};for(var Io in yn)To(Io)},cr.prototype.parsePoseNodes=function(vn){var yn={};if(vn.Objects.Pose){var Rn=vn.Objects.Pose;for(var Bn in Rn)if(Rn[Bn].attrType==="BindPose"&&Rn[Bn].NbPoseNodes>0){var Co=Rn[Bn].PoseNode;Array.isArray(Co)?Co.forEach(function(Po){yn[Po.Node]=new Matrix4().fromArray(Po.Matrix.a)}):yn[Co.Node]=new Matrix4().fromArray(Co.Matrix.a)}}return yn},cr}(),sv=function(){function cr(){this.negativeMaterialIndices=!1}return cr.prototype.parse=function(vn,yn,Rn){var Bn=new Map;if("Geometry"in vn.Objects){var Co=vn.Objects.Geometry;for(var Po in Co){var To=Rn.get(parseInt(Po)),Io=this.parseGeometry(vn,To,Co[Po],yn);Bn.set(parseInt(Po),Io)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),Bn},cr.prototype.parseGeometry=function(vn,yn,Rn,Bn){switch(Rn.attrType){case"Mesh":return this.parseMeshGeometry(vn,yn,Rn,Bn);case"NurbsCurve":return this.parseNurbsGeometry(Rn)}},cr.prototype.parseMeshGeometry=function(vn,yn,Rn,Bn){var Co=Bn.skeletons,Po=[],To=yn.parents.map(function(Yl){return vn.Objects.Model[Yl.ID]});if(To.length!==0){var Io=yn.children.reduce(function(Yl,Zl){return Co[Zl.ID]!==void 0&&(Yl=Co[Zl.ID]),Yl},null);yn.children.forEach(function(Yl){Bn.morphTargets[Yl.ID]!==void 0&&Po.push(Bn.morphTargets[Yl.ID])});var $l=To[0],Wl={};$l.RotationOrder&&(Wl.eulerOrder=xi($l.RotationOrder.value)),$l.InheritType&&(Wl.inheritType=parseInt($l.InheritType.value)),$l.GeometricTranslation&&(Wl.translation=$l.GeometricTranslation.value),$l.GeometricRotation&&(Wl.rotation=$l.GeometricRotation.value),$l.GeometricScaling&&(Wl.scale=$l.GeometricScaling.value);var Xl=yl(Wl);return this.genGeometry(vn,Rn,Io,Po,Xl)}},cr.prototype.genGeometry=function(vn,yn,Rn,Bn,Co){var Po=new BufferGeometry;yn.attrName&&(Po.name=yn.attrName);var To=this.parseGeoNode(yn,Rn),Io=this.genBuffers(To),$l=new Float32BufferAttribute(Io.vertex,3);if($l.applyMatrix4(Co),Po.setAttribute("position",$l),Io.colors.length>0&&Po.setAttribute("color",new Float32BufferAttribute(Io.colors,3)),Rn&&(Po.setAttribute("skinIndex",new Uint16BufferAttribute(Io.weightsIndices,4)),Po.setAttribute("skinWeight",new Float32BufferAttribute(Io.vertexWeights,4)),Po.FBX_Deformer=Rn),Io.normal.length>0){var Wl=new Matrix3().getNormalMatrix(Co),Xl=new Float32BufferAttribute(Io.normal,3);Xl.applyNormalMatrix(Wl),Po.setAttribute("normal",Xl)}if(Io.uvs.forEach(function(ry,_g){var ty=_g===0?"uv":"uv".concat(_g+1);Po.setAttribute(ty,new Float32BufferAttribute(Io.uvs[_g],2))}),To.material&&To.material.mappingType!=="AllSame"){var Yl=Io.materialIndex[0],Zl=0;if(Io.materialIndex.forEach(function(ry,_g){ry!==Yl&&(Po.addGroup(Zl,_g-Zl,Yl),Yl=ry,Zl=_g)}),Po.groups.length>0){var ey=Po.groups[Po.groups.length-1],Rm=ey.start+ey.count;Rm!==Io.materialIndex.length&&Po.addGroup(Rm,Io.materialIndex.length-Rm,Yl)}Po.groups.length===0&&Po.addGroup(0,Io.materialIndex.length,Io.materialIndex[0])}return this.addMorphTargets(vn,Po,yn,Bn,Co),Po},cr.prototype.parseGeoNode=function(vn,yn){var Rn={};if(Rn.vertexPositions=vn.Vertices!==void 0?vn.Vertices.a:[],Rn.vertexIndices=vn.PolygonVertexIndex!==void 0?vn.PolygonVertexIndex.a:[],vn.LayerElementColor&&(Rn.color=this.parseVertexColors(vn.LayerElementColor[0])),vn.LayerElementMaterial&&(Rn.material=this.parseMaterialIndices(vn.LayerElementMaterial[0])),vn.LayerElementNormal&&(Rn.normal=this.parseNormals(vn.LayerElementNormal[0])),vn.LayerElementUV){Rn.uv=[];for(var Bn=0;vn.LayerElementUV[Bn];)vn.LayerElementUV[Bn].UV&&Rn.uv.push(this.parseUVs(vn.LayerElementUV[Bn])),Bn++}return Rn.weightTable={},yn!==null&&(Rn.skeleton=yn,yn.rawBones.forEach(function(Co,Po){Co.indices.forEach(function(To,Io){Rn.weightTable[To]===void 0&&(Rn.weightTable[To]=[]),Rn.weightTable[To].push({id:Po,weight:Co.weights[Io]})})})),Rn},cr.prototype.genBuffers=function(vn){var yn={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Rn=0,Bn=0,Co=!1,Po=[],To=[],Io=[],$l=[],Wl=[],Xl=[],Yl=this;return vn.vertexIndices.forEach(function(Zl,ey){var Rm=0,ry=!1;Zl<0&&(Zl=Zl^-1,ry=!0);var _g=[],ty=[];if(Po.push(Zl*3,Zl*3+1,Zl*3+2),vn.color){var ny=Ki(ey,Rn,Zl,vn.color);Io.push(ny[0],ny[1],ny[2])}if(vn.skeleton){if(vn.weightTable[Zl]!==void 0&&vn.weightTable[Zl].forEach(function(uy){ty.push(uy.weight),_g.push(uy.id)}),ty.length>4){Co||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),Co=!0);var iy=[0,0,0,0],oy=[0,0,0,0];ty.forEach(function(uy,hy){var my=uy,ly=_g[hy];oy.forEach(function(sy,cy,fy){if(my>sy){fy[cy]=my,my=sy;var vy=iy[cy];iy[cy]=ly,ly=vy}})}),_g=iy,ty=oy}for(;ty.length<4;)ty.push(0),_g.push(0);for(var ay=0;ay<4;++ay)Wl.push(ty[ay]),Xl.push(_g[ay])}if(vn.normal){var ny=Ki(ey,Rn,Zl,vn.normal);To.push(ny[0],ny[1],ny[2])}vn.material&&vn.material.mappingType!=="AllSame"&&(Rm=Ki(ey,Rn,Zl,vn.material)[0],Rm<0&&(Yl.negativeMaterialIndices=!0,Rm=0)),vn.uv&&vn.uv.forEach(function(uy,hy){var my=Ki(ey,Rn,Zl,uy);$l[hy]===void 0&&($l[hy]=[]),$l[hy].push(my[0]),$l[hy].push(my[1])}),Bn++,ry&&(Yl.genFace(yn,vn,Po,Rm,To,Io,$l,Wl,Xl,Bn),Rn++,Bn=0,Po=[],To=[],Io=[],$l=[],Wl=[],Xl=[])}),yn},cr.prototype.getNormalNewell=function(vn){for(var yn=new Vector3(0,0,0),Rn=0;Rn<vn.length;Rn++){var Bn=vn[Rn],Co=vn[(Rn+1)%vn.length];yn.x+=(Bn.y-Co.y)*(Bn.z+Co.z),yn.y+=(Bn.z-Co.z)*(Bn.x+Co.x),yn.z+=(Bn.x-Co.x)*(Bn.y+Co.y)}return yn.normalize(),yn},cr.prototype.getNormalTangentAndBitangent=function(vn){var yn=this.getNormalNewell(vn),Rn=Math.abs(yn.z)>.5?new Vector3(0,1,0):new Vector3(0,0,1),Bn=Rn.cross(yn).normalize(),Co=yn.clone().cross(Bn).normalize();return{normal:yn,tangent:Bn,bitangent:Co}},cr.prototype.flattenVertex=function(vn,yn,Rn){return new Vector2(vn.dot(yn),vn.dot(Rn))},cr.prototype.genFace=function(vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl){var Xl;if(Wl>3){for(var Yl=[],Zl=yn.baseVertexPositions||yn.vertexPositions,ey=0;ey<Rn.length;ey+=3)Yl.push(new Vector3(Zl[Rn[ey]],Zl[Rn[ey+1]],Zl[Rn[ey+2]]));for(var Rm=this.getNormalTangentAndBitangent(Yl),ry=Rm.tangent,_g=Rm.bitangent,ty=[],ny=0,iy=Yl;ny<iy.length;ny++){var oy=iy[ny];ty.push(this.flattenVertex(oy,ry,_g))}Xl=ShapeUtils.triangulateShape(ty,[])}else Xl=[[0,1,2]];for(var ay=function(fy,vy,dy){vn.vertex.push(yn.vertexPositions[Rn[fy*3]]),vn.vertex.push(yn.vertexPositions[Rn[fy*3+1]]),vn.vertex.push(yn.vertexPositions[Rn[fy*3+2]]),vn.vertex.push(yn.vertexPositions[Rn[vy*3]]),vn.vertex.push(yn.vertexPositions[Rn[vy*3+1]]),vn.vertex.push(yn.vertexPositions[Rn[vy*3+2]]),vn.vertex.push(yn.vertexPositions[Rn[dy*3]]),vn.vertex.push(yn.vertexPositions[Rn[dy*3+1]]),vn.vertex.push(yn.vertexPositions[Rn[dy*3+2]]),yn.skeleton&&(vn.vertexWeights.push(Io[fy*4]),vn.vertexWeights.push(Io[fy*4+1]),vn.vertexWeights.push(Io[fy*4+2]),vn.vertexWeights.push(Io[fy*4+3]),vn.vertexWeights.push(Io[vy*4]),vn.vertexWeights.push(Io[vy*4+1]),vn.vertexWeights.push(Io[vy*4+2]),vn.vertexWeights.push(Io[vy*4+3]),vn.vertexWeights.push(Io[dy*4]),vn.vertexWeights.push(Io[dy*4+1]),vn.vertexWeights.push(Io[dy*4+2]),vn.vertexWeights.push(Io[dy*4+3]),vn.weightsIndices.push($l[fy*4]),vn.weightsIndices.push($l[fy*4+1]),vn.weightsIndices.push($l[fy*4+2]),vn.weightsIndices.push($l[fy*4+3]),vn.weightsIndices.push($l[vy*4]),vn.weightsIndices.push($l[vy*4+1]),vn.weightsIndices.push($l[vy*4+2]),vn.weightsIndices.push($l[vy*4+3]),vn.weightsIndices.push($l[dy*4]),vn.weightsIndices.push($l[dy*4+1]),vn.weightsIndices.push($l[dy*4+2]),vn.weightsIndices.push($l[dy*4+3])),yn.color&&(vn.colors.push(Po[fy*3]),vn.colors.push(Po[fy*3+1]),vn.colors.push(Po[fy*3+2]),vn.colors.push(Po[vy*3]),vn.colors.push(Po[vy*3+1]),vn.colors.push(Po[vy*3+2]),vn.colors.push(Po[dy*3]),vn.colors.push(Po[dy*3+1]),vn.colors.push(Po[dy*3+2])),yn.material&&yn.material.mappingType!=="AllSame"&&(vn.materialIndex.push(Bn),vn.materialIndex.push(Bn),vn.materialIndex.push(Bn)),yn.normal&&(vn.normal.push(Co[fy*3]),vn.normal.push(Co[fy*3+1]),vn.normal.push(Co[fy*3+2]),vn.normal.push(Co[vy*3]),vn.normal.push(Co[vy*3+1]),vn.normal.push(Co[vy*3+2]),vn.normal.push(Co[dy*3]),vn.normal.push(Co[dy*3+1]),vn.normal.push(Co[dy*3+2])),yn.uv&&yn.uv.forEach(function(Ay,gy){vn.uvs[gy]===void 0&&(vn.uvs[gy]=[]),vn.uvs[gy].push(To[gy][fy*2]),vn.uvs[gy].push(To[gy][fy*2+1]),vn.uvs[gy].push(To[gy][vy*2]),vn.uvs[gy].push(To[gy][vy*2+1]),vn.uvs[gy].push(To[gy][dy*2]),vn.uvs[gy].push(To[gy][dy*2+1])})},uy=0,hy=Xl;uy<hy.length;uy++){var my=hy[uy],ly=my[0],sy=my[1],cy=my[2];ay(ly,sy,cy)}},cr.prototype.addMorphTargets=function(vn,yn,Rn,Bn,Co){if(Bn.length!==0){yn.morphTargetsRelative=!0,yn.morphAttributes.position=[];var Po=this;Bn.forEach(function(To){To.rawTargets.forEach(function(Io){var $l=vn.Objects.Geometry[Io.geoID];$l!==void 0&&Po.genMorphGeometry(yn,Rn,$l,Co,Io.name)})})}},cr.prototype.genMorphGeometry=function(vn,yn,Rn,Bn,Co){for(var Po=yn.Vertices!==void 0?yn.Vertices.a:[],To=yn.PolygonVertexIndex!==void 0?yn.PolygonVertexIndex.a:[],Io=Rn.Vertices!==void 0?Rn.Vertices.a:[],$l=Rn.Indexes?Rn.Indexes.a:[],Wl=vn.attributes.position.count*3,Xl=new Float32Array(Wl),Yl=0;Yl<$l.length;Yl++){var Zl=$l[Yl]*3;Xl[Zl]=Io[Yl*3],Xl[Zl+1]=Io[Yl*3+1],Xl[Zl+2]=Io[Yl*3+2]}var ey={vertexIndices:To,vertexPositions:Xl,baseVertexPositions:Po},Rm=this.genBuffers(ey),ry=new Float32BufferAttribute(Rm.vertex,3);ry.name=Co||Rn.attrName,ry.applyMatrix4(Bn),vn.morphAttributes.position.push(ry)},cr.prototype.parseNormals=function(vn){var yn=vn.MappingInformationType,Rn=vn.ReferenceInformationType,Bn=vn.Normals.a,Co=[];return Rn==="IndexToDirect"&&(vn.NormalIndex?Co=vn.NormalIndex.a:vn.NormalsIndex&&(Co=vn.NormalsIndex.a)),{dataSize:3,buffer:Bn,indices:Co,mappingType:yn,referenceType:Rn}},cr.prototype.parseUVs=function(vn){var yn=vn.MappingInformationType,Rn=vn.ReferenceInformationType,Bn=vn.UV.a,Co=[];return Rn==="IndexToDirect"&&(Co=vn.UVIndex.a),{dataSize:2,buffer:Bn,indices:Co,mappingType:yn,referenceType:Rn}},cr.prototype.parseVertexColors=function(vn){var yn=vn.MappingInformationType,Rn=vn.ReferenceInformationType,Bn=vn.Colors.a,Co=[];Rn==="IndexToDirect"&&(Co=vn.ColorIndex.a);for(var Po=0,To=new Color;Po<Bn.length;Po+=4)To.fromArray(Bn,Po),To.toArray(Bn,Po);return{dataSize:4,buffer:Bn,indices:Co,mappingType:yn,referenceType:Rn}},cr.prototype.parseMaterialIndices=function(vn){var yn=vn.MappingInformationType,Rn=vn.ReferenceInformationType;if(yn==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Rn};for(var Bn=vn.Materials.a,Co=[],Po=0;Po<Bn.length;++Po)Co.push(Po);return{dataSize:1,buffer:Bn,indices:Co,mappingType:yn,referenceType:Rn}},cr.prototype.parseNurbsGeometry=function(vn){var yn=parseInt(vn.Order);if(isNaN(yn))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",vn.Order,vn.id),new BufferGeometry;for(var Rn=yn-1,Bn=vn.KnotVector.a,Co=[],Po=vn.Points.a,To=0,Io=Po.length;To<Io;To+=4)Co.push(new Vector4().fromArray(Po,To));var $l,Wl;if(vn.Form==="Closed")Co.push(Co[0]);else if(vn.Form==="Periodic"){$l=Rn,Wl=Bn.length-1-$l;for(var To=0;To<Rn;++To)Co.push(Co[To])}var Xl=new Av(Rn,Bn,Co,$l,Wl),Yl=Xl.getPoints(Co.length*12);return new BufferGeometry().setFromPoints(Yl)},cr}(),uv=function(){function cr(){}return cr.prototype.parse=function(vn,yn,Rn){var Bn=[],Co=this.parseClips(vn,yn,Rn);if(Co!==void 0)for(var Po in Co){var To=Co[Po],Io=this.addClip(To,Rn);Bn.push(Io)}return Bn},cr.prototype.parseClips=function(vn,yn,Rn){if(vn.Objects.AnimationCurve!==void 0){var Bn=this.parseAnimationCurveNodes(vn);this.parseAnimationCurves(vn,Bn,yn);var Co=this.parseAnimationLayers(vn,Bn,yn,Rn),Po=this.parseAnimStacks(vn,Co,yn);return Po}},cr.prototype.parseAnimationCurveNodes=function(vn){var yn=vn.Objects.AnimationCurveNode,Rn=new Map;for(var Bn in yn){var Co=yn[Bn];if(Co.attrName.match(/S|R|T|DeformPercent/)!==null){var Po={id:Co.id,attr:Co.attrName,curves:{}};Rn.set(Po.id,Po)}}return Rn},cr.prototype.parseAnimationCurves=function(vn,yn,Rn){var Bn=vn.Objects.AnimationCurve;for(var Co in Bn){var Po={id:Bn[Co].id,times:Bn[Co].KeyTime.a.map(hv),values:Bn[Co].KeyValueFloat.a},To=Rn.get(Po.id);if(To!==void 0){var Io=To.parents[0].ID,$l=To.parents[0].relationship,Wl=yn.get(Io);Wl&&($l.match(/X/)?Wl.curves.x=Po:$l.match(/Y/)?Wl.curves.y=Po:$l.match(/Z/)?Wl.curves.z=Po:$l.match(/DeformPercent/)&&yn.has(Io)&&(Wl.curves.morph=Po))}}},cr.prototype.parseAnimationLayers=function(vn,yn,Rn,Bn){var Co=vn.Objects.AnimationLayer,Po=new Map,To=function($l){var Wl=[],Xl=Rn.get(parseInt($l));if(Xl!==void 0){var Yl=Xl.children;Yl.forEach(function(Zl,ey){if(yn.has(Zl.ID)){var Rm=yn.get(Zl.ID);if(Rm.curves.x!==void 0||Rm.curves.y!==void 0||Rm.curves.z!==void 0){if(Wl[ey]===void 0){var ry=Rn.get(Zl.ID).parents.filter(function(hy){return hy.relationship!==void 0})[0].ID;if(ry!==void 0){var _g=vn.Objects.Model[ry.toString()];if(_g===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",Zl);return}var ty={modelName:_g.attrName?PropertyBinding.sanitizeNodeName(_g.attrName):"",ID:_g.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:new Matrix4,eulerOrder:"",preRotation:[0,0,0],postRotation:[0,0,0]};Bn.traverse(function(hy){hy.ID===_g.id&&(ty.transform=hy.matrix,hy.userData.transformData&&(ty.eulerOrder=hy.userData.transformData.eulerOrder))}),ty.transform||(ty.transform=new Matrix4),_g.PreRotation&&(ty.preRotation=_g.PreRotation.value),_g.PostRotation&&(ty.postRotation=_g.PostRotation.value),Wl[ey]=ty}}Wl[ey]&&(Wl[ey][Rm.attr]=Rm)}else if(Rm.curves.morph!==void 0){if(Wl[ey]===void 0){var ny=Rn.get(Zl.ID).parents.filter(function(my){return my.relationship!==void 0})[0].ID,iy=Rn.get(ny).parents[0].ID,oy=Rn.get(iy).parents[0].ID,ry=Rn.get(oy).parents[0].ID,ay=vn.Objects.Model[ry],uy={modelName:ay.attrName?PropertyBinding.sanitizeNodeName(ay.attrName):"",morphName:vn.Objects.Deformer[ny].attrName};Wl[ey]=uy}Wl[ey][Rm.attr]=Rm}}}),Po.set(parseInt($l),Wl)}};for(var Io in Co)To(Io);return Po},cr.prototype.parseAnimStacks=function(vn,yn,Rn){var Bn=vn.Objects.AnimationStack,Co={};for(var Po in Bn){var To=Rn.get(parseInt(Po)).children;To.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var Io=yn.get(To[0].ID);Co[Po]={name:Bn[Po].attrName,layer:Io}}return Co},cr.prototype.addClip=function(vn,yn){var Rn=[],Bn=this;return vn.layer.forEach(function(Co){Rn=Rn.concat(Bn.generateTracks(Co,yn))}),new AnimationClip(vn.name,-1,Rn)},cr.prototype.generateTracks=function(vn,yn){var Rn=[],Bn=new Vector3,Co=new Vector3;vn.transform&&vn.transform.decompose(Bn,new Quaternion,Co);var Po=Bn.toArray(),To=Co.toArray();if(vn.T!==void 0&&Object.keys(vn.T.curves).length>0){var Io=this.generateVectorTrack(vn.modelName,vn.T.curves,Po,"position");Io!==void 0&&Rn.push(Io)}if(vn.R!==void 0&&Object.keys(vn.R.curves).length>0){var $l=this.generateRotationTrack(vn.modelName,vn.R.curves,vn.preRotation,vn.postRotation,vn.eulerOrder);$l!==void 0&&Rn.push($l)}if(vn.S!==void 0&&Object.keys(vn.S.curves).length>0){var Wl=this.generateVectorTrack(vn.modelName,vn.S.curves,To,"scale");Wl!==void 0&&Rn.push(Wl)}if(vn.DeformPercent!==void 0){var Xl=this.generateMorphTrack(vn,yn);Xl!==void 0&&Rn.push(Xl)}return Rn},cr.prototype.generateVectorTrack=function(vn,yn,Rn,Bn){var Co=this.getTimesForAllAxes(yn),Po=this.getKeyframeTrackValues(Co,yn,Rn);return new VectorKeyframeTrack(vn+"."+Bn,Co,Po)},cr.prototype.generateRotationTrack=function(vn,yn,Rn,Bn,Co){var Po,To;if(yn.x!==void 0&&yn.y!==void 0&&yn.z!==void 0){var Io=this.interpolateRotations(yn.x,yn.y,yn.z,Co);Po=Io[0],To=Io[1]}var $l=xi(0),Wl=new Quaternion,Xl=new Quaternion;Rn!==void 0&&(Rn=Rn.map(MathUtils.degToRad),Rn.push($l),Wl.setFromEuler(new Euler().fromArray(Rn))),Bn!==void 0&&(Bn=Bn.map(MathUtils.degToRad),Bn.push($l),Xl.setFromEuler(new Euler().fromArray(Bn)),Xl.inverse());var Yl=new Quaternion,Zl=new Euler,ey=[];if(!To||!Po)return new QuaternionKeyframeTrack(vn+".quaternion",[0],[0]);for(var Rm=0;Rm<To.length;Rm+=3){if(Zl.set(To[Rm],To[Rm+1],To[Rm+2],Co),Yl.setFromEuler(Zl),Yl.premultiply(Wl),Yl.multiply(Xl),Rm>2){var ry=new Quaternion().fromArray(ey,(Rm-3)/3*4);ry.dot(Yl)<0&&Yl.set(-Yl.x,-Yl.y,-Yl.z,-Yl.w)}Yl.toArray(ey,Rm/3*4)}return new QuaternionKeyframeTrack(vn+".quaternion",Po,ey)},cr.prototype.generateMorphTrack=function(vn,yn){var Rn=vn.DeformPercent.curves.morph,Bn=Rn.values.map(function(Po){return Po/100}),Co=yn.getObjectByName(vn.modelName).morphTargetDictionary[vn.morphName];return new NumberKeyframeTrack(vn.modelName+".morphTargetInfluences["+Co+"]",Rn.times,Bn)},cr.prototype.getTimesForAllAxes=function(vn){var yn=[];if(vn.x!==void 0&&(yn=yn.concat(vn.x.times)),vn.y!==void 0&&(yn=yn.concat(vn.y.times)),vn.z!==void 0&&(yn=yn.concat(vn.z.times)),yn=yn.sort(function(To,Io){return To-Io}),yn.length>1){for(var Rn=1,Bn=yn[0],Co=1;Co<yn.length;Co++){var Po=yn[Co];Po!==Bn&&(yn[Rn]=Po,Bn=Po,Rn++)}yn=yn.slice(0,Rn)}return yn},cr.prototype.getKeyframeTrackValues=function(vn,yn,Rn){var Bn=Rn,Co=[],Po=-1,To=-1,Io=-1;return vn.forEach(function($l){if(yn.x&&(Po=yn.x.times.indexOf($l)),yn.y&&(To=yn.y.times.indexOf($l)),yn.z&&(Io=yn.z.times.indexOf($l)),Po!==-1){var Wl=yn.x.values[Po];Co.push(Wl),Bn[0]=Wl}else Co.push(Bn[0]);if(To!==-1){var Xl=yn.y.values[To];Co.push(Xl),Bn[1]=Xl}else Co.push(Bn[1]);if(Io!==-1){var Yl=yn.z.values[Io];Co.push(Yl),Bn[2]=Yl}else Co.push(Bn[2])}),Co},cr.prototype.interpolateRotations=function(vn,yn,Rn,Bn){var Co=[],Po=[];Co.push(vn.times[0]),Po.push(MathUtils.degToRad(vn.values[0])),Po.push(MathUtils.degToRad(yn.values[0])),Po.push(MathUtils.degToRad(Rn.values[0]));for(var To=1;To<vn.values.length;To++){var Io=[vn.values[To-1],yn.values[To-1],Rn.values[To-1]];if(!(isNaN(Io[0])||isNaN(Io[1])||isNaN(Io[2]))){var $l=Io.map(MathUtils.degToRad),Wl=[vn.values[To],yn.values[To],Rn.values[To]];if(!(isNaN(Wl[0])||isNaN(Wl[1])||isNaN(Wl[2]))){Wl.map(MathUtils.degToRad);var Xl=[Wl[0]-Io[0],Wl[1]-Io[1],Wl[2]-Io[2]],Yl=[Math.abs(Xl[0]),Math.abs(Xl[1]),Math.abs(Xl[2])];if(Yl[0]>=180||Yl[1]>=180||Yl[2]>=180){var Zl=Math.max.apply(Math,Yl),ey=Zl/180,Rm=new Euler($l[0],$l[1],$l[2],Bn),ry=new Euler($l[0],$l[1],$l[2],Bn),_g=new Quaternion().setFromEuler(Rm),ty=new Quaternion().setFromEuler(ry);_g.dot(ty)&&ty.set(-ty.x,-ty.y,-ty.z,-ty.w);for(var ny=vn.times[To-1],iy=vn.times[To]-ny,oy=new Quaternion,ay=new Euler,uy=0;uy<1;uy+=1/ey)oy.copy(_g.clone().slerp(ty.clone(),uy)),Co.push(ny+uy*iy),ay.setFromQuaternion(oy,Bn),Po.push(ay.x),Po.push(ay.y),Po.push(ay.z)}else Co.push(vn.times[To]),Po.push(MathUtils.degToRad(vn.values[To])),Po.push(MathUtils.degToRad(yn.values[To])),Po.push(MathUtils.degToRad(Rn.values[To]))}}}return[Co,Po]},cr}(),lv=function(){function cr(){this.allNodes=new k0,this.nodeStack=[],this.currentIndent=0,this.currentPropName=""}return cr.prototype.getPrevNode=function(){return this.nodeStack[this.currentIndent-2]},cr.prototype.getCurrentNode=function(){return this.nodeStack[this.currentIndent-1]},cr.prototype.getCurrentProp=function(){return this.currentProp},cr.prototype.pushStack=function(vn){this.nodeStack.push(vn),this.currentIndent+=1},cr.prototype.popStack=function(){this.nodeStack.pop(),this.currentIndent-=1},cr.prototype.setCurrentProp=function(vn,yn){this.currentProp=vn,this.currentPropName=yn},cr.prototype.parse=function(vn){this.currentIndent=0,this.allNodes=new k0,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var yn=this,Rn=vn.split(/[\r\n]+/);return Rn.forEach(function(Bn,Co){var Po=Bn.match(/^[\s\t]*;/),To=Bn.match(/^[\s\t]*$/);if(!(Po||To)){var Io=Bn.match("^\\t{"+yn.currentIndent+"}(\\w+):(.*){"),$l=Bn.match("^\\t{"+yn.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Wl=Bn.match("^\\t{"+(yn.currentIndent-1)+"}}");Io?yn.parseNodeBegin(Bn,Io):$l?yn.parseNodeProperty(Bn,$l,Rn[++Co]):Wl?yn.popStack():Bn.match(/^[^\s\t}]/)&&yn.parseNodePropertyContinued(Bn)}}),this.allNodes},cr.prototype.parseNodeBegin=function(vn,yn){var Rn=yn[1].trim().replace(/^"/,"").replace(/"$/,""),Bn=yn[2].split(",").map(function(Io){return Io.trim().replace(/^"/,"").replace(/"$/,"")}),Co={name:Rn},Po=this.parseNodeAttr(Bn),To=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Rn,Co):Rn in To?(Rn==="PoseNode"?To.PoseNode.push(Co):To[Rn].id!==void 0&&(To[Rn]={},To[Rn][To[Rn].id]=To[Rn]),Po.id!==""&&(To[Rn][Po.id]=Co)):typeof Po.id=="number"?(To[Rn]={},To[Rn][Po.id]=Co):Rn!=="Properties70"&&(Rn==="PoseNode"?To[Rn]=[Co]:To[Rn]=Co),typeof Po.id=="number"&&(Co.id=Po.id),Po.name!==""&&(Co.attrName=Po.name),Po.type!==""&&(Co.attrType=Po.type),this.pushStack(Co)},cr.prototype.parseNodeAttr=function(vn){var yn=vn[0];vn[0]!==""&&(yn=parseInt(vn[0]),isNaN(yn)&&(yn=vn[0]));var Rn="",Bn="";return vn.length>1&&(Rn=vn[1].replace(/^(\w+)::/,""),Bn=vn[2]),{id:yn,name:Rn,type:Bn}},cr.prototype.parseNodeProperty=function(vn,yn,Rn){var Bn=yn[1].replace(/^"/,"").replace(/"$/,"").trim(),Co=yn[2].replace(/^"/,"").replace(/"$/,"").trim();Bn==="Content"&&Co===","&&(Co=Rn.replace(/"/g,"").replace(/,$/,"").trim());var Po=this.getCurrentNode(),To=Po.name;if(To==="Properties70"){this.parseNodeSpecialProperty(vn,Bn,Co);return}if(Bn==="C"){var Io=Co.split(",").slice(1),$l=parseInt(Io[0]),Wl=parseInt(Io[1]),Xl=Co.split(",").slice(3);Xl=Xl.map(function(Yl){return Yl.trim().replace(/^"/,"")}),Bn="connections",Co=[$l,Wl],vv(Co,Xl),Po[Bn]===void 0&&(Po[Bn]=[])}Bn==="Node"&&(Po.id=Co),Bn in Po&&Array.isArray(Po[Bn])?Po[Bn].push(Co):Bn!=="a"?Po[Bn]=Co:Po.a=Co,this.setCurrentProp(Po,Bn),Bn==="a"&&Co.slice(-1)!==","&&(Po.a=n0(Co))},cr.prototype.parseNodePropertyContinued=function(vn){var yn=this.getCurrentNode();yn.a+=vn,vn.slice(-1)!==","&&(yn.a=n0(yn.a))},cr.prototype.parseNodeSpecialProperty=function(vn,yn,Rn){var Bn=Rn.split('",').map(function(Wl){return Wl.trim().replace(/^\"/,"").replace(/\s/,"_")}),Co=Bn[0],Po=Bn[1],To=Bn[2],Io=Bn[3],$l=Bn[4];switch(Po){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":$l=parseFloat($l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":$l=n0($l);break}this.getPrevNode()[Co]={type:Po,type2:To,flag:Io,value:$l},this.setCurrentProp(this.getPrevNode(),Co)},cr}(),cv=function(){function cr(){}return cr.prototype.parse=function(vn){var yn=new vs(vn);yn.skip(23);var Rn=yn.getUint32();if(Rn<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Rn);for(var Bn=new k0;!this.endOfContent(yn);){var Co=this.parseNode(yn,Rn);Co!==null&&Bn.add(Co.name,Co)}return Bn},cr.prototype.endOfContent=function(vn){return vn.size()%16===0?(vn.getOffset()+160+16&-16)>=vn.size():vn.getOffset()+160+16>=vn.size()},cr.prototype.parseNode=function(vn,yn){var Rn={},Bn=yn>=7500?vn.getUint64():vn.getUint32(),Co=yn>=7500?vn.getUint64():vn.getUint32();yn>=7500?vn.getUint64():vn.getUint32();var Po=vn.getUint8(),To=vn.getString(Po);if(Bn===0)return null;for(var Io=[],$l=0;$l<Co;$l++)Io.push(this.parseProperty(vn));var Wl=Io.length>0?Io[0]:"",Xl=Io.length>1?Io[1]:"",Yl=Io.length>2?Io[2]:"";for(Rn.singleProperty=Co===1&&vn.getOffset()===Bn;Bn>vn.getOffset();){var Zl=this.parseNode(vn,yn);Zl!==null&&this.parseSubNode(To,Rn,Zl)}return Rn.propertyList=Io,typeof Wl=="number"&&(Rn.id=Wl),Xl!==""&&(Rn.attrName=Xl),Yl!==""&&(Rn.attrType=Yl),To!==""&&(Rn.name=To),Rn},cr.prototype.parseSubNode=function(vn,yn,Rn){if(Rn.singleProperty===!0){var Bn=Rn.propertyList[0];Array.isArray(Bn)?(yn[Rn.name]=Rn,Rn.a=Bn):yn[Rn.name]=Bn}else if(vn==="Connections"&&Rn.name==="C"){var Co=[];Rn.propertyList.forEach(function(Yl,Zl){Zl!==0&&Co.push(Yl)}),yn.connections===void 0&&(yn.connections=[]),yn.connections.push(Co)}else if(Rn.name==="Properties70"){var Po=Object.keys(Rn);Po.forEach(function(Yl){yn[Yl]=Rn[Yl]})}else if(vn==="Properties70"&&Rn.name==="P"){var To=Rn.propertyList[0],Io=Rn.propertyList[1],$l=Rn.propertyList[2],Wl=Rn.propertyList[3],Xl=void 0;To.indexOf("Lcl ")===0&&(To=To.replace("Lcl ","Lcl_")),Io.indexOf("Lcl ")===0&&(Io=Io.replace("Lcl ","Lcl_")),Io==="Color"||Io==="ColorRGB"||Io==="Vector"||Io==="Vector3D"||Io.indexOf("Lcl_")===0?Xl=[Rn.propertyList[4],Rn.propertyList[5],Rn.propertyList[6]]:Xl=Rn.propertyList[4],yn[To]={type:Io,type2:$l,flag:Wl,value:Xl}}else yn[Rn.name]===void 0?typeof Rn.id=="number"?(yn[Rn.name]={},yn[Rn.name][Rn.id]=Rn):yn[Rn.name]=Rn:Rn.name==="PoseNode"?(Array.isArray(yn[Rn.name])||(yn[Rn.name]=[yn[Rn.name]]),yn[Rn.name].push(Rn)):yn[Rn.name][Rn.id]===void 0&&(yn[Rn.name][Rn.id]=Rn)},cr.prototype.parseProperty=function(vn){var yn=vn.getString(1),Rn;switch(yn){case"C":return vn.getBoolean();case"D":return vn.getFloat64();case"F":return vn.getFloat32();case"I":return vn.getInt32();case"L":return vn.getInt64();case"R":return Rn=vn.getUint32(),vn.getArrayBuffer(Rn);case"S":return Rn=vn.getUint32(),vn.getString(Rn);case"Y":return vn.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var Bn=vn.getUint32(),Co=vn.getUint32(),Po=vn.getUint32();if(Co===0)switch(yn){case"b":case"c":return vn.getBooleanArray(Bn);case"d":return vn.getFloat64Array(Bn);case"f":return vn.getFloat32Array(Bn);case"i":return vn.getInt32Array(Bn);case"l":return vn.getInt64Array(Bn)}var To=Xp(new Uint8Array(vn.getArrayBuffer(Po))),Io=new vs(To.buffer);switch(yn){case"b":case"c":return Io.getBooleanArray(Bn);case"d":return Io.getFloat64Array(Bn);case"f":return Io.getFloat32Array(Bn);case"i":return Io.getInt32Array(Bn);case"l":return Io.getInt64Array(Bn)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+yn)}},cr}(),vs=function(){function cr(vn,yn){this.dv=new DataView(vn),this.offset=0,this.littleEndian=yn!==void 0?yn:!0,this._textDecoder=new TextDecoder}return cr.prototype.getOffset=function(){return this.offset},cr.prototype.size=function(){return this.dv.buffer.byteLength},cr.prototype.skip=function(vn){this.offset+=vn},cr.prototype.getBoolean=function(){return(this.getUint8()&1)===1},cr.prototype.getBooleanArray=function(vn){for(var yn=[],Rn=0;Rn<vn;Rn++)yn.push(this.getBoolean());return yn},cr.prototype.getUint8=function(){var vn=this.dv.getUint8(this.offset);return this.offset+=1,vn},cr.prototype.getInt16=function(){var vn=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,vn},cr.prototype.getInt32=function(){var vn=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,vn},cr.prototype.getInt32Array=function(vn){for(var yn=[],Rn=0;Rn<vn;Rn++)yn.push(this.getInt32());return yn},cr.prototype.getUint32=function(){var vn=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,vn},cr.prototype.getInt64=function(){var vn,yn;return this.littleEndian?(vn=this.getUint32(),yn=this.getUint32()):(yn=this.getUint32(),vn=this.getUint32()),yn&2147483648?(yn=~yn&4294967295,vn=~vn&4294967295,vn===4294967295&&(yn=yn+1&4294967295),vn=vn+1&4294967295,-(yn*4294967296+vn)):yn*4294967296+vn},cr.prototype.getInt64Array=function(vn){for(var yn=[],Rn=0;Rn<vn;Rn++)yn.push(this.getInt64());return yn},cr.prototype.getUint64=function(){var vn,yn;return this.littleEndian?(vn=this.getUint32(),yn=this.getUint32()):(yn=this.getUint32(),vn=this.getUint32()),yn*4294967296+vn},cr.prototype.getFloat32=function(){var vn=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,vn},cr.prototype.getFloat32Array=function(vn){for(var yn=[],Rn=0;Rn<vn;Rn++)yn.push(this.getFloat32());return yn},cr.prototype.getFloat64=function(){var vn=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,vn},cr.prototype.getFloat64Array=function(vn){for(var yn=[],Rn=0;Rn<vn;Rn++)yn.push(this.getFloat64());return yn},cr.prototype.getArrayBuffer=function(vn){var yn=this.dv.buffer.slice(this.offset,this.offset+vn);return this.offset+=vn,yn},cr.prototype.getString=function(vn){var yn=this.offset,Rn=new Uint8Array(this.dv.buffer,yn,vn);this.skip(vn);var Bn=Rn.indexOf(0);return Bn>=0&&(Rn=new Uint8Array(this.dv.buffer,yn,Bn)),this._textDecoder.decode(Rn)},cr}(),k0=function(){function cr(){this.Connections={connections:[]},this.Objects={Model:{},NodeAttribute:{},Geometry:{}},this.GlobalSettings={}}return cr.prototype.add=function(vn,yn){this[vn]=yn},cr}();function fv(cr){var vn="Kaydara FBX Binary  \0";return cr.byteLength>=vn.length&&vn===bl(cr,0,vn.length)}function dv(cr){var vn=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],yn=0;function Rn(Po){var To=cr[Po-1];return cr=cr.slice(yn+Po),yn++,To}for(var Bn=0;Bn<vn.length;++Bn){var Co=Rn(1);if(Co===vn[Bn])return!1}return!0}function ms(cr){var vn=/FBXVersion: (\d+)/,yn=cr.match(vn);if(yn){var Rn=parseInt(yn[1]);return Rn}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function hv(cr){return cr/46186158e3}var pv=[];function Ki(cr,vn,yn,Rn){var Bn;switch(Rn.mappingType){case"ByPolygonVertex":Bn=cr;break;case"ByPolygon":Bn=vn;break;case"ByVertice":Bn=yn;break;case"AllSame":Bn=Rn.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+Rn.mappingType),Bn=0}Rn.referenceType==="IndexToDirect"&&(Bn=Rn.indices[Bn]);var Co=Bn*Rn.dataSize,Po=Co+Rn.dataSize;return mv(pv,Rn.buffer,Co,Po)}var r0=new Euler,qn=new Vector3;function yl(cr){var vn=new Matrix4,yn=new Matrix4,Rn=new Matrix4,Bn=new Matrix4,Co=new Matrix4,Po=new Matrix4,To=new Matrix4,Io=new Matrix4,$l=new Matrix4,Wl=new Matrix4,Xl=new Matrix4,Yl=new Matrix4,Zl=cr.inheritType?cr.inheritType:0;cr.translation&&vn.setPosition(qn.fromArray(cr.translation));var ey=xi(0);if(cr.preRotation){var Rm=cr.preRotation.map(MathUtils.degToRad);Rm.push(ey),yn.makeRotationFromEuler(r0.fromArray(Rm))}if(cr.rotation){var Rm=cr.rotation.map(MathUtils.degToRad);Rm.push(cr.eulerOrder||ey),Rn.makeRotationFromEuler(r0.fromArray(Rm))}if(cr.postRotation){var Rm=cr.postRotation.map(MathUtils.degToRad);Rm.push(ey),Bn.makeRotationFromEuler(r0.fromArray(Rm)),Bn.copy(new Matrix4().getInverse(Bn))}cr.scale&&Co.scale(qn.fromArray(cr.scale)),cr.scalingOffset&&To.setPosition(qn.fromArray(cr.scalingOffset)),cr.scalingPivot&&Po.setPosition(qn.fromArray(cr.scalingPivot)),cr.rotationOffset&&Io.setPosition(qn.fromArray(cr.rotationOffset)),cr.rotationPivot&&$l.setPosition(qn.fromArray(cr.rotationPivot)),cr.parentMatrixWorld&&(Xl.copy(cr.parentMatrix),Wl.copy(cr.parentMatrixWorld));var ry=yn.clone().multiply(Rn).multiply(Bn),_g=new Matrix4;_g.extractRotation(Wl);var ty=new Matrix4;ty.copyPosition(Wl);var ny=new Matrix4().getInverse(ty).multiply(Wl),iy=new Matrix4().getInverse(_g).multiply(ny),oy=Co,ay=new Matrix4;if(Zl===0)ay.copy(_g).multiply(ry).multiply(iy).multiply(oy);else if(Zl===1)ay.copy(_g).multiply(iy).multiply(ry).multiply(oy);else{var uy=new Matrix4().scale(new Vector3().setFromMatrixScale(Xl)),hy=new Matrix4().getInverse(uy),my=iy.clone().multiply(hy);ay.copy(_g).multiply(ry).multiply(my).multiply(oy)}var ly=new Matrix4().getInverse($l),sy=new Matrix4().getInverse(Po),cy=vn.clone().multiply(Io).multiply($l).multiply(yn).multiply(Rn).multiply(Bn).multiply(ly).multiply(To).multiply(Po).multiply(Co).multiply(sy),fy=new Matrix4().copyPosition(cy),vy=Wl.clone().multiply(fy);return Yl.copyPosition(vy),cy=Yl.clone().multiply(ay),cy.premultiply(new Matrix4().getInverse(Wl)),cy}function xi(cr){cr=cr||0;var vn=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return cr===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),vn[0]):vn[cr]}function n0(cr){var vn=cr.split(",").map(function(yn){return parseFloat(yn)});return vn}function bl(cr,vn,yn){return vn===void 0&&(vn=0),yn===void 0&&(yn=cr.byteLength),new TextDecoder().decode(new Uint8Array(cr,vn,yn))}function vv(cr,vn){for(var yn=0,Rn=cr.length,Bn=vn.length;yn<Bn;yn++,Rn++)cr[Rn]=vn[yn]}function mv(cr,vn,yn,Rn){for(var Bn=yn,Co=0;Bn<Rn;Bn++,Co++)cr[Co]=vn[Bn];return cr}var Av=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn,Co,Po){var To=cr.call(this)||this,Io=Rn?Rn.length-1:0,$l=Bn?Bn.length:0;To.degree=yn,To.knots=Rn,To.controlPoints=[],To.startKnot=Co||0,To.endKnot=Po||Io;for(var Wl=0;Wl<$l;++Wl){var Xl=Bn[Wl];To.controlPoints[Wl]=new Vector4(Xl.x,Xl.y,Xl.z,Xl.w)}return To}return vn.prototype.getPoint=function(yn,Rn){Rn===void 0&&(Rn=new Vector3);var Bn=Rn,Co=this.knots[this.startKnot]+yn*(this.knots[this.endKnot]-this.knots[this.startKnot]),Po=yv(this.degree,this.knots,this.controlPoints,Co);return Po.w!==1&&Po.divideScalar(Po.w),Bn.set(Po.x,Po.y,Po.z)},vn.prototype.getTangent=function(yn,Rn){Rn===void 0&&(Rn=new Vector3);var Bn=Rn,Co=this.knots[0]+yn*(this.knots[this.knots.length-1]-this.knots[0]),Po=Mv(this.degree,this.knots,this.controlPoints,Co,1);return Bn.copy(Po[1]).normalize(),Bn},vn.prototype.toJSON=function(){var yn=cr.prototype.toJSON.call(this);return yn.degree=this.degree,yn.knots=yt$3([],this.knots,!0),yn.controlPoints=this.controlPoints.map(function(Rn){return Rn.toArray()}),yn.startKnot=this.startKnot,yn.endKnot=this.endKnot,yn},vn.prototype.fromJSON=function(yn){return cr.prototype.fromJSON.call(this,yn),this.degree=yn.degree,this.knots=yt$3([],yn.knots,!0),this.controlPoints=yn.controlPoints.map(function(Rn){return new Vector4(Rn[0],Rn[1],Rn[2],Rn[3])}),this.startKnot=yn.startKnot,this.endKnot=yn.endKnot,this},vn}(Curve);function xl(cr,vn,yn){var Rn=yn.length-cr-1;if(vn>=yn[Rn])return Rn-1;if(vn<=yn[cr])return cr;for(var Bn=cr,Co=Rn,Po=Math.floor((Bn+Co)/2);vn<yn[Po]||vn>=yn[Po+1];)vn<yn[Po]?Co=Po:Bn=Po,Po=Math.floor((Bn+Co)/2);return Po}function gv(cr,vn,yn,Rn){var Bn=[],Co=[],Po=[];Bn[0]=1;for(var To=1;To<=yn;++To){Co[To]=vn-Rn[cr+1-To],Po[To]=Rn[cr+To]-vn;for(var Io=0,$l=0;$l<To;++$l){var Wl=Po[$l+1],Xl=Co[To-$l],Yl=Bn[$l]/(Wl+Xl);Bn[$l]=Io+Wl*Yl,Io=Xl*Yl}Bn[To]=Io}return Bn}function yv(cr,vn,yn,Rn){for(var Bn=xl(cr,Rn,vn),Co=gv(Bn,Rn,cr,vn),Po=new Vector4(0,0,0,0),To=0;To<=cr;++To){var Io=yn[Bn-cr+To],$l=Co[To],Wl=Io.w*$l;Po.x+=Io.x*Wl,Po.y+=Io.y*Wl,Po.z+=Io.z*Wl,Po.w+=Io.w*$l}return Po}function bv(cr,vn,yn,Rn,Bn){for(var Co=[],Po=0;Po<=yn;++Po)Co[Po]=0;for(var To=[],Po=0;Po<=Rn;++Po)To[Po]=Co.slice(0);for(var Io=[],Po=0;Po<=yn;++Po)Io[Po]=Co.slice(0);Io[0][0]=1;for(var $l=Co.slice(0),Wl=Co.slice(0),Xl=1;Xl<=yn;++Xl){$l[Xl]=vn-Bn[cr+1-Xl],Wl[Xl]=Bn[cr+Xl]-vn;for(var Yl=0,Zl=0;Zl<Xl;++Zl){var ey=Wl[Zl+1],Rm=$l[Xl-Zl];Io[Xl][Zl]=ey+Rm;var ry=Io[Zl][Xl-1]/Io[Xl][Zl];Io[Zl][Xl]=Yl+ey*ry,Yl=Rm*ry}Io[Xl][Xl]=Yl}for(var Xl=0;Xl<=yn;++Xl)To[0][Xl]=Io[Xl][yn];for(var _g=0;_g<=yn;++_g){for(var ty=0,ny=1,iy=[],Po=0;Po<=yn;++Po)iy[Po]=Co.slice(0);iy[0][0]=1;for(var oy=1;oy<=Rn;++oy){var ay=0,uy=_g-oy,hy=yn-oy;_g>=oy&&(iy[ny][0]=iy[ty][0]/Io[hy+1][uy],ay=iy[ny][0]*Io[uy][hy]);for(var my=uy>=-1?1:-uy,ly=_g-1<=hy?oy-1:yn-_g,sy=my;sy<=ly;++sy)iy[ny][sy]=(iy[ty][sy]-iy[ty][sy-1])/Io[hy+1][uy+sy],ay+=iy[ny][sy]*Io[uy+sy][hy];_g<=hy&&(iy[ny][oy]=-iy[ty][oy-1]/Io[hy+1][_g],ay+=iy[ny][oy]*Io[_g][hy]),To[oy][_g]=ay;var Xl=ty;ty=ny,ny=Xl}}for(var cy=yn,oy=1;oy<=Rn;++oy){for(var Xl=0;Xl<=yn;++Xl)To[oy][Xl]*=cy;cy*=yn-oy}return To}function xv(cr,vn,yn,Rn,Bn){for(var Co=Bn<cr?Bn:cr,Po=[],To=xl(cr,Rn,vn),Io=bv(To,Rn,cr,Co,vn),$l=[],Wl=0;Wl<yn.length;++Wl){var Xl=yn[Wl].clone(),Yl=Xl.w;Xl.x*=Yl,Xl.y*=Yl,Xl.z*=Yl,$l[Wl]=Xl}for(var Zl=0;Zl<=Co;++Zl){for(var Xl=$l[To-cr].clone().multiplyScalar(Io[Zl][0]),ey=1;ey<=cr;++ey)Xl.add($l[To-cr+ey].clone().multiplyScalar(Io[Zl][ey]));Po[Zl]=Xl}for(var Zl=Co+1;Zl<=Bn+1;++Zl)Po[Zl]=new Vector4(0,0,0);return Po}function wv(cr,vn){for(var yn=1,Rn=2;Rn<=cr;++Rn)yn*=Rn;for(var Bn=1,Rn=2;Rn<=vn;++Rn)Bn*=Rn;for(var Rn=2;Rn<=cr-vn;++Rn)Bn*=Rn;return yn/Bn}function Sv(cr){for(var vn=cr.length,yn=[],Rn=[],Bn=0;Bn<vn;++Bn){var Co=cr[Bn];yn[Bn]=new Vector3(Co.x,Co.y,Co.z),Rn[Bn]=Co.w}for(var Po=[],To=0;To<vn;++To){for(var Io=yn[To].clone(),Bn=1;Bn<=To;++Bn)Io.sub(Po[To-Bn].clone().multiplyScalar(wv(To,Bn)*Rn[Bn]));Po[To]=Io.divideScalar(Rn[0])}return Po}function Mv(cr,vn,yn,Rn,Bn){var Co=xv(cr,vn,yn,Rn,Bn);return Sv(Co)}var Un=new Vector3;function Ev(cr,vn){switch(vn){case"D":return new Float64Array(cr);case"F":return new Float32Array(cr);case"L":return new Int32Array(cr);case"I":return new Int16Array(cr);default:return new Uint8Array(cr)}}function Cv(cr,vn){var yn;vn===void 0&&(vn={});var Rn=(yn=vn.fetcher)!==null&&yn!==void 0?yn:new Zt$1({allowHosts:["*"]}),Bn={byteLength:0};return Promise.resolve().then(function(){return Rn.ajax(cr,{responseType:"arraybuffer"})}).then(function(Co){var Po,To;return Bn.byteLength=Co.body.byteLength,Iv(new Uint8Array(Co.body),{light:(Po=vn.light)!==null&&Po!==void 0?Po:!0,color:vn.color,resourcePath:cr.slice(0,cr.lastIndexOf("/")+1),search:(To=cr.split("?")[1])!==null&&To!==void 0?To:"",fetcher:Rn})}).then(function(Co){var Po=new Group$1;return Po.matrixAutoUpdate=!1,Po.matrix.compose(Po.position,Po.quaternion,Po.scale),Po.name=cr,Po.add(Co.object),{type:"x3p",upAxis:"Z",uri:cr,byteLength:Bn.byteLength,memoryUsage:Wt$2(Po),scene:Po,textures:[],dispose:function(){return Co.dispose()}}})}function Iv(cr,vn){for(var yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy,oy,ay,uy,hy,my,ly,sy,cy,fy,vy,dy,Ay,gy,wy,Cy,My,Py,Dy,qy,Xy,$y,xy,Ry,Ly,ky,Ey,Iy,zy,Uy,Qy,Gy,Zy,Ty,Vy,Yy,Jy=rv(cr),Hy="",i1=null,u1=0,p1=Object.keys(Jy);u1<p1.length;u1++){var g1=p1[u1];/(^|\/)main\.xml$/i.test(g1)&&(i1=Jy[g1],Hy=g1.slice(0,g1.lastIndexOf("/")+1))}if(!i1)throw new Error("X3p: main.xml not found.");if(typeof DOMParser=="undefined")throw new Error("X3p: DOMParser not found.");var v1=(yn=vn.color)!==null&&yn!==void 0?yn:new Color(10066329),h1=new DOMParser,l1=fa(i1),o1=h1.parseFromString(l1,"text/xml"),t1=o1.querySelector("Record1 Axes"),Wy={x:{type:(Co=(Bn=(Rn=t1==null?void 0:t1.querySelector("CX AxisType"))===null||Rn===void 0?void 0:Rn.textContent)===null||Bn===void 0?void 0:Bn.toUpperCase())!==null&&Co!==void 0?Co:"I",dataType:(Io=(To=(Po=t1==null?void 0:t1.querySelector("CX DataType"))===null||Po===void 0?void 0:Po.textContent)===null||To===void 0?void 0:To.toUpperCase())!==null&&Io!==void 0?Io:"D",increment:Number((Wl=($l=t1==null?void 0:t1.querySelector("CX Increment"))===null||$l===void 0?void 0:$l.textContent)!==null&&Wl!==void 0?Wl:"1"),offset:Number((Yl=(Xl=t1==null?void 0:t1.querySelector("CX Offset"))===null||Xl===void 0?void 0:Xl.textContent)!==null&&Yl!==void 0?Yl:"0")},y:{type:(Rm=(ey=(Zl=t1==null?void 0:t1.querySelector("CY AxisType"))===null||Zl===void 0?void 0:Zl.textContent)===null||ey===void 0?void 0:ey.toUpperCase())!==null&&Rm!==void 0?Rm:"I",dataType:(ty=(_g=(ry=t1==null?void 0:t1.querySelector("CY DataType"))===null||ry===void 0?void 0:ry.textContent)===null||_g===void 0?void 0:_g.toUpperCase())!==null&&ty!==void 0?ty:"D",increment:Number((iy=(ny=t1==null?void 0:t1.querySelector("CY Increment"))===null||ny===void 0?void 0:ny.textContent)!==null&&iy!==void 0?iy:"1"),offset:Number((ay=(oy=t1==null?void 0:t1.querySelector("CY Offset"))===null||oy===void 0?void 0:oy.textContent)!==null&&ay!==void 0?ay:"0")},z:{type:(my=(hy=(uy=t1==null?void 0:t1.querySelector("CZ AxisType"))===null||uy===void 0?void 0:uy.textContent)===null||hy===void 0?void 0:hy.toUpperCase())!==null&&my!==void 0?my:"A",dataType:(cy=(sy=(ly=t1==null?void 0:t1.querySelector("CZ DataType"))===null||ly===void 0?void 0:ly.textContent)===null||sy===void 0?void 0:sy.toUpperCase())!==null&&cy!==void 0?cy:"D",increment:Number((vy=(fy=t1==null?void 0:t1.querySelector("CZ Increment"))===null||fy===void 0?void 0:fy.textContent)!==null&&vy!==void 0?vy:"1"),offset:Number((Ay=(dy=t1==null?void 0:t1.querySelector("CZ Offset"))===null||dy===void 0?void 0:dy.textContent)!==null&&Ay!==void 0?Ay:"0")}},f1=null,m1=o1.querySelector("Record1 Axes Rotation");m1&&(f1=new Matrix3,f1.set(Number((wy=(gy=m1.querySelector("r11"))===null||gy===void 0?void 0:gy.textContent)!==null&&wy!==void 0?wy:0),Number((My=(Cy=m1.querySelector("r12"))===null||Cy===void 0?void 0:Cy.textContent)!==null&&My!==void 0?My:0),Number((Dy=(Py=m1.querySelector("r13"))===null||Py===void 0?void 0:Py.textContent)!==null&&Dy!==void 0?Dy:0),Number((Xy=(qy=m1.querySelector("r21"))===null||qy===void 0?void 0:qy.textContent)!==null&&Xy!==void 0?Xy:0),Number((xy=($y=m1.querySelector("r22"))===null||$y===void 0?void 0:$y.textContent)!==null&&xy!==void 0?xy:0),Number((Ly=(Ry=m1.querySelector("r23"))===null||Ry===void 0?void 0:Ry.textContent)!==null&&Ly!==void 0?Ly:0),Number((Ey=(ky=m1.querySelector("r31"))===null||ky===void 0?void 0:ky.textContent)!==null&&Ey!==void 0?Ey:0),Number((zy=(Iy=m1.querySelector("r32"))===null||Iy===void 0?void 0:Iy.textContent)!==null&&zy!==void 0?zy:0),Number((Qy=(Uy=m1.querySelector("r33"))===null||Uy===void 0?void 0:Uy.textContent)!==null&&Qy!==void 0?Qy:0)));var w1=(Gy=o1.querySelector("Record3 DataLink PointDataLink"))===null||Gy===void 0?void 0:Gy.textContent;if(typeof w1!="string")throw new Error("X3p: PointDataLink not found.");w1=ct$4(Hy,w1);var c1=Jy[w1];if(!c1)throw new Error("X3p: ".concat(c1," not found."));for(var M1=Ev(c1.buffer,Wy.z.dataType),L1=Number((Ty=(Zy=o1.querySelector("Record3 MatrixDimension SizeX"))===null||Zy===void 0?void 0:Zy.textContent)!==null&&Ty!==void 0?Ty:"0"),B1=Number((Yy=(Vy=o1.querySelector("Record3 MatrixDimension SizeY"))===null||Vy===void 0?void 0:Vy.textContent)!==null&&Yy!==void 0?Yy:"0"),D1=Math.floor(L1-1),O1=Math.floor(B1-1),j1=D1+1,k1=O1+1,q1=new Float32Array(j1*k1*3),_b=new Float32Array(j1*k1*2),Q1=new Uint32Array(D1*O1*6),Y1=new Box3,jy=0;jy<k1;jy++)for(var r1=jy*Wy.y.increment+Wy.y.offset,n1=0;n1<j1;n1++){var a1=jy*j1+n1,y1=n1*Wy.x.increment+Wy.x.offset,_1=M1[a1],E1=!isNaN(_1),b1=E1?_1:NaN;Un.set(y1,-r1,b1),f1&&Un.applyMatrix3(f1),E1&&Y1.expandByPoint(Un),q1[a1*3+0]=Un.x,q1[a1*3+1]=Un.y,q1[a1*3+2]=Un.z,_b[a1*2+0]=n1/D1,_b[a1*2+1]=1-jy/O1}for(var jy=0;jy<O1;jy++)for(var n1=0;n1<D1;n1++){var S1=n1+j1*jy,x1=n1+j1*(jy+1),W1=n1+1+j1*(jy+1),N1=n1+1+j1*jy,R1=(jy*D1+n1)*6;Q1[R1+0]=S1,Q1[R1+1]=x1,Q1[R1+2]=N1,Q1[R1+3]=x1,Q1[R1+4]=W1,Q1[R1+5]=N1}var $1=new BufferGeometry;$1.setAttribute("position",new BufferAttribute(q1,3)),$1.setAttribute("uv",new BufferAttribute(_b,2)),$1.setIndex(new BufferAttribute(Q1,1)),(!$1.groups||$1.groups.length===0)&&$1.addGroup(0,$1.index?$1.index.count:$1.attributes.position.count,0),$1.boundingBox=Y1;var C1=new Mr$1(vn.light?"phong":"basic");C1.flatShading=!0,C1.color.copy(v1),C1.refreshUniforms();var T1=new Ht$2($1,[C1]);return{object:T1,dispose:function(){$1.dispose(),C1.dispose()}}}var As=new Matrix4,Tv=5e3,gs=1e3;function i0(cr,vn){cr.name=vn.id;var yn=vn.tileset.properties.floorInfo;cr.traverse(function(Rn){if("floor"in vn.extras){if(Rn instanceof Mesh||Rn instanceof Points)for(var Bn=Array.isArray(Rn.material)?Rn.material:Rn.material?[Rn.material]:[],Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co];(To instanceof Mr$1||To instanceof wa)&&(To.floorIndex=vn.extras.floor)}}else if(!(Rn instanceof Vr$1)&&(Rn instanceof Ht$2||Rn instanceof Jr$2)&&yn){for(var Io=new Box3().expandByObject(Rn),$l=Io.getCenter(new Vector3),Wl=0,Xl=0;Xl<yn.length;Xl++){var Yl=yn[Xl],Zl=Yl.ground,ey=Yl.height;if($l.y<Zl+ey){Wl=Xl;break}}vn.floor=Wl,vn.tileset.floorLength=Math.max(vn.tileset.floorLength,vn.floor+1),Rn.material.forEach(function(Rm){return Rm.floorIndex=Wl})}})}function Pv(cr,vn){if(!cr.content)return Promise.resolve(cr);var yn=cr.content,Rn=Sa(yn.uri,vn.search);if(cr.type==="TILESET"){var Bn=At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return yn.loadState="LOADING",yn.loadStateUpdateTime=Ae$3(),vn.fetcher.ajax(Bn,{responseType:"text"}).then(function(Co){return Co.body}).then(function(Co){var Po=Rn.slice(0,Rn.lastIndexOf("/")+1);return ra(JSON.parse(Co),Po)}).then(function(Co){yn.loadState="READY",yn.loadStateUpdateTime=Ae$3(),yn.loadfailRetryDelay=0,cr.children.length===0&&(cr.children=[new Fu("".concat(cr.id,".0"),Co.root,cr.tileset,cr)])}).then(function(){return cr}).catch(function(Co){return yn.loadState="FAILED",yn.loadStateUpdateTime=Ae$3(),yn.loadfailRetryDelay=Math.min(yn.loadfailRetryDelay+1e3,5e3),Promise.reject(Co)})}if(cr.type==="SCENEGRAPH")return yn.loadState="LOADING",yn.loadStateUpdateTime=Ae$3(),Promise.resolve().then(function(){var Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm="",ry=Rn.split("#"),_g=ry[0],ty=ry[1],ny=(ty||_g).split("?")[0].match(/\.([0-9a-zA-Z]+)$/);if(ny&&(Rm=ny[1]),Rm==="b3dm"){var iy=At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return qh(iy,{upAxis:cr.tileset.asset.gltfUpAxis,light:vn.light,fetcher:vn.fetcher}).then(function(oy){return oy.scene.applyMatrix4(cr.transform),oy.scene.updateWorldMatrix(!1,!0),oy.scene.matrixAutoUpdate=!1,i0(oy.scene,cr),oy})}if(Rm==="pnts"){var iy=At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return Jh(iy,{computeBoundingBox:!1,fetcher:vn.fetcher}).then(function(ay){if(ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,cr.boundingVolume){var uy=cr.boundingVolume;ay.scene.traverse(function(hy){if(hy instanceof Vr$1){As.getInverse(hy.matrixWorld);var my=new Box3;uy.getBoundingBox(my),my.applyMatrix4(As),hy.geometry.boundingBox=my}})}return i0(ay.scene,cr),ay})}if(Rm==="glb"||Rm==="gltf"){var iy=At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return mp(iy,{upAxis:cr.tileset.asset.gltfUpAxis,light:vn.light,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,i0(ay.scene,cr),ay})}if(Rm==="at3d"){var iy=cr.extras.at3d?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return ap(iy,{light:vn.light,textureBaseUri:(Co=cr.extras.at3d)===null||Co===void 0?void 0:Co.textureBaseUri,textureArray:(Po=cr.extras.at3d)===null||Po===void 0?void 0:Po.textureArray,textureOptions:(To=cr.extras.at3d)===null||To===void 0?void 0:To.textureOptions,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="pbm"){var iy=cr.extras.pbm?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return rp(iy,{light:vn.light,textureBaseUri:(Io=cr.extras.pbm)===null||Io===void 0?void 0:Io.textureBaseUri,textureArray:($l=cr.extras.pbm)===null||$l===void 0?void 0:$l.textureArray,textureOptions:(Wl=cr.extras.pbm)===null||Wl===void 0?void 0:Wl.textureOptions,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="dome"){var iy=cr.extras.dome?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return up(iy,{light:vn.light,textureBaseUri:(Xl=cr.extras.dome)===null||Xl===void 0?void 0:Xl.textureBaseUri,textureOptions:(Yl=cr.extras.dome)===null||Yl===void 0?void 0:Yl.textureOptions,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="domez"){var iy=cr.extras.domez?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return pp(iy,{light:vn.light,textureBaseUri:(Zl=cr.extras.domez)===null||Zl===void 0?void 0:Zl.textureBaseUri,textureOptions:(ey=cr.extras.domez)===null||ey===void 0?void 0:ey.textureOptions,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="ply"){var iy=cr.extras.ply?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return sl(iy,{type:"pbmPointCloud",light:vn.light,upAxis:"Z",fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="obj"){var iy=cr.extras.obj?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return zp(iy,{upAxis:"Z",light:vn.light,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="fbx"){var iy=cr.extras.obj?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return iv(iy,{light:vn.light,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}if(Rm==="x3p"){var iy=cr.extras.x3p?Rn:At$1(Rn,{key:"model.".concat(cr.siblingIndex)});return Cv(iy,{light:vn.light,fetcher:vn.fetcher}).then(function(ay){return ay.scene.applyMatrix4(cr.transform),ay.scene.updateWorldMatrix(!1,!0),ay.scene.matrixAutoUpdate=!1,ay})}throw new Error("Invalid Tile content: ".concat(Rn))}).then(function(Co){Co.scene.traverse(function(To){if(To instanceof Vr$1)To.material.uniforms.geometricError.value=cr.geometricError;else if(To instanceof Ht$2||To instanceof Jr$2)for(var Io=0,$l=To.material;Io<$l.length;Io++){var Wl=$l[Io];Wl.uniforms.geometricError.value=cr.geometricError}});var Po={type:Co.type,uri:Co.uri,byteLength:Co.byteLength,memoryUsage:Co.memoryUsage,object:new eh(cr.id,Co.scene,Co.dispose)};return Promise.resolve().then(function(){return Promise.all([Po.object.generateBvhTree(),vn.renderer&&Co.textures.length<16?th(Co.textures,vn.renderer,1024*1024):null])}).then(function(){return yn.loadState="READY",yn.loadStateUpdateTime=Ae$3(),yn.loadfailRetryDelay=0,yn.byteLength=Po.byteLength,yn.memoryUsage=Po.memoryUsage,yn.data=Po,cr}).catch(function(To){return O0(cr),Promise.reject(To)})}).catch(function(Co){return yn.loadState="FAILED",yn.loadStateUpdateTime=Ae$3(),Co instanceof Wn&&Co.httpStatus===0||Co instanceof gi||Co instanceof Si?yn.loadfailRetryDelay=pe$4(yn.loadfailRetryDelay+gs,gs,Tv):yn.loadfailRetryDelay=1/0,Promise.reject(Co)});throw new Error("Invalid Tile type: ".concat(cr.type))}function O0(cr){cr.content&&(cr.content.data&&cr.content.data.object.dispose(),cr.content.data=void 0,cr.content.loadState="UNLOADED",cr.content.loadStateUpdateTime=Ae$3(),cr.content.byteLength=0,cr.content.memoryUsage=0)}var Rv=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){Bn===void 0&&(Bn=q$q);var Co=cr.call(this)||this;return Co.name=yn,Co.contentObject=Rn,Co.name=yn,Co.add(Rn),Co.disposers=[Bn],Co}return vn.prototype.update=function(yn,Rn,Bn){var Co=this.contentObject.material[2];Co.uniforms.dashOffset.value=(Co.uniforms.dashOffset.value-.003)%(Co.uniforms.dashSize.value.x+Co.uniforms.dashSize.value.y),Bn.needsRender=!0},vn.prototype.dispose=function(){for(var yn=0,Rn=this.disposers;yn<Rn.length;yn++){var Bn=Rn[yn];Bn()}this.disposers.length=0},vn.prototype.clone=function(){return new vn(this.name,this.contentObject.clone())},vn}(Object3D),Bv=5e3,ys=1e3,qr$2={vertexShader:`
varying vec2 vUv;
uniform float displacementScalar;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
  vUv = uv;
  #include <color_vertex>
  #include <begin_vertex>
  vec3 objectNormal = vec3( normal );
  transformed += normalize( objectNormal ) * displacementScalar;
  #include <morphtarget_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>
  #include <fog_vertex>
}
`,fragmentShader:`
varying vec2 vUv;
uniform vec3 diffuse;
uniform vec3 diffuse2;
uniform float opacity;
uniform float dashOffset;
uniform vec2 dashSize;
uniform float totalLength;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
  if (mod(abs(vUv.x * totalLength + dashOffset), (dashSize.x + dashSize.y)) > dashSize.x) {
    discard;
  }
  #include <clipping_planes_fragment>
  vec3 outgoingLight = vec3( 0.0 );
  vec4 diffuseColor = vec4( mix(diffuse, diffuse2, vUv.x), opacity );

  #include <logdepthbuf_fragment>
  #include <color_fragment>

  outgoingLight = diffuseColor.rgb; // simple shader

  gl_FragColor = vec4( outgoingLight, diffuseColor.a );

  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
}
`,uniforms:{diffuse:{value:new Color},diffuse2:{value:new Color},opacity:{value:1},displacementScalar:{value:0},totalLength:{value:1},dashSize:{value:new Vector3},dashOffset:{value:0}}},Ur$1={vertexShader:`
uniform float displacementScalar;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
  #include <color_vertex>
  #include <begin_vertex>
  vec3 objectNormal = vec3( normal );
  transformed += normalize( objectNormal ) * displacementScalar;
  #include <morphtarget_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>
  #include <fog_vertex>
}
`,fragmentShader:`
uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
  #include <clipping_planes_fragment>
  vec3 outgoingLight = vec3( 0.0 );
  vec4 diffuseColor = vec4( diffuse, opacity );

  #include <logdepthbuf_fragment>
  #include <color_fragment>

  outgoingLight = diffuseColor.rgb; // simple shader

  gl_FragColor = vec4( outgoingLight, diffuseColor.a );

  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
}
`,uniforms:{diffuse:{value:new Color},opacity:{value:1},displacementScalar:{value:0}}};function Fv(cr,vn,yn,Rn){for(var Bn=new Float32Array((yn+1)*(Rn+1)*3),Co=new Float32Array((yn+1)*(Rn+1)*3),Po=new Float32Array((yn+1)*(Rn+1)*2),To=new Uint32Array(yn*Rn*6),Io=cr.computeFrenetFrames(yn),$l=new Vector3,Wl=new Vector3,Xl=new Vector2,Yl=new Vector3,Zl=0;Zl<=yn;Zl++){Yl=cr.getPointAt(Zl/yn,Yl);for(var ey=Io.normals[Zl],Rm=Io.binormals[Zl],ry=0;ry<=Rn;ry++){var _g=Zl*(Rn+1)+ry,ty=ry/Rn*Math.PI*2,ny=Math.sin(ty),iy=-Math.cos(ty);Wl.x=iy*ey.x+ny*Rm.x,Wl.y=iy*ey.y+ny*Rm.y,Wl.z=iy*ey.z+ny*Rm.z,Wl.normalize(),Wl.toArray(Co,_g*3),$l.x=Yl.x+vn*Wl.x,$l.y=Yl.y+vn*Wl.y,$l.z=Yl.z+vn*Wl.z,$l.toArray(Bn,_g*3),Xl.x=Zl/yn,Xl.y=ry/Rn,Xl.toArray(Po,_g*2)}}for(var Zl=0;Zl<yn;Zl++)for(var ry=0;ry<Rn;ry++){var oy=(Zl*Rn+ry)*6,ay=(Rn+1)*Zl+ry,uy=(Rn+1)*(Zl+1)+ry,hy=(Rn+1)*(Zl+1)+(ry+1),my=(Rn+1)*Zl+(ry+1);To[oy]=ay,To[oy+1]=uy,To[oy+2]=my,To[oy+3]=uy,To[oy+4]=hy,To[oy+5]=my}var ly=new BufferGeometry;return ly.setIndex(new BufferAttribute(To,1)),ly.setAttribute("position",new BufferAttribute(Bn,3)),ly.setAttribute("normal",new BufferAttribute(Co,3)),ly.setAttribute("uv",new BufferAttribute(Po,2)),ly}function Lv(cr,vn){for(var yn=new Color(0).convertSRGBToLinear(),Rn=new Color(52949).convertSRGBToLinear(),Bn=new Color(3370495).convertSRGBToLinear(),Co=new Color(16777215).convertSRGBToLinear(),Po=0,To=new CurvePath,Io=cr.length,$l=3;$l<Io;$l+=3){var Wl=new Vector3().fromArray(cr,$l-3),Xl=new Vector3().fromArray(cr,$l);Po+=Wl.distanceTo(Xl);var Yl=new LineCurve3(Wl,Xl);To.add(Yl)}var Zl=.03,ey=Math.ceil(Po*100),Rm=6,ry=Fv(To,Zl,ey,Rm);ry.clearGroups(),ry.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,0),ry.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,1),ry.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,2);var _g=new ShaderMaterial({vertexShader:qr$2.vertexShader,fragmentShader:qr$2.fragmentShader,uniforms:UniformsUtils.clone(qr$2.uniforms),side:BackSide});_g.uniforms.totalLength.value=Po,_g.uniforms.diffuse.value=yn,_g.uniforms.diffuse2.value=yn,_g.uniforms.opacity.value=.5,_g.transparent=!0;var ty=new ShaderMaterial({vertexShader:qr$2.vertexShader,fragmentShader:qr$2.fragmentShader,uniforms:UniformsUtils.clone(qr$2.uniforms),side:BackSide});ty.uniforms.totalLength.value=Po,ty.uniforms.displacementScalar.value=-.01,ty.uniforms.diffuse.value=Rn,ty.uniforms.diffuse2.value=Bn;var ny=new ShaderMaterial({vertexShader:qr$2.vertexShader,fragmentShader:qr$2.fragmentShader,uniforms:UniformsUtils.clone(qr$2.uniforms),side:DoubleSide});ny.uniforms.totalLength.value=Po,ny.uniforms.displacementScalar.value=-.026,ny.uniforms.dashSize.value=new Vector2(.06,.09),ny.uniforms.diffuse.value=Co,ny.uniforms.diffuse2.value=Co;var iy=new Mesh(ry,[_g,ty,ny]),oy=.08,ay=24,uy=new SphereBufferGeometry(oy,ay,ay);uy.clearGroups(),uy.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,0),uy.addGroup(0,ry.index?ry.index.count:ry.attributes.position.count,1);var hy=new ShaderMaterial({vertexShader:Ur$1.vertexShader,fragmentShader:Ur$1.fragmentShader,uniforms:UniformsUtils.clone(Ur$1.uniforms),side:BackSide});hy.uniforms.diffuse.value=yn,hy.uniforms.opacity.value=.5,hy.transparent=!0;var my=new ShaderMaterial({vertexShader:Ur$1.vertexShader,fragmentShader:Ur$1.fragmentShader,uniforms:UniformsUtils.clone(Ur$1.uniforms),side:FrontSide});my.uniforms.displacementScalar.value=-.01,my.uniforms.diffuse.value=Rn;var ly=new Mesh(uy,[hy,my]);ly.position.fromArray(cr,0),iy.add(ly);var sy=new ShaderMaterial({vertexShader:Ur$1.vertexShader,fragmentShader:Ur$1.fragmentShader,uniforms:UniformsUtils.clone(Ur$1.uniforms),side:FrontSide});sy.uniforms.displacementScalar.value=-.01,sy.uniforms.diffuse.value=Bn;var cy=new Mesh(uy,[hy,sy]);return cy.position.fromArray(cr,cr.length-3),iy.add(cy),{scene:iy,dispose:function(){ry.dispose(),_g.dispose(),ty.dispose(),ny.dispose(),uy.dispose(),hy.dispose(),my.dispose(),sy.dispose()}}}function kv(cr,vn){var yn=cr.name,Rn=Sa(cr.content.uri,vn.search),Bn=At$1(Rn,{key:"model.0"});return cr.content.loadState="LOADING",cr.content.loadStateUpdateTime=Ae$3(),sl(Bn,{type:"geometry",customPropertyMapping:{time:{itemType:"uint32",itemNames:["time_milisec"]}},fetcher:vn.fetcher}).then(function(Co){var Po,To,Io,$l,Wl=(To=(Po=Co.scene.attributes)===null||Po===void 0?void 0:Po.time.array)!==null&&To!==void 0?To:[],Xl=($l=(Io=Co.scene.attributes)===null||Io===void 0?void 0:Io.position.array)!==null&&$l!==void 0?$l:[],Yl=Co.byteLength,Zl=Co.memoryUsage,ey=Lv(Xl);ey.scene.applyMatrix4(cr.transform),ey.scene.updateWorldMatrix(!1,!0),ey.scene.matrixAutoUpdate=!1;var Rm=new Rv(yn,ey.scene);return cr.content.data={uri:Bn,byteLength:Yl,memoryUsage:Zl,positionArray:Xl,timeArray:Wl,object:Rm},cr.content.byteLength=Yl,cr.content.memoryUsage=Zl,cr.content.loadState="READY",cr.content.loadStateUpdateTime=Ae$3(),cr}).catch(function(Co){return cr.content.data=void 0,cr.content.loadState="FAILED",cr.content.loadStateUpdateTime=Ae$3(),Co instanceof Wn&&Co.httpStatus===0||Co instanceof gi||Co instanceof Si?cr.content.loadfailRetryDelay=pe$4(cr.content.loadfailRetryDelay+ys,ys,Bv):cr.content.loadfailRetryDelay=1/0,Promise.reject(Co)})}function bs(cr){cr.content&&(cr.content.data&&cr.content.data.object.dispose(),cr.content.data=void 0,cr.content.loadState="UNLOADED",cr.content.loadStateUpdateTime=Ae$3(),cr.content.byteLength=0,cr.content.memoryUsage=0)}var xs=new Vector3,Ov=new Matrix3,zv=new Matrix4,Et$1=6378137,wl=298.257223563;function Sl(cr){for(var vn=Et$1-Et$1/wl,yn=(Et$1*Et$1-vn*vn)/(Et$1*Et$1),Rn=Math.sqrt(cr.x*cr.x+cr.y*cr.y),Bn=1e-12,Co=1e3,Po=0,To=Math.atan2(cr.z,Rn),Io=0;Po++<Co;){var $l=Math.sin(To),Wl=Et$1/Math.sqrt(1-yn*$l*$l);Io=Rn/Math.cos(To)-Wl;var Xl=Math.atan2(cr.z/(Wl*(1-yn)+Io),Rn/(Wl+Io));if(isNaN(Xl))break;var Yl=Math.abs(Xl-To);if(Yl<Bn)break;To=Xl}return cr.set(To,Math.atan2(cr.y,cr.x),Io)}function Vv(cr){var vn=cr.x,yn=cr.y,Rn=cr.z,Bn=Et$1-Et$1/wl,Co=(Et$1*Et$1-Bn*Bn)/(Et$1*Et$1),Po=Math.sin(vn),To=Math.cos(vn),Io=Math.sin(yn),$l=Math.cos(yn),Wl=Et$1/Math.sqrt(1-Co*Po*Po),Xl=(Wl+Rn)*To*$l,Yl=(Wl+Rn)*To*Io,Zl=(Bn*Bn/(Et$1*Et$1)*Wl+Rn)*Po;return cr.set(Xl,Yl,Zl)}function Dv(cr,vn){var yn=Sl(xs.copy(cr)),Rn=yn.x,Bn=yn.y,Co=yn.z,Po=Math.sin(Rn),To=Math.sin(Bn),Io=Math.cos(Rn),$l=Math.cos(Bn);vn.fromArray([-To,-Po*$l,Io*$l,0,+$l,-Po*To,Io*To,0,0,Io,Po,0,0,0,0,1]);var Wl=Ov.setFromMatrix4(vn),Xl=xs.copy(cr).applyMatrix3(Wl).multiplyScalar(-1);vn.setPosition(Xl);var Yl=zv.fromArray([1,0,0,0,0,1,0,0,0,0,1,0,0,0,Co,1]);return vn.premultiply(Yl),vn}var yr$1={TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15},ws=function(){var cr=new MeshBasicMaterial;return cr.side=BackSide,cr.color.setHex(16711935),cr.colorWrite=!1,cr.stencilWrite=!0,cr.polygonOffset=!0,cr.polygonOffsetFactor=2,cr.polygonOffsetUnits=2,cr.stencilRef=yr$1.TILE_MASK,cr.stencilFunc=AlwaysStencilFunc,cr.stencilFuncMask=yr$1.TILE_MASK,cr.stencilZPass=ReplaceStencilOp,cr.stencilWriteMask=yr$1.TILE_MASK,cr}(),Ss=function(){var cr=new MeshBasicMaterial;return cr.visible=!1,cr}(),Nv=new BufferGeometry,qv=new MeshBasicMaterial,Qn=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn){var Co,Po,To,Io=cr.call(this)||this;return Io.modelIndex=0,Io.renderObjects=[],Io.backfaceObjects=[],Io.debugObjects=[],Io.tileObjects=[],Io.debug="none",Io.name=Bn.name,Io.type=Bn.type,Io.light=Bn.light,Io.upAxis=Bn.upAxis,Io.model=yn,Io.fetcher=Bn.fetcher,Io.search=(Co=Bn.search)!==null&&Co!==void 0?Co:"",Io.groundHeight=Bn.groundHeight,Io.coordinateTransform=Bn.coordinateTransform,Io.boundingBox=new Box3,Io.minLevelOfDetail=vn.DEFAULT_MIN_LEVEL_OF_DETAIL,Io.maxLevelOfDetail=vn.DEFAULT_MAX_LEVEL_OF_DETAIL,Io.minGeometricError=vn.DEFAULT_MIN_GEOMETRIC_ERROR,Io.maxGeometricError=vn.DEFAULT_MAX_GEOMETRIC_ERROR,Io.panoramaMinGeometricError=vn.DEFAULT_PANORAMA_MIN_GEOMETRIC_ERROR,Io.needsRefined=!0,Io.refined=!1,Io.refineProgress=[0,0],Io.loaded=!1,Io.modelsLoaded=!1,Io.disposed=!1,Io.needsRender=!0,Io.lastRenderHash="",Io.matrixAutoUpdate=!1,Io.cacheCameras=[],Io.clearStencilObject=new Mesh(Nv,qv),Io.clearStencilObject.frustumCulled=!1,Io.clearStencilObject.onAfterRender=function($l){return $l.clearStencil()},Io.tileset=new tn((To=(Po=Io.model.work)===null||Po===void 0?void 0:Po.workCode)!==null&&To!==void 0?To:"",Rn,{referer:Bn.referer,tileLoader:function($l){return Io.loadContent($l)},tileUnloader:function($l){return Io.unloadContent($l)},onTileLoad:function(){},onTileUnload:function($l){},onTileError:function($l,Wl){Bn.onError&&Bn.onError(Object.assign(Wl,{error:Wl})),console.error("Tile error",$l.id,Wl)},trajectoryLoader:function($l){return Io.loadTrajectory($l)},trajectoryUnloader:function($l){return Io.unloadTrajectory($l)},onTrajectoryLoad:function(){},onTrajectoryUnload:function($l){},onTrajectoryError:function($l,Wl){Bn.onError&&Bn.onError(Object.assign(Wl,{error:Wl})),console.error("Trajectory error",$l,Wl)}}),Io.tileset.root.boundingVolume&&Io.tileset.root.boundingVolume.getBoundingBox(Io.boundingBox),Io}return vn.prototype.getRecommendProps=function(yn){var Rn,Bn,Co;yn===void 0&&(yn={});var Po,To,Io,$l=128;yn.powerPreference==="high"&&($l=512);var Wl=typeof this.tileset.rootMeta.creationTime=="string";if(Wl){var Xl=typeof this.tileset.rootMeta.numTotalPoints=="number"&&this.tileset.rootMeta.numTotalPoints>0;if(Xl){Io=4,yn.powerPreference==="high"&&(Io=2),Po=Io/1.6;var Yl=0;if(((Rn=this.tileset.rootMeta.taskParameters)===null||Rn===void 0?void 0:Rn.point_homogenization)==="1"&&!((Bn=this.tileset.rootMeta.taskParameters)===null||Bn===void 0)&&Bn.homo_point_density){var Zl=Number((Co=this.tileset.rootMeta.taskParameters)===null||Co===void 0?void 0:Co.homo_point_density);isFinite(Zl)&&!isNaN(Zl)&&(Yl=Zl)}Yl<=0&&(Yl=.02),To=Yl*1.4}else Io=5,yn.powerPreference==="high"&&(Io=4),Po=1,To=.03}else Io=6,Po=1,To=.03,this.name==="aerophoto"?(Io=12,yn.powerPreference==="high"&&(Io=10)):this.tileset.asset.extras&&typeof this.tileset.asset.extras.name=="string"&&/^matterport\b/i.test(this.tileset.asset.extras.name)&&(Io=5,yn.powerPreference==="high"&&(Io=4));return{pointScale:To,pointMinPixel:Po,maxScreenSpaceError:Io,maxMemoryUsage:$l}},vn.prototype.getRenderHash=function(){return ba([this.tileset.id,this.tileset.skipLevelOfDetail,this.tileset.selectedTiles.map(function(yn){return yn.id}),this.tileset.selectedTrajectories.map(function(yn){return yn.index}),this.debug])},Object.defineProperty(vn.prototype,"maxMemoryUsage",{get:function(){return this.tileset.maxMemoryUsage},set:function(yn){this.tileset.maxMemoryUsage=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"maxRequests",{get:function(){return this.tileset.maxRequests},set:function(yn){this.tileset.maxRequests=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"requestOrder",{get:function(){return this.tileset.tileRequestOrder},set:function(yn){this.tileset.tileRequestOrder=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"skipLevelOfDetail",{get:function(){return this.tileset.skipLevelOfDetail},set:function(yn){this.tileset.skipLevelOfDetail=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"mostDetail",{get:function(){return this.tileset.mostDetail},set:function(yn){this.tileset.mostDetail=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"loadSiblings",{get:function(){return this.tileset.loadSiblings},set:function(yn){this.tileset.loadSiblings=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"loadAll",{get:function(){return this.tileset.loadAll},set:function(yn){this.tileset.loadAll=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"maxScreenSpaceError",{get:function(){return this.tileset.maxScreenSpaceError},set:function(yn){this.tileset.maxScreenSpaceError=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"currentMaxScreenSpaceError",{get:function(){return this.tileset.currentMaxScreenSpaceError},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"trajectories",{get:function(){return this.tileset.trajectories},enumerable:!1,configurable:!0}),vn.prototype.localToEnu=function(yn){return yn.applyMatrix4(this.coordinateTransform.localToEnuMatrix)},vn.prototype.enuToLocal=function(yn){return yn.applyMatrix4(this.coordinateTransform.enuToLocalMatrix)},vn.prototype.localToEcef=function(yn){return yn.applyMatrix4(this.coordinateTransform.localToEcefMatrix)},vn.prototype.ecefToLocal=function(yn){return yn.applyMatrix4(this.coordinateTransform.ecefToLocalMatrix)},vn.prototype.localToLla=function(yn){return Sl(this.localToEcef(yn))},vn.prototype.llaToLocal=function(yn){return this.ecefToLocal(Vv(yn))},vn.prototype.worldToEnu=function(yn){return this.localToEnu(this.worldToLocal(yn))},vn.prototype.enuToWorld=function(yn){return this.localToWorld(this.enuToLocal(yn))},vn.prototype.worldToEcef=function(yn){return this.localToEcef(this.worldToLocal(yn))},vn.prototype.ecefToWorld=function(yn){return this.localToWorld(this.ecefToLocal(yn))},vn.prototype.worldToLla=function(yn){return this.localToLla(this.worldToLocal(yn))},vn.prototype.llaToWorld=function(yn){return this.localToWorld(this.llaToLocal(yn))},vn.prototype.loadContent=function(yn){var Rn=this;return Pv(yn,{light:this.light,fetcher:this.fetcher,search:this.search,renderer:this.renderer}).then(function(Bn){yn.type==="SCENEGRAPH"&&(Rn.disposed||!yn.content?O0(yn):yn.content.data&&Rn.boundingBox.expandByObject(yn.content.data.object))})},vn.prototype.unloadContent=function(yn){return O0(yn),Promise.resolve()},vn.prototype.loadAllTilesets=function(){var yn=this,Rn=function(Bn){var Co=[];return yn.tileset.root.traverse(function(Po){var To;Po.type==="TILESET"&&((To=Po.content)===null||To===void 0?void 0:To.loadState)!=="READY"&&Co.push(Po)}),Promise.all(Co.map(function(Po){return yn.loadContent(Po).then(function(){return Rn()})})).then(function(){})};return Rn(this.tileset.root)},vn.prototype.loadTrajectory=function(yn){var Rn=this;return kv(yn,{fetcher:this.fetcher,search:this.search,renderer:this.renderer}).then(function(Bn){Rn.disposed&&bs(Bn)})},vn.prototype.unloadTrajectory=function(yn){return bs(yn),Promise.resolve()},vn.prototype.intersectRaycaster=function(yn,Rn,Bn){var Co=this;Rn===void 0&&(Rn=!0),Bn===void 0&&(Bn=[]);for(var Po=[this.tileset.root],To=this.tileset.transform,Io=this.tileset.transformIsIdentity,$l,Wl=[];$l=Po.pop();){var Xl=void 0;if($l.boundingVolume){var Yl=Io?$l.boundingVolume:$l.boundingVolume.clone().applyMatrix4(To);Xl=Yl.intersectRay(yn.ray,yn.far)}else Xl=!0;if(Xl){for(var Zl=0,ey=$l.children.length;Zl<ey;Zl++)Po.push($l.children[Zl]);$l.selected&&$l.content&&$l.content.data&&$l.content.data.object.visible&&$l.content.data.object.intersectRaycaster(yn,!1,Wl)}}return this.model.shownFloorIndex>=0&&(Wl=Wl.filter(function(Rm){return Rm.floor===Co.model.shownFloorIndex})),Rn&&Wl.sort(function(Rm,ry){return Rm.distance-ry.distance}),Wl.map(function(Rm){Rm.model=Co.model,Rm.viewLayer=Co.viewLayer}),Bn.push.apply(Bn,Wl),Bn},vn.prototype.cloneSkipBackfaceObject=function(yn){var Rn;yn instanceof Mesh?Rn=new Mesh(yn.geometry,Array.isArray(yn.material)?yn.material.map(function(To){return To.transparent?Ss:ws}):yn.material&&yn.material.transparent?Ss:ws):yn instanceof Group$1?Rn=new Group$1:Rn=new Object3D,Rn.copy(yn,!1);for(var Bn=0,Co=yn.children;Bn<Co.length;Bn++){var Po=Co[Bn];Rn.add(this.cloneSkipBackfaceObject(Po))}return Rn},vn.prototype.update=function(yn,Rn,Bn){var Co,Po,To,Io=this,$l,Wl,Xl;this.renderObjects.length=0,this.backfaceObjects.length=0,this.debugObjects.length=0,this.tileObjects.length=0,this.renderer=yn,this.updateMatrixWorld(!0),this.tileset.transform.equals(this.matrixWorld)||this.tileset.transform.copy(this.matrixWorld),this.tileset.cache.reset();var Yl=this.tileset.frameNumber+1,Zl=this.maxLevelOfDetail;Zl=Math.max(Zl,0);var ey=Math.min(this.minLevelOfDetail,Zl);(!this.visible||!this.loaded||!this.modelsLoaded)&&(Zl=Math.max(ey,0));var Rm=this.minGeometricError,ry=this.maxGeometricError;if(ry=Math.max(Rm,ry),Bn==="Panorama"||Bn==="VRPanorama"||Bn==="XRPanorama"){var _g=this.model.getMaterial().modelAlpha;_g<.1&&(Rm=this.panoramaMinGeometricError)}var ty={time:Ae$3(),camera:{type:Rn.type,position:new Vector3().copy(Rn.position),direction:Rn.getDirection(new Vector3),up:new Vector3().copy(Rn.up).applyQuaternion(Rn.quaternion),projectionMatrix:Rn.projectionMatrix.clone(),visible:Rn.visible,refine:Rn.refineModel},minLevelOfDetail:ey,maxLevelOfDetail:Zl,minGeometricError:Rm,maxGeometricError:ry,height:Rn.resolution.height,pixelRatio:Rn.pixelRatio,frameNumber:Yl,sseDenominator:2*Math.tan(.5*Rn.fov/180*Math.PI),cullingVolume:new hi().setFromCamera(Rn)},ny=this.cacheCameras.map(function(Ey){return Ey.updateProjectionMatrix(),O$n(O$n({},ty),{camera:{type:Rn.type,position:new Vector3().copy(Ey.position),direction:Ey.getWorldDirection(new Vector3),up:new Vector3().copy(Ey.up),projectionMatrix:Ey.projectionMatrix.clone(),visible:Ey.visible,refine:!0},cullingVolume:new hi().setFromCamera(Ey)})});if(this.needsRefined&&this.tileset.update(ty,ny),this.refined=!0,this.refineProgress[0]=0,this.refineProgress[1]=0,this.tileset.needsRefinedTiles.forEach(function(Ey){if(Io.refineProgress[1]++,Ey.content){var Iy=Ey.content.loadState;if(Iy==="UNLOADED"||Iy==="LOADING"){Io.refined=!1;return}}Io.refineProgress[0]++}),this.loaded===!1&&this.needsRefined){this.loaded=!0;var iy=!1;this.tileset.needsRefinedTiles.forEach(function(Ey){if(Io.loaded!==!1&&Ey.content){if(iy=!0,Io.tileset.skipLevelOfDetail){if(Ey.state.finalResolution){var Iy=Ey.state.ancestorWithContentAvailable,zy=Iy&&Iy.content?Iy.content:Ey.content,Uy=zy.loadState;(Uy==="UNLOADED"||Uy==="LOADING")&&(Io.loaded=!1)}}else if(Ey.state.visible&&Ey.levelOfContent<=0){var Uy=Ey.content.loadState;(Uy==="UNLOADED"||Uy==="LOADING")&&(Io.loaded=!1)}}}),iy&&this.tileset.selectedTiles.length===0&&(this.loaded=!1),this.loaded===!0&&(this.refined=!1,this.refineProgress[1]++)}this.remove.apply(this,this.children),this.tileset.skipLevelOfDetail||this.tileset.selectedTiles.sort(function(Ey,Iy){return Ey.floor!==Iy.floor?Ey.floor-Iy.floor:Ey.levelOfContent!==Iy.levelOfContent?Iy.levelOfContent-Ey.levelOfContent:Ey.state.distanceToCamera!==Iy.state.distanceToCamera?Ey.state.distanceToCamera-Iy.state.distanceToCamera:Ey.state.centerZDepth-Iy.state.centerZDepth}),this.debug==="root-bounding-volume"&&this.tileset.root.boundingVolumeDebugObject&&this.debugObjects.push(this.tileset.root.boundingVolumeDebugObject);for(var oy=0,ay=this.tileset.selectedTiles;oy<ay.length;oy++){var uy=ay[oy];this.debug==="selected-bounding-volume"&&uy.boundingVolumeDebugObject&&this.debugObjects.push(uy.boundingVolumeDebugObject);var hy=(Wl=($l=uy.content)===null||$l===void 0?void 0:$l.data)===null||Wl===void 0?void 0:Wl.object;if(hy){if(hy.update(yn,Rn,this.model,uy),this.tileset.hasMixedContent&&this.tileset.skipLevelOfDetail){if(!uy.state.finalResolution){var my=this.cloneSkipBackfaceObject(hy);this.backfaceObjects.push(my)}for(var ly=uy.state.selectionDepth,sy=yr$1.TILE_MASK|ly<<yr$1.SKIP_LOD_BIT_SHIFT,cy=GreaterEqualStencilFunc,fy=yr$1.SKIP_LOD_MASK,vy=ReplaceStencilOp,dy=yr$1.TILE_MASK|yr$1.SKIP_LOD_MASK,Ay=0,gy=hy.materials;Ay<gy.length;Ay++){var wy=gy[Ay];wy.stencilWrite=!0,wy.stencilRef=sy,wy.stencilFunc=cy,wy.stencilFuncMask=fy,wy.stencilZPass=vy,wy.stencilWriteMask=dy}}else for(var Cy=0,My=hy.materials;Cy<My.length;Cy++){var wy=My[Cy];wy.stencilWrite=!1,wy.stencilRef=yr$1.TILE_MASK,wy.stencilFunc=AlwaysStencilFunc,wy.stencilFuncMask=yr$1.TILE_MASK,wy.stencilZPass=ReplaceStencilOp,wy.stencilWriteMask=yr$1.TILE_MASK}this.tileObjects.push(hy)}}this.tileset.skipLevelOfDetail&&this.backfaceObjects.length&&(Co=this.renderObjects).push.apply(Co,this.backfaceObjects),this.tileObjects.length&&(Po=this.renderObjects).push.apply(Po,this.tileObjects),this.tileset.skipLevelOfDetail&&this.renderObjects.push(this.clearStencilObject);for(var Py=0,Dy=this.tileset.selectedTrajectories;Py<Dy.length;Py++){var qy=Dy[Py],Xy=(Xl=qy.content.data)===null||Xl===void 0?void 0:Xl.object;Xy&&(Xy.update(yn,Rn,this.model),this.renderObjects.push(Xy))}this.debug&&(To=this.renderObjects).push.apply(To,this.debugObjects);for(var $y=this.modelIndex*1e4,xy=function(Ey){var Iy=Ry.renderObjects[Ey],zy=Ey+$y;Iy.traverse(function(Uy){(Uy instanceof Mesh||Uy instanceof Line||Uy instanceof Points)&&(Uy.renderOrder=zy)}),Ry.add(Iy)},Ry=this,Ly=0;Ly<this.renderObjects.length;Ly++)xy(Ly);var ky=this.getRenderHash();this.lastRenderHash!==ky&&(this.needsRender=!0,this.lastRenderHash=ky)},vn.prototype.dispose=function(){this.disposed=!0,this.viewLayer=void 0,this.tileset.reset(),this.remove.apply(this,this.children),this.refineProgress[0]=0,this.refineProgress[1]=0,this.refined=!1,this.loaded=!1},vn.DEFAULT_PANORAMA_MIN_GEOMETRIC_ERROR=1,vn.DEFAULT_MIN_LEVEL_OF_DETAIL=0,vn.DEFAULT_MAX_LEVEL_OF_DETAIL=20,vn.DEFAULT_MIN_GEOMETRIC_ERROR=0,vn.DEFAULT_MAX_GEOMETRIC_ERROR=1e4,vn.DEFAULT_MAX_MEMORY_USAGE=16,vn.DEFAULT_MAX_SCREEN_SPACE_ERROR=tn.DEFAULT_MAX_SCREEN_SPACE_ERROR,vn.DEFAULT_SKIP_LEVEL_OF_DETAIL=tn.DEFAULT_SKIP_LEVEL_OF_DETAIL,vn.DEFAULT_MOST_DETAIL=tn.DEFAULT_MOST_DETAIL,vn.DEFAULT_LOAD_SIBLINGS=tn.DEFAULT_LOAD_SIBLINGS,vn.DEFAULT_LOAD_ALL=tn.DEFAULT_LOAD_ALL,vn.DEFAULT_MAX_REQUESTS=tn.DEFAULT_MAX_REQUESTS,vn.DEFAULT_REQUEST_ORDER=tn.DEFAULT_REQUEST_ORDER,vn}(Object3D);function Uv(cr){return-((cr-.25)*360+90)/180*Math.PI}function z0(cr,vn){if(cr===vn)return!0;if(cr&&vn&&typeof cr=="object"&&typeof vn=="object"){if(cr.constructor!==vn.constructor)return!1;var yn,Rn,Bn;if(Array.isArray(cr)){if(yn=cr.length,yn!=vn.length)return!1;for(Rn=yn;Rn--!==0;)if(!z0(cr[Rn],vn[Rn]))return!1;return!0}if(cr.constructor===RegExp)return cr.source===vn.source&&cr.flags===vn.flags;if(cr.valueOf!==Object.prototype.valueOf)return cr.valueOf()===vn.valueOf();if(cr.toString!==Object.prototype.toString)return cr.toString()===vn.toString();if(Bn=Object.keys(cr),yn=Bn.length,yn!==Object.keys(vn).length)return!1;for(Rn=yn;Rn--!==0;)if(!Object.prototype.hasOwnProperty.call(vn,Bn[Rn]))return!1;for(Rn=yn;Rn--!==0;){var Co=Bn[Rn];if(!z0(cr[Co],vn[Co]))return!1}return!0}return cr!==cr&&vn!==vn}function vr$1(cr){return typeof cr=="number"}function un(){return((1+Math.random())*65536|0).toString(16).substring(1)}function Lt$1(){return(un()+un()+"-"+un()+"-4"+un().substr(0,3)+"-"+un()+"-"+un()+un()+un()).toLowerCase()}var Ms=function(){return new Error("Invalid input.")},Es=function(){return new Error("Invalid certificate.")},Cs=function(){return new Error("Invalid signature.")},Qv=function(cr){return new Error("date(".concat(cr.toString(),") expired."))},Hv=function(cr){return new Error("host(".concat(JSON.stringify(cr),") is not allowed."))};function Gv(cr,vn){for(var yn={},Rn=0,Bn=Object.keys(cr);Rn<Bn.length;Rn++){var Co=Bn[Rn];vn.indexOf(Co)===-1&&(yn[Co]=cr[Co])}return yn}function ui$1(cr,vn){vn===void 0&&(vn=!1);var yn=typeof cr;if(yn==="string")return JSON.stringify(cr);if(cr===!0)return"true";if(cr===!1)return"false";if(cr===null)return"null";if(cr instanceof Array){for(var Rn="[",Bn=cr.length-1,Co=0;Co<Bn;Co++)Rn+=ui$1(cr[Co],!1)+",";return Bn>-1&&(Rn+=ui$1(cr[Co],!1)),Rn+"]"}if(cr instanceof Object){if(typeof cr.toJSON=="function")return ui$1(cr.toJSON(),vn);for(var Po=Object.keys(cr).sort(),To=Po.length,Rn="",Co=0;Co<To;){var Io=Po[Co],$l=ui$1(cr[Io],!0);$l!==void 0&&(Co&&Rn!==""&&(Rn+=","),Rn+=JSON.stringify(Io)+":"+$l),Co++}return"{"+Rn+"}"}switch(yn){case"function":case"undefined":return vn?void 0:null;case"number":return 0;default:return isFinite(cr)?cr:null}}function _v(cr){return String(ui$1(cr,!1))}function Ml(cr){var vn,yn,Rn;if(Array.isArray(cr)){var Bn=void 0,Co,Po;if(cr.length<=0)return Ms();for(var To=function(oy){var ay=Ml(cr[oy]);if(ay instanceof Error)return{value:ay};if(!Bn)Bn=ay.issuer;else if(Bn!==ay.issuer)return{value:Es()};Co?ay.expire.getTime()<Co.getTime()&&(Co=ay.expire):Co=ay.expire,Po?Po=Po.filter(function(uy){return ay.allowHosts.indexOf(uy)!==-1}):Po=ay.allowHosts},Io=0;Io<cr.length;Io++){var $l=To(Io);if(typeof $l=="object")return $l.value}return dn({issuer:Bn,expire:Co,allowHosts:Po})}var Wl=JSON.parse(cr),Xl=typeof location!="undefined"?location.hostname:"",Yl=Date.now();if(typeof Wl!="object")return Ms();var Zl=new Date(typeof Wl.expire_at=="string"&&/^\d+$/.test(Wl.expire_at)?Number(Wl.expire_at):Wl.expire_at),ey=Array.isArray(Wl.allow_hosts)?Wl.allow_hosts:[];if(Xl.length===0||Tn(Xl)||kr$1.filter(function(oy){return mn(oy,Xl)}).length>0){var Rm=String((vn=Wl.certificate)!==null&&vn!==void 0?vn:"");if(Rm){var ry=new Ze$1;return ry.readCertPEM(Rm),dn({issuer:ry.getSubjectString(),expire:Zl,allowHosts:ey})}return dn({issuer:"none",expire:Zl,allowHosts:ey})}var _g=String((yn=Wl.certificate)!==null&&yn!==void 0?yn:"");if(!_g)return Es();var ty=new Ze$1;ty.readCertPEM(_g);var ny=String((Rn=Wl._signature)!==null&&Rn!==void 0?Rn:"");if(!ny)return Cs();var iy=_v(Gv(Wl,["_signature"]));return vf(iy,ny,ty)===!1?Cs():Yl<Zl.getTime()?ey.filter(function(oy){return mn(oy,Xl)}).length===0?Hv(Xl):dn({issuer:ty.getSubjectString(),expire:Zl,allowHosts:ey}):Qv(Zl)}var Is=new Matrix4,ki=new WeakMap,ii=new Set,El=function(){function cr(vn,yn){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={work:this},this.observers=[],this.issuer="none",this.raw={works:[""],options:""},this.transform=new Matrix4;{var Rn=this;this.options={get transform(){return Rn.transform},set transform(Co){Rn.transform.copy(Co)}}}if(vn!==null)if("up"in vn&&typeof vn.up=="string"&&"down"in vn&&typeof vn.down=="string"&&"right"in vn&&typeof vn.right=="string"&&"left"in vn&&typeof vn.left=="string"&&"front"in vn&&typeof vn.front=="string"&&"back"in vn&&typeof vn.back=="string"&&"size"in vn&&typeof vn.size=="number")Xv(vn,this);else{var Bn=Kv(vn,yn,this);if(Bn instanceof Error)throw new Error("[PARSE FAILED]: "+Bn.message+`
Error work input:
`+JSON.stringify(vn))}else jv(vn,this)}return cr.prototype.toJSON=function(){return this.raw},cr.parse=na,cr}();function Ts(cr){return cr==null?"null":Array.isArray(cr)?"array":typeof cr=="object"?"dict":"value"}function V0(cr,vn){var yn=Ts(cr),Rn=Ts(vn);if(Rn==="null")return cr;if(Rn==="value")return vn;if(Rn!==yn)return JSON.parse(JSON.stringify(vn));if(Rn==="array")for(var Bn=0;Bn<vn.length;Bn++)cr[Bn]=V0(cr[Bn],vn[Bn]);else if(Rn==="dict")for(var Co in vn)cr[Co]=V0(cr[Co],vn[Co]);return cr}function co(cr,vn){return cr.indexOf(vn)===0}function fo(cr,vn,yn,Rn){var Bn,Co=vn;if(Rn.jsonp===!0){Co=vn.replace(/([\?\#].*)?$/i,"");var Po=zo("".concat(Co)).slice(0,7);Co="".concat(Co,".").concat(Po,".jsonp")}if(Rn.shortPath===!0){var To=Co.replace(cr,"").split("."),Io=(Bn=To.shift())!==null&&Bn!==void 0?Bn:"",$l=To.join(".");Co=ct$4(cr,zo(Io))+($l?"."+$l:"")}var Wl=Co.replace(cr,"");return Rn.baseURL&&(Co=ct$4(Rn.baseURL,Wl)),Rn.traverseResource&&Rn.traverseResource({origin:vn,absolute:Co,relative:Wl,type:yn}),Co}function ht$4(cr,vn,yn,Rn,Bn){var Co=yn;return Kr$1(yn)||(vn&&(vn=ct$4(vn,String(Rn))),Co=ct$4(vn,Co)),Kr$1(Co)||(Co=ct$4(cr,Co)),co(Co,cr)||console.warn("".concat(Co," is not start with base_url(").concat(cr,").")),fo(cr,Co,"panorama",Bn)}function ai(cr,vn,yn){var Rn=vn;return Kr$1(Rn)||(Rn=ct$4(cr,vn)),co(Rn,cr)||console.warn("".concat(Rn," is not start with base_url(").concat(cr,").")),fo(cr,Rn,"model",yn)}function ji(cr,vn,yn,Rn){var Bn=vn;return Kr$1(Bn)||(Bn=ct$4(yn,Bn)),Kr$1(Bn)||(Bn=ct$4(cr,Bn)),co(Bn,cr)||console.warn("".concat(Bn," is not start with base_url(").concat(cr,").")),fo(cr,Bn,"texture",Rn)}var va=function(cr){for(var vn=10;vn>=0;vn--){var yn=512*Math.pow(2,vn);if(yn<=cr)return vn}return null},Jv=function(cr){cr=cr.slice().sort(function(Po,To){return Po.level-To.level});for(var vn=[],yn=0,Rn=cr;yn<Rn.length;yn++){var Bn=Rn[yn];if(vn.length===0){vn.push(Bn);continue}var Co=vn[vn.length-1];if(Bn.level>Co.level){vn.push(Bn);continue}if(Bn.size>Co.size){vn[vn.length-1]=Bn;continue}}return vn};function Kv(cr,vn,yn){for(var Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy,oy,ay=JSON.stringify(vn),uy=[],hy=0,my=[].concat(cr);hy<my.length;hy++){var ly=my[hy];ly instanceof El?uy.push.apply(uy,ly.raw.works):typeof ly=="string"?uy.push(ly):uy.push(JSON.stringify(ly))}var sy=Ml(uy);if(sy instanceof Error)return sy;Array.isArray(vn.transform)?yn.transform.fromArray(vn.transform):vn.transform&&yn.transform.copy(vn.transform),cr=uy.map(function(Yy){return JSON.parse(Yy)}).reduce(function(Yy,Jy){return V0(Yy,Jy)}),Object.defineProperty(yn,"raw",{configurable:!1,get:function(){return{works:uy,options:ay}}});{var cy;if(vn.workCode&&(typeof vn.workCode=="string"?cy=vn.workCode:typeof vn.workCode=="function"&&(cy=vn.workCode(cr))),typeof cy=="undefined"&&(cy=String(cr.resource_code||cr.basic_code||cr.vr_code||cr.code||cr.project_id||cr.work_code||cr.workCode)),typeof cy=="undefined")return new Error("WorkCode never matched.");Object.defineProperty(yn,"workCode",{configurable:!1,get:function(){return cy}})}{var fy=String(cr.name);Object.defineProperty(yn,"name",{configurable:!1,get:function(){return fy}})}if(sy instanceof Error)return sy;Object.defineProperty(yn,"issuer",{configurable:!1,get:function(){return sy.issuer}}),Object.defineProperty(yn,"expire",{configurable:!1,get:function(){return sy.expire}}),Object.defineProperty(yn,"allowHosts",{configurable:!1,get:function(){return sy.allowHosts}});var vy=(Rn=cr.base_url)!==null&&Rn!==void 0?Rn:"";if(vy&&vy[vy.length-1]!=="/"&&(vy+="/"),sy instanceof Error)return sy;if(cr.model){var dy={work:yn,layers:[]},Ay;cr.model.file?Ay=ai(vy,cr.model.file,vn):cr.model.file_url&&(Ay=ai(vy,cr.model.file_url,vn)),Object.defineProperty(dy,"file",{configurable:!1,get:function(){return Ay}});var gy;cr.model.textureBase?gy=ji(vy,"",cr.model.textureBase,vn):cr.model.material_base_url?gy=ji(vy,"",cr.model.material_base_url,vn):dy.file&&(gy=dy.file.split("/").slice(0,-1).join("/").replace("/model/","/materials/")),Object.defineProperty(dy,"textureBase",{configurable:!1,get:function(){return gy}});var wy;Array.isArray(cr.model.textures)?(wy=cr.model.textures.map(function(Yy){var Jy,Hy;return ji(vy,Yy,(Hy=(Jy=cr.model.textureBase)!==null&&Jy!==void 0?Jy:cr.model.material_base_url)!==null&&Hy!==void 0?Hy:"",vn)}),Object.freeze(wy)):Array.isArray(cr.model.material_textures)&&(wy=cr.model.material_textures.map(function(Yy){var Jy,Hy;return ji(vy,Yy,(Hy=(Jy=cr.model.textureBase)!==null&&Jy!==void 0?Jy:cr.model.material_base_url)!==null&&Hy!==void 0?Hy:"",vn)}),Object.freeze(wy)),Object.defineProperty(dy,"textures",{configurable:!1,get:function(){return wy}});var Cy=[];if(Array.isArray(cr.model.tiles))for(var My=0,Py=cr.model.tiles;My<Py.length;My++){var Dy=Py[My];Dy&&(Dy.tileset||Dy.tileset_url)&&Cy.push(Object.freeze({type:(Bn=Dy.type)!==null&&Bn!==void 0?Bn:"mesh",name:(Co=Dy.name)!==null&&Co!==void 0?Co:"",upAxis:(To=(Po=Dy.upAxis)!==null&&Po!==void 0?Po:Dy.up_axis)!==null&&To!==void 0?To:"-Y",tileset:ai(vy,Dy.tileset||Dy.tileset_url,vn)}))}else cr.model.tiles&&(cr.model.tiles.tileset||cr.model.tiles.tileset_url)&&Cy.push(Object.freeze({type:(Io=cr.model.tiles.type)!==null&&Io!==void 0?Io:"mesh",name:($l=cr.model.tiles.name)!==null&&$l!==void 0?$l:"lod",upAxis:(Xl=(Wl=cr.model.tiles.upAxis)!==null&&Wl!==void 0?Wl:cr.model.tiles.up_axis)!==null&&Xl!==void 0?Xl:"-Y",tileset:ai(vy,cr.model.tiles.tileset||cr.model.tiles.tileset_url,vn)}));if(Array.isArray(cr.model.layers))for(var qy=0,Xy=cr.model.layers;qy<Xy.length;qy++){var $y=Xy[qy];$y&&($y.tileset||$y.tileset_url)&&Cy.push(Object.freeze({type:(Yl=$y.type)!==null&&Yl!==void 0?Yl:"mesh",name:(Zl=$y.name)!==null&&Zl!==void 0?Zl:"",upAxis:(ey=$y.upAxis)!==null&&ey!==void 0?ey:$y.up_axis,tileset:ai(vy,$y.tileset||$y.tileset_url,vn)}))}Object.freeze(Cy),Object.defineProperty(dy,"layers",{configurable:!1,get:function(){return Cy}}),Object.defineProperty(yn,"model",{configurable:!1,get:function(){if(dy.file||dy.layers.length)return dy}})}if(sy instanceof Error)return sy;var xy=new Set,Ry=new Set;{var Ly=[];if(cr.observers&&Array.isArray(cr.observers)){var ky=[];cr.panorama&&(Array.isArray(cr.panorama)?ky=cr.panorama:Array.isArray(cr.panorama.list)?ky=cr.panorama.list:Array.isArray(cr.panorama.info)&&(ky=cr.panorama.info));for(var Ey=function(Yy){var Jy={},Hy=cr.observers[Yy];if(!Hy)return"break";var i1=ky[Yy];if(!i1)return"break";Hy=Object.assign({},Hy,i1,{active:Hy.active!==!1&&i1.active!==!1}),Object.defineProperty(Jy,"work",{configurable:!1,get:function(){return yn}}),Object.defineProperty(Jy,"index",{configurable:!1,get:function(){return Yy}}),Ry.add(Yy),Object.defineProperty(Jy,"panoIndex",{configurable:!1,get:function(){return Yy}});var u1=_e$3({workCode:yn.workCode,panoIndex:Yy});xy.add(u1),Object.defineProperty(Jy,"panoId",{configurable:!1,get:function(){return u1}});var p1=Object.freeze({workCode:yn.workCode,panoIndex:Yy});Object.defineProperty(Jy,"pano",{configurable:!1,get:function(){return p1}});var g1=Hy.active!==!1;Object.defineProperty(Jy,"active",{configurable:!1,get:function(){return g1}});var v1=Hy.loadable===!0;Object.defineProperty(Jy,"loadable",{configurable:!1,get:function(){return v1}});var h1=Hy.derived_id;Object.defineProperty(Jy,"derivedId",{configurable:!1,get:function(){return h1}});var l1=Hy.derived_id_str;Object.defineProperty(Jy,"derivedIdStr",{configurable:!1,get:function(){return l1}});var o1=(iy=(ty=(ry=(Rm=cr.panorama)===null||Rm===void 0?void 0:Rm.pano_high_cube_base_url)!==null&&ry!==void 0?ry:(_g=cr.panorama)===null||_g===void 0?void 0:_g.pano_cube_base_url)!==null&&ty!==void 0?ty:(ny=cr.panorama)===null||ny===void 0?void 0:ny.base_url)!==null&&iy!==void 0?iy:"",t1={up:ht$4(vy,o1,Hy.images?Hy.images.up:Hy.up,Yy,vn),down:ht$4(vy,o1,Hy.images?Hy.images.down:Hy.down,Yy,vn),right:ht$4(vy,o1,Hy.images?Hy.images.right:Hy.right,Yy,vn),left:ht$4(vy,o1,Hy.images?Hy.images.left:Hy.left,Yy,vn),front:ht$4(vy,o1,Hy.images?Hy.images.front:Hy.front,Yy,vn),back:ht$4(vy,o1,Hy.images?Hy.images.back:Hy.back,Yy,vn)};if(Hy.size_list)t1.sizeList=Hy.size_list.slice();else{var Wy=yi(t1.up);if(Wy&&(t1.sizeList=[Wy],Hy.tiles))for(var f1=Hy.tiles.slice().sort(function(F1,z1){return F1-z1}).map(function(F1){return 512*Math.pow(2,F1)}),m1=0,w1=f1;m1<w1.length;m1++){var c1=w1[m1];c1>Wy&&t1.sizeList.push(c1)}}var M1=Hy.images?Hy.images.luminance:Hy.luminance;M1&&(t1.luminance=Object.freeze({up:ht$4(vy,o1,M1.up,Yy,vn),down:ht$4(vy,o1,M1.down,Yy,vn),right:ht$4(vy,o1,M1.right,Yy,vn),left:ht$4(vy,o1,M1.left,Yy,vn),front:ht$4(vy,o1,M1.front,Yy,vn),back:ht$4(vy,o1,M1.back,Yy,vn)}));var L1=void 0;if(Hy.images)L1=Hy.images.tiles;else if(Array.isArray(Hy.size_list)){var B1=Hy.size_list.slice().sort(function(F1,z1){return F1-z1});if(B1[0]){var D1=va(B1[0]);if(D1)for(var O1=D1-1;O1>=0;O1--)B1.unshift(512*Math.pow(2,O1));L1=B1}}else if(Array.isArray(Hy.tiles)&&(L1=Hy.tiles.slice(),typeof L1[0]=="number")){for(var j1=L1[0];--j1>=0;)L1.unshift(j1);L1=L1.sort(function(F1,z1){return F1-z1}).map(function(F1){return 512*Math.pow(2,F1)})}if(L1){for(var k1=[],q1=0,_b=L1;q1<_b.length;q1++){var c1=_b[q1];if(typeof c1=="number"){var Q1=va(c1);if(typeof Q1!="number")continue;var Y1=yi(t1.front);if(!Y1)continue;if(c1>Y1){var jy=ar$1(t1.up,c1),r1=ar$1(t1.down,c1),n1=ar$1(t1.right,c1),a1=ar$1(t1.left,c1),y1=ar$1(t1.front,c1),_1=ar$1(t1.back,c1);k1.push(Object.freeze({level:Q1,size:c1,scale:1,up:jy,down:r1,right:n1,left:a1,front:y1,back:_1}))}else{var jy=t1.up,r1=t1.down,n1=t1.right,a1=t1.left,y1=t1.front,_1=t1.back;k1.push(Object.freeze({level:Q1,size:Y1,scale:c1/Y1,up:jy,down:r1,right:n1,left:a1,front:y1,back:_1}))}}else{var Q1=c1.level;if(typeof Q1!="number")continue;var Wy=c1.size;if(typeof Wy!="number")continue;var jy=ht$4(vy,o1,c1.up,Yy,vn),r1=ht$4(vy,o1,c1.down,Yy,vn),n1=ht$4(vy,o1,c1.right,Yy,vn),a1=ht$4(vy,o1,c1.left,Yy,vn),y1=ht$4(vy,o1,c1.front,Yy,vn),_1=ht$4(vy,o1,c1.back,Yy,vn);k1.push(Object.freeze({level:Q1,size:Wy,scale:(oy=c1.scale)!==null&&oy!==void 0?oy:1,up:jy,down:r1,right:n1,left:a1,front:y1,back:_1}))}}k1=Jv(k1),Object.freeze(k1),Object.defineProperty(t1,"tiles",{configurable:!1,get:function(){return k1}})}Object.freeze(t1),Object.defineProperty(Jy,"images",{configurable:!1,get:function(){return t1}});var E1=new Vector3;if(Hy.position instanceof Vector3)E1.copy(Hy.position);else if(Array.isArray(Hy.position))E1.fromArray(Hy.position);else return"break";Object.freeze(E1),Object.defineProperty(Jy,"position",{configurable:!1,get:function(){return E1}});var b1=new Vector3;if(Hy.standingPosition instanceof Vector3)b1.copy(Hy.standingPosition);else if(Array.isArray(Hy.standingPosition))b1.fromArray(Hy.standingPosition);else if(Hy.standing_position instanceof Vector3)b1.copy(Hy.standing_position);else if(Array.isArray(Hy.standing_position))b1.fromArray(Hy.standing_position);else return"break";Object.freeze(b1),Object.defineProperty(Jy,"standingPosition",{configurable:!1,get:function(){return b1}});var S1=new Quaternion;if(Hy.quaternion instanceof Quaternion)S1.copy(Hy.quaternion);else if(Array.isArray(Hy.quaternion))S1.fromArray(Hy.quaternion);else if(Hy.quaternion){var x1=Hy.quaternion,W1=x1.x,N1=x1.y,R1=x1.z,$1=x1.w;S1.set(W1,N1,R1,$1)}else return"break";Object.freeze(S1),Object.defineProperty(Jy,"quaternion",{configurable:!1,get:function(){return S1}});var C1=0;vr$1(Hy.floorIndex)?C1=Hy.floorIndex:vr$1(Hy.floor_index)?C1=Hy.floor_index:vr$1(Hy.floor)&&(C1=Hy.floor),Object.defineProperty(Jy,"floorIndex",{configurable:!1,get:function(){return C1}});var T1;Hy.video&&(T1={},typeof Hy.video.source=="string"&&(T1.source=Hy.video.source),Hy.video.matrix instanceof Matrix4?T1.matrix=Hy.video.matrix.clone():Array.isArray(Hy.video.matrix)&&(T1.matrix=new Matrix4().fromArray(Hy.video.matrix)),Hy.video.size instanceof Vector2?T1.size=Hy.video.size.clone():Array.isArray(Hy.video.size)&&(T1.size=new Vector2().fromArray(Hy.video.size)),T1.source&&T1.matrix&&T1.size&&(Jy.video=T1)),Object.freeze(T1),Object.defineProperty(Jy,"video",{configurable:!1,get:function(){return T1}}),Array.isArray(Hy.accessibleNodes)?(Jy.accessibleNodes=Hy.accessibleNodes.slice(),Jy.accessibleIds=Hy.accessibleNodes.map(function(F1){return _e$3({workCode:yn.workCode,panoIndex:F1})})):Array.isArray(Hy.accessible_nodes)&&(Jy.accessibleNodes=Hy.accessible_nodes.slice(),Jy.accessibleIds=Hy.accessible_nodes.map(function(F1){return _e$3({workCode:yn.workCode,panoIndex:F1})})),Array.isArray(Hy.visibleNodes)?(Jy.visibleNodes=Hy.visibleNodes.slice(),Jy.visibleIds=Hy.visibleNodes.map(function(F1){return _e$3({workCode:yn.workCode,panoIndex:F1})})):Array.isArray(Hy.visible_nodes)&&(Jy.visibleNodes=Hy.visible_nodes.slice(),Jy.visibleIds=Hy.visible_nodes.map(function(F1){return _e$3({workCode:yn.workCode,panoIndex:F1})})),Ly[Yy]=Jy},Iy=0;Iy<cr.observers.length;Iy++){var zy=Ey(Iy);if(zy==="break")break}}for(var Uy=function(Yy){if(Yy.accessibleIds){var Jy=Yy.accessibleIds.filter(function(o1){return xy.has(o1)});Object.freeze(Jy),Object.defineProperty(Yy,"accessibleIds",{configurable:!1,get:function(){return Jy}})}else{for(var Hy=[],i1=0;i1<Ly.length;i1++)Ly[i1]!==Yy&&(Math.abs(Ly[i1].position.y-Yy.position.y)>3||Ly[i1].position.distanceTo(Yy.position)>10||Hy.push(Ly[i1].panoId));Object.freeze(Hy),Object.defineProperty(Yy,"accessibleIds",{configurable:!1,get:function(){return Hy}})}if(Yy.accessibleNodes){var u1=Yy.accessibleNodes.filter(function(o1){return Ry.has(o1)});Object.freeze(u1),Object.defineProperty(Yy,"accessibleNodes",{configurable:!1,get:function(){return u1}})}else{for(var p1=[],i1=0;i1<Ly.length;i1++)Ly[i1]!==Yy&&(Math.abs(Ly[i1].position.y-Yy.position.y)>3||Ly[i1].position.distanceTo(Yy.position)>10||p1.push(Ly[i1].panoIndex));Object.freeze(p1),Object.defineProperty(Yy,"accessibleNodes",{configurable:!1,get:function(){return p1}})}if(Yy.visibleIds){var g1=Yy.visibleIds.filter(function(o1){return xy.has(o1)});Object.freeze(g1),Object.defineProperty(Yy,"visibleIds",{configurable:!1,get:function(){return g1}})}else{var v1=Yy.accessibleIds.slice();Object.freeze(v1),Object.defineProperty(Yy,"visibleIds",{configurable:!1,get:function(){return v1}})}if(Yy.visibleNodes){var h1=Yy.visibleNodes.filter(function(o1){return Ry.has(o1)});Object.freeze(h1),Object.defineProperty(Yy,"visibleNodes",{configurable:!1,get:function(){return h1}})}else{var l1=Yy.accessibleNodes.slice();Object.freeze(l1),Object.defineProperty(Yy,"visibleNodes",{configurable:!1,get:function(){return l1}})}},Qy=0,Gy=Ly;Qy<Gy.length;Qy++){var Zy=Gy[Qy];Uy(Zy)}Object.freeze(Ly),Object.defineProperty(yn,"observers",{configurable:!1,get:function(){return Ly}})}if(sy instanceof Error)return sy;if(cr.initial){if((cr.initial.mode==="Panorama"&&yn.observers.length===0||cr.initial.mode==="Floorplan"||cr.initial.mode==="Topview"||cr.initial.mode==="Model"||cr.initial.mode==="Mapview"||cr.initial.mode==="DepthPanorama")&&(yn.initial.mode=cr.initial.mode),vr$1(cr.initial.latitude)&&(yn.initial.latitude=cr.initial.latitude),vr$1(cr.initial.longitude)?yn.initial.longitude=cr.initial.longitude:vr$1(cr.initial.heading)&&(yn.initial.longitude=Uv(cr.initial.heading)),vr$1(cr.initial.fov)&&(yn.initial.fov=cr.initial.fov),yn.observers.length>0){var Ty=void 0;vr$1(cr.initial.panoIndex)?Ty=cr.initial.panoIndex:vr$1(cr.initial.pano_index)?Ty=cr.initial.pano_index:vr$1(cr.initial.pano)&&(Ty=cr.initial.pano),typeof Ty=="number"&&(Ty=pe$4(Ty,0,yn.observers.length-1),yn.initial.panoIndex=Ty)}if(vr$1(cr.initial.distance)&&(yn.initial.distance=cr.initial.distance),Array.isArray(cr.initial.offset)){var Vy=[0,0,0].map(function(Yy,Jy){var Hy=Number(cr.initial.offset[Jy]);return isNaN(Hy)||!isFinite(Hy)?0:Hy});yn.initial.offset=new Vector3().fromArray(Vy)}else typeof cr.initial.offset=="object"&&typeof cr.initial.offset.x=="number"&&typeof cr.initial.offset.y=="number"&&typeof cr.initial.offset.z=="number"&&(yn.initial.offset=new Vector3(cr.initial.offset.x,cr.initial.offset.y,cr.initial.offset.z));!yn.initial.mode&&typeof yn.initial.panoIndex=="number"&&(yn.initial.mode="Panorama")}return sy instanceof Error?sy:(ki.set(yn,{works:uy,options:ay}),yn)}function jv(cr,vn){return vn.issuer="null",dn(vn),ki.set(vn,{works:["null"],options:"{}"}),vn}function Xv(cr,vn){var yn;vn.issuer="null",vn.allowHosts=["*"],vn.workCode=(yn=cr.code)!==null&&yn!==void 0?yn:Lt$1();var Rn=[cr.size],Bn=[],Co=va(Rn[0]);if(Co)for(var Po=Co-1;Po>=0;Po--)Rn.unshift(512*Math.pow(2,Po));for(var To=0,Io=Rn;To<Io.length;To++){var $l=Io[To],Wl=va($l);Wl&&Bn.push({level:Wl,size:cr.size,scale:$l/cr.size,up:cr.up,down:cr.down,right:cr.right,left:cr.left,front:cr.front,back:cr.back})}var Xl={up:cr.up,down:cr.down,right:cr.right,left:cr.left,front:cr.front,back:cr.back,sizeList:Rn};Bn&&(Xl.tiles=Bn);var Yl={accessibleIds:[],accessibleNodes:[],active:!0,floorIndex:0,images:Xl,index:0,loadable:!1,pano:{workCode:vn.workCode,panoIndex:0},panoId:"".concat(vn.workCode,"[0]"),panoIndex:0,position:new Vector3(0,1.5,0),quaternion:new Quaternion(0,1,0,0),standingPosition:new Vector3(0,0,0),visibleIds:[],visibleNodes:[],work:vn};return vn.observers=[Yl],dn(vn),ki.set(vn,{works:[JSON.stringify(cr)],options:"{}"}),vn}function na(cr,vn){typeof cr=="string"&&cr.trim()[0]==="{"&&(cr=JSON.parse(cr));var yn=ki.get(cr);if(yn){if(vn&&!z0(JSON.parse(yn.options),vn))throw new Error("[PARSE FAILED]: work is parsed with different options.");return cr}else try{return new El(cr,vn!=null?vn:{})}catch(Rn){throw new Error("[PARSE FAILED]: "+Rn.message+`
Error work input:
`+JSON.stringify(cr))}}function D0(cr){for(var vn={},yn=[],Rn={},Bn=0,Co=cr;Bn<Co.length;Bn++){var Po=Co[Bn],To=vn[Po.workCode];To||(To=vn[Po.workCode]=new Matrix4().copy(Po.transform));for(var Io=0,$l=Po.observers;Io<$l.length;Io++){var Wl=$l[Io],Xl={isResolved:!0,active:Wl.active,accessibleIds:Wl.accessibleIds,visibleIds:Wl.visibleIds,accessibleNodes:Wl.accessibleNodes,visibleNodes:Wl.visibleNodes,floorIndex:Wl.floorIndex,images:Wl.images,index:Wl.index,panoIndex:Wl.panoIndex,loadable:Wl.loadable,panoId:Wl.panoId,pano:Wl.pano,work:Wl.work,derivedId:Wl.derivedId,video:Wl.video,position:new Vector3().copy(Wl.position).applyMatrix4(To),standingPosition:new Vector3().copy(Wl.standingPosition).applyMatrix4(To),quaternion:new Quaternion().setFromRotationMatrix(Is.makeRotationFromQuaternion(Wl.quaternion).premultiply(To))};Object.freeze(Xl),yn.push(Xl),Rn[Xl.panoId]=Xl}}Object.freeze(yn);for(var Yl=cr.slice(),Zl={},ey=0,Rm=Yl;ey<Rm.length;ey++){var Po=Rm[ey];Zl[Po.workCode]=Po}return Object.freeze(Object.assign(Yl,{get initial(){return Yl.length>0?Yl[0].initial:{work:{}}},get resolvedObservers(){return yn},getWork:function(ry){return Zl[ry]},getResolvedObserver:function(ry){var _g,ty;return zf(ry)?Rn[ry]:typeof ry=="number"?Rn[_e$3({workCode:(ty=(_g=cr[0])===null||_g===void 0?void 0:_g.workCode)!==null&&ty!==void 0?ty:"",panoIndex:ry})]:Rn[_e$3(ry)]},update:function(){for(var ry=0,_g=Yl;ry<_g.length;ry++){var ty=_g[ry],ny=ty.transform,iy=vn[ty.workCode];iy?iy.equals(ny)||(iy.copy(ny),ii.add(ty.workCode)):(vn[ty.workCode]=new Matrix4().copy(ny),ii.add(ty.workCode))}if(ii.size>0){for(var oy=0,ay=yn;oy<ay.length;oy++){var uy=ay[oy];if(ii.has(uy.work.workCode)){var hy=uy.work.observers[uy.index],my=uy.work.transform;uy.position.copy(hy.position).applyMatrix4(my),uy.standingPosition.copy(hy.standingPosition).applyMatrix4(my),uy.quaternion.setFromRotationMatrix(Is.makeRotationFromQuaternion(hy.quaternion).premultiply(my))}}ii.clear()}}}))}var Cl=new Map;function gt$4(cr){var vn=Cl.get(cr);if(vn)return vn;throw new Error("fetcher never registered.")}function Wv(cr,vn){return Cl.set(cr,vn)}var Ps={computeTangents:function(cr){var vn=cr.index,yn=cr.attributes;if(vn===null||yn.position===void 0||yn.normal===void 0||yn.uv===void 0){console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var Rn=vn.array,Bn=yn.position.array,Co=yn.normal.array,Po=yn.uv.array,To=Bn.length/3;yn.tangent===void 0&&cr.setAttribute("tangent",new BufferAttribute(new Float32Array(4*To),4));for(var Io=yn.tangent.array,$l=[],Wl=[],Xl=0;Xl<To;Xl++)$l[Xl]=new Vector3,Wl[Xl]=new Vector3;var Yl=new Vector3,Zl=new Vector3,ey=new Vector3,Rm=new Vector2,ry=new Vector2,_g=new Vector2,ty=new Vector3,ny=new Vector3;function iy(My,Py,Dy){Yl.fromArray(Bn,My*3),Zl.fromArray(Bn,Py*3),ey.fromArray(Bn,Dy*3),Rm.fromArray(Po,My*2),ry.fromArray(Po,Py*2),_g.fromArray(Po,Dy*2);var qy=Zl.x-Yl.x,Xy=ey.x-Yl.x,$y=Zl.y-Yl.y,xy=ey.y-Yl.y,Ry=Zl.z-Yl.z,Ly=ey.z-Yl.z,ky=ry.x-Rm.x,Ey=_g.x-Rm.x,Iy=ry.y-Rm.y,zy=_g.y-Rm.y,Uy=1/(ky*zy-Ey*Iy);ty.set((zy*qy-Iy*Xy)*Uy,(zy*$y-Iy*xy)*Uy,(zy*Ry-Iy*Ly)*Uy),ny.set((ky*Xy-Ey*qy)*Uy,(ky*xy-Ey*$y)*Uy,(ky*Ly-Ey*Ry)*Uy),$l[My].add(ty),$l[Py].add(ty),$l[Dy].add(ty),Wl[My].add(ny),Wl[Py].add(ny),Wl[Dy].add(ny)}var oy=cr.groups;oy.length===0&&(oy=[{start:0,count:Rn.length}]);for(var Xl=0,ay=oy.length;Xl<ay;++Xl)for(var uy=oy[Xl],hy=uy.start,my=uy.count,ly=hy,sy=hy+my;ly<sy;ly+=3)iy(Rn[ly+0],Rn[ly+1],Rn[ly+2]);var cy=new Vector3,fy=new Vector3,vy=new Vector3,dy=new Vector3,Ay,gy,wy;function Cy(My){vy.fromArray(Co,My*3),dy.copy(vy),gy=$l[My],cy.copy(gy),cy.sub(vy.multiplyScalar(vy.dot(gy))).normalize(),fy.crossVectors(dy,gy),wy=fy.dot(Wl[My]),Ay=wy<0?-1:1,Io[My*4]=cy.x,Io[My*4+1]=cy.y,Io[My*4+2]=cy.z,Io[My*4+3]=Ay}for(var Xl=0,ay=oy.length;Xl<ay;++Xl)for(var uy=oy[Xl],hy=uy.start,my=uy.count,ly=hy,sy=hy+my;ly<sy;ly+=3)Cy(Rn[ly+0]),Cy(Rn[ly+1]),Cy(Rn[ly+2])},mergeBufferGeometries:function(cr,vn){for(var yn=cr[0].index!==null,Rn=new Set(Object.keys(cr[0].attributes)),Bn=new Set(Object.keys(cr[0].morphAttributes)),Co={},Po={},To=new BufferGeometry,Io=0,$l=0;$l<cr.length;++$l){var Wl=cr[$l];if(yn!==(Wl.index!==null))return null;for(var Xl in Wl.attributes){if(!Rn.has(Xl))return null;Co[Xl]===void 0&&(Co[Xl]=[]),Co[Xl].push(Wl.attributes[Xl])}for(var Xl in Wl.morphAttributes){if(!Bn.has(Xl))return null;Po[Xl]===void 0&&(Po[Xl]=[]),Po[Xl].push(Wl.morphAttributes[Xl])}if(To.userData.mergedUserData=To.userData.mergedUserData||[],To.userData.mergedUserData.push(Wl.userData),vn){var Yl;if(yn)Yl=Wl.index.count;else if(Wl.attributes.position!==void 0)Yl=Wl.attributes.position.count;else return null;To.addGroup(Io,Yl,$l),Io+=Yl}}if(yn){for(var Zl=0,ey=[],$l=0;$l<cr.length;++$l){for(var Rm=cr[$l].index,ry=0;ry<Rm.count;++ry)ey.push(Rm.getX(ry)+Zl);Zl+=cr[$l].attributes.position.count}To.setIndex(ey)}for(var Xl in Co){var _g=this.mergeBufferAttributes(Co[Xl]);if(!_g)return null;To.setAttribute(Xl,_g)}for(var Xl in Po){var ty=Po[Xl][0].length;if(ty===0)break;To.morphAttributes=To.morphAttributes||{},To.morphAttributes[Xl]=[];for(var $l=0;$l<ty;++$l){for(var ny=[],ry=0;ry<Po[Xl].length;++ry)ny.push(Po[Xl][ry][$l]);var iy=this.mergeBufferAttributes(ny);if(!iy)return null;To.morphAttributes[Xl].push(iy)}}return To},mergeBufferAttributes:function(cr){for(var vn,yn,Rn,Bn=0,Co=0;Co<cr.length;++Co){var Po=cr[Co];if(Po.isInterleavedBufferAttribute||(vn===void 0&&(vn=Po.array.constructor),vn!==Po.array.constructor)||(yn===void 0&&(yn=Po.itemSize),yn!==Po.itemSize)||(Rn===void 0&&(Rn=Po.normalized),Rn!==Po.normalized))return null;Bn+=Po.array.length}for(var To=new vn(Bn),Io=0,Co=0;Co<cr.length;++Co)To.set(cr[Co].array,Io),Io+=cr[Co].array.length;return new BufferAttribute(To,yn,Rn)},interleaveAttributes:function(cr){for(var vn,yn=0,Rn=0,Bn=0,Co=cr.length;Bn<Co;++Bn){var Po=cr[Bn];if(vn===void 0&&(vn=Po.array.constructor),vn!==Po.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;yn+=Po.array.length,Rn+=Po.itemSize}for(var To=new InterleavedBuffer(new vn(yn),Rn),Io=0,$l=[],Wl=["getX","getY","getZ","getW"],Xl=["setX","setY","setZ","setW"],Yl=0,Co=cr.length;Yl<Co;Yl++){var Po=cr[Yl],Zl=Po.itemSize,ey=Po.count,Rm=new InterleavedBufferAttribute(To,Zl,Io,Po.normalized);$l.push(Rm),Io+=Zl;for(var ry=0;ry<ey;ry++)for(var _g=0;_g<Zl;_g++)Rm[Xl[_g]](ry,Po[Wl[_g]](ry))}return $l},estimateBytesUsed:function(cr){var vn=0;for(var yn in cr.attributes){var Rn=cr.getAttribute(yn);vn+=Rn.count*Rn.itemSize*Rn.array.BYTES_PER_ELEMENT}var Bn=cr.getIndex();return vn+=Bn?Bn.count*Bn.itemSize*Bn.array.BYTES_PER_ELEMENT:0,vn},mergeVertices:function(cr,vn){vn===void 0&&(vn=1e-4),vn=Math.max(vn,Number.EPSILON);for(var yn={},Rn=cr.getIndex(),Bn=cr.getAttribute("position"),Co=Rn?Rn.count:Bn.count,Po=0,To=Object.keys(cr.attributes),Io={},$l={},Wl=[],Xl=["getX","getY","getZ","getW"],Yl=0,Zl=To.length;Yl<Zl;Yl++){var ey=To[Yl];Io[ey]=[];var Rm=cr.morphAttributes[ey];Rm&&($l[ey]=new Array(Rm.length).fill().map(function(){return[]}))}for(var ry=Math.log10(1/vn),_g=Math.pow(10,ry),Yl=0;Yl<Co;Yl++){for(var ty=Rn?Rn.getX(Yl):Yl,ny="",iy=0,Zl=To.length;iy<Zl;iy++)for(var ey=To[iy],oy=cr.getAttribute(ey),ay=oy.itemSize,uy=0;uy<ay;uy++)ny+="".concat(~~(oy[Xl[uy]](ty)*_g),",");if(ny in yn)Wl.push(yn[ny]);else{for(var iy=0,Zl=To.length;iy<Zl;iy++)for(var ey=To[iy],oy=cr.getAttribute(ey),Rm=cr.morphAttributes[ey],ay=oy.itemSize,hy=Io[ey],my=$l[ey],uy=0;uy<ay;uy++){var ly=Xl[uy];if(hy.push(oy[ly](ty)),Rm)for(var sy=0,cy=Rm.length;sy<cy;sy++)my[sy].push(Rm[sy][ly](ty))}yn[ny]=Po,Wl.push(Po),Po++}}for(var fy=cr.clone(),Yl=0,Zl=To.length;Yl<Zl;Yl++){var ey=To[Yl],vy=cr.getAttribute(ey),dy=new vy.array.constructor(Io[ey]),oy=new BufferAttribute(dy,vy.itemSize,vy.normalized);if(fy.setAttribute(ey,oy),ey in $l)for(var iy=0;iy<$l[ey].length;iy++){var Ay=cr.morphAttributes[ey][iy],dy=new Ay.array.constructor($l[ey][iy]),gy=new BufferAttribute(dy,Ay.itemSize,Ay.normalized);fy.morphAttributes[ey][iy]=gy}}return fy.setIndex(Wl),fy}};function N0(cr){switch(cr){case"Floorplan":return!0;case"Mapview":return!0;default:return!1}}function wi(cr){switch(cr){case"Panorama":return!0;case"VRPanorama":return!0;case"XRPanorama":return!0;case"Model":return!0;default:return!1}}var xr$1=new Vector3,a0=new Sphere,o0=new Matrix4,Rs=new Matrix4,Bs=new Box3,ia=new Matrix4().fromArray([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),aa=new Matrix4().fromArray([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),Il=new Box3(new Vector3(-.5,-.5,-.5),new Vector3(.5,.5,.5));function Fs(cr,vn,yn){switch(cr){case"Z":break;case"Y":yn.copy(aa);break;case"-Y":yn.copy(ia);break;case"WGS84":case"GCJ02":case"BD09":Dv(vn,yn);break;default:yn.identity();break}return yn}function Zv(cr){var vn=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(cr);if(vn){var yn=String(vn[1]).trim().split(".").slice(1).reverse()[0];if(yn)return yn}return""}var s0=function(){function cr(vn,yn){this.scene=vn,this.error=yn,vn.viewLayer=this}return Object.defineProperty(cr.prototype,"name",{get:function(){return this.scene.name},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"type",{get:function(){return this.scene.type},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"upAxis",{get:function(){return this.scene.upAxis},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"groundHeight",{get:function(){return this.scene.groundHeight},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"model",{get:function(){return this.scene.model},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"coordinates",{get:function(){xr$1.setScalar(0);var vn=this.scene.localToLla(xr$1),yn=vn.x,Rn=vn.y;return[yn,Rn].map(function(Bn){return(Bn/Math.PI*180).toFixed(6)}).join(",")},enumerable:!1,configurable:!0}),cr.prototype.getTransformMatrix4=function(vn){return vn===void 0&&(vn=new Matrix4),vn.copy(this.scene.coordinateTransform.ecefToLocalMatrix),this.scene&&vn.premultiply(this.scene.matrixWorld),vn},cr.prototype.coordinatesToWorldPoint=function(vn){var yn=new Vector3(vn.latitude,vn.longitude,vn.altitude);return this.scene.llaToWorld(yn)},cr.prototype.worldPointToCoordinates=function(vn){return xr$1.copy(vn),this.scene.worldToLla(xr$1),{latitude:xr$1.x,longitude:xr$1.y,altitude:xr$1.z}},cr}(),Ls=function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co,Po=cr.call(this)||this;return Po.name="",Po.onError=(Rn=yn.onError)!==null&&Rn!==void 0?Rn:q$q,Po.onShownFloorChange=(Bn=yn.onShownFloorChange)!==null&&Bn!==void 0?Bn:q$q,Po.onLoad=(Co=yn.onLoad)!==null&&Co!==void 0?Co:q$q,Po.work=null,Po.viewLayers=[],Po.bounding=new Box3(new Vector3,new Vector3),Po.floorLength=0,Po.textureOptions={},Po.refined=!1,Po.refineProgress=[0,0],Po.loaded=!1,Po.matrixAutoUpdate=!1,Po.needsRender=!0,Po.autoRefine=!0,Po.materialVersion=0,Po.materialParameters=O$n({},ye$3),Po.cacheCameras=[],Po.disposed=!1,Po}return Object.defineProperty(vn.prototype,"empty",{get:function(){return this.viewLayers.length===0},enumerable:!1,configurable:!0}),vn.prototype.getMaterial=function(){return O$n({},this.materialParameters)},vn.prototype.setMaterial=function(yn){var Rn=this.materialParameters.shownFloorIndex,Bn=Su(this.materialParameters,yn);if(Bn){var Co=this.materialParameters.shownFloorIndex;Rn!==Co&&this.onShownFloorChange(Co),this.materialVersion++,this.needsRender=!0}},Object.defineProperty(vn.prototype,"brightness",{get:function(){return this.materialParameters.brightness},set:function(yn){this.setMaterial({brightness:typeof yn=="number"?yn:1})},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"shownFloorIndex",{get:function(){return this.materialParameters.shownFloorIndex},set:function(yn){this.setMaterial({shownFloorIndex:yn})},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"shownFloor",{get:function(){return this.shownFloorIndex===-1?null:this.shownFloorIndex},set:function(yn){this.shownFloorIndex=yn===null?-1:yn},enumerable:!1,configurable:!0}),vn.prototype.show=function(yn){this.shownFloor=yn!=null?yn:null},Object.defineProperty(vn.prototype,"clippers",{get:function(){return this.materialParameters.clippers},set:function(yn){this.setMaterial({clippers:yn})},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"customShaders",{get:function(){return this.materialParameters.customShaders},set:function(yn){this.setMaterial({customShaders:yn})},enumerable:!1,configurable:!0}),vn.prototype.getEdgesBySphere=function(yn,Rn){Rn===void 0&&(Rn=30/180*Math.PI);for(var Bn=Math.cos(Rn),Co=[],Po=0,To=this.children;Po<To.length;Po++){var Io=To[Po];Io instanceof Qn&&Io.tileset.selectedTiles.forEach(function($l){var Wl,Xl,Yl;if(!($l.boundingVolume&&$l.boundingVolume.distanceToPoint(yn.center)>yn.radius)){var Zl=(Xl=(Wl=$l.content)===null||Wl===void 0?void 0:Wl.data)===null||Xl===void 0?void 0:Xl.object;if(Zl&&Zl.visible){var ey=[];if(Zl.traverseVisible(function(Dy){if(Dy instanceof Mesh){var qy=Nd.get(Dy);if(qy){o0.copy(Dy.matrixWorld),Rs.getInverse(o0),a0.copy(yn).applyMatrix4(Rs);var Xy=qy.trianglesInSphere(a0.center,a0.radius),$y=new BufferGeometry;$y.setAttribute("position",new BufferAttribute(Xy,3)),$y.applyMatrix4(Dy.matrixWorld),$y=Ps.mergeVertices($y,.01),ey.push($y)}}}),ey.length===0)return;for(var Rm=["a","b","c"],ry=Ps.mergeBufferGeometries(ey,!1),_g=ry.getAttribute("position").array,ty=((Yl=ry.getIndex())===null||Yl===void 0?void 0:Yl.array)||[],ny=[],iy=[],oy=0,ay=_g.length;oy<ay;oy+=3){var uy=new Vector3(_g[oy],_g[oy+1],_g[oy+2]);ny.push(uy)}for(var oy=0,ay=ty.length;oy<ay;oy+=3){var hy=ty[oy],my=ty[oy+1],ly=ty[oy+2],sy=new Vector3().crossVectors(ny[my].clone().sub(ny[hy]),ny[ly].clone().sub(ny[hy])).normalize();iy.push({a:hy,b:my,c:ly,normal:sy})}for(var cy={},oy=0,ay=iy.length;oy<ay;oy++)for(var fy=iy[oy],vy=0;vy<3;vy++){var dy=fy[Rm[vy]],Ay=fy[Rm[(vy+1)%3]],gy=[Math.min(dy,Ay),Math.max(dy,Ay)],wy=gy[0]+"-"+gy[1];cy[wy]===void 0?cy[wy]={index1:gy[0],index2:gy[1],face1:oy}:cy[wy].face2=oy}for(var wy in cy){var Cy=cy[wy];if(Cy.face2===void 0||iy[Cy.face1].normal.dot(iy[Cy.face2].normal)<=Bn){var My=ny[Cy.index1],Py=ny[Cy.index2];Co.push(new Line3(My,Py))}}ny.length=0,iy.length=0}}})}return Co},vn.prototype.intersectRaycaster=function(yn,Rn,Bn){Rn===void 0&&(Rn=null),Bn===void 0&&(Bn=!0);for(var Co=[],Po=0,To=this.children.length;Po<To;Po++){var Io=this.children[Po];Io.visible&&Io instanceof Qn&&Io.intersectRaycaster(yn,!1,Co)}return Rn!=null&&(Co=Co.filter(function($l){return $l.floor===Rn})),this.getMaterial().pointBack==="HIDDEN"&&(Co=Co.filter(function($l){return!($l.object instanceof Vr$1&&$l.face&&$l.face.normal.angleTo(yn.ray.direction)<Math.PI/2)})),Bn&&Co.sort(function($l,Wl){return $l.distance-Wl.distance}),Co},vn.prototype.load=function(yn,Rn){var Bn,Co=this,Po,To,Io,$l,Wl;if(Rn===void 0&&(Rn={}),this.work=yn,this.name=this.work.workCode,!yn.model)return Promise.resolve();for(var Xl=yn.model,Yl=0,Zl=0,ey=yn.observers;Zl<ey.length;Zl++){var Rm=ey[Zl];Yl=Math.max(Yl,Rm.floorIndex)}this.floorLength=Yl+1;for(var ry=!1,_g=[],ty=function(xy){var Ry=xy.tileset,Ly=xy.upAxis,ky=xy.name,Ey=xy.type;Ey==="mesh"&&(ry=!0);var Iy=Ry.split("#"),zy=Iy[0],Uy=Iy[1],Qy=(Po=(Uy||zy).split("?")[1])!==null&&Po!==void 0?Po:"",Gy=typeof Rn["3d-tiles"]=="function"?Rn["3d-tiles"](xy):(To=Rn["3d-tiles"])!==null&&To!==void 0?To:{},Zy=gt$4(yn).ajax(Ry,{responseType:"text"}).then(function(Ty){var Vy,Yy,Jy=Ry?Ry.slice(0,Ry.lastIndexOf("/")+1):"",Hy=ra(JSON.parse(Ty.body),Jy),i1=Hy.root,u1=Hy.rootMeta,p1=u1===void 0?{}:u1;p1.upAxis&&p1.upAxis!==Ly&&(Ly=p1.upAxis),"lodVersion"in Hy&&(Ly="-Y","floorInfo"in Hy&&(Hy.properties=Hy.properties||{},Hy.properties.floorInfo=Hy.floorInfo.map(function(M1){return{ground:-M1.ground,height:M1.height}}),delete Hy.floorInfo),Hy.asset.tilesetVersion=String(Hy.lodVersion),delete Hy.lodVersion);var g1=i1.boundingVolume?Sn(i1.boundingVolume):void 0;g1&&i1.transform&&g1.applyMatrix4(o0.fromArray(i1.transform));var v1=null,h1=new Matrix4,l1=new Matrix4;p1.coordinate?(v1=p1.coordinate.ground_height,h1.fromArray(p1.coordinate.pose_ecef_to_enu),l1.fromArray(p1.coordinate.pose_enu_to_ecef)):(g1?g1.getCenter(xr$1):xr$1.setScalar(0),Fs(Ly,xr$1,h1),l1.getInverse(h1));var o1=new Matrix4().copy(ia),t1=new Matrix4().copy(aa),Wy=new Matrix4().premultiply(h1).premultiply(o1),f1=new Matrix4().getInverse(Wy),m1;if(Gy.viewerRequestVolume){var w1=Ua(Gy.viewerRequestVolume)?Gy.viewerRequestVolume:Sn(Gy.viewerRequestVolume);w1.applyMatrix4(f1),m1=w1.toJson()}Hy.root={refine:(Vy=i1.refine)!==null&&Vy!==void 0?Vy:"REPLACE",geometricError:i1.geometricError,transform:Wy.toArray(),boundingVolume:g1?g1.toJson():void 0,viewerRequestVolume:m1,children:[i1]};var c1=new Qn(Co,Hy,{name:ky,light:(Yy=Rn.light)!==null&&Yy!==void 0?Yy:!1,type:Ey,upAxis:Ly,url:Ry,referer:Ry,search:Qy,fetcher:gt$4(yn),groundHeight:v1,coordinateTransform:{localToEnuMatrix:t1,enuToLocalMatrix:o1,enuToEcefMatrix:l1,ecefToEnuMatrix:h1,localToEcefMatrix:f1,ecefToLocalMatrix:Wy}});return c1.matrix.copy(yn.transform),c1.matrix.decompose(c1.position,c1.quaternion,c1.scale),c1.matrixWorldNeedsUpdate=!0,Object.assign(c1.maxMemoryUsage,c1.getRecommendProps()),typeof Gy.debug!="undefined"&&(c1.debug=Gy.debug),typeof Gy.minLevelOfDetail!="undefined"&&(c1.minLevelOfDetail=Gy.minLevelOfDetail),typeof Gy.maxLevelOfDetail!="undefined"&&(c1.maxLevelOfDetail=Gy.maxLevelOfDetail),typeof Gy.minGeometricError!="undefined"&&(c1.minGeometricError=Gy.minGeometricError),typeof Gy.maxGeometricError!="undefined"&&(c1.maxGeometricError=Gy.maxGeometricError),typeof Gy.skipLevelOfDetail!="undefined"&&(c1.skipLevelOfDetail=Gy.skipLevelOfDetail),typeof Gy.mostDetail!="undefined"&&(c1.mostDetail=Gy.mostDetail),typeof Gy.loadSiblings!="undefined"&&(c1.loadSiblings=Gy.loadSiblings),typeof Gy.loadAll!="undefined"&&(c1.loadAll=Gy.loadAll),typeof Gy.maxMemoryUsage!="undefined"&&(c1.maxMemoryUsage=Gy.maxMemoryUsage),typeof Gy.maxRequests!="undefined"&&(c1.maxRequests=Gy.maxRequests),typeof Gy.requestOrder!="undefined"&&(c1.requestOrder=Gy.requestOrder),typeof Gy.maxScreenSpaceError!="undefined"&&(c1.maxScreenSpaceError=Gy.maxScreenSpaceError),(Gy.showLayers===!1||Array.isArray(Gy.showLayers)&&Gy.showLayers.indexOf(ky)===-1)&&(c1.visible=!1),new s0(c1,null)});_g.push(Zy.catch(function(Ty){var Vy;Co.onError(Ty);var Yy=new Matrix4,Jy=new Matrix4,Hy=new Matrix4().copy(ia),i1=new Matrix4().copy(aa),u1=new Matrix4().premultiply(Yy).premultiply(Hy),p1=new Matrix4().getInverse(u1),g1=Ry?Ry.slice(0,Ry.lastIndexOf("/")+1):"",v1;if(Gy.viewerRequestVolume){var h1=Ua(Gy.viewerRequestVolume)?Gy.viewerRequestVolume:Sn(Gy.viewerRequestVolume);h1.applyMatrix4(p1),v1=h1.toJson()}var l1=ra({asset:{version:"0.0"},geometricError:0,viewerRequestVolume:v1,root:{geometricError:0}},g1),o1=new Qn(Co,l1,{name:ky,light:(Vy=Rn.light)!==null&&Vy!==void 0?Vy:!1,type:Ey,upAxis:Ly,url:Ry,referer:Ry,search:Qy,fetcher:gt$4(yn),groundHeight:null,coordinateTransform:{localToEnuMatrix:i1,enuToLocalMatrix:Hy,enuToEcefMatrix:Jy,ecefToEnuMatrix:Yy,localToEcefMatrix:p1,ecefToLocalMatrix:u1},onError:Co.onError});return o1.matrix.copy(yn.transform),o1.matrix.decompose(o1.position,o1.quaternion,o1.scale),o1.matrixWorldNeedsUpdate=!0,(Gy.showLayers===!1||Array.isArray(Gy.showLayers)&&Gy.showLayers.indexOf(ky)===-1)&&(o1.visible=!1),new s0(o1,Ty)}))},ny=0,iy=Xl.layers;ny<iy.length;ny++){var oy=iy[ny];ty(oy)}if(!ry&&Xl.file){var ay=Xl.file,uy=Xl.textureBase,hy=Xl.textures,my="fallback",ly="mesh",sy="Z",cy="",oy={name:my,type:ly,upAxis:sy,tileset:cy},fy=typeof Rn["3d-tiles"]=="function"?Rn["3d-tiles"](oy):(Io=Rn["3d-tiles"])!==null&&Io!==void 0?Io:{},vy=Zv(ay)||"at3d",dy=new Matrix4,Ay=new Matrix4,gy=new Matrix4().copy(ia),wy=new Matrix4().copy(aa);Fs(sy,xr$1.setScalar(0),dy),Ay.getInverse(dy);var Cy=new Matrix4().premultiply(dy).premultiply(gy),My=new Matrix4().getInverse(Cy),Py=void 0;if(fy.viewerRequestVolume){var Dy=Ua(fy.viewerRequestVolume)?fy.viewerRequestVolume:Sn(fy.viewerRequestVolume);Dy.applyMatrix4(My),Py=Dy.toJson()}var qy=ra({asset:{version:"0.0"},geometricError:0,root:{refine:"REPLACE",geometricError:0,transform:Cy.toArray(),viewerRequestVolume:Py,content:{uri:ay},extras:(Bn={},Bn[vy]={textureBaseUri:uy,textureArray:hy,textureOptions:($l=Rn.textureOptions)!==null&&$l!==void 0?$l:{}},Bn)}},""),Xy=new Qn(this,qy,{name:my,light:(Wl=Rn.light)!==null&&Wl!==void 0?Wl:!1,type:ly,upAxis:sy,url:cy,referer:ay,fetcher:gt$4(yn),groundHeight:null,coordinateTransform:{localToEnuMatrix:wy,enuToLocalMatrix:gy,enuToEcefMatrix:Ay,ecefToEnuMatrix:dy,localToEcefMatrix:My,ecefToLocalMatrix:Cy},onError:this.onError});Xy.matrix.copy(yn.transform),Xy.matrix.decompose(Xy.position,Xy.quaternion,Xy.scale),Xy.matrixWorldNeedsUpdate=!0,(fy.showLayers===!1||Array.isArray(fy.showLayers)&&fy.showLayers.indexOf(my)===-1)&&(Xy.visible=!1);var $y=new s0(Xy,null);_g.push(Promise.resolve($y))}return Promise.all(_g).then(function(xy){for(var Ry=0,Ly=xy;Ry<Ly.length;Ry++){var ky=Ly[Ry];if(Co.disposed){ky.scene.dispose();continue}Co.viewLayers.push(ky),Co.add(ky.scene)}})},vn.prototype.update=function(yn,Rn,Bn){if(this.children.length){var Co=this.loaded;this.refined=this.work!==null,this.refineProgress[0]=0,this.refineProgress[1]=0,this.loaded=this.work!==null;for(var Po=0,To=this.viewLayers;Po<To.length;Po++){var Io=To[Po],$l=Io.scene;$l&&(this.work&&($l.cacheCameras=this.cacheCameras,this.autoRefine===!1?$l.needsRefined=!1:wi(Bn)?$l.needsRefined=this.materialParameters.modelAlpha===0||this.materialParameters.modelAlpha===1:$l.needsRefined=!0,this.work.transform.equals($l.matrix)||($l.matrix.copy(this.work.transform),$l.matrix.decompose($l.position,$l.quaternion,$l.scale),$l.matrixWorldNeedsUpdate=!0)),$l.update(yn,Rn,Bn),$l.needsRender===!0&&($l.needsRender=!1,this.needsRender=!0),$l.refined===!1&&(this.refined=!1),this.refineProgress[0]+=$l.refineProgress[0],this.refineProgress[1]+=$l.refineProgress[1],$l.loaded===!1&&(this.loaded=!1))}this.bounding.makeEmpty();for(var Wl=0,Xl=this.viewLayers;Wl<Xl.length;Wl++){var Io=Xl[Wl],$l=Io.scene;$l&&($l.boundingBox.isEmpty()||(Bs.copy($l.boundingBox).applyMatrix4($l.matrix),this.bounding.union(Bs)))}this.bounding.isEmpty()&&this.bounding.copy(Il),Co===!1&&this.loaded===!0&&this.onLoad()}else this.work&&!this.work.model?(this.refined=!0,this.refineProgress[0]=0,this.refineProgress[1]=0,this.loaded=!0):(this.refined=!1,this.refineProgress[0]=0,this.refineProgress[1]=0,this.loaded=!1),this.bounding.set(new Vector3,new Vector3)},vn.prototype.dispose=function(){this.disposed=!0;for(var yn;yn=this.children[0];)yn instanceof Qn&&yn.dispose(),this.remove(yn)},vn}(Object3D);function ks(){var cr=new Box3,vn=xa(ye$3,["clippers","shownFloorIndex","brightness","customShaders"]),yn=Object.assign([],{bounding:cr,needsRender:!1,refined:!1,refineProgress:[0,0],loaded:!1,materialVersion:0,cacheCameras:[],autoUpdate:!0,intersectRaycaster:function(Rn,Bn,Co){Co===void 0&&(Co=!0);var Po;if(yn.length===1)Po=yn[0].intersectRaycaster(Rn,Bn,Co);else if(yn.length===0)Po=[];else{Po=[];for(var To=0,Io=yn;To<Io.length;To++){var $l=Io[To];if($l.visible){var Wl=$l.intersectRaycaster(Rn,Bn,!1);Wl.length&&Po.push.apply(Po,Wl)}}Co&&Po.sort(function(Xl,Yl){return Xl.distance-Yl.distance})}return Po},setMaterial:function(Rn){var Bn=Su(vn,Rn);Bn&&(yn.materialVersion++,yn.needsRender=!0)},getMaterial:function(){return O$n({},vn)},resetBrightness:function(){for(var Rn=0,Bn=yn;Rn<Bn.length;Rn++){var Co=Bn[Rn];Co.setMaterial({brightness:1})}},update:function(Rn,Bn,Co){yn.refined=yn.length>0,yn.loaded=yn.length>0,yn.refineProgress[0]=0,yn.refineProgress[1]=0,cr.makeEmpty();for(var Po=0,To=yn.cacheCameras;Po<To.length;Po++){var Io=To[Po];Io.updateMatrixWorld(!0),Io.updateProjectionMatrix()}for(var $l=0,Wl=0,Xl=yn;Wl<Xl.length;Wl++){for(var Yl=Xl[Wl],Zl=0,ey=Yl.viewLayers;Zl<ey.length;Zl++){var Rm=ey[Zl];Rm.scene.modelIndex=$l++}Yl.setMaterial(vn),Yl.cacheCameras=yn.cacheCameras,Yl.autoRefine=this.autoUpdate,Yl.update(Rn,Bn,Co),Yl.needsRender===!0&&(yn.needsRender=!0,Yl.needsRender=!1),Yl.refined===!1&&(yn.refined=!1),yn.refineProgress[0]+=Yl.refineProgress[0],yn.refineProgress[1]+=Yl.refineProgress[1],Yl.loaded===!1&&(yn.loaded=!1),cr.union(Yl.bounding)}for(var ry=0,_g=yn;ry<_g.length;ry++)for(var Yl=_g[ry],ty=0,ny=Yl.viewLayers;ty<ny.length;ty++){var Rm=ny[ty];Rm.scene.modelsLoaded=yn.loaded}cr.isEmpty()&&cr.copy(Il)}});return yn}var Os=function(cr){return cr*(2-cr)},Yv=function(){var cr=new Float32Array([-.18,0,-.18,.18,0,-.18,-.18,0,.18,.18,0,.18]),vn=new Float32Array([1,0,0,0,1,1,0,1]),yn=new Uint8Array([0,2,1,2,3,1]),Rn=new BufferGeometry;return Rn.setAttribute("position",new BufferAttribute(cr,3)),Rn.setAttribute("uv",new BufferAttribute(vn,2)),Rn.setIndex(new BufferAttribute(yn,1)),Rn}(),$v=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,em=`
uniform vec3 baseColor;
uniform float circleScale;
uniform float ringScale;
uniform float ringOpacity;
uniform float loadingAngle;
uniform float loadingOpacity;
uniform float progress;
uniform float progressOpacity;
uniform float expand0;
uniform float expand1;
uniform float expandOpacity;
uniform float opacity;
uniform float tapScale;
uniform float tapOpacity;
uniform float disable;
varying vec2 vUv;

#include <common>
#include <logdepthbuf_pars_fragment>
#define SMOOTH_DIST 0.017
#define CENTER vec2(0.5, 0.5)

float inside(float innerDist) {
  float dist = length(CENTER - vUv);
  return smoothstep(innerDist, innerDist + SMOOTH_DIST, dist);
}
float outside(float outerDist) {
  float dist = length(CENTER - vUv);
  return 1.0 - smoothstep(outerDist - SMOOTH_DIST, outerDist, dist);
}

vec4 create_circle() {
  float dist = length(CENTER - vUv);
  float gradient = clamp(0.8 + abs(dot(normalize(vec2(1.0, -1.0)), vUv - CENTER)) * 1.5, 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * tapOpacity * inside(0.15 * circleScale * tapScale) * outside(0.234 * circleScale * tapScale));
}

vec4 create_disable() {
  float dist = length(CENTER - vUv);
  return vec4(1.0, 1.0, 1.0, 0.5 * tapOpacity * outside(0.32 * circleScale * tapScale));
}

vec4 create_ring() {
  float gradient = clamp(0.5 + abs(dot(normalize(vec2(1.0, 1.0)), vUv - CENTER)), 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * tapOpacity * ringOpacity * inside(0.27 * ringScale * tapScale) * outside(0.32 * ringScale * tapScale));
}

vec4 create_loading() {
  float angle = PI - atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  angle = mod(angle + loadingAngle, PI2);
  float gradient = (1.0 - smoothstep(0.0, PI2, angle)) * 0.4 + 0.1;
  return vec4(1.0, 1.0, 1.0, gradient * tapOpacity * loadingOpacity * inside(0.208 * circleScale * tapScale) * outside(0.3 * circleScale * tapScale));
}

vec4 create_progress() {
  float angle = PI + atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  float bar = (1.0 - step(progress * PI2, angle)) * 0.5;
  return vec4(1.0, 1.0, 1.0, bar * tapOpacity * progressOpacity * inside(0.208 * circleScale * tapScale) * outside(0.3 * circleScale * tapScale));
}

vec4 create_expand0() {
  float width = 0.2;
  float radius = 0.2 + (0.43 - 0.2) * expand0;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand0 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * expandOpacity * outside(radius));
}

vec4 create_expand1() {
  float width = 0.2;
  float radius = 0.2 + (0.43 - 0.2) * expand1;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand1 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * expandOpacity * outside(radius));
}

void main() {
  #include <logdepthbuf_fragment>
  gl_FragColor = vec4(1.0, 1.0, 1.0, 0);

  vec4 expand1Color = create_expand1();
  gl_FragColor = mix(gl_FragColor, expand1Color, expand1Color.a);

  vec4 expand0Color = create_expand0();
  gl_FragColor = mix(gl_FragColor, expand0Color, expand0Color.a);

  vec4 progressColor = create_progress();
  gl_FragColor = mix(gl_FragColor, progressColor, progressColor.a);

  vec4 loadingColor = create_loading();
  gl_FragColor = mix(gl_FragColor, loadingColor, loadingColor.a);

  vec4 circleColor = create_circle();
  gl_FragColor = mix(gl_FragColor, circleColor, circleColor.a);

  vec4 ringColor = create_ring();
  gl_FragColor = mix(gl_FragColor, ringColor, ringColor.a);

  gl_FragColor = mix(gl_FragColor, create_disable(), disable);

  gl_FragColor = vec4(gl_FragColor.rgb * baseColor, gl_FragColor.a * opacity * opacity);
}
`,tm=function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co=cr.call(this)||this,Po=(Rn=yn.color)!==null&&Rn!==void 0?Rn:16777215,To=(Bn=yn.scale)!==null&&Bn!==void 0?Bn:1;return Co.progress=0,Co.opacity=0,Co.loading=!1,Co.current=!1,Co.disabled=!1,Co.currentMotion=new Ce$2({progress:0}),Co.ringMotion=new Ce$2({scale:1,opacity:1}),Co.tapMotion=new Ce$2({scale:1,opacity:1}),Co.loadingOpacityMotion=new Ce$2({opacity:0}),Co.progressMotion=new Ce$2({progress:0}),Co.progressOpacityMotion=new Ce$2({opacity:0}),Co.opacityMotion=new Ce$2({opacity:0}),Co.disableMotion=new Ce$2({progress:0}),Co.panoMesh=new Mesh(Yv,new ShaderMaterial({blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor,depthWrite:!1,vertexShader:$v,fragmentShader:em,uniforms:{baseColor:{value:new Color(Po)},circleScale:{value:1},ringScale:{value:1},ringOpacity:{value:1},loadingAngle:{value:0},loadingOpacity:{value:0},progress:{value:0},progressOpacity:{value:0},expand0:{value:0},expand1:{value:0},expandOpacity:{value:0},opacity:{value:0},tapScale:{value:1},tapOpacity:{value:1},disable:{value:0}}})),Co.renderOrder=-2,Co.panoMesh.renderOrder=-2,Co.panoMesh.position.y=.004,Co.panoMesh.scale.set(To,1,To),Co.add(Co.panoMesh),Co.currentStartTime=Ae$3(),Co.needsRender=!0,Co}return vn.prototype.setProgress=function(yn){var Rn=this;this.setDisabled(!1),this.setLoading(!1),this.progress!==yn&&(yn=pe$4(yn,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},500).catch(q$q),yn===0?this.progressOpacityMotion.set({opacity:0},500).catch(q$q).then(function(){Rn.progressMotion.set({progress:0},0).catch(q$q)}):this.progressMotion.set({progress:pe$4(yn*1.2,0,1)},100).catch(q$q)),this.progress=yn)},vn.prototype.setOpacity=function(yn){this.opacity!==yn&&(this.opacity=yn=pe$4(yn,0,1),this.opacityMotion.set({opacity:yn},200).catch(q$q))},vn.prototype.setCurrent=function(yn){this.current!==yn&&(this.currentMotion.set({progress:yn?1:0},2e3).catch(q$q),this.current=yn,this.current===!0&&(this.currentStartTime=Ae$3()))},vn.prototype.setLoading=function(yn){this.loading!==yn&&(this.loading=yn,this.disabled===!0&&this.setDisabled(!1),this.loadingOpacityMotion.set({opacity:yn?1:0},500).catch(q$q))},vn.prototype.setDisabled=function(yn){this.disabled!==yn&&(this.disabled=yn,this.loading===!0&&this.setLoading(!1),this.disableMotion.set({progress:yn?1:0},500).catch(q$q))},vn.prototype.tap=function(){var yn=this;if(!this.tapMotion.ended)return Promise.resolve();var Rn=[{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}];return this.progressOpacityMotion.set({opacity:0},0).catch(q$q),this.progressMotion.set({progress:0},0).catch(q$q),this.tapMotion.setKeyframes(Rn,600).then(function(){yn.progressOpacityMotion.set({opacity:yn.progress>0?1:0},300).catch(q$q),yn.progressMotion.set({progress:yn.progress},120).catch(q$q)}).catch(q$q)},vn.prototype.updateTime=function(yn,Rn){if(!this.progressMotion.ended){this.progressMotion.update(yn);var Bn=this.progressMotion.value.progress;this.panoMesh.material.uniforms.progress.value=Bn,this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(yn);var Co=this.progressOpacityMotion.value.opacity;this.panoMesh.material.uniforms.progressOpacity.value=Co,this.needsRender=!0}if(!this.opacityMotion.ended){this.opacityMotion.update(yn);var Co=this.opacityMotion.value.opacity;this.panoMesh.material.uniforms.opacity.value=Co,this.needsRender=!0}if(this.visible=this.opacityMotion.value.opacity!==0,(!this.loadingOpacityMotion.ended||this.loadingOpacityMotion.value.opacity>0)&&(this.loadingOpacityMotion.update(yn),this.panoMesh.material.uniforms.loadingOpacity.value=this.loadingOpacityMotion.value.opacity,this.panoMesh.material.uniforms.loadingAngle.value=yn/120%(Math.PI*2),this.needsRender=!0),this.tapMotion.ended||(this.tapMotion.update(yn),this.panoMesh.material.uniforms.tapOpacity.value=this.tapMotion.value.opacity,this.panoMesh.material.uniforms.tapScale.value=this.tapMotion.value.scale,this.needsRender=!0),this.current||!this.currentMotion.ended){this.currentMotion.update(yn),this.panoMesh.material.uniforms.expandOpacity.value=this.currentMotion.value.progress;{var Po=(yn-this.currentStartTime-1500)/2e3;if(Po%5<2){var To=1+Math.sin(Math.PI*Po)/25*this.currentMotion.value.progress;this.panoMesh.material.uniforms.circleScale.value=To,this.needsRender=!0}}{var Io=(yn-this.currentStartTime-1500)/2e3;if(Io%5<2){var $l=Io%1;this.panoMesh.material.uniforms.expand0.value=Os($l)*this.currentMotion.value.progress,this.needsRender=!0}}{var Wl=(yn-this.currentStartTime-1e3)/2e3;if(Wl%5<2){var $l=Wl%1;this.panoMesh.material.uniforms.expand1.value=Os($l)*this.currentMotion.value.progress,this.needsRender=!0}}}if(this.currentMotion.value.progress>.2&&this.progress===0&&this.loading===!1){var Xl=(yn-this.currentStartTime-1e3)/2e3;Xl%5<2?this.ringMotion.getTargetKeyframe().value.scale!==.8&&this.ringMotion.set({scale:.8,opacity:0},600).catch(q$q):this.ringMotion.getTargetKeyframe().value.scale!==1&&this.ringMotion.set({scale:1,opacity:1},600).catch(q$q)}else this.ringMotion.getTargetKeyframe().value.scale!==1&&this.ringMotion.set({scale:1,opacity:1},600).catch(q$q);if(!this.ringMotion.ended){var Yl=this.ringMotion.value,To=Yl.scale,Co=Yl.opacity;this.ringMotion.update(yn),this.panoMesh.material.uniforms.ringScale.value=To,this.panoMesh.material.uniforms.ringOpacity.value=Co,this.needsRender=!0}if(!this.disableMotion.ended){var Bn=this.disableMotion.value.progress;this.disableMotion.update(yn),this.panoMesh.material.uniforms.disable.value=Bn,this.needsRender=!0}},vn.prototype.dispose=function(){this.ringMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.currentMotion.dispose(),this.panoMesh.material.dispose()},vn}(Object3D),zs=function(cr){return cr*(2-cr)},rm=function(){var cr=new Float32Array([-.18,0,-.18,.18,0,-.18,-.18,0,.18,.18,0,.18]),vn=new Float32Array([1,0,0,0,1,1,0,1]),yn=new Uint8Array([0,2,1,2,3,1]),Rn=new BufferGeometry;return Rn.setAttribute("position",new BufferAttribute(cr,3)),Rn.setAttribute("uv",new BufferAttribute(vn,2)),Rn.setIndex(new BufferAttribute(yn,1)),Rn}(),nm=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,im=`
uniform vec3 baseColor;
uniform float circleScale;
uniform float circleOpacity;
uniform float loadingAngle;
uniform float loadingOpacity;
uniform float progress;
uniform float progressOpacity;
uniform float expand0;
uniform float expand1;
uniform float expandOpacity;
uniform float opacity;
uniform float tapScale;
uniform float tapOpacity;
uniform float disable;
varying vec2 vUv;

#include <common>
#include <logdepthbuf_pars_fragment>
#define SMOOTH_DIST 0.017
#define CENTER vec2(0.5, 0.5)

float inside(float innerDist) {
  float dist = length(CENTER - vUv);
  return smoothstep(innerDist, innerDist + SMOOTH_DIST, dist);
}
float outside(float outerDist) {
  float dist = length(CENTER - vUv);
  return 1.0 - smoothstep(outerDist - SMOOTH_DIST, outerDist, dist);
}

vec4 create_circle() {
  float dist = length(CENTER - vUv);
  return vec4(1.0, 1.0, 1.0, 0.8 * circleOpacity * tapOpacity * inside(0.2 * circleScale * tapScale) * outside(0.3 * circleScale * tapScale));
}

vec4 create_disable() {
  float dist = length(CENTER - vUv);
  return vec4(1.0, 1.0, 1.0, 0.5 * tapOpacity * outside(0.32 * circleScale * tapScale));
}

vec4 create_loading() {
  float angle = PI - atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  angle = mod(angle + loadingAngle, PI2);
  float gradient = (1.0 - smoothstep(0.0, PI2, angle)) * 0.9 + 0.1;
  return vec4(1.0, 1.0, 1.0, gradient * tapOpacity * loadingOpacity * inside(0.2 * circleScale * tapScale) * outside(0.3 * circleScale * tapScale));
}

vec4 create_progress() {
  float angle = PI + atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  float bar = (1.0 - step(progress * PI2, angle)) * 0.7;
  return vec4(1.0, 1.0, 1.0, bar * tapOpacity * progressOpacity * inside(0.2 * circleScale * tapScale) * outside(0.3 * circleScale * tapScale));
}

vec4 create_expand0() {
  float width = 0.2;
  float radius = 0.25 + (0.5 - 0.25) * expand0;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand0 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * expandOpacity * outside(radius));
}

vec4 create_expand1() {
  float width = 0.2;
  float radius = 0.25 + (0.48 - 0.25) * expand1;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand1 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(1.0, 1.0, 1.0, gradient * expandOpacity * outside(radius));
}

void main() {
  #include <logdepthbuf_fragment>
  gl_FragColor = vec4(1.0, 1.0, 1.0, 0);

  vec4 expand1Color = create_expand1();
  gl_FragColor = mix(gl_FragColor, expand1Color, expand1Color.a);

  vec4 expand0Color = create_expand0();
  gl_FragColor = mix(gl_FragColor, expand0Color, expand0Color.a);

  vec4 circleColor = create_circle();
  gl_FragColor = mix(gl_FragColor, circleColor, circleColor.a);

  vec4 progressColor = create_progress();
  gl_FragColor = mix(gl_FragColor, progressColor, progressColor.a);

  vec4 loadingColor = create_loading();
  gl_FragColor = mix(gl_FragColor, loadingColor, loadingColor.a);

  gl_FragColor = mix(gl_FragColor, create_disable(), disable);

  gl_FragColor = vec4(gl_FragColor.rgb * baseColor, gl_FragColor.a * opacity * opacity);
}
`;(function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co=cr.call(this)||this,Po=(Rn=yn.color)!==null&&Rn!==void 0?Rn:16777215,To=(Bn=yn.scale)!==null&&Bn!==void 0?Bn:1;return Co.progress=0,Co.opacity=0,Co.loading=!1,Co.current=!1,Co.disabled=!1,Co.currentMotion=new Ce$2({progress:0}),Co.tapMotion=new Ce$2({scale:1,opacity:1}),Co.loadingOpacityMotion=new Ce$2({opacity:0}),Co.progressMotion=new Ce$2({progress:0}),Co.progressOpacityMotion=new Ce$2({opacity:0}),Co.opacityMotion=new Ce$2({opacity:0}),Co.disableMotion=new Ce$2({progress:0}),Co.panoMesh=new Mesh(rm,new ShaderMaterial({blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor,depthWrite:!1,vertexShader:nm,fragmentShader:im,uniforms:{baseColor:{value:new Color(Po)},circleScale:{value:1},circleOpacity:{value:1},loadingAngle:{value:0},loadingOpacity:{value:0},progress:{value:0},progressOpacity:{value:0},expand0:{value:0},expand1:{value:0},expandOpacity:{value:0},opacity:{value:0},tapScale:{value:1},tapOpacity:{value:1},disable:{value:0}}})),Co.renderOrder=-2,Co.panoMesh.renderOrder=-2,Co.panoMesh.position.y=.004,Co.panoMesh.scale.set(To,1,To),Co.add(Co.panoMesh),Co.currentStartTime=Ae$3(),Co.needsRender=!0,Co}return vn.prototype.setProgress=function(yn){var Rn=this;this.setDisabled(!1),this.setLoading(!1),this.progress!==yn&&(yn=pe$4(yn,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},500).catch(q$q),yn===0?this.progressOpacityMotion.set({opacity:0},500).catch(q$q).then(function(){Rn.progressMotion.set({progress:0},0).catch(q$q)}):this.progressMotion.set({progress:pe$4(yn*1.2,0,1)},100).catch(q$q)),this.progress=yn)},vn.prototype.setOpacity=function(yn){this.opacity!==yn&&(this.opacity=yn=pe$4(yn,0,1),this.opacityMotion.set({opacity:yn},200).catch(q$q))},vn.prototype.setCurrent=function(yn){this.current!==yn&&(this.currentMotion.set({progress:yn?1:0},2e3).catch(q$q),this.current=yn,this.current===!0&&(this.currentStartTime=Ae$3()))},vn.prototype.setLoading=function(yn){this.loading!==yn&&(this.loading=yn,this.disabled===!0&&this.setDisabled(!1),this.loadingOpacityMotion.set({opacity:yn?1:0},500).catch(q$q))},vn.prototype.setDisabled=function(yn){this.disabled!==yn&&(this.disabled=yn,this.loading===!0&&this.setLoading(!1),this.disableMotion.set({progress:yn?1:0},500).catch(q$q))},vn.prototype.tap=function(){var yn=this;if(!this.tapMotion.ended)return Promise.resolve();var Rn=[{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}];return this.progressOpacityMotion.set({opacity:0},0).catch(q$q),this.progressMotion.set({progress:0},0).catch(q$q),this.tapMotion.setKeyframes(Rn,600).then(function(){yn.progressOpacityMotion.set({opacity:yn.progress>0?1:0},300).catch(q$q),yn.progressMotion.set({progress:yn.progress},120).catch(q$q)}).catch(q$q)},vn.prototype.updateTime=function(yn,Rn){if(!this.progressMotion.ended){this.progressMotion.update(yn);var Bn=this.progressMotion.value.progress;this.panoMesh.material.uniforms.progress.value=Bn,this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(yn);var Co=this.progressOpacityMotion.value.opacity;this.panoMesh.material.uniforms.progressOpacity.value=Co,this.needsRender=!0}if(!this.opacityMotion.ended){this.opacityMotion.update(yn);var Co=this.opacityMotion.value.opacity;this.panoMesh.material.uniforms.opacity.value=Co,this.needsRender=!0}if(this.visible=this.opacityMotion.value.opacity!==0,(!this.loadingOpacityMotion.ended||this.loadingOpacityMotion.value.opacity>0)&&(this.loadingOpacityMotion.update(yn),this.panoMesh.material.uniforms.loadingOpacity.value=this.loadingOpacityMotion.value.opacity,this.panoMesh.material.uniforms.loadingAngle.value=yn/120%(Math.PI*2),this.needsRender=!0),this.tapMotion.ended||(this.tapMotion.update(yn),this.panoMesh.material.uniforms.tapOpacity.value=this.tapMotion.value.opacity,this.panoMesh.material.uniforms.tapScale.value=this.tapMotion.value.scale,this.needsRender=!0),this.panoMesh.material.uniforms.circleOpacity.value=Math.max(.6,1-Math.max(this.loadingOpacityMotion.value.opacity,this.progressOpacityMotion.value.opacity)),this.current||!this.currentMotion.ended){this.currentMotion.update(yn),this.panoMesh.material.uniforms.expandOpacity.value=this.currentMotion.value.progress;{var Po=(yn-this.currentStartTime-1500)/2e3;if(Po%5<2){var To=1+Math.sin(Math.PI*Po)/25*this.currentMotion.value.progress;this.panoMesh.material.uniforms.circleScale.value=To,this.needsRender=!0}}{var Io=(yn-this.currentStartTime-1500)/2e3;if(Io%5<2){var $l=Io%1;this.panoMesh.material.uniforms.expand0.value=zs($l)*this.currentMotion.value.progress,this.needsRender=!0}}{var Wl=(yn-this.currentStartTime-1e3)/2e3;if(Wl%5<2){var $l=Wl%1;this.panoMesh.material.uniforms.expand1.value=zs($l)*this.currentMotion.value.progress,this.needsRender=!0}}}if(!this.disableMotion.ended){var Bn=this.disableMotion.value.progress;this.disableMotion.update(yn),this.panoMesh.material.uniforms.disable.value=Bn,this.needsRender=!0}},vn.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.currentMotion.dispose(),this.panoMesh.material.dispose()},vn})(Object3D);var Vs=function(cr){return cr*(2-cr)},am=function(){var cr=new Float32Array([-.18,0,-.18,.18,0,-.18,-.18,0,.18,.18,0,.18]),vn=new Float32Array([1,0,0,0,1,1,0,1]),yn=new Uint8Array([0,2,1,2,3,1]),Rn=new BufferGeometry;return Rn.setAttribute("position",new BufferAttribute(cr,3)),Rn.setAttribute("uv",new BufferAttribute(vn,2)),Rn.setIndex(new BufferAttribute(yn,1)),Rn}(),om=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,sm=`
#if defined(USE_MAP)
uniform sampler2D map;
uniform float mapAlpha;
#endif
#if defined(USE_BORDER)
uniform float borderWidth;
uniform vec3 borderColor;
#endif
uniform vec3 baseColor;
uniform float circleScale;
uniform float circleOpacity;
uniform float loadingAngle;
uniform float loadingOpacity;
uniform float progress;
uniform float progressOpacity;
uniform float expand0;
uniform float expand1;
uniform float expandOpacity;
uniform float opacity;
uniform float tapScale;
uniform float tapOpacity;
uniform float disable;
varying vec2 vUv;

#include <common>
#include <logdepthbuf_pars_fragment>
#define SMOOTH_DIST 0.017
#define CENTER vec2(0.5, 0.5)

float inside(float innerDist) {
  float dist = length(CENTER - vUv);
  return smoothstep(innerDist, innerDist + SMOOTH_DIST, dist);
}
float outside(float outerDist) {
  float dist = length(CENTER - vUv);
  return 1.0 - smoothstep(outerDist - SMOOTH_DIST, outerDist, dist);
}

vec4 create_circle() {
  float dist = length(CENTER - vUv);
  float radius = 0.3 * circleScale * tapScale;
  #if defined(USE_MAP)
    float delta = radius / 0.5;
    vec2 deltaUv = (vUv - CENTER) / delta + CENTER;
    vec4 image = texture2D(map, deltaUv);
    image.a = image.a * mapAlpha;
    #if defined(USE_COLOR)
    image = vec4(baseColor, 1.0) * image;
    #endif
  #endif
  #if defined(USE_REVERSE)
    image = vec4(baseColor, 1.0 - image.a);
  #else
    #if defined(USE_BORDER)
      float borderDist = clamp(borderWidth, 0.0, 1.0);
      float clipAlpha = inside(radius - borderDist * radius);
      float gradient = clamp(borderWidth * 2.0 + abs(dot(normalize(vec2(1.0, -1.0)), vUv - CENTER)), 0.0, 1.0);
      vec4 borderColor = vec4(borderColor, clipAlpha * gradient);
      image = mix(borderColor, image, image.a);
    #endif
  #endif
  return vec4(image.rgb, image.a * circleOpacity * tapOpacity * outside(radius));
}

vec4 create_disable() {
  float dist = length(CENTER - vUv);
  return vec4(baseColor, 0.5 * tapOpacity * outside(0.32 * circleScale * tapScale));
}

vec4 create_loading() {
  float angle = PI - atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  angle = mod(angle + loadingAngle, PI2);
  float gradient = (1.0 - smoothstep(0.0, PI2, angle)) * 0.9 + 0.1;
  float radius = 0.3 * circleScale * tapScale;
  float inner = inside(radius - 0.2 * radius);
  #if defined(USE_BORDER)
    float borderDist = clamp(borderWidth, 0.0, 1.0);
    inner = inside(radius - borderDist * radius);
  #endif
  return vec4(baseColor, gradient * tapOpacity * loadingOpacity * inner * outside(radius));
}

vec4 create_progress() {
  float angle = PI + atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  float bar = (1.0 - step(progress * PI2, angle)) * 0.7;
  float radius = 0.3 * circleScale * tapScale;
  float inner = inside(radius - 0.2 * radius);
  #if defined(USE_BORDER)
    float borderDist = clamp(borderWidth, 0.0, 1.0);
    inner = inside(radius - borderDist * radius);
  #endif
  return vec4(baseColor, bar * tapOpacity * progressOpacity * inner * outside(radius));
}

vec4 create_expand0() {
  float width = 0.2;
  float radius = 0.25 + (0.5 - 0.25) * expand0;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand0 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(baseColor, gradient * expandOpacity * outside(radius));
}

vec4 create_expand1() {
  float width = 0.2;
  float radius = 0.25 + (0.48 - 0.25) * expand1;
  float dist = length(CENTER - vUv);
  float gradient = (1.0 - clamp((radius - dist) / width, 0.0, 1.0)) * 0.8 * clamp((1.0 - abs(expand1 - 0.5) * 2.0) * 1.2, 0.0, 1.0);
  return vec4(baseColor, gradient * expandOpacity * outside(radius));
}

void main() {
  #include <logdepthbuf_fragment>
  gl_FragColor = vec4(baseColor, 0);

  vec4 expand1Color = create_expand1();
  gl_FragColor = mix(gl_FragColor, expand1Color, expand1Color.a);

  vec4 expand0Color = create_expand0();
  gl_FragColor = mix(gl_FragColor, expand0Color, expand0Color.a);

  vec4 circleColor = create_circle();
  gl_FragColor = mix(gl_FragColor, circleColor, circleColor.a);

  vec4 progressColor = create_progress();
  gl_FragColor = mix(gl_FragColor, progressColor, progressColor.a);

  vec4 loadingColor = create_loading();
  gl_FragColor = mix(gl_FragColor, loadingColor, loadingColor.a);

  gl_FragColor = mix(gl_FragColor, create_disable(), disable);

  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * opacity);
}
`;(function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co,Po,To,Io,$l,Wl=cr.call(this)||this,Xl=(Rn=yn.color)!==null&&Rn!==void 0?Rn:16777215,Yl=(Bn=yn.scale)!==null&&Bn!==void 0?Bn:1,Zl=yn.map,ey=(Co=yn.mapAlpha)!==null&&Co!==void 0?Co:1,Rm=(Po=yn.mapUseColor)!==null&&Po!==void 0?Po:!1,ry=(To=yn.mapUseReverse)!==null&&To!==void 0?To:!1,_g=(Io=yn.borderWidth)!==null&&Io!==void 0?Io:.1,ty=($l=yn.borderColor)!==null&&$l!==void 0?$l:16777215;return Wl.progress=0,Wl.opacity=0,Wl.loading=!1,Wl.current=!1,Wl.disabled=!1,Wl.currentMotion=new Ce$2({progress:0}),Wl.tapMotion=new Ce$2({scale:1,opacity:1}),Wl.loadingOpacityMotion=new Ce$2({opacity:0}),Wl.progressMotion=new Ce$2({progress:0}),Wl.progressOpacityMotion=new Ce$2({opacity:0}),Wl.opacityMotion=new Ce$2({opacity:0}),Wl.disableMotion=new Ce$2({progress:0}),Wl.panoMesh=new Mesh(am,new ShaderMaterial({blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor,depthWrite:!1,vertexShader:om,fragmentShader:sm,defines:{USE_COLOR:Rm,USE_MAP:Zl!==void 0,USE_BORDER:_g>0,USE_REVERSE:ry},uniforms:{baseColor:{value:new Color(Xl)},circleScale:{value:1},circleOpacity:{value:1},loadingAngle:{value:0},loadingOpacity:{value:0},progress:{value:0},progressOpacity:{value:0},expand0:{value:0},expand1:{value:0},expandOpacity:{value:0},opacity:{value:0},tapScale:{value:1},tapOpacity:{value:1},disable:{value:0},map:{value:Zl},mapAlpha:{value:ey},borderWidth:{value:_g},borderColor:{value:new Color(ty)}}})),Wl.renderOrder=-2,Wl.panoMesh.renderOrder=-2,Wl.panoMesh.position.y=.004,Wl.panoMesh.scale.set(Yl,1,Yl),Wl.add(Wl.panoMesh),Wl.currentStartTime=Ae$3(),Wl.needsRender=!0,Wl}return vn.prototype.setProgress=function(yn){var Rn=this;this.setDisabled(!1),this.setLoading(!1),this.progress!==yn&&(yn=pe$4(yn,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},500).catch(q$q),yn===0?this.progressOpacityMotion.set({opacity:0},500).catch(q$q).then(function(){Rn.progressMotion.set({progress:0},0).catch(q$q)}):this.progressMotion.set({progress:pe$4(yn*1.2,0,1)},100).catch(q$q)),this.progress=yn)},vn.prototype.setOpacity=function(yn){this.opacity!==yn&&(this.opacity=yn=pe$4(yn,0,1),this.opacityMotion.set({opacity:yn},200).catch(q$q))},vn.prototype.setCurrent=function(yn){this.current!==yn&&(this.currentMotion.set({progress:yn?1:0},2e3).catch(q$q),this.current=yn,this.current===!0&&(this.currentStartTime=Ae$3()))},vn.prototype.setLoading=function(yn){this.loading!==yn&&(this.loading=yn,this.disabled===!0&&this.setDisabled(!1),this.loadingOpacityMotion.set({opacity:yn?1:0},500).catch(q$q))},vn.prototype.setDisabled=function(yn){this.disabled!==yn&&(this.disabled=yn,this.loading===!0&&this.setLoading(!1),this.disableMotion.set({progress:yn?1:0},500).catch(q$q))},vn.prototype.tap=function(){var yn=this;if(!this.tapMotion.ended)return Promise.resolve();var Rn=[{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}];return this.progressOpacityMotion.set({opacity:0},0).catch(q$q),this.progressMotion.set({progress:0},0).catch(q$q),this.tapMotion.setKeyframes(Rn,600).then(function(){yn.progressOpacityMotion.set({opacity:yn.progress>0?1:0},300).catch(q$q),yn.progressMotion.set({progress:yn.progress},120).catch(q$q)}).catch(q$q)},vn.prototype.updateTime=function(yn,Rn){if(!this.progressMotion.ended){this.progressMotion.update(yn);var Bn=this.progressMotion.value.progress;this.panoMesh.material.uniforms.progress.value=Bn,this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(yn);var Co=this.progressOpacityMotion.value.opacity;this.panoMesh.material.uniforms.progressOpacity.value=Co,this.needsRender=!0}if(!this.opacityMotion.ended){this.opacityMotion.update(yn);var Co=this.opacityMotion.value.opacity;this.panoMesh.material.uniforms.opacity.value=Co,this.needsRender=!0}if(this.visible=this.opacityMotion.value.opacity!==0,(!this.loadingOpacityMotion.ended||this.loadingOpacityMotion.value.opacity>0)&&(this.loadingOpacityMotion.update(yn),this.panoMesh.material.uniforms.loadingOpacity.value=this.loadingOpacityMotion.value.opacity,this.panoMesh.material.uniforms.loadingAngle.value=yn/120%(Math.PI*2),this.needsRender=!0),this.tapMotion.ended||(this.tapMotion.update(yn),this.panoMesh.material.uniforms.tapOpacity.value=this.tapMotion.value.opacity,this.panoMesh.material.uniforms.tapScale.value=this.tapMotion.value.scale,this.needsRender=!0),this.panoMesh.material.uniforms.circleOpacity.value=Math.max(.6,1-Math.max(this.loadingOpacityMotion.value.opacity,this.progressOpacityMotion.value.opacity)),this.current||!this.currentMotion.ended){this.currentMotion.update(yn),this.panoMesh.material.uniforms.expandOpacity.value=this.currentMotion.value.progress;{var Po=(yn-this.currentStartTime-1500)/2e3;if(Po%5<2){var To=Po%1;this.panoMesh.material.uniforms.expand0.value=Vs(To)*this.currentMotion.value.progress,this.needsRender=!0}}{var Io=(yn-this.currentStartTime-1e3)/2e3;if(Io%5<2){var To=Io%1;this.panoMesh.material.uniforms.expand1.value=Vs(To)*this.currentMotion.value.progress,this.needsRender=!0}}}if(!this.disableMotion.ended){var Bn=this.disableMotion.value.progress;this.disableMotion.update(yn),this.panoMesh.material.uniforms.disable.value=Bn,this.needsRender=!0}},vn.prototype.dispose=function(){this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.currentMotion.dispose(),this.panoMesh.material.dispose()},vn})(Object3D);var um=new CircleBufferGeometry(.1,16),lm=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,cm=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_fragment>

float smoothDist = 0.01;
void main() {
  #include <logdepthbuf_fragment>
  vec2 center = vec2(0.5, 0.5);
  float dist = length(center - vUv);
  float outerDist = 0.49;
  float innerDist = 0.29;

  float outside = 1.0 - smoothstep(outerDist - smoothDist, outerDist, dist);
  float inside = smoothstep(innerDist, innerDist + smoothDist, dist);

  vec4 bg = vec4(0.576, 0.635, 1.0, 0.3);
  float gradientAlpha = clamp(abs(dist - (outerDist + innerDist) / 2.0) / (outerDist - innerDist) * 1.5 + 0.1, 0.0, 1.0);
  vec4 gradient = vec4(1.0, 1.0, 1.0, gradientAlpha);

  gl_FragColor = mix(bg, gradient, gradient.a);

  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * outside * inside);
}
`,fm=new ShaderMaterial({vertexShader:lm,fragmentShader:cm,side:DoubleSide,blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor,depthWrite:!1}),ho=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.ringMesh=new Mesh(um,fm),yn.ringMesh.position.z=.01,yn.ringMesh.renderOrder=-2,yn.add(yn.ringMesh),yn}return vn.prototype.dispose=function(){this.remove(this.ringMesh)},vn}(Object3D);function li(cr,vn,yn){var Rn=Math.abs(cr-vn);return Rn<.001||typeof yn!="undefined"&&Math.abs(yn-Rn)<.001}function ir$1(cr,vn,yn){return!li(cr,vn,yn)}function Oi(cr,vn){return cr.distanceTo(vn)<.001}function oa(cr,vn){return!Oi(cr,vn)}var Tl=new Vector3(0,0,0),dm=function(cr){fe$6(vn,cr);function vn(yn,Rn){Rn===void 0&&(Rn=Tl);var Bn=this,Co=new BoxBufferGeometry(yn.max.x-yn.min.x+Rn.x*2,yn.max.y-yn.min.y+Rn.y*2,yn.max.z-yn.min.z+Rn.z*2,1,1);Co.clearGroups(),Co.addGroup(0,Co.index?Co.index.count:Co.attributes.position.count,0),Co.applyMatrix4(new Matrix4().makeScale(-1,1,1)),Co.computeVertexNormals();var Po=new Mr$1("none");return Po.refreshUniforms(),Bn=cr.call(this,Co,[Po])||this,Bn.position.copy(yn.getCenter(new Vector3)),Bn.frustumCulled=!1,Bn.boundingBox=new Box3,Bn.boundingBox.setFromObject(Bn),Bn.renderOrder=-1001,Bn}return vn}(Ht$2);function hm(cr,vn){return vn===void 0&&(vn=Tl),new dm(cr,vn)}function pm(cr,vn){var yn=new Vector3(0,0,-1);yn.applyQuaternion(cr.quaternion);var Rn=vn.quaternion.clone().inverse();yn.applyQuaternion(Rn);var Bn=Math.atan2(yn.x,-yn.z),Co=-Math.asin(yn.y);return{theta:Bn,phi:Co,lookAtVector:yn}}var Xi=Math.PI*2;function gn(cr){return cr>=0&&cr<Xi?cr:(cr%Xi+Xi)%Xi}var q0=Math.PI,Ds=q0*2;function u0(cr,vn,yn){if(cr===vn)return vn;var Rn=vn-cr,Bn=Math.abs(Rn);if(Bn<=yn)return vn;var Co=Rn>0?1:-1;return cr+Co*yn}function vm(cr,vn,yn){if(cr.equals(vn))return new Vector3().copy(vn);var Rn=new Vector3().subVectors(vn,cr);return Rn.lengthSq()<yn*yn?Rn.copy(vn):Rn.setLength(yn).add(cr)}function Ns(cr,vn,yn){if(cr.longitude===vn.longitude&&cr.latitude===vn.latitude)return{longitude:vn.longitude,latitude:vn.latitude};var Rn=gn(cr.longitude),Bn=cr.latitude,Co=gn(vn.longitude),Po=vn.latitude;Co-Rn>q0?Rn+=Ds:Rn-Co>q0&&(Rn-=Ds);var To=Math.sqrt(Math.pow(Co-Rn,2)+Math.pow(Po-Bn,2)),Io=yn/To;return Io>=1?{longitude:vn.longitude,latitude:vn.latitude}:{longitude:Rn+(Co-Rn)*Io,latitude:Bn+(Po-Bn)*Io}}function mm(cr){return!!cr&&(typeof cr=="object"||typeof cr=="function")&&typeof cr.then=="function"}var l0,wn$1=typeof navigator!="undefined"?((l0=navigator==null?void 0:navigator.userAgent)!==null&&l0!==void 0?l0:"").toLowerCase():"node";(function(){try{var cr=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(cr.getContext("webgl")||cr.getContext("experimental-webgl")))}catch{return!1}})();var ci=/android/i.test(wn$1)||/webos/i.test(wn$1)||/ipad|iphone|ipod/i.test(wn$1)||/iemobile/i.test(wn$1)||/opera mini/i.test(wn$1)||/blackberry/i.test(wn$1)||/windows phone/i.test(wn$1);function X$c(cr,vn){for(var yn=!1,Rn={type:cr,timeStamp:Ae$3(),get defaultPrevented(){return yn},preventDefault:function(){yn=!0}},Bn=0,Co=Object.keys(vn);Bn<Co.length;Bn++){var Po=Co[Bn];Po in Rn||(Rn[Po]=vn[Po])}return Rn}function Am(){return typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(cr){if(cr=="granted")return Promise.resolve();var vn=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(vn)}):Promise.resolve()}function gm(){if("xr"in navigator)return navigator.xr.isSessionSupported("immersive-vr").then(function(vn){return vn?Promise.resolve():Promise.reject()}).then(function(){var vn={optionalFeatures:["local-floor"]};return navigator.xr.requestSession("immersive-vr",vn).then(function(yn){return Promise.resolve(yn)})});var cr=new Error("Request XR Permission denied.");return Promise.reject(cr)}function Rr$1(cr,vn){cr.mode=vn.mode,cr.workCode=vn.workCode,cr.panoIndex=vn.panoIndex,cr.longitude=vn.longitude,cr.latitude=vn.latitude,cr.fov=vn.fov,cr.offset.copy(vn.offset),cr.distance=vn.distance}function ln(cr,vn){return cr.workCode===vn.workCode&&cr.mode===vn.mode&&cr.panoIndex===vn.panoIndex&&li(cr.longitude,vn.longitude,Math.PI*2)&&li(cr.latitude,vn.latitude)&&li(cr.fov,vn.fov)&&Oi(cr.offset,vn.offset)&&li(cr.distance,vn.distance)}function ym(cr,vn){cr.longitude=vn.longitude,cr.latitude=vn.latitude,cr.fov=vn.fov,cr.distance=vn.distance,cr.offset.copy(vn.offset)}function $e(cr){return{longitude:cr.longitude,latitude:cr.latitude,fov:cr.fov,offset:cr.offset.clone(),distance:cr.distance}}var bm=function(cr){return Number(cr)};function zr$1(cr,vn,yn){var Rn;vn===void 0&&(vn=bm),yn===void 0&&(yn=!1);for(var Bn,Co=1/0,Po=0,To=cr;Po<To.length;Po++){var Io=To[Po],$l=vn(Io);$l<=Co&&(Rn=[Io,$l],Bn=Rn[0],Co=Rn[1])}return isFinite(Co)||(Co=0),yn?[Bn,Co]:Bn}function lr$1(cr){for(var vn in cr)return!1;return!0}function Ma(cr){var vn={};for(var yn in cr){var Rn=cr[yn];Rn!==void 0&&(vn[yn]=Rn)}return vn}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var fi=function(cr,vn,yn,Rn){var Bn=["","webkit","Moz","MS","ms","o"],Co=vn.createElement?vn.createElement("div"):Rn,Po="function",To=Math.round,Io=Math.abs,$l=Date.now;function Wl(Oy,Ny,yy){return setTimeout(ty(Oy,yy),Ny)}function Xl(Oy,Ny,yy){return Array.isArray(Oy)?(Yl(Oy,yy[Ny],yy),!0):!1}function Yl(Oy,Ny,yy){var Sy;if(Oy)if(Oy.forEach)Oy.forEach(Ny,yy);else if(Oy.length!==Rn)for(Sy=0;Sy<Oy.length;)Ny.call(yy,Oy[Sy],Sy,Oy),Sy++;else for(Sy in Oy)Oy.hasOwnProperty(Sy)&&Ny.call(yy,Oy[Sy],Sy,Oy)}function Zl(Oy,Ny,yy){var Sy="DEPRECATED METHOD: "+Ny+`
`+yy+` AT 
`;return function(){var Fy=new Error("get-stack-trace"),e1=Fy&&Fy.stack?Fy.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s1=cr.console&&(cr.console.warn||cr.console.log);return s1&&s1.call(cr.console,Sy,e1),Oy.apply(this,arguments)}}var ey;typeof Object.assign!="function"?ey=function(Oy){if(Oy===Rn||Oy===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ny=Object(Oy),yy=1;yy<arguments.length;yy++){var Sy=arguments[yy];if(Sy!==Rn&&Sy!==null)for(var Fy in Sy)Sy.hasOwnProperty(Fy)&&(Ny[Fy]=Sy[Fy])}return Ny}:ey=Object.assign;var Rm=Zl(function(Oy,Ny,yy){for(var Sy=Object.keys(Ny),Fy=0;Fy<Sy.length;)(!yy||yy&&Oy[Sy[Fy]]===Rn)&&(Oy[Sy[Fy]]=Ny[Sy[Fy]]),Fy++;return Oy},"extend","Use `assign`."),ry=Zl(function(Oy,Ny){return Rm(Oy,Ny,!0)},"merge","Use `assign`.");function _g(Oy,Ny,yy){var Sy=Ny.prototype,Fy;Fy=Oy.prototype=Object.create(Sy),Fy.constructor=Oy,Fy._super=Sy,yy&&ey(Fy,yy)}function ty(Oy,Ny){return function(){return Oy.apply(Ny,arguments)}}function ny(Oy,Ny){return typeof Oy==Po?Oy.apply(Ny&&Ny[0]||Rn,Ny):Oy}function iy(Oy,Ny){return Oy===Rn?Ny:Oy}function oy(Oy,Ny,yy){Yl(my(Ny),function(Sy){Oy.addEventListener(Sy,yy,!1)})}function ay(Oy,Ny,yy){Yl(my(Ny),function(Sy){Oy.removeEventListener(Sy,yy,!1)})}function uy(Oy,Ny){for(;Oy;){if(Oy==Ny)return!0;Oy=Oy.parentNode}return!1}function hy(Oy,Ny){return Oy.indexOf(Ny)>-1}function my(Oy){return Oy.trim().split(/\s+/g)}function ly(Oy,Ny,yy){if(Oy.indexOf&&!yy)return Oy.indexOf(Ny);for(var Sy=0;Sy<Oy.length;){if(yy&&Oy[Sy][yy]==Ny||!yy&&Oy[Sy]===Ny)return Sy;Sy++}return-1}function sy(Oy){return Array.prototype.slice.call(Oy,0)}function cy(Oy,Ny,yy){for(var Sy=[],Fy=[],e1=0;e1<Oy.length;){var s1=Oy[e1][Ny];ly(Fy,s1)<0&&Sy.push(Oy[e1]),Fy[e1]=s1,e1++}return Sy=Sy.sort(function(A1,P1){return A1[Ny]>P1[Ny]}),Sy}function fy(Oy,Ny){for(var yy,Sy,Fy=Ny[0].toUpperCase()+Ny.slice(1),e1=0;e1<Bn.length;){if(yy=Bn[e1],Sy=yy?yy+Fy:Ny,Sy in Oy)return Sy;e1++}return Rn}var vy=1;function dy(){return vy++}function Ay(Oy){var Ny=Oy.ownerDocument||Oy;return Ny.defaultView||Ny.parentWindow||cr}var gy=/mobile|tablet|ip(ad|hone|od)|android/i,wy="ontouchstart"in cr,Cy=fy(cr,"PointerEvent")!==Rn,My=wy&&gy.test(navigator.userAgent),Py="touch",Dy="pen",qy="mouse",Xy="kinect",$y=25,xy=1,Ry=2,Ly=4,ky=8,Ey=1,Iy=2,zy=4,Uy=8,Qy=16,Gy=Iy|zy,Zy=Uy|Qy,Ty=Gy|Zy,Vy=["x","y"],Yy=["clientX","clientY"];function Jy(Oy,Ny){var yy=this;this.manager=Oy,this.callback=Ny,this.element=Oy.element,this.target=Oy.options.inputTarget,this.domHandler=function(Sy){ny(Oy.options.enable,[Oy])&&yy.handler(Sy)},this.init()}Jy.prototype={handler:function(){},init:function(){this.evEl&&oy(this.element,this.evEl,this.domHandler),this.evTarget&&oy(this.target,this.evTarget,this.domHandler),this.evWin&&oy(Ay(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ay(this.element,this.evEl,this.domHandler),this.evTarget&&ay(this.target,this.evTarget,this.domHandler),this.evWin&&ay(Ay(this.element),this.evWin,this.domHandler)}};function Hy(Oy){var Ny,yy=Oy.options.inputClass;return yy?Ny=yy:Cy?Ny=k1:My?Ny=a1:wy?Ny=b1:Ny=L1,new Ny(Oy,i1)}function i1(Oy,Ny,yy){var Sy=yy.pointers.length,Fy=yy.changedPointers.length,e1=Ny&xy&&Sy-Fy===0,s1=Ny&(Ly|ky)&&Sy-Fy===0;yy.isFirst=!!e1,yy.isFinal=!!s1,e1&&(Oy.session={}),yy.eventType=Ny,u1(Oy,yy),Oy.emit("hammer.input",yy),Oy.recognize(yy),Oy.session.prevInput=yy}function u1(Oy,Ny){var yy=Oy.session,Sy=Ny.pointers,Fy=Sy.length;yy.firstInput||(yy.firstInput=v1(Ny)),Fy>1&&!yy.firstMultiple?yy.firstMultiple=v1(Ny):Fy===1&&(yy.firstMultiple=!1);var e1=yy.firstInput,s1=yy.firstMultiple,A1=s1?s1.center:e1.center,P1=Ny.center=h1(Sy);Ny.timeStamp=$l(),Ny.deltaTime=Ny.timeStamp-e1.timeStamp,Ny.angle=Wy(A1,P1),Ny.distance=t1(A1,P1),p1(yy,Ny),Ny.offsetDirection=o1(Ny.deltaX,Ny.deltaY);var G1=l1(Ny.deltaTime,Ny.deltaX,Ny.deltaY);Ny.overallVelocityX=G1.x,Ny.overallVelocityY=G1.y,Ny.overallVelocity=Io(G1.x)>Io(G1.y)?G1.x:G1.y,Ny.scale=s1?m1(s1.pointers,Sy):1,Ny.rotation=s1?f1(s1.pointers,Sy):0,Ny.maxPointers=yy.prevInput?Ny.pointers.length>yy.prevInput.maxPointers?Ny.pointers.length:yy.prevInput.maxPointers:Ny.pointers.length,g1(yy,Ny);var tx=Oy.element;uy(Ny.srcEvent.target,tx)&&(tx=Ny.srcEvent.target),Ny.target=tx}function p1(Oy,Ny){var yy=Ny.center,Sy=Oy.offsetDelta||{},Fy=Oy.prevDelta||{},e1=Oy.prevInput||{};(Ny.eventType===xy||e1.eventType===Ly)&&(Fy=Oy.prevDelta={x:e1.deltaX||0,y:e1.deltaY||0},Sy=Oy.offsetDelta={x:yy.x,y:yy.y}),Ny.deltaX=Fy.x+(yy.x-Sy.x),Ny.deltaY=Fy.y+(yy.y-Sy.y)}function g1(Oy,Ny){var yy=Oy.lastInterval||Ny,Sy=Ny.timeStamp-yy.timeStamp,Fy,e1,s1,A1;if(Ny.eventType!=ky&&(Sy>$y||yy.velocity===Rn)){var P1=Ny.deltaX-yy.deltaX,G1=Ny.deltaY-yy.deltaY,tx=l1(Sy,P1,G1);e1=tx.x,s1=tx.y,Fy=Io(tx.x)>Io(tx.y)?tx.x:tx.y,A1=o1(P1,G1),Oy.lastInterval=Ny}else Fy=yy.velocity,e1=yy.velocityX,s1=yy.velocityY,A1=yy.direction;Ny.velocity=Fy,Ny.velocityX=e1,Ny.velocityY=s1,Ny.direction=A1}function v1(Oy){for(var Ny=[],yy=0;yy<Oy.pointers.length;)Ny[yy]={clientX:To(Oy.pointers[yy].clientX),clientY:To(Oy.pointers[yy].clientY)},yy++;return{timeStamp:$l(),pointers:Ny,center:h1(Ny),deltaX:Oy.deltaX,deltaY:Oy.deltaY}}function h1(Oy){var Ny=Oy.length;if(Ny===1)return{x:To(Oy[0].clientX),y:To(Oy[0].clientY)};for(var yy=0,Sy=0,Fy=0;Fy<Ny;)yy+=Oy[Fy].clientX,Sy+=Oy[Fy].clientY,Fy++;return{x:To(yy/Ny),y:To(Sy/Ny)}}function l1(Oy,Ny,yy){return{x:Ny/Oy||0,y:yy/Oy||0}}function o1(Oy,Ny){return Oy===Ny?Ey:Io(Oy)>=Io(Ny)?Oy<0?Iy:zy:Ny<0?Uy:Qy}function t1(Oy,Ny,yy){yy||(yy=Vy);var Sy=Ny[yy[0]]-Oy[yy[0]],Fy=Ny[yy[1]]-Oy[yy[1]];return Math.sqrt(Sy*Sy+Fy*Fy)}function Wy(Oy,Ny,yy){yy||(yy=Vy);var Sy=Ny[yy[0]]-Oy[yy[0]],Fy=Ny[yy[1]]-Oy[yy[1]];return Math.atan2(Fy,Sy)*180/Math.PI}function f1(Oy,Ny){return Wy(Ny[1],Ny[0],Yy)+Wy(Oy[1],Oy[0],Yy)}function m1(Oy,Ny){return t1(Ny[0],Ny[1],Yy)/t1(Oy[0],Oy[1],Yy)}var w1={mousedown:xy,mousemove:Ry,mouseup:Ly},c1="mousedown",M1="mousemove mouseup";function L1(){this.evEl=c1,this.evWin=M1,this.pressed=!1,Jy.apply(this,arguments)}_g(L1,Jy,{handler:function(Oy){var Ny=w1[Oy.type];Ny&xy&&(Oy.button===0||Oy.button===2)&&(this.pressed=!0),Ny&Ry&&Oy.which!==1&&(Ny=Ly),this.pressed&&(Ny&Ly&&(this.pressed=!1),this.callback(this.manager,Ny,{pointers:[Oy],changedPointers:[Oy],pointerType:qy,srcEvent:Oy}))}});var B1={pointerdown:xy,pointermove:Ry,pointerup:Ly,pointercancel:ky,pointerout:ky},D1={2:Py,3:Dy,4:qy,5:Xy},O1="pointerdown",j1="pointermove pointerup pointercancel";cr.MSPointerEvent&&!cr.PointerEvent&&(O1="MSPointerDown",j1="MSPointerMove MSPointerUp MSPointerCancel");function k1(){this.evEl=O1,this.evWin=j1,Jy.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_g(k1,Jy,{handler:function(Oy){var Ny=this.store,yy=!1,Sy=!1,Fy=Oy.type.toLowerCase().replace("ms",""),e1=B1[Fy],s1=D1[Oy.pointerType]||Oy.pointerType,A1=s1==Py,P1=ly(Ny,Oy.pointerId,"pointerId");e1&xy&&(Oy.button===0||Oy.button===2||A1)?P1<0&&(Ny.push(Oy),P1=Ny.length-1):e1&(Ly|ky)?yy=!0:!A1&&Oy.buttons===0&&(yy=!0,Sy=!0,e1=B1.pointerup),!(P1<0)&&(Sy||(Ny[P1]=Oy),this.callback(this.manager,e1,{pointers:Ny,changedPointers:[Oy],pointerType:s1,srcEvent:Ny[P1]}),yy&&Ny.splice(P1,1))}});var q1={touchstart:xy,touchmove:Ry,touchend:Ly,touchcancel:ky},_b="touchstart",Q1="touchstart touchmove touchend touchcancel";function Y1(){this.evTarget=_b,this.evWin=Q1,this.started=!1,Jy.apply(this,arguments)}_g(Y1,Jy,{handler:function(Oy){var Ny=q1[Oy.type];if(Ny===xy&&(this.started=!0),!!this.started){var yy=jy.call(this,Oy,Ny);Ny&(Ly|ky)&&yy[0].length-yy[1].length===0&&(this.started=!1),this.callback(this.manager,Ny,{pointers:yy[0],changedPointers:yy[1],pointerType:Py,srcEvent:Oy})}}});function jy(Oy,Ny){var yy=sy(Oy.touches),Sy=sy(Oy.changedTouches);return Ny&(Ly|ky)&&(yy=cy(yy.concat(Sy),"identifier")),[yy,Sy]}var r1={touchstart:xy,touchmove:Ry,touchend:Ly,touchcancel:ky},n1="touchstart touchmove touchend touchcancel";function a1(){this.evTarget=n1,this.targetIds={},Jy.apply(this,arguments)}_g(a1,Jy,{handler:function(Oy){var Ny=r1[Oy.type],yy=y1.call(this,Oy,Ny);yy&&this.callback(this.manager,Ny,{pointers:yy[0],changedPointers:yy[1],pointerType:Py,srcEvent:Oy})}});function y1(Oy,Ny){var yy=sy(Oy.touches),Sy=this.targetIds;if(Ny&(xy|Ry)&&yy.length===1)return Sy[yy[0].identifier]=!0,[yy,yy];var Fy,e1,s1=sy(Oy.changedTouches),A1=[],P1=this.target;if(e1=yy.filter(function(G1){return uy(G1.target,P1)}),Ny===xy)for(Fy=0;Fy<e1.length;)Sy[e1[Fy].identifier]=!0,Fy++;for(Fy=0;Fy<s1.length;)Sy[s1[Fy].identifier]&&A1.push(s1[Fy]),Ny&(Ly|ky)&&delete Sy[s1[Fy].identifier],Fy++;if(A1.length)return[cy(e1.concat(A1),"identifier"),A1]}var _1=2500,E1=25;function b1(){Jy.apply(this,arguments);var Oy=ty(this.handler,this);this.touch=new a1(this.manager,Oy),this.mouse=new L1(this.manager,Oy),this.primaryTouch=null,this.lastTouches=[]}_g(b1,Jy,{handler:function(Oy,Ny,yy){var Sy=yy.pointerType==Py,Fy=yy.pointerType==qy;if(!(Fy&&yy.sourceCapabilities&&yy.sourceCapabilities.firesTouchEvents)){if(Sy)S1.call(this,Ny,yy);else if(Fy&&W1.call(this,yy))return;this.callback(Oy,Ny,yy)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function S1(Oy,Ny){Oy&xy?(this.primaryTouch=Ny.changedPointers[0].identifier,x1.call(this,Ny)):Oy&(Ly|ky)&&x1.call(this,Ny)}function x1(Oy){var Ny=Oy.changedPointers[0];if(Ny.identifier===this.primaryTouch){var yy={x:Ny.clientX,y:Ny.clientY};this.lastTouches.push(yy);var Sy=this.lastTouches,Fy=function(){var e1=Sy.indexOf(yy);e1>-1&&Sy.splice(e1,1)};setTimeout(Fy,_1)}}function W1(Oy){for(var Ny=Oy.srcEvent.clientX,yy=Oy.srcEvent.clientY,Sy=0;Sy<this.lastTouches.length;Sy++){var Fy=this.lastTouches[Sy],e1=Math.abs(Ny-Fy.x),s1=Math.abs(yy-Fy.y);if(e1<=E1&&s1<=E1)return!0}return!1}var N1=Co?fy(Co.style,"touchAction"):Rn,R1=N1!==Rn,$1="compute",C1="auto",T1="manipulation",F1="none",z1="pan-x",Z1="pan-y",H1=Ix();function nx(Oy,Ny){this.manager=Oy,this.set(Ny)}nx.prototype={set:function(Oy){Oy==$1&&(Oy=this.compute()),R1&&this.manager.element.style&&H1[Oy]&&(this.manager.element.style[N1]=Oy),this.actions=Oy.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Oy=[];return Yl(this.manager.recognizers,function(Ny){ny(Ny.options.enable,[Ny])&&(Oy=Oy.concat(Ny.getTouchAction()))}),J1(Oy.join(" "))},preventDefaults:function(Oy){var Ny=Oy.srcEvent,yy=Oy.offsetDirection;if(this.manager.session.prevented){Ny.preventDefault();return}var Sy=this.actions,Fy=hy(Sy,F1)&&!H1[F1],e1=hy(Sy,Z1)&&!H1[Z1],s1=hy(Sy,z1)&&!H1[z1];if(Fy){var A1=Oy.pointers.length===1,P1=Oy.distance<2,G1=Oy.deltaTime<250;if(A1&&P1&&G1)return}if(!(s1&&e1)&&(Fy||e1&&yy&Gy||s1&&yy&Zy))return this.preventSrc(Ny)},preventSrc:function(Oy){this.manager.session.prevented=!0,Oy.preventDefault()}};function J1(Oy){if(hy(Oy,F1))return F1;var Ny=hy(Oy,z1),yy=hy(Oy,Z1);return Ny&&yy?F1:Ny||yy?Ny?z1:Z1:hy(Oy,T1)?T1:C1}function Ix(){if(!R1)return!1;var Oy={},Ny=cr.CSS&&cr.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(yy){Oy[yy]=Ny?cr.CSS.supports("touch-action",yy):!0}),Oy}var Px=1,ax=2,ix=4,hx=8,rx=hx,sx=16,ox=32;function IA(Oy){this.options=ey({},this.defaults,Oy||{}),this.id=dy(),this.manager=null,this.options.enable=iy(this.options.enable,!0),this.state=Px,this.simultaneous={},this.requireFail=[]}IA.prototype={defaults:{},set:function(Oy){return ey(this.options,Oy),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Oy){if(Xl(Oy,"recognizeWith",this))return this;var Ny=this.simultaneous;return Oy=Ox(Oy,this),Ny[Oy.id]||(Ny[Oy.id]=Oy,Oy.recognizeWith(this)),this},dropRecognizeWith:function(Oy){return Xl(Oy,"dropRecognizeWith",this)?this:(Oy=Ox(Oy,this),delete this.simultaneous[Oy.id],this)},requireFailure:function(Oy){if(Xl(Oy,"requireFailure",this))return this;var Ny=this.requireFail;return Oy=Ox(Oy,this),ly(Ny,Oy)===-1&&(Ny.push(Oy),Oy.requireFailure(this)),this},dropRequireFailure:function(Oy){if(Xl(Oy,"dropRequireFailure",this))return this;Oy=Ox(Oy,this);var Ny=ly(this.requireFail,Oy);return Ny>-1&&this.requireFail.splice(Ny,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Oy){return!!this.simultaneous[Oy.id]},emit:function(Oy){var Ny=this,yy=this.state;function Sy(Fy){Ny.manager.emit(Fy,Oy)}yy<hx&&Sy(Ny.options.event+fx(yy)),Sy(Ny.options.event),Oy.additionalEvent&&Sy(Oy.additionalEvent),yy>=hx&&Sy(Ny.options.event+fx(yy))},tryEmit:function(Oy){if(this.canEmit())return this.emit(Oy);this.state=ox},canEmit:function(){for(var Oy=0;Oy<this.requireFail.length;){if(!(this.requireFail[Oy].state&(ox|Px)))return!1;Oy++}return!0},recognize:function(Oy){var Ny=ey({},Oy);if(!ny(this.options.enable,[this,Ny])){this.reset(),this.state=ox;return}this.state&(rx|sx|ox)&&(this.state=Px),this.state=this.process(Ny),this.state&(ax|ix|hx|sx)&&this.tryEmit(Ny)},process:function(Oy){},getTouchAction:function(){},reset:function(){}};function fx(Oy){return Oy&sx?"cancel":Oy&hx?"end":Oy&ix?"move":Oy&ax?"start":""}function Dx(Oy){return Oy==Qy?"down":Oy==Uy?"up":Oy==Iy?"left":Oy==zy?"right":""}function Ox(Oy,Ny){var yy=Ny.manager;return yy?yy.get(Oy):Oy}function lx(){IA.apply(this,arguments)}_g(lx,IA,{defaults:{pointers:1},attrTest:function(Oy){var Ny=this.options.pointers;return Ny===0||Oy.pointers.length===Ny},process:function(Oy){var Ny=this.state,yy=Oy.eventType,Sy=Ny&(ax|ix),Fy=this.attrTest(Oy);return Sy&&(yy&ky||!Fy)?Ny|sx:Sy||Fy?yy&Ly?Ny|hx:Ny&ax?Ny|ix:ax:ox}});function cx(){lx.apply(this,arguments),this.pX=null,this.pY=null}_g(cx,lx,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ty},getTouchAction:function(){var Oy=this.options.direction,Ny=[];return Oy&Gy&&Ny.push(Z1),Oy&Zy&&Ny.push(z1),Ny},directionTest:function(Oy){var Ny=this.options,yy=!0,Sy=Oy.distance,Fy=Oy.direction,e1=Oy.deltaX,s1=Oy.deltaY;return Fy&Ny.direction||(Ny.direction&Gy?(Fy=e1===0?Ey:e1<0?Iy:zy,yy=e1!=this.pX,Sy=Math.abs(Oy.deltaX)):(Fy=s1===0?Ey:s1<0?Uy:Qy,yy=s1!=this.pY,Sy=Math.abs(Oy.deltaY))),Oy.direction=Fy,yy&&Sy>Ny.threshold&&Fy&Ny.direction},attrTest:function(Oy){return lx.prototype.attrTest.call(this,Oy)&&(this.state&ax||!(this.state&ax)&&this.directionTest(Oy))},emit:function(Oy){this.pX=Oy.deltaX,this.pY=Oy.deltaY;var Ny=Dx(Oy.direction);Ny&&(Oy.additionalEvent=this.options.event+Ny),this._super.emit.call(this,Oy)}});function Tx(){lx.apply(this,arguments)}_g(Tx,lx,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[F1]},attrTest:function(Oy){return this._super.attrTest.call(this,Oy)&&(Math.abs(Oy.scale-1)>this.options.threshold||this.state&ax)},emit:function(Oy){if(Oy.scale!==1){var Ny=Oy.scale<1?"in":"out";Oy.additionalEvent=this.options.event+Ny}this._super.emit.call(this,Oy)}});function Mx(){IA.apply(this,arguments),this._timer=null,this._input=null}_g(Mx,IA,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[C1]},process:function(Oy){var Ny=this.options,yy=Oy.pointers.length===Ny.pointers,Sy=Oy.distance<Ny.threshold,Fy=Oy.deltaTime>Ny.time;if(this._input=Oy,!Sy||!yy||Oy.eventType&(Ly|ky)&&!Fy)this.reset();else if(Oy.eventType&xy)this.reset(),this._timer=Wl(function(){this.state=rx,this.tryEmit()},Ny.time,this);else if(Oy.eventType&Ly)return rx;return ox},reset:function(){clearTimeout(this._timer)},emit:function(Oy){this.state===rx&&(Oy&&Oy.eventType&Ly?this.manager.emit(this.options.event+"up",Oy):(this._input.timeStamp=$l(),this.manager.emit(this.options.event,this._input)))}});function Ex(){lx.apply(this,arguments)}_g(Ex,lx,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[F1]},attrTest:function(Oy){return this._super.attrTest.call(this,Oy)&&(Math.abs(Oy.rotation)>this.options.threshold||this.state&ax)}});function bx(){lx.apply(this,arguments)}_g(bx,lx,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Gy|Zy,pointers:1},getTouchAction:function(){return cx.prototype.getTouchAction.call(this)},attrTest:function(Oy){var Ny=this.options.direction,yy;return Ny&(Gy|Zy)?yy=Oy.overallVelocity:Ny&Gy?yy=Oy.overallVelocityX:Ny&Zy&&(yy=Oy.overallVelocityY),this._super.attrTest.call(this,Oy)&&Ny&Oy.offsetDirection&&Oy.distance>this.options.threshold&&Oy.maxPointers==this.options.pointers&&Io(yy)>this.options.velocity&&Oy.eventType&Ly},emit:function(Oy){var Ny=Dx(Oy.offsetDirection);Ny&&this.manager.emit(this.options.event+Ny,Oy),this.manager.emit(this.options.event,Oy)}});function Cx(){IA.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_g(Cx,IA,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[T1]},process:function(Oy){var Ny=this.options,yy=Oy.pointers.length===Ny.pointers,Sy=Oy.distance<Ny.threshold,Fy=Oy.deltaTime<Ny.time;if(this.reset(),Oy.eventType&xy&&this.count===0)return this.failTimeout();if(Sy&&Fy&&yy){if(Oy.eventType!=Ly)return this.failTimeout();var e1=this.pTime?Oy.timeStamp-this.pTime<Ny.interval:!0,s1=!this.pCenter||t1(this.pCenter,Oy.center)<Ny.posThreshold;this.pTime=Oy.timeStamp,this.pCenter=Oy.center,!s1||!e1?this.count=1:this.count+=1,this._input=Oy;var A1=this.count%Ny.taps;if(A1===0)return this.hasRequireFailures()?(this._timer=Wl(function(){this.state=rx,this.tryEmit()},Ny.interval,this),ax):rx}return ox},failTimeout:function(){return this._timer=Wl(function(){this.state=ox},this.options.interval,this),ox},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rx&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function gx(Oy,Ny){return Ny=Ny||{},Ny.recognizers=iy(Ny.recognizers,gx.defaults.preset),new Lx(Oy,Ny)}gx.VERSION="2.0.7",gx.defaults={domEvents:!1,touchAction:$1,enable:!0,inputTarget:null,inputClass:null,preset:[[Ex,{enable:!1}],[Tx,{enable:!1},["rotate"]],[bx,{direction:Gy}],[cx,{direction:Gy},["swipe"]],[Cx],[Cx,{event:"doubletap",taps:2},["tap"]],[Mx]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xx=1,Fx=2;function Lx(Oy,Ny){this.options=ey({},gx.defaults,Ny||{}),this.options.inputTarget=this.options.inputTarget||Oy,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Oy,this.input=Hy(this),this.touchAction=new nx(this,this.options.touchAction),Rx(this,!0),Yl(this.options.recognizers,function(yy){var Sy=this.add(new yy[0](yy[1]));yy[2]&&Sy.recognizeWith(yy[2]),yy[3]&&Sy.requireFailure(yy[3])},this)}Lx.prototype={set:function(Oy){return ey(this.options,Oy),Oy.touchAction&&this.touchAction.update(),Oy.inputTarget&&(this.input.destroy(),this.input.target=Oy.inputTarget,this.input.init()),this},stop:function(Oy){this.session.stopped=Oy?Fx:xx},recognize:function(Oy){var Ny=this.session;if(!Ny.stopped){this.touchAction.preventDefaults(Oy);var yy,Sy=this.recognizers,Fy=Ny.curRecognizer;(!Fy||Fy&&Fy.state&rx)&&(Fy=Ny.curRecognizer=null);for(var e1=0;e1<Sy.length;)yy=Sy[e1],Ny.stopped!==Fx&&(!Fy||yy==Fy||yy.canRecognizeWith(Fy))?yy.recognize(Oy):yy.reset(),!Fy&&yy.state&(ax|ix|hx)&&(Fy=Ny.curRecognizer=yy),e1++}},get:function(Oy){if(Oy instanceof IA)return Oy;for(var Ny=this.recognizers,yy=0;yy<Ny.length;yy++)if(Ny[yy].options.event==Oy)return Ny[yy];return null},add:function(Oy){if(Xl(Oy,"add",this))return this;var Ny=this.get(Oy.options.event);return Ny&&this.remove(Ny),this.recognizers.push(Oy),Oy.manager=this,this.touchAction.update(),Oy},remove:function(Oy){if(Xl(Oy,"remove",this))return this;if(Oy=this.get(Oy),Oy){var Ny=this.recognizers,yy=ly(Ny,Oy);yy!==-1&&(Ny.splice(yy,1),this.touchAction.update())}return this},on:function(Oy,Ny){if(Oy!==Rn&&Ny!==Rn){var yy=this.handlers;return Yl(my(Oy),function(Sy){yy[Sy]=yy[Sy]||[],yy[Sy].push(Ny)}),this}},off:function(Oy,Ny){if(Oy!==Rn){var yy=this.handlers;return Yl(my(Oy),function(Sy){Ny?yy[Sy]&&yy[Sy].splice(ly(yy[Sy],Ny),1):delete yy[Sy]}),this}},emit:function(Oy,Ny){this.options.domEvents&&kx(Oy,Ny);var yy=this.handlers[Oy]&&this.handlers[Oy].slice();if(!(!yy||!yy.length)){Ny.type=Oy,Ny.preventDefault=function(){Ny.srcEvent.preventDefault()};for(var Sy=0;Sy<yy.length;)yy[Sy](Ny),Sy++}},destroy:function(){this.element&&Rx(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Rx(Oy,Ny){var yy=Oy.element;if(yy.style){var Sy;Yl(Oy.options.cssProps,function(Fy,e1){Sy=fy(yy.style,e1),Ny?(Oy.oldCssProps[Sy]=yy.style[Sy],yy.style[Sy]=Fy):yy.style[Sy]=Oy.oldCssProps[Sy]||""}),Ny||(Oy.oldCssProps={})}}function kx(Oy,Ny){var yy=vn.createEvent("Event");yy.initEvent(Oy,!0,!0),yy.gesture=Ny,Ny.target.dispatchEvent(yy)}return ey(gx,{INPUT_START:xy,INPUT_MOVE:Ry,INPUT_END:Ly,INPUT_CANCEL:ky,STATE_POSSIBLE:Px,STATE_BEGAN:ax,STATE_CHANGED:ix,STATE_ENDED:hx,STATE_RECOGNIZED:rx,STATE_CANCELLED:sx,STATE_FAILED:ox,DIRECTION_NONE:Ey,DIRECTION_LEFT:Iy,DIRECTION_RIGHT:zy,DIRECTION_UP:Uy,DIRECTION_DOWN:Qy,DIRECTION_HORIZONTAL:Gy,DIRECTION_VERTICAL:Zy,DIRECTION_ALL:Ty,Manager:Lx,Input:Jy,TouchAction:nx,TouchInput:a1,MouseInput:L1,PointerEventInput:k1,TouchMouseInput:b1,SingleTouchInput:Y1,Recognizer:IA,AttrRecognizer:lx,Tap:Cx,Pan:cx,Swipe:bx,Pinch:Tx,Rotate:Ex,Press:Mx,on:oy,off:ay,each:Yl,merge:ry,extend:Rm,assign:ey,inherit:_g,bindFn:ty,prefixed:fy}),gx}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function qs(cr,vn,yn){var Rn=vn.getBoundingClientRect(),Bn=Rn.top,Co=Rn.left,Po=Rn.width,To=Rn.height;return yn&&(Co=Co+Po*yn.left,Bn=Bn+To*(1-yn.bottom-yn.height),Po=Po*yn.width,To=To*yn.height),new Vector2((cr.x-Co)/Po*2-1,-(cr.y-Bn)/To*2+1)}var Pl=new OrthographicCamera(-1,1,1,-1,0,1),po=new BufferGeometry;po.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));po.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));var Cn=new Mesh(po),vo=new Scene;vo.add(Cn);var xm=`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Ea=function(){function cr(vn,yn){var Rn;this.renderer=vn,this.material=new ShaderMaterial({vertexShader:(Rn=yn.vertex)!==null&&Rn!==void 0?Rn:xm,fragmentShader:yn.fragment,uniforms:Object.assign({inputBuffer:new Uniform(null)},yn.uniforms),defines:Object.assign({},yn.defines),blending:NoBlending,depthWrite:!1,depthTest:!1})}return cr.prototype.render=function(vn,yn){var Rn=this.renderer.getRenderTarget(),Bn=Cn.material;this.material.uniforms.inputBuffer.value=vn.texture,Cn.material=this.material,this.renderer.setRenderTarget(yn||null),this.renderer.render(vo,Pl),this.renderer.setRenderTarget(Rn),Cn.material=Bn},cr.prototype.dispose=function(){this.material.dispose()},cr}(),wm=`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Sm=`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,Mm=function(){function cr(vn){this.renderer=vn,this.material=new ShaderMaterial({vertexShader:wm,fragmentShader:Sm,uniforms:Object.assign({inputValue:new Uniform(new Vector3)}),blending:NoBlending,depthWrite:!1,depthTest:!1})}return cr.prototype.render=function(vn,yn){var Rn=this.renderer.getRenderTarget(),Bn=Cn.material;this.material.uniforms.inputValue.value.copy(vn),Cn.material=this.material,this.renderer.setRenderTarget(yn||null),this.renderer.render(vo,Pl),this.renderer.setRenderTarget(Rn),Cn.material=Bn},cr.prototype.dispose=function(){this.material.dispose()},cr}(),Em=`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`,Rl=function(cr){fe$6(vn,cr);function vn(yn){return cr.call(this,yn,{fragment:Em})||this}return vn}(Ea),Cm=`
precision mediump float;
precision mediump int;
uniform sampler2D depthBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = vec4(0.0,0.0,0.0,1.0);
  gl_FragDepthEXT = texture2D(depthBuffer, vUv).r;
}
`,Im=`

varying vec2 vUv;

void main() {
	vUv = uv;

	vec4 mvPosition = modelViewMatrix * vec4(position,1.0);

	gl_Position = projectionMatrix * mvPosition;
}
`,Tm=new OrthographicCamera(-1,1,1,-1,0,1),mo=new BufferGeometry;mo.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));mo.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));var Bl=new MeshBasicMaterial,U0=new Mesh(mo,Bl),Fl=new Scene;Fl.add(U0);var Pm=function(){function cr(vn){this.renderer=vn,this.material=new ShaderMaterial({vertexShader:Im,fragmentShader:Cm,uniforms:Object.assign({depthBuffer:new Uniform(null)}),blending:NoBlending,depthWrite:!0,depthTest:!0}),this.renderer.getContext()&&this.renderer.getContext()instanceof WebGLRenderingContext&&(this.material.extensions.fragDepth=!0)}return cr.prototype.render=function(vn,yn){var Rn=this.renderer.getRenderTarget();this.material.uniforms.depthBuffer.value=vn,U0.material=this.material,this.renderer.setRenderTarget(yn||null),this.renderer.render(Fl,Tm),this.renderer.setRenderTarget(Rn),U0.material=Bl},cr.prototype.dispose=function(){this.material.dispose()},cr}(),c0=new Vector2,Ao=function(cr){fe$6(vn,cr);function vn(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl=cr.call(this)||this,Xl=vn.parseArgs(yn);Wl.mode="",Wl.pending=new Set,Wl.userAction=Xl.initial.userAction,Wl.destroyed=!1,Wl.ident=Xl.ident,Wl.scene=Xl.scene,Wl.xrCustomObjectsScene=Xl.xrCustomObjectsScene,Wl.helper=Xl.helper,Wl.boundingMesh=Xl.boundingMesh,Wl.camera=Xl.camera,Wl.renderer=Xl.renderer,Wl.scissor=Xl.scissor,Wl.element=Xl.element,Wl.models=Xl.models,Wl.enableWheel=Xl.enableWheel,Wl.enableIOSEDR=(Rn=Xl.enableIOSEDR)!==null&&Rn!==void 0?Rn:!1,Wl.enableEDL=(Bn=Xl.enableEDL)!==null&&Bn!==void 0?Bn:!0,Wl.enableHQ=(Co=Xl.enableHQ)!==null&&Co!==void 0?Co:!0,Wl.works=Xl.works,Wl.imageOptions=Xl.imageOptions,Wl.videoTexture=Xl.videoTexture,Wl.extraElements=Xl.extraElements,Wl.initial=Xl.initial,Wl.currentPano=typeof Wl.initial.state.panoIndex=="number"?{workCode:(Io=(Po=Wl.initial.state.workCode)!==null&&Po!==void 0?Po:(To=Xl.works[0])===null||To===void 0?void 0:To.workCode)!==null&&Io!==void 0?Io:"",panoIndex:Wl.initial.state.panoIndex}:{workCode:Wl.initial.currentState.workCode,panoIndex:Wl.initial.currentState.panoIndex},Wl.needsRender=!0,Wl.modelSceneNeedsRender=!0,Wl.cameraMotion=new Ce$2({longitude:{value:Wl.camera.pose.longitude,circle:[0,Math.PI*2]},latitude:Wl.camera.pose.latitude,fov:Wl.camera.pose.fov}),Wl.inMomentumMovement=null,Wl.eventUnbinds=[Xl.element].concat(Xl.extraElements||[]).map(function(ey){return Wl.bindEvents(ey)}),Wl.pending.add("init-animation"),Wl.initAnimationReady=new Promise(function(ey){Ft$2.shared.add(function(){Wl.initAnimation().then(function(){Wl.pending.delete("init-animation"),ey()})},!0)}),Wl.initAnimationIsReady=!1,Wl.initAnimationReady.then(function(){return Wl.initAnimationIsReady=!0}),Wl.modelScene=Xl.modelScene;var Yl=new Vector2;Wl.renderer.getDrawingBufferSize(Yl),Wl.modelRenderTarget=Xl.modelRenderTarget,Wl.copyPass=new Rl(Wl.renderer),Wl.depthCopyPass=new Pm(Wl.renderer),Wl.screenBuffers=[],Wl.lastPostProcessingType=null,Wl.enableLayeringRendering=Xl.enableLayeringRendering;var Zl=($l=Wl.renderer)===null||$l===void 0?void 0:$l.getContext();return Wl.enableFragDepth=Wl.enableLayeringRendering&&(typeof WebGL2RenderingContext!="undefined"&&Zl instanceof WebGL2RenderingContext||Zl.getExtension("EXT_frag_depth")!==null),Wl}return vn.parseArgs=function(yn){return yn instanceof vn?yn:O$n({},yn)},vn.initAnimationEndState=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl,Xl=this.parseArgs(yn),Yl=Xl.initial,Zl=Yl.state,ey=Yl.currentState,Rm=typeof Zl.panoIndex=="number"?{workCode:(Co=(Rn=Zl.workCode)!==null&&Rn!==void 0?Rn:(Bn=Xl.works[0])===null||Bn===void 0?void 0:Bn.workCode)!==null&&Co!==void 0?Co:"",panoIndex:Zl.panoIndex}:{workCode:ey.workCode,panoIndex:ey.panoIndex};return O$n(O$n({},Rm),{mode:"",longitude:(Po=Zl.longitude)!==null&&Po!==void 0?Po:ey.longitude,latitude:(To=Zl.latitude)!==null&&To!==void 0?To:ey.latitude,fov:(Io=Zl.fov)!==null&&Io!==void 0?Io:ey.fov,offset:($l=Zl.offset)!==null&&$l!==void 0?$l:ey.offset,distance:(Wl=Zl.distance)!==null&&Wl!==void 0?Wl:ey.distance})},vn.prototype.updateConfiguration=function(yn){return!0},vn.prototype.destroy=function(){var yn;this.stopMomentumMovement(),this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var Rn=0,Bn=this.eventUnbinds;Rn<Bn.length;Rn++){var Co=Bn[Rn];Co()}this.copyEffect&&(this.copyEffect.dispose(),delete this.copyEffect),delete this.panState,(yn=this.pressState)===null||yn===void 0||yn.stop(),delete this.pressState},vn.prototype.isReady=function(){return this.inMomentumMovement===null&&this.pending.size===0&&this.cameraMotion.ended===!0},vn.prototype.bindExtraElement=function(yn){for(var Rn=0,Bn=this.eventUnbinds;Rn<Bn.length;Rn++){var Co=Bn[Rn];if(Co.element===yn)return}this.eventUnbinds.push(this.bindEvents(yn))},vn.prototype.unbindExtraElement=function(yn){for(var Rn=[],Bn=0,Co=this.eventUnbinds;Bn<Co.length;Bn++){var Po=Co[Bn];Po.element===yn?Po():Rn.push(Po)}this.eventUnbinds=Rn},vn.prototype.updateRenderSize=function(yn){this.needsRender=!0,this.modelSceneNeedsRender=!0,this.modelRenderTarget.setSize(yn.x,yn.y),this.screenBuffers.forEach(function(Rn){Rn!==null&&Rn.setSize(yn.x,yn.y)})},vn.prototype.updateModel=function(yn){this.needsRender=!0,this.modelSceneNeedsRender=!0},vn.prototype.updateWork=function(yn,Rn,Bn,Co){return this.works=yn,this.userAction=Co,!1},vn.prototype.updateTime=function(yn,Rn){if(!this.destroyed){var Bn={};this.cameraMotion.ended&&(this.cameraMotion.update(yn),Bn.longitude=this.cameraMotion.value.longitude,Bn.latitude=this.cameraMotion.value.latitude,Bn.fov=this.cameraMotion.value.fov),lr$1(Bn)&&this.setCamera(Bn)}},vn.prototype.render=function(yn,Rn){var Bn=this.renderer.getRenderTarget();this.updateScreenBuffer(Rn),this.enableFragDepth?(yn&&(this.renderer.setRenderTarget(this.modelRenderTarget),this.renderer.render(this.modelScene,this.camera)),this.depthCopyPass.render(this.modelRenderTarget.depthTexture,Bn),this.renderer.autoClearDepth=!1,this.renderer.autoClearColor=!0,this.copyPass.render(this.modelRenderTarget,Bn),this.renderer.setRenderTarget(Bn),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0):(this.renderer.render(this.modelScene,this.camera),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0)},vn.prototype.postProcessing=function(yn,Rn){this.destroyed},vn.prototype.updateCamera=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();var Po={};return yn.longitude!==void 0&&(Po.longitude=yn.longitude),yn.latitude!==void 0&&(Po.latitude=yn.latitude),yn.fov!==void 0&&(Po.fov=yn.fov),Co.cameraMotion.set(Po,Rn).catch(q$q)})},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();for(var Po=[],To=0,Io=yn;To<Io.length;To++){var $l=Io[To];Po.push({key:$l.key,progress:$l.progress,value:{longitude:$l.value.longitude,latitude:$l.value.latitude,fov:$l.value.fov}})}return Co.cameraMotion.setKeyframes(Po,Rn)})},vn.prototype.getTargetState=function(){var yn=this.cameraMotion.getKeyFrameSegment(Ae$3())[1];return O$n(O$n({},this.currentPano),{mode:this.mode,longitude:yn.value.longitude,latitude:yn.value.latitude,fov:yn.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance})},vn.prototype.initAnimation=function(){var yn=this.initial;yn.state,yn.currentState,yn.duration;var Rn=yn.userAction,Bn=vn.initAnimationEndState(this);return this.userAction=Rn,this.emit("initAnimation.start",X$c("initAnimation.start",{state:Bn,userAction:this.userAction})),this.emit("initAnimation.end",X$c("initAnimation.end",{state:Bn,userAction:this.userAction})),Promise.resolve()},vn.prototype.setCamera=function(yn){var Rn,Bn,Co,Po,To;yn===void 0&&(yn={});var Io=(Rn=yn.longitude)!==null&&Rn!==void 0?Rn:this.camera.pose.longitude,$l=(Bn=yn.latitude)!==null&&Bn!==void 0?Bn:this.camera.pose.latitude,Wl=(Co=yn.fov)!==null&&Co!==void 0?Co:this.camera.pose.fov,Xl=(Po=yn.distance)!==null&&Po!==void 0?Po:this.camera.pose.distance,Yl=(To=yn.offset)!==null&&To!==void 0?To:this.camera.pose.offset,Zl=ir$1(Io,this.camera.pose.longitude,Math.PI*2)||ir$1($l,this.camera.pose.latitude),ey=ir$1(Wl,this.camera.pose.fov),Rm=ir$1(Xl,this.camera.pose.distance),ry=oa(Yl,this.camera.pose.offset);(ey||Zl||ry||Rm)&&(this.camera.setFromPose({longitude:Io,latitude:$l,fov:Wl,distance:Xl,offset:Yl}),this.emit("camera.update",X$c("camera.update",{userAction:this.userAction,state:O$n(O$n({},this.currentPano),{mode:this.mode,longitude:Io,latitude:$l,fov:Wl,offset:Yl,distance:Xl})})),this.needsRender=!0,this.modelSceneNeedsRender=!0)},vn.prototype.stopMomentumMovement=function(){if(this.inMomentumMovement&&this.inMomentumMovement.event&&!this.inMomentumMovement.event.defaultPrevented&&!this.inMomentumMovement.event.isFinal){var yn=X$c("gesture.momentum",O$n(O$n({},this.inMomentumMovement.event),{isFirst:!1,isFinal:!0}));this.emit("gesture.momentum",yn)}this.inMomentumMovement=null},vn.prototype.onPanGesture=function(yn){this.stopMomentumMovement(),this.emit("gesture.pan",yn)},vn.prototype.onTapGesture=function(yn){this.stopMomentumMovement(),this.emit("gesture.tap",yn)},vn.prototype.onDblTapGesture=function(yn){this.stopMomentumMovement(),this.emit("gesture.dbltap",yn),!yn.defaultPrevented&&(yn.type="gesture.tap",this.onTapGesture(yn))},vn.prototype.onPressGesture=function(yn){this.stopMomentumMovement(),this.emit("gesture.press",yn)},vn.prototype.onPinchGesture=function(yn){this.stopMomentumMovement(),this.emit("gesture.pinch",yn)},vn.prototype.onMouseWheel=function(yn){this.stopMomentumMovement(),this.emit("gesture.mousewheel",yn)},vn.prototype.onMouseMove=function(yn){this.stopMomentumMovement(),this.emit("gesture.mousemove",yn)},vn.prototype.relativeClientPosition=function(yn){return qs(yn,this.element,this.scissor)},vn.prototype.bindEvents=function(yn){var Rn=this,Bn=function(sy){var cy=qs(sy,Rn.element,Rn.scissor);return!(Math.abs(cy.x)>1||Math.abs(cy.y)>1)},Co=new fi.Manager(yn),Po=function(sy){var cy=sy.session;return cy.firstInput||null},To=new fi.Pan({threshold:10,pointers:0}),Io=new fi.Tap({interval:410}),$l=new fi.Pinch({threshold:0,pointers:2});Co.add([To,Io,$l]),Co.on("panstart pan",function(sy){var cy=Po(Co);if(!(cy&&!Bn(cy.center))){var fy=X$c("gesture.pan",{target:sy.target,pointerType:sy.pointerType,srcEvent:sy.srcEvent,pointers:sy.pointers.map(function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}),isFirst:sy.isFirst,isFinal:sy.isFinal,scale:sy.scale,center:function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}(sy.center),velocityX:sy.velocityX,velocityY:sy.velocityY,overallVelocityX:sy.overallVelocityX,overallVelocityY:sy.overallVelocityY,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onPanGesture(fy),ny()}}),Co.on("tap",function(sy){if(!(sy.pointerType==="mouse"&&sy.srcEvent.button!==0)){var cy=Po(Co);if(!(cy&&!Bn(cy.center))){var fy=X$c("gesture.tap",{target:sy.target,pointerType:sy.pointerType,srcEvent:sy.srcEvent,pointers:sy.pointers.map(function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}),isFirst:!0,isFinal:!0,scale:sy.scale,center:function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}(sy.center),velocityX:sy.velocityX,velocityY:sy.velocityY,overallVelocityX:sy.overallVelocityX,overallVelocityY:sy.overallVelocityY,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onTapGesture(fy),ny()}}}),Co.on("pinchstart pinch pinchend",function(sy){var cy=Po(Co);if(!(cy&&!Bn(cy.center))){var fy=X$c("gesture.pinch",{target:sy.target,pointerType:sy.pointerType,srcEvent:sy.srcEvent,pointers:sy.pointers.map(function(vy){var dy,Ay=Rn.relativeClientPosition(vy),gy=new Raycaster;return gy.params.Points={threshold:.1},gy.setFromCamera(Ay,Rn.camera),{x:vy.x,y:vy.y,delta:(dy=vy.delta)!==null&&dy!==void 0?dy:0,buttons:0,coords:Ay,raycaster:gy}}),isFirst:sy.type==="pinchstart",isFinal:sy.type==="pinchend",scale:sy.scale,center:function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}(sy.center),velocityX:sy.velocityX,velocityY:sy.velocityY,overallVelocityX:sy.overallVelocityX,overallVelocityY:sy.overallVelocityY,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onPinchGesture(fy),ny()}}),Co.on("dbltap",function(sy){if(!(sy.pointerType==="mouse"&&sy.srcEvent.button!==0)){var cy=Po(Co);if(!(cy&&!Bn(cy.center))){var fy=X$c("gesture.dbltap",{target:sy.target,pointerType:sy.pointerType,srcEvent:sy.srcEvent,pointers:sy.pointers.map(function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}),isFirst:!0,isFinal:!0,scale:sy.scale,center:function(vy){var dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;return Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera),{x:vy.x,y:vy.y,delta:0,buttons:0,coords:dy,raycaster:Ay}}(sy.center),velocityX:sy.velocityX,velocityY:sy.velocityY,overallVelocityX:sy.overallVelocityX,overallVelocityY:sy.overallVelocityY,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onDblTapGesture(fy),ny()}}});var Wl=null,Xl=null,Yl=function(sy,cy,fy){var vy={x:fy.clientX,y:fy.clientY},dy=Rn.relativeClientPosition(vy),Ay=new Raycaster;Ay.params.Points={threshold:.1},Ay.setFromCamera(dy,Rn.camera);var gy=O$n(O$n({},vy),{coords:dy,raycaster:Ay,buttons:fy.buttons,delta:0}),wy=sy==="pinchend"?cy:cy-fy.deltaY/280,Cy=X$c("gesture.pinch",{target:fy.target,pointerType:"mouse",srcEvent:fy,pointers:[O$n({},gy)],isFirst:sy==="pinchstart",isFinal:sy==="pinchend",scale:pe$4(wy,.1,10),center:O$n({},gy),velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});return Cy},Zl=function(sy){var cy,fy={x:sy.clientX,y:sy.clientY};if(Bn(fy)){if(sy.preventDefault(),sy.ctrlKey){var vy=(cy=Wl==null?void 0:Wl.prevEvent.scale)!==null&&cy!==void 0?cy:1,dy=Yl(Wl?"pinch":"pinchstart",vy,sy);Wl===null?Wl={firstEvent:dy,prevEvent:dy}:Wl.prevEvent=dy,Rn.onPinchGesture(dy),Xl!==null&&window.clearTimeout(Xl),Xl=window.setTimeout(function(){var Dy;Xl=null;var qy=(Dy=Wl==null?void 0:Wl.prevEvent.scale)!==null&&Dy!==void 0?Dy:1,Xy=Yl("pinchend",qy,sy);Wl=null,Rn.onPinchGesture(Xy)},200)}else{var Ay=(Math.abs(sy.deltaY)>Math.abs(sy.deltaX)?sy.deltaY:sy.deltaX)/-60,gy=Rn.mouseWheelState!==void 0,wy={x:sy.clientX,y:sy.clientY},Cy=Rn.relativeClientPosition(wy),My=new Raycaster;My.params.Points={threshold:.1},My.setFromCamera(Cy,Rn.camera);var Py=O$n(O$n({},wy),{coords:Cy,raycaster:My,buttons:sy.buttons,delta:Ay}),dy=X$c("gesture.mousewheel",{target:sy.target,pointerType:"mouse",srcEvent:sy,pointers:[O$n({},Py)],isFirst:gy,isFinal:!1,scale:0,center:O$n({},Py),velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onMouseWheel(dy),Rn.mouseWheelState&&clearTimeout(Rn.mouseWheelState.timer),Rn.mouseWheelState={timer:setTimeout(function(){delete Rn.mouseWheelState;var qy=X$c("gesture.mousewheel",{target:sy.target,pointerType:"mouse",srcEvent:sy,pointers:[O$n(O$n({},Py),{delta:0})],isFirst:!1,isFinal:!0,scale:0,center:O$n(O$n({},Py),{delta:0}),velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.onMouseWheel(qy)},100)}}ny()}},ey=function(sy){if(!ci){if(!Bn({x:sy.clientX,y:sy.clientY})){Rm();return}var cy=!1;Rn.mouseMoveState||(cy=!0);var fy={x:sy.clientX,y:sy.clientY},vy=Rn.relativeClientPosition(fy),dy=new Raycaster;dy.params.Points={threshold:.1},dy.setFromCamera(vy,Rn.camera);var Ay=O$n(O$n({},fy),{coords:vy,raycaster:dy,buttons:sy.buttons,delta:0}),gy=X$c("gesture.mousemove",{target:sy.target,pointerType:"mouse",srcEvent:sy,pointers:[O$n({},Ay)],isFirst:cy,isFinal:!1,scale:0,center:O$n({},Ay),velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});Rn.mouseMoveState={timeStamp:Ae$3(),event:gy},Rn.onMouseMove(gy),Rn.pressState&&Math.abs(sy.clientX-Rn.pressState.event.center.y)>10&&Math.abs(sy.clientY-Rn.pressState.event.center.y)>10&&ny()}},Rm=function(){if(Rn.mouseMoveState){var sy=X$c(Rn.mouseMoveState.event.type,O$n(O$n({},Rn.mouseMoveState.event),{isFinal:!0}));delete Rn.mouseMoveState,Rn.onMouseMove(sy)}ny()},ry=function(sy){if(!Bn(sy.center)){ny();return}var cy=!1;Rn.pressState||(cy=!0,Rn.pressState={event:sy,timeStamp:Ae$3(),stop:q$q});var fy=Ae$3()-Rn.pressState.timeStamp,vy=X$c(Rn.pressState.event.type,O$n(O$n({},Rn.pressState.event),{isFirst:cy,isFinal:!1,center:O$n(O$n({},Rn.pressState.event.center),{delta:fy}),pointers:Rn.pressState.event.pointers.map(function(dy){return O$n(O$n({},dy),{delta:fy})})}));Rn.onPressGesture(vy),Rn.pressState&&(Rn.pressState.stop=Ft$2.shared.add(function(dy){ry(sy)},!0,1))},_g=function(sy){if(ny(),!(sy.touches.length>1||sy.changedTouches.length<=0)){var cy={x:sy.changedTouches[0].clientX,y:sy.changedTouches[0].clientY},fy=Rn.relativeClientPosition(cy),vy=new Raycaster;vy.params.Points={threshold:.1},vy.setFromCamera(fy,Rn.camera);var dy=O$n(O$n({},cy),{coords:fy,raycaster:vy,buttons:0,delta:0}),Ay=X$c("gesture.press",{target:sy.target,pointerType:"touch",srcEvent:sy,pointers:[O$n({},dy)],isFirst:!1,isFinal:!1,scale:0,center:dy,velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});ry(Ay)}},ty=function(sy){ny();var cy={x:sy.clientX,y:sy.clientY},fy=Rn.relativeClientPosition(cy),vy=new Raycaster;vy.params.Points={threshold:.1},vy.setFromCamera(fy,Rn.camera);var dy=O$n(O$n({},cy),{coords:fy,raycaster:vy,buttons:sy.buttons,delta:0}),Ay=X$c("gesture.press",{target:sy.target,pointerType:"mouse",srcEvent:sy,pointers:[O$n({},dy)],isFirst:!1,isFinal:!1,scale:0,center:dy,velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});ry(Ay)},ny=function(){var sy;if(Rn.pressState){var cy=Ae$3()-Rn.pressState.timeStamp,fy=X$c(Rn.pressState.event.type,O$n(O$n({},Rn.pressState.event),{center:O$n(O$n({},Rn.pressState.event.center),{delta:cy}),isFirst:!1,isFinal:!0,pointers:Rn.pressState.event.pointers.map(function(vy){return O$n(O$n({},vy),{delta:cy})})}));Rn.onPressGesture(fy),(sy=Rn.pressState)===null||sy===void 0||sy.stop(),delete Rn.pressState}},iy=null,oy=function(sy){var cy,fy=!1,vy=!1;switch(sy.type){case"gesturestart":fy=!0;break;case"gestureend":vy=!0;break}var dy={x:sy.clientX,y:sy.clientY},Ay=Rn.relativeClientPosition(dy),gy=new Raycaster;gy.params.Points={threshold:.1},gy.setFromCamera(Ay,Rn.camera);var wy=O$n(O$n({},dy),{coords:Ay,raycaster:gy,buttons:0,delta:0}),Cy=X$c("gesture.pinch",{target:sy.target,pointerType:"mouse",srcEvent:sy,pointers:[O$n({},wy)],isFirst:fy,isFinal:vy,scale:(cy=sy.scale)!==null&&cy!==void 0?cy:1,center:O$n({},wy),velocityX:0,velocityY:0,overallVelocityX:0,overallVelocityY:0,userAction:!0,state:O$n(O$n({mode:Rn.mode},Rn.currentPano),$e(Rn.camera.pose))});return Cy},ay=function(sy){if(sy.preventDefault(),!ci){var cy=oy(sy);iy={firstEvent:cy};var fy=iy.firstEvent;fy&&!Bn(fy.center)||Rn.onPinchGesture(cy)}},uy=function(sy){if(sy.preventDefault(),!ci&&iy){var cy=oy(sy),fy=iy.firstEvent;fy&&!Bn(fy.center)||Rn.onPinchGesture(cy)}},hy=function(sy){if(sy.preventDefault(),!ci&&iy){var cy=oy(sy),fy=iy.firstEvent;iy=null,!(fy&&!Bn(fy.center))&&Rn.onPinchGesture(cy)}},my=function(sy){if(sy&&typeof sy.preventDefault=="function"&&sy.currentTarget===yn&&sy.preventDefault(),typeof getSelection=="function"){var cy=getSelection();cy&&cy.focusNode&&(cy.removeAllRanges&&cy.removeAllRanges(),cy.empty&&cy.empty())}};this.enableWheel&&yn.addEventListener("wheel",Zl,{passive:!1}),yn.addEventListener("mousemove",ey,!1),yn.addEventListener("mouseout",Rm,!1),yn.addEventListener("touchstart",_g,{passive:!0}),yn.addEventListener("touchend",ny,!1),yn.addEventListener("touchcancel",ny,!1),yn.addEventListener("mousedown",ty,!1),yn.addEventListener("mouseup",ny,!1),yn.addEventListener("gesturestart",ay,{passive:!1}),yn.addEventListener("gesturechange",uy,{passive:!1}),yn.addEventListener("gestureend",hy,{passive:!1}),yn.addEventListener("touchstart",my,{passive:!1}),yn.addEventListener("contextmenu",my,!1);var ly=function(){Co.destroy(),yn.removeEventListener("wheel",Zl,!1),yn.removeEventListener("mousemove",ey,!1),yn.removeEventListener("mouseout",Rm,!1),yn.removeEventListener("touchstart",_g,!1),yn.removeEventListener("touchend",ny,!1),yn.removeEventListener("touchcancel",ny,!1),yn.removeEventListener("mousedown",ty,!1),yn.removeEventListener("mouseup",ny,!1),yn.removeEventListener("gesturestart",ay,!1),yn.removeEventListener("gesturechange",uy,!1),yn.removeEventListener("gestureend",hy,!1),yn.removeEventListener("touchstart",my,!1),yn.removeEventListener("contextmenu",my,!1)};return Object.assign(ly,{element:yn})},vn.prototype.preloadPano=function(yn,Rn){var Bn=this;Rn===void 0&&(Rn=q$q);var Co=this.works.getResolvedObserver(yn);if(!Co)return Promise.resolve();var Po=["right","left","up","down","front","back"];return Promise.all(Po.map(function(To){var Io=O$n({key:"pano.".concat(_e$3(yn),".").concat(To)},Xt$2(Bn.imageOptions,["size","format","quality","mappings"])),$l=Co.images[To],Wl=En($l,Bn.imageOptions.transform,Io);return gt$4(Co.work).preload(Wl,{timeout:500})})).then(function(){return Rn(yn),yn})},vn.prototype.updateScreenBuffer=function(yn){var Rn,Bn,Co,Po,To,Io;if(this.lastPostProcessingType!==yn)if(this.lastPostProcessingType=yn,yn==="luminance"){if(this.screenBuffers.length===0){var $l=this.renderer.getDrawingBufferSize(c0);this.screenBuffers=[new WebGLRenderTarget($l.x,$l.y,{generateMipmaps:!1,encoding:(Bn=(Rn=this.renderer)===null||Rn===void 0?void 0:Rn.outputEncoding)!==null&&Bn!==void 0?Bn:sRGBEncoding}),this.enableFragDepth?this.modelRenderTarget:null]}}else if(yn==="edl"){if(this.screenBuffers.length===0){var $l=this.renderer.getDrawingBufferSize(c0);this.screenBuffers=[new WebGLRenderTarget($l.x,$l.y,{generateMipmaps:!1,encoding:(Po=(Co=this.renderer)===null||Co===void 0?void 0:Co.outputEncoding)!==null&&Po!==void 0?Po:sRGBEncoding,minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat,type:FloatType}),this.enableFragDepth?this.modelRenderTarget:null]}this.models.setMaterial({useEDL:!0})}else if(yn==="hq"){if(this.screenBuffers.length===0){var $l=this.renderer.getDrawingBufferSize(c0),Wl=new WebGLRenderTarget($l.x,$l.y,{generateMipmaps:!1,minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat,type:FloatType,depthTexture:new DepthTexture($l.x,$l.y,UnsignedIntType)});Wl.depthTexture.format=DepthFormat,Wl.depthBuffer=!0;var Xl=new WebGLRenderTarget($l.x,$l.y,{generateMipmaps:!1,encoding:(Io=(To=this.renderer)===null||To===void 0?void 0:To.outputEncoding)!==null&&Io!==void 0?Io:sRGBEncoding,minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat,type:FloatType,depthTexture:Wl.depthTexture});this.screenBuffers=[Wl,Xl,this.enableFragDepth?this.modelRenderTarget:null]}this.models.setMaterial({useHQDepth:!0,useHQWeight:!1,pointShape:"CIRCLE"})}else this.screenBuffers&&(this.screenBuffers.forEach(function(Yl){Yl!==null&&Yl.dispose()}),this.screenBuffers=[]),this.models.setMaterial({useEDL:!1,useHQDepth:!1,useHQWeight:!1})},vn}(X0),Ar={defaultLongitude:Math.PI/4,defaultLatitude:Math.PI/4,defaultFov:80,maxFov:120,minFov:20,maxLatitude:+Math.PI/2,minLatitude:-Math.PI/2,intersectMeshCreator:function(){return new ho}},Q0=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn,Co=vn.parseArgs(yn);return Rn=cr.call(this,Co)||this,Rn.mode="Floorplan",Rn.defaultLongitude=Co.defaultLongitude,Rn.defaultLatitude=Co.defaultLatitude,Rn.defaultFov=Co.defaultFov,Rn.maxFov=Co.maxFov,Rn.minFov=Co.minFov,Rn.maxLatitude=Co.maxLatitude,Rn.minLatitude=Co.minLatitude,Rn.locationMotion=new Ce$2({x:Rn.camera.pose.offset.x,y:Rn.camera.pose.offset.y,z:Rn.camera.pose.offset.z,distance:Rn.camera.pose.distance}),Rn.modelAlphaMotion=new Ce$2({modelAlpha:(Bn=Rn.models.getMaterial().modelAlpha)!==null&&Bn!==void 0?Bn:0}),Rn.perspToOrthoMotion=new Ce$2({perspToOrtho:Rn.camera.perspToOrtho.x}),Rn.currentTapId=null,Rn.intersectMeshCreator=Co.intersectMeshCreator,Rn.intersectMesh=Rn.intersectMeshCreator(),Rn.intersectMesh.name="intersect",Rn.intersectMesh.visible=!1,Rn.helper.add(Rn.intersectMesh),Rn}return vn.distanceFromModel=function(yn,Rn,Bn){var Co=yn.bounding,Po=Math.pow(Math.pow(Co.max.x-Co.min.x+1,2)+Math.pow(Co.max.y-Co.min.y+1,2)+Math.pow(Co.max.z-Co.min.z+1,2),1/2),To=Po/2/Math.tan(Math.PI*Rn/360);return Bn<1&&(To=To/Bn),isNaN(To)?Po:To},vn.parseArgs=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl;if(yn instanceof vn)return yn;var Xl=cr.parseArgs.call(this,yn);return O$n(O$n({},Xl),{defaultLongitude:(Rn=yn.defaultLongitude)!==null&&Rn!==void 0?Rn:Ar.defaultLongitude,defaultLatitude:(Bn=yn.defaultLatitude)!==null&&Bn!==void 0?Bn:Ar.defaultLatitude,defaultFov:(Co=yn.defaultFov)!==null&&Co!==void 0?Co:Ar.defaultFov,maxFov:(Po=yn.maxFov)!==null&&Po!==void 0?Po:Ar.maxFov,minFov:(To=yn.minFov)!==null&&To!==void 0?To:Ar.minFov,maxLatitude:(Io=yn.maxLatitude)!==null&&Io!==void 0?Io:Ar.maxLatitude,minLatitude:($l=yn.minLatitude)!==null&&$l!==void 0?$l:Ar.minLatitude,intersectMeshCreator:(Wl=yn.intersectMeshCreator)!==null&&Wl!==void 0?Wl:Ar.intersectMeshCreator})},vn.initAnimationEndState=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl=this.parseArgs(yn),Xl=yn.initial,Yl=Xl.state,Zl=Xl.currentState,ey=typeof Yl.panoIndex=="number"?{workCode:(Co=(Rn=Yl.workCode)!==null&&Rn!==void 0?Rn:(Bn=Wl.works[0])===null||Bn===void 0?void 0:Bn.workCode)!==null&&Co!==void 0?Co:"",panoIndex:Yl.panoIndex}:{workCode:Zl.workCode,panoIndex:Zl.panoIndex},Rm=O$n(O$n({},ey),{mode:"Floorplan",longitude:(Po=Yl.longitude)!==null&&Po!==void 0?Po:N0(Zl.mode)?Zl.longitude:Wl.defaultLongitude,latitude:pe$4((To=Yl.latitude)!==null&&To!==void 0?To:Zl.mode==="Floorplan"?Zl.latitude:Wl.defaultLatitude,Wl.minLatitude,Wl.maxLatitude),fov:(Io=Yl.fov)!==null&&Io!==void 0?Io:Wl.defaultFov,offset:Yl.offset?Yl.offset.clone():yn.models.bounding.getCenter(new Vector3),distance:($l=Yl.distance)!==null&&$l!==void 0?$l:vn.distanceFromModel(Wl.models,Wl.defaultFov,Wl.camera.aspect)});return Rm},vn.prototype.updateConfiguration=function(yn){var Rn=cr.prototype.updateConfiguration.call(this,yn);if(Rn===!1)return!1;var Bn=O$n(O$n({},Ar),Ma(yn));if(this.defaultLongitude!==Bn.defaultLongitude&&(this.defaultLongitude=Bn.defaultLongitude),this.defaultLatitude!==Bn.defaultLatitude&&(this.defaultLatitude=Bn.defaultLatitude),this.defaultFov!==Bn.defaultFov&&(this.defaultFov=Bn.defaultFov),this.maxFov!==Bn.maxFov&&(this.maxFov=Bn.maxFov),this.minFov!==Bn.minFov&&(this.minFov=Bn.minFov),this.maxLatitude!==Bn.maxLatitude&&(this.maxLatitude=Bn.maxLatitude),this.minLatitude!==Bn.minLatitude&&(this.minLatitude=Bn.minLatitude),this.intersectMeshCreator!==Bn.intersectMeshCreator){this.intersectMeshCreator=Bn.intersectMeshCreator;var Co=this.intersectMesh;this.intersectMesh=this.intersectMeshCreator(),this.intersectMesh.name=Co.name,this.intersectMesh.visible=Co.visible;var Po=this.intersectMesh.parent;Po&&Po.add(this.intersectMesh),Co.dispose()}return!0},vn.prototype.destroy=function(){cr.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.panState,this.intersectMesh.dispose(),this.helper.remove(this.intersectMesh)},vn.prototype.isReady=function(){return this.locationMotion.ended===!1?!1:cr.prototype.isReady.call(this)},vn.prototype.updateWork=function(yn,Rn,Bn,Co){var Po;return this.works=yn,this.updateCamera(Rn,(Po=Bn.duration)!==null&&Po!==void 0?Po:0,Co),!0},vn.prototype.updateModel=function(yn){cr.prototype.updateModel.call(this,yn);var Rn=yn.bounding.getCenter(new Vector3),Bn=vn.distanceFromModel(yn,this.defaultFov,this.camera.aspect);this.updateCamera({offset:Rn,distance:Bn},0,!0)},vn.prototype.updateCamera=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();var Po={},To={};return yn.distance!==void 0&&(Po.distance=yn.distance),yn.offset!==void 0&&(Po.x=yn.offset.x,Po.y=yn.offset.y,Po.z=yn.offset.z),yn.longitude!==void 0&&(To.longitude=yn.longitude),yn.latitude!==void 0&&(To.latitude=yn.latitude),yn.fov!==void 0&&(To.fov=yn.fov),Co.locationMotion.set(Po,Rn).catch(q$q),Co.cameraMotion.set(To,Rn).catch(q$q)})},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();for(var Po=[],To=[],Io=0,$l=yn;Io<$l.length;Io++){var Wl=$l[Io];Po.push({key:Wl.key,progress:Wl.progress,value:{distance:Wl.value.distance,x:Wl.value.offset.x,y:Wl.value.offset.x,z:Wl.value.offset.x}}),To.push({key:Wl.key,progress:Wl.progress,value:{longitude:Wl.value.longitude,latitude:Wl.value.latitude,fov:Wl.value.fov}})}return Co.locationMotion.setKeyframes(Po,Rn).catch(q$q),Co.cameraMotion.setKeyframes(yn,Rn)})},vn.prototype.updateTime=function(yn,Rn){if(!this.destroyed){var Bn={},Co={};if(this.modelAlphaMotion.ended||(this.modelAlphaMotion.update(yn),Bn.modelAlpha=this.modelAlphaMotion.value.modelAlpha),this.perspToOrthoMotion.ended||(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),this.locationMotion.ended||(this.locationMotion.update(yn),Co.distance=this.locationMotion.value.distance,Co.offset=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(yn),Co.longitude=this.cameraMotion.value.longitude,Co.latitude=this.cameraMotion.value.latitude,Co.fov=this.cameraMotion.value.fov),lr$1(Bn)||this.models.setMaterial(Bn),lr$1(Co)||this.setCamera(Co),this.intersectMesh&&this.intersectMesh.parent){var Po=this.camera.position.distanceTo(this.intersectMesh.position),To=2*Math.tan(.5*this.camera.fov/180*Math.PI),Io=Po*To/5;this.intersectMesh.scale.setScalar(Io)}}},vn.prototype.getTargetState=function(){var yn=this.cameraMotion.getKeyFrameSegment(Ae$3())[1],Rn=this.locationMotion.getKeyFrameSegment(Ae$3())[1];return O$n(O$n({},this.currentPano),{mode:this.mode,longitude:yn.value.longitude,latitude:yn.value.latitude,fov:yn.value.fov,offset:new Vector3(Rn.value.x,Rn.value.y,Rn.value.z),distance:Rn.value.distance})},vn.prototype.initAnimation=function(){var yn=this;return this.destroyed?Promise.resolve():new Promise(function(Rn){var Bn=yn.initial;Bn.state,Bn.currentState;var Co=Bn.duration,Po=Bn.userAction;yn.userAction=Po;var To=vn.initAnimationEndState(yn),Io=Xt$2(To,["longitude","latitude","fov"]),$l={x:To.offset.x,y:To.offset.y,z:To.offset.z,distance:To.distance},Wl={modelAlpha:1},Xl={perspToOrtho:0};yn.emit("initAnimation.start",X$c("initAnimation.start",{state:To,userAction:yn.userAction})),yn.modelAlphaMotion.set(Wl,Co/3).catch(q$q),yn.perspToOrthoMotion.set(Xl,Co).catch(q$q),yn.cameraMotion.set(Io,Co).catch(q$q),yn.locationMotion.set($l,Co).then(function(){yn.emit("initAnimation.end",X$c("initAnimation.end",{state:To,userAction:yn.userAction}))},function(Yl){var Zl=O$n(O$n(O$n({},yn.currentPano),{mode:yn.mode}),$e(yn.camera.pose));yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Zl,userAction:yn.userAction}))}).then(function(){Rn()})})},vn.prototype.updateRenderSize=function(yn){this.needsRender=!0,this.modelSceneNeedsRender=!0,this.screenBuffers.forEach(function(Rn){Rn!==null&&Rn.setSize(yn.x,yn.y)})},vn.prototype.getForwardObserverOrNot=function(yn){var Rn=this,Bn=this.models.intersectRaycaster(yn)[0];if(!Bn)return null;var Co=this.works.resolvedObservers.filter(function($l){for(var Wl,Xl=0,Yl=Rn.models;Xl<Yl.length;Xl++){var Zl=Yl[Xl];if(Zl.visible&&((Wl=Zl.work)===null||Wl===void 0?void 0:Wl.workCode)===$l.work.workCode)return!0}return!1}),Po=zr$1(Co,function($l){return $l.standingPosition.distanceTo(Bn.point)},!0),To=Po[0],Io=Po[1];return To&&Io<10?To:null},vn.prototype.coordinatesForOffset=function(yn){var Rn=this.renderer.getSize(new Vector2);return{longitude:-2*yn.x/(Rn.x*this.scissor.width),latitude:2*yn.y/(Rn.y*this.scissor.height)}},vn.prototype.requestMomentumMovement=function(yn,Rn,Bn,Co){var Po=this;if(this.inMomentumMovement!==null){for(var To=O$n({},Bn),Io={longitude:0,latitude:0},$l=0;$l<Co;$l++)To.longitude*=.996,To.latitude*=.996*.998,Io.longitude+=To.longitude,Io.latitude+=To.latitude;var Wl=gn(this.cameraMotion.value.longitude+Io.longitude),Xl=pe$4(this.cameraMotion.value.latitude+Io.latitude,this.minLatitude,this.maxLatitude),Yl=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:Wl,latitude:Xl,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}),Zl=!(To.longitude>1e-4||To.longitude<-1e-4||To.latitude>1e-4||To.latitude<-1e-4),ey=X$c("gesture.momentum",O$n(O$n({},yn),{isFirst:Rn,isFinal:Zl,state:Yl}));if(this.inMomentumMovement.event=ey,this.emit("gesture.momentum",ey),yn.defaultPrevented){this.inMomentumMovement=null;return}this.inMomentumMovement&&(this.cameraMotion.set({longitude:Wl,latitude:Xl},0).catch(q$q),Zl?this.inMomentumMovement=null:Ft$2.shared.add(function(Rm,ry){Po.requestMomentumMovement(yn,!1,To,ry|0)},!0,1))}},vn.prototype.onPanGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh();var Rn=this.panState,Bn=yn.pointers.length;if(yn.isFinal?delete this.panState:this.panState={pointerLength:Bn,x:yn.center.x,y:yn.center.y},!(typeof Rn=="undefined"||Rn.pointerLength!==Bn)){var Co={x:yn.center.x-Rn.x,y:yn.center.y-Rn.y},Po=this.relativeClientPosition(yn.center),To=this.camera.pose.latitude<Math.PI/6||Po.y<0?1:-1;Co.x*=To;var Io=this.coordinatesForOffset(Co),$l=gn(this.cameraMotion.value.longitude+Io.longitude),Wl=pe$4(this.cameraMotion.value.latitude+Io.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(yn.overallVelocityX)>.2&&Math.atan2(Math.abs(yn.overallVelocityY),Math.abs(yn.overallVelocityX))<Math.PI/6.923&&(Wl=this.cameraMotion.value.latitude);var Xl=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:$l,latitude:Wl,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance});if(yn.state=Xl,this.emit("gesture.pan",yn),!yn.defaultPrevented&&(this.cameraMotion.set({longitude:Xl.longitude,latitude:Xl.latitude},0).catch(q$q),yn.isFinal)){var Yl=yn.velocityX*To,Zl=yn.velocityY;this.inMomentumMovement={uuid:Lt$1()},this.requestMomentumMovement(yn,!0,this.coordinatesForOffset({x:Yl,y:Zl}),0)}}},vn.prototype.onPinchGesture=function(yn){var Rn;if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement();var Bn=(Rn=this.pinchState)===null||Rn===void 0?void 0:Rn.fov;if(yn.isFirst){this.pinchState={x:yn.center.x,y:yn.center.y,fov:this.cameraMotion.value.fov};return}if(yn.isFinal&&(delete this.panState,delete this.pinchState),typeof Bn!="undefined"){var Co=pe$4(Bn/yn.scale,this.minFov,this.maxFov);yn.state.fov=Co,this.emit("gesture.pinch",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Co},0).catch(q$q),this.onPanGesture(yn))}}},vn.prototype.onMouseMove=function(yn){var Rn,Bn;if(this.intersectMesh.parent&&!this.panState){if(this.emit("gesture.mousemove",yn),yn.defaultPrevented){this.hideIntersectMesh();return}var Co=yn.center.raycaster;if(yn.isFinal&&this.intersectMesh.parent&&this.intersectMesh.visible===!0){this.hideIntersectMesh();return}var Po=this.models.intersectRaycaster(Co)[0],To=X$c("intersect.update",{raycaster:Co,intersection:Po!=null?Po:null,object:this.intersectMesh});if(this.emit("intersect.update",To),To.defaultPrevented){this.hideIntersectMesh();return}if(Po){var Io=(Bn=(Rn=Po.face)===null||Rn===void 0?void 0:Rn.normal)!==null&&Bn!==void 0?Bn:new Vector3().copy(Co.ray.direction).multiplyScalar(-1),$l=Io.clone(),Wl=Po.point.clone();this.intersectMesh.position.copy(Wl);var Xl=Wl.clone().add($l);if(this.intersectMesh.lookAt(Xl),Math.abs(Io.y)>.99){var Yl=this.camera.position.clone().sub(Wl);this.intersectMesh.rotation.z=-Math.atan2(Yl.z,Yl.x)}this.intersectMesh.visible=!0,this.needsRender=!0}else this.hideIntersectMesh()}},vn.prototype.onMouseWheel=function(yn){if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=this,Bn=Rn.minFov,Co=Rn.maxFov,Po=pe$4(this.camera.fov-yn.center.delta,Bn,Co);yn.state.fov=Po,this.emit("gesture.mousewheel",yn),!yn.defaultPrevented&&this.cameraMotion.set({fov:Po},0).catch(q$q)}},vn.prototype.onTapGesture=function(yn){var Rn=this;this.userAction=!0,this.stopMomentumMovement();var Bn=yn.center.raycaster,Co=this.getForwardObserverOrNot(Bn);if(!Co)this.emit("gesture.tap",yn);else{var Po={longitude:this.camera.pose.longitude,latitude:0},To=O$n(O$n({},yn.state),{mode:"Panorama",workCode:Co.pano.workCode,panoIndex:Co.pano.panoIndex,longitude:Po.longitude,latitude:Po.latitude,offset:Co?Co.position.clone():new Vector3,distance:0});if(yn.state=To,this.emit("gesture.tap",yn),!yn.defaultPrevented&&(this.emit("pano.select",X$c("pano.select",{prevPano:this.currentPano,state:To,userAction:yn.userAction,options:Po,progress:0,error:null})),Co&&Co.active)){var Io=this.currentTapId=Lt$1();this.preloadPano(Co.pano).then(function($l){Rn.currentTapId===Io&&Rn.emit("pano.request",X$c("pano.request",{userAction:!0,prevPano:Rn.currentPano,progress:0,state:To,options:Po,error:null}))})}}},vn.prototype.onDblTapGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=this.cameraMotion.value.fov,Bn=this.minFov-Rn<Rn-this.defaultFov?this.minFov:this.defaultFov;yn.state.fov=Bn,this.emit("gesture.dbltap",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Bn},360).catch(q$q),this.hideIntersectMesh())},vn.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.needsRender=!0},vn}(Ao);O$n({},xa(Ar,["defaultLongitude","defaultLatitude","maxLatitude","minLatitude"]));var Bm=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn=vn.parseArgs(yn);return Rn=cr.call(this,Bn)||this,Rn.mode="Topview",Rn}return vn.parseArgs=function(yn){if(yn instanceof vn)return yn;var Rn=O$n(O$n({},yn),{defaultLongitude:0,defaultLatitude:Math.PI/2});return cr.parseArgs.call(this,Rn)},vn.initAnimationEndState=function(yn){var Rn=this.parseArgs(yn),Bn=cr.initAnimationEndState.call(this,Rn);return O$n(O$n({},Bn),{longitude:Rn.defaultLongitude,latitude:Rn.defaultLatitude,mode:"Topview"})},vn.prototype.updateConfiguration=function(yn){return cr.prototype.updateConfiguration.call(this,O$n(O$n({},yn),{defaultLongitude:0,defaultLatitude:Math.PI/2}))},vn.prototype.updateModel=function(yn){this.needsRender=!0,this.modelSceneNeedsRender=!0;var Rn=this.models.bounding.getCenter(new Vector3);this.locationMotion.set({x:Rn.x,y:Rn.y,z:Rn.z,distance:Q0.distanceFromModel(this.models,this.defaultFov,this.camera.aspect)},0).catch(q$q)},vn.prototype.updateCamera=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();var Po={},To={};return yn.distance!==void 0&&(Po.distance=yn.distance),yn.offset!==void 0&&(Po.x=yn.offset.x,Po.y=yn.offset.y,Po.z=yn.offset.z),yn.longitude!==void 0&&(To.longitude=yn.longitude),yn.latitude!==void 0&&(To.latitude=yn.latitude),yn.fov!==void 0&&(To.fov=yn.fov),Co.locationMotion.set(Po,Rn).catch(q$q),Co.cameraMotion.set(To,Rn).catch(q$q)})},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();for(var Po=[],To=[],Io=0,$l=yn;Io<$l.length;Io++){var Wl=$l[Io];Po.push({key:Wl.key,progress:Wl.progress,value:{distance:Wl.value.distance,x:Wl.value.offset.x,y:Wl.value.offset.y,z:Wl.value.offset.z}}),To.push({key:Wl.key,progress:Wl.progress,value:{longitude:Wl.value.longitude,latitude:Wl.value.latitude,fov:Wl.value.fov}})}return Co.locationMotion.setKeyframes(Po,Rn).catch(q$q),Co.cameraMotion.setKeyframes(yn,Rn)})},vn.prototype.initAnimation=function(){var yn=this;return this.destroyed?Promise.resolve():new Promise(function(Rn){var Bn=yn.initial;Bn.state,Bn.currentState;var Co=Bn.duration,Po=Bn.userAction;yn.userAction=Po;var To=vn.initAnimationEndState(yn),Io={longitude:To.longitude,latitude:To.latitude,fov:To.fov},$l={x:To.offset.x,y:To.offset.y,z:To.offset.z,distance:To.distance},Wl={modelAlpha:1},Xl={perspToOrtho:1};yn.emit("initAnimation.start",X$c("initAnimation.start",{state:To,userAction:yn.userAction})),yn.modelAlphaMotion.set(Wl,Co/3).catch(q$q),yn.perspToOrthoMotion.set(Xl,Co).catch(q$q),yn.cameraMotion.set(Io,Co).catch(q$q),yn.locationMotion.set($l,Co).then(function(){yn.emit("initAnimation.end",X$c("initAnimation.end",{state:To,userAction:yn.userAction}))},function(Yl){var Zl=O$n(O$n(O$n({},yn.currentPano),{mode:yn.mode}),$e(yn.camera.pose));yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Zl,userAction:yn.userAction}))}).then(function(){Rn()})})},vn.prototype.requestMomentumMovement=function(){this.inMomentumMovement=null},vn.prototype.onPanGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=this.panState,Bn=yn.pointers.length;if(yn.isFinal?delete this.panState:this.panState={pointerLength:Bn,x:yn.center.x,y:yn.center.y},!(typeof Rn=="undefined"||Rn.pointerLength!==Bn)){var Co={x:yn.center.x-Rn.x,y:yn.center.y-Rn.y},Po=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),To=this.locationMotion.value.distance;To*=Math.tan(this.cameraMotion.value.fov/2*Math.PI/180);var Io=this.renderer.getSize(new Vector2),$l=2*Co.x*To/Io.y,Wl=2*Co.y*To/Io.y,Xl=new Vector3;Xl.setFromMatrixColumn(this.camera.matrix,0),Xl.multiplyScalar(-$l),Po.add(Xl),Xl.setFromMatrixColumn(this.camera.matrix,1),Xl.multiplyScalar(Wl),Po.add(Xl);var Yl=this.models.bounding.getCenter(new Vector3),Zl=this.models.bounding.getSize(new Vector3),ey=Math.max(Zl.x,Zl.y,Zl.z)/2;Po.clamp(Yl.clone().sub(new Vector3().setScalar(ey)),Yl.clone().add(new Vector3().setScalar(ey)));var Rm=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Po,distance:this.locationMotion.value.distance});yn.state=Rm,this.emit("gesture.pan",yn),!yn.defaultPrevented&&this.locationMotion.set({x:Po.x,y:Po.y,z:Po.z},0).catch(q$q)}},vn.prototype.onPinchGesture=function(yn){var Rn;if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement();var Bn=(Rn=this.pinchState)===null||Rn===void 0?void 0:Rn.fov;if(yn.isFirst){this.pinchState={x:yn.center.x,y:yn.center.y,fov:this.cameraMotion.value.fov};return}if(yn.isFinal&&delete this.pinchState,typeof Bn!="undefined"){var Co=pe$4(Bn/yn.scale,this.minFov,this.maxFov);yn.state.fov=Co,this.emit("gesture.pinch",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Co},0).catch(q$q),yn.type="gesture.pan",this.onPanGesture(yn))}}},vn.prototype.onMouseWheel=function(yn){if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=pe$4(this.cameraMotion.value.fov-yn.center.delta,this.minFov,this.maxFov);yn.state.fov=Rn,this.emit("gesture.mousewheel",yn),!yn.defaultPrevented&&this.cameraMotion.set({fov:Rn},0).catch(q$q)}},vn}(Q0),gr$1={defaultLatitude:0,defaultFov:90,maxFov:120,minFov:20,maxLatitude:+Math.PI/2,minLatitude:-Math.PI/2,moveSpeed:3.4,intersectMeshCreator:function(){return new ho}},Ll=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn=vn.parseArgs(yn);return Rn=cr.call(this,Bn)||this,Rn.mode="PanoramaLike",Rn.defaultLatitude=Bn.defaultLatitude,Rn.defaultFov=Bn.defaultFov,Rn.maxFov=Bn.maxFov,Rn.minFov=Bn.minFov,Rn.maxLatitude=Bn.maxLatitude,Rn.minLatitude=Bn.minLatitude,Rn.moveSpeed=Bn.moveSpeed,Rn.intersectMeshCreator=Bn.intersectMeshCreator,Rn.intersectMesh=Rn.intersectMeshCreator(),Rn.intersectMesh.name="intersect",Rn.intersectMesh.visible=!1,Rn.helper.add(Rn.intersectMesh),Rn}return vn.parseArgs=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl;if(yn instanceof vn)return yn;var Xl=cr.parseArgs.call(this,yn);return O$n(O$n({},Xl),{defaultLatitude:(Rn=yn.defaultLatitude)!==null&&Rn!==void 0?Rn:gr$1.defaultLatitude,defaultFov:(Bn=yn.defaultFov)!==null&&Bn!==void 0?Bn:gr$1.defaultFov,maxFov:(Co=yn.maxFov)!==null&&Co!==void 0?Co:gr$1.maxFov,minFov:(Po=yn.minFov)!==null&&Po!==void 0?Po:gr$1.minFov,maxLatitude:(To=yn.maxLatitude)!==null&&To!==void 0?To:gr$1.maxLatitude,minLatitude:(Io=yn.minLatitude)!==null&&Io!==void 0?Io:gr$1.minLatitude,moveSpeed:($l=yn.moveSpeed)!==null&&$l!==void 0?$l:gr$1.moveSpeed,intersectMeshCreator:(Wl=yn.intersectMeshCreator)!==null&&Wl!==void 0?Wl:gr$1.intersectMeshCreator})},vn.initAnimationEndState=function(yn){var Rn,Bn,Co,Po,To,Io,$l=this.parseArgs(yn),Wl=$l.works,Xl=yn.initial,Yl=Xl.state,Zl=Xl.currentState,ey=typeof Yl.panoIndex=="number"?{workCode:(Co=(Rn=Yl.workCode)!==null&&Rn!==void 0?Rn:(Bn=$l.works[0])===null||Bn===void 0?void 0:Bn.workCode)!==null&&Co!==void 0?Co:"",panoIndex:Yl.panoIndex}:{workCode:Zl.workCode,panoIndex:Zl.panoIndex},Rm=Wl.getResolvedObserver(ey),ry=(Po=Yl.longitude)!==null&&Po!==void 0?Po:Zl.longitude,_g=pe$4((To=Yl.latitude)!==null&&To!==void 0?To:wi(Zl.mode)?Zl.latitude:$l.defaultLatitude,$l.minLatitude,$l.maxLatitude),ty=pe$4((Io=Yl.fov)!==null&&Io!==void 0?Io:wi(Zl.mode)?Zl.fov:$l.defaultFov,$l.minFov,$l.maxFov),ny=Rm?Rm.position.clone():new Vector3;return{workCode:ey.workCode,panoIndex:ey.panoIndex,mode:"PanoramaLike",longitude:ry,latitude:_g,fov:ty,offset:ny,distance:0}},vn.prototype.updateConfiguration=function(yn){var Rn=cr.prototype.updateConfiguration.call(this,yn);if(Rn===!1)return!1;var Bn=O$n(O$n({},gr$1),Ma(yn));if(this.defaultLatitude!==Bn.defaultLatitude&&(this.defaultLatitude=Bn.defaultLatitude),this.maxLatitude!==Bn.maxLatitude&&(this.maxLatitude=Bn.maxLatitude),this.minLatitude!==Bn.minLatitude&&(this.minLatitude=Bn.minLatitude),this.defaultFov!==Bn.defaultFov&&(this.defaultFov=Bn.defaultFov),this.maxFov!==Bn.maxFov&&(this.maxFov=Bn.maxFov),this.minFov!==Bn.minFov&&(this.minFov=Bn.minFov),this.moveSpeed!==Bn.moveSpeed&&(this.moveSpeed=Bn.moveSpeed),this.intersectMeshCreator!==Bn.intersectMeshCreator){this.intersectMeshCreator=Bn.intersectMeshCreator;var Co=this.intersectMesh;this.intersectMesh=this.intersectMeshCreator(),this.intersectMesh.name=Co.name,this.intersectMesh.visible=Co.visible;var Po=this.intersectMesh.parent;Po&&Po.add(this.intersectMesh),Co.dispose()}return!0},vn.prototype.destroy=function(){cr.prototype.destroy.call(this),this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),delete this.panState},vn.prototype.isReady=function(){return this.panState||this.pinchState?!1:cr.prototype.isReady.call(this)},vn.prototype.calculateMovingDuration=function(yn,Rn){switch(typeof yn){case"function":return yn(Rn,this.moveSpeed);case"number":return yn;case"string":return Number(yn);default:return pe$4(Rn,2,5)/this.moveSpeed*1e3}},vn.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.needsRender=!0},vn.prototype.coordinatesForOffset=function(yn){var Rn=this.cameraMotion.value.fov,Bn=this.camera.aspect,Co=this.renderer.getSize(new Vector2);return{longitude:2*yn.x/(Co.x*this.scissor.width)*Rn/95*Bn,latitude:-2*yn.y/(Co.y*this.scissor.height)*Rn/95}},vn.prototype.cameraBounce=function(){var yn=this.cameraMotion.value,Rn=yn.longitude,Bn=yn.latitude,Co=yn.fov,Po=[{progress:0,value:{longitude:Rn,latitude:Bn,fov:Co}},{progress:.5,value:{longitude:Rn,latitude:Bn,fov:Co*.98}},{progress:1,value:{longitude:Rn,latitude:Bn,fov:Co}}];this.cameraMotion.setKeyframes(Po,500).catch(q$q)},vn.prototype.requestMomentumMovement=function(yn,Rn,Bn,Co){var Po=this;if(this.inMomentumMovement!==null){for(var To=O$n({},Bn),Io={longitude:0,latitude:0},$l=0;$l<Co;$l++)To.longitude*=.996,To.latitude*=.996*.99,Io.longitude+=To.longitude,Io.latitude+=To.latitude;var Wl=gn(this.cameraMotion.value.longitude+Io.longitude),Xl=pe$4(this.cameraMotion.value.latitude+Io.latitude,this.minLatitude,this.maxLatitude),Yl=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:Wl,latitude:Xl,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance}),Zl=!(To.longitude>1e-4||To.longitude<-1e-4||To.latitude>1e-4||To.latitude<-1e-4),ey=X$c("gesture.momentum",O$n(O$n({},yn),{isFirst:Rn,isFinal:Zl,state:Yl}));if(this.inMomentumMovement.event=ey,this.emit("gesture.momentum",ey),yn.defaultPrevented){this.inMomentumMovement=null;return}this.inMomentumMovement&&(this.cameraMotion.set({longitude:Wl,latitude:Xl},0).catch(q$q),Zl?this.inMomentumMovement=null:Ft$2.shared.add(function(Rm,ry){Po.requestMomentumMovement(yn,!1,To,ry|0)},!0,1))}},vn.prototype.onPanGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh();var Rn=this.panState,Bn=yn.pointers.length;if(yn.isFinal?delete this.panState:this.panState={pointerLength:Bn,x:yn.center.x,y:yn.center.y},!(typeof Rn=="undefined"||Rn.pointerLength!==Bn)){var Co={x:yn.center.x-Rn.x,y:yn.center.y-Rn.y},Po=this.coordinatesForOffset(Co),To=gn(this.cameraMotion.value.longitude+Po.longitude),Io=pe$4(this.cameraMotion.value.latitude+Po.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(yn.overallVelocityX)>.2&&Math.atan2(Math.abs(yn.overallVelocityY),Math.abs(yn.overallVelocityX))<Math.PI/6.923&&(Io=this.cameraMotion.value.latitude);var $l=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:To,latitude:Io,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone(),distance:this.camera.pose.distance});if(yn.state=$l,this.emit("gesture.pan",yn),!yn.defaultPrevented){var Wl={longitude:$l.longitude,latitude:$l.latitude,fov:$l.fov};if(this.cameraMotion.set(Wl,0).catch(q$q),yn.isFinal){var Xl=yn.velocityX,Yl=yn.velocityY*.6;Math.abs(Yl)>.5&&Math.abs(Xl)<.5&&(Xl=0),this.inMomentumMovement={uuid:Lt$1()},this.requestMomentumMovement(yn,!0,this.coordinatesForOffset({x:Xl,y:Yl}),0)}}}},vn.prototype.onPinchGesture=function(yn){var Rn;this.userAction=yn.userAction,this.stopMomentumMovement();var Bn=(Rn=this.pinchState)===null||Rn===void 0?void 0:Rn.fov,Co=yn.scale;if(yn.isFirst){this.pinchState={x:yn.center.x,y:yn.center.y,fov:this.cameraMotion.value.fov};return}if(yn.isFinal&&delete this.pinchState,typeof Bn!="undefined"){var Po=pe$4(Bn/Co,this.minFov,this.maxFov);yn.state.fov=Po,this.emit("gesture.pinch",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Po},0).catch(q$q),yn.type="gesture.pan",this.onPanGesture(yn))}},vn.prototype.onMouseWheel=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=pe$4(this.cameraMotion.value.fov-yn.center.delta,this.minFov,this.maxFov);yn.state.fov=Rn,this.emit("gesture.mousewheel",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Rn},0).catch(q$q),this.onMouseMove(yn))},vn.prototype.onMouseMove=function(yn){var Rn,Bn;if(this.intersectMesh.parent&&!this.panState&&(this.emit("gesture.mousemove",yn),!yn.defaultPrevented)){var Co=yn.center.raycaster;if(yn.isFinal&&this.intersectMesh.parent){this.hideIntersectMesh();return}var Po=this.models.intersectRaycaster(Co)[0],To=X$c("intersect.update",{raycaster:Co,intersection:Po!=null?Po:null,object:this.intersectMesh});if(this.emit("intersect.update",To),To.defaultPrevented){this.hideIntersectMesh();return}if(Po){var Io=(Bn=(Rn=Po.face)===null||Rn===void 0?void 0:Rn.normal)!==null&&Bn!==void 0?Bn:new Vector3().copy(Co.ray.direction).multiplyScalar(-1),$l=Io.clone(),Wl=Po.point.clone();this.intersectMesh.position.copy(Wl);var Xl=Wl.clone().add($l);if(this.intersectMesh.lookAt(Xl),Math.abs(Io.y)>.99){var Yl=this.camera.position.clone().sub(Wl);this.intersectMesh.rotation.z=-Math.atan2(Yl.z,Yl.x)}this.intersectMesh.visible=!0,this.needsRender=!0}else this.hideIntersectMesh()}},vn.prototype.onDblTapGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement();var Rn=this.cameraMotion.value.fov,Bn=2,Co=this.works.getResolvedObserver(this.currentPano);if(Co){var Po=Co.images.tiles;Po&&Po.length&&(Bn=Math.max.apply(Math,Po.map(function($l){return $l.level})))}var To=Math.max(40-Bn*5,this.minFov,5),Io=To-Rn<Rn-this.defaultFov?To:this.defaultFov;yn.state.fov=Io,this.emit("gesture.dbltap",yn),!yn.defaultPrevented&&(this.cameraMotion.set({fov:Io},360).catch(q$q),this.hideIntersectMesh())},vn}(Ao),Fm="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",f0;function kl(){return f0||(f0=new Promise(function(cr){var vn,yn=document.createElement("video");yn.muted=!0,yn.src=Fm,yn.addEventListener("timeupdate",function Rn(){yn.removeEventListener("timeupdate",Rn,!1),clearTimeout(vn);var Bn=document.createElement("canvas");Bn.width=Bn.height=1;var Co=Bn.getContext("2d");if(!Co){cr(!1);return}Co.drawImage(yn,0,0,1,1);var Po=Co.getImageData(0,0,1,1).data;Po[3]>10?cr(!0):cr(!1)},!1),yn.addEventListener("canplay",function Rn(){yn.removeEventListener("canplay",Rn,!1),yn.play()},!1),vn=window.setTimeout(function(){return cr(!1)},1e3)}))}var Lm=`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`,km=function(cr){fe$6(vn,cr);function vn(yn,Rn){return Rn===void 0&&(Rn=.5),cr.call(this,yn,{uniforms:{inputBuffer:new Uniform(null),scale:new Uniform(Rn)},fragment:Lm})||this}return vn}(Ea),go=function(){function cr(vn,yn,Rn,Bn){this.enable=!0,this.renderer=vn,this.camera=Rn,this.models=Bn,this.scene=yn,this.copyPass=new Rl(this.renderer)}return cr.prototype.render=function(vn,yn){},cr.prototype.dispose=function(){this.copyPass.dispose()},cr}(),Om=function(cr){fe$6(vn,cr);function vn(yn,Rn){Rn===void 0&&(Rn=.002);var Bn=cr.call(this,yn,{uniforms:{targetBuffer:new Uniform(null),inputBuffer:new Uniform(null),step:new Uniform(Rn)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return Bn.material.extensions.shaderTextureLOD=!0,Bn}return Object.defineProperty(vn.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(yn){this.material.uniforms.targetBuffer.value=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(yn){this.material.uniforms.step.value=yn},enumerable:!1,configurable:!0}),vn}(Ea),zm=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,yn,{uniforms:{inputBuffer:new Uniform(null),luminanceAdaptiveBuffer:new Uniform(null),progress:new Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return Rn.material.transparent=!0,Rn}return Object.defineProperty(vn.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(yn){this.material.uniforms.luminanceAdaptiveBuffer.value=yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(yn){this.material.uniforms.progress.value=yn},enumerable:!1,configurable:!0}),vn}(Ea),Us=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn,Co){var Po=cr.call(this,yn,Rn,Bn,Co)||this;return Po.enableTime=Ae$3(),Po.renderer=yn,Po.valuePass=new Mm(Po.renderer),Po.luminancePass=new km(Po.renderer,Math.sqrt(1/3)),Po.nextStepPass=new Om(Po.renderer,.01),Po.luminanceAdaptivePass=new zm(Po.renderer),Po}return vn.prototype.render=function(yn){this.renderer.setRenderTarget(yn[0]),this.renderer.render(this.scene,this.camera),this.enableTime===null&&(this.enableTime=Ae$3()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new WebGLRenderTarget(128,128,{minFilter:LinearMipmapLinearFilter,magFilter:LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(yn[0],this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new WebGLRenderTarget(1,1,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new WebGLRenderTarget(1,1,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ae$3()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(yn[0],yn[1])},vn.prototype.dispose=function(){var yn,Rn,Bn;(yn=this.luminanceTargetBuffer)===null||yn===void 0||yn.dispose(),(Rn=this.luminancePrevBuffer)===null||Rn===void 0||Rn.dispose(),(Bn=this.luminanceNextBuffer)===null||Bn===void 0||Bn.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},vn}(go),d0,Qs=new Vector3,Vm=64,cn=(d0=Math.SQRT1_2)!==null&&d0!==void 0?d0:Math.sqrt(2),Dm={up:new Quaternion(cn,0,0,cn),down:new Quaternion(-cn,0,0,cn),left:new Quaternion(0,cn,0,cn),right:new Quaternion(0,-cn,0,cn),front:new Quaternion(0,0,0,1),back:new Quaternion(0,1,0,0)},Nm=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),qm=new Float32Array([0,0,1,0,0,1,1,1]),Um=new Uint8Array([0,1,2,1,3,2]),Ca=new BufferGeometry;Ca.setAttribute("position",new BufferAttribute(Nm,3));Ca.setAttribute("uv",new BufferAttribute(qm,2));Ca.setIndex(new BufferAttribute(Um,1));var Qm=`
uniform float flipY;
varying vec2 vUv;
void main() {
  vUv = vec2(uv.x, mix((1.0 - uv.y), uv.y, flipY));
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Hm=`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
uniform float level;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`,Gm=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null},flipY:{value:1},level:{value:0}},vertexShader:Qm,fragmentShader:Hm})||this;return yn.depthTest=!1,yn.depthWrite=!1,yn.blending=NoBlending,yn.map=yn.uniforms.map.value,yn.luminanceMap=yn.uniforms.luminanceMap.value,yn.flipY=!!yn.uniforms.flipY.value,yn.level=yn.uniforms.level.value,Object.defineProperties(yn,{map:{get:function(){return this.uniforms.map.value},set:function(Rn){this.uniforms.map.value=Rn}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(Rn){this.uniforms.luminanceMap.value=Rn,this.defines.USE_LUMINANCE=Rn!==null,this.needsUpdate=!0}},flipY:{get:function(){return this.uniforms.flipY.value===1},set:function(Rn){this.uniforms.flipY.value=Rn?1:0}},level:{get:function(){return this.uniforms.level.value},set:function(Rn){this.uniforms.level.value=Rn}}}),yn}return vn}(ShaderMaterial),_m=function(cr){fe$6(vn,cr);function vn(yn,Rn){var Bn=cr.call(this,Ca,new Gm)||this;return yn.box.getCenter(Bn.position),Bn.quaternion.multiplyQuaternions(new Quaternion().setFromAxisAngle(new Vector3(0,1,0),-Math.PI),Dm[yn.face]),Bn.scale.setScalar(yn.size),Bn.node=yn,Bn.name="tiling:tile",Bn.material.visible=!1,Bn.activeTime=-1,Bn.disposed=!1,Bn.needsRender=!1,Bn.frustumCulled=!1,Rn.then(function(Co){var Po=Co[0],To=Co[1];Bn.disposed?(Po.dispose(),To==null||To.dispose()):(Bn.material.map=Po,Bn.material.luminanceMap=To,Bn.material.flipY=!!Po.flipY,Bn.material.level=yn.level,Bn.material.needsUpdate=!0,Bn.material.visible=!0,Bn.needsRender=!0)}).catch(q$q),Bn}return vn.prototype.updateTime=function(yn){},vn.prototype.dispose=function(){var yn;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(yn=this.material.luminanceMap)===null||yn===void 0||yn.dispose()),this.material.dispose()},vn}(Mesh),Jm=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.needsRender=!1,yn.name="tiling",yn}return vn}(Group$1),Km=function(){function cr(vn,yn,Rn){this.disposed=!1,this.textureLoader=new Fi$1,this.minLevel=yn,this.level=0,this.panoId="[0]",this.maxRequest=cr.DEFAULT_MAX_REQUEST,this.pedding=0,this.tileTree=M0(this.minLevel),this.tileMeshes=new Map,this.resource=[],this.luminance=null,this.imageOptions=Rn,this.fetcher=vn,this.object=new Jm,this.object.renderOrder=-3}return cr.prototype.setFetcher=function(vn){this.fetcher=vn},cr.prototype.cleanup=function(){var vn=this;this.tileMeshes.forEach(function(yn){yn.dispose(),vn.object.remove(yn),vn.object.needsRender=!0}),this.tileMeshes.clear()},cr.prototype.setRotation=function(vn){this.disposed||this.object.quaternion.equals(vn)||(this.object.quaternion.copy(vn),this.object.needsRender=!0)},cr.prototype.setPosition=function(vn){this.disposed||this.object.position.equals(vn)||(this.object.position.copy(vn),this.object.needsRender=!0)},cr.prototype.setResource=function(vn,yn){var Rn,Bn;if(!this.disposed&&!(this.resource===vn&&this.luminance===yn)){this.cleanup(),this.resource=vn;var Co=(Bn=(Rn=vn.slice().sort(function(Po,To){return To.level-Po.level})[0])===null||Rn===void 0?void 0:Rn.level)!==null&&Bn!==void 0?Bn:0;this.tileTree=M0(Co),this.luminance=yn,this.object.needsRender=!0}},cr.prototype.update=function(vn,yn,Rn){var Bn=this;if(!this.disposed){this.level=yn;var Co=vn.planes[5].normal,Po=[];yn>=this.minLevel&&to(this.tileTree,function(ty){if(!(ty.level<Bn.minLevel)){if(ty.level>yn||!vn.intersectsBox(ty.box))return!1;Po.push(ty)}}),Po.sort(function(ty,ny){return ty.level!==ny.level?ty.level-ny.level:ty.box.getCenter(Qs).angleTo(Co)-ny.box.getCenter(Qs).angleTo(Co)});for(var To=new Set,Io=function(ty){var ny=$l.resource.filter(function(Py){return Py.level===ty.level})[0];if(!ny)return"continue";if(To.add(ty),$l.tileMeshes.has(ty))return $l.tileMeshes.get(ty).activeTime=Rn,"continue";if($l.pedding>=$l.maxRequest)return"continue";var iy=ny.size,oy=$l.imageOptions.transform,ay=Math.pow(2,ty.level)*ty.position.y,uy=Math.pow(2,ty.level)*ty.position.x,hy="".concat($l.panoId,".").concat(ty.face,".").concat(ty.level,".").concat(ay,".").concat(uy),my=O$n(O$n({},Xt$2($l.imageOptions,["format","sharpen","mappings"])),{key:"pano_tile.".concat(hy),size:ny.scale>=1?void 0:iy*ty.size*ny.scale,cut:ty.size===1?void 0:[iy*ty.position.x,iy*ty.position.y,iy*ty.size,iy*ty.size]});ty.size===1&&console.warn("tile: ".concat(my.key," should not appear.")),ty.level===1&&ny.scale>=.5&&(my.format==="jpg"||/\.jpg$/.test(ny[ty.face]))&&(my.size=void 0,my.quality||(my.quality=70));var ly=$l.textureLoader.loadTexture(ny[ty.face],{imageURL:{transform:oy,options:my},minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1,fetcher:$l.fetcher}).then(function(Py){return Py.body}),sy=null;if($l.luminance){var cy=$l.luminance[ty.face],fy=cy.match(/\/cube_(\d+)\//),vy=fy?Number(fy[1]):!1;if(vy!==!1){var dy=ny.size*ny.scale/2,Ay=dy*ty.size,gy=vy<dy?cy.replace(/\/cube_(\d+)\//,"cube_"+dy):cy,wy=O$n(O$n({},my),{size:vy*ty.size===Ay?void 0:Ay,cut:ty.size===1?void 0:[vy*ty.position.x,vy*ty.position.y,vy*ty.size,vy*ty.size],key:"pano_tile_luminance.".concat(hy)});ty.size===1&&console.warn("tile: ".concat(wy.key," should not appear.")),sy=$l.textureLoader.loadTexture(gy,{imageURL:{transform:$l.imageOptions.transform,options:wy},minFilter:LinearFilter,magFilter:LinearFilter,fetcher:$l.fetcher}).then(function(Py){return Py.body}).catch(function(){return null})}}$l.pedding++;var Cy=Promise.all([ly,sy]).then(function(Py){return Bn.pedding--,Py},function(Py){return Bn.pedding--,Promise.reject(Py)}),My=new _m(ty,Cy);My.name="tiling:tile-".concat(hy),My.activeTime=Rn,My.renderOrder=ty.level,$l.tileMeshes.set(ty,My),$l.object.needsRender=!0,$l.object.add(My)},$l=this,Wl=0,Xl=Po;Wl<Xl.length;Wl++){var Yl=Xl[Wl];Io(Yl)}var Zl=[];this.tileMeshes.forEach(function(ty,ny){To.has(ny)||Zl.push(ny),ty.visible=ny.level<=yn});for(var ey=Zl.sort(function(ty,ny){var iy,oy,ay,uy;return((oy=(iy=Bn.tileMeshes.get(ny))===null||iy===void 0?void 0:iy.activeTime)!==null&&oy!==void 0?oy:0)-((uy=(ay=Bn.tileMeshes.get(ty))===null||ay===void 0?void 0:ay.activeTime)!==null&&uy!==void 0?uy:0)}).slice(Math.max(0,Vm-To.size)),Rm=0,ry=ey;Rm<ry.length;Rm++){var Yl=ry[Rm],_g=this.tileMeshes.get(Yl);_g&&(_g.dispose(),this.object.remove(_g),this.object.needsRender=!0),this.tileMeshes.delete(Yl)}}},cr.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},cr.DEFAULT_MAX_REQUEST=3,cr}(),jm=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Xm=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),yo=new BufferGeometry;yo.setAttribute("position",new BufferAttribute(jm,3));yo.setIndex(new BufferAttribute(Xm,1));var Wm=`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,Zm=`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,Ym=function(){function cr(){this.material=new ShaderMaterial({vertexShader:Wm,fragmentShader:Zm,uniforms:{size:new Uniform(null),matrix:new Uniform(null),alpha:new Uniform(null),map:new Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor}),this.object=new Mesh(yo,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.object.name="pano-video",this.alphaMotion=new Ce$2({alpha:0})}return cr.prototype.setMaterial=function(vn){vn?(this.material.uniforms.size.value=vn.size,this.material.uniforms.matrix.value=vn.matrix,this.material.uniforms.map.value=vn.map,this.alphaMotion.set({alpha:vn.alpha},500).catch(q$q),this.material.uniforms.alpha.value=vn.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(q$q));var yn=vn!==null,Rn=this.material.defines.USE_PANO_VIDEO;yn!==Rn&&(this.material.defines.USE_PANO_VIDEO=yn,this.material.needsUpdate=!0,this.object.visible=vn!==null)},cr.prototype.updateTime=function(vn){this.alphaMotion.ended||(this.alphaMotion.update(vn),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},cr.prototype.dispose=function(){this.material.dispose()},cr}(),$m=new Matrix4().makeRotationAxis(new Vector3(0,1,0),Math.PI),Hs=new Vector3(-1,1,1),Gs=function(){function cr(vn){vn===void 0&&(vn=0),this.width=vn,this.pool=[]}return Object.defineProperty(cr.prototype,"size",{get:function(){return this.pool.length},enumerable:!1,configurable:!0}),cr.prototype.create=function(){return new WebGLCubeRenderTarget(this.width,{stencilBuffer:!1,depthBuffer:!1})},cr.prototype.pop=function(){var vn=this.pool.pop();return vn||this.create()},cr.prototype.push=function(vn){this.pool.indexOf(vn)===-1&&this.pool.push(vn)},cr.prototype.clear=function(){for(var vn=0,yn=this.pool;vn<yn.length;vn++){var Rn=yn[vn];Rn.dispose()}this.pool.length=0},cr}(),br$1=O$n(O$n({},gr$1),{maxAccessibleDistance:5,panoTapTriggerRadius:.5,panoCircleMeshCreator:function(cr){return new tm},tiledCubeTextureLevel:2,tileLevelForFov:function(cr,vn){var yn,Rn=function(To){return To/180*Math.PI},Bn=(yn=Math.log2)!==null&&yn!==void 0?yn:function(To){return Math.log(To)*Math.LOG2E},Co=vn.height/2/Math.tan(Rn(cr/2))*Math.tan(Rn(45))*2,Po=Math.max(Bn(Co/512),0);return Po<2.3&&Po>.1&&(Po=1),Po=Po%1>.75?Math.ceil(Po):Math.floor(Po),Po},tileMaxRequest:3,luminanceAdaptiveEffectEnable:!0}),bo=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn,Co,Po,To,Io=vn.parseArgs(yn);Rn=cr.call(this,Io)||this,Rn.mode="Panorama",Rn.tileLevel=0,Rn.initAnimationed=!1,Rn.maxAccessibleDistance=Io.maxAccessibleDistance,Rn.panoTapTriggerRadius=Io.panoTapTriggerRadius,Rn.panoCircleMeshCreator=Io.panoCircleMeshCreator,Rn.tiledCubeTextureLevel=Io.tiledCubeTextureLevel,Rn.tileLevelForFov=Io.tileLevelForFov,Rn.tileMaxRequest=Io.tileMaxRequest,Rn.luminanceAdaptiveEffectEnable=Io.luminanceAdaptiveEffectEnable,Rn.luminanceAdaptiveEffect=new Us(Rn.renderer,Rn.modelScene,Rn.camera,Rn.models),Rn.colorCubeRenderTargetPool=new Gs,Rn.luminanceCubeRenderTargetPool=new Gs;var $l=Rn.models.getMaterial()||{},Wl=$l.pano0,Xl=$l.pano1;Wl&&(Xl==null?void 0:Xl.map)!==Wl.map&&(Rn.models.setMaterial({pano0:Xl}),Wl.map.dispose(),Wl.map instanceof Ge$3&&Wl.map.cubeRenderTarget&&Rn.colorCubeRenderTargetPool.push(Wl.map.cubeRenderTarget),Wl.luminanceMap&&(Wl.luminanceMap.dispose(),Wl.luminanceMap instanceof Ge$3&&Wl.luminanceMap.cubeRenderTarget&&Rn.luminanceCubeRenderTargetPool.push(Wl.luminanceMap.cubeRenderTarget)));var Yl=new Set;Wl&&Yl.add(Wl),Xl&&Yl.add(Xl);for(var Zl=Rn.colorCubeRenderTargetPool.size+Yl.size;Zl<2;Zl++){var ey=Math.max(1024*Rn.tiledCubeTextureLevel,512),Rm=Rn.colorCubeRenderTargetPool.create();Rm.setSize(ey,ey),C0(null,Rm,Rn.renderer),Rn.colorCubeRenderTargetPool.push(Rm)}Rn.panoMeshes={},Rn.updatePanoMeshes(),Rn.locationMotion=new Ce$2({count:0,distance:Rn.camera.pose.distance}),Rn.modelAlphaMotion=new Ce$2({modelAlpha:(Co=(Bn=Rn.models.getMaterial())===null||Bn===void 0?void 0:Bn.modelAlpha)!==null&&Co!==void 0?Co:0}),Rn.perspToOrthoMotion=new Ce$2({perspToOrtho:Rn.camera.perspToOrtho.x}),Rn.panoResources={},Rn.panoResources[Rn.locationMotion.keyframes[0].key=Rn.locationMotion.keyframes[1].key=Lt$1()]={panoId:_e$3(Rn.currentPano),panoPicture:(To=(Po=Rn.models.getMaterial())===null||Po===void 0?void 0:Po.pano1)!==null&&To!==void 0?To:null,position:Rn.camera.pose.offset.clone(),effect:"fly",fixCameraTransform:new Matrix4};var ry=Rn.works.getResolvedObserver(Rn.currentPano);return Rn.textureLoader=new Fi$1,Rn.tiling=new Km(ry?gt$4(ry.work):ua,Rn.tiledCubeTextureLevel+1,Rn.imageOptions),Rn.scene.add(Rn.tiling.object),Rn.panoVideo=new Ym,Rn.scene.add(Rn.panoVideo.object),Rn}return vn.parseArgs=function(yn){var Rn,Bn,Co,Po,To,Io,$l;if(yn instanceof vn)return yn;var Wl=cr.parseArgs.call(this,yn);return O$n(O$n({},Wl),{maxAccessibleDistance:(Rn=yn.maxAccessibleDistance)!==null&&Rn!==void 0?Rn:br$1.maxAccessibleDistance,panoTapTriggerRadius:(Bn=yn.panoTapTriggerRadius)!==null&&Bn!==void 0?Bn:br$1.panoTapTriggerRadius,panoCircleMeshCreator:(Co=yn.panoCircleMeshCreator)!==null&&Co!==void 0?Co:br$1.panoCircleMeshCreator,tiledCubeTextureLevel:(Po=yn.tiledCubeTextureLevel)!==null&&Po!==void 0?Po:br$1.tiledCubeTextureLevel,tileLevelForFov:(To=yn.tileLevelForFov)!==null&&To!==void 0?To:br$1.tileLevelForFov,tileMaxRequest:(Io=yn.tileMaxRequest)!==null&&Io!==void 0?Io:br$1.tileMaxRequest,luminanceAdaptiveEffectEnable:($l=yn.luminanceAdaptiveEffectEnable)!==null&&$l!==void 0?$l:br$1.luminanceAdaptiveEffectEnable})},vn.initAnimationEndState=function(yn){var Rn=this.parseArgs(yn),Bn=cr.initAnimationEndState.call(this,Rn);return O$n(O$n({},Bn),{mode:"Panorama"})},vn.prototype.updateConfiguration=function(yn){var Rn=this,Bn=cr.prototype.updateConfiguration.call(this,yn);if(Bn===!1)return!1;var Co=O$n(O$n({},br$1),Ma(yn));if(this.maxAccessibleDistance!==Co.maxAccessibleDistance&&(this.maxAccessibleDistance=Co.maxAccessibleDistance),this.panoTapTriggerRadius!==Co.panoTapTriggerRadius&&(this.panoTapTriggerRadius=Co.panoTapTriggerRadius),this.panoCircleMeshCreator!==Co.panoCircleMeshCreator&&(this.panoCircleMeshCreator=Co.panoCircleMeshCreator,this.panoMeshes)){for(var Po=Object.keys(this.panoMeshes),To=0,Io=Po;To<Io.length;To++){var $l=Io[To],Wl=this.panoMeshes[$l];this.helper.remove(Wl),Wl.dispose(),delete this.panoMeshes[$l]}this.updatePanoMeshes()}return this.tiledCubeTextureLevel!==Co.tiledCubeTextureLevel&&(this.tiledCubeTextureLevel=Co.tiledCubeTextureLevel,setTimeout(function(){Rn.moveToPano(Rn.currentPano,{},!0)},30)),this.tileLevelForFov!==Co.tileLevelForFov&&(this.tileLevelForFov=Co.tileLevelForFov),this.tileMaxRequest!==Co.tileMaxRequest&&(this.tileMaxRequest=Co.tileMaxRequest),this.luminanceAdaptiveEffectEnable!==Co.luminanceAdaptiveEffectEnable&&(this.luminanceAdaptiveEffectEnable=Co.luminanceAdaptiveEffectEnable),!0},vn.prototype.destroy=function(){var yn,Rn;if(cr.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),this.colorCubeRenderTargetPool.clear(),this.luminanceCubeRenderTargetPool.clear(),delete this.pendingTextureTask,this.panoMeshes)for(var Bn=Object.keys(this.panoMeshes),Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co],Io=this.panoMeshes[To];this.helper.remove(Io),Io.dispose(),delete this.panoMeshes[To]}var $l=this.videoTexture.image;$l.pause(),$l.oncanplay=function(){},$l.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Wl=(yn=this.models.getMaterial())!==null&&yn!==void 0?yn:{},Xl=Wl.pano0,Yl=Wl.pano1,Zl=0,ey=Object.keys(this.panoResources);Zl<ey.length;Zl++){var Rm=ey[Zl],ry=this.panoResources[Rm];if(ry.panoPicture){var _g=ry.panoPicture.map;_g&&_g!==(Xl==null?void 0:Xl.map)&&_g!==(Yl==null?void 0:Yl.map)&&(_g.dispose(),(Rn=ry.panoPicture.luminanceMap)===null||Rn===void 0||Rn.dispose(),ry.panoPicture=null)}delete this.panoResources[Rm]}this.luminanceAdaptiveEffect.dispose()},vn.prototype.isReady=function(){return this.locationMotion.ended!==!0?!1:cr.prototype.isReady.call(this)},vn.prototype.isTileReady=function(){var yn,Rn,Bn,Co=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Po=((yn=Co.panoPicture)===null||yn===void 0?void 0:yn.map)instanceof Ge$3&&(Bn=(Rn=Co.panoPicture)===null||Rn===void 0?void 0:Rn.map.tilePending)!==null&&Bn!==void 0?Bn:0,To=Po<=0,Io=this.tiling.pedding,$l=this.tiling.object.visible&&Io<=0;return this.initAnimationed&&To&&$l},vn.prototype.updateWork=function(yn,Rn,Bn,Co){var Po=this;this.userAction=Co,this.works=yn;var To=vn.initAnimationEndState(O$n(O$n({},this),{initial:{currentState:O$n(O$n({},this.currentPano),this.camera.pose),duration:Bn.duration,effect:Bn.effect,state:Rn,userAction:Co}})),Io={workCode:To.workCode,panoIndex:To.panoIndex},$l=this.works.getWork(Io.workCode);return this.tiling.setFetcher($l?gt$4($l):ua),this.tiling.cleanup(),this.initAnimationed=!1,this.hideIntersectMesh(),this.updatePanoMeshes(),this.moveToPano(Io,{effect:Bn.effect,duration:Bn.duration,longitude:Rn.longitude,latitude:Rn.latitude,fov:Rn.fov,moveEndCallback:function(){Po.initAnimationed=!0},moveCancelCallback:function(){Po.initAnimationed=!0}},Co),!0},vn.prototype.updateModel=function(yn){this.models=yn,this.updatePanoMeshes()},vn.prototype.updateTime=function(yn,Rn){var Bn=this,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey;if(!this.destroyed){var Rm={},ry={},_g=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ty=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ny=!1;if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(yn),ry.longitude=this.cameraMotion.value.longitude,ry.latitude=this.cameraMotion.value.latitude,ry.fov=this.cameraMotion.value.fov),this.modelAlphaMotion.ended===!1&&(this.modelAlphaMotion.update(yn),Rm.modelAlpha=this.modelAlphaMotion.value.modelAlpha),this.perspToOrthoMotion.ended===!1&&(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),this.locationMotion.ended===!1){this.locationMotion.update(yn);var iy=this.locationMotion.getKeyFrameSegment(yn),oy=iy[0],ay=iy[1],uy=this.panoResourceFromLocationMotionKeyframe(oy),hy=this.panoResourceFromLocationMotionKeyframe(ay),my=new Vector3().copy(uy.position),ly=new Vector3().copy(hy.position),sy=this.locationMotion.value.count-ay.value.count+1;Rm.progress=sy,hy.panoPicture&&(sy<1?uy.panoPicture&&(Rm.pano0=uy.panoPicture):Rm.pano0=hy.panoPicture,Rm.pano1=hy.panoPicture),hy.effect==="montage"?Rm.transition="BLACK":hy.effect==="spread"?Rm.transition="SPREAD":Rm.transition="FADE",(hy.effect==="zoomin"||hy.effect==="zoomout")&&(Rm.progress=Math.pow(sy,3)),sy<1&&hy.effect!=="fly"&&(Rm.pano0&&uy.panoPicture&&(Rm.pano0={map:Rm.pano0.map,zoom:Rm.pano0.zoom,luminanceMap:Rm.pano0.luminanceMap,matrix:uy.panoPicture.matrix.clone().premultiply(uy.fixCameraTransform).setPosition(hy.position)}),my.copy(ly),ny=!0),ry.distance=this.locationMotion.value.distance,ry.offset=new Vector3(my.x+(ly.x-my.x)*sy,my.y+(ly.y-my.y)*sy,my.z+(ly.z-my.z)*sy);for(var cy=[],fy=[],vy=0,dy=this.locationMotion.keyframes;vy<dy.length;vy++){var Ay=dy[vy],gy=Ay.key,wy=Ay.progress;gy!==void 0&&(cy.push(gy),wy>this.locationMotion.progress&&fy.push(gy))}for(var Cy=0,My=Object.keys(this.panoResources);Cy<My.length;Cy++){var Py=My[Cy];if(!(fy.indexOf(Py)>=0)){var Dy=this.panoResources[Py];if(Dy.panoPicture){var qy=Dy.panoPicture.map,Xy=Dy.panoPicture.luminanceMap;if(qy){if(qy===((Co=Rm.pano0)===null||Co===void 0?void 0:Co.map)||qy===((Po=Rm.pano1)===null||Po===void 0?void 0:Po.map))continue;qy instanceof Ge$3&&qy.cubeRenderTarget&&this.colorCubeRenderTargetPool.push(qy.cubeRenderTarget),qy.dispose(),Xy&&(Xy instanceof Ge$3&&Xy.cubeRenderTarget&&this.luminanceCubeRenderTargetPool.push(Xy.cubeRenderTarget),Xy.dispose()),Dy.panoPicture=null}}cy.indexOf(Py)>=0||delete this.panoResources[Py]}}this.currentPano=Qt$2(hy.panoId),this.emit("pano.moving",X$c("pano.moving",{userAction:this.userAction,prevPano:Qt$2(_g.panoId),state:O$n(O$n(O$n(O$n({},Qt$2(ty.panoId)),{mode:this.mode}),$e(this.camera.pose)),ry),options:{},progress:this.locationMotion.progress,error:null}))}lr$1(Rm)===!1&&(!((To=Rm.pano0)===null||To===void 0)&&To.map&&Rm.pano0.map instanceof Ge$3&&!Rm.pano0.map.cubeRenderTarget&&(Rm.pano0.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),!((Io=Rm.pano0)===null||Io===void 0)&&Io.luminanceMap&&Rm.pano0.luminanceMap instanceof Ge$3&&!Rm.pano0.luminanceMap.cubeRenderTarget&&(Rm.pano0.luminanceMap.cubeRenderTarget=this.luminanceCubeRenderTargetPool.pop()),!(($l=Rm.pano1)===null||$l===void 0)&&$l.map&&Rm.pano1.map instanceof Ge$3&&!Rm.pano1.map.cubeRenderTarget&&(Rm.pano1.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),!((Wl=Rm.pano1)===null||Wl===void 0)&&Wl.luminanceMap&&Rm.pano1.luminanceMap instanceof Ge$3&&!Rm.pano1.luminanceMap.cubeRenderTarget&&(Rm.pano1.luminanceMap.cubeRenderTarget=this.luminanceCubeRenderTargetPool.pop()),this.models.setMaterial(Rm)),lr$1(ry)===!1&&this.setCamera(ry);var $y=this.works.getResolvedObserver(this.currentPano),xy=this.locationMotion.ended?this.getForwardObserverOrNot():null;if(this.camera.pose.distance>.1||ny)for(var Ry=0,Ly=Object.keys(this.panoMeshes);Ry<Ly.length;Ry++){var ky=Ly[Ry],Ey=this.panoMeshes[ky];Ey.setOpacity(0),Ey.setCurrent(!1),Ey.updateTime&&Ey.updateTime(yn,Rn),Ey.visible=!1}else if($y){var Iy=zr$1($y.visibleIds,function(h1){var l1=Bn.works.getResolvedObserver(h1);return l1?$y.standingPosition.distanceTo(l1.standingPosition):1/0},!0),zy=Iy[1];zy=pe$4(zy,2.5,1/0);for(var Uy=$y.visibleIds.concat(_e$3(this.currentPano)),Qy=this.camera.getDirection(new Vector3),Gy=0,Zy=Object.keys(this.panoMeshes);Gy<Zy.length;Gy++){var ky=Zy[Gy],Ey=this.panoMeshes[ky],Ty=this.works.getResolvedObserver(ky);if(Uy.indexOf(ky)===-1)Ey.setCurrent(!1),Ey.setOpacity(0);else if(!Ty)Ey.setCurrent(!1),Ey.setOpacity(0);else if(!Ty.loadable&&!Ty.active)Ey.setCurrent(!1),Ey.setOpacity(0);else{var Vy=Ey.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Ey.setCurrent(!Ey.loading&&Ey.progress===0&&xy!==null&&xy.panoId===ky),Ey.setOpacity(Vy<.01?0:pe$4(zy/Vy*1.2,.4,.85));var Yy=this.camera.position.clone().setY(Ey.position.y),Jy=new Vector3().copy(Ey.position).sub(Yy).normalize();if(ky===_e$3(this.currentPano)){var Hy=pe$4((.5-Yy.distanceTo(Ey.position))/.5,0,1);Jy.multiplyScalar(1-Hy).add(Qy.clone().multiplyScalar(Hy))}Jy.length()>0&&Ey.quaternion.setFromEuler(new Euler(0,Math.atan2(Jy.x,Jy.z),0))}Ey.updateTime&&Ey.updateTime(yn,Rn)}}var i1=this.tileLevel=function(){if(Bn.tileLevelForFov===!1)return 0;var h1=Bn.renderer.getDrawingBufferSize(new Vector2);h1.width*=Bn.scissor.width,h1.height*=Bn.scissor.height;var l1=ty.panoId,o1=Bn.works.getResolvedObserver(l1),t1=Bn.imageOptions.size;if(typeof t1=="undefined"&&o1){var Wy=o1.images.up.match(/\/cube_(\d+)\//);Wy&&(t1=Number(Wy[1]))}typeof t1=="undefined"&&(t1=2048);var f1=0;t1>=1024&&(f1=1),t1>=2048&&(f1=2),t1>=4096&&(f1=3),t1>=8192&&(f1=4);var m1=Bn.tileLevelForFov(Bn.camera.fov,h1);return m1>f1?m1:0}(),u1=function(){var h1=Bn.camera.quaternion.clone(),l1=Bn.works.getResolvedObserver(ty.panoId),o1=l1!=null?l1:$y;o1&&h1.premultiply(o1.quaternion.clone().inverse());var t1=new Matrix4().makeRotationFromQuaternion(h1),Wy=new Matrix4().getInverse(t1),f1=new Frustum().setFromProjectionMatrix(new Matrix4().multiplyMatrices(Bn.camera.projectionMatrix,Wy));return f1}();ty.panoId===_e$3(this.currentPano)&&(((Xl=ty.panoPicture)===null||Xl===void 0?void 0:Xl.map)instanceof Ge$3&&(ty.panoPicture.map.maxRequest=this.tileMaxRequest,ty.panoPicture.map.update(u1,Math.min(i1,this.tiledCubeTextureLevel)),ty.panoPicture.map.needsRender===!0&&(ty.panoPicture.map.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0)),((Yl=ty.panoPicture)===null||Yl===void 0?void 0:Yl.luminanceMap)instanceof Ge$3&&(ty.panoPicture.luminanceMap.maxRequest=this.tileMaxRequest,ty.panoPicture.luminanceMap.update(u1,Math.min(i1,this.tiledCubeTextureLevel)),ty.panoPicture.luminanceMap.needsRender===!0&&(ty.panoPicture.luminanceMap.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0)));{var p1=this.tiling.object.visible;if(this.initAnimationed){var g1=ty.panoId,v1=this.works.getResolvedObserver(g1);v1?Oi(this.camera.position,v1.position)&&this.locationMotion.ended?(this.tiling.object.visible=!0,this.tiling.panoId!==g1&&this.tiling.cleanup(),this.tiling.panoId=g1,this.tiling.setResource((ey=(Zl=v1.images)===null||Zl===void 0?void 0:Zl.tiles)!==null&&ey!==void 0?ey:[],this.enableIOSEDR&&v1.images.luminance?v1.images.luminance:null),this.tiling.setFetcher(gt$4(v1.work)),this.tiling.setRotation(v1.quaternion),this.tiling.setPosition(v1.position),this.tiling.maxRequest=this.tileMaxRequest,i1>this.tiledCubeTextureLevel?this.tiling.update(u1,i1,yn):this.tiling.update(u1,0,yn)):this.tiling.object.visible=!1:this.tiling.object.visible=!1}else this.tiling.object.visible=!1;p1!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0,this.modelSceneNeedsRender=!0)}this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(yn),this.intersectMesh.scale.setScalar(pe$4(this.cameraMotion.value.fov/45,0,1))}},vn.prototype.render=function(yn,Rn){var Bn=this.renderer.getRenderTarget(),Co=this.works.getResolvedObserver(this.currentPano);Co&&Co.video&&(this.needsRender=!0,this.modelSceneNeedsRender=!0),this.updateScreenBuffer(Rn),this.enableFragDepth?(yn&&(Rn==="luminance"?(this.luminanceAdaptiveEffect.enable=this.luminanceAdaptiveEffectEnable,this.luminanceAdaptiveEffect.render(this.screenBuffers)):(this.renderer.setRenderTarget(this.modelRenderTarget),this.renderer.render(this.modelScene,this.camera))),this.depthCopyPass.render(this.modelRenderTarget.depthTexture,Bn),this.renderer.autoClearDepth=!1,this.renderer.autoClearColor=!0,this.copyPass.render(this.modelRenderTarget,Bn),this.renderer.setRenderTarget(Bn),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0):Rn==="luminance"?(this.luminanceAdaptiveEffect.enable=this.luminanceAdaptiveEffectEnable,this.luminanceAdaptiveEffect.render(this.screenBuffers)):(this.renderer.render(this.modelScene,this.camera),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0)},vn.prototype.postProcessing=function(yn,Rn){if(!this.destroyed&&Rn==="luminance")return this.luminanceAdaptiveEffect||(this.luminanceAdaptiveEffect=new Us(this.renderer,this.scene,this.camera,this.models),this.luminanceAdaptiveEffect.enable=this.luminanceAdaptiveEffectEnable),this.luminanceAdaptiveEffect.render(yn)},vn.prototype.getTargetState=function(){var yn=this.cameraMotion.getKeyFrameSegment(Ae$3())[1],Rn=this.locationMotion.getKeyFrameSegment(Ae$3())[1],Bn=this.panoResourceFromLocationMotionKeyframe(Rn),Co=this.works.getResolvedObserver(Bn.panoId);return{workCode:Co?Co.work.workCode:this.currentPano.workCode,panoIndex:Co?Co.panoIndex:this.currentPano.panoIndex,mode:this.mode,longitude:yn.value.longitude,latitude:yn.value.latitude,fov:yn.value.fov,offset:Co?Co.position.clone():this.camera.position.clone(),distance:this.locationMotion.value.distance}},vn.prototype.moveToPano=function(yn,Rn,Bn){var Co=this,Po,To,Io,$l,Wl=(Po=Rn.effect)!==null&&Po!==void 0?Po:"fly";this.userAction=Bn,this.stopMomentumMovement();var Xl=this.works.getResolvedObserver(yn);if(!Xl)throw new Error("Invalid PanoId ".concat(JSON.stringify(yn)));var Yl=yi(Xl.images.up),Zl=this.imageOptions.size;typeof Zl=="undefined"&&Xl&&Yl&&(Zl=Number(Yl)),typeof Zl=="undefined"&&(Zl=2048);var ey=this.imageOptions.transform,Rm=O$n({key:"pano.".concat(Xl.panoId)},Xt$2(this.imageOptions,["format","size","quality","sharpen","mappings"])),ry=Xl.images,_g=(Io=(To=Xl.images.tiles)===null||To===void 0?void 0:To.filter(function(dy){return dy.size>Zl}))!==null&&Io!==void 0?Io:null,ty=ey,ny={key:"pano_luminance.".concat(Xl.panoId),size:Rm.size?Rm.size/2:void 0},iy=this.enableIOSEDR&&Xl.images.luminance?Xl.images.luminance:null,oy=function(){if(!Xl.images.tiles||!iy)return null;var dy=yi(iy.up);return dy?_g==null?void 0:_g.map(function(Ay){var gy=Ay.size*Ay.scale/2;return dy<gy?{level:Ay.level,size:gy,scale:1,back:ar$1(iy.back,gy),front:ar$1(iy.front,gy),left:ar$1(iy.left,gy),right:ar$1(iy.right,gy),up:ar$1(iy.up,gy),down:ar$1(iy.down,gy)}:{level:Ay.level,size:dy,scale:gy/dy,back:iy.back,front:iy.front,left:iy.left,right:iy.right,up:iy.up,down:iy.down}}):null}(),ay="pano:"+ba([ry,Rm,ey,this.tiledCubeTextureLevel]);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ay)return;var uy=this.pendingTextureTask.panoId;($l=this.panoMeshes[uy])===null||$l===void 0||$l.setProgress(0),this.emit("pano.texture.abort",X$c("pano.texture.abort",{error:null,progress:0,meta:null,pano:Xl.pano}))}var hy="move-to-pano-"+Xl.panoId;this.pending.add(hy);var my=this.models.getMaterial()||{},ly=my.pano0,sy=my.pano1,cy;if(ly&&ly.map.name===ay&&ly.luminanceMap!==null===this.enableIOSEDR?cy=ly:(sy==null?void 0:sy.map.name)===ay&&sy.luminanceMap!==null===this.enableIOSEDR&&(cy=sy),cy){var fy={panoId:Xl.panoId,effect:Wl,panoPicture:{zoom:1,map:cy.map,luminanceMap:cy.luminanceMap,matrix:new Matrix4().compose(Xl.position,Xl.quaternion,Hs)},position:Xl.position.clone(),fixCameraTransform:new Matrix4};Ft$2.shared.add(function(){Co.pending.delete(hy),Co.doMoveToPano(Xl.pano,fy,Rn)},!0,1);return}this.pendingTextureTask={panoId:Xl.panoId,hash:ay,onLoad:function(dy,Ay){var gy;if(Co.pending.delete(hy),Co.destroyed)dy.body.dispose();else{dy.body.name=ay;var wy={panoId:Xl.panoId,effect:Wl,panoPicture:{zoom:1,map:dy.body,luminanceMap:(gy=Ay==null?void 0:Ay.body)!==null&&gy!==void 0?gy:null,matrix:new Matrix4().compose(Xl.position,Xl.quaternion,Hs)},position:Xl.position.clone(),fixCameraTransform:new Matrix4};Co.doMoveToPano(Xl.pano,wy,Rn)}},onError:function(dy){Co.pending.delete(hy);var Ay=O$n(O$n(O$n({},Xl.pano),{mode:Co.mode}),$e(Co.camera.pose));Co.emit("pano.error",X$c("pano.error",{error:dy,userAction:Co.userAction,options:Rn,prevPano:Co.currentPano,progress:0,state:Ay})),Co.emit("pano.cancel",X$c("pano.cancel",{error:dy,userAction:Co.userAction,options:Rn,prevPano:Co.currentPano,progress:0,state:Ay})),Co.emit("error",dy),Rn.moveCancelCallback&&Rn.moveCancelCallback()}};var vy=this.panoMeshes[Xl.panoId];vy&&vy.tap&&vy.tap(),Promise.all([this.tileLevelForFov&&_g&&_g.length?this.textureLoader.loadTiledCubeTexture(ry,_g,{tileMaxLevel:this.tiledCubeTextureLevel,imageURL:{transform:ey,options:Rm},minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1,format:RGBAFormat,viaAjax:!0,fetcher:gt$4(Xl.work)},void 0,void 0,function(dy){var Ay,gy;Co.emit("pano.texture.progress",X$c("pano.texture.progress",{error:null,progress:dy,meta:null,pano:Xl.pano})),((Ay=Co.pendingTextureTask)===null||Ay===void 0?void 0:Ay.hash)===ay&&((gy=Co.panoMeshes[Xl.panoId])===null||gy===void 0||gy.setProgress(dy))},this.renderer):this.textureLoader.loadCubeTexture(ry,{imageURL:{transform:ey,options:Rm},format:RGBAFormat,viaAjax:!0,fetcher:gt$4(Xl.work)},void 0,void 0,function(dy){var Ay,gy;Co.emit("pano.texture.progress",X$c("pano.texture.progress",{error:null,progress:dy,meta:null,pano:Xl.pano})),((Ay=Co.pendingTextureTask)===null||Ay===void 0?void 0:Ay.hash)===ay&&((gy=Co.panoMeshes[Xl.panoId])===null||gy===void 0||gy.setProgress(dy))},this.renderer),iy?this.tileLevelForFov&&oy&&oy.length?this.textureLoader.loadTiledCubeTexture(iy,oy,{tileMaxLevel:this.tiledCubeTextureLevel,imageURL:{transform:ty,options:ny},minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1,fetcher:gt$4(Xl.work)},void 0,void 0,void 0,this.renderer).catch(function(){return null}):this.textureLoader.loadCubeTexture(iy,{imageURL:{transform:ty,options:ny},fetcher:gt$4(Xl.work)},void 0,void 0,void 0,this.renderer).catch(function(){return null}):Promise.resolve(null)]).then(function(dy){var Ay,gy,wy=dy[0],Cy=dy[1];((Ay=Co.pendingTextureTask)===null||Ay===void 0?void 0:Ay.hash)===ay?(Co.pendingTextureTask.onLoad(wy,Cy),(gy=Co.panoMeshes[Xl.panoId])===null||gy===void 0||gy.setProgress(0),delete Co.pendingTextureTask,Co.emit("pano.texture.success",X$c("pano.texture.success",{error:null,progress:1,meta:wy.meta,pano:Xl.pano}))):(wy.body.dispose(),Cy==null||Cy.body.dispose())}).catch(function(dy){var Ay,gy;((Ay=Co.pendingTextureTask)===null||Ay===void 0?void 0:Ay.hash)===ay&&(Co.pendingTextureTask.onError(dy),(gy=Co.panoMeshes[Xl.panoId])===null||gy===void 0||gy.setProgress(0),delete Co.pendingTextureTask,Co.emit("pano.texture.error",X$c("pano.texture.error",{error:dy,progress:0,meta:null,pano:Xl.pano})),Co.emit("error",dy))}),this.emit("pano.texture.load",X$c("pano.texture.load",{error:null,progress:0,meta:null,pano:Xl.pano}))},vn.prototype.initAnimation=function(){var yn=this;return this.destroyed?Promise.resolve():new Promise(function(Rn){var Bn=yn.initial,Co=Bn.duration,Po=Bn.effect,To=Bn.userAction;yn.userAction=To;var Io=vn.initAnimationEndState(yn),$l={workCode:Io.workCode,panoIndex:Io.panoIndex},Wl={modelAlpha:0},Xl={perspToOrtho:0},Yl=!1;yn.moveToPano($l,{longitude:Io.longitude,latitude:Io.latitude,fov:Io.fov,effect:Po,duration:Co,moveStartCallback:function(Zl){Yl=!0,yn.perspToOrthoMotion.set(Xl,Co).catch(q$q),yn.modelAlphaMotion.setKeyframes([{progress:0,value:O$n({},yn.modelAlphaMotion.value)},{progress:.6,value:O$n({},yn.modelAlphaMotion.value)},{progress:1,value:Wl}],Co).catch(q$q),yn.emit("initAnimation.start",X$c("initAnimation.start",{state:Zl,userAction:yn.userAction}))},moveEndCallback:function(Zl){yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Zl,userAction:yn.userAction})),yn.initAnimationed=!0,Rn()},moveCancelCallback:function(){var Zl=O$n(O$n(O$n({},$l),{mode:yn.mode}),$e(yn.camera.pose));Yl===!1&&yn.emit("initAnimation.start",X$c("initAnimation.start",{state:Zl,userAction:yn.userAction})),yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Zl,userAction:yn.userAction})),yn.initAnimationed=!0,Rn()}},To)})},vn.prototype.panoResourceFromLocationMotionKeyframe=function(yn){return this.panoResources[yn.key]},vn.prototype.locationMotionKeyframesLength=function(yn){for(var Rn=0,Bn=1;Bn<yn.length;Bn++){var Co=this.panoResourceFromLocationMotionKeyframe(yn[Bn-1]).position,Po=this.panoResourceFromLocationMotionKeyframe(yn[Bn]).position,To=Co.distanceTo(Po)*(yn[Bn].value.count-yn[Bn-1].value.count);Rn+=To}return Rn},vn.prototype.updatePanoMeshes=function(){for(var yn=this,Rn={},Bn=Object.keys(this.panoMeshes),Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co],Io=this.panoMeshes[To];Rn[To]=Io,delete this.panoMeshes[To]}for(var $l=1,Wl={},Xl=function(ay){var uy=zr$1(ay.accessibleIds,function(my){var ly=yn.works.getResolvedObserver(my);if(!ly)return 1/0;var sy=ly.standingPosition.distanceTo(ay.standingPosition);return pe$4(sy,1,1/0)},!0),hy=uy[1];Wl[ay.panoId]===void 0&&(Wl[ay.panoId]=hy)},Yl=0,Zl=this.works.resolvedObservers;Yl<Zl.length;Yl++){var ey=Zl[Yl];Xl(ey)}var Rm=Object.keys(Wl).map(function(ay){return Wl[ay]});if(Rm.length){var ry=Rm.reduce(function(ay,uy){return ay+uy},0)/Rm.length;$l=pe$4(ry*.6,1,3)}for(var _g=0,ty=this.works.resolvedObservers;_g<ty.length;_g++){var ey=ty[_g],Io=void 0;Rn[ey.panoId]?(Io=Rn[ey.panoId],Io.loading===!0&&ey.loadable===!1&&Io.setLoading(!1),delete Rn[ey.panoId]):(Io=this.panoCircleMeshCreator(ey.pano),Io.name="PanoCircleMesh_"+ey.panoId,this.helper.add(Io)),Io.scale.set($l,1,$l),Io.position.copy(ey.standingPosition),this.panoMeshes[ey.panoId]=Io}for(var ny=0,iy=Object.keys(Rn);ny<iy.length;ny++){var oy=iy[ny];this.helper.remove(Rn[oy]),Rn[oy].dispose(),delete Rn[oy]}},vn.prototype.doMoveToPano=function(yn,Rn,Bn){var Co=this,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry;Bn===void 0&&(Bn={});var _g=Ae$3(),ty=Lt$1();this.tiling.cleanup(),this.panoResources[ty]=Rn;var ny=1,iy,oy,ay;if(this.locationMotion.ended){var uy=this.locationMotion.getKeyFrameSegment(_g);uy[0];var hy=uy[1],my=this.locationMotion.value,ly=((Po=this.panoResourceFromLocationMotionKeyframe(hy))!==null&&Po!==void 0?Po:this.camera).position,sy=Rn.position;iy=Math.max(ly.distanceTo(sy),ny),oy=[{key:hy.key,progress:0,value:O$n(O$n({},my),{count:0})},{key:ty,progress:1,value:{distance:0,count:1}}],ay=0}else{var cy=this.locationMotion.getKeyFrameSegment(_g),fy=cy[0],hy=cy[1],my=this.locationMotion.value,vy=this.panoResourceFromLocationMotionKeyframe(fy).position,ly=this.panoResourceFromLocationMotionKeyframe(hy).position,sy=Rn.position,dy=hy.value.count-my.count,Ay=Math.max(vy.distanceTo(ly),ny)*dy,gy=Math.max(ly.distanceTo(sy),ny);iy=Ay+gy,oy=[{key:fy.key,progress:0,value:O$n({},my)},{key:hy.key,progress:Ay/iy,value:hy.value},{key:ty,progress:1,value:{count:hy.value.count+1,distance:0}}];var wy=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Cy=this.locationMotionKeyframesLength(oy);wy===0||wy===0?ay=0:ay=this.locationMotion.getProgressVelocity(_g)*wy/Cy}var My=Rn.effect==="instant"?0:this.calculateMovingDuration(Bn.duration,Rn.effect==="fly"?iy:0),Py={longitude:Bn.longitude,latitude:Bn.latitude,fov:Bn.fov},Dy=O$n(O$n({},yn),{mode:this.mode,longitude:(To=Py.longitude)!==null&&To!==void 0?To:this.camera.pose.longitude,latitude:(Io=Py.latitude)!==null&&Io!==void 0?Io:this.camera.pose.latitude,fov:($l=Py.fov)!==null&&$l!==void 0?$l:this.camera.pose.fov,offset:Rn.position.clone(),distance:this.camera.pose.distance}),qy=this.currentPano;if(this.emit("pano.moveTo",X$c("pano.moveTo",{options:Bn,prevPano:qy,progress:0,state:Dy,userAction:this.userAction,error:null})),Bn.moveStartCallback&&Bn.moveStartCallback(Dy),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=q$q,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),Rn.effect==="fly")this.cameraMotion.set(Py,My).catch(q$q);else{var Xy=Ut$1({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude}),$y=Ut$1({longitude:(Wl=Py.longitude)!==null&&Wl!==void 0?Wl:this.cameraMotion.value.longitude,latitude:(Xl=Py.latitude)!==null&&Xl!==void 0?Xl:this.cameraMotion.value.latitude}),xy=new Object3D;xy.lookAt(Xy);var Ry=new Matrix4().makeRotationFromQuaternion(xy.quaternion);xy.lookAt($y);var Ly=new Matrix4().makeRotationFromQuaternion(xy.quaternion),ky=new Matrix4().getInverse(Ry).premultiply(Ly),Ey=this.cameraMotion.value.fov,Iy=(Yl=Py.fov)!==null&&Yl!==void 0?Yl:this.cameraMotion.value.fov,zy=1;Rn.effect==="zoomin"?zy=1.5:Rn.effect==="zoomout"&&(zy=.4);for(var Uy=pe$4(Iy*zy,1,170),Qy=0;Qy<oy.length-1;Qy++){var Gy=oy[Qy].key;if(Gy){var Zy=this.panoResources[Gy];Zy&&(Zy.fixCameraTransform.copy(ky),Zy.panoPicture&&(Zy.panoPicture.zoom=Math.tan(Ey/2/180*Math.PI)/Math.tan(Uy/2/180*Math.PI)))}}this.cameraMotion.setKeyframes([{progress:0,value:{longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude,fov:this.cameraMotion.value.fov}},{progress:0,value:{longitude:(Zl=Py.longitude)!==null&&Zl!==void 0?Zl:this.cameraMotion.value.longitude,latitude:(ey=Py.latitude)!==null&&ey!==void 0?ey:this.cameraMotion.value.latitude,fov:Uy}},{progress:1,value:{longitude:(Rm=Py.longitude)!==null&&Rm!==void 0?Rm:this.cameraMotion.value.longitude,latitude:(ry=Py.latitude)!==null&&ry!==void 0?ry:this.cameraMotion.value.latitude,fov:Iy}}],My).catch(q$q)}var Ty=this.locationMotion.setKeyframes(oy,My,ay);Ty.then(function(){for(var Vy,Yy,Jy=0,Hy=Co.models;Jy<Hy.length;Jy++){var i1=Hy[Jy];i1.show()}var u1=O$n(O$n({},yn),{mode:Co.mode,longitude:Co.camera.pose.longitude,latitude:Co.camera.pose.latitude,fov:Co.camera.pose.fov,offset:Co.camera.pose.offset.clone(),distance:Co.camera.pose.distance});Co.emit("pano.arrived",X$c("pano.arrived",{options:Bn,prevPano:qy,progress:1,state:u1,userAction:Co.userAction,error:null})),Bn.moveEndCallback&&Bn.moveEndCallback(u1);var p1=Co.works.getResolvedObserver(yn);if(p1&&p1.video&&Co.videoTexture&&Co.videoTexture.image instanceof HTMLVideoElement){var g1=$m.clone().multiply((Yy=(Vy=Co.models.getMaterial().pano1)===null||Vy===void 0?void 0:Vy.matrix)!==null&&Yy!==void 0?Yy:new Matrix4).multiply(p1.video.matrix),v1={map:Co.videoTexture,size:p1.video.size,matrix:g1,alpha:1},h1=Lt$1(),l1=Co.videoTexture.image;l1.setAttribute("uuid",h1),kl().then(function(o1){o1&&p1.video&&l1.getAttribute("uuid")===h1&&(l1.oncanplay=function(){l1.oncanplay=q$q,l1.play()},l1.ontimeupdate=function(){l1.currentTime>.5&&(l1.ontimeupdate=q$q,Co.panoVideo.setMaterial(v1))},l1.src=p1.video.source)}).catch(function(){l1.removeAttribute("uuid")})}},function(){Co.emit("pano.cancel",X$c("pano.cancel",{options:Bn,prevPano:qy,progress:0,state:Dy,userAction:Co.userAction,error:null})),Bn.moveCancelCallback&&Bn.moveCancelCallback()})},vn.prototype.getForwardObserverOrNot=function(yn){var Rn=this,Bn=this.works.getResolvedObserver(this.currentPano);if(!Bn)return null;var Co=yn!=null?yn:new Raycaster(this.camera.position.clone(),this.camera.getDirection(new Vector3));Co.params.Points={threshold:.1};var Po=Bn.standingPosition.clone();if(Bn.position.distanceTo(Co.ray.origin)>1){var To=this.models.intersectRaycaster(new Raycaster(Co.ray.origin,new Vector3(0,-1,0)))[0];To&&To.distance<=2?Po.copy(To.point):Po.copy(Co.ray.origin).add(new Vector3(0,-1.5,0))}var Io=this.models.intersectRaycaster(Co)[0],$l=Io?Io.point:Co.ray.origin.clone().add(Co.ray.direction.clone().normalize().multiplyScalar(3)),Wl=$l.clone().sub(Po).normalize();if(Wl.length()===0)return null;for(var Xl=Bn.accessibleIds.filter(function(oy){if(oy===_e$3(Rn.currentPano))return!1;var ay=Rn.works.getResolvedObserver(oy);if(!ay)return!1;var uy=ay.standingPosition.clone().project(Rn.camera);return Math.abs(uy.z)>1||Math.abs(uy.x)>1||Math.abs(uy.y)>1?!1:ay.loadable||ay.active}),Yl=Xl.slice().sort(function(oy,ay){var uy=Rn.works.getResolvedObserver(oy).standingPosition.clone().distanceTo(Po),hy=Rn.works.getResolvedObserver(ay).standingPosition.clone().distanceTo(Po);return uy-hy}),Zl=0,ey=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Zl<ey.length;Zl++)for(var Rm=ey[Zl],ry=0,_g=Yl;ry<_g.length;ry++){var ty=_g[ry],ny=this.works.getResolvedObserver(ty);if(ny){var iy=ny.standingPosition.clone().sub(Po);if(iy&&iy.length()!==0&&Wl.angleTo(iy)<Rm)return ny}}return null},vn.prototype.onTapGesture=function(yn){var Rn=this,Bn;if(this.userAction=yn.userAction,this.stopMomentumMovement(),!!this.initAnimationed){if(!this.locationMotion.ended){var Co=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]);if(Co.panoId!==_e$3(this.currentPano))return}var Po=yn.center.raycaster,To=this.camera.getDirection(new Vector3).setY(0),Io=null,$l=this.works.getResolvedObserver(this.currentPano);if($l){var Wl=$l.accessibleIds.filter(function(Cy){if(Cy===_e$3(Rn.currentPano))return!1;var My=Rn.works.getResolvedObserver(Cy);return!My||My.position.distanceTo(Rn.camera.position)>Rn.maxAccessibleDistance?!1:My.loadable||My.active}),Xl=this.models.intersectRaycaster(Po)[0];if(Xl){var Yl=zr$1(Wl,function(Cy){var My=Rn.works.getResolvedObserver(Cy);if(!My)return 1/0;var Py=My.standingPosition.clone();return Py.distanceTo(Xl.point)},!0),Zl=Yl[0],ey=Yl[1];Zl&&ey<this.panoTapTriggerRadius&&(Io=(Bn=this.works.getResolvedObserver(Zl))!==null&&Bn!==void 0?Bn:null)}Io||(Io=this.getForwardObserverOrNot(Po));for(var Rm=0,ry=this.locationMotion.keyframes;Rm<ry.length;Rm++){var _g=ry[Rm],ty=this.panoResourceFromLocationMotionKeyframe(_g);if(!(_g.progress<this.locationMotion.progress)&&Io&&ty.panoId===Io.panoId){Io=null;break}}if(!Io)this.emit("gesture.tap",yn),yn.defaultPrevented||this.locationMotion.ended===!0&&this.cameraBounce();else{for(var ny={},iy=Math.PI/6,oy=Math.PI/12,ay=Io.position.clone().setY(0).sub($l.position.clone().setY(0)).normalize(),uy=[],hy=[],my=[],ly=0,sy=Io.accessibleIds;ly<sy.length;ly++){var Zl=sy[ly],cy=Qt$2(Zl);if(!(Or$1(cy,this.currentPano)||Or$1(cy,Io.pano))){var fy=this.works.getResolvedObserver(Zl);if(fy){var vy=fy.position.clone().sub(Io.position).setY(0);ay.angleTo(vy)<iy&&my.push(vy)}}}var dy=my.length>0?my:yt$3(yt$3([],uy,!0),hy,!0),Ay=dy.slice().sort(function(Cy,My){return Cy.angleTo(ay)-My.angleTo(ay)})[0];Ay&&Ay.angleTo(To)>oy&&(ny.longitude=Math.atan2(-Ay.x,-Ay.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(ny.latitude=pe$4(0,this.minLatitude,this.maxLatitude));var gy=O$n({},yn.state);if(gy.workCode=Io.pano.workCode,gy.panoIndex=Io.pano.panoIndex,ny.longitude!==void 0&&(gy.longitude=ny.longitude),ny.latitude!==void 0&&(gy.latitude=ny.latitude),ny.fov!==void 0&&(gy.fov=ny.fov),gy.distance=0,gy.offset=Io.position.clone(),yn.state=gy,this.emit("gesture.tap",yn),!yn.defaultPrevented){if(this.emit("pano.select",X$c("pano.select",{prevPano:this.currentPano,state:gy,userAction:yn.userAction,options:ny,progress:0,error:null})),Io&&!Io.active){var wy=Io.panoId;this.panoMeshes[wy]&&(this.panoMeshes[wy].setDisabled(!1),this.panoMeshes[wy].setLoading(!0))}Io&&Io.active&&this.emit("pano.request",X$c("pano.request",{userAction:yn.userAction,prevPano:this.currentPano,progress:0,state:gy,options:ny,error:null}))}}}}},vn}(Ll),Qr$1=Math.PI/180,Jn=180/Math.PI,Ol=.001,zl=1,Ai=function(){var cr=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return cr}}(),eA=function(){var cr=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return cr}}(),tA=function(){var cr=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return cr}}(),Vl=function(){var cr=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,vn=cr?parseInt(cr[1],10):null;return function(){return vn}}(),rA=function(){var cr=!1;if(Vl()===65){var vn=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(vn){var yn=vn[1].split(".");yn[0],yn[1];var Rn=yn[2],Bn=yn[3];cr=parseInt(Rn,10)===3325&&parseInt(Bn,10)<148}}return function(){return cr}}(),nA=function(){var cr=Ai()&&eA()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return cr}}(),Dl=function(){var cr=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return cr}}();function _s(){var cr=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return Dl()?!cr:cr}function iA(cr){return!(isNaN(cr)||cr<=Ol||cr>zl)}function aA(cr){if(cr.w>1)return 0;var vn=2*Math.acos(cr.w);return vn}var Js=function(){var cr={};return function(vn,yn){cr[vn]===void 0&&(console.warn("cardboard: "+yn),cr[vn]=!0)}}();function Ks(cr){var vn,yn=cr.indexOf("://");yn!==-1?vn=yn+3:vn=0;var Rn=cr.indexOf("/",vn);return Rn===-1&&(Rn=cr.length),cr.substring(0,Rn)}function oA(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var cr=window.self!==window.top,vn=Ks(document.referrer),yn=Ks(window.location.href);return cr&&vn!==yn}var js=function(){function cr(Rn,Bn,Co){var Po=Bn?Bn[0]:0,To=Bn?Bn[1]:0,Io=Bn?Bn[2]:0,$l=Bn?Bn[3]:1,Wl=Po+Po,Xl=To+To,Yl=Io+Io,Zl=Po*Wl,ey=Po*Xl,Rm=Po*Yl,ry=To*Xl,_g=To*Yl,ty=Io*Yl,ny=$l*Wl,iy=$l*Xl,oy=$l*Yl;return Rn[0]=1-(ry+ty),Rn[1]=ey+oy,Rn[2]=Rm-iy,Rn[3]=0,Rn[4]=ey-oy,Rn[5]=1-(Zl+ty),Rn[6]=_g+ny,Rn[7]=0,Rn[8]=Rm+iy,Rn[9]=_g-ny,Rn[10]=1-(Zl+ry),Rn[11]=0,Rn[12]=0,Rn[13]=0,Rn[14]=0,Rn[15]=1,Rn}function vn(Rn,Bn,Co){var Po=Co[0],To=Co[1],Io=Co[2],$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy;return Bn===Rn?(Rn[12]=Bn[0]*Po+Bn[4]*To+Bn[8]*Io+Bn[12],Rn[13]=Bn[1]*Po+Bn[5]*To+Bn[9]*Io+Bn[13],Rn[14]=Bn[2]*Po+Bn[6]*To+Bn[10]*Io+Bn[14],Rn[15]=Bn[3]*Po+Bn[7]*To+Bn[11]*Io+Bn[15]):($l=Bn[0],Wl=Bn[1],Xl=Bn[2],Yl=Bn[3],Zl=Bn[4],ey=Bn[5],Rm=Bn[6],ry=Bn[7],_g=Bn[8],ty=Bn[9],ny=Bn[10],iy=Bn[11],Rn[0]=$l,Rn[1]=Wl,Rn[2]=Xl,Rn[3]=Yl,Rn[4]=Zl,Rn[5]=ey,Rn[6]=Rm,Rn[7]=ry,Rn[8]=_g,Rn[9]=ty,Rn[10]=ny,Rn[11]=iy,Rn[12]=$l*Po+Zl*To+_g*Io+Bn[12],Rn[13]=Wl*Po+ey*To+ty*Io+Bn[13],Rn[14]=Xl*Po+Rm*To+ny*Io+Bn[14],Rn[15]=Yl*Po+ry*To+iy*Io+Bn[15]),Rn}function yn(Rn,Bn){var Co=Bn[0],Po=Bn[1],To=Bn[2],Io=Bn[3],$l=Bn[4],Wl=Bn[5],Xl=Bn[6],Yl=Bn[7],Zl=Bn[8],ey=Bn[9],Rm=Bn[10],ry=Bn[11],_g=Bn[12],ty=Bn[13],ny=Bn[14],iy=Bn[15],oy=Co*Wl-Po*$l,ay=Co*Xl-To*$l,uy=Co*Yl-Io*$l,hy=Po*Xl-To*Wl,my=Po*Yl-Io*Wl,ly=To*Yl-Io*Xl,sy=Zl*ty-ey*_g,cy=Zl*ny-Rm*_g,fy=Zl*iy-ry*_g,vy=ey*ny-Rm*ty,dy=ey*iy-ry*ty,Ay=Rm*iy-ry*ny,gy=oy*Ay-ay*dy+uy*vy+hy*fy-my*cy+ly*sy;return gy?(gy=1/gy,Rn[0]=(Wl*Ay-Xl*dy+Yl*vy)*gy,Rn[1]=(To*dy-Po*Ay-Io*vy)*gy,Rn[2]=(ty*ly-ny*my+iy*hy)*gy,Rn[3]=(Rm*my-ey*ly-ry*hy)*gy,Rn[4]=(Xl*fy-$l*Ay-Yl*cy)*gy,Rn[5]=(Co*Ay-To*fy+Io*cy)*gy,Rn[6]=(ny*uy-_g*ly-iy*ay)*gy,Rn[7]=(Zl*ly-Rm*uy+ry*ay)*gy,Rn[8]=($l*dy-Wl*fy+Yl*sy)*gy,Rn[9]=(Po*fy-Co*dy-Io*sy)*gy,Rn[10]=(_g*my-ty*uy+iy*oy)*gy,Rn[11]=(ey*uy-Zl*my-ry*oy)*gy,Rn[12]=(Wl*cy-$l*vy-Xl*sy)*gy,Rn[13]=(Co*vy-Po*cy+To*sy)*gy,Rn[14]=(ty*ay-_g*hy-ny*oy)*gy,Rn[15]=(Zl*hy-ey*ay+Rm*oy)*gy,Rn):null}return function(Rn,Bn,Co){cr(Rn,Bn),Co&&vn(Rn,Rn,Co),yn(Rn,Rn)}}(),h0=function(){function cr(vn,yn){vn===void 0&&(vn=new Vector3),yn===void 0&&(yn=0),this.sample=vn,this.timestampS=yn}return cr.prototype.set=function(vn,yn){this.sample=vn,this.timestampS=yn},cr.prototype.copy=function(vn){this.set(vn.sample,vn.timestampS)},cr}(),sA=function(){function cr(vn,yn){this.kFilter=vn,this.isDebug=yn,this.currentAccelMeasurement=new h0,this.currentGyroMeasurement=new h0,this.previousGyroMeasurement=new h0,Ai()?this.filterQ=new Quaternion(-1,0,0,1):this.filterQ=new Quaternion(1,0,0,1),this.previousFilterQ=new Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new Vector3,this.measuredGravity=new Vector3,this.gyroIntegralQ=new Quaternion}return cr.prototype.addAccelMeasurement=function(vn,yn){this.currentAccelMeasurement.set(vn,yn)},cr.prototype.addGyroMeasurement=function(vn,yn){this.currentGyroMeasurement.set(vn,yn);var Rn=yn-this.previousGyroMeasurement.timestampS;iA(Rn)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},cr.prototype.getOrientation=function(){return this.filterQ},cr.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var vn=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,yn=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,vn);this.gyroIntegralQ.multiply(yn),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(yn);var Rn=new Quaternion;Rn.copy(this.filterQ),Rn.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Rn),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Bn=new Quaternion;Bn.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Bn.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Jn*aA(Bn),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Co=new Quaternion;Co.copy(this.filterQ),Co.multiply(Bn),this.filterQ.slerp(Co,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},cr.prototype.accelToQuaternion_=function(vn){var yn=new Vector3;yn.copy(vn),yn.normalize();var Rn=new Quaternion;return Rn.setFromUnitVectors(new Vector3(0,0,-1),yn),Rn.inverse(),Rn},cr.prototype.gyroToQuaternionDelta_=function(vn,yn){var Rn=new Quaternion,Bn=new Vector3;return Bn.copy(vn),Bn.normalize(),Rn.setFromAxisAngle(Bn,vn.length()*yn),Rn},cr}(),uA=function(){function cr(vn,yn){this.predictionTimeS=vn,this.isDebug=yn,this.previousQ=new Quaternion,this.previousTimestampS=null,this.deltaQ=new Quaternion,this.outQ=new Quaternion}return cr.prototype.getPrediction=function(vn,yn,Rn){if(!this.previousTimestampS)return this.previousQ.copy(vn),this.previousTimestampS=Rn,vn;var Bn=new Vector3;Bn.copy(yn),Bn.normalize();var Co=yn.length();if(Co<Qr$1*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Jn*Co).toFixed(1)),this.outQ.copy(vn),this.previousQ.copy(vn),this.outQ;var Po=Co*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Bn,Po),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(vn),this.previousTimestampS=Rn,this.outQ},cr}(),lA=function(){function cr(vn){this.coefficients=vn}return cr.prototype.distortInverse=function(vn){for(var yn=0,Rn=1,Bn=vn-this.distort(yn);Math.abs(Rn-yn)>1e-4;){var Co=vn-this.distort(Rn),Po=Rn-Co*((Rn-yn)/(Co-Bn));yn=Rn,Rn=Po,Bn=Co}return Rn},cr.prototype.distort=function(vn){for(var yn=vn*vn,Rn=0,Bn=0;Bn<this.coefficients.length;Bn++)Rn=yn*(Rn+this.coefficients[Bn]);return(Rn+1)*vn},cr}(),cA=function(){function cr(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null}return cr}(),Xs=function(){function cr(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0}return cr}(),fA=function(){function cr(vn,yn,Rn,Bn){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=Rn,this.accelerometer=new Vector3,this.gyroscope=new Vector3,this.filter=new sA(vn,Bn),this.posePredictor=new uA(yn,Bn),this.isFirefoxAndroid=tA(),this.isIOS=Ai();var Co=Vl();this.isDeviceMotionInRadians=!this.isIOS&&Co!==null&&Co<66,this.isWithoutDeviceMotion=rA()||nA(),this.filterToWorldQ=new Quaternion,Ai()?this.filterToWorldQ.setFromAxisAngle(new Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new Quaternion,this.worldToScreenQ=new Quaternion,this.originalPoseAdjustQ=new Quaternion;var Po=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0,0,1),Po),this.setScreenTransform_(),_s()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return cr.prototype.getPosition=function(){return null},cr.prototype.getOrientation=function(){var vn;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Co=new Quaternion().setFromAxisAngle(new Vector3(0,0,-1),0),Po=new Quaternion;return typeof window!="undefined"&&window.orientation===-90?Po.setFromAxisAngle(new Vector3(0,1,0),Math.PI/-2):Po.setFromAxisAngle(new Vector3(0,1,0),Math.PI/2),Co.multiply(Po)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var Co=new Quaternion;return Co.setFromAxisAngle(new Vector3(1,0,0),-Math.PI/2),Co}(),vn=this._deviceOrientationQ;var yn=new Quaternion;return yn.copy(vn),yn.multiply(this.deviceOrientationFilterToWorldQ),yn.multiply(this.resetQ),yn.multiply(this.worldToScreenQ),yn.multiplyQuaternions(this.deviceOrientationFixQ,yn),this.yawOnly&&(yn.x=0,yn.z=0,yn.normalize()),this.orientationOut_[0]=yn.x,this.orientationOut_[1]=yn.y,this.orientationOut_[2]=yn.z,this.orientationOut_[3]=yn.w,this.orientationOut_}else{var Rn=this.filter.getOrientation();vn=this.posePredictor.getPrediction(Rn,this.gyroscope,this.previousTimestampS)}var Bn=new Quaternion;return Bn.copy(this.filterToWorldQ),Bn.multiply(this.resetQ),Bn.multiply(vn),Bn.multiply(this.worldToScreenQ),this.yawOnly&&(Bn.x=0,Bn.z=0,Bn.normalize()),this.orientationOut_[0]=Bn.x,this.orientationOut_[1]=Bn.y,this.orientationOut_[2]=Bn.z,this.orientationOut_[3]=Bn.w,this.orientationOut_},cr.prototype.getPose=function(){var vn=new cA;return vn.orientation=this.getOrientation(),vn},cr.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),_s()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},cr.prototype.getFrameData=function(vn){var yn=this.getOrientation(),Rn=this.getEyeOffset(),Bn=this.getEyeProjectionMatrix();return vn.pose.angularAcceleration=null,vn.pose.angularVelocity=null,vn.pose.linearAcceleration=null,vn.pose.linearVelocity=null,vn.pose.orientation=yn,vn.pose.position=null,vn.timestamp=this.previousTimestampS,vn.leftProjectionMatrix.set(Bn.left),vn.rightProjectionMatrix.set(Bn.right),js(vn.leftViewMatrix,yn,Rn.left),js(vn.rightViewMatrix,yn,Rn.right),vn},cr.prototype.start=function(){if(typeof window=="undefined")return function(){};var vn=this.onDeviceMotion_.bind(this),yn=this.onOrientationChange_.bind(this),Rn=this.onMessage_.bind(this),Bn=this.onDeviceOrientation_.bind(this);return Ai()&&oA()&&window.addEventListener("message",Rn),window.addEventListener("orientationchange",yn),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",Bn):window.addEventListener("devicemotion",vn),function(){window.removeEventListener("devicemotion",vn),window.removeEventListener("deviceorientation",yn),window.removeEventListener("orientationchange",yn),window.removeEventListener("message",Rn)}},cr.prototype.getEyeOffset=function(){return{left:[-this.viewer.interLensDistance*.5,0,0],right:[this.viewer.interLensDistance*.5,0,0]}},cr.prototype.getEyeProjectionMatrix=function(){var vn=this.getEyeFieldOfView(),yn=this.depthNear,Rn=this.depthFar,Bn={left:[],right:[]};{var Co=vn.left.upDegrees*Qr$1,Po=vn.left.downDegrees*Qr$1,To=vn.left.leftDegrees*Qr$1,Io=vn.left.rightDegrees*Qr$1,$l=2/(To+Io),Wl=2/(Co+Po);Bn.left[0]=$l,Bn.left[1]=0,Bn.left[2]=0,Bn.left[3]=0,Bn.left[4]=0,Bn.left[5]=Wl,Bn.left[6]=0,Bn.left[7]=0,Bn.left[8]=-((To-Io)*$l*.5),Bn.left[9]=(Co-Po)*Wl*.5,Bn.left[10]=Rn/(yn-Rn),Bn.left[11]=-1,Bn.left[12]=0,Bn.left[13]=0,Bn.left[14]=Rn*yn/(yn-Rn),Bn.left[15]=0}{var Co=vn.right.upDegrees*Qr$1,Po=vn.right.downDegrees*Qr$1,To=vn.right.leftDegrees*Qr$1,Io=vn.right.rightDegrees*Qr$1,$l=2/(To+Io),Wl=2/(Co+Po);Bn.right[0]=$l,Bn.right[1]=0,Bn.right[2]=0,Bn.right[3]=0,Bn.right[4]=0,Bn.right[5]=Wl,Bn.right[6]=0,Bn.right[7]=0,Bn.right[8]=-((To-Io)*$l*.5),Bn.right[9]=(Co-Po)*Wl*.5,Bn.right[10]=Rn/(yn-Rn),Bn.right[11]=-1,Bn.right[12]=0,Bn.right[13]=0,Bn.right[14]=Rn*yn/(yn-Rn),Bn.right[15]=0}return Bn},cr.prototype.getEyeFieldOfView=function(){var vn=this.viewer,yn=this.device,Rn=new lA(vn.distortionCoefficients),Bn=vn.screenLensDistance,Co=(yn.widthMeters-vn.interLensDistance)/2,Po=vn.interLensDistance/2,To=vn.baselineLensDistance-yn.bevelMeters,Io=yn.heightMeters-To,$l=Jn*Math.atan(Rn.distort(Co/Bn)),Wl=Jn*Math.atan(Rn.distort(Po/Bn)),Xl=Jn*Math.atan(Rn.distort(To/Bn)),Yl=Jn*Math.atan(Rn.distort(Io/Bn)),Zl=new Xs,ey=new Xs;return Zl.leftDegrees=Math.min($l,vn.fov),Zl.rightDegrees=Math.min(Wl,vn.fov),Zl.downDegrees=Math.min(Xl,vn.fov),Zl.upDegrees=Math.min(Yl,vn.fov),ey.leftDegrees=Zl.rightDegrees,ey.rightDegrees=Zl.leftDegrees,ey.upDegrees=Zl.upDegrees,ey.downDegrees=Zl.downDegrees,{left:Zl,right:ey}},cr.prototype.onDeviceOrientation_=function(vn){this._deviceOrientationQ=this._deviceOrientationQ||new Quaternion;var yn=vn.alpha,Rn=vn.beta,Bn=vn.gamma;yn=(yn||0)*Math.PI/180,Rn=(Rn||0)*Math.PI/180,Bn=(Bn||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new Euler(yn,Rn,-Bn,"YXZ"))},cr.prototype.onDeviceMotion_=function(vn){this.updateDeviceMotion_(vn)},cr.prototype.updateDeviceMotion_=function(vn){var yn=vn.accelerationIncludingGravity,Rn=vn.rotationRate,Bn=vn.timeStamp/1e3,Co=Bn-this.previousTimestampS;if(Co<0){Js("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=Bn;return}else if(Co<=Ol||Co>zl){Js("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=Bn;return}yn&&(this.accelerometer.set(-yn.x,-yn.y,-yn.z),Rn&&(Dl()?this.gyroscope.set(-Rn.beta,Rn.alpha,Rn.gamma):this.gyroscope.set(Rn.alpha,Rn.beta,Rn.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Bn)),this.filter.addAccelMeasurement(this.accelerometer,Bn)),this.previousTimestampS=Bn},cr.prototype.onOrientationChange_=function(){this.setScreenTransform_()},cr.prototype.onMessage_=function(vn){var yn=vn.data;if(!(!yn||!yn.type)){var Rn=yn.type.toLowerCase();Rn==="devicemotion"&&this.updateDeviceMotion_(yn.deviceMotionEvent)}},cr.prototype.setScreenTransform_=function(){this.worldToScreenQ.set(0,0,0,1);var vn=typeof window!="undefined"?window.orientation:0;switch(vn){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Vector3(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},cr}(),Wi=[0,0,.5,1],Zi=[.5,0,.5,1],dA=function(){function cr(vn){var yn=this;this.renderer=vn,this.sensor=new fA(.98,.04,!1,!1),this.scale=1,this.cameraL=new PerspectiveCamera,this.cameraR=new PerspectiveCamera;var Rn=this.sensor.start();this.dispose=function(){var Bn=yn.renderer.getSize(new Vector2);yn.renderer.setScissor(0,0,Bn.width,Bn.height),yn.renderer.setViewport(0,0,Bn.width,Bn.height),yn.renderer.setScissorTest(!1),Rn()}}return cr.prototype.render=function(vn,yn){var Rn=this.renderer.getSize(new Vector2);if(Rn.width>Rn.height){var Bn=vn.autoUpdate;Bn&&(vn.updateMatrixWorld(),vn.autoUpdate=!1);var Co={x:Math.round(Rn.width*Wi[0]),y:Math.round(Rn.height*Wi[1]),width:Math.round(Rn.width*Wi[2]),height:Math.round(Rn.height*Wi[3])},Po={x:Math.round(Rn.width*Zi[0]),y:Math.round(Rn.height*Zi[1]),width:Math.round(Rn.width*Zi[2]),height:Math.round(Rn.height*Zi[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),yn.parent===null&&yn.updateMatrixWorld(),yn.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),yn.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var To=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new Vector3().fromArray(To.left),this.scale),this.cameraR.translateOnAxis(new Vector3().fromArray(To.right),this.scale);var Io=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Io.left.slice(),this.cameraR.projectionMatrix.elements=Io.right.slice(),this.renderer.setViewport(Co.x,Co.y,Co.width,Co.height),this.renderer.setScissor(Co.x,Co.y,Co.width,Co.height),this.renderer.render(vn,this.cameraL),this.renderer.setViewport(Po.x,Po.y,Po.width,Po.height),this.renderer.setScissor(Po.x,Po.y,Po.width,Po.height),this.renderer.render(vn,this.cameraR),this.renderer.setViewport(0,0,Rn.width,Rn.height),this.renderer.setScissor(0,0,Rn.width,Rn.height),this.renderer.setScissorTest(!1),Bn&&(vn.autoUpdate=!0)}else this.renderer.render(vn,yn)},cr.prototype.dispose=function(){},cr}();const hA$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",pA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC";var p0,v0={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},Ws=typeof navigator!="undefined"&&(p0=v0[navigator.language.split("-")[0]])!==null&&p0!==void 0?p0:v0.zh,vA$1=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat(hA$1,`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat(pA,`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(Ws.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(Ws.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function mA(cr){for(var vn=1,yn=document.getElementsByTagName("meta"),Rn=0;Rn<yn.length;Rn++){var Bn=yn[Rn];if(Bn.getAttribute("name")==="viewport"){var Co=Bn.getAttribute("content")||"",Po=Co.match(/initial\-scale\=([\d|\.]+)/);Po&&(vn=Number(Po[1])),isNaN(vn)&&(vn=1)}}var To=function(Io){return Math.floor(Io*vn)+"px"};return vA$1.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,cr).replace(/(\d+)px/g,function(Io,$l){return To(Number($l))})}function AA(){var cr="five_vr_helper_"+Lt$1(),vn=mA(cr),yn=document.createElement("div");return yn.className=cr,yn.innerHTML=vn,yn}var m0=new CircleBufferGeometry(.12,16),gA=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,yA$1=`
uniform float circleScale;
uniform float circleFade;
uniform float circleOpacity;
uniform float loadingAngle;
uniform float loadingOpacity;
uniform float opacity;
uniform float disable;
varying vec2 vUv;

#include <common>
#include <logdepthbuf_pars_fragment>
#define SMOOTH_DIST 0.017
#define CENTER vec2(0.5, 0.5)

float inside(float innerDist) {
  float dist = length(CENTER - vUv);
  return smoothstep(innerDist, innerDist + SMOOTH_DIST, dist);
}
float outside(float outerDist) {
  float dist = length(CENTER - vUv);
  return 1.0 - smoothstep(outerDist - SMOOTH_DIST, outerDist, dist);
}

vec4 create_circle() {
  float dist = length(CENTER - vUv);
  float gradient = clamp(0.98 + abs(dot(normalize(vec2(1.0, -1.0)), vUv - CENTER)) * 2.0, 0.0, 1.0);
  vec3 color = mix(vec3(0.576, 0.635, 1.0), vec3(1.0, 1.0, 1.0), circleFade * 0.5);
  return vec4(color, 1.0 * gradient * circleOpacity * outside(0.3 * circleScale));
}

vec4 create_disable() {
  float dist = length(CENTER - vUv);
  return vec4(1.0, 1.0, 1.0, 0.5 * outside(0.32 * circleScale));
}

vec4 create_loading() {
  float angle = PI - atan(CENTER.x - vUv.x, CENTER.y - vUv.y);
  angle = mod(angle + loadingAngle, PI2);
  float gradient = (1.0 - smoothstep(0.0, PI2, angle)) * 0.9 + 0.1;
  return vec4(1.0, 1.0, 1.0, gradient * loadingOpacity * inside(0.2 * circleScale) * outside(0.25 * circleScale));
}

void main() {
  #include <logdepthbuf_fragment>
  gl_FragColor = vec4(1.0, 1.0, 1.0, 0);

  vec4 circleColor = create_circle();
  gl_FragColor = mix(gl_FragColor, circleColor, circleColor.a);

  vec4 loadingColor = create_loading();
  gl_FragColor = mix(gl_FragColor, loadingColor, loadingColor.a);

  gl_FragColor = mix(gl_FragColor, create_disable(), disable);

  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * opacity);
}
`,bA$1=`
varying vec2 vUv;
#include <common>
#include <logdepthbuf_pars_vertex>
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  #include <logdepthbuf_vertex>
}
`,xA=`
varying vec2 vUv;
uniform float opacity;
#include <common>
#include <logdepthbuf_pars_fragment>

float smoothDist = 0.01;
void main() {
  #include <logdepthbuf_fragment>
  vec2 center = vec2(0.5, 0.5);
  float dist = length(center - vUv);
  float outerDist = 0.49;
  float innerDist = 0.29;

  float outside = 1.0 - smoothstep(outerDist - smoothDist, outerDist, dist);
  float inside = smoothstep(innerDist, innerDist + smoothDist, dist);

  vec4 bg = vec4(0.576, 0.635, 1.0, 0.3);
  float gradientAlpha = clamp(abs(dist - (outerDist + innerDist) / 2.0) / (outerDist - innerDist) * 1.5 + 0.1, 0.0, 1.0);
  vec4 gradient = vec4(1.0, 1.0, 1.0, gradientAlpha);

  gl_FragColor = mix(bg, gradient, gradient.a);

  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * opacity * outside * inside);
}
`,wA$1=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;yn.progress=0,yn.opacity=0,yn.loading=!1,yn.current=!1,yn.disabled=!1,yn.currentMotion=new Ce$2({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.85,circleScale:1}),yn.opacityMotion=new Ce$2({opacity:0}),yn.loadingMotion=new Ce$2({opacity:0}),yn.disableMotion=new Ce$2({opacity:0});var Rn={blending:CustomBlending,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendSrcAlpha:OneFactor,blendDstAlpha:OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return yn.hitTestMesh=new Mesh(m0,new MeshBasicMaterial(O$n(O$n({},Rn),{color:0,opacity:0}))),yn.hitTestMesh.scale.set(1.5,1.5,1.5),yn.ringMesh=new Mesh(m0,new ShaderMaterial(O$n(O$n({},Rn),{vertexShader:bA$1,fragmentShader:xA,uniforms:{opacity:{value:0}}}))),yn.panoMesh=new Mesh(m0,new ShaderMaterial(O$n(O$n({},Rn),{vertexShader:gA,fragmentShader:yA$1,uniforms:{circleScale:{value:1.1},circleFade:{value:0},circleOpacity:{value:.5},loadingAngle:{value:0},loadingOpacity:{value:0},opacity:{value:0},disable:{value:0}}}))),yn.add(yn.hitTestMesh),yn.add(yn.ringMesh),yn.add(yn.panoMesh),yn.renderOrder=1e4,yn.needsRender=!0,yn}return vn.prototype.setProgress=function(yn){this.progress=yn,this.setLoading(yn>0)},vn.prototype.setOpacity=function(yn){this.opacity!==yn&&(this.opacity=yn=pe$4(yn,0,1),this.opacityMotion.set({opacity:yn},30).catch(q$q))},vn.prototype.setCurrent=function(yn){if(this.current!==yn){if(yn){var Rn=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.85,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.85,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.85,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.85,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.85,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.65,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.65,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.85,circleScale:1.1}}];this.currentMotion.setKeyframes(Rn,1500).catch(q$q)}else{var Rn=[{progress:0,value:O$n({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.85,circleScale:1}}];this.currentMotion.setKeyframes(Rn,200).catch(q$q)}this.current=yn}},vn.prototype.setLoading=function(yn){this.loading!==yn&&(yn?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500).catch(q$q):this.loadingMotion.set({opacity:0},0).catch(q$q),this.loading=yn,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},vn.prototype.setDisabled=function(yn){this.disabled!==yn&&(this.disabled=yn,this.loading===!0&&this.setLoading(!1),this.disableMotion.set({opacity:yn?1:0},300).catch(q$q),this.needsRender=!0)},vn.prototype.tap=function(){return Promise.resolve()},vn.prototype.updateTime=function(yn,Rn){this.opacityMotion.update(yn),this.currentMotion.update(yn),this.loadingMotion.update(yn);var Bn=this.opacityMotion.value.opacity;this.visible=Bn!==0;var Co=this.currentMotion.value,Po=Co.ringScale,To=Co.ringOpacity,Io=Co.circleFade,$l=Co.circleOpacity,Wl=Co.circleScale;this.ringMesh.scale.set(Po,1,Po),this.ringMesh.material.uniforms.opacity.value=To*Bn,this.panoMesh.material.uniforms.opacity.value=Bn,this.panoMesh.material.uniforms.circleOpacity.value=$l,this.panoMesh.material.uniforms.circleScale.value=Wl,this.panoMesh.material.uniforms.circleFade.value=Io,this.panoMesh.material.uniforms.loadingOpacity.value=this.loadingMotion.value.opacity,this.panoMesh.material.uniforms.disable.value=this.disableMotion.value.opacity,this.panoMesh.material.uniforms.loadingAngle.value=yn/120%(Math.PI*2),this.needsRender=!0},vn.prototype.dispose=function(){this.hitTestMesh.material.dispose(),this.ringMesh.material.dispose(),this.panoMesh.material.dispose()},vn}(Object3D),SA=1500;O$n({},xa(br$1,["maxLatitude","minLatitude"]));var EA$1=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn=vn.parseArgs(yn);Rn=cr.call(this,Bn)||this,Rn.mode="VRPanorama",Rn.cardboard=new dA(Rn.renderer);var Co=AA();Rn.helperElement=Co;var Po=new fi(Co);return Rn.element.parentNode&&(Rn.element.parentNode.insertBefore(Co,Rn.element),Rn.setHelperElementSize(),Po.on("tap",function(){return Rn.emit("vr.requestExit",X$c("vr.requestExit",{}))})),Rn.destroyHelper=function(){Po.destroy(),Co.parentNode&&Co.parentNode.removeChild(Co),delete Rn.helperElement},Rn}return vn.parseArgs=function(yn){if(yn instanceof vn)return yn;var Rn=O$n(O$n({},yn),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return cr.parseArgs.call(this,Rn)},vn.initAnimationEndState=function(yn){var Rn=this.parseArgs(yn),Bn=cr.initAnimationEndState.call(this,Rn);return O$n(O$n({},Bn),{mode:"VRPanorama"})},vn.prototype.updateConfiguration=function(yn){return cr.prototype.updateConfiguration.call(this,O$n(O$n({},yn),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2}))},vn.prototype.destroy=function(){cr.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var yn=Object.keys(this.panoMeshes),Rn=0,Bn=yn;Rn<Bn.length;Rn++){var Co=Bn[Rn],Po=this.panoMeshes[Co];this.helper.remove(Po),Po.dispose(),delete this.panoMeshes[Co]}},vn.prototype.isReady=function(){return!1},vn.prototype.updateRenderSize=function(){this.needsRender=!0,this.modelSceneNeedsRender=!0,this.setHelperElementSize()},vn.prototype.updateCamera=function(yn,Rn,Bn){return Promise.resolve()},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){return Promise.resolve()},vn.prototype.updatePanoMeshesVisible=function(){for(var yn=this.works.getResolvedObserver(this.currentPano),Rn=(yn?yn.visibleIds:[]).concat(_e$3(this.currentPano)),Bn=0,Co=this.works.resolvedObservers;Bn<Co.length;Bn++){var Po=Co[Bn],To=this.panoMeshes[Po.panoId];To&&(Rn.indexOf(Po.panoId)>=0?To.parent!==this.helper&&this.helper.add(To):To.parent===this.helper&&(this.helper.remove(To),To.setOpacity(0)))}},vn.prototype.updatePanoMeshes=function(){for(var yn=Object.keys(this.panoMeshes),Rn=0,Bn=yn;Rn<Bn.length;Rn++){var Co=Bn[Rn],Po=this.panoMeshes[Co];this.helper.remove(Po),Po.dispose(),delete this.panoMeshes[Co]}for(var To=0,Io=this.works.resolvedObservers;To<Io.length;To++){var $l=Io[To],Wl=$l.panoId,Xl=new wA$1;Xl.name="panoSphere_".concat(Wl),Xl.position.copy($l.position),Xl.needsRender=!0,this.panoMeshes[Wl]=Xl}this.updatePanoMeshesVisible()},vn.prototype.updateTime=function(yn,Rn){var Bn=this,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey;if(!this.destroyed){var Rm=this.currentPano;this.userAction=!0,this.needsRender=!0,this.modelSceneNeedsRender=!0;var ry={},_g={},ty=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ny=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),iy=!1;if(this.modelAlphaMotion.ended===!1&&(this.modelAlphaMotion.update(yn),ry.modelAlpha=this.modelAlphaMotion.value.modelAlpha),this.perspToOrthoMotion.ended===!1&&(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),this.locationMotion.ended===!1){this.locationMotion.update(yn);var oy=this.locationMotion.getKeyFrameSegment(yn),ay=oy[0],uy=oy[1],hy=this.panoResourceFromLocationMotionKeyframe(ay),my=this.panoResourceFromLocationMotionKeyframe(uy),ly=hy.position,sy=my.position,cy=this.locationMotion.value.count-uy.value.count+1;ry.progress=cy,my.panoPicture&&(cy<1?hy.panoPicture&&(ry.pano0=hy.panoPicture):ry.pano0=my.panoPicture,ry.pano1=my.panoPicture),my.effect==="montage"?ry.transition="BLACK":my.effect==="spread"?ry.transition="SPREAD":ry.transition="FADE",(my.effect==="zoomin"||my.effect==="zoomout")&&(ry.progress=Math.pow(cy,3)),cy<1&&my.effect!=="fly"&&(ry.pano0&&hy.panoPicture&&(ry.pano0={map:ry.pano0.map,zoom:ry.pano0.zoom,luminanceMap:ry.pano0.luminanceMap,matrix:hy.panoPicture.matrix.clone().premultiply(hy.fixCameraTransform).setPosition(my.position)}),ly.copy(sy),iy=!0),_g.distance=this.locationMotion.value.distance,_g.offset=new Vector3(ly.x+(sy.x-ly.x)*cy,ly.y+(sy.y-ly.y)*cy,ly.z+(sy.z-ly.z)*cy);for(var fy=[],vy=[],dy=0,Ay=this.locationMotion.keyframes;dy<Ay.length;dy++){var gy=Ay[dy],wy=gy.key,Cy=gy.progress;wy!==void 0&&(fy.push(wy),Cy>this.locationMotion.progress&&vy.push(wy))}for(var My=0,Py=Object.keys(this.panoResources);My<Py.length;My++){var Dy=Py[My];if(!(vy.indexOf(Dy)>=0)){var qy=this.panoResources[Dy];if(qy.panoPicture){var Xy=qy.panoPicture.map,$y=qy.panoPicture.luminanceMap;if(Xy){if(Xy===((Co=ry.pano0)===null||Co===void 0?void 0:Co.map)||Xy===((Po=ry.pano1)===null||Po===void 0?void 0:Po.map))continue;Xy instanceof Ge$3&&Xy.cubeRenderTarget&&this.colorCubeRenderTargetPool.push(Xy.cubeRenderTarget),Xy.dispose(),$y&&($y instanceof Ge$3&&$y.cubeRenderTarget&&this.luminanceCubeRenderTargetPool.push($y.cubeRenderTarget),$y.dispose()),qy.panoPicture=null}}fy.indexOf(Dy)>=0||delete this.panoResources[Dy]}}this.currentPano=Qt$2(my.panoId),this.emit("pano.moving",X$c("pano.moving",{userAction:this.userAction,prevPano:Qt$2(ty.panoId),state:O$n(O$n(O$n(O$n({},Qt$2(ny.panoId)),{mode:this.mode}),$e(this.camera.pose)),_g),options:{},progress:this.locationMotion.progress,error:null}))}lr$1(ry)===!1&&(!((To=ry.pano0)===null||To===void 0)&&To.map&&ry.pano0.map instanceof Ge$3&&!ry.pano0.map.cubeRenderTarget&&(ry.pano0.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),!((Io=ry.pano0)===null||Io===void 0)&&Io.luminanceMap&&ry.pano0.luminanceMap instanceof Ge$3&&!ry.pano0.luminanceMap.cubeRenderTarget&&(ry.pano0.luminanceMap.cubeRenderTarget=this.luminanceCubeRenderTargetPool.pop()),!(($l=ry.pano1)===null||$l===void 0)&&$l.map&&ry.pano1.map instanceof Ge$3&&!ry.pano1.map.cubeRenderTarget&&(ry.pano1.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),!((Wl=ry.pano1)===null||Wl===void 0)&&Wl.luminanceMap&&ry.pano1.luminanceMap instanceof Ge$3&&!ry.pano1.luminanceMap.cubeRenderTarget&&(ry.pano1.luminanceMap.cubeRenderTarget=this.luminanceCubeRenderTargetPool.pop()),this.models.setMaterial(ry)),_g.offset&&this.camera.position.copy(_g.offset),Or$1(this.currentPano,Rm)&&this.updatePanoMeshesVisible();var xy=this.camera.pose.longitude,Ry=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.computePose();var Ly=this.works.getResolvedObserver(this.currentPano);if(this.camera.pose.distance>.1||iy)for(var ky=0,Ey=Object.keys(this.panoMeshes);ky<Ey.length;ky++){var Iy=Ey[ky],zy=this.panoMeshes[Iy];zy.setOpacity(0),zy.updateTime&&zy.updateTime(yn,Rn),zy.visible=!1}else if(Ly)for(var Uy=Ly.visibleIds.concat(_e$3(this.currentPano)),Qy=0,Gy=Uy;Qy<Gy.length;Qy++){var Iy=Gy[Qy],Zy=Qt$2(Iy),Ty=this.works.getResolvedObserver(Zy);if(Ty){var zy=this.panoMeshes[Iy];if(!Ty.loadable&&!Ty.active){zy.setOpacity(0);continue}var Vy=zy.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Vy<.05?zy.setOpacity(0):zy.setOpacity(pe$4(1.5/Vy,0,1)),Or$1(this.currentPano,Zy)&&zy.setOpacity(0),zy.lookAt(this.camera.position)}}if(this.locationMotion.ended)for(var Yy=this.intersect(yn),Jy=0,Hy=this.works.resolvedObservers;Jy<Hy.length;Jy++){var Ty=Hy[Jy],zy=this.panoMeshes[Ty.panoId];zy&&(zy.setCurrent(zy===Yy),zy.updateTime&&zy.updateTime(yn,Rn))}(xy!==this.camera.pose.longitude||Ry!==this.camera.pose.latitude)&&(this.cameraMotion.set(Xt$2(this.camera.pose,["longitude","latitude"]),0).catch(q$q),this.emit("camera.update",X$c("camera.update",{userAction:!0,state:O$n(O$n(O$n({},this.currentPano),{mode:this.mode}),$e(this.camera.pose))})));var i1=this.tileLevel=function(){if(Bn.tileLevelForFov===!1)return 0;var h1=Bn.renderer.getDrawingBufferSize(new Vector2);h1.width*=Bn.scissor.width,h1.height*=Bn.scissor.height;var l1=ny.panoId,o1=Bn.works.getResolvedObserver(l1),t1=Bn.imageOptions.size;if(typeof t1=="undefined"&&o1){var Wy=o1.images.up.match(/\/cube_(\d+)\//);Wy&&(t1=Number(Wy[1]))}typeof t1=="undefined"&&(t1=2048);var f1=0;t1>=1024&&(f1=1),t1>=2048&&(f1=2),t1>=4096&&(f1=3),t1>=8192&&(f1=4);var m1=Bn.tileLevelForFov(Bn.camera.fov,h1);return m1>f1?m1:0}(),u1=function(){var h1=Bn.camera.quaternion.clone(),l1=Bn.works.getResolvedObserver(ny.panoId),o1=l1!=null?l1:Ly;o1&&h1.premultiply(o1.quaternion.clone().inverse());var t1=new Matrix4().makeRotationFromQuaternion(h1),Wy=new Matrix4().getInverse(t1),f1=new Frustum().setFromProjectionMatrix(new Matrix4().multiplyMatrices(Bn.camera.projectionMatrix,Wy));return f1}();ny.panoId===_e$3(this.currentPano)&&(((Xl=ny.panoPicture)===null||Xl===void 0?void 0:Xl.map)instanceof Ge$3&&(ny.panoPicture.map.maxRequest=this.tileMaxRequest,ny.panoPicture.map.update(u1,i1),ny.panoPicture.map.needsRender===!0&&(ny.panoPicture.map.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0)),((Yl=ny.panoPicture)===null||Yl===void 0?void 0:Yl.luminanceMap)instanceof Ge$3&&(ny.panoPicture.luminanceMap.maxRequest=this.tileMaxRequest,ny.panoPicture.luminanceMap.update(u1,i1),ny.panoPicture.luminanceMap.needsRender===!0&&(ny.panoPicture.luminanceMap.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0)));{var p1=this.tiling.object.visible;if(this.initAnimationed){var g1=ny.panoId,v1=this.works.getResolvedObserver(g1);v1?Oi(this.camera.position,v1.position)&&this.locationMotion.ended?(this.tiling.object.visible=!0,this.tiling.panoId!==g1&&this.tiling.cleanup(),this.tiling.panoId=g1,this.tiling.setResource((ey=(Zl=v1.images)===null||Zl===void 0?void 0:Zl.tiles)!==null&&ey!==void 0?ey:[],this.enableIOSEDR&&v1.images.luminance?v1.images.luminance:null),this.tiling.setFetcher(gt$4(v1.work)),this.tiling.setRotation(v1.quaternion),this.tiling.setPosition(v1.position),this.tiling.maxRequest=this.tileMaxRequest,i1>this.tiledCubeTextureLevel?this.tiling.update(u1,i1,yn):this.tiling.update(u1,0,yn)):this.tiling.object.visible=!1:this.tiling.object.visible=!1}else this.tiling.object.visible=!1;p1!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0,this.modelSceneNeedsRender=!0)}this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(yn)}},vn.prototype.render=function(){this.cardboard.render(this.modelScene,this.camera),this.renderer.autoClear=!1,this.cardboard.render(this.scene,this.camera),this.renderer.autoClear=!0},vn.prototype.setCamera=function(yn){},vn.prototype.destroyHelper=function(){},vn.prototype.setHelperElementSize=function(){if(this.helperElement){var yn=new Vector2(this.element.offsetWidth,this.element.offsetHeight),Rn=yn.x*this.scissor.left,Bn=yn.y*(1-this.scissor.bottom-this.scissor.height),Co=yn.x*this.scissor.width,Po=yn.y*this.scissor.height;this.helperElement.style.marginLeft=Rn+"px",this.helperElement.style.marginTop=Bn+"px",this.helperElement.style.width=Co+"px",this.helperElement.style.height=Po+"px"}},vn.prototype.intersect=function(yn){var Rn,Bn;if(this.locationMotion.ended===!1){this.intersectMesh.visible=!1,delete this.activePanoMesh,delete this.activeTime;return}if(this.activePanoMesh&&this.activeTime&&yn-this.activeTime>SA){for(var Co=this.activePanoMesh,Po=Object.keys(this.panoMeshes),To=null,Io=0,$l=Po;Io<$l.length;Io++){var Wl=$l[Io];if(this.panoMeshes[Wl]===Co){To=Wl;break}}return To!==null&&this.moveToPano(Qt$2(To),{},!0),delete this.activePanoMesh,delete this.activeTime,Co}var Xl=this.camera.getDirection(new Vector3),Yl=new Raycaster(this.camera.position,Xl);Yl.params.Points={threshold:.1};for(var Zl=void 0,ey=[],Rm=this.works.getResolvedObserver(this.currentPano),ry=Rm?Rm.visibleIds:[],_g=0,ty=ry;_g<ty.length;_g++){var To=ty[_g],ny=this.panoMeshes[To],iy=Yl.intersectObject((Rn=ny.hitTestMesh)!==null&&Rn!==void 0?Rn:ny,!0)[0];iy&&ey.push({panoMesh:ny,intersection:O$n({floor:(Bn=Rm==null?void 0:Rm.floorIndex)!==null&&Bn!==void 0?Bn:0},iy)})}var oy=ey.sort(function(ly,sy){return ly.intersection.distance-sy.intersection.distance})[0];oy?(Zl=oy.intersection,this.activePanoMesh!==oy.panoMesh&&(this.activePanoMesh=oy.panoMesh,this.activeTime=yn),this.intersectMesh.position.copy(oy.panoMesh.position),this.intersectMesh.lookAt(this.camera.position)):(this.activePanoMesh=void 0,this.activeTime=void 0),Zl||(Zl=this.models.intersectRaycaster(Yl)[0]);var ay=X$c("intersect.update",{raycaster:Yl,intersection:Zl!=null?Zl:null,object:this.intersectMesh});if(this.emit("intersect.update",ay),ay.defaultPrevented){this.hideIntersectMesh();return}if(Zl&&Zl.face){var uy=Zl.face.normal,hy=new Quaternion;hy.setFromUnitVectors(new Vector3(0,0,1),uy),this.intersectMesh.quaternion.copy(hy);var my=Zl.point.clone();this.intersectMesh.position.copy(my),oy?this.intersectMesh.visible=!1:this.intersectMesh.visible=!0}else this.intersectMesh.visible=!1;return oy==null?void 0:oy.panoMesh},vn.prototype.onPanGesture=function(){},vn.prototype.onTapGesture=function(){},vn.prototype.onPinchGesture=function(){},vn.prototype.onMouseMove=function(){},vn.prototype.onMouseOut=function(){},vn}(bo),CA$1=new Vector3(0,1.6,0);O$n({},gr$1);var TA=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn,Co=vn.parseArgs(yn);return Rn=cr.call(this,Co)||this,Rn.mode="Model",Rn.locationMotion=new Ce$2({x:Rn.camera.pose.offset.x,y:Rn.camera.pose.offset.y,z:Rn.camera.pose.offset.z,distance:Rn.camera.pose.distance}),Rn.modelAlphaMotion=new Ce$2({modelAlpha:(Bn=Rn.models.getMaterial().modelAlpha)!==null&&Bn!==void 0?Bn:0}),Rn.perspToOrthoMotion=new Ce$2({perspToOrtho:Rn.camera.perspToOrtho.x}),Rn}return vn.parseArgs=function(yn){return yn instanceof vn?yn:cr.parseArgs.call(this,yn)},vn.initAnimationEndState=function(yn){var Rn,Bn,Co,Po,To,Io,$l=this.parseArgs(yn),Wl=$l.works,Xl=yn.initial,Yl=Xl.state,Zl=Xl.currentState,ey=typeof Yl.panoIndex=="number"?{workCode:(Co=(Rn=Yl.workCode)!==null&&Rn!==void 0?Rn:(Bn=$l.works[0])===null||Bn===void 0?void 0:Bn.workCode)!==null&&Co!==void 0?Co:"",panoIndex:Yl.panoIndex}:{workCode:Zl.workCode,panoIndex:Zl.panoIndex},Rm=Wl.getResolvedObserver(ey),ry=(Po=Yl.longitude)!==null&&Po!==void 0?Po:Zl.longitude,_g=pe$4((To=Yl.latitude)!==null&&To!==void 0?To:!Rm||wi(Zl.mode)?Zl.latitude:$l.defaultLatitude,$l.minLatitude,$l.maxLatitude),ty=pe$4((Io=Yl.fov)!==null&&Io!==void 0?Io:!Rm||wi(Zl.mode)?Zl.fov:$l.defaultFov,$l.minFov,$l.maxFov),ny=new Vector3;if($l.initial.state.offset)ny.copy($l.initial.state.offset);else if(Rm)ny.copy(Rm.position);else{var iy=Ut$1(Zl).setLength(Zl.distance);ny.copy($l.initial.currentState.offset).sub(iy)}return{workCode:ey.workCode,panoIndex:ey.panoIndex,mode:"Model",longitude:ry,latitude:_g,fov:ty,offset:ny,distance:0}},vn.prototype.updateConfiguration=function(yn){return cr.prototype.updateConfiguration.call(this,yn)},vn.prototype.destroy=function(){cr.prototype.destroy.call(this),this.locationMotion.dispose()},vn.prototype.isReady=function(){return this.locationMotion.ended===!1?!1:cr.prototype.isReady.call(this)},vn.prototype.updateWork=function(yn,Rn,Bn,Co){this.works=yn;var Po=vn.initAnimationEndState(O$n(O$n({},this),{initial:{currentState:O$n(O$n({},this.currentPano),this.camera.pose),duration:Bn.duration,effect:Bn.effect,state:Rn,userAction:Co}}));return this.hideIntersectMesh(),this.moveToPosition(Po.offset,{duration:0,longitude:Po.longitude,latitude:Po.latitude,fov:Po.fov},Co),!0},vn.prototype.updateCamera=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();var Po={},To={};return Po.distance=0,yn.offset!==void 0&&(Po.x=yn.offset.x,Po.y=yn.offset.y,Po.z=yn.offset.z),yn.longitude!==void 0&&(To.longitude=yn.longitude),yn.latitude!==void 0&&(To.latitude=yn.latitude),yn.fov!==void 0&&(To.fov=yn.fov),Co.locationMotion.set(Po,Rn).catch(q$q),Co.cameraMotion.set(To,Rn).catch(q$q)})},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();for(var Po=[],To=[],Io=0,$l=yn;Io<$l.length;Io++){var Wl=$l[Io];Po.push({key:Wl.key,progress:Wl.progress,value:{distance:0,x:Wl.value.offset.x,y:Wl.value.offset.x,z:Wl.value.offset.x}}),To.push({key:Wl.key,progress:Wl.progress,value:{longitude:Wl.value.longitude,latitude:Wl.value.latitude,fov:Wl.value.fov}})}return Co.locationMotion.setKeyframes(Po,Rn).catch(q$q),Co.cameraMotion.setKeyframes(yn,Rn)})},vn.prototype.updateTime=function(yn,Rn){if(!this.destroyed){var Bn={},Co={};if(this.modelAlphaMotion.ended||(this.modelAlphaMotion.update(yn),Bn.modelAlpha=this.modelAlphaMotion.value.modelAlpha),this.perspToOrthoMotion.ended||(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),!this.locationMotion.ended){this.locationMotion.update(yn),Co.distance=this.locationMotion.value.distance,Co.offset=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Po=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),To=this.works.resolvedObservers,Io=zr$1(To,function($l){return $l.position.distanceTo(Po)});this.currentPano=Io?{workCode:Io.work.workCode,panoIndex:Io.panoIndex}:{workCode:"",panoIndex:0}}this.cameraMotion.ended||(this.cameraMotion.update(yn),Co.longitude=this.cameraMotion.value.longitude,Co.latitude=this.cameraMotion.value.latitude,Co.fov=this.cameraMotion.value.fov),lr$1(Bn)||this.models.setMaterial(Bn),lr$1(Co)||this.setCamera(Co)}},vn.prototype.initAnimation=function(){var yn=this;return this.destroyed?Promise.resolve():new Promise(function(Rn){var Bn=yn.initial;Bn.state,Bn.currentState;var Co=Bn.duration,Po=Bn.userAction;yn.userAction=Po;var To=vn.initAnimationEndState(yn),Io={modelAlpha:1},$l={perspToOrtho:0},Wl={longitude:To.longitude,latitude:To.latitude,fov:To.fov,duration:Co,moveStartCallback:function(Xl){yn.perspToOrthoMotion.set($l,Co).catch(q$q),yn.modelAlphaMotion.set(Io,Co).catch(q$q),yn.emit("initAnimation.start",X$c("initAnimation.start",{state:Xl,userAction:yn.userAction}))},moveEndCallback:function(Xl){yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Xl,userAction:yn.userAction})),Rn()},moveCancelCallback:function(){var Xl=yn.currentPano,Yl=O$n(O$n({},Xl),{mode:yn.mode,longitude:yn.camera.pose.longitude,latitude:yn.camera.pose.latitude,fov:yn.camera.pose.fov,offset:yn.camera.pose.offset.clone(),distance:yn.camera.pose.distance});yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Yl,userAction:yn.userAction})),Rn()}};yn.moveToPosition(To.offset,Wl,Po)})},vn.prototype.getTargetState=function(){var yn=this.cameraMotion.getKeyFrameSegment(Ae$3())[1],Rn=this.locationMotion.getKeyFrameSegment(Ae$3())[1];return O$n(O$n({},this.currentPano),{mode:this.mode,longitude:yn.value.longitude,latitude:yn.value.latitude,fov:yn.value.fov,offset:new Vector3(Rn.value.x,Rn.value.y,Rn.value.z),distance:Rn.value.distance})},vn.prototype.moveToPano=function(yn,Rn,Bn){Rn===void 0&&(Rn={});var Co=this.works.getResolvedObserver(yn);Co&&this.moveToPosition(Co.position,Rn,Bn)},vn.prototype.moveToPosition=function(yn,Rn,Bn){var Co=this,Po,To,Io;Rn===void 0&&(Rn={}),this.userAction=Bn,this.stopMomentumMovement();for(var $l=Ae$3(),Wl=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Xl=Wl.distanceTo(yn),Yl=this.locationMotion.getProgressVelocity($l),Zl=0,ey=1;ey<this.locationMotion.keyframes.length;ey++){var Rm=this.locationMotion.keyframes[ey-1].value,ry=Rm.x,_g=Rm.y,ty=Rm.z,ny=this.locationMotion.keyframes[ey].value,iy=ny.x,oy=ny.y,ay=ny.z;Zl+=Math.sqrt(Math.pow(iy-ry,2)+Math.pow(oy-_g,2)+Math.pow(ay-ty,2))}var uy=Xl===0?0:Yl*Zl/Xl,hy=this.calculateMovingDuration(Rn.duration,Xl),my={x:yn.x,y:yn.y,z:yn.z,distance:0},ly={longitude:Rn.longitude,latitude:Rn.latitude,fov:Rn.fov},sy=this.works.resolvedObservers,cy=zr$1(sy,function(Ay){return Ay.position.distanceTo(Wl)}),fy=cy?{workCode:cy.work.workCode,panoIndex:cy.panoIndex}:{workCode:"",panoIndex:0},vy=O$n(O$n({},fy),{mode:this.mode,longitude:(Po=ly.longitude)!==null&&Po!==void 0?Po:this.camera.pose.longitude,latitude:(To=ly.latitude)!==null&&To!==void 0?To:this.camera.pose.latitude,fov:(Io=ly.fov)!==null&&Io!==void 0?Io:this.camera.pose.fov,offset:yn.clone(),distance:0}),dy=this.currentPano;this.emit("pano.moveTo",X$c("pano.moveTo",{options:Rn,prevPano:dy,progress:0,state:vy,userAction:this.userAction,error:null})),Rn.moveStartCallback&&Rn.moveStartCallback(vy),this.cameraMotion.set(ly,hy).catch(q$q),this.locationMotion.set(my,hy,uy).then(function(){for(var Ay=0,gy=Co.models;Ay<gy.length;Ay++){var wy=gy[Ay];wy.show()}var Cy=O$n(O$n(O$n({},fy),{mode:Co.mode}),$e(Co.camera.pose));Co.emit("pano.arrived",X$c("pano.arrived",{options:Rn,prevPano:dy,progress:0,state:Cy,userAction:Co.userAction,error:null})),Rn.moveEndCallback&&Rn.moveEndCallback(Cy)},function(){Rn.moveCancelCallback&&Rn.moveCancelCallback(),Co.emit("pano.cancel",X$c("pano.cancel",{options:Rn,prevPano:dy,progress:0,state:vy,userAction:Co.userAction,error:null}))})},vn.prototype.onTapGesture=function(yn){var Rn=yn.center.raycaster;this.stopMomentumMovement();var Bn=this.models.intersectRaycaster(Rn)[0];if(Bn&&Bn.face){var Co=Bn.face.normal,Po=Bn.point;if(new Vector3(0,1,0).angleTo(Co)>Math.PI/3){var To=Co.clone().setLength(.3).add(Po);Rn.set(To,new Vector3(0,-1,0)),Bn=this.models.intersectRaycaster(Rn)[0]}}if(Bn){var Io=new Vector3().copy(Bn.point).add(CA$1),$l=this.works.resolvedObservers,Wl=zr$1($l,function(Zl){return Zl.position.distanceTo(Io)},!0),Xl=Wl[0],Yl=Wl[1];Xl&&Yl<5&&(Io.y=Xl.position.y),yn.state.offset.copy(Io),yn.state.distance=0,this.emit("gesture.tap",yn),yn.defaultPrevented||this.moveToPosition(Io,{},!0)}else this.emit("gesture.tap",yn),yn.defaultPrevented||this.cameraBounce()},vn}(Ll);const PA=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}(`}rpvv|{-zrqvz}-sy|nH}rpvv|{-zrqvz}-v{Hnvor-rp@-}|vv|{Hnvor-rp?-H{vs|z-znA-}|wrpv|{Znv\x07H{vs|z-znA-z|qrycvrZnv\x07Hn\bv{t-rp?-bH|vq-znv{56-
b-J-HrpA-z]|vv|{-J-z|qrycvrZnv\x07-7-rpA5}|vv|{9>;=6Htyl]|vv|{-J-}|wrpv|{Znv\x07-7-z]|vv|{H\f`),RA=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}(`0r\x07r{v|{-TYlRealsntlqr}u-G-r{noyr<<<<-nqn}rq-s|z-ur-RQY-unqr-p|qr-s|z-Puvvn{-O|pur{\b-v{-py|q-p|z}nrG<<-u}G<<tvuo;p|z<py|qp|z}nr<{x<rr<znr<}ytv{<\0RQY<unqr<RQY<<}rpvv|{-zrqvz}-sy|nH}rpvv|{-zrqvz}-v{H{vs|z-sy|n-prr{dvquH{vs|z-sy|n-prr{UrvtuH{vs|z-rp?-{rvtuo|h[RVTUO\\b_lP\\b[ajH{vs|z-sy|n-rqy\`r{tuH{vs|z-sy|n-nqvH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-[rnH{vs|z-sy|n-SnH{vs|z-znA-]|wH{vs|z-nz}yr?Q-RQYP|y|Hn\bv{t-rp?-bHsy|n-r}|{r5sy|n-qr}u6
--rp?-_nqv-J-nqv-<-rp?5prr{dvqu9-prr{Urvtu6H--sy|n-z-J-=;=H--s|5v{-v-J-=H-v-I-[RVTUO\\b_lP\\b[aH-v886
----rp?-[rvtuo|-J-b-8-_nqv-7-{rvtuo|hvjH----sy|n-{rvtuo|Qr}u-J-r\x07r?Q5RQYP|y|9-[rvtuo|6;nH----{rvtuo|Qr}u-J-5{rvtuo|Qr}u-JJ->;=6-L-=;=-G-{rvtuo|Qr}uH----vs5{rvtuo|Qr}u-.J-=;=6
------vs5qr}u-JJ-=;=6
--------z-8J->==;=H------\fryr
--------z-8J-zn\x075=;=9-qr}u-:-{rvtuo|Qr}u6H------\f----\f--\f--r{-z-<-sy|n5[RVTUO\\b_lP\\b[a6H\f|vq-znv{56
--rpA-pRQY-J-r\x07r?Q5RQYP|y|9-b6H--sy|n-qr}u-J-pRQY;nH--qr}u-J-5qr}u-JJ->;=6-L-=;=-G-qr}uH--sy|n-r-J-r}|{r5qr}u6H--sy|n-unqr-J-r\x07}5:r-7-@==;=-7-rqy\`r{tu6H--tylSntP|y|-J-rpA5pRQY;to-7-unqr9-|}npv\b6H--
-<<-vr-rtyn-u\b}ro|yvp-qr}u-nyr-|-qr}u-ossr----sy|n-qy-J-}|5?;=9-qr}u6H----rpA-q}-J-]|w-7-rpA5=;=9-=;=9-:qy9->;=6H----sy|n-}	-J-q};	-<-q};H----sy|n-sntQr}u-J-5}	-8->;=6-<-?;=H----<<-tylSntQr}uRea-J-sntQr}uH--\f--vs5qr}u-JJ-=;=6
----qvpnqH--\f\f`);var BA$1=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this)||this;return Rn.uniforms={screenWidth:nr$1("f",0),screenHeight:nr$1("f",0),edlStrength:nr$1("f",1),uNear:nr$1("f",1),uFar:nr$1("f",1),radius:nr$1("f",1),neighbours:nr$1("2fv",new Float32Array),depthMap:nr$1("t",new Texture),uEDLColor:nr$1("t",new Texture),uEDLDepth:nr$1("t",new Texture),opacity:nr$1("f",1),uProj:nr$1("Matrix4fv",new Float32Array)},Rn.neighbourCount=8,Rn.updateShaderSource(),Rn.transparent=!0,Rn}return vn.prototype.getUniform=function(yn){return this.uniforms===void 0?void 0:this.uniforms[yn].value},vn.prototype.setUniform=function(yn,Rn){if(this.uniforms!==void 0){var Bn=this.uniforms[yn];Bn.value=Rn}},vn.prototype.getDefines=function(){var yn="";return yn+="#define NEIGHBOUR_COUNT "+this.neighbourCount+`
`,yn},vn.prototype.updateShaderSource=function(){var yn=this.getDefines()+PA,Rn=this.getDefines()+RA;this.setValues({vertexShader:yn,fragmentShader:Rn}),this.needsUpdate=!0},Jt$2([mr$1("screenWidth"),Kt$1("design:type",Number)],vn.prototype,"screenWidth",void 0),Jt$2([mr$1("screenHeight"),Kt$1("design:type",Number)],vn.prototype,"screenHeight",void 0),Jt$2([mr$1("edlStrength"),Kt$1("design:type",Number)],vn.prototype,"edlStrength",void 0),Jt$2([mr$1("uNear"),Kt$1("design:type",Number)],vn.prototype,"uNear",void 0),Jt$2([mr$1("uFar"),Kt$1("design:type",Number)],vn.prototype,"uFar",void 0),Jt$2([mr$1("radius"),Kt$1("design:type",Number)],vn.prototype,"radius",void 0),Jt$2([mr$1("neighbours",!0),Kt$1("design:type",Float32Array)],vn.prototype,"neighbours",void 0),Jt$2([mr$1("depthMap"),Kt$1("design:type",Texture)],vn.prototype,"depthMap",void 0),Jt$2([mr$1("uEDLColor"),Kt$1("design:type",Texture)],vn.prototype,"uEDLColor",void 0),Jt$2([mr$1("uEDLDepth"),Kt$1("design:type",Texture)],vn.prototype,"uEDLDepth",void 0),Jt$2([mr$1("uProj"),Kt$1("design:type",Array)],vn.prototype,"uProj",void 0),vn}(RawShaderMaterial);function nr$1(cr,vn){return{type:cr,value:vn}}function mr$1(cr,vn){return vn===void 0&&(vn=!1),function(yn,Rn){Object.defineProperty(yn,Rn,{get:function(){return this.getUniform(cr)},set:function(Bn){Bn!==this.getUniform(cr)&&(this.setUniform(cr,Bn),vn&&this.updateShaderSource())}})}}var FA=new OrthographicCamera(-1,1,1,-1,0,1),xo=new BufferGeometry;xo.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));xo.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));var Nl=new Mesh(xo),ql=new Scene;ql.add(Nl);var LA=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn,Co){var Po=cr.call(this,yn,Rn,Bn,Co)||this;return Po.sharedV2=new Vector2,Po.renderer=yn,Po.material=new BA$1,Nl.material=Po.material,Po.material.needsUpdate=!0,Po}return vn.prototype.render=function(yn){this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0,this.renderer.setRenderTarget(yn[0]),this.renderer.render(this.scene,this.camera);var Rn=this.camera,Bn=this.material.uniforms,Co=this.renderer.getSize(this.sharedV2);Bn.screenWidth.value=Co.x,Bn.screenHeight.value=Co.y;var Po=Rn.projectionMatrix,To=new Float32Array(16);To.set(Po.elements);for(var Io=new Float32Array(this.material.neighbourCount*2),$l=0;$l<this.material.neighbourCount;$l++)Io[2*$l+0]=Math.cos(2*$l*Math.PI/this.material.neighbourCount),Io[2*$l+1]=Math.sin(2*$l*Math.PI/this.material.neighbourCount);Bn.neighbours.value=Io,Bn.uNear.value=Rn.near,Bn.uFar.value=Rn.far,Bn.uEDLColor.value=yn[0].texture,Bn.uProj.value=To,Bn.edlStrength.value=.5,Bn.radius.value=1,Bn.opacity.value=1,this.renderer.setRenderTarget(yn[1]),this.renderer.render(ql,FA)},vn.prototype.dispose=function(){this.copyPass.dispose()},vn}(go);const kA$1=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}(`}rpvv|{-zrqvz}-sy|nH}rpvv|{-zrqvz}-v{H{vs|z-nz}yr?Q-drvtuZn}H{vs|z-nz}yr?Q-Qr}uZn}Hn\bv{t-rp?-bH|vq-znv{56-
sy|n-qr}u-J-r\x07r?Q5Qr}uZn}9-b6;Hvs5qr}u-KJ->;=6
qvpnqH\frpA-p|y|-J-r\x07r?Q5drvtuZn}9-b6H-p|y|-J-p|y|-<-p|y|;HtylSntP|y|-J-rpA5p|y|;\x07\b	9->;=6H-\f`),OA=function(){for(var cr=[],vn=0;vn<arguments.length;vn++)cr[vn]=arguments[vn];var yn=113,Rn=126,Bn=0,Co="";return cr[Bn].split(Co).map(function(Po){return Po.charCodeAt(Bn)>Rn?Po:String.fromCharCode((Po.charCodeAt(Bn)+yn)%Rn)}).join(Co)}(`}rpvv|{-zrqvz}-sy|nH}rpvv|{-zrqvz}-v{Hnvor-rp@-}|vv|{Hnvor-rp?-H{vs|z-znA-}|wrpv|{Znv\x07H{vs|z-znA-z|qrycvrZnv\x07Hn\bv{t-rp?-bH|vq-znv{56-
b-J-Htyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-rpA5}|vv|{9>;=6H\f`);var zA=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,{vertexShader:OA,fragmentShader:kA$1})||this;return Rn.uniforms={uDepthMap:Zs("t",null),uWeightMap:Zs("t",null)},Rn.depthTest=!0,Rn.depthWrite=!0,Rn.opacity=1,Rn}return vn.prototype.getUniform=function(yn){return this.uniforms===void 0?void 0:this.uniforms[yn].value},vn.prototype.setUniform=function(yn,Rn){if(this.uniforms!==void 0){var Bn=this.uniforms[yn];Bn.value=Rn}},Jt$2([Ys("uDepthMap"),Kt$1("design:type",Number)],vn.prototype,"uDepthMap",void 0),Jt$2([Ys("uWeightMap"),Kt$1("design:type",Number)],vn.prototype,"uWeightMap",void 0),vn}(RawShaderMaterial);function Zs(cr,vn){return{type:cr,value:vn}}function Ys(cr,vn){return vn===void 0&&(vn=!1),function(yn,Rn){Object.defineProperty(yn,Rn,{get:function(){return this.getUniform(cr)},set:function(Bn){Bn!==this.getUniform(cr)&&(this.setUniform(cr,Bn),vn&&this.updateShaderSource())}})}}var VA=new OrthographicCamera(-1,1,1,-1,0,1),wo=new BufferGeometry;wo.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));wo.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));var Ul=new Mesh(wo),Ql=new Scene;Ql.add(Ul);var DA$1=function(cr){fe$6(vn,cr);function vn(yn,Rn,Bn,Co){var Po=cr.call(this,yn,Rn,Bn,Co)||this;return Po.sharedV2=new Vector2,Po.renderer=yn,Po.material=new zA,Po.camera=Bn,Ul.material=Po.material,Po}return vn.prototype.render=function(yn){this.models.setMaterial({useHQDepth:!0,useHQWeight:!1}),this.models.update(this.renderer,this.camera,"Mapview"),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0,this.renderer.setRenderTarget(yn[0]),this.renderer.render(this.scene,this.camera),this.models.setMaterial({useHQWeight:!0,useHQDepth:!1}),this.models.update(this.renderer,this.camera,"Mapview"),this.renderer.autoClearDepth=!1,this.renderer.autoClearColor=!0,this.renderer.setClearColor(new Color(0,0,0)),this.renderer.setClearAlpha(0),this.renderer.setRenderTarget(yn[1]),this.renderer.render(this.scene,this.camera),this.material.uniforms.uWeightMap.value=yn[1].texture,this.material.uniforms.uDepthMap.value=yn[0].depthTexture,this.renderer.autoClearDepth=!0,this.renderer.autoClearColor=!0,this.renderer.setClearColor(new Color(0,0,0)),this.renderer.setClearAlpha(1),this.renderer.setRenderTarget(yn[2]),this.renderer.render(Ql,VA)},vn.prototype.dispose=function(){this.copyPass.dispose()},vn}(go),A0=.5,$s=Math.PI/7,Br={defaultLongitude:Math.PI/4,defaultLatitude:Math.PI/4,defaultDistance:150,maxLatitude:+Math.PI/2,minLatitude:0,cameraType:"auto",cameraFence:null,intersectMeshCreator:function(){return new ho}},NA=function(cr){fe$6(vn,cr);function vn(yn){var Rn=this,Bn,Co=vn.parseArgs(yn);return Rn=cr.call(this,Co)||this,Rn.mode="Mapview",Rn.defaultLongitude=Co.defaultLongitude,Rn.defaultLatitude=Co.defaultLatitude,Rn.defaultDistance=Co.defaultDistance,Rn.maxLatitude=Co.maxLatitude,Rn.minLatitude=Co.minLatitude,Rn.cameraType=Co.cameraType,Rn.cameraFence=Co.cameraFence,Rn.locationMotion=new Ce$2({x:Rn.camera.pose.offset.x,y:Rn.camera.pose.offset.y,z:Rn.camera.pose.offset.z,distance:Rn.camera.pose.distance}),Rn.modelAlphaMotion=new Ce$2({modelAlpha:(Bn=Rn.models.getMaterial().modelAlpha)!==null&&Bn!==void 0?Bn:0}),Rn.perspToOrthoMotion=new Ce$2({perspToOrtho:Rn.camera.perspToOrtho.x}),Rn.intersectMeshCreator=Co.intersectMeshCreator,Rn.intersectMesh=Rn.intersectMeshCreator(),Rn.intersectMesh.name="intersect",Rn.intersectMesh.visible=!1,Rn.currentTapId=null,Rn.helper.add(Rn.intersectMesh),Rn.edlTarget=new WebGLRenderTarget(1024,1024,{generateMipmaps:!1,minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat,type:FloatType,depthTexture:new DepthTexture(1024,1024,UnsignedIntType)}),Rn.edlEffect=new LA(Rn.renderer,Rn.modelScene,Rn.camera,Rn.models),Rn.hqEffect=new DA$1(Rn.renderer,Rn.modelScene,Rn.camera,Rn.models),Rn}return vn.parseArgs=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl;if(yn instanceof vn)return yn;var Xl=cr.parseArgs.call(this,yn);return O$n(O$n({},Xl),{defaultLongitude:(Rn=yn.defaultLongitude)!==null&&Rn!==void 0?Rn:Br.defaultLongitude,defaultLatitude:(Bn=yn.defaultLatitude)!==null&&Bn!==void 0?Bn:Br.defaultLatitude,defaultDistance:(Co=yn.defaultDistance)!==null&&Co!==void 0?Co:Br.defaultDistance,maxLatitude:(Po=yn.maxLatitude)!==null&&Po!==void 0?Po:Br.maxLatitude,minLatitude:(To=yn.minLatitude)!==null&&To!==void 0?To:Br.minLatitude,cameraType:(Io=yn.cameraType)!==null&&Io!==void 0?Io:Br.cameraType,cameraFence:($l=yn.cameraFence)!==null&&$l!==void 0?$l:Br.cameraFence,intersectMeshCreator:(Wl=yn.intersectMeshCreator)!==null&&Wl!==void 0?Wl:Br.intersectMeshCreator})},vn.distanceFromModel=function(yn,Rn,Bn){var Co=yn.bounding,Po=Math.pow(Math.pow(Co.max.x-Co.min.x+1,2)+Math.pow(Co.max.y-Co.min.y+1,2)+Math.pow(Co.max.z-Co.min.z+1,2),1/2),To=Po/2/Math.tan(Math.PI*Rn/360);return Bn<1&&(To=To/Bn),isNaN(To)?Po:To},vn.initAnimationEndState=function(yn){var Rn,Bn,Co,Po,To,Io,$l,Wl=this.parseArgs(yn),Xl=Wl.works,Yl=Wl.models,Zl=yn.initial,ey=Zl.state,Rm=Zl.currentState,ry=typeof ey.panoIndex=="number"?{workCode:(Co=(Rn=ey.workCode)!==null&&Rn!==void 0?Rn:(Bn=Wl.works[0])===null||Bn===void 0?void 0:Bn.workCode)!==null&&Co!==void 0?Co:"",panoIndex:ey.panoIndex}:{workCode:Rm.workCode,panoIndex:Rm.panoIndex},_g=Xl.getResolvedObserver(ry),ty=(Po=ey.fov)!==null&&Po!==void 0?Po:60,ny=pe$4((To=ey.latitude)!==null&&To!==void 0?To:N0(Rm.mode)?Rm.latitude:Wl.defaultLatitude,Wl.minLatitude,Wl.maxLatitude),iy=vn.distanceFromModel(Wl.models,ty,Wl.camera.aspect),oy=new Vector3,ay=(Io=ey.distance)!==null&&Io!==void 0?Io:Math.min(Wl.defaultDistance,iy),uy=($l=ey.longitude)!==null&&$l!==void 0?$l:N0(Rm.mode)?Rm.longitude:Wl.defaultLongitude;return ey.offset?oy.copy(ey.offset):Wl.defaultDistance<iy&&_g?(oy.copy(_g.position),ey.longitude===void 0&&(uy=Rm.longitude)):(Yl.bounding.getCenter(oy),ay=iy),O$n(O$n({},ry),{mode:"Mapview",longitude:uy,latitude:ny,fov:ty,offset:oy,distance:ay})},vn.prototype.updateConfiguration=function(yn){var Rn=cr.prototype.updateConfiguration.call(this,yn);if(Rn===!1)return!1;var Bn=O$n(O$n({},Br),Ma(yn));if(this.defaultLongitude!==Bn.defaultLongitude&&(this.defaultLongitude=Bn.defaultLongitude),this.defaultLatitude!==Bn.defaultLatitude&&(this.defaultLatitude=Bn.defaultLatitude),this.defaultDistance!==Bn.defaultDistance&&(this.defaultDistance=Bn.defaultDistance),this.maxLatitude!==Bn.maxLatitude&&(this.maxLatitude=Bn.maxLatitude),this.minLatitude!==Bn.minLatitude&&(this.minLatitude=Bn.minLatitude),this.cameraType!==Bn.cameraType&&(this.cameraType=Bn.cameraType),this.cameraFence instanceof Box3&&Bn.cameraFence instanceof Box3?this.cameraFence.equals(Bn.cameraFence)||(this.cameraFence=Bn.cameraFence):this.cameraFence instanceof Sphere&&Bn.cameraFence instanceof Sphere?this.cameraFence.equals(Bn.cameraFence)||(this.cameraFence=Bn.cameraFence):this.cameraFence=Bn.cameraFence,this.intersectMeshCreator!==Bn.intersectMeshCreator){this.intersectMeshCreator=Bn.intersectMeshCreator;var Co=this.intersectMesh;this.intersectMesh=this.intersectMeshCreator(),this.intersectMesh.name=Co.name,this.intersectMesh.visible=Co.visible;var Po=this.intersectMesh.parent;Po&&Po.add(this.intersectMesh),Co.dispose()}return!0},vn.prototype.destroy=function(){cr.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.panState,this.intersectMesh.dispose(),this.helper.remove(this.intersectMesh)},vn.prototype.isReady=function(){return this.locationMotion.ended===!1?!1:cr.prototype.isReady.call(this)},vn.prototype.updateWork=function(yn,Rn,Bn,Co){this.userAction=Co,this.works=yn;var Po=vn.initAnimationEndState(O$n(O$n({},this),{initial:{currentState:O$n(O$n({},this.currentPano),this.camera.pose),duration:Bn.duration,effect:Bn.effect,state:Rn,userAction:Co}}));this.currentPano={workCode:Po.workCode,panoIndex:Po.panoIndex};var To={longitude:Po.longitude,latitude:Po.latitude,fov:Po.fov},Io={x:Po.offset.x,y:Po.offset.y,z:Po.offset.z,distance:Po.distance,orthoDistance:Po.distance};return this.locationMotion.set(Io,Bn.duration).catch(q$q),this.cameraMotion.set(To,Bn.duration).catch(q$q),!0},vn.prototype.updateModel=function(yn){cr.prototype.updateModel.call(this,yn);var Rn=yn.bounding.getCenter(new Vector3),Bn=vn.distanceFromModel(yn,this.cameraMotion.value.fov,this.camera.aspect);this.updateCamera({offset:Rn,distance:Bn},0,!0)},vn.prototype.updateCamera=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();var Po={},To={};return yn.distance!==void 0&&(Po.distance=yn.distance),yn.offset!==void 0&&(Po.x=yn.offset.x,Po.y=yn.offset.y,Po.z=yn.offset.z),yn.longitude!==void 0&&(To.longitude=yn.longitude),yn.latitude!==void 0&&(To.latitude=yn.latitude),yn.fov!==void 0&&(To.fov=yn.fov),Co.locationMotion.set(Po,Rn).catch(q$q),Co.cameraMotion.set(To,Rn).catch(q$q)})},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){var Co=this;return this.initAnimationReady.then(function(){Co.userAction=Bn,Co.stopMomentumMovement();for(var Po=[],To=[],Io=0,$l=yn;Io<$l.length;Io++){var Wl=$l[Io];Po.push({key:Wl.key,progress:Wl.progress,value:{distance:Wl.value.distance,x:Wl.value.offset.x,y:Wl.value.offset.x,z:Wl.value.offset.x}}),To.push({key:Wl.key,progress:Wl.progress,value:{longitude:Wl.value.longitude,latitude:Wl.value.latitude,fov:Wl.value.fov}})}return Co.locationMotion.setKeyframes(Po,Rn).catch(q$q),Co.cameraMotion.setKeyframes(yn,Rn)})},vn.prototype.updateTime=function(yn,Rn){if(!this.destroyed){var Bn={},Co={};this.locationMotion.ended||(this.locationMotion.update(yn),Co.distance=this.locationMotion.value.distance,Co.offset=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(yn),Co.longitude=this.cameraMotion.value.longitude,Co.latitude=this.cameraMotion.value.latitude,Co.fov=this.cameraMotion.value.fov),this.modelAlphaMotion.ended||(this.modelAlphaMotion.update(yn),Bn.modelAlpha=this.modelAlphaMotion.value.modelAlpha);var Po=0;if(this.cameraType==="auto"?Po=Math.abs(Math.PI/2-this.cameraMotion.value.latitude)<.02||Math.abs(-Math.PI/2-this.cameraMotion.value.latitude)<.02?1:0:this.cameraType==="perspective"?Po=0:this.cameraType==="orthographic"&&(Po=1),this.perspToOrthoMotion.getTargetKeyframe().value.perspToOrtho!==Po&&this.perspToOrthoMotion.set({perspToOrtho:Po},500).catch(q$q),this.perspToOrthoMotion.ended||(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),lr$1(Bn)||this.models.setMaterial(Bn),lr$1(Co)||this.setCamera(Co),this.cameraFence&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&!this.inMomentumMovement&&this.locationMotion.ended&&this.perspToOrthoMotion.ended&&this.cameraMotion.ended){var To=Ut$1(this.camera.pose,new Vector3),Io=new Vector3().copy(this.camera.pose.offset).sub(To.clone().multiplyScalar(this.camera.pose.distance));if(this.cameraFence.distanceToPoint(Io)>.01){var $l=this.cameraFence.clampPoint(Io,new Vector3),Wl=this.camera.pose.offset.clone().add($l).sub(Io),Xl=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:Wl,distance:this.camera.pose.distance});this.fixFinalState(Xl),this.locationMotion.set({x:Xl.offset.x,y:Xl.offset.y,z:Xl.offset.z,distance:Xl.distance},300).catch(q$q)}}if(this.intersectMesh&&this.intersectMesh.parent){var Yl=this.camera.position.distanceTo(this.intersectMesh.position),Zl=2*Math.tan(.5*this.camera.fov/180*Math.PI),ey=Yl*Zl/5;this.intersectMesh.scale.setScalar(ey)}}},vn.prototype.getTargetState=function(){var yn=this.cameraMotion.getKeyFrameSegment(Ae$3())[1],Rn=this.locationMotion.getKeyFrameSegment(Ae$3())[1];return O$n(O$n({},this.currentPano),{mode:this.mode,longitude:yn.value.longitude,latitude:yn.value.latitude,fov:yn.value.fov,distance:Rn.value.distance,offset:new Vector3(Rn.value.x,Rn.value.y,Rn.value.z)})},vn.prototype.initAnimation=function(){var yn=this;return this.destroyed?Promise.resolve():new Promise(function(Rn){var Bn=yn.initial;Bn.state,Bn.currentState;var Co=Bn.duration,Po=Bn.userAction;yn.userAction=Po;var To=vn.initAnimationEndState(yn),Io={longitude:To.longitude,latitude:To.latitude,fov:To.fov},$l={x:To.offset.x,y:To.offset.y,z:To.offset.z,distance:To.distance},Wl={modelAlpha:1},Xl={perspToOrtho:0};yn.emit("initAnimation.start",X$c("initAnimation.start",{state:To,userAction:yn.userAction})),yn.perspToOrthoMotion.set(Xl,Co).catch(q$q),yn.modelAlphaMotion.set(Wl,Co/3).catch(q$q),yn.cameraMotion.set(Io,Co).catch(q$q),yn.locationMotion.set($l,Co).then(function(){yn.emit("initAnimation.end",X$c("initAnimation.end",{state:To,userAction:yn.userAction}))},function(Yl){var Zl=O$n(O$n(O$n({},yn.currentPano),{mode:yn.mode}),$e(yn.camera.pose));yn.emit("initAnimation.end",X$c("initAnimation.end",{state:Zl,userAction:yn.userAction}))}).then(function(){Rn()})})},vn.prototype.getForwardObserverOrNot=function(yn){var Rn=this,Bn=this.models.intersectRaycaster(yn)[0];if(!Bn)return null;var Co=this.works.resolvedObservers.filter(function($l){for(var Wl,Xl=0,Yl=Rn.models;Xl<Yl.length;Xl++){var Zl=Yl[Xl];if(Zl.visible&&((Wl=Zl.work)===null||Wl===void 0?void 0:Wl.workCode)===$l.work.workCode)return!0}return!1}),Po=zr$1(Co,function($l){return $l.standingPosition.distanceTo(Bn.point)},!0),To=Po[0],Io=Po[1];return To&&Io<10?To:null},vn.prototype.coordinatesForOffset=function(yn){var Rn=this.renderer.getSize(new Vector2);return{longitude:-2*yn.x/(Rn.x*this.scissor.width),latitude:2*yn.y/(Rn.y*this.scissor.height)}},vn.prototype.requestMomentumMovement=function(yn,Rn,Bn,Co){var Po=this;if(this.inMomentumMovement!==null){for(var To=O$n({},Bn),Io={longitude:0,latitude:0,x:0,y:0,z:0},$l=0;$l<Co;$l++)To.longitude*=.996,To.latitude*=.996*.998,To.x*=.99,To.y*=.99,To.z*=.99,Io.longitude+=To.longitude,Io.latitude+=To.latitude,Io.x+=To.x,Io.y+=To.y,Io.z+=To.z;var Wl=gn(this.cameraMotion.value.longitude+Io.longitude),Xl=pe$4(this.cameraMotion.value.latitude+Io.latitude,this.minLatitude,this.maxLatitude),Yl=new Vector3(this.locationMotion.value.x+Io.x,this.locationMotion.value.y+Io.y,this.locationMotion.value.z+Io.z),Zl=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:Wl,latitude:Xl,offset:Yl,fov:this.cameraMotion.value.fov,distance:this.locationMotion.value.distance}),ey=yn.state.offset.clone().sub(Ut$1(yn.state).setLength(Zl.distance)),Rm=!(Math.abs(To.longitude)>1e-4||Math.abs(To.latitude)>1e-4||Math.abs(To.x)>1e-4||Math.abs(To.y)>1e-4||Math.abs(To.z)>1e-4),ry=this.cameraFence?this.cameraFence.containsPoint(ey):!0;ry===!1&&(Rm=!0);var _g=X$c("gesture.momentum",O$n(O$n({},yn),{isFirst:Rn,isFinal:Rm,state:Zl}));if(this.inMomentumMovement.event=_g,this.emit("gesture.momentum",_g),yn.defaultPrevented){this.inMomentumMovement=null;return}this.inMomentumMovement&&(this.cameraMotion.set({longitude:Wl,latitude:Xl},0).catch(q$q),this.locationMotion.set({x:Zl.offset.x,y:Zl.offset.y,z:Zl.offset.z,distance:Zl.distance},0).catch(q$q),Rm?this.inMomentumMovement=null:Ft$2.shared.add(function(ty,ny){Po.requestMomentumMovement(yn,!1,To,ny|0)},!0,1))}},vn.prototype.fixFinalState=function(yn){if(this.perspToOrthoMotion.getTargetKeyframe().value.perspToOrtho!==1){var Rn=Ut$1(yn,new Vector3),Bn=new Vector3().copy(yn.offset).sub(Rn.clone().multiplyScalar(yn.distance)),Co=new Raycaster(Bn,Rn);Co.params.Points={threshold:.1},Co.near=this.camera.near,Co.far=this.camera.far;var Po;if(Po=this.models.intersectRaycaster(Co).filter(function(Xl){var Yl,Zl=(Yl=Xl.face)===null||Yl===void 0?void 0:Yl.normal;return Zl&&Co.ray.direction.dot(Zl)>=0?!1:Xl.distance>A0+Co.near})[0],!Po){var To=new Plane(new Vector3(0,1,0),-this.models.bounding.min.y),Io=Co.ray.intersectPlane(To,new Vector3);if(Io){var $l=Io.distanceTo(Co.ray.origin);$l<1e3&&$l>=Co.near&&(Po={distance:$l,floor:0,point:Io,object:this.scene,face:null})}}if(!Po){var Wl=Math.max(yn.distance,3);Po={distance:Wl,floor:0,point:Co.ray.direction.clone().setLength(Wl).add(Co.ray.origin),object:this.scene,face:null}}Po&&(yn.distance=pe$4(Po.distance,0,1/0),yn.offset.copy(Bn).add(Rn.clone().multiplyScalar(yn.distance)))}},vn.prototype.onPanGesture=function(yn){this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh();var Rn=yn.pointers.length,Bn=this.panState,Co=0,Po=!1;yn.pointerType==="mouse"&&(Co=yn.srcEvent.buttons,Po=yn.srcEvent.shiftKey),Bn&&Co===0&&Bn.buttons!==0&&(Co=Bn.buttons);var To=Bn==null?void 0:Bn.target;if(!To){var Io=this.relativeClientPosition(yn.center),$l=new Raycaster;$l.params.Points={threshold:.1},$l.setFromCamera(Io,this.camera),$l.near=this.camera.near,To=new Vector3().copy($l.ray.direction).multiplyScalar(3).add($l.ray.origin);var Wl=this.models.intersectRaycaster($l)[0];if(!Wl&&$l.ray.direction.y<-.3){var Xl=new Plane(new Vector3(0,1,0),0),Yl=$l.ray.intersectPlane(Xl,new Vector3);if(Yl){var Zl=Yl.distanceTo($l.ray.origin);Zl<1e4&&Zl>=$l.near&&(Wl={distance:Zl,floor:0,point:Yl,object:this.scene})}}if(Wl)To.copy(Wl.point);else{var ey=new Vector3().copy(this.camera.pose.offset).sub(this.camera.position).normalize(),Xl=new Plane().setFromNormalAndCoplanarPoint(ey,this.camera.pose.offset);$l.ray.intersectPlane(Xl,To)}}if(yn.isFinal?delete this.panState:this.panState={target:To,buttons:Co,pointerLength:Rn,x:yn.center.x,y:yn.center.y},!(typeof Bn=="undefined"||Bn.pointerLength!==Rn)){var Rm=Rn>1||Co===2||Po;if(Rm){var ry={x:yn.center.x-Bn.x,y:yn.center.y-Bn.y},_g=new Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),ty=Ut$1(this.cameraMotion.value).setLength(this.locationMotion.value.distance).add(_g),ny=new Vector3().copy(ty).sub(Bn.target).length();ny*=Math.tan(this.camera.pose.fov/2*Math.PI/180);var iy=this.renderer.getSize(new Vector2),oy=2*ry.x*ny/iy.y,ay=2*ry.y*ny/iy.y,uy=new Vector3;uy.setFromMatrixColumn(this.camera.matrix,0),uy.multiplyScalar(-oy),_g.add(uy),this.camera.pose.latitude<$s?uy.setFromMatrixColumn(this.camera.matrix,1):(uy.setFromMatrixColumn(this.camera.matrix,0),uy.crossVectors(this.camera.up,uy)),uy.multiplyScalar(ay),_g.add(uy);var hy=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:_g,distance:this.camera.pose.distance});if(yn.state=hy,this.emit("gesture.pan",yn),yn.defaultPrevented)return;if(this.locationMotion.set({x:hy.offset.x,y:hy.offset.y,z:hy.offset.z},0).catch(q$q),yn.isFinal&&(this.fixFinalState(hy),Object.assign(yn,{__fixFinalState:!0}),this.locationMotion.set({distance:hy.distance,x:hy.offset.x,y:hy.offset.y,z:hy.offset.z},0).catch(q$q)),yn.isFinal){var my=this.renderer.getSize(new Vector2),ly=2*yn.velocityX*ny/my.y,sy=2*yn.velocityY*ny/my.y,cy=new Vector3,fy=new Vector3;cy.setFromMatrixColumn(this.camera.matrix,0),cy.multiplyScalar(-ly),fy.add(cy),this.camera.pose.latitude<$s?cy.setFromMatrixColumn(this.camera.matrix,1):(cy.setFromMatrixColumn(this.camera.matrix,0),cy.crossVectors(this.camera.up,cy)),cy.multiplyScalar(sy),fy.add(cy),this.inMomentumMovement={uuid:Lt$1()},this.requestMomentumMovement(yn,!0,{longitude:0,latitude:0,x:fy.x,y:fy.y,z:fy.z},0)}}else{var ry={x:yn.center.x-Bn.x,y:yn.center.y-Bn.y},vy=this.coordinatesForOffset(ry),dy=gn(this.cameraMotion.value.longitude+vy.longitude),Ay=pe$4(this.cameraMotion.value.latitude+vy.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(yn.overallVelocityX)>.2&&Math.atan2(Math.abs(yn.overallVelocityY),Math.abs(yn.overallVelocityX))<Math.PI/6.923&&(Ay=this.cameraMotion.value.latitude);var hy=O$n(O$n({},this.currentPano),{mode:this.mode,longitude:dy,latitude:Ay,fov:this.camera.pose.fov,offset:this.camera.pose.offset,distance:this.camera.pose.distance});if(yn.isFinal&&Object.assign(yn,{__fixFinalState:!0}),yn.state=hy,this.emit("gesture.pan",yn),yn.defaultPrevented)return;if(yn.isFinal?this.locationMotion.set({distance:hy.distance,x:hy.offset.x,y:hy.offset.y,z:hy.offset.z},0).catch(q$q):this.cameraMotion.set({longitude:hy.longitude,latitude:hy.latitude},0).catch(q$q),yn.isFinal){var gy=yn.velocityX,wy=yn.velocityY;this.inMomentumMovement={uuid:Lt$1()},this.requestMomentumMovement(yn,!0,O$n(O$n({},this.coordinatesForOffset({x:gy,y:wy})),{x:0,y:0,z:0}),0)}}}},vn.prototype.onPinchGesture=function(yn){var Rn;if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh();var Bn=(Rn=this.pinchState)===null||Rn===void 0?void 0:Rn.distance;if(yn.isFirst){this.pinchState={x:yn.center.x,y:yn.center.y,scale:1,distance:this.locationMotion.value.distance};return}if(typeof Bn!="undefined"){var Co=this.models.bounding.getCenter(new Vector3),Po=vn.distanceFromModel(this.models,this.cameraMotion.value.fov,this.camera.aspect),To=pe$4(Bn/yn.scale,A0,1/0),Io=yn.state.offset.clone().sub(Ut$1(yn.state).setLength(To)),$l=this.models.bounding.containsPoint(Io),Wl;if(!$l&&this.pinchState&&this.pinchState.scale>yn.scale&&Co.distanceTo(Io)>Po?Wl=yn.state.distance:(Wl=To,this.pinchState&&(this.pinchState.scale=yn.scale)),yn.state.distance=Wl,this.emit("gesture.pinch",yn),!yn.defaultPrevented&&(this.locationMotion.set({distance:yn.state.distance},0).catch(q$q),yn.pointerType!=="mouse"&&(yn.type="gesture.pan",this.onPanGesture(yn)),yn.isFinal)){if(!("__fixFinalState"in yn)){var Xl=yn.state;this.fixFinalState(yn.state);var Yl={x:Xl.offset.x,y:Xl.offset.y,z:Xl.offset.z,distance:Xl.distance};this.locationMotion.set(Yl,0).catch(q$q)}delete this.panState,delete this.pinchState}}}},vn.prototype.onMouseMove=function(yn){var Rn,Bn;if(this.intersectMesh.parent&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&(this.emit("gesture.mousemove",yn),!yn.defaultPrevented)){var Co=yn.center.raycaster;if(Co.near=this.camera.near,Co.far=this.camera.far,yn.isFinal&&this.intersectMesh.parent&&this.intersectMesh.visible===!0){this.hideIntersectMesh();return}var Po=this.models.intersectRaycaster(Co)[0],To=X$c("intersect.update",{raycaster:Co,intersection:Po!=null?Po:null,object:this.intersectMesh});if(this.emit("intersect.update",To),To.defaultPrevented){this.hideIntersectMesh();return}if(Po){var Io=(Bn=(Rn=Po.face)===null||Rn===void 0?void 0:Rn.normal)!==null&&Bn!==void 0?Bn:new Vector3().copy(Co.ray.direction).multiplyScalar(-1),$l=Io.clone(),Wl=Po.point.clone();this.intersectMesh.position.copy(Wl);var Xl=Wl.clone().add($l);if(this.intersectMesh.lookAt(Xl),Math.abs(Io.y)>.99){var Yl=this.camera.position.clone().sub(Wl);this.intersectMesh.rotation.z=-Math.atan2(Yl.z,Yl.x)}this.intersectMesh.visible=!0,this.needsRender=!0}else this.hideIntersectMesh()}},vn.prototype.onMouseWheel=function(yn){if(this.initAnimationIsReady)if(this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh(),yn.isFinal){var Rn=yn.state;if(this.fixFinalState(Rn),this.emit("gesture.mousewheel",yn),yn.defaultPrevented)return;var Bn={x:Rn.offset.x,y:Rn.offset.y,z:Rn.offset.z,distance:Rn.distance};this.locationMotion.set(Bn,0).catch(q$q)}else{var Co=Math.max(this.locationMotion.value.distance-this.camera.near,0),Po=yn.center.delta/10*Math.max(Co/5,.1);if(this.locationMotion.value.distance-Po>=A0){var To=this.locationMotion.value.distance-Po;yn.state.distance=To}else{var Io=Ut$1(this.cameraMotion.value);Io.setLength(Po),yn.state.offset.add(Io)}if(this.emit("gesture.mousewheel",yn),yn.defaultPrevented)return;this.locationMotion.set({distance:yn.state.distance,x:yn.state.offset.x,y:yn.state.offset.y,z:yn.state.offset.z},0).catch(q$q)}},vn.prototype.onTapGesture=function(yn){var Rn=this;this.userAction=yn.userAction,this.stopMomentumMovement();var Bn=yn.center.raycaster,Co=this.getForwardObserverOrNot(Bn);if(!Co)this.emit("gesture.tap",yn);else{var Po={longitude:this.camera.pose.longitude,latitude:0},To=O$n(O$n({},yn.state),{mode:"Panorama",workCode:Co.pano.workCode,panoIndex:Co.pano.panoIndex,longitude:Po.longitude,latitude:Po.latitude,offset:Co?Co.position.clone():new Vector3,distance:0});if(yn.state=To,this.emit("gesture.tap",yn),!yn.defaultPrevented&&(this.emit("pano.select",X$c("pano.select",{prevPano:this.currentPano,state:To,userAction:yn.userAction,options:Po,progress:0,error:null})),Co&&Co.active)){var Io=this.currentTapId=Lt$1();this.preloadPano(Co.pano).then(function($l){Rn.currentTapId===Io&&Rn.emit("pano.request",X$c("pano.request",{userAction:!0,prevPano:Rn.currentPano,progress:0,state:To,options:Po,error:null}))})}}},vn.prototype.onDblTapGesture=function(yn){if(this.initAnimationIsReady){this.userAction=yn.userAction,this.stopMomentumMovement(),this.hideIntersectMesh();var Rn=yn.state,Bn=yn.center.raycaster,Co=Bn.ray.origin.clone().add(Bn.ray.direction.clone().setLength(3)),Po=1,To=3,Io=Po,$l=this.models.intersectRaycaster(Bn)[0];if($l&&(Co=$l.point.clone(),$l.distance>(Po+To)/2?Io=Po:Io=To),yn.state.distance=Io,yn.state.offset=Co,this.emit("gesture.dbltap",yn),!yn.defaultPrevented){var Wl={x:Rn.offset.x,y:Rn.offset.y,z:Rn.offset.z,distance:Rn.distance};this.locationMotion.set(Wl,360).catch(q$q),this.hideIntersectMesh()}}},vn.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.needsRender=!0},vn.prototype.render=function(yn,Rn){var Bn=this.renderer.getRenderTarget();this.updateScreenBuffer(Rn),this.enableFragDepth?(yn&&(Rn==="edl"?this.edlEffect.render(this.screenBuffers):Rn==="hq"?this.hqEffect.render(this.screenBuffers):(this.renderer.setRenderTarget(this.modelRenderTarget),this.renderer.render(this.modelScene,this.camera))),this.depthCopyPass.render(this.modelRenderTarget.depthTexture,Bn),this.renderer.autoClearDepth=!1,this.renderer.autoClearColor=!0,this.copyPass.render(this.modelRenderTarget,Bn),this.renderer.setRenderTarget(Bn),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0):(Rn==="edl"?this.edlEffect.render(this.screenBuffers):Rn==="hq"?this.hqEffect.render(this.screenBuffers):this.renderer.render(this.modelScene,this.camera),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,this.camera),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0)},vn}(Ao);function eu(cr){return cr==null}var qA={type:"move"},tu=function(){function cr(){this._targetRay=null,this._grip=null,this._hand=null,this._axes=[0,0]}return cr.prototype.getHandSpace=function(){return this._hand===null&&(this._hand=new Group$1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},cr.prototype.getTargetRaySpace=function(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay},cr.prototype.getGripSpace=function(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip},cr.prototype.dispatchEvent=function(vn){return this._targetRay!==null&&this._targetRay.dispatchEvent(vn),this._grip!==null&&this._grip.dispatchEvent(vn),this._hand!==null&&this._hand.dispatchEvent(vn),this},cr.prototype.disconnect=function(vn){return this.dispatchEvent({type:"disconnected",data:vn}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},cr.prototype.getAxes=function(){return this._axes},cr.prototype.update=function(vn,yn,Rn){var Bn=null,Co=null,Po=null,To=this._targetRay,Io=this._grip,$l=this._hand;if(vn&&vn.gamepad&&vn.gamepad.axes&&(this._axes=[vn.gamepad.axes[2],vn.gamepad.axes[3]]),vn&&yn.session.visibilityState!=="visible-blurred")if(To!==null&&(Bn=yn.getPose(vn.targetRaySpace,Rn),Bn!==null&&(To.matrix.fromArray(Bn.transform.matrix),To.matrix.decompose(To.position,To.rotation,To.scale),Bn.linearVelocity?(To.hasLinearVelocity=!0,To.linearVelocity.copy(Bn.linearVelocity)):To.hasLinearVelocity=!1,Bn.angularVelocity?(To.hasAngularVelocity=!0,To.angularVelocity.copy(Bn.angularVelocity)):To.hasAngularVelocity=!1,this.dispatchEvent(qA))),$l&&vn.hand){Po=!0;for(var Wl=0,Xl=vn.hand.values();Wl<Xl.length;Wl++){var Yl=Xl[Wl],Zl=yn.getJointPose(Yl,Rn);if($l.joints[Yl.jointName]===void 0){var ey=new Group$1;ey.matrixAutoUpdate=!1,ey.visible=!1,$l.joints[Yl.jointName]=ey,$l.add(ey)}var Rm=$l.joints[Yl.jointName];Zl!==null&&(Rm.matrix.fromArray(Zl.transform.matrix),Rm.matrix.decompose(Rm.position,Rm.rotation,Rm.scale),Rm.jointRadius=Zl.radius),Rm.visible=Zl!==null}var ry=$l.joints["index-finger-tip"],_g=$l.joints["thumb-tip"],ty=ry.position.distanceTo(_g.position),ny=.02,iy=.005;$l.inputState.pinching&&ty>ny+iy?($l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:vn.handedness,target:this})):!$l.inputState.pinching&&ty<=ny-iy&&($l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:vn.handedness,target:this}))}else Io!==null&&vn.gripSpace&&(Co=yn.getPose(vn.gripSpace,Rn),Co!==null&&(Io.matrix.fromArray(Co.transform.matrix),Io.matrix.decompose(Io.position,Io.rotation,Io.scale),Co.linearVelocity?(Io.hasLinearVelocity=!0,Io.linearVelocity.copy(Co.linearVelocity)):Io.hasLinearVelocity=!1,Co.angularVelocity?(Io.hasAngularVelocity=!0,Io.angularVelocity.copy(Co.angularVelocity)):Io.hasAngularVelocity=!1));return To!==null&&(To.visible=Bn!==null),Io!==null&&(Io.visible=Co!==null),$l!==null&&($l.visible=Po!==null),this},cr}(),UA=1,QA$1=function(){function cr(vn,yn,Rn){var Bn,Co,Po,To,Io;this.isPanorama=(Bn=Rn==null?void 0:Rn.isPanorama)!==null&&Bn!==void 0?Bn:!0;var $l=navigator.userAgent.toLowerCase(),Wl;$l.includes("pico")?Wl="Pico":$l.includes("oculus")?Wl="Oculus":Wl="VP",this.machineType=(Co=Rn==null?void 0:Rn.machineType)!==null&&Co!==void 0?Co:Wl,this.renderer=vn,this.gl=yn,this.enabled=!1,this.session=null,this.referenceSpaceType=(Po=Rn==null?void 0:Rn.referenceSpaceType)!==null&&Po!==void 0?Po:"local-floor",this.referenceSpace=null,this.onSessionStartCallback=(To=Rn==null?void 0:Rn.onSessionStart)!==null&&To!==void 0?To:q$q,this.onSessionEndCallback=(Io=Rn==null?void 0:Rn.onSessionEnd)!==null&&Io!==void 0?Io:q$q,this.controllers=[new tu,new tu],this.inputSourcesMap=new Map,this.cameraVR=new ArrayCamera,this.cameraL=new PerspectiveCamera,this.cameraR=new PerspectiveCamera,this.cameraL.viewport=new Vector4,this.cameraR.viewport=new Vector4,this.cameraL.layers.enable(1),this.cameraR.layers.enable(2),this.cameraVR.layers.enable(1),this.cameraVR.layers.enable(2),this.isPresenting=!1,this.currentDepthNear=null,this.currentDepthFar=null,this.cameraLPos=new Vector3,this.cameraRPos=new Vector3}return cr.prototype.getController=function(vn){var yn=this.controllers[vn];return yn||console.warn("no controller find"),yn.getTargetRaySpace()},cr.prototype.getRightController=function(){if(!this.session)return null;var vn=this.session.inputSources[0].handedness==="right"?0:1,yn=this.controllers[vn];return yn||console.warn("no controller find"),yn.getTargetRaySpace()},cr.prototype.getLeftController=function(){if(!this.session)return null;var vn=this.session.inputSources[0].handedness==="left"?0:1,yn=this.controllers[vn];return yn||console.warn("no controller find"),yn.getTargetRaySpace()},cr.prototype.getControllerGrip=function(vn){var yn=this.controllers[vn];return yn||console.warn("no controller find"),yn.getGripSpace()},cr.prototype.getCameras=function(){return{cameraL:this.cameraL,cameraR:this.cameraR,cameraVR:this.cameraVR}},cr.prototype.updateCamera=function(vn,yn){yn===null?vn.matrixWorld.copy(vn.matrix):vn.matrixWorld.multiplyMatrices(yn.matrixWorld,vn.matrix),vn.matrixWorldInverse.getInverse(vn.matrixWorld)},cr.prototype.setProjectionFromUnion=function(vn,yn,Rn){this.cameraLPos.setFromMatrixPosition(yn.matrixWorld),this.cameraRPos.setFromMatrixPosition(Rn.matrixWorld);var Bn=this.cameraLPos.distanceTo(this.cameraRPos),Co=yn.projectionMatrix.elements,Po=Rn.projectionMatrix.elements,To=Co[14]/(Co[10]-1),Io=Co[14]/(Co[10]+1),$l=(Co[9]+1)/Co[5],Wl=(Co[9]-1)/Co[5],Xl=(Co[8]-1)/Co[0],Yl=(Po[8]+1)/Po[0],Zl=To*Xl,ey=To*Yl,Rm=Bn/(-Xl+Yl),ry=Rm*-Xl;yn.matrixWorld.decompose(vn.position,vn.quaternion,vn.scale),vn.translateX(ry),vn.translateZ(Rm),vn.matrixWorld.compose(vn.position,vn.quaternion,vn.scale),vn.matrixWorldInverse.getInverse(vn.matrixWorld);var _g=To+Rm,ty=Io+Rm,ny=Zl-ry,iy=ey+(Bn-ry),oy=$l*Io/ty*_g,ay=Wl*Io/ty*_g;vn.projectionMatrix.makePerspective(ny,iy,oy,ay,_g,ty)},cr.prototype.getCamera=function(vn){this.cameraVR.near=this.cameraR.near=this.cameraL.near=vn.near,this.cameraVR.far=this.cameraR.far=this.cameraL.far=vn.far,this.session&&(this.currentDepthNear!==this.cameraVR.near||this.currentDepthFar!==this.cameraVR.far)&&(this.session.updateRenderState({depthNear:this.cameraVR.near,depthFar:this.cameraVR.far}),this.currentDepthNear=this.cameraVR.near,this.currentDepthFar=this.cameraVR.far);var yn=vn.parent,Rn=this.cameraVR.cameras;this.updateCamera(this.cameraVR,yn);for(var Bn=0;Bn<Rn.length;Bn++)this.updateCamera(Rn[Bn],yn);vn.matrixWorld.copy(this.cameraVR.matrixWorld);for(var Co=vn.children,Bn=0,Po=Co.length;Bn<Po;Bn++)Co[Bn].updateMatrixWorld(!0);return Rn.length===2?this.setProjectionFromUnion(this.cameraVR,this.cameraL,this.cameraR):this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix),this.cameraVR},cr.prototype.updateInputSources=function(vn){if(!this.session){console.warn("session is lose!");return}for(var yn=this.session.inputSources,Rn=0;Rn<this.controllers.length;Rn++)this.inputSourcesMap.set(yn[Rn],this.controllers[Rn]);for(var Rn=0;Rn<vn.removed.length;Rn++){var Bn=vn.removed[Rn],Co=this.inputSourcesMap.get(Bn);Co&&(Co.dispatchEvent({type:"disconnected",data:Bn}),this.inputSourcesMap.delete(Bn))}for(var Rn=0;Rn<vn.added.length;Rn++){var Bn=vn.added[Rn],Co=this.inputSourcesMap.get(Bn);Co&&Co.dispatchEvent({type:"connected",data:Bn})}},cr.prototype.onSessionEvent=function(vn){var yn=this.inputSourcesMap.get(vn.inputSource);yn&&yn.dispatchEvent({type:vn.type})},cr.prototype.onSessionEnd=function(){this.inputSourcesMap.forEach(function(vn,yn){vn.disconnect(yn)}),this.inputSourcesMap.clear(),this.renderer.setFramebuffer(null),this.renderer.setRenderTarget(this.renderer.getRenderTarget()),this.isPresenting=!1,this.session=null,Ft$2.shared.setContext(null),this.onSessionEndCallback()},cr.prototype.onRequestReferenceSpace=function(vn){this.referenceSpace=vn,this.isPresenting=!0,this.session&&this.onSessionStartCallback(this.session)},cr.prototype.setSession=function(vn){var yn=this;if(this.session=vn,this.session){this.session.addEventListener("select",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("selectstart",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("selectend",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("squeeze",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("squeezestart",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("squeezeend",function(Bn){yn.onSessionEvent(Bn)}),this.session.addEventListener("end",function(Bn){yn.onSessionEnd()});var Rn=this.gl.getContextAttributes();this.gl.makeXRCompatible().then(function(){var Bn={antialias:Rn==null?void 0:Rn.antialias,alpha:Rn==null?void 0:Rn.alpha,depth:Rn==null?void 0:Rn.depth,stencil:Rn==null?void 0:Rn.stencil,framebufferScaleFactor:UA};if(!yn.session){console.error("session is lose while set session!");return}switch(yn.machineType){case"Pico":case"VP":yn.session.updateRenderState({baseLayer:new XRWebGLLayer(yn.session,yn.gl,Bn)});break;case"Oculus":yn.session.updateRenderState({baseLayer:new XRWebGLLayer(yn.session,yn.gl,Bn)});break;default:yn.machineType;break}yn.session.requestReferenceSpace(yn.referenceSpaceType).then(function(Co){yn.onRequestReferenceSpace(Co)}),yn.session.addEventListener("inputsourceschange",function(Co){yn.updateInputSources(Co)})})}},cr}(),So=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;yn.type="LineSegmentsGeometry";var Rn=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],Bn=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],Co=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];return yn.setIndex(Co),yn.setAttribute("position",new Float32BufferAttribute(Rn,3)),yn.setAttribute("uv",new Float32BufferAttribute(Bn,2)),yn}return vn.prototype.applyMatrix4=function(yn){var Rn=this.attributes.instanceStart,Bn=this.attributes.instanceEnd;return Rn!==void 0&&(Rn.applyMatrix4(yn),Bn.applyMatrix4(yn),Rn.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},vn.prototype.setPositions=function(yn){var Rn;yn instanceof Float32Array?Rn=yn:Array.isArray(yn)?Rn=new Float32Array(yn):Rn=new Float32Array;var Bn=new InstancedInterleavedBuffer(Rn,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(Bn,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(Bn,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},vn.prototype.setColors=function(yn){var Rn;yn instanceof Float32Array?Rn=yn:Array.isArray(yn)?Rn=new Float32Array(yn):Rn=new Float32Array;var Bn=new InstancedInterleavedBuffer(Rn,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(Bn,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(Bn,3,3)),this},vn.prototype.fromWireframeGeometry=function(yn){return this.setPositions(yn.attributes.position.array),this},vn.prototype.fromEdgesGeometry=function(yn){return this.setPositions(yn.attributes.position.array),this},vn.prototype.fromMesh=function(yn){return this.fromWireframeGeometry(new WireframeGeometry(yn.geometry)),this},vn.prototype.fromLineSegments=function(yn){var Rn=yn.geometry;if(Rn instanceof Geometry){var Bn=new BufferGeometry().fromGeometry(Rn);this.setPositions(Bn.attributes.position.array)}else Rn instanceof BufferGeometry&&this.setPositions(Rn.attributes.position.array);return this},vn.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new Box3);var yn=this.attributes.instanceStart,Rn=this.attributes.instanceEnd;if(yn!==void 0&&Rn!==void 0){var Bn=new Box3;this.boundingBox.setFromBufferAttribute(yn),Bn.setFromBufferAttribute(Rn),this.boundingBox.union(Bn)}},vn.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingBox===null&&this.computeBoundingBox();var yn=this.attributes.instanceStart,Rn=this.attributes.instanceEnd;if(yn!==void 0&&Rn!==void 0){var Bn=this.boundingSphere.center;this.boundingBox.getCenter(Bn);for(var Co=0,Po=new Vector3,To=0,Io=yn.count;To<Io;To++)Po.fromBufferAttribute(yn,To),Co=Math.max(Co,Bn.distanceToSquared(Po)),Po.fromBufferAttribute(Rn,To),Co=Math.max(Co,Bn.distanceToSquared(Po));this.boundingSphere.radius=Math.sqrt(Co),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},vn.prototype.toJSON=function(){},vn}(InstancedBufferGeometry);Object.assign(So.prototype,{isLineSegmentsGeometry:!0});var g0={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,{linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},Mo=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,{uniforms:UniformsUtils.clone(g0.uniforms),vertexShader:g0.vertexShader,fragmentShader:g0.fragmentShader,clipping:!0})||this;return Rn.type="LineMaterial",Rn.dashed=!1,Object.defineProperties(Rn,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Bn){this.uniforms.diffuse.value=Bn}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Bn){this.uniforms.linewidth.value=Bn}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Bn){this.uniforms.dashScale.value=Bn}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Bn){this.uniforms.dashSize.value=Bn}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Bn){this.uniforms.gapSize.value=Bn}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Bn){this.uniforms.opacity.value=Bn}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Bn){this.uniforms.resolution.value.copy(Bn)}}}),Rn.setValues(yn),Rn}return vn}(ShaderMaterial);Object.assign(Mo.prototype,{isLineMaterial:!0});var Hl=function(cr){fe$6(vn,cr);function vn(yn,Rn){var Bn=cr.call(this)||this;return Bn.type="LineSegments2",Bn.geometry=yn!==void 0?yn:new So,Bn.material=Rn!==void 0?Rn:new Mo({color:Math.random()*16777215}),Bn}return vn.prototype.computeLineDistances=function(){for(var yn=this.geometry,Rn=yn.attributes.instanceStart,Bn=yn.attributes.instanceEnd,Co=new Float32Array(2*Rn.count),Po=new Vector3,To=new Vector3,Io=0,$l=0,Wl=Rn.count;Io<Wl;Io++,$l+=2)Po.fromBufferAttribute(Rn,Io),To.fromBufferAttribute(Bn,Io),Co[$l]=$l===0?0:Co[$l-1],Co[$l+1]=Co[$l]+Po.distanceTo(To);var Xl=new InstancedInterleavedBuffer(Co,2,1);return yn.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(Xl,1,0)),yn.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(Xl,1,1)),this},vn.prototype.raycast=function(yn,Rn){yn.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Bn=yn.ray,Co=yn.camera,Po=Co.projectionMatrix,To=this.geometry,Io=this.material,$l=Io.resolution,Wl=Io.linewidth,Xl=To.attributes.instanceStart,Yl=To.attributes.instanceEnd,Zl=new Vector4,ey=new Vector4,Rm=new Vector4,ry=new Vector3,_g=new Matrix4,ty=new Line3,ny=new Vector3;Bn.at(1,Rm),Rm.w=1,Rm.applyMatrix4(Co.matrixWorldInverse),Rm.applyMatrix4(Po),Rm.multiplyScalar(1/Rm.w),Rm.x*=$l.x/2,Rm.y*=$l.y/2,Rm.z=0,ry.copy(Rm);var iy=this.matrixWorld;_g.multiplyMatrices(Co.matrixWorldInverse,iy);for(var oy=0,ay=Xl.count;oy<ay;oy++){Zl.fromBufferAttribute(Xl,oy),ey.fromBufferAttribute(Yl,oy),Zl.w=1,ey.w=1,Zl.applyMatrix4(_g),ey.applyMatrix4(_g),Zl.applyMatrix4(Po),ey.applyMatrix4(Po),Zl.multiplyScalar(1/Zl.w),ey.multiplyScalar(1/ey.w);var uy=Zl.z<-1&&ey.z<-1,hy=Zl.z>1&&ey.z>1;if(!(uy||hy)){Zl.x*=$l.x/2,Zl.y*=$l.y/2,ey.x*=$l.x/2,ey.y*=$l.y/2,ty.start.copy(Zl),ty.start.z=0,ty.end.copy(ey),ty.end.z=0;var my=ty.closestPointToPointParameter(ry,!0);ty.at(my,ny);var ly=MathUtils.lerp(Zl.z,ey.z,my),sy=ly>=-1&&ly<=1,cy=ry.distanceTo(ny)<Wl*.5;if(sy&&cy){ty.start.fromBufferAttribute(Xl,oy),ty.end.fromBufferAttribute(Yl,oy),ty.start.applyMatrix4(iy),ty.end.applyMatrix4(iy);var fy=new Vector3,vy=new Vector3;Bn.distanceSqToSegment(ty.start,ty.end,vy,fy),Rn.push({point:vy,pointOnLine:fy,distance:Bn.origin.distanceTo(vy),object:this,faceIndex:oy})}}}},vn}(Mesh);Object.assign(Hl.prototype,{isLineSegments2:!0});var Gl=function(cr){fe$6(vn,cr);function vn(yn,Rn){var Bn=cr.call(this,yn,Rn)||this;return Bn.type="Line2",Bn}return vn}(Hl);Object.assign(Gl.prototype,{isLine2:!0});var _l=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.type="LineGeometry",yn}return vn.prototype.setPositions=function(yn){for(var Rn=yn.length-3,Bn=new Float32Array(2*Rn),Co=0;Co<Rn;Co+=3)Bn[2*Co]=yn[Co],Bn[2*Co+1]=yn[Co+1],Bn[2*Co+2]=yn[Co+2],Bn[2*Co+3]=yn[Co+3],Bn[2*Co+4]=yn[Co+4],Bn[2*Co+5]=yn[Co+5];return cr.prototype.setPositions.call(this,Bn),this},vn.prototype.setColors=function(yn){for(var Rn=yn.length-3,Bn=new Float32Array(2*Rn),Co=0;Co<Rn;Co+=3)Bn[2*Co]=yn[Co],Bn[2*Co+1]=yn[Co+1],Bn[2*Co+2]=yn[Co+2],Bn[2*Co+3]=yn[Co+3],Bn[2*Co+4]=yn[Co+4],Bn[2*Co+5]=yn[Co+5];return cr.prototype.setColors.call(this,Bn),this},vn.prototype.fromLine=function(yn){var Rn=yn.geometry;if(Rn instanceof Geometry){var Bn=new BufferGeometry().fromGeometry(Rn);this.setPositions(Bn.attributes.position.array)}else Rn instanceof BufferGeometry&&this.setPositions(Rn.attributes.position.array);return this},vn.prototype.copy=function(){return this},vn}(So);Object.assign(_l.prototype,{isLineGeometry:!0});var HA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==",ru=14467195,GA=8,_A$1=2,JA=20,nu=null,H0=function(cr){fe$6(vn,cr);function vn(yn,Rn){yn===void 0&&(yn=new Vector3),Rn===void 0&&(Rn=new Vector3);var Bn=cr.call(this)||this;Bn.type="FiveLine",Bn.needsRender=!0;var Co=new _l,Po=new Mo({color:ru,linewidth:_A$1,dashScale:JA,dashed:!1});Bn.line=new Gl(Co,Po);var To=new BufferGeometry,Io=new PointsMaterial({color:ru,size:GA,map:nu||(nu=new TextureLoader().load(HA)),sizeAttenuation:!1,transparent:!0});return Bn.points=new Points(To,Io),Bn.points.renderOrder=11,Bn.points.frustumCulled=!1,Bn.setPoints(yn,Rn),Bn.add(Bn.line,Bn.points),Bn}return Object.defineProperty(vn,"version",{get:function(){return"6.4.0-alpha.36"},enumerable:!1,configurable:!0}),vn.prototype.setPoints=function(yn,Rn){var Bn=[].concat(yn.toArray(),Rn.toArray());this.points.geometry.setAttribute("position",new BufferAttribute(new Float32Array(Bn),3)),this.line.geometry.setPositions(Bn),this.line.computeLineDistances(),this.needsRender=!0},vn.prototype.getPoints=function(){var yn=this.points.geometry.attributes.position.array;return[new Vector3(yn[0],yn[1],yn[2]),new Vector3(yn[3],yn[4],yn[5])]},vn.prototype.setMaterial=function(yn){var Rn=this.line.material;for(var Bn in yn)if(yn.hasOwnProperty(Bn)){var Co=yn[Bn];Bn==="dashed"?(Rn.dashed=Co,Co?Rn.defines.USE_DASH="":delete Rn.defines.USE_DASH,Rn.needsUpdate=!0):Rn[Bn]=yn[Bn]}this.needsRender=!0},vn.prototype.setResolution=function(yn,Rn){var Bn=this.line.material.resolution;(Bn.x!==yn||Bn.y!==Rn)&&(Bn.set(yn,Rn),this.needsRender=!0)},vn}(Object3D);Object.assign(H0.prototype,{isFiveLine:!0});var et$3={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};function Jl(cr){return ga(this,void 0,void 0,function(){var vn;return ya(this,function(yn){switch(yn.label){case 0:return[4,fetch(cr)];case 1:if(vn=yn.sent(),vn.ok)return[2,vn.json()];throw new Error(vn.statusText)}})})}function KA(cr){return ga(this,void 0,void 0,function(){var vn,yn;return ya(this,function(Rn){switch(Rn.label){case 0:if(!cr)throw new Error("No basePath supplied");return vn="profilesList.json",[4,Jl("".concat(cr,"/").concat(vn))];case 1:return yn=Rn.sent(),[2,yn]}})})}function jA(cr,vn){return ga(this,arguments,void 0,function(yn,Rn,Bn,Co){var Po,To,Io,$l,Wl,Xl;return Bn===void 0&&(Bn=null),Co===void 0&&(Co=!0),ya(this,function(Yl){switch(Yl.label){case 0:if(!yn)throw new Error("No xrInputSource supplied");if(!Rn)throw new Error("No basePath supplied");return[4,KA(Rn)];case 1:if(Po=Yl.sent(),yn.profiles.some(function(Zl){var ey=Po[Zl];return ey&&(To={profileId:Zl,profilePath:"".concat(Rn,"/").concat(ey.path),deprecated:!!ey.deprecated}),!!To}),!To){if(!Bn)throw new Error("No matching profile name found");if(Io=Po[Bn],!Io)throw new Error('No matching profile name found and default profile "'.concat(Bn,'" missing.'));To={profileId:Bn,profilePath:"".concat(Rn,"/").concat(Io.path),deprecated:!!Io.deprecated}}return[4,Jl(To.profilePath)];case 2:if($l=Yl.sent(),Co){if(Xl=void 0,Xl=$l.layouts[yn.handedness],!Xl)throw new Error("No matching handedness, ".concat(yn.handedness,", in profile ").concat(To.profileId));Xl.assetPath&&(Wl=To.profilePath.replace("profile.json",Xl.assetPath))}return[2,{profile:$l,assetPath:Wl}]}})})}var XA={xAxis:0,yAxis:0,button:0,state:et$3.ComponentState.DEFAULT};function WA(cr,vn){cr===void 0&&(cr=0),vn===void 0&&(vn=0);var yn=cr,Rn=vn,Bn=Math.sqrt(cr*cr+vn*vn);if(Bn>1){var Co=Math.atan2(vn,cr);yn=Math.cos(Co),Rn=Math.sin(Co)}var Po={normalizedXAxis:yn*.5+.5,normalizedYAxis:Rn*.5+.5};return Po}var ZA=function(){function cr(vn){this.componentProperty=vn.componentProperty,this.states=vn.states,this.valueNodeName=vn.valueNodeName,this.valueNodeProperty=vn.valueNodeProperty,this.valueNodeProperty===et$3.VisualResponseProperty.TRANSFORM&&(this.minNodeName=vn.minNodeName,this.maxNodeName=vn.maxNodeName),this.value=0,this.updateFromComponent(XA)}return cr.prototype.updateFromComponent=function(vn){var yn=vn.xAxis,Rn=vn.yAxis,Bn=vn.button,Co=vn.state,Po=WA(yn,Rn),To=Po.normalizedXAxis,Io=Po.normalizedYAxis;switch(this.componentProperty){case et$3.ComponentProperty.X_AXIS:this.value=this.states.includes(Co)?To:.5;break;case et$3.ComponentProperty.Y_AXIS:this.value=this.states.includes(Co)?Io:.5;break;case et$3.ComponentProperty.BUTTON:this.value=this.states.includes(Co)?Bn:0;break;case et$3.ComponentProperty.STATE:this.valueNodeProperty===et$3.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(Co):this.value=this.states.includes(Co)?1:0;break;default:throw new Error("Unexpected visualResponse componentProperty ".concat(this.componentProperty))}},cr}(),YA=function(){function cr(vn,yn){var Rn=this;if(!vn||!yn||!yn.visualResponses||!yn.gamepadIndices||Object.keys(yn.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=vn,this.type=yn.type,this.rootNodeName=yn.rootNodeName,this.touchPointNodeName=yn.touchPointNodeName,this.visualResponses={},Object.keys(yn.visualResponses).forEach(function(Bn){var Co=new ZA(yn.visualResponses[Bn]);Rn.visualResponses[Bn]=Co}),this.gamepadIndices=Object.assign({},yn.gamepadIndices),this.values={state:et$3.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}return Object.defineProperty(cr.prototype,"data",{get:function(){var vn=O$n({id:this.id},this.values);return vn},enumerable:!1,configurable:!0}),cr.prototype.updateFromGamepad=function(vn){var yn=this;if(this.values.state=et$3.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&vn.buttons.length>this.gamepadIndices.button){var Rn=vn.buttons[this.gamepadIndices.button];this.values.button=Rn.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,Rn.pressed||this.values.button===1?this.values.state=et$3.ComponentState.PRESSED:(Rn.touched||this.values.button>et$3.ButtonTouchThreshold)&&(this.values.state=et$3.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&vn.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=vn.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===et$3.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>et$3.AxisTouchThreshold&&(this.values.state=et$3.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&vn.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=vn.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===et$3.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>et$3.AxisTouchThreshold&&(this.values.state=et$3.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(function(Bn){Bn.updateFromComponent(yn.values)})},cr}(),$A=function(){function cr(vn,yn,Rn){var Bn=this;if(!vn)throw new Error("No xrInputSource supplied");if(!yn)throw new Error("No profile supplied");this.xrInputSource=vn,this.assetUrl=Rn,this.id=yn.profileId,this.layoutDescription=yn.layouts[vn.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(function(Co){var Po=Bn.layoutDescription.components[Co];Bn.components[Co]=new YA(Co,Po)}),this.updateFromGamepad()}return Object.defineProperty(cr.prototype,"gripSpace",{get:function(){return this.xrInputSource.gripSpace},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"targetRaySpace",{get:function(){return this.xrInputSource.targetRaySpace},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"data",{get:function(){var vn=[];return Object.values(this.components).forEach(function(yn){vn.push(yn.data)}),vn},enumerable:!1,configurable:!0}),cr.prototype.updateFromGamepad=function(){var vn=this;Object.values(this.components).forEach(function(yn){yn.updateFromGamepad(vn.xrInputSource.gamepad)})},cr}(),eg="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",tg="generic-trigger",rg=function(cr){fe$6(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.motionController=null,yn.envMap=null,yn}return vn.prototype.setEnvironmentMap=function(yn){var Rn=this;return this.envMap==yn?this:(this.envMap=yn,this.traverse(function(Bn){Bn instanceof Mesh&&Bn.isMesh&&(Bn.material.envMap=Rn.envMap,Bn.material.needsUpdate=!0)}),this)},vn.prototype.updateMatrixWorld=function(yn){cr.prototype.updateMatrixWorld.call(this,yn),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(function(Rn){Object.values(Rn.visualResponses).forEach(function(Bn){var Co=Bn.valueNode,Po=Bn.minNode,To=Bn.maxNode,Io=Bn.value,$l=Bn.valueNodeProperty;Co&&($l===et$3.VisualResponseProperty.VISIBILITY?Co.visible=Io:$l===et$3.VisualResponseProperty.TRANSFORM&&(Co.quaternion.copy(Po.quaternion).slerp(To.quaternion,Io),Co.position.lerpVectors(Po.position,To.position,Io)))})}))},vn}(Object3D);function ng(cr,vn){Object.values(cr.components).forEach(function(yn){var Rn=yn.type,Bn=yn.touchPointNodeName,Co=yn.visualResponses;if(Rn===et$3.ComponentType.TOUCHPAD)if(yn.touchPointNode=vn.getObjectByName(Bn),yn.touchPointNode){var Po=new SphereGeometry(.001),To=new MeshBasicMaterial({color:255}),Io=new Mesh(Po,To);yn.touchPointNode.add(Io)}else console.warn("Could not find touch dot, ".concat(yn.touchPointNodeName,", in touchpad component ").concat(yn.id));Object.values(Co).forEach(function($l){var Wl=$l.valueNodeName,Xl=$l.minNodeName,Yl=$l.maxNodeName,Zl=$l.valueNodeProperty;if(Zl===et$3.VisualResponseProperty.TRANSFORM){if($l.minNode=vn.getObjectByName(Xl),$l.maxNode=vn.getObjectByName(Yl),!$l.minNode){console.warn("Could not find ".concat(Xl," in the model"));return}if(!$l.maxNode){console.warn("Could not find ".concat(Yl," in the model"));return}}$l.valueNode=vn.getObjectByName(Wl),$l.valueNode||console.warn("Could not find ".concat(Wl," in the model"))})})}function iu(cr,vn){ng(cr.motionController,vn),cr.envMap&&vn.traverse(function(yn){yn instanceof Mesh&&yn.isMesh&&(yn.material.envMap=cr.envMap,yn.material.needsUpdate=!0)}),cr.add(vn)}var ig=function(){function cr(vn){vn===void 0&&(vn=null),this.gltfLoader=vn,this.path=eg,this._assetCache={}}return cr.prototype.createControllerModel=function(vn){var yn=this,Rn=new rg,Bn=null;return vn.addEventListener("connected",function(Co){var Po=Co.data;Po.targetRayMode!=="tracked-pointer"||!Po.gamepad||jA(Po,yn.path,tg).then(function(To){var Io=To.profile,$l=To.assetPath;Rn.motionController=new $A(Po,Io,$l);var Wl=yn._assetCache[Rn.motionController.assetUrl];if(Wl)Bn=Wl.scene.clone(),iu(Rn,Bn);else{if(!yn.gltfLoader)throw new Error("GLTFLoader not set.");yn.gltfLoader.load(Rn.motionController.assetUrl,function(Xl){yn._assetCache[Rn.motionController.assetUrl]=Xl,Bn=Xl.scene.clone(),iu(Rn,Bn)})}}).catch(function(To){console.warn(To)})}),vn.addEventListener("disconnected",function(){Rn.motionController=null,Rn.remove(Bn),Bn=null}),Rn},cr}();O$n({},xa(br$1,["maxLatitude","minLatitude"]));function og(cr,vn){return cr}var au=300,sg=new Matrix4().makeRotationAxis(new Vector3(0,1,0),Math.PI),ou=new Vector3(-1,1,1),ug=function(cr){fe$6(vn,cr);function vn(yn){var Rn=cr.call(this,yn)||this;Rn.xrManager=new QA$1(Rn.renderer,Rn.renderer.getContext(),{onSessionStart:function(Io){Rn.emit("xr.session.start",X$c("xr.session.start",{session:Io,machineType:Rn.xrManager.machineType}))},onSessionEnd:function(){Rn.emit("xr.session.end",X$c("xr.session.end",{session:null,machineType:Rn.xrManager.machineType}))}}),Rn.xrControllerRay={left:new Raycaster,right:new Raycaster},Rn.xrControllerRay.left.params.Points={threshold:.1},Rn.xrControllerRay.right.params.Points={threshold:.1},Rn.gazeRay=null,Rn.pointerLines={left:new H0,right:new H0},Rn.pointerLines.left.visible=!1,Rn.pointerLines.right.visible=!0,Rn.pointerLines.left.setMaterial({color:new Vector3(1,1,1)}),Rn.pointerLines.left.points.material.depthTest=!1,Rn.pointerLines.right.setMaterial({color:new Vector3(1,1,1)}),Rn.pointerLines.right.points.material.depthTest=!1,Rn.controllerWrappers=[new Group$1,new Group$1];var Bn=Rn.xrManager.getController(0);Rn.controllerWrappers[0].add(Bn);var Co=Rn.xrManager.getController(1);Rn.controllerWrappers[1].add(Co);var Po=new ig;Po.gltfLoader={load:function(Io,$l){ua.ajax(Io,{responseType:"arraybuffer"}).then(function(Wl){var Xl;return oo$1(Wl.body,{resourcePath:Io.slice(0,Io.lastIndexOf("/")+1),search:(Xl=Io.split("?")[1])!==null&&Xl!==void 0?Xl:"",fetcher:ua})}).then(function(Wl){return $l(Wl)})}},(Rn.xrManager.machineType==="Oculus"||Rn.xrManager.machineType==="Pico")&&Rn.scene.add(Rn.pointerLines.left,Rn.pointerLines.right,Rn.controllerWrappers[0],Rn.controllerWrappers[1]),Rn.panoResources={},Rn.panoResources[Rn.locationMotion.keyframes[0].key=Rn.locationMotion.keyframes[1].key=Lt$1()]={panoId:_e$3(Rn.currentPano),leftPanoPicture:null,position:Rn.camera.pose.offset.clone(),effect:"fade",fixCameraTransform:new Matrix4},Rn.parallaxCameraMatrixs=[];var To=Ft$2.shared.getContext();return To?(Rn.on("xr.session.end",function(){Rn.scene.remove(Rn.pointerLines.left,Rn.pointerLines.right)}),Rn.xrManager.setSession(To),Rn.on("xr.session.start",function(){var Io=Rn.xrManager.getControllerGrip(0);Io.add(Po.createControllerModel(Io)),Rn.controllerWrappers[0].add(Io);var $l=Rn.xrManager.getControllerGrip(1);$l.add(Po.createControllerModel($l)),Rn.controllerWrappers[1].add($l)}),Rn.xrHandleState={LeftAxesUp:{touchStartTime:0,touchStart:!1},LeftAxesDown:{touchStartTime:0,touchStart:!1},LeftAxesLeft:{touchStartTime:0,touchStart:!1},LeftAxesRight:{touchStartTime:0,touchStart:!1},LeftTrigger:{touchStartTime:0,touchStart:!1},LeftPinch:{touchStartTime:0,touchStart:!1},RightAxesUp:{touchStartTime:0,touchStart:!1},RightAxesDown:{touchStartTime:0,touchStart:!1},RightAxesLeft:{touchStartTime:0,touchStart:!1},RightAxesRight:{touchStartTime:0,touchStart:!1},RightTrigger:{touchStartTime:0,touchStart:!1},RightPinch:{touchStartTime:0,touchStart:!1},Y:{touchStartTime:0,touchStart:!1},X:{touchStartTime:0,touchStart:!1},A:{touchStartTime:0,touchStart:!1},B:{touchStartTime:0,touchStart:!1}},Rn.xrManager.machineType==="VP"&&Rn.initHandEvent(),Rn):(console.error("\u83B7\u53D6session\u5931\u8D25\uFF0C\u8BF7\u9000\u51FA\u91CD\u8BD5"),Rn)}return vn.parseArgs=function(yn){if(yn instanceof vn)return yn;var Rn=O$n(O$n({},yn),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return cr.parseArgs.call(this,Rn)},vn.initAnimationEndState=function(yn){var Rn=this.parseArgs(yn),Bn=cr.initAnimationEndState.call(this,Rn);return O$n(O$n({},Bn),{mode:"XRPanorama"})},vn.prototype.updateConfiguration=function(yn){return cr.prototype.updateConfiguration.call(this,O$n(O$n({},yn),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2}))},vn.prototype.moveToPano=function(yn,Rn,Bn){var Co=this,Po,To,Io,$l,Wl=(Po=Rn.effect)!==null&&Po!==void 0?Po:"fade";this.userAction=Bn,this.stopMomentumMovement();var Xl=this.works.getResolvedObserver(yn);if(!Xl)throw new Error("Invalid PanoIndex");var Yl=yi(Xl.images.up),Zl=this.imageOptions.size;typeof Zl=="undefined"&&Xl&&Yl&&(Zl=Number(Yl)),typeof Zl=="undefined"&&(Zl=2048);var ey=this.imageOptions.transform,Rm=function(sy,cy){return og(En(sy,ey,cy))},ry=O$n({key:"pano.".concat(Xl.panoId)},Xt$2(this.imageOptions,["format","size","quality"])),_g=Xl.images,ty=(Io=(To=Xl.images.tiles)===null||To===void 0?void 0:To.filter(function(sy){return sy.size>Zl}))!==null&&Io!==void 0?Io:null,ny="pano:"+ba([_g,ry,ey]);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===ny)return;var iy=this.pendingTextureTask.panoId;($l=this.panoMeshes[iy])===null||$l===void 0||$l.setProgress(0),this.emit("pano.texture.abort",X$c("pano.texture.abort",{error:null,progress:0,meta:null,pano:Xl.pano}))}var oy=this.models.getMaterial()||{},ay=oy.pano0,uy=oy.pano1,hy;if((ay==null?void 0:ay.map.name)===ny?hy=ay:(uy==null?void 0:uy.map.name)===ny&&(hy=uy),hy){var my={panoId:Xl.panoId,effect:Wl,leftPanoPicture:{zoom:1,map:hy.map,luminanceMap:hy.luminanceMap,matrix:new Matrix4().compose(Xl.position,Xl.quaternion,ou)},position:Xl.position.clone(),fixCameraTransform:new Matrix4};this.doMoveToPano(Xl.pano,my,Rn);return}var ly="move-to-pano-"+Xl.panoId;this.pending.add(ly),this.pendingTextureTask={panoId:Xl.panoId,hash:ny,onLoad:function(sy){if(Co.pending.delete(ly),Co.destroyed)sy.body.dispose();else{sy.body.name=ny;var cy={panoId:Xl.panoId,effect:Wl,leftPanoPicture:{zoom:1,map:sy.body,luminanceMap:null,matrix:new Matrix4().compose(Xl.position,Xl.quaternion,ou)},position:Xl.position.clone(),fixCameraTransform:new Matrix4};Co.doMoveToPano(Xl.pano,cy,Rn)}},onError:function(sy){Co.pending.delete(ly);var cy=O$n(O$n(O$n({},Xl.pano),{mode:Co.mode}),$e(Co.camera.pose));Co.emit("pano.error",X$c("pano.error",{error:sy,userAction:Co.userAction,options:Rn,prevPano:Co.currentPano,progress:0,state:cy})),Co.emit("pano.cancel",X$c("pano.cancel",{error:null,userAction:Co.userAction,options:Rn,prevPano:Co.currentPano,progress:0,state:cy})),Rn.moveCancelCallback&&Rn.moveCancelCallback()}},Promise.all([this.tileLevelForFov&&ty&&ty.length?this.textureLoader.loadTiledCubeTexture(_g,ty,{tileMaxLevel:this.tiledCubeTextureLevel,imageURL:{transform:Rm,options:ry},format:RGBAFormat,minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1,viaAjax:!0,fetcher:gt$4(Xl.work)},void 0,void 0,function(sy){var cy,fy;Co.emit("pano.texture.progress",X$c("pano.texture.progress",{error:null,progress:sy,meta:null,pano:Xl.pano})),((cy=Co.pendingTextureTask)===null||cy===void 0?void 0:cy.hash)===ny&&((fy=Co.panoMeshes[Xl.panoId])===null||fy===void 0||fy.setProgress(sy))},this.renderer):this.textureLoader.loadCubeTexture(_g,{imageURL:{transform:Rm,options:ry},format:RGBAFormat,fetcher:gt$4(Xl.work)},void 0,void 0,function(sy){var cy,fy;((cy=Co.pendingTextureTask)===null||cy===void 0?void 0:cy.hash)===ny&&((fy=Co.panoMeshes[Xl.panoId])===null||fy===void 0||fy.setProgress(sy)),Co.emit("pano.texture.progress",X$c("pano.texture.progress",{error:null,progress:sy,meta:null,pano:Xl.pano}))},this.renderer)]).then(function(sy){var cy,fy,vy=sy[0];((cy=Co.pendingTextureTask)===null||cy===void 0?void 0:cy.hash)===ny?(Co.pendingTextureTask.onLoad(vy),(fy=Co.panoMeshes[Xl.panoId])===null||fy===void 0||fy.setProgress(0),delete Co.pendingTextureTask,Co.emit("pano.texture.success",X$c("pano.texture.success",{error:null,progress:1,meta:vy.meta,pano:Xl.pano}))):vy.body.dispose()}).catch(function(sy){var cy,fy;((cy=Co.pendingTextureTask)===null||cy===void 0?void 0:cy.hash)===ny&&(Co.pendingTextureTask.onError(sy),(fy=Co.panoMeshes[Xl.panoId])===null||fy===void 0||fy.setProgress(0),delete Co.pendingTextureTask,Co.emit("pano.texture.error",X$c("pano.texture.error",{error:sy,progress:0,meta:null,pano:Xl.pano})),Co.emit("error",sy))}),this.emit("pano.texture.load",X$c("pano.texture.load",{error:null,progress:0,meta:null,pano:Xl.pano}))},vn.prototype.doMoveToPano=function(yn,Rn,Bn){var Co=this,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm;Bn===void 0&&(Bn={});var ry=Ae$3(),_g=Lt$1();this.panoResources[_g]=Rn;var ty=1,ny,iy,oy;if(this.locationMotion.ended){var ay=this.locationMotion.getKeyFrameSegment(ry);ay[0];var uy=ay[1],hy=this.locationMotion.value,my=this.panoResourceFromLocationMotionKeyframe(uy).position,ly=Rn.position;ny=Math.max(my.distanceTo(ly),ty),iy=[{key:uy.key,progress:0,value:O$n(O$n({},hy),{count:0})},{key:_g,progress:1,value:{distance:0,count:1}}],oy=0}else{var sy=this.locationMotion.getKeyFrameSegment(ry),cy=sy[0],uy=sy[1],hy=this.locationMotion.value,fy=this.panoResourceFromLocationMotionKeyframe(cy).position,my=this.panoResourceFromLocationMotionKeyframe(uy).position,ly=Rn.position,vy=uy.value.count-hy.count,dy=Math.max(fy.distanceTo(my),ty)*vy,Ay=Math.max(my.distanceTo(ly),ty);ny=dy+Ay,iy=[{key:cy.key,progress:0,value:O$n({},hy)},{key:uy.key,progress:dy/ny,value:uy.value},{key:_g,progress:1,value:{count:uy.value.count+1,distance:0}}];var gy=this.locationMotionKeyframesLength(this.locationMotion.keyframes),wy=this.locationMotionKeyframesLength(iy);oy=this.locationMotion.getProgressVelocity(ry)*gy/wy}var Cy=Rn.effect==="instant"?0:this.calculateMovingDuration(Bn.duration,Rn.effect==="fly"?ny:0),My={longitude:Bn.longitude,latitude:Bn.latitude,fov:Bn.fov},Py=O$n(O$n({},yn),{mode:this.mode,longitude:(Po=My.longitude)!==null&&Po!==void 0?Po:this.camera.pose.longitude,latitude:(To=My.latitude)!==null&&To!==void 0?To:this.camera.pose.latitude,fov:(Io=My.fov)!==null&&Io!==void 0?Io:this.camera.pose.fov,offset:Rn.position.clone(),distance:0}),Dy=this.currentPano;if(this.emit("pano.moveTo",X$c("pano.moveTo",{options:Bn,prevPano:Dy,progress:0,state:Py,userAction:this.userAction,error:null})),Bn.moveStartCallback&&Bn.moveStartCallback(Py),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=q$q,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),Rn.effect==="fly")this.cameraMotion.set(My,Cy).catch(q$q);else{var qy=Ut$1({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude}),Xy=Ut$1({longitude:($l=My.longitude)!==null&&$l!==void 0?$l:this.cameraMotion.value.longitude,latitude:(Wl=My.latitude)!==null&&Wl!==void 0?Wl:this.cameraMotion.value.latitude}),$y=new Object3D;$y.lookAt(qy);var xy=new Matrix4().makeRotationFromQuaternion($y.quaternion);$y.lookAt(Xy);var Ry=new Matrix4().makeRotationFromQuaternion($y.quaternion),Ly=new Matrix4().getInverse(xy).premultiply(Ry),ky=this.cameraMotion.value.fov,Ey=(Xl=My.fov)!==null&&Xl!==void 0?Xl:this.cameraMotion.value.fov,Iy=1;Rn.effect==="zoomin"?Iy=1.5:Rn.effect==="zoomout"&&(Iy=.4);for(var zy=Ey*Iy,Uy=0;Uy<iy.length-1;Uy++){var Qy=iy[Uy].key;if(Qy){var Gy=this.panoResources[Qy];Gy&&(Gy.fixCameraTransform.copy(Ly),Gy.leftPanoPicture&&(Gy.leftPanoPicture.zoom=Math.tan(ky/2/180*Math.PI)/Math.tan(zy/2/180*Math.PI)))}}this.cameraMotion.setKeyframes([{progress:0,value:{longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude,fov:this.cameraMotion.value.fov}},{progress:0,value:{longitude:(Yl=My.longitude)!==null&&Yl!==void 0?Yl:this.cameraMotion.value.longitude,latitude:(Zl=My.latitude)!==null&&Zl!==void 0?Zl:this.cameraMotion.value.latitude,fov:zy}},{progress:1,value:{longitude:(ey=My.longitude)!==null&&ey!==void 0?ey:this.cameraMotion.value.longitude,latitude:(Rm=My.latitude)!==null&&Rm!==void 0?Rm:this.cameraMotion.value.latitude,fov:Ey}}],Cy).catch(q$q)}var Zy=this.locationMotion.setKeyframes(iy,Cy,oy);Zy.then(function(){for(var Ty,Vy,Yy,Jy=0,Hy=Co.models;Jy<Hy.length;Jy++){var i1=Hy[Jy];i1.show()}var u1=O$n(O$n({},yn),{mode:Co.mode,longitude:Co.camera.pose.longitude,latitude:Co.camera.pose.latitude,fov:Co.camera.pose.fov,offset:Co.camera.pose.offset.clone(),distance:0});Co.emit("pano.arrived",X$c("pano.arrived",{options:Bn,prevPano:Dy,progress:1,state:u1,userAction:Co.userAction,error:null})),Bn.moveEndCallback&&Bn.moveEndCallback(u1);var p1=Co.works.getResolvedObserver(Co.currentPano);if(p1&&p1.video&&Co.videoTexture&&Co.videoTexture.image instanceof HTMLVideoElement){var g1=sg.clone().multiply((Yy=(Vy=(Ty=Co.models.getMaterial())===null||Ty===void 0?void 0:Ty.pano1)===null||Vy===void 0?void 0:Vy.matrix)!==null&&Yy!==void 0?Yy:new Matrix4).multiply(p1.video.matrix),v1={map:Co.videoTexture,size:p1.video.size,matrix:g1,alpha:1},h1=Lt$1(),l1=Co.videoTexture.image;l1.setAttribute("uuid",h1),kl().then(function(o1){o1&&p1.video&&l1.getAttribute("uuid")===h1&&(l1.oncanplay=function(){l1.oncanplay=q$q,l1.play()},l1.ontimeupdate=function(){l1.currentTime>.5&&(l1.ontimeupdate=q$q,Co.panoVideo.setMaterial(v1))},l1.src=p1.video.source)}).catch(function(){l1.removeAttribute("uuid")})}},function(){Co.emit("pano.cancel",X$c("pano.cancel",{options:Bn,prevPano:Dy,progress:0,state:Py,userAction:Co.userAction,error:null})),Bn.moveCancelCallback&&Bn.moveCancelCallback()})},vn.prototype.checkSelectedPano=function(yn){var Rn=this,Bn,Co,Po,To;this.stopMomentumMovement();var Io=this.camera.getDirection(new Vector3).setY(0),$l=null,Wl=this.works.getResolvedObserver(this.currentPano);if(!Wl)return null;var Xl=Wl.accessibleIds.filter(function(Xy){var $y=Qt$2(Xy);if(Or$1($y,Rn.currentPano))return!1;var xy=Rn.works.getResolvedObserver($y);return!xy||xy.position.distanceTo(Rn.camera.position)>Rn.maxAccessibleDistance?!1:xy.loadable||xy.active}),Yl=this.models.intersectRaycaster(yn)[0];if(Yl){var Zl=zr$1(Xl,function(Xy){var $y=Rn.works.getResolvedObserver(Xy);if(!$y)return 1/0;var xy=$y.standingPosition.clone();return xy.distanceTo(Yl.point)},!0),ey=Zl[0],Rm=Zl[1];ey&&Rm<this.panoTapTriggerRadius&&($l=(Bn=this.works.getResolvedObserver(ey))!==null&&Bn!==void 0?Bn:null)}if(eu($l)){var ry=this.getForwardObserverOrNot(yn);ry&&($l=ry)}for(var _g=0,ty=this.locationMotion.keyframes;_g<ty.length;_g++){var ny=ty[_g],iy=this.panoResourceFromLocationMotionKeyframe(ny);if(!(ny.progress<this.locationMotion.progress)&&$l&&iy.panoId===$l.panoId){$l=null;break}}if(eu($l))return this.locationMotion.ended===!0&&this.cameraBounce(),null;if($l&&!$l.active){var oy=$l.panoId;this.panoMeshes[oy]&&(this.panoMeshes[oy].setDisabled(!1),this.panoMeshes[oy].setLoading(!0))}var ay={};if($l){for(var uy=Math.PI/6,hy=Math.PI/12,my=new Vector3(0,1,0),ly=$l.position.clone().setY(0).sub(Wl.position.clone().setY(0)).normalize(),sy=ly.clone().applyAxisAngle(my,uy),cy=ly.clone().applyAxisAngle(my,-uy),fy=[],vy=[],dy=[],Ay=0,gy=$l.accessibleIds;Ay<gy.length;Ay++){var ey=gy[Ay],wy=Qt$2(ey);if(!(Or$1(wy,this.currentPano)||Or$1(wy,$l.pano))){var Cy=this.works.getResolvedObserver(ey);if(Cy){var My=Cy.position.clone().sub($l.position).setY(0);ly.angleTo(My)<uy?dy.push(My):sy.angleTo(My)<uy?fy.push(My):cy.angleTo(My)<uy&&vy.push(My)}}}var Py=dy.length>0?dy:yt$3(yt$3([],fy,!0),vy,!0),Dy=Py.slice().sort(function(Xy,$y){return Xy.angleTo(ly)-$y.angleTo(ly)})[0];Dy&&Dy.angleTo(Io)>hy&&(ay.longitude=Math.atan2(-Dy.x,-Dy.z))}this.cameraMotion.value.latitude<-Math.PI/4&&(ay.latitude=pe$4(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(ay.fov=this.defaultFov);var qy={workCode:$l.pano.workCode,panoIndex:$l.pano.panoIndex,mode:this.mode,longitude:(Co=ay.longitude)!==null&&Co!==void 0?Co:this.camera.pose.longitude,latitude:(Po=ay.latitude)!==null&&Po!==void 0?Po:this.camera.pose.latitude,fov:(To=ay.fov)!==null&&To!==void 0?To:this.camera.pose.fov,distance:0,offset:$l?$l.position.clone():new Vector3};return this.emit("pano.select",X$c("pano.select",{prevPano:this.currentPano,state:qy,userAction:!0,options:ay,progress:0,error:null})),$l&&$l.active?(this.emit("pano.request",X$c("pano.request",{userAction:!0,prevPano:this.currentPano,progress:0,state:qy,options:ay,error:null})),$l.pano):null},vn.prototype.destroy=function(){cr.prototype.destroy.call(this)},vn.prototype.isReady=function(){return!1},vn.prototype.updateCamera=function(yn,Rn,Bn){return Promise.resolve()},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){return Promise.resolve()},vn.prototype.updateTime=function(yn,Rn){for(var Bn=this,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl=[],ey=2;ey<arguments.length;ey++)Zl[ey-2]=arguments[ey];this.userAction=!0;var Rm={},ry={},_g=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ty=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),ny=!1;if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(yn),ry.longitude=this.cameraMotion.value.longitude,ry.latitude=this.cameraMotion.value.latitude,ry.fov=this.cameraMotion.value.fov),this.modelAlphaMotion.ended===!1&&(this.modelAlphaMotion.update(yn),Rm.modelAlpha=this.modelAlphaMotion.value.modelAlpha),this.perspToOrthoMotion.ended===!1&&(this.perspToOrthoMotion.update(yn),this.camera.perspToOrtho.setScalar(pe$4(this.perspToOrthoMotion.value.perspToOrtho,0,1))),this.locationMotion.ended===!1){this.locationMotion.update(yn);var iy=this.locationMotion.getKeyFrameSegment(yn),oy=iy[0],ay=iy[1],uy=this.panoResourceFromLocationMotionKeyframe(oy),hy=this.panoResourceFromLocationMotionKeyframe(ay),my=new Vector3().copy(uy.position),ly=new Vector3().copy(hy.position),sy=this.locationMotion.value.count-ay.value.count+1;Rm.progress=sy,hy.leftPanoPicture&&(sy<1?uy.leftPanoPicture&&(Rm.pano0=uy.leftPanoPicture):Rm.pano0=hy.leftPanoPicture,Rm.pano1=hy.leftPanoPicture),hy.effect==="montage"?Rm.transition="BLACK":hy.effect==="spread"?Rm.transition="SPREAD":Rm.transition="FADE",(hy.effect==="zoomin"||hy.effect==="zoomout")&&(Rm.progress=Math.pow(sy,3)),sy<1&&hy.effect!=="fly"&&(Rm.pano0&&uy.leftPanoPicture&&(Rm.pano0={map:Rm.pano0.map,zoom:Rm.pano0.zoom,luminanceMap:Rm.pano0.luminanceMap,matrix:uy.leftPanoPicture.matrix.clone().setPosition(hy.position)}),my.copy(ly),ny=!0),ry.distance=this.locationMotion.value.distance,ry.offset=new Vector3(my.x+(ly.x-my.x)*sy,my.y+(ly.y-my.y)*sy,my.z+(ly.z-my.z)*sy);for(var cy=[],fy=[],vy=0,dy=this.locationMotion.keyframes;vy<dy.length;vy++){var Ay=dy[vy],gy=Ay.key,wy=Ay.progress;gy!==void 0&&(cy.push(gy),wy>this.locationMotion.progress&&fy.push(gy))}for(var Cy=0,My=Object.keys(this.panoResources);Cy<My.length;Cy++){var Py=My[Cy];if(!(fy.indexOf(Py)>=0)){var Dy=this.panoResources[Py];if(Dy.leftPanoPicture){var qy=Dy.leftPanoPicture.map;if(qy){if(qy===((Co=Rm.pano0)===null||Co===void 0?void 0:Co.map)||qy===((Po=Rm.pano1)===null||Po===void 0?void 0:Po.map))continue;qy instanceof Ge$3&&qy.cubeRenderTarget&&this.colorCubeRenderTargetPool.push(qy.cubeRenderTarget),qy.dispose(),Dy.leftPanoPicture=null}}cy.indexOf(Py)>=0||delete this.panoResources[Py]}}this.currentPano=Qt$2(hy.panoId),this.emit("pano.moving",X$c("pano.moving",{userAction:this.userAction,prevPano:Qt$2(_g.panoId),state:O$n(O$n(O$n(O$n({},Qt$2(ty.panoId)),{mode:this.mode}),$e(this.camera.pose)),ry),options:{},progress:this.locationMotion.progress,error:null}))}lr$1(Rm)===!1&&(!((To=Rm.pano0)===null||To===void 0)&&To.map&&Rm.pano0.map instanceof Ge$3&&!Rm.pano0.map.cubeRenderTarget&&(Rm.pano0.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),!((Io=Rm.pano1)===null||Io===void 0)&&Io.map&&Rm.pano1.map instanceof Ge$3&&!Rm.pano1.map.cubeRenderTarget&&(Rm.pano1.map.cubeRenderTarget=this.colorCubeRenderTargetPool.pop()),this.models.setMaterial(Rm)),lr$1(ry)===!1&&this.setCamera(ry);var Xy=this.works.getResolvedObserver(this.currentPano),$y=Zl[1];if(!$y){console.error("xrFrame\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");return}if(!this.xrManager.session){console.error("session\u4E22\u5931\uFF0C\u8BF7\u91CD\u8BD5");return}var xy=this.xrManager.referenceSpace;if(xy){var Ry=this.xrManager.cameraVR,Ly=this.xrManager.cameraL,ky=this.xrManager.cameraR,Ey=[Ly,ky],Iy=$y.getViewerPose(xy),zy=new Vector3(0,0,0);if(Iy){var Uy;Uy=this.xrManager.session.renderState.baseLayer;var Qy=Iy.views;if(!Uy){console.error("no layer found");return}this.renderer.setFramebuffer(Uy.framebuffer);var Gy=!1;Qy.length!==Ry.cameras.length&&(Ry.cameras.length=0,Gy=!0),this.parallaxCameraMatrixs=[];var Zy=new Vector3,Ty=new Vector3;new Matrix4().fromArray(Qy[0].transform.matrix).decompose(Zy,new Quaternion,new Vector3),new Matrix4().fromArray(Qy[1].transform.matrix).decompose(Ty,new Quaternion,new Vector3),Ty.clone().sub(Zy).normalize();var Vy=new Vector3,Yy=new Quaternion,Jy=new Vector3;this.camera.matrix.decompose(Vy,Yy,Jy);for(var Hy=0;Hy<Qy.length;Hy++){var i1=Qy[Hy],u1=Uy.getViewport(i1),p1=Ey[Hy];p1.matrix.fromArray(i1.transform.matrix);var g1=new Vector3,v1=new Quaternion,h1=new Vector3;p1.matrix.decompose(g1,v1,h1),zy.copy(Vy),p1.position.copy(Vy),p1.quaternion.copy(v1),p1.scale.copy(h1),p1.updateMatrix(),p1.projectionMatrix.fromArray(i1.projectionMatrix),p1.viewport.set(u1.x,u1.y,u1.width,u1.height),Gy===!0&&Ry.cameras.push(p1)}if(this.xrManager.session&&this.xrManager.session.inputSources){for(var Hy=0;Hy<this.xrManager.session.inputSources.length;Hy++)if(this.xrManager.session.inputSources[Hy]&&this.xrManager.session.inputSources[Hy].targetRayMode==="transient-pointer"){var l1=$y.getPose(this.xrManager.session.inputSources[Hy].targetRaySpace,xy);if(l1){var o1=new Vector3(0,0,-1).applyQuaternion(l1.transform.orientation),t1=new Raycaster(this.camera.position,o1);this.gazeRay=t1}}}if(this.xrManager.machineType==="Oculus"||this.xrManager.machineType==="Pico"){for(var Wy=this.xrManager.session.inputSources,Hy=0;Hy<Wy.length;Hy++){var f1=this.xrManager.controllers[Hy],m1=Wy[Hy];if(m1){f1&&f1.update(m1,$y,xy);var t1=this.xrManager.getController(Hy),w1=new Vector3(0,1.2,0),c1=t1.position.clone().add(zy).sub(w1);m1.handedness==="left"?this.xrControllerRay.left.set(c1,new Vector3(0,0,-1).applyEuler(t1.rotation)):m1.handedness==="right"&&this.xrControllerRay.right.set(c1,new Vector3(0,0,-1).applyEuler(t1.rotation)),this.controllerWrappers[Hy].position.copy(new Vector3(0,0,0).add(zy).sub(w1));var M1=this.models.intersectRaycaster(this.xrControllerRay.right);if(M1.length===0&&(M1=this.xrControllerRay.right.intersectObject(this.boundingMesh,!0).map(function(nx){var J1;return O$n({floor:(J1=Xy==null?void 0:Xy.floorIndex)!==null&&J1!==void 0?J1:0},nx)})),M1.length>=1&&M1[0].face)if(m1.handedness==="right"){var L1=this.xrControllerRay.right.intersectObject(this.xrCustomObjectsScene,!0),B1=M1[0].face.normal,D1=B1.clone(),O1=M1[0].point.clone();this.intersectMesh.position.copy(O1);var j1=O1.clone().add(D1);if(this.intersectMesh.lookAt(j1),Math.abs(B1.y)>.99){var k1=this.camera.position.clone().sub(O1);this.intersectMesh.rotation.z=-Math.atan2(k1.z,k1.x)}this.intersectMesh.visible=!0,this.needsRender=!0,L1.length>0?(this.pointerLines.right.setPoints(c1,L1[0].point),this.pointerLines.right.points.visible=!0,this.intersectMesh.visible=!1):(this.pointerLines.right.points.visible=!1,this.pointerLines.right.setPoints(c1,M1[0].point));var q1=M1[0],_b=X$c("intersect.update",{raycaster:($l=this.xrControllerRay.right)!==null&&$l!==void 0?$l:null,intersection:q1!=null?q1:null,object:this.intersectMesh});if(this.emit("intersect.update",_b),_b.defaultPrevented){this.hideIntersectMesh();return}}else this.pointerLines.left.setPoints(c1,M1[0].point)}}this.updateControllerHelper(Wy,yn,Rn)}if(this.camera.pose.distance>.1||ny)for(var Q1=0,Y1=Object.keys(this.panoMeshes);Q1<Y1.length;Q1++){var jy=Y1[Q1],r1=this.panoMeshes[jy];r1.setOpacity(0),r1.setCurrent(!1),r1.updateTime&&r1.updateTime(yn,Rn),r1.visible=!1}else if(Xy){var n1=zr$1(Xy.visibleIds,function(Z1){var H1=Bn.works.getResolvedObserver(Z1);return H1?Xy.standingPosition.distanceTo(H1.standingPosition):1/0},!0),a1=n1[1];a1=pe$4(a1,2.5,1/0);for(var y1=Xy.visibleIds.concat(_e$3(this.currentPano)),_1=this.getForwardObserverOrNot(),E1=this.camera.getDirection(new Vector3),b1=0,S1=Object.keys(this.panoMeshes);b1<S1.length;b1++){var jy=S1[b1],r1=this.panoMeshes[jy],x1=this.works.getResolvedObserver(jy);if(y1.indexOf(jy)===-1)r1.setCurrent(!1),r1.setOpacity(0);else if(!x1)r1.setCurrent(!1),r1.setOpacity(0);else if(!x1.loadable&&!x1.active)r1.setCurrent(!1),r1.setOpacity(0);else{var W1=r1.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);r1.setCurrent(!r1.loading&&r1.progress===0&&_1!==null&&_1.panoId===jy),r1.setOpacity(W1<.01?0:pe$4(a1/W1*1.2,.65,.98));var N1=this.camera.position.clone().setY(r1.position.y),o1=new Vector3().copy(r1.position).sub(N1).normalize();if(jy===_e$3(this.currentPano)){var R1=pe$4((.5-N1.distanceTo(r1.position))/.5,0,1);o1.multiplyScalar(1-R1).add(E1.clone().multiplyScalar(R1))}o1.length()>0&&r1.quaternion.setFromEuler(new Euler(0,Math.atan2(o1.x,o1.z),0))}r1.updateTime&&r1.updateTime(yn,Rn)}}var $1=function(){return 4}(),C1=function(){var Z1=new PerspectiveCamera;Z1.applyMatrix4(Ry.matrix),Z1.position.set(0,0,0);var H1=Bn.works.getResolvedObserver(ty.panoId),nx=H1!=null?H1:Xy;nx&&Z1.quaternion.premultiply(nx.quaternion.clone().inverse()),Z1.updateProjectionMatrix(),Z1.updateMatrixWorld(!0);var J1=new Frustum().setFromProjectionMatrix(new Matrix4().multiplyMatrices(Z1.projectionMatrix,Z1.matrixWorldInverse));return J1}();ty.panoId===_e$3(this.currentPano)&&((Wl=ty.leftPanoPicture)===null||Wl===void 0?void 0:Wl.map)instanceof Ge$3&&(ty.leftPanoPicture.map.maxRequest=this.tileMaxRequest,ty.leftPanoPicture.map.update(C1,$1),ty.leftPanoPicture.map.needsRender===!0&&(this.needsRender=!0,this.modelSceneNeedsRender=!0));{var T1=this.tiling.object.visible;if(this.initAnimationed){var F1=ty.panoId,z1=this.works.getResolvedObserver(F1);z1?Oi(this.camera.position,z1.position)&&this.locationMotion.ended?(this.tiling.object.visible=!0,this.tiling.panoId!==F1&&this.tiling.cleanup(),this.tiling.panoId=F1,this.tiling.setResource((Yl=(Xl=z1.images)===null||Xl===void 0?void 0:Xl.tiles)!==null&&Yl!==void 0?Yl:[],this.enableIOSEDR&&z1.images.luminance?z1.images.luminance:null),this.tiling.setFetcher(gt$4(z1.work)),this.tiling.setRotation(z1.quaternion),this.tiling.setPosition(z1.position),this.tiling.maxRequest=this.tileMaxRequest,$1>this.tiledCubeTextureLevel?this.tiling.update(C1,$1,yn):this.tiling.update(C1,0,yn)):this.tiling.object.visible=!1:this.tiling.object.visible=!1}else this.tiling.object.visible=!1;T1!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0,this.modelSceneNeedsRender=!0)}this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(yn)}}},vn.prototype.render=function(){var yn=this.xrManager.getCamera(this.camera);this.renderer.render(this.modelScene,yn),this.renderer.autoClearColor=!1,this.renderer.autoClearDepth=!1,this.renderer.render(this.scene,yn),this.renderer.autoClearColor=!0,this.renderer.autoClearDepth=!0},vn.prototype.onPanGesture=function(){},vn.prototype.onTapGesture=function(){},vn.prototype.onPinchGesture=function(){},vn.prototype.onMouseMove=function(){},vn.prototype.onMouseOut=function(){},vn.prototype.panoResourceFromLocationMotionKeyframe=function(yn){return this.panoResources[yn.key]},vn.prototype.updateControllerHelper=function(yn,Rn,Bn){var Co=this.xrControllerRay.left,Po=this.xrControllerRay.right;if(!(!yn||yn.length===0)){for(var To={buttons:{X:!1,Y:!1,LeftTrigger:!1,LeftPinch:!1,A:!1,B:!1,RightTrigger:!1,RightPinch:!1}},Io=0;Io<yn.length;Io++){var $l=yn[Io].handedness,Wl=yn[Io].gamepad;switch($l){case"left":Wl.axes&&(this.emitHandleEvent(Wl.axes[2]===-1,"LeftAxesLeft",Rn),this.emitHandleEvent(Wl.axes[2]===1,"LeftAxesRight",Rn),this.emitHandleEvent(Wl.axes[3]===-1,"LeftAxesUp",Rn),this.emitHandleEvent(Wl.axes[3]===1,"LeftAxesDown",Rn)),Wl!=null&&Wl.buttons&&(Wl.buttons[4]&&this.emitHandleEvent(Wl.buttons[4].pressed,"X",Rn),Wl.buttons[5]&&this.emitHandleEvent(Wl.buttons[5].pressed,"Y",Rn),Wl.buttons[0]&&this.emitHandleEvent(Wl.buttons[0].pressed,"LeftTrigger",Rn),Wl.buttons[1]&&this.emitHandleEvent(Wl.buttons[1].pressed,"LeftPinch",Rn));var Xl={raycaster:Co,axes:{up:Wl.axes&&Wl.axes[3]<0?Math.abs(Wl.axes[3]):0,down:Wl.axes&&Wl.axes[3]<0?0:Math.abs(Wl.axes[3]),left:Wl.axes&&Wl.axes[2]<0?Math.abs(Wl.axes[2]):0,right:Wl.axes&&Wl.axes[2]<0?0:Math.abs(Wl.axes[2])},deltaTime:Bn};To.buttons.X=Wl.buttons&&Wl.buttons[4]?Wl.buttons[4].pressed:!1,To.buttons.Y=Wl.buttons&&Wl.buttons[5]?Wl==null?void 0:Wl.buttons[5].pressed:!1,To.buttons.LeftTrigger=Wl.buttons&&Wl.buttons[0]?Wl==null?void 0:Wl.buttons[0].pressed:!1,To.buttons.LeftPinch=Wl.buttons&&Wl.buttons[1]?Wl==null?void 0:Wl.buttons[1].pressed:!1,To.left=Xl;break;case"right":Wl.axes&&(this.emitHandleEvent(Wl.axes[2]===-1,"RightAxesLeft",Rn),this.emitHandleEvent(Wl.axes[2]===1,"RightAxesRight",Rn),this.emitHandleEvent(Wl.axes[3]===-1,"RightAxesUp",Rn),this.emitHandleEvent(Wl.axes[3]===1,"RightAxesDown",Rn)),Wl.buttons&&(Wl.buttons[4]&&this.emitHandleEvent(Wl.buttons[4].pressed,"A",Rn),Wl.buttons[5]&&this.emitHandleEvent(Wl.buttons[5].pressed,"B",Rn),Wl.buttons[0]&&this.emitHandleEvent(Wl.buttons[0].pressed,"RightTrigger",Rn),Wl.buttons[1]&&this.emitHandleEvent(Wl.buttons[1].pressed,"RightPinch",Rn));var Yl={raycaster:Po,axes:{up:Wl.axes&&Wl.axes[3]<0?Math.abs(Wl.axes[3]):0,down:Wl.axes&&Wl.axes[3]<0?0:Math.abs(Wl.axes[3]),left:Wl.axes&&Wl.axes[2]<0?Math.abs(Wl.axes[2]):0,right:Wl.axes&&Wl.axes[2]<0?0:Math.abs(Wl.axes[2])},deltaTime:Bn};To.right=Yl,To.buttons.A=Wl.buttons&&Wl.buttons[4]?Wl==null?void 0:Wl.buttons[4].pressed:!1,To.buttons.B=Wl.buttons&&Wl.buttons[5]?Wl==null?void 0:Wl.buttons[5].pressed:!1,To.buttons.RightTrigger=Wl.buttons&&Wl.buttons[0]?Wl==null?void 0:Wl.buttons[0].pressed:!1,To.buttons.RightPinch=Wl.buttons&&Wl.buttons[1]?Wl==null?void 0:Wl.buttons[1].pressed:!1;break}}this.emit("xr.controller.update",X$c("xr.controller.update",To))}},vn.prototype.emitHandleEvent=function(yn,Rn,Bn){var Co=this.xrControllerRay.left,Po=this.xrControllerRay.right;if(yn)if(this.xrHandleState[Rn].touchStart===!1)this.xrHandleState[Rn].touchStartTime=Bn,this.xrHandleState[Rn].touchStart=!0,this.emit("xr.gesture.buttonDown",X$c("xr.gesture.buttonDown",{session:this.xrManager.session,machineType:this.xrManager.machineType,buttons:Rn,isFinal:!1,isFirst:!0,controllers:{raycaster:{leftRay:Co,rightRay:Po}}}));else{var To=Bn-this.xrHandleState[Rn].touchStartTime;To>au&&this.emit("xr.gesture.press",X$c("xr.gesture.tap",{session:this.xrManager.session,machineType:this.xrManager.machineType,buttons:Rn,isFinal:!0,isFirst:!0,controllers:{raycaster:{leftRay:Co,rightRay:Po}}}))}else if(this.xrHandleState[Rn].touchStart===!0){this.emit("xr.gesture.buttonUp",X$c("xr.gesture.buttonUp",{session:this.xrManager.session,machineType:this.xrManager.machineType,buttons:Rn,isFinal:!0,isFirst:!1,controllers:{raycaster:{leftRay:Co,rightRay:Po}}}));var To=Bn-this.xrHandleState[Rn].touchStartTime;if(To<=au){var Io=X$c("xr.gesture.tap",{session:this.xrManager.session,machineType:this.xrManager.machineType,buttons:Rn,isFinal:!0,isFirst:!1,controllers:{raycaster:{leftRay:Co,rightRay:Po}}}),$l=this.emit("xr.gesture.tap",Io);!$l&&!Io.defaultPrevented&&Rn==="RightTrigger"&&this.checkSelectedPano(this.xrControllerRay.right)}this.xrHandleState[Rn].touchStart=!1,this.xrHandleState[Rn].touchStartTime=0}},vn.prototype.initHandEvent=function(){var yn=this;if(!this.xrManager.session)throw new Error("\u521D\u59CB\u5316\u5931\u8D25");this.xrManager.session.addEventListener("select",function(Rn){yn.gazeRay&&yn.checkSelectedPano(yn.gazeRay)})},vn}(bo),vt$3={Floorplan:Q0,Topview:Bm,Panorama:bo,VRPanorama:EA$1,Model:TA,Mapview:NA,XRPanorama:ug},lg=["gesture.pan","gesture.tap","gesture.dbltap","gesture.press","gesture.pinch","gesture.mousewheel","gesture.mousemove","gesture.momentum","initAnimation.start","initAnimation.end","camera.update","intersect.update","pano.select","pano.moveTo","pano.moving","pano.arrived","pano.cancel","pano.error","pano.texture.load","pano.texture.progress","pano.texture.success","pano.texture.error","pano.texture.abort","xr.session.start","xr.session.end","xr.gesture.tap","xr.gesture.press","xr.gesture.buttonUp","xr.gesture.buttonDown","xr.controller.update"];function cg(cr){cr.on("initAnimation.start",function(vn){cr.emit("initAnimationWillStart",vn.state.panoIndex,vn.state,vn.userAction)}),cr.on("initAnimation.end",function(vn){cr.emit("initAnimationEnded",vn.state.panoIndex,vn.state,vn.userAction)}),cr.on("gesture.pan",function(vn){var yn=!1;yn=cr.emit("wantsGesture","pan",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsPanGesture",vn.state,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","pan",vn.pointers,vn.isFinal),cr.emit("panGesture",vn.state,vn.isFinal))}),cr.on("gesture.tap",function(vn){var yn=!1;yn=cr.emit("wantsGesture","tap",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsTapGesture",vn.center.raycaster,vn.center.coords,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","tap",vn.pointers,vn.isFinal),cr.emit("tapGesture",vn.center.raycaster,vn.center.coords,vn.isFinal))}),cr.on("gesture.dbltap",function(vn){var yn=!1;yn=cr.emit("wantsGesture","dbltap",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsDblTapGesture",vn.center.raycaster,vn.center.coords,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","dbltap",vn.pointers,vn.isFinal),cr.emit("dblTapGesture",vn.center.raycaster,vn.center.coords,vn.isFinal))}),cr.on("gesture.press",function(vn){var yn=!1;yn=cr.emit("wantsGesture","press",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsPressGesture",vn.center.raycaster,vn.center.coords,vn.center.delta,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","press",vn.pointers,vn.isFinal),cr.emit("pressGesture",vn.center.raycaster,vn.center.coords,vn.center.delta,vn.isFinal))}),cr.on("gesture.pinch",function(vn){var yn=!1;yn=cr.emit("wantsGesture","pinch",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsPinchGesture",vn.scale,vn.state.fov,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","pinch",vn.pointers,vn.isFinal),cr.emit("pinchGesture",vn.scale,vn.state.fov,vn.isFinal))}),cr.on("gesture.mousewheel",function(vn){var yn=!1;yn=cr.emit("wantsGesture","mouseWheel",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),yn=cr.emit("wantsMouseWheel",vn.center.delta,vn.state.fov,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","mouseWheel",vn.pointers,vn.isFinal),cr.emit("mouseWheel",vn.center.delta,vn.state.fov,vn.isFinal))}),cr.on("gesture.mousemove",function(vn){var yn=!1;yn=cr.emit("wantsGesture","mouseMove",vn.pointers,vn.isFinal),yn&&vn.preventDefault(),vn.defaultPrevented||(cr.emit("gesture","mouseMove",vn.pointers,vn.isFinal),yn=cr.emit("wantsChangeCameraFov",vn.state.fov),yn&&vn.preventDefault())}),cr.on("gesture.momentum",function(vn){var yn=!1;yn=cr.emit("wantsInteriaPan",vn.state),yn&&vn.preventDefault(),vn.defaultPrevented||cr.emit("interiaPan",vn.state,vn.isFinal)}),cr.on("camera.update",function(vn){cr.emit("cameraFovUpdate",vn.state.fov,vn.userAction),cr.emit("cameraDirectionUpdate",vn.state,vn.userAction);var yn=Ut$1(vn.state);yn.setLength(vn.state.distance);var Rn=vn.state.offset.clone().sub(yn);cr.emit("cameraPositionUpdate",Rn,vn.userAction),cr.emit("cameraUpdate",vn.state,vn.userAction)}),cr.on("intersect.update",function(vn){if(vn.intersection){var yn=!1;yn=cr.emit("wantsShowIntersectionOnModel",vn.raycaster),yn&&vn.preventDefault(),vn.defaultPrevented||cr.emit("intersectionOnModelUpdate",vn.intersection,vn.object)}else cr.emit("intersectionHidden")}),cr.on("pano.request",function(vn){var yn=cr.emit("wantsMoveToPano",vn.state.panoIndex,vn.options,vn.userAction);yn||(yn=cr.emit("wantsToMoveToPano",vn.state.panoIndex,vn.options,vn.userAction)),yn&&vn.preventDefault(),vn.defaultPrevented||cr.emit("panoWillLoad",vn.state.panoIndex)}),cr.on("pano.select",function(vn){cr.emit("panoSelected",vn.state.panoIndex)}),cr.on("pano.moveTo",function(vn){cr.emit("panoLoaded",vn.state.panoIndex),cr.emit("moveToPano",vn.state.panoIndex,vn.userAction),cr.emit("panoWillArrive",vn.state.panoIndex,vn.state,vn.userAction)}),cr.on("pano.moving",function(vn){cr.emit("movingToPano",vn.state.panoIndex,vn.prevPano.panoIndex,vn.progress)}),cr.on("pano.arrived",function(vn){cr.emit("panoArrived",vn.state.panoIndex,vn.state,vn.userAction)}),cr.on("pano.cancel",function(vn){cr.emit("moveToPanoCanceled",vn.state.panoIndex)}),cr.on("pano.error",function(vn){cr.emit("panoLoadError",vn.error,vn.state.panoIndex)}),cr.on("pano.texture.load",function(vn){cr.emit("textureStartLoad",vn.pano.panoIndex)}),cr.on("pano.texture.success",function(vn){cr.emit("textureLoaded",vn.pano.panoIndex,vn.meta)}),cr.on("pano.texture.error",function(vn){cr.emit("textureError",vn.error,vn.pano.panoIndex)}),cr.on("pano.texture.abort",function(vn){cr.emit("textureAbort",vn.pano.panoIndex)}),cr.on("pano.texture.progress",function(vn){cr.emit("textureLoading",vn.progress,vn.pano.panoIndex)}),cr.on("xr.session.start",function(vn){cr.emit("webXRSessionStart")}),cr.on("xr.session.end",function(vn){cr.emit("webXRSessionEnd")}),cr.on("xr.gesture.tap",function(vn){cr.emit("webXRControllerEvent","tap",vn.buttons,{raycaster:vn.controllers.raycaster})}),cr.on("xr.gesture.press",function(vn){cr.emit("webXRControllerEvent","press",vn.buttons,{raycaster:vn.controllers.raycaster})}),cr.on("xr.gesture.buttonUp",function(vn){cr.emit("webXRControllerEvent","buttonUp",vn.buttons,{raycaster:vn.controllers.raycaster})}),cr.on("xr.gesture.buttonDown",function(vn){cr.emit("webXRControllerEvent","buttonDown",vn.buttons,{raycaster:vn.controllers.raycaster})}),cr.on("xr.controller.update",function(vn){cr.emit("webXRControllerRayUpdate",{leftRay:vn.left?vn.left.raycaster:void 0,rightRay:vn.right?vn.right.raycaster:void 0}),vn.left&&cr.emit("webXRAxesUpdate","left",{raycaster:{leftRay:vn.left?vn.left.raycaster:void 0,rightRay:vn.right?vn.right.raycaster:void 0},axesState:{up:vn.left.axes.up,down:vn.left.axes.down,left:vn.left.axes.left,right:vn.left.axes.right},deltaTime:vn.left.deltaTime}),vn.right&&cr.emit("webXRAxesUpdate","right",{raycaster:{leftRay:vn.left?vn.left.raycaster:void 0,rightRay:vn.right?vn.right.raycaster:void 0},axesState:{up:vn.right.axes.up,down:vn.right.axes.down,left:vn.right.axes.left,right:vn.right.axes.right},deltaTime:vn.right.deltaTime})}),cr.on("works.request",function(vn){cr.emit("willLoad",vn.input,vn.works[0],vn.state)}),cr.on("works.load",function(vn){cr.emit("load",vn.input,vn.works[0],vn.state)}),cr.on("works.ready",function(vn){cr.emit("loaded",vn.input,vn.works[0])}),cr.on("state.change",function(vn){cr.emit("stateChange",vn.state,vn.userAction)}),cr.on("currentState.change",function(vn){cr.emit("currentStateChange",vn.state,vn.userAction)}),cr.on("state.set",function(vn){cr.emit("setState",vn.state)}),cr.on("state.synced",function(vn){cr.emit("stateSynced",vn.state)}),cr.on("model.request",function(vn){cr.emit("modelWillLoad",vn.work.model)}),cr.on("model.error",function(vn){cr.emit("modelLoadError",vn.error,vn.model)}),cr.on("model.load",function(vn){cr.emit("modelLoaded",vn.model)}),cr.on("model.changeShownFloor",function(vn){cr.emit("modelShownFloorChange",vn.model.shownFloor,vn.model.floorLength)}),cr.on("render",function(vn){cr.emit("renderFrame",vn.needsRender)}),cr.on("mode.change.request",function(vn){cr.emit("wantsChangeMode",vn.mode,vn.prevMode)}),cr.on("mode.change",function(vn){cr.emit("modeChange",vn.mode,vn.prevMode,vn.state.panoIndex,vn.state,vn.userAction)}),cr.on("helpers.visible",function(vn){cr.emit("helpersVisibleChange",vn.object.visible)}),cr.on("network.resource",function(vn){cr.emit("network",vn.source,vn.requestType,vn.requestState,vn.detail)})}function fg(){if(typeof window!="undefined"){var cr=document.createElement("video");cr.loop=!0,cr.autoplay=!0,cr.playsInline=!0,cr.muted=!0,cr.crossOrigin="";var vn=function(){document.removeEventListener("touchstart",vn,!1),document.removeEventListener("mousedown",vn,!1),cr.muted=!1};return document.addEventListener("touchstart",vn,!1),document.addEventListener("mousedown",vn,!1),cr}else return{}}function su(cr){var vn=new Group$1;vn.name="internalLights";{var yn=new DirectionalLight(16777215,.3);yn.position.copy(new Vector3(1,1,1)),vn.add(yn)}{var yn=new DirectionalLight(16777215,.1);yn.position.copy(new Vector3(-1,-1,-1)),vn.add(yn)}{var yn=new DirectionalLight(16777215,.1);vn.add(yn)}{var yn=new AmbientLight(16777215,.6);vn.add(yn)}cr.add(vn)}function dg(cr){for(var vn,yn,Rn={},Bn=cr.split(/(\;|\,)/),Co=0,Po=Bn;Co<Po.length;Co++){var To=Po[Co],Io=To.split("="),$l=(vn=Io[0])===null||vn===void 0?void 0:vn.trim(),Wl=(yn=Io[1])===null||yn===void 0?void 0:yn.trim();$l&&Wl&&(Rn[$l]=Wl)}return Rn}function hg(){var cr;if(typeof document!="undefined")for(var vn=document.getElementsByTagName("meta"),yn=0;yn<vn.length;yn++){var Rn=vn[yn];if(Rn.getAttribute("name")==="viewport"){var Bn=dg((cr=Rn.getAttribute("content"))!==null&&cr!==void 0?cr:""),Co=Number(Bn["initial-scale"]);if(!isNaN(Co))return Co}}return 1}const pg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==";var uu=[351,63],lu=[20,20],vg=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),mg=new Float32Array([0,0,1,0,0,1,1,1]),Ag=new Uint8Array([0,1,2,1,3,2]),Ia=new BufferGeometry;Ia.setAttribute("position",new BufferAttribute(vg,3));Ia.setAttribute("uv",new BufferAttribute(mg,2));Ia.setIndex(new BufferAttribute(Ag,1));var sa=new MeshBasicMaterial({transparent:!0,depthTest:!1,depthWrite:!1,stencilWrite:!1,fog:!1}),Kl=new Mesh(Ia,sa);Kl.matrixAutoUpdate=!1;var Eo=new Scene;Eo.add(Kl);Eo.matrixAutoUpdate=!1;var zi=new OrthographicCamera(-.5,.5,.5,-.5,.1,1);zi.position.set(0,0,.5);zi.lookAt(0,0,0);zi.updateMatrixWorld(!0);zi.matrixAutoUpdate=!1;var gg=new Vector4,yg=new Vector4;function bg(cr){if(sa.map){var vn=cr.getViewport(gg),yn=cr.getScissor(yg),Rn=cr.getScissorTest(),Bn=cr.autoClear,Co=yn.x+lu[0]/3,Po=yn.y+lu[1]/3,To=uu[0]/3,Io=uu[1]/3;cr.setViewport(Co,Po,To,Io),cr.setScissor(Co,Po,To,Io),cr.setScissorTest(!0),cr.autoClear=!1,cr.render(Eo,zi),cr.setViewport(vn),cr.setScissor(yn),cr.setScissorTest(Rn),cr.autoClear=Bn}else{var $l=new Texture,Wl=new Image;Wl.onload=function(){$l.image=Wl,$l.wrapS=ClampToEdgeWrapping,$l.wrapT=ClampToEdgeWrapping,$l.minFilter=LinearFilter,$l.needsUpdate=!0,$l.generateMipmaps=!1,sa.needsUpdate=!0,Wl.onload=q$q},Wl.src=pg,sa.map=$l}}var xg=800,cu=90,wg=function(cr){return cr.replace("//vrlab-public.ljcdn.com/","//vr-public.realsee-cdn.cn/").replace("//vrlab-image4.ljcdn.com/","//vr-image-4.realsee-cdn.cn/").replace("//vrlab-image3.ljcdn.com/","//vr-image-3.realsee-cdn.cn/").replace("//vrlab-image2.ljcdn.com/","//vr-image-2.realsee-cdn.cn/").replace("//vrlab-image1.ljcdn.com/","//vr-image-1.realsee-cdn.cn/")},Sg=new Vector2,Mg=new Sphere,Yi=new Frustum,$i=new Matrix4,fu=new WeakMap,y0=new WeakMap,b0=D0([]);new Tu;var Eg=function(cr){fe$6(vn,cr);function vn(yn){yn===void 0&&(yn={});var Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm=cr.call(this)||this;if(Rm.ident=Lt$1(),typeof window!="undefined"&&(G0.instances[Rm.ident]=Rm),Rm.renderSwitch01=0,Rm.currentMode="Panorama",Rm.pano={workCode:"",panoIndex:0},Rm.needsRender=!1,Rm.modelSceneNeedsRender=!1,Rm.onlyRenderIfNeeds=(Rn=yn.onlyRenderIfNeeds)!==null&&Rn!==void 0?Rn:!0,Rm.imageOptions=O$n({},(Bn=yn.imageOptions)!==null&&Bn!==void 0?Bn:{}),Rm.textureOptions=O$n({},(Co=yn.textureOptions)!==null&&Co!==void 0?Co:{}),Rm.poweredByRealsee=(Po=yn.poweredByRealsee)!==null&&Po!==void 0?Po:!0,Rm.extraElements=[],Rm.controllerInits={Panorama:Object.assign({},yn.panorama),Model:Object.assign({},yn.model),Floorplan:Object.assign({},yn.floorplan),Topview:Object.assign({},yn.topview),Mapview:Object.assign({},yn.mapview),VRPanorama:Object.assign({},yn.vrPanorama),XRPanorama:Object.assign({},yn.xrPanorama)},Rm.fps={testCount:0,testTime:Ae$3()},Rm.info=null,Rm.modeChangeDuration=(To=yn.modeChangeDuration)!==null&&To!==void 0?To:xg,Rm.enableWheel=(Io=yn.enableWheel)!==null&&Io!==void 0?Io:!0,typeof window!="undefined")if("renderer"in yn)yn.renderer instanceof On&&Rm.throwError(new Error("cannot render a internal renderer")),Rm.renderer=yn.renderer;else try{Rm.renderer=new On({preserveDrawingBuffer:yn.preserveDrawingBuffer,backgroundColor:yn.backgroundColor,backgroundAlpha:yn.backgroundAlpha,antialias:yn.antialias,webgl2:yn.webgl2,logarithmicDepthBuffer:yn.logarithmicDepthBuffer,precision:yn.precision,powerPreference:yn.powerPreference});var ry=hg();Rm.renderer.setPixelRatio(ry===1?window.devicePixelRatio:1),Rm.renderer.setSize(512,512)}catch(sy){sy instanceof Error&&Rm.throwError(sy)}Rm.getPixelsRenderTarget=new WebGLRenderTarget(1,1,{encoding:(Wl=($l=Rm.renderer)===null||$l===void 0?void 0:$l.outputEncoding)!==null&&Wl!==void 0?Wl:sRGBEncoding,generateMipmaps:!1});var _g=new DepthTexture(1,1);_g.generateMipmaps=!1,_g.format=DepthStencilFormat,_g.type=UnsignedInt248Type,Rm.modelRenderTarget=new WebGLRenderTarget(1,1,{encoding:(Yl=(Xl=Rm.renderer)===null||Xl===void 0?void 0:Xl.outputEncoding)!==null&&Yl!==void 0?Yl:sRGBEncoding,depthTexture:_g,generateMipmaps:!1,depthBuffer:!0,stencilBuffer:!0}),Rm.scissor=Object.assign({left:0,bottom:0,width:1,height:1},yn.scissor),Rm.camera=new xd(cu),Rm.scene=new Tu,Rm.xrCustomObjectsScene=new Scene,Rm.scene.add(Rm.xrCustomObjectsScene),Rm.scene.matrixAutoUpdate=!1,Rm.lastLoadWorkTask=Promise.resolve(),Rm.requestProxy=(Zl=yn.requestProxy)!==null&&Zl!==void 0?Zl:wg,Rm.networkSubscribe=new wf,Rm.networkSubscribe.on("network",function(sy,cy,fy,vy){var dy;Rm.emit("network.resource",X$c("network.resource",{source:sy,requestType:cy,requestState:fy,detail:vy})),(dy=Rm.analysis)===null||dy===void 0||dy.network(Rm.works,sy,cy,fy,vy)}),Rm.boundingMesh=hm(new Box3(new Vector3(-.5,-.5,-.5),new Vector3(.5,.5,.5))),Rm.boundingMesh.name="bounding",Rm.models=ks(),Rm.models.push(new Ls),Rm.lastModels=ks(),Rm.lastWorks=D0([]),Rm.readyCallbacks=[],Rm.syncingState=!1,Rm.helperGroup=new Group$1,Rm.helperGroup.name="helper",Rm.helperGroup.matrixAutoUpdate=!1,Rm.scene.add(Rm.helperGroup),Rm.modelGroup=new Group$1,Rm.modelGroup.visible=!1,Rm.modelGroup.name="model",Rm.modelGroup.matrixAutoUpdate=!1,Rm.modelScene=new Scene,Rm.modelScene.add(Rm.modelGroup),Rm.modelScene.add(Rm.boundingMesh),Rm.modelScene.matrixAutoUpdate=!1,Rm.videoTexture=new VideoTexture(yn.videoInstance||fg()),su(Rm.scene),su(Rm.modelScene),Rm.state={mode:Rm.currentMode,workCode:Rm.pano.workCode,panoIndex:Rm.pano.panoIndex,longitude:Rm.camera.pose.longitude,latitude:Rm.camera.pose.latitude,fov:Rm.camera.pose.fov,offset:Rm.camera.pose.offset.clone(),distance:Rm.camera.pose.distance},Rm.stateSynced=!1,Rm._enablePostProcessing=!1,Rm._enableIOSEDR=!1,Rm._enableEDL=!1,Rm._enableHQ=!1,Rm.destroyed=!1,Rm.paused=!0,typeof window!="undefined"&&(yn.play!==!1&&Rm.play(),Rm.stopAnimationLoop=Ft$2.shared.add(function(sy,cy){for(var fy=[],vy=2;vy<arguments.length;vy++)fy[vy-2]=arguments[vy];Rm.updateTime.apply(Rm,yt$3([sy,cy],fy,!1))},!1,0,10));var ty=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Rm.currentMode==="VRPanorama"&&Rm.controller.emit("vr.requestExit",X$c("vr.requestExit",{}))},ny=function(){Rm.needsRender=!0,Rm.modelSceneNeedsRender=!0};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",ty,!1),Rm.renderer&&Rm.renderer.domElement.addEventListener("webglcontextrestored",ny,!1),Rm.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",ty,!1),Rm.renderer&&Rm.renderer.domElement.removeEventListener("webglcontextrestored",ny,!1)},Rm.plugins={},yn.plugins&&yn.plugins.length)for(var iy=0,oy=yn.plugins;iy<oy.length;iy++){var ay=oy[iy];if(typeof ay=="function")ay(Rm);else if(Array.isArray(ay)){var uy=ay[0],hy=ay[1],my=ay[2];if(typeof uy=="function"){var ly=uy(Rm,my);typeof hy=="string"&&(Rm.plugins[hy]?Rm.throwError(new Error("plugin name ".concat(hy," is exists."))):Rm.plugins[hy]=ly)}}}return Rm.gpuPickingRenderTarget=new WebGLRenderTarget(1,1,{generateMipmaps:!1}),Rm.meshReplaceMaterialMap=new Map,Rm.meshOriginMaterialMap=new Map,cg(Rm),Rm.enableLayeringRendering=(ey=yn.enableLayeringRendering)!==null&&ey!==void 0?ey:!1,Rm}return Object.defineProperty(vn,"version",{get:function(){return"6.4.0-alpha.36"},enumerable:!1,configurable:!0}),Object.defineProperty(vn,"dracoPath",{get:function(){return ha.decoderPath},set:function(yn){ha.setDecoderPath(yn)},enumerable:!1,configurable:!0}),Object.defineProperty(vn,"ktx2Path",{get:function(){return vi.transcoderPath},set:function(yn){vi.setTranscoderPath(yn)},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"panoIndex",{get:function(){return this.pano.panoIndex},enumerable:!1,configurable:!0}),vn.prototype.getGPUPicking=function(yn,Rn,Bn,Co,Po){var To=this;if(Co===void 0&&(Co=1),Po===void 0&&(Po=new Vector3(0,0,0)),!this.renderer)throw new Error("renderer is not initialized.");var Io=this.models.getMaterial(),$l=Io.constantColor,Wl=Io.colorStyle;this.models.setMaterial({colorStyle:"CONSTANT",constantColor:Po}),this.scene.traverse(function(ey){if(!(!(ey instanceof Mesh)||ey instanceof Ht$2||ey instanceof Jr$2)){var Rm=Object.keys(Bn).filter(function(_g){return _g===ey.uuid})[0];if(Rm)if(To.meshOriginMaterialMap.set(Rm,ey.material),To.meshReplaceMaterialMap.get(Rm))ey.material=To.meshReplaceMaterialMap.get(Rm);else{var ry=new ShaderMaterial({uniforms:{color:{value:Bn[Rm]}},vertexShader:`
          void main() {
            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
            gl_Position = projectionMatrix * mvPosition;
          }
          `,fragmentShader:`
          uniform vec3 color;
          void main() {
            gl_FragColor = vec4( color, 1.0 );
          }
          `});ry.depthTest=ey.material.depthTest,ry.side=ey.material.side,To.meshReplaceMaterialMap.set(Rm,ry),ey.material=ry}}});var Xl=this.renderer.getSize(new Vector2);this.camera.setViewOffset(Xl.width,Xl.height,yn*Co,Rn*Co,1,1),this.renderer.setRenderTarget(this.gpuPickingRenderTarget),this.render();var Yl=new Uint8Array(4);this.renderer.readRenderTargetPixels(this.gpuPickingRenderTarget,0,0,1,1,Yl),this.renderer.setRenderTarget(null),this.camera.clearViewOffset(),this.scene.traverse(function(ey){!(ey instanceof Mesh)||ey instanceof Ht$2||ey instanceof Jr$2||To.meshOriginMaterialMap.get(ey.uuid)&&(ey.material=To.meshOriginMaterialMap.get(ey.uuid))}),this.models.setMaterial({colorStyle:Wl,constantColor:$l});var Zl=Object.keys(Bn).filter(function(ey){return Bn[ey].equals(new Color().setRGB(Yl[0]/255,Yl[1]/255,Yl[2]/255))})[0];return Zl||!1},vn.prototype.dispose=function(){var yn,Rn;if(this.destroyed!==!0){delete G0.instances[this.ident],this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),(yn=this.renderer)===null||yn===void 0||yn.setAnimationLoop(null),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var Bn=this.getElement();Bn&&Bn.parentNode&&Bn.parentNode.removeChild(Bn);var Co=this.models.getMaterial();Co&&(Co.pano0&&Co.pano0.map.dispose(),Co.pano1&&Co.pano1.map!==((Rn=Co.pano0)===null||Rn===void 0?void 0:Rn.map)&&Co.pano1.map.dispose());for(var Po=0,To=this.models;Po<To.length;Po++){var Io=To[Po];Io.dispose()}this.models.length=0,this.models.setMaterial({pano0:null,pano1:null}),this.meshReplaceMaterialMap.forEach(function($l){$l.dispose()}),this.meshOriginMaterialMap.forEach(function($l){$l.dispose()}),this.renderer instanceof On&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},vn.prototype.setScissor=function(yn){var Rn;if(Object.assign(this.scissor,yn),this.controller&&this.controller.updateRenderSize){var Bn=new Vector2;(Rn=this.renderer)===null||Rn===void 0||Rn.getDrawingBufferSize(Bn),this.controller.updateRenderSize(Bn)}},Object.defineProperty(vn.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(yn){this.helperGroup.visible!==yn&&(this.helperGroup.visible=yn,this.emit("helpers.visible",X$c("helpers.visible",{object:this.helperGroup})),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(yn){this._enableIOSEDR!==yn&&(this._enableIOSEDR=yn,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"postProcessingType",{get:function(){return this.currentMode==="Panorama"&&this.enableIOSEDR&&this.enablePostProcessing?"luminance":this.currentMode==="Mapview"&&this.enableEDL?"edl":this.currentMode==="Mapview"&&this.enableHQ?"hq":null},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"enableEDL",{get:function(){return this._enableEDL},set:function(yn){if(yn===!0&&this.currentMode!==vn.Mode.Mapview)throw new Error("\u53EA\u652F\u6301Mapview\u4E0B\u5F00\u542FEDL");this._enableEDL!==yn&&(this._enableEDL=yn,this.boundingMesh.visible=!yn,this.needsRender=!0,this.modelSceneNeedsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"enableHQ",{get:function(){return this._enableHQ},set:function(yn){if(yn===!0&&this.currentMode!==vn.Mode.Mapview)throw new Error("\u53EA\u652F\u6301Mapview\u4E0B\u5F00\u542FHQ");this._enableHQ!==yn&&(this._enableHQ=yn,this.boundingMesh.visible=!yn,this.needsRender=!0,this.modelSceneNeedsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"enablePostProcessing",{get:function(){return this._enablePostProcessing},set:function(yn){this._enablePostProcessing!==yn&&(this._enablePostProcessing=yn),this.needsRender=!0,this.modelSceneNeedsRender=!0},enumerable:!1,configurable:!0}),vn.prototype.updateConfiguration=function(yn,Rn){Rn===void 0&&(Rn=!0);var Bn=!1;if(yn.panorama&&(Object.assign(this.controllerInits.Panorama,yn.panorama),this.currentMode==="Panorama"&&(Bn=!0)),yn.model&&(Object.assign(this.controllerInits.Model,yn.model),this.currentMode==="Model"&&(Bn=!0)),yn.floorplan&&(Object.assign(this.controllerInits.Floorplan,yn.floorplan),this.currentMode==="Floorplan"&&(Bn=!0)),yn.topview&&(Object.assign(this.controllerInits.Topview,yn.topview),this.currentMode==="Topview"&&(Bn=!0)),yn.mapview&&(Object.assign(this.controllerInits.Mapview,yn.mapview),this.currentMode==="Mapview"&&(Bn=!0)),yn.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,yn.vrPanorama),this.currentMode==="VRPanorama"&&(Bn=!0)),yn.imageOptions&&(Object.assign(this.imageOptions,yn.imageOptions),(this.currentMode==="Panorama"||this.currentMode==="VRPanorama")&&(Bn=!0)),yn.textureOptions&&Object.assign(this.textureOptions,yn.textureOptions),Rn&&Bn&&this.controller&&this.currentMode){var Co=this.controller.updateConfiguration(this.controllerInits[this.currentMode]);Co||this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)}},vn.prototype.appendTo=function(yn,Rn){if(Rn===void 0&&(Rn={}),!!this.renderer){if(!(this.renderer instanceof On)){this.throwError(new Error("cannot call appendTo method when render a external renderer"));return}var Bn=this.getElement();if(Bn){yn.appendChild(Bn),this.refresh(Rn);var Co=window.getComputedStyle(yn).position;Co!=="relative"&&Co!=="absolute"&&Co!=="fixed"&&Co!=="sticky"&&(yn.style.position="relative")}}},vn.prototype.refresh=function(yn,Rn){if(yn===void 0&&(yn={}),!!this.renderer){var Bn=this.getElement();if(Bn){var Co=Bn.parentNode;if(Co&&Co.nodeName){var Po=yn.width,To=Po===void 0?Co.offsetWidth:Po,Io=yn.height,$l=Io===void 0?Co.offsetHeight:Io;this.renderer instanceof On&&(Rn&&this.renderer.setPixelRatio(Rn),this.renderer.setSize(To,$l))}var Wl=new Vector2;if(this.renderer.getDrawingBufferSize(Wl),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(Wl),this.modelRenderTarget.width!==Wl.x||this.modelRenderTarget.height!==Wl.y){this.modelRenderTarget.setSize(Wl.x,Wl.y),this.modelRenderTarget.depthTexture.dispose();var Xl=new DepthTexture(Wl.x,Wl.y);Xl.generateMipmaps=!1,Xl.format=DepthStencilFormat,Xl.type=UnsignedInt248Type,this.modelRenderTarget.depthTexture=Xl,this.modelRenderTarget.depthTexture.needsUpdate=!0}this.needsRender=!0,this.modelSceneNeedsRender=!0,this.render(q$q,!0)}}},vn.prototype.addExtraElement=function(yn){var Rn=this;return this.extraElements.indexOf(yn)===-1&&(this.extraElements.push(yn),this.controller&&this.controller.bindExtraElement(yn)),function(){return Rn.removeExtraElement(yn)}},vn.prototype.removeExtraElement=function(yn){var Rn=this.extraElements.indexOf(yn);Rn!==-1&&(this.extraElements.splice(Rn,1),this.controller&&this.controller.unbindExtraElement(yn))},vn.prototype.getPose=function(){var yn=this.camera.copyPose(),Rn=yn.longitude,Bn=yn.latitude,Co=yn.fov,Po=yn.offset,To=yn.distance;return{longitude:Rn,latitude:Bn,fov:Co,offset:Po.clone(),distance:To}},vn.prototype.getSize=function(yn){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(yn),yn.x*=this.scissor.width,yn.y*=this.scissor.height,yn},vn.prototype.getDrawingBufferSize=function(yn){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(yn),yn.x*=this.scissor.width,yn.y*=this.scissor.height,yn},vn.prototype.updateCamera=function(yn,Rn,Bn){if(Bn===void 0&&(Bn=!0),!this.controller)throw new Error("controller is not initialized.");return this.controller.updateCamera(yn,Rn,Bn)},vn.prototype.updateCameraWithKeyframes=function(yn,Rn,Bn){if(Bn===void 0&&(Bn=!0),!this.controller)throw new Error("controller is not initialized.");return this.controller.updateCameraWithKeyframes(yn,Rn,Bn)},vn.prototype.getLongitudeAndLatitude=function(){var yn=this.getPose(),Rn=yn.longitude,Bn=yn.latitude;return{longitude:Rn,latitude:Bn}},vn.prototype.getOffset=function(){return this.getPose().offset},vn.prototype.getCameraLocal=function(){if(this.pano.workCode&&this.controller&&this.works){var yn=this.works.getResolvedObserver(this.pano);if(yn){var Rn=new Object3D;return Rn.position.copy(yn.position),Rn.quaternion.copy(yn.quaternion),Rn.scale.set(1,1,1),Rn.matrix.compose(Rn.position,Rn.quaternion,Rn.scale),Rn.matrixAutoUpdate=!1,pm(this.camera,Rn)}}return null},Object.defineProperty(vn.prototype,"works",{get:function(){var yn=y0.get(this);if(!yn)return b0;for(var Rn=0,Bn=yn;Rn<Bn.length;Rn++){var Co=Bn[Rn];if(!ki.has(Co))return b0}return yn},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"work",{get:function(){return this.works[0]},enumerable:!1,configurable:!0}),Object.defineProperty(vn.prototype,"model",{get:function(){return this.models[0]},enumerable:!1,configurable:!0}),vn.prototype.load=function(yn,Rn,Bn,Co){var Po=this;if(Co===void 0&&(Co=!0),!this.renderer)throw new Error("renderer is not initialized");var To=this.lastLoadWorkTask.then(function(){return mm(yn)?yn.then(function(Io){return Po.load_(Io,Rn,Bn,Co)}):Po.load_(yn,Rn,Bn,Co)});return this.lastLoadWorkTask=To.catch(function(Io){Po.throwError(Io)}),To},vn.prototype.load_=function(yn,Rn,Bn,Co){var Po=this,To,Io,$l,Wl,Xl,Yl,Zl,ey;Co===void 0&&(Co=!0);var Rm={};typeof Bn=="number"?Rm.duration=Bn:typeof Bn=="object"&&Object.assign(Rm,Bn),this.works===b0&&(Rm.duration===void 0&&(Rm.duration=0),Rm.effect===void 0&&(Rm.effect="instant"));var ry=[];if(Array.isArray(yn))for(var _g=0,ty=yn;_g<ty.length;_g++){var ny=ty[_g];typeof ny!="string"&&"work"in ny?ry.push(na(ny.work,ny)):ry.push(na(ny))}else ry.push(na(yn));for(var iy=D0(ry),oy=function(Xy){var $y=ay,xy=new Zt$1({allowHosts:Xy.allowHosts,get requestProxy(){return $y.requestProxy},get networkSubscribe(){return $y.networkSubscribe}});Wv(Xy,xy)},ay=this,uy=0,hy=iy;uy<hy.length;uy++){var my=hy[uy];oy(my)}this.lastWorks=this.works,Rn===void 0&&(Rn="inherit"),Rn==="inherit"&&this.lastWorks.length===0&&(Rn="initial");var ly=iy.initial,sy=ly.work.observers[0],cy=sy?{workCode:sy.work.workCode,panoIndex:sy.panoIndex}:{workCode:ly.work.workCode,panoIndex:0},fy=(To=ly.mode)!==null&&To!==void 0?To:sy?"Panorama":"Mapview",vy={};if(Rn==="inherit"){fy=this.currentMode;var dy=iy.resolvedObservers[this.panoIndex];dy?cy={workCode:dy.work.workCode,panoIndex:dy.panoIndex}:typeof iy.initial.panoIndex=="number"?cy={workCode:iy.initial.work.workCode,panoIndex:iy.initial.panoIndex}:(fy==="Panorama"||fy==="VRPanorama"||fy==="XRPanorama")&&(fy="Mapview"),vy={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,distance:void 0,offset:void 0}}else if(Rn==="initial")typeof ly.panoIndex=="number"&&(cy={workCode:ly.work.workCode,panoIndex:ly.panoIndex}),ly.mode&&(fy=ly.mode),vy={longitude:ly.longitude,latitude:ly.latitude,fov:ly.fov,distance:ly.distance,offset:(Io=ly.offset)===null||Io===void 0?void 0:Io.clone()};else{if(fy=($l=Rn.mode)!==null&&$l!==void 0?$l:this.currentMode,typeof Rn.panoIndex=="number"){var dy=iy.getResolvedObserver({workCode:(Xl=(Wl=Rn.workCode)!==null&&Wl!==void 0?Wl:ly.work.workCode)!==null&&Xl!==void 0?Xl:"",panoIndex:Rn.panoIndex});dy&&(cy={workCode:dy.work.workCode,panoIndex:dy.panoIndex})}vy={longitude:Rn.longitude,latitude:Rn.latitude,fov:Rn.fov,distance:Rn.distance,offset:Rn.offset}}var Ay=O$n(O$n(O$n({},cy),{mode:fy}),vy),gy=this.getCurrentState(),wy=(Yl=Rm.duration)!==null&&Yl!==void 0?Yl:this.modeChangeDuration;(fy==="Floorplan"||fy==="Topview"||fy==="Mapview")&&this.currentMode===fy&&(wy=0);var Cy="fly";(fy==="Panorama"||fy==="VRPanorama"||fy==="XRPanorama")&&this.currentMode===fy&&(Cy=(Zl=Rm.effect)!==null&&Zl!==void 0?Zl:"fade"),this.emit("works.request",X$c("works.request",{input:yn,works:iy,state:Ay,userAction:Co}));var My=function(){Po.modelGroup.visible=!0,Po.pano=cy;var Xy=O$n(O$n({initial:{state:Ay,currentState:gy,duration:wy,effect:Cy,userAction:Co}},Po.commonParams()),Po.controllerInits[fy]),$y=vt$3[fy].initAnimationEndState(Xy);if(Po.controller&&Po.currentMode===fy)Po.controller.updateWork(iy,$y,{effect:Cy,duration:wy},Co)===!1&&(Po.controller.destroy(),Po.controller=Po.applyController(fy,Xy));else{var xy=Po.currentMode;if(Po.controller)Po.controller.destroy();else{var Ry=vt$3[fy].initAnimationEndState(Xy);Po.camera.setFromPose(Ry),Po.emit("camera.update",X$c("camera.update",{state:Po.getCurrentState(),userAction:Co}))}Po.controller=Po.applyController(fy,Xy);var Ly=X$c("mode.change",{prevMode:xy,mode:fy,state:$y,userAction:Co});Po.emit("mode.change",Ly)}};y0.set(this,iy);var Py=Promise.resolve();if(fy===vn.Mode.Floorplan||fy===vn.Mode.Topview||fy===vn.Mode.Mapview||fy===vn.Mode.Model)this.models.loaded===!1&&(this.camera.setFromPose(Ay),ym(this.state,this.camera.pose)),this.controller||(this.currentMode=fy),Py=this.loadModel(iy,Rm).then(function(){Po.needsRender=!0,Po.modelSceneNeedsRender=!0,My(),Po.emit("camera.update",X$c("camera.update",{state:Po.getCurrentState(),userAction:Co}))});else{My();var Dy=!1,qy=function(){Po.works===iy&&Dy===!1&&(Po.needsRender=!0,Po.modelSceneNeedsRender=!0,Po.emit("camera.update",X$c("camera.update",{state:Po.getCurrentState(),userAction:Co})),Po.loadModel(iy,Rm),Dy=!0)};this.controller.once("pano.arrived",qy),this.controller.once("pano.cancel",qy),setTimeout(qy,((ey=Rm.duration)!==null&&ey!==void 0?ey:this.modeChangeDuration)+1e3)}return this.emit("works.load",X$c("works.load",{input:yn,state:this.getCurrentState(),userAction:Co,works:iy})),Py.then(function(){return Po.ready()}).then(function(){var Xy;Po.emit("works.ready",X$c("works.ready",{input:yn,state:Po.getCurrentState(),userAction:Co,works:iy})),(Xy=Po.analysis)===null||Xy===void 0||Xy.work(iy)})},vn.prototype.reset=function(){var yn=this,Rn=this.lastLoadWorkTask.then(function(){return yn.reset_()});return this.lastLoadWorkTask=Rn.catch(function(Bn){yn.throwError(Bn)}),Rn},vn.prototype.reset_=function(){var yn=this;return new Promise(function(Rn){var Bn;yn.controller&&(yn.controller.destroy(),yn.controller=void 0);var Co=yn.models.getMaterial();Co&&(Co.pano0&&Co.pano0.map.dispose(),Co.pano1&&Co.pano1.map!==((Bn=Co.pano0)===null||Bn===void 0?void 0:Bn.map)&&Co.pano1.map.dispose()),yn.models.setMaterial({pano0:null,pano1:null,modelAlpha:1}),yn.lastModels.setMaterial({pano0:null,pano1:null,modelAlpha:1}),yn.renderer&&(yn.models.update(yn.renderer,yn.camera,yn.currentMode),yn.lastModels.update(yn.renderer,yn.camera,yn.currentMode),yn.model&&yn.boundingMesh.update(yn.renderer,yn.camera,yn.model));for(var Po=0,To=yn.models;Po<To.length;Po++){var Io=To[Po];yn.lastModels.push(Io)}if(yn.models.length=0,yn.lastModels.length>0){for(var $l=0,Wl=yn.lastModels;$l<Wl.length;$l++){var Io=Wl[$l];yn.modelGroup.remove(Io),Io.dispose(),yn.needsRender=!0,yn.modelSceneNeedsRender=!0}yn.lastModels.length=0}yn.lastWorks&&delete yn.lastWorks,y0.delete(yn),yn.currentMode="Mapview",yn.pano={workCode:"",panoIndex:0},yn.camera.setFromPose({distance:0,fov:cu,longitude:0,latitude:0,offset:new Vector3(0,0,0)}),yn.state={mode:yn.currentMode,workCode:yn.pano.workCode,panoIndex:yn.pano.panoIndex,longitude:yn.camera.pose.longitude,latitude:yn.camera.pose.latitude,fov:yn.camera.pose.fov,offset:yn.camera.pose.offset.clone(),distance:yn.camera.pose.distance},yn.models.needsRender=!1,yn.camera.needsRender=!1,yn.needsRender=!1,yn.modelSceneNeedsRender=!1,Rn()})},vn.prototype.changeMode=function(yn,Rn,Bn,Co,Po){var To=this;return Rn===void 0&&(Rn={}),Co===void 0&&(Co=!0),Po===void 0&&(Po=!1),new Promise(function(Io,$l){var Wl,Xl,Yl,Zl;if(!To.renderer)throw new Error("renderer is not initialized.");Rn=O$n({},Rn);var ey=0;To.controller&&(typeof Bn=="number"?ey=Bn:ey=(Wl=Bn==null?void 0:Bn.duration)!==null&&Wl!==void 0?Wl:To.modeChangeDuration);var Rm="fly";To.controller&&typeof Bn=="object"&&Bn.effect&&(Rm=Bn.effect);var ry=typeof Rn.panoIndex=="number"?{workCode:(Zl=(Xl=Rn.workCode)!==null&&Xl!==void 0?Xl:(Yl=To.work)===null||Yl===void 0?void 0:Yl.workCode)!==null&&Zl!==void 0?Zl:"",panoIndex:Rn.panoIndex}:To.pano;if(!vn.Mode.hasOwnProperty(yn)){var _g=new Error('mode "'.concat(yn,'" is not existed'));To.throwError(_g),$l(_g);return}if((yn===vn.Mode.Panorama||yn===vn.Mode.VRPanorama||yn===vn.Mode.XRPanorama)&&!To.works.getResolvedObserver(ry)){var _g=new Error("PanoId ".concat(_e$3(ry)," not existed."));To.throwError(_g),$l(_g);return}(yn===vn.Mode.Floorplan||yn===vn.Mode.Topview||yn===vn.Mode.Mapview||yn===vn.Mode.Model)&&(To.models.loaded||(ey=0));var ty=To.controller,ny=To.currentMode,iy=function(){if(To.controller&&To.controller.stopMomentumMovement(),To.controller&&Po===!1&&ny===yn)yn===vn.Mode.Panorama||yn===vn.Mode.Model||yn===vn.Mode.VRPanorama||yn===vn.Mode.XRPanorama?!Or$1(To.pano,ry)&&"moveToPano"in To.controller&&typeof To.controller.moveToPano=="function"?To.controller.moveToPano(ry,O$n({duration:ey},Rn),Co):To.controller.updateCamera(Rn,ey,Co).catch(q$q):(Or$1(To.pano,ry)||(To.pano=ry),To.controller.updateCamera(Rn,ey,Co).catch(q$q));else{var ay=O$n(O$n({},Rn),ry),uy=O$n(O$n({initial:{state:ay,currentState:To.getCurrentState(),duration:ey,effect:Rm,userAction:Co}},To.commonParams()),To.controllerInits[yn]),hy=vt$3[yn].initAnimationEndState(uy),my=X$c("mode.change.request",{prevMode:To.currentMode,mode:yn,state:hy,userAction:Co});if(To.emit("mode.change.request",my),!my.defaultPrevented){ty&&ty.destroy(),To.controller=To.applyController(yn,uy);var ly=X$c("mode.change",{prevMode:To.currentMode,mode:yn,state:hy,userAction:Co});To.emit("mode.change",ly)}}Io()};if(yn===vn.Mode.VRPanorama)To.requestFullscreen(),Am().then(function(){return iy()}).catch(function(ay){ay instanceof Error&&(To.exitFullscreen(),To.throwError(ay),$l(ay))});else if(yn===vn.Mode.XRPanorama){var oy=Ft$2.shared.getContext();oy?oy.end():gm().then(function(ay){Ft$2.shared.setContext(ay),iy()}).catch(function(ay){ay instanceof Error&&(To.throwError(ay),$l(ay))})}else iy()})},vn.prototype.getPixels=function(yn,Rn,Bn,Co,Po,To,Io){if(!this.renderer)throw new Error("renderer is not initialized.");var $l=this.renderer.getPixelRatio(),Wl=this.renderer.getRenderTarget(),Xl=this.renderer.getSize(new Vector2),Yl=0,Zl=0,ey=1,Rm=1,ry,_g,ty,ny,iy;typeof yn=="number"?(Yl=yn,typeof Rn=="number"&&(Zl=Rn),typeof Bn=="number"&&(ey=Bn),typeof Co=="number"&&(Rm=Co),ry=Po,_g=To,iy=Io):(Yl=yn.x,Zl=yn.y,ey=yn.width,Rm=yn.height,ry=yn.pixelRatio,_g=yn.flipY,ty=yn.helperVisible,ny=yn.skipPanorama,iy=yn.buffer),Yl=Math.ceil(Yl),Zl=Math.ceil(Zl),ey=Math.ceil(ey),Rm=Math.ceil(Rm),ry=Math.ceil(ry!=null?ry:$l),_g=_g!=null?_g:!1;var oy=this.getPixelsRenderTarget;oy.setSize(ey*ry,Rm*ry),this.renderer.setRenderTarget(oy),this.camera.pixelRatio=ry,this.camera.resolution.set(ey,Rm),this.camera.setViewOffset(Xl.width,Xl.height,Yl,Xl.height-Zl-Rm,ey,Rm);for(var ay=0,uy=this.scene.children;ay<uy.length;ay++){var hy=uy[ay];hy instanceof Object3D&&hy.traverseVisible(function(qy){qy.setResolution&&qy.setResolution(ey*ry/$l,Rm*ry/$l)})}this.models.autoUpdate=!1;var my=!0,ly=0;ny&&(this.controller instanceof vt$3.Panorama||this.controller instanceof vt$3.VRPanorama||this.controller instanceof vt$3.XRPanorama)&&(my=this.controller.tiling.object.visible,this.controller.tiling.object.visible=!1,ly=this.models.getMaterial().modelAlpha,this.models.setMaterial({modelAlpha:ny===!0?1:ly}));var sy=this.helperVisible;ty===!1&&(this.helperVisible=!1),this.models.update(this.renderer,this.camera,this.currentMode),this.controller?(this.controller.updateRenderSize(new Vector2(ey*ry,Rm*ry)),this.controller.render(!0,this.postProcessingType)):(this.renderer.render(this.scene,this.camera),this.renderer.autoClearDepth=!1,this.renderer.autoClearColor=!1,this.renderer.render(this.modelScene,this.camera),this.renderer.autoClearDepth=!0,this.renderer.autoClearColor=!0),this.helperVisible=sy,ny&&(this.controller instanceof vt$3.Panorama||this.controller instanceof vt$3.VRPanorama||this.controller instanceof vt$3.XRPanorama)&&(this.controller.tiling.object.visible=my,this.models.setMaterial({modelAlpha:ly})),this.models.update(this.renderer,this.camera,this.currentMode),this.models.autoUpdate=!0;var cy=ey*ry,fy=Rm*ry,vy=cy*fy,dy=vy*4,Ay;try{if(iy){if(iy.length!==dy)throw new Error("buffer length is not equals pixels ".concat(dy))}else iy=new Uint8Array(dy);if(this.renderer.readRenderTargetPixels(oy,0,0,ey*ry,Rm*ry,iy),_g)for(var gy=vy/2,wy=0,Cy=0,My=0,Py=0;Cy<gy;Cy++)for(Py=(fy-Math.floor(Cy/cy)-1)*cy+Cy%cy,My=0;My<4;My++)wy=iy[Cy*4+My],iy[Cy*4+My]=iy[Py*4+My],iy[Py*4+My]=wy}catch(qy){Ay=qy}if(this.renderer.setRenderTarget(Wl),this.controller&&this.controller.updateRenderSize){var Dy=new Vector2;this.renderer.getDrawingBufferSize(Dy),this.controller.updateRenderSize(Dy)}if(this.camera.clearViewOffset(),this.camera.pixelRatio=$l,this.getSize(this.camera.resolution),this.camera.aspect=this.camera.resolution.width/this.camera.resolution.height,Ay)throw Ay;return iy},vn.prototype.getElement=function(){var yn;return(yn=this.renderer)===null||yn===void 0?void 0:yn.domElement},Object.defineProperty(vn.prototype,"observers",{get:function(){return this.works.resolvedObservers},enumerable:!1,configurable:!0}),vn.prototype.render=function(yn,Rn){var Bn=this;if(Rn===void 0&&(Rn=!1),!this.renderer)return null;if(Rn){var Co=this.renderer.getSize(Sg);this.scene.traverseVisible(function(Po){Po.setResolution&&Po.setResolution(Co.x,Co.y)})}return this.aroundScissor(function(){if(Bn.renderer){var Po=Bn.scene.background;Bn.modelScene.background=Bn.camera.isOrthographicCamera?null:Po,Bn.modelScene.environment=Bn.scene.environment,Bn.scene.background=null,Bn.controller?(Bn.controller.render(Bn.onlyRenderIfNeeds?Bn.modelSceneNeedsRender:!0,Bn.postProcessingType),Bn.info={memory:O$n({},Bn.controller.renderer.info.memory),render:O$n({},Bn.controller.renderer.info.render)}):(Bn.renderer.render(Bn.scene,Bn.camera),Bn.info={memory:O$n({},Bn.renderer.info.memory),render:O$n({},Bn.renderer.info.render)}),Bn.scene.background=Po,Bn.modelScene.background=null,Bn.modelScene.environment=null,Bn.poweredByRealsee&&Bn.currentMode!=="VRPanorama"&&Bn.currentMode!=="XRPanorama"&&Bn.renderer.getRenderTarget()!==Bn.getPixelsRenderTarget&&bg(Bn.renderer)}yn&&Ft$2.shared.add(yn,!0)}),null},vn.prototype.updateTime=function(yn,Rn){for(var Bn,Co=this,Po=[],To=2;To<arguments.length;To++)Po[To-2]=arguments[To];if(!this.destroyed){if(this.works.update(),this.syncingState=this.syncState(yn,Rn),this.controller&&(Bn=this.controller).updateTime.apply(Bn,yt$3([yn,Rn],Po,!1)),this.renderer&&(this.camera.pixelRatio=this.renderer.getPixelRatio(),this.getSize(this.camera.resolution),this.camera.aspect=this.camera.resolution.width/this.camera.resolution.height),this.camera.environment=this.scene.environment,this.camera.updateTime(yn),this.renderer){vi.detectSupport(this.renderer);var Io=this.models.loaded,$l=this.models.refined;if(this.models.update(this.renderer,this.camera,this.currentMode),this.camera.autoNearFar){var Wl=this.models.bounding.getBoundingSphere(Mg),Xl=Wl.radius*2;Wl.containsPoint(this.camera.position)||(Xl=this.camera.position.distanceTo(Wl.center)+Wl.radius),Xl=pe$4(Xl,800,5e4),this.camera.far!==Xl&&(this.camera.far=Xl);var Yl=Xl/1e4;Yl=pe$4(Yl,.03,.1),this.camera.near!==Yl&&(this.camera.near=Yl)}if(Io===!1&&this.models.loaded===!0&&this.emit("models.load",X$c("models.load",{models:this.models})),$l===!1&&this.models.refined===!0&&this.emit("models.refined",X$c("models.refined",{models:this.models})),this.models.loaded){for(var Zl=0,ey=this.models;Zl<ey.length;Zl++){var Rm=ey[Zl];Rm.parent!==this.modelGroup&&(this.modelGroup.add(Rm),this.needsRender=!0,this.modelSceneNeedsRender=!0)}if(this.lastModels.length>0){for(var ry=0,_g=this.lastModels;ry<_g.length;ry++){var Rm=_g[ry];this.modelGroup.remove(Rm),Rm.dispose(),this.needsRender=!0,this.modelSceneNeedsRender=!0}this.lastModels.length=0}this.lastWorks&&delete this.lastWorks}this.lastModels.setMaterial(this.models.getMaterial()),this.lastModels.materialVersion=this.models.materialVersion,this.lastModels.update(this.renderer,this.camera,this.currentMode)}this.syncingState=!1;var ty=new Vector2(512,512),ny=new Vector2(512,512);this.renderer&&(this.renderer.getSize(ty),ty.x*=this.scissor.width,ty.y*=this.scissor.height,this.renderer.getDrawingBufferSize(ny),ny.x*=this.scissor.width,ny.y*=this.scissor.height);{for(var iy=new Box3,oy=new Box3,ay=new Vector3(4,4,4),uy=0,hy=this.works.resolvedObservers;uy<hy.length;uy++){var my=hy[uy];oy.setFromCenterAndSize(my.position,ay),iy.union(oy)}if(iy.union(this.models.bounding),this.lastWorks)for(var ly=0,sy=this.lastWorks.resolvedObservers;ly<sy.length;ly++){var my=sy[ly];oy.setFromCenterAndSize(my.position,ay),iy.union(oy)}iy.union(this.lastModels.bounding),iy.getCenter(this.boundingMesh.position),iy.getSize(this.boundingMesh.scale),this.boundingMesh.boundingBox.copy(iy),this.renderer&&this.model&&this.boundingMesh.update(this.renderer,this.camera,this.model)}var cy=X$c("render.prepare",{needsRender:!0,info:null});if(this.emit("render.prepare",cy),!cy.defaultPrevented){var fy=[];$i.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Yi.setFromProjectionMatrix($i);for(var vy=0,dy=this.scene.children;vy<dy.length;vy++){var Ay=dy[vy];Ay!==this.modelGroup&&Ay!==this.boundingMesh&&Ay.traverseVisible(function(Dy){if(Dy.setResolution&&Dy.setResolution(ty.x,ty.y),Dy.setTime&&Dy.setTime(yn),Dy.mixer instanceof AnimationMixer){var qy=fu.get(Dy.mixer);qy||(qy=new Clock,fu.set(Dy.mixer,qy)),Dy.mixer.update(qy.getDelta())}(Dy instanceof Mesh||Dy instanceof Line||Dy instanceof Points)&&(Dy instanceof ImmediateRenderObject||!Dy.frustumCulled||Yi.intersectsObject(Dy))&&fy.push(Dy)})}if(ny.width*ny.height>4096*2048?this.renderSwitch01=this.renderSwitch01^1:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var gy=void 0;if(this.onlyRenderIfNeeds!==!0)gy=this.render();else{if(this.controller&&(this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.controller.modelSceneNeedsRender===!0&&(this.controller.modelSceneNeedsRender=!1,this.modelSceneNeedsRender=!0)),this.camera.needsRender===!0&&(this.camera.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0),this.models.needsRender===!0&&(this.models.needsRender=!1,this.needsRender=!0,this.modelSceneNeedsRender=!0),this.needsRender!==!0)for(var wy=0,Cy=fy;wy<Cy.length;wy++){var My=Cy[wy],Py=function(Dy){Dy.needsRender===!0?(Dy.needsRender=!1,Co.needsRender=!0):Dy.mixer&&Dy.mixer.stats.actions.inUse>0&&(Co.needsRender=!0)};Py(My),My.traverseAncestors(Py)}(this.needsRender!==!1||this.modelSceneNeedsRender!==!1)&&(gy=this.render())}this.needsRender=!1,this.modelSceneNeedsRender=!1,this.hasListener("render")&&this.emit("render",X$c("render",{needsRender:gy!==void 0,info:this.info}))}this.needsRender=!1,this.modelSceneNeedsRender=!1}this.fps.testTime&&yn-this.fps.testTime<1e3?this.fps.testCount++:(this.emit("fps",this.fps.testCount),this.fps.testTime=yn,this.fps.testCount=0)}},vn.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof On&&this.renderer.clear(!0,!0,!0)},vn.prototype.play=function(){this.needsRender=!0,this.modelSceneNeedsRender=!0,this.paused=!1},vn.prototype.moveToPano=function(yn,Rn,Bn){Rn===void 0&&(Rn={}),Bn===void 0&&(Bn=!0);var Co=this,Po=Co.controller,To=Co.renderer;if(!Po)return this.throwError(new Error("controller is not initialized.")),Promise.resolve();if(!To)return this.throwError(new Error("renderer is not initialized.")),Promise.resolve();var Io=this.works.getResolvedObserver(yn);if(!Io)return this.throwError(new Error("pano ".concat(JSON.stringify(yn)," not existed."))),Promise.resolve();var $l={workCode:Io.work.workCode,panoIndex:Io.panoIndex};return"moveToPano"in Po&&typeof Po.moveToPano=="function"?Po.moveToPano($l,Rn,Bn):Io&&(this.pano=$l,this.once("initAnimation.start",function(Wl){Rn.moveStartCallback&&Rn.moveStartCallback(Wl.state)}),this.once("initAnimation.end",function(Wl){Rn.moveEndCallback&&Rn.moveEndCallback(Wl.state)}),this.changeMode(vn.Mode.Panorama,Rn,{effect:Rn.effect},Bn)),this.ready()},vn.prototype.preloadPano=function(yn,Rn){var Bn=this;Rn===void 0&&(Rn=q$q);var Co=this.works.getResolvedObserver(yn);if(!Co)return Promise.reject(new Error("Pano ".concat(JSON.stringify(yn)," never found")));var Po=["right","left","up","down","front","back"],To=Ae$3();return Promise.all(Po.map(function(Io){var $l=O$n({key:"pano.".concat(Co.panoId,".").concat(Io)},Xt$2(Bn.imageOptions,["size","format","quality","mappings"])),Wl=Co.images[Io],Xl=Bn.imageOptions.transform?Bn.imageOptions.transform(Wl,$l):At$1(Wl,$l);return gt$4(Co.work).preload(Xl)})).then(function(){var Io=Ae$3()-To;return Rn(Io),Io})},vn.prototype.project2d=function(yn,Rn){if(Rn===void 0&&(Rn=!1),!this.renderer)return null;if(this.models.length>0&&Rn){var Bn=this.camera.position,Co=yn.clone().sub(Bn),Po=new Raycaster(Bn,Co.clone().normalize());Po.params.Points={threshold:.1};var To=this.models.intersectRaycaster(Po)[0];if(To&&To.distance+.01<Co.length())return null}var Io=yn.clone().project(this.camera);if(Math.abs(Io.z)>1)return null;var $l=this.renderer.getSize(new Vector2),Wl=$l.x*this.scissor.width,Xl=$l.y*this.scissor.height,Yl=$l.x*this.scissor.left+(Io.x+1)/2*Wl,Zl=$l.y*(1-this.scissor.bottom-this.scissor.height)+(-Io.y+1)/2*Xl;return new Vector2(Yl,Zl)},vn.prototype.getRenderObjects=function(yn){$i.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),Yi.setFromProjectionMatrix($i),yn||(yn=this.scene);var Rn=[];return yn.traverseVisible(function(Bn){(Bn instanceof Mesh||Bn instanceof Line||Bn instanceof Points)&&(Bn instanceof ImmediateRenderObject||!Bn.frustumCulled||Yi.intersectsObject(Bn))&&Rn.push(Bn)}),Rn},vn.prototype.getCurrentState=function(){return O$n(O$n({},this.getPose()),{mode:this.currentMode,workCode:this.pano.workCode,panoIndex:this.pano.panoIndex})},vn.prototype.setState=function(yn,Rn,Bn){var Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey;Rn===void 0&&(Rn=!1),Bn===void 0&&(Bn=!0),yn=Object.assign({},yn),yn.offset&&!(yn instanceof Vector3)&&(yn.offset=new Vector3(yn.offset.x,yn.offset.y,yn.offset.z));var Rm;if(typeof yn.panoIndex=="number")if(yn.workCode)Rm={workCode:yn.workCode,panoIndex:yn.panoIndex};else{var ry=(Po=(Co=this.work)===null||Co===void 0?void 0:Co.workCode)!==null&&Po!==void 0?Po:"",_g=this.state.workCode;this.works.filter(function(cy){return cy.workCode===_g}).length>0&&(ry=_g),Rm={workCode:ry,panoIndex:yn.panoIndex}}var ty=(To=yn.mode)!==null&&To!==void 0?To:this.state.mode,ny,iy,oy,ay,uy;if(this.controller&&this.controller.stopMomentumMovement(),this.state.mode!==ty){if(ty==="VRPanorama"){this.changeMode("VRPanorama",void 0,void 0,!0);return}var hy={workCode:Rm==null?void 0:Rm.workCode,panoIndex:Rm==null?void 0:Rm.panoIndex};typeof yn.longitude=="number"&&(hy.longitude=yn.longitude),typeof yn.latitude=="number"&&(hy.latitude=yn.latitude),typeof yn.fov=="number"&&(hy.fov=yn.fov),typeof yn.distance=="number"&&(hy.distance=yn.distance),yn.offset instanceof Vector3&&(hy.offset=yn.offset);var my=O$n(O$n({initial:{state:hy,currentState:this.getCurrentState(),duration:this.modeChangeDuration,effect:"fly",userAction:!1}},this.commonParams()),this.controllerInits[ty]),ly=vt$3[ty].initAnimationEndState(my);ny=ly.longitude,iy=ly.latitude,oy=ly.fov,ay=ly.offset,uy=ly.distance}else ny=(Io=yn.longitude)!==null&&Io!==void 0?Io:this.state.longitude,iy=($l=yn.latitude)!==null&&$l!==void 0?$l:this.state.latitude,oy=(Wl=yn.fov)!==null&&Wl!==void 0?Wl:this.state.fov,ay=(Xl=yn.offset)!==null&&Xl!==void 0?Xl:this.state.offset,uy=(Yl=yn.distance)!==null&&Yl!==void 0?Yl:this.state.distance;var sy={workCode:(Rm!=null?Rm:this.pano).workCode,panoIndex:(Rm!=null?Rm:this.pano).panoIndex,mode:ty,longitude:ny,latitude:iy,fov:oy,offset:ay,distance:uy};this.emit("state.set",X$c("state.set",{userAction:Bn,state:sy})),ln(this.state,sy)||(this.controller&&sy.mode==="VRPanorama"&&sy.mode!==this.state.mode?(Rr$1(this.state,sy),this.changeMode("VRPanorama")):this.controller&&sy.mode==="XRPanorama"&&sy.mode!==this.state.mode?(Rr$1(this.state,sy),this.changeMode("XRPanorama")):(Rr$1(this.state,sy),this.controller&&Bn&&(this.controller.userAction=!1),Rn&&this.state.mode===sy.mode&&(this.syncingState=this.syncState(Ae$3(),0,Rn),this.syncingState&&((Zl=this.controller)===null||Zl===void 0||Zl.updateTime(Ae$3(),0),this.syncingState=!1)),this.emit("state.change",X$c("state.change",{userAction:Bn,state:this.state})),(ey=this.analysis)===null||ey===void 0||ey.state(this.works,this.state)))},vn.prototype.aroundScissor=function(yn){if(this.renderer){if(this.state.mode==="XRPanorama"){yn();return}var Rn=new Vector2,Bn=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(Bn){this.renderer.getSize(Rn);var Co=Math.floor(Rn.x*this.scissor.left),Po=Math.floor(Rn.y*this.scissor.bottom),To=Math.floor(Rn.x*this.scissor.width),Io=Math.floor(Rn.y*this.scissor.height);this.renderer.setViewport(Co,Po,To,Io),this.renderer.setScissor(Co,Po,To,Io),this.renderer.setScissorTest(!0)}yn(),Bn&&(this.renderer.setViewport(0,0,Rn.x,Rn.y),this.renderer.setScissor(0,0,Rn.x,Rn.y),this.renderer.setScissorTest(!1))}},vn.prototype.syncState=function(yn,Rn,Bn){Bn===void 0&&(Bn=!1);var Co=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var Po={mode:this.state.mode,workCode:this.state.workCode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance};return this.changeMode(this.state.mode,Po,this.modeChangeDuration,this.controller.userAction),!0}if(!this.controller.isReady())return!1;if(this.controller instanceof vt$3.Model){if(oa(this.camera.pose.offset,this.state.offset)){var To={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,O$n(O$n({},To),{duration:Bn?0:void 0}),!1),!0}}else{var Io={workCode:this.state.workCode,panoIndex:this.state.panoIndex};if(!Or$1(Io,this.pano)&&"moveToPano"in this.controller&&typeof this.controller.moveToPano=="function"){var To={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset,distance:this.state.distance};return this.controller.moveToPano(Io,To,!1),!0}}if(this.controller instanceof vt$3.Floorplan||this.controller instanceof vt$3.Topview||this.controller instanceof vt$3.Mapview){var $l=1,Wl=.2,Xl=.2,Yl=Math.PI/45,Zl=Bn?this.state.fov:u0(this.camera.pose.fov,this.state.fov,$l),ey=Math.abs(this.camera.pose.distance-this.state.distance),Rm=ey>Xl*15?ey/15:Wl,ry=Bn?this.state.distance:u0(this.camera.pose.distance,this.state.distance,Rm),_g=this.camera.pose.offset.distanceTo(this.state.offset),ty=_g>Xl*15?_g/15:Xl,ny=Bn?new Vector3().copy(this.state.offset):vm(this.camera.pose.offset,this.state.offset,ty),iy=Bn?{longitude:this.state.longitude,latitude:this.state.latitude}:Ns({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Yl),oy=iy.longitude,ay=iy.latitude;if(ir$1(Zl,this.camera.pose.fov)||oa(ny,this.camera.pose.offset)||ir$1(ry,this.camera.pose.distance)||ir$1(oy,this.camera.pose.longitude,Math.PI*2)||ir$1(ay,this.camera.pose.latitude)){var uy={x:ny.x,y:ny.y,z:ny.z},hy={fov:Zl};return Object.assign(uy,{distance:ry}),Object.assign(hy,{longitude:oy,latitude:ay}),this.controller.stopMomentumMovement(),this.controller.cameraMotion.set(hy,0).catch(q$q),this.controller.locationMotion.set(uy,0).catch(q$q),!0}}else{var my=1,ly=Math.PI/45,Zl=Bn?this.state.fov:u0(this.camera.pose.fov,this.state.fov,my),sy=Bn?{longitude:this.state.longitude,latitude:this.state.latitude}:Ns({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},ly),oy=sy.longitude,ay=sy.latitude,ry=this.state.distance,ny=new Vector3().copy(this.state.offset);if(ir$1(ry,this.camera.pose.distance)&&(this.state.distance=this.camera.pose.distance),oa(ny,this.camera.pose.offset)&&(this.state.offset=this.camera.pose.offset.clone()),ir$1(oy,this.camera.pose.longitude,Math.PI*2)||ir$1(ay,this.camera.pose.latitude)||ir$1(Zl,this.camera.pose.fov))return this.controller.stopMomentumMovement(),this.controller.cameraMotion.set({longitude:oy,latitude:ay,fov:Zl},0).catch(q$q),!0}if(this.stateSynced=!0,Co===!1&&this.emit("state.synced",X$c("state.synced",{userAction:!1,state:this.state})),this.readyCallbacks.length&&this.stateSynced){var cy=this.currentMode,fy=cy===vn.Mode.Floorplan||cy===vn.Mode.Topview||cy===vn.Mode.Mapview||cy===vn.Mode.Model;if(!fy||this.models.loaded){var vy=this.readyCallbacks.slice();this.readyCallbacks.length=0;for(var dy=0,Ay=vy;dy<Ay.length;dy++){var gy=Ay[dy];this.controller instanceof vt$3.Panorama&&gy.tile===!0&&!this.controller.isTileReady()?this.readyCallbacks.push(gy):gy()}}}return!1},vn.prototype.ready=function(yn){var Rn=this;return yn===void 0&&(yn={}),new Promise(function(Bn){var Co;Rn.readyCallbacks.push(Object.assign(Bn,{tile:(Co=yn.tile)!==null&&Co!==void 0?Co:!1}))})},vn.prototype.requestFullscreen=function(){var yn;if(ci){var Rn=(yn=this.getElement())===null||yn===void 0?void 0:yn.parentNode;Rn&&"requestFullscreen"in Rn&&typeof document!="undefined"&&document.fullscreenElement===null&&Rn.requestFullscreen()}},vn.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},vn.prototype.throwError=function(yn){this.hasListener("error")?this.emit("error",yn):console.error(yn)},vn.prototype.loadModel=function(yn,Rn){for(var Bn=this,Co,Po,To,Io,$l,Wl,Xl=[],Yl=function(ay){var uy=Zl.models.filter(function(sy){var cy;return((cy=sy.work)===null||cy===void 0?void 0:cy.workCode)===ay.workCode})[0];if(uy)uy.work=ay,Xl.push(uy);else{var hy=new Ls({onError:function(sy){Bn.emit("model.error",X$c("model.error",{work:ay,model:hy,error:sy})),Bn.throwError(sy)},onShownFloorChange:function(sy){Bn.emit("model.changeShownFloor",X$c("model.changeShownFloor",{work:ay,model:hy,error:null}))},onLoad:function(){Bn.emit("model.load",X$c("model.load",{work:ay,model:hy,error:null}))}});Xl.push(hy),Zl.emit("model.request",X$c("model.request",{work:ay,model:hy,error:null}));var my=(To=(Po=(Co=Rn.model)===null||Co===void 0?void 0:Co.textureOptions)!==null&&Po!==void 0?Po:Rn.textureOptions)!==null&&To!==void 0?To:Zl.textureOptions,ly=($l=(Io=Rn.model)===null||Io===void 0?void 0:Io["3d-tiles"])!==null&&$l!==void 0?$l:Rn["3d-tiles"];hy.load(ay,{light:(Wl=Rn.model)===null||Wl===void 0?void 0:Wl.light,textureOptions:my,"3d-tiles":ly})}},Zl=this,ey=0,Rm=yn;ey<Rm.length;ey++){var ry=Rm[ey];Yl(ry)}if(this.models.length>0){for(var _g=0,ty=this.models;_g<ty.length;_g++){var ny=ty[_g];Xl.indexOf(ny)===-1&&this.lastModels.push(ny)}this.models.length=0}for(var iy=0,oy=Xl;iy<oy.length;iy++){var ny=oy[iy];this.models.push(ny)}return this.renderer&&(this.models.loaded=!1),new Promise(function(ay){Bn.on("models.load",function(){Bn.controller&&Bn.controller.updateModel(Bn.models),ay()})})},vn.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,xrCustomObjectsScene:this.xrCustomObjectsScene,helper:this.helperGroup,boundingMesh:this.boundingMesh,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),models:this.models,works:this.works,imageOptions:this.imageOptions,enableWheel:this.enableWheel,enableIOSEDR:this._enableIOSEDR,enableEDL:this.enableEDL,enableHQ:this.enableHQ,extraElements:this.extraElements,videoTexture:this.videoTexture,modelScene:this.modelScene,modelRenderTarget:this.modelRenderTarget,enableLayeringRendering:this.enableLayeringRendering}},vn.prototype.applyController=function(yn,Rn){var Bn=this;if(!this.renderer)throw new Error("renderer is not initialized.");yn!==vn.Mode.Mapview&&(this.enableEDL=!1,this.enableHQ=!1);var Co=vt$3[yn];this.currentMode=yn;for(var Po=new Co(Rn),To=function(Zl){Po.on(Zl,function(){for(var ey=[],Rm=0;Rm<arguments.length;Rm++)ey[Rm]=arguments[Rm];var ry=Bn.emit.apply(Bn,yt$3([Zl],ey,!1));if(ry)return!1})},Io=0,$l=lg;Io<$l.length;Io++){var Wl=$l[Io];To(Wl)}{var Xl=vt$3[yn].initAnimationEndState(Rn),Yl=Rn.initial.userAction;ln(this.state,Xl)||(Rr$1(this.state,Xl),this.emit("state.change",X$c("state.change",{userAction:Yl,state:this.state}))),this.emit("currentState.change",X$c("currentState.change",{userAction:Yl,state:this.getCurrentState()}))}return Po.on("camera.update",function(Zl){var ey;if(Bn.controller){var Rm=Bn.controller.getTargetState();Zl.userAction&&Bn.syncingState===!1&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:Zl.userAction,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}Bn.emit("currentState.change",X$c("currentState.change",{userAction:Zl.userAction,state:Bn.getCurrentState()}))}),Po.on("initAnimation.start",function(Zl){var ey,Rm=Zl.state,ry=Zl.userAction;ry&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:ry,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}),Po.on("initAnimation.end",function(Zl){var ey,Rm=Zl.state,ry=Zl.userAction;Bn.pano={workCode:Rm.workCode,panoIndex:Rm.panoIndex},ry&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:ry,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}),Po.on("pano.moveTo",function(Zl){var ey,Rm=Zl.state,ry=Zl.userAction;Bn.pano={workCode:Rm.workCode,panoIndex:Rm.panoIndex},ry&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:ry,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}),Po.on("pano.arrived",function(Zl){var ey,Rm=Zl.state,ry=Zl.userAction;Bn.pano={workCode:Rm.workCode,panoIndex:Rm.panoIndex},ry&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:ry,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}),Po.on("pano.cancel",function(Zl){var ey,Rm=Zl.state,ry=Zl.userAction;ry&&Bn.state.mode===Rm.mode&&!ln(Bn.state,Rm)&&(Rr$1(Bn.state,Rm),Bn.emit("state.change",X$c("state.change",{userAction:ry,state:Bn.state})),(ey=Bn.analysis)===null||ey===void 0||ey.state(Bn.works,Bn.state))}),Po.on("pano.moveTo",function(Zl){var ey=Zl.userAction;Bn.emit("currentState.change",X$c("currentState.change",{userAction:ey,state:Bn.getCurrentState()}))}),Po.on("pano.request",function(Zl){Bn.emit("pano.request",Zl),Zl.defaultPrevented||Bn.moveToPano(Zl.state,Zl.options,Zl.userAction)}),Po.on("vr.requestExit",function(){Bn.currentMode===vn.Mode.VRPanorama&&(Bn.exitFullscreen(),Bn.changeMode(vn.Mode.Panorama))}),Po.on("error",function(Zl){return Bn.throwError(Zl)}),Po},vn.prototype.removeEventListeners=function(){},vn.prototype.getWorkResources=function(yn){var Rn=this,Bn,Co=this.models.find(function($l){return $l.work===yn}),Po=((Bn=Co==null?void 0:Co.viewLayers)!==null&&Bn!==void 0?Bn:[]).map(function($l){return $l.scene});function To($l){var Wl=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec($l);if(Wl){var Xl=String(Wl[1]).trim().split(".").slice(1).reverse()[0];if(Xl)return Xl}return""}function Io($l,Wl){Wl===void 0&&(Wl=0);var Xl=[];if($l.content&&$l.content.uri){var Yl=To($l.content.uri);if(Yl==="json"){var Zl=At$1($l.content.uri,{key:"model.".concat(Wl)});Xl.push({url:Zl,type:"tileset"})}else if(Yl==="at3d"&&$l.extras[Yl]){var Zl=$l.content.uri;Xl.push({url:Zl,type:"model"});for(var ey=$l.extras[Yl],Rm=ey.textureArray,ry=ey.textureOptions,_g=0,ty=Rm;_g<ty.length;_g++){var ny=ty[_g],iy=O$n({key:"texture.pbm"},Xt$2(ry,["format","quality","size","sharpen","mappings"])),oy=En(ny,ry==null?void 0:ry.transform,iy);Xl.push({url:oy,type:"texture"})}}else{var Zl=At$1($l.content.uri,{key:"model.".concat(Wl)});Xl.push({url:Zl,type:"model"})}}if($l.children)for(var ay=0;ay<$l.children.length;ay++){var uy=$l.children[ay];Xl.push.apply(Xl,Io(uy,ay))}return Xl}return Promise.all(Po.map(function($l){return $l.loadAllTilesets()})).then(function(){for(var $l=[],Wl=["right","left","up","down","front","back"],Xl=0,Yl=yn.observers;Xl<Yl.length;Xl++){for(var Zl=Yl[Xl],ey=0,Rm=Wl;ey<Rm.length;ey++){var ry=Rm[ey],_g=O$n({key:"pano.".concat(_e$3(Zl.pano),".").concat(ry)},Xt$2(Rn.imageOptions,["size","format","quality","mappings"])),ty=Zl.images[ry],ny=En(ty,Rn.imageOptions.transform,_g);$l.push({url:ny,type:"pano"})}if(Zl.images.tiles)for(var iy=0,oy=Zl.images.tiles;iy<oy.length;iy++)for(var ay=oy[iy],uy=0,hy=Wl;uy<hy.length;uy++)for(var ry=hy[uy],my=ay.size,ly=Math.pow(2,ay.level),sy=1/ly,cy=0;cy<ly;cy++)for(var fy=0;fy<ly;fy++){var vy="".concat(Zl.panoId,".").concat(ry,".").concat(ay.level,".").concat(cy,".").concat(fy),_g=O$n(O$n({key:"pano_tile.".concat(vy)},Xt$2(Rn.imageOptions,["format","size","quality","sharpen","mappings"])),{size:ay.scale>=1?void 0:my*sy*ay.scale,cut:sy===1?void 0:[my*sy*fy,my*sy*cy,my*sy,my*sy]}),ny=En(ay[ry],Rn.imageOptions.transform,_g);$l.push({url:ny,type:"pano_tile"})}}for(var dy=0,Ay=Po;dy<Ay.length;dy++){var gy=Ay[dy];gy.tileset.url&&$l.push({url:gy.tileset.url,type:"model"}),$l.push.apply($l,Io(gy.tileset.root))}return $l})},Object.defineProperty(vn.prototype,"internalLightsEnabled",{get:function(){var yn=this.scene.children.find(function(Rn){return Rn.name==="internalLights"});return yn?yn.visible:!1},set:function(yn){var Rn=this.scene.children.find(function(Bn){return Bn.name==="internalLights"});Rn&&(Rn.visible=yn),Rn=this.modelScene.children.find(function(Bn){return Bn.name==="internalLights"}),Rn&&(Rn.visible=yn)},enumerable:!1,configurable:!0}),vn.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",Mapview:"Mapview",VRPanorama:"VRPanorama",XRPanorama:"XRPanorama"},vn.Line=null,vn}(X0),G0={instances:{},constructor:Eg};typeof window!="undefined"&&Object.assign(window,{__FIVE_DEBUG__:G0});var k$r=function(cr,vn){return k$r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yn,Rn){yn.__proto__=Rn}||function(yn,Rn){for(var Bn in Rn)Object.prototype.hasOwnProperty.call(Rn,Bn)&&(yn[Bn]=Rn[Bn])},k$r(cr,vn)};function B$s(cr,vn){if(typeof vn!="function"&&vn!==null)throw new TypeError("Class extends value "+String(vn)+" is not a constructor or null");k$r(cr,vn);function yn(){this.constructor=cr}cr.prototype=vn===null?Object.create(vn):(yn.prototype=vn.prototype,new yn)}var g$C=function(){return g$C=Object.assign||function(cr){for(var vn,yn=1,Rn=arguments.length;yn<Rn;yn++){vn=arguments[yn];for(var Bn in vn)Object.prototype.hasOwnProperty.call(vn,Bn)&&(cr[Bn]=vn[Bn])}return cr},g$C.apply(this,arguments)},E$x=[],R$q=[];function ie$5(cr){var vn=cr===void 0?{}:cr,yn=vn.backgroundColor,Rn=yn===void 0?1579548:yn,Bn=vn.backgroundAlpha,Co=Bn===void 0?1:Bn,Po=vn.preserveDrawingBuffer,To=Po===void 0?!0:Po,Io=vn.pixelRatio,$l=Io===void 0?1:Io,Wl=vn.webgl2,Xl=Wl===void 0?!1:Wl;if(typeof window!="undefined"){var Yl=null;if(Xl?Yl=E$x.shift():Yl=R$q.shift(),!Yl){if(Xl){var Zl=document.createElement("canvas"),ey=Zl.getContext("webgl2");ey?Yl=new WebGLRenderer({preserveDrawingBuffer:To,antialias:!0,alpha:!0,stencil:!0,canvas:Zl,context:ey}):(console.error("error occurred when getting webgl2 canvas context, mybe webgl2 not support, fallback to webgl."),Yl=new WebGLRenderer({preserveDrawingBuffer:To,antialias:!1,alpha:!0,stencil:!0}))}else Yl=new WebGLRenderer({preserveDrawingBuffer:To,antialias:!1,alpha:!0,stencil:!0});Yl.outputEncoding=sRGBEncoding}return Yl.setPixelRatio($l),Yl.setClearColor(Rn,Co),Yl.autoClear=!0,Yl}}function se$4(cr){if(cr){var vn=cr.capabilities.isWebGL2;vn?R$q.indexOf(cr)===-1&&R$q.push(cr):E$x.indexOf(cr)===-1&&E$x.push(cr)}}var L$p=react.exports.createContext(null);function p$D(){var cr=react.exports.useContext(L$p);if(!cr)throw new Error("FiveProvider never found.");return cr.five}function ce$3(cr,vn){var yn=Array.isArray(cr)?cr:[cr],Rn=Array.isArray(vn)?vn:[vn];if(yn.length!==Rn.length)return!1;for(var Bn=0;Bn<yn.length;Bn++)if(yn[Bn].workCode!==Rn[Bn].workCode)return!1;return!0}function Ge$2(cr){return cr===void 0&&(cr={}),function(vn){B$s(yn,vn);function yn(Rn){var Bn=vn.call(this,Rn)||this;return Bn.__fiveEventDisposers=[],Bn.__fiveDisposeTimer=null,Bn.five=new Eg(g$C(g$C({},cr),{renderer:void 0})),Bn.loadWork=Bn.loadWork.bind(Bn),Bn.state={},Bn}return yn.prototype.loadWork=function(Rn,Bn,Co,Po){if(Po===void 0&&(Po=!0),this.props.work)throw new Error("props 'works' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(Rn,Bn,Co,Po)},yn.prototype.shouldComponentUpdate=function(Rn){return this.five.renderer&&this.five&&Rn.work&&!ce$3(Rn.work,this.five.works)&&this.five.load(Rn.work,Rn.initialState,Rn.initialOptions),!0},yn.prototype.componentDidMount=function(){var Rn=this,Bn;clearTimeout(this.__fiveDisposeTimer),this.__fiveDisposeTimer=null;var Co;if(typeof window!="undefined"){var Po=hg(),To=Po===1?window.devicePixelRatio:1;Co=ie$5({pixelRatio:To,backgroundAlpha:cr.backgroundAlpha,backgroundColor:cr.backgroundColor,webgl2:cr==null?void 0:cr.webgl2,preserveDrawingBuffer:cr==null?void 0:cr.preserveDrawingBuffer})}this.five.renderer=Co,this.setState({renderer:Co}),this.__fiveEventDisposers.push(this.five.on("load",function(){Rn.props.onWorksChange&&Rn.props.onWorksChange(Rn.five.works)})),this.__fiveEventDisposers.push(this.five.on("stateChange",function($l,Wl){Rn.props.onStateChange&&Rn.props.onStateChange($l,Wl)})),this.__fiveEventDisposers.push(this.five.on("currentStateChange",function($l,Wl){Rn.props.onCurrentStateChange&&Rn.props.onCurrentStateChange($l,Wl)})),this.__fiveEventDisposers.push(this.five.on("error",function($l){Rn.props.onError?Rn.props.onError($l):console.warn($l.message)}));var Io=this.props.work||this.props.initialWork;Io&&this.five.load(Io,this.props.initialState,this.props.initialOptions,(Bn=this.props.initialUserAction)!==null&&Bn!==void 0?Bn:!0)},yn.prototype.componentWillUnmount=function(){var Rn=this,Bn;(Bn=this.five.controller)===null||Bn===void 0||Bn.destroy();var Co=this.five.renderer;this.five.renderer=void 0,se$4(Co),this.setState({renderer:void 0}),this.__fiveDisposeTimer=setTimeout(function(){Rn.__fiveDisposeTimer=null,Rn.five.dispose()},1e3)},yn.prototype.render=function(){var Rn=this.five,Bn=this.loadWork,Co=this.state.renderer;return react.exports.createElement(L$p.Provider,{value:{renderer:Co,five:Rn,loadWork:Bn}},this.props.children)},yn}(react.exports.Component)}var fe$5=typeof window!="undefined"?react.exports.useLayoutEffect:react.exports.useEffect,le$2={display:"inline-block",overflow:"hidden"},Ae$2=function(cr){var vn=cr.width,yn=cr.height,Rn=p$D(),Bn=react.exports.createRef(),Co=g$C({width:vn,height:yn},le$2);return fe$5(function(){var Po=Bn.current;if(Po&&Rn.renderer){var To=Rn.renderer.domElement;if(To.parentNode!==null&&To.parentNode!==Po)throw new Error("There are more than 2 fiveCanvas in this context.");return To.parentNode!==Po&&Po.appendChild(To),Rn.camera.aspect=vn/yn,Rn.camera.updateProjectionMatrix(),Rn.renderer.setSize(vn,yn),Rn.refresh({width:vn,height:yn}),Rn.needsRender=!0,function(){To.parentNode===Po&&Po.removeChild(To)}}},[Rn,Rn.renderer,vn,yn,Bn.current]),react.exports.createElement("div",{ref:Bn,style:Co})};function Ie$2(){return p$D()}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$K=react.exports,k$q=Symbol.for("react.element"),l$x=Symbol.for("react.fragment"),m$C=Object.prototype.hasOwnProperty,n$x=f$K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$C={key:!0,ref:!0,__self:!0,__source:!0};function q$p(cr,vn,yn){var Rn,Bn={},Co=null,Po=null;yn!==void 0&&(Co=""+yn),vn.key!==void 0&&(Co=""+vn.key),vn.ref!==void 0&&(Po=vn.ref);for(Rn in vn)m$C.call(vn,Rn)&&!p$C.hasOwnProperty(Rn)&&(Bn[Rn]=vn[Rn]);if(cr&&cr.defaultProps)for(Rn in vn=cr.defaultProps,vn)Bn[Rn]===void 0&&(Bn[Rn]=vn[Rn]);return{$$typeof:k$q,type:cr,key:Co,ref:Po,props:Bn,_owner:n$x.current}}reactJsxRuntime_production_min.Fragment=l$x;reactJsxRuntime_production_min.jsx=q$p;reactJsxRuntime_production_min.jsxs=q$p;jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(cr){(function(){var vn={}.hasOwnProperty;function yn(){for(var Co="",Po=0;Po<arguments.length;Po++){var To=arguments[Po];To&&(Co=Bn(Co,Rn(To)))}return Co}function Rn(Co){if(typeof Co=="string"||typeof Co=="number")return Co;if(typeof Co!="object")return"";if(Array.isArray(Co))return yn.apply(null,Co);if(Co.toString!==Object.prototype.toString&&!Co.toString.toString().includes("[native code]"))return Co.toString();var Po="";for(var To in Co)vn.call(Co,To)&&Co[To]&&(Po=Bn(Po,To));return Po}function Bn(Co,Po){return Po?Co?Co+" "+Po:Co+Po:Co}cr.exports?(yn.default=yn,cr.exports=yn):window.classNames=yn})()})(classnames);var classNames=classnames.exports;function die(cr){for(var vn=arguments.length,yn=new Array(vn>1?vn-1:0),Rn=1;Rn<vn;Rn++)yn[Rn-1]=arguments[Rn];throw new Error(typeof cr=="number"?"[MobX] minified error nr: "+cr+(yn.length?" "+yn.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+cr)}var mockGlobal={};function getGlobal(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:mockGlobal}var assign=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy!="undefined",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(cr){var vn=!1;return function(){if(!vn)return vn=!0,cr.apply(this,arguments)}}var noop=function cr(){};function isFunction(cr){return typeof cr=="function"}function isStringish(cr){var vn=typeof cr;switch(vn){case"string":case"symbol":case"number":return!0}return!1}function isObject(cr){return cr!==null&&typeof cr=="object"}function isPlainObject(cr){if(!isObject(cr))return!1;var vn=Object.getPrototypeOf(cr);if(vn==null)return!0;var yn=Object.hasOwnProperty.call(vn,"constructor")&&vn.constructor;return typeof yn=="function"&&yn.toString()===plainObjectString}function isGenerator(cr){var vn=cr==null?void 0:cr.constructor;return vn?vn.name==="GeneratorFunction"||vn.displayName==="GeneratorFunction":!1}function addHiddenProp(cr,vn,yn){defineProperty(cr,vn,{enumerable:!1,writable:!0,configurable:!0,value:yn})}function addHiddenFinalProp(cr,vn,yn){defineProperty(cr,vn,{enumerable:!1,writable:!1,configurable:!0,value:yn})}function createInstanceofPredicate(cr,vn){var yn="isMobX"+cr;return vn.prototype[yn]=!0,function(Rn){return isObject(Rn)&&Rn[yn]===!0}}function isES6Map(cr){return cr!=null&&Object.prototype.toString.call(cr)==="[object Map]"}function isPlainES6Map(cr){var vn=Object.getPrototypeOf(cr),yn=Object.getPrototypeOf(vn),Rn=Object.getPrototypeOf(yn);return Rn===null}function isES6Set(cr){return cr!=null&&Object.prototype.toString.call(cr)==="[object Set]"}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols!="undefined";function getPlainObjectKeys(cr){var vn=Object.keys(cr);if(!hasGetOwnPropertySymbols)return vn;var yn=Object.getOwnPropertySymbols(cr);return yn.length?[].concat(vn,yn.filter(function(Rn){return objectPrototype.propertyIsEnumerable.call(cr,Rn)})):vn}var ownKeys=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(cr){return Object.getOwnPropertyNames(cr).concat(Object.getOwnPropertySymbols(cr))}:Object.getOwnPropertyNames;function toPrimitive(cr){return cr===null?null:typeof cr=="object"?""+cr:cr}function hasProp(cr,vn){return objectPrototype.hasOwnProperty.call(cr,vn)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function cr(vn){var yn={};return ownKeys(vn).forEach(function(Rn){yn[Rn]=getDescriptor(vn,Rn)}),yn};function getFlag(cr,vn){return!!(cr&vn)}function setFlag(cr,vn,yn){return yn?cr|=vn:cr&=~vn,cr}function _arrayLikeToArray(cr,vn){(vn==null||vn>cr.length)&&(vn=cr.length);for(var yn=0,Rn=Array(vn);yn<vn;yn++)Rn[yn]=cr[yn];return Rn}function _defineProperties(cr,vn){for(var yn=0;yn<vn.length;yn++){var Rn=vn[yn];Rn.enumerable=Rn.enumerable||!1,Rn.configurable=!0,"value"in Rn&&(Rn.writable=!0),Object.defineProperty(cr,_toPropertyKey(Rn.key),Rn)}}function _createClass(cr,vn,yn){return vn&&_defineProperties(cr.prototype,vn),yn&&_defineProperties(cr,yn),Object.defineProperty(cr,"prototype",{writable:!1}),cr}function _createForOfIteratorHelperLoose(cr,vn){var yn=typeof Symbol!="undefined"&&cr[Symbol.iterator]||cr["@@iterator"];if(yn)return(yn=yn.call(cr)).next.bind(yn);if(Array.isArray(cr)||(yn=_unsupportedIterableToArray(cr))||vn&&cr&&typeof cr.length=="number"){yn&&(cr=yn);var Rn=0;return function(){return Rn>=cr.length?{done:!0}:{done:!1,value:cr[Rn++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(cr){for(var vn=1;vn<arguments.length;vn++){var yn=arguments[vn];for(var Rn in yn)({}).hasOwnProperty.call(yn,Rn)&&(cr[Rn]=yn[Rn])}return cr},_extends.apply(null,arguments)}function _inheritsLoose(cr,vn){cr.prototype=Object.create(vn.prototype),cr.prototype.constructor=cr,_setPrototypeOf(cr,vn)}function _setPrototypeOf(cr,vn){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(yn,Rn){return yn.__proto__=Rn,yn},_setPrototypeOf(cr,vn)}function _toPrimitive(cr,vn){if(typeof cr!="object"||!cr)return cr;var yn=cr[Symbol.toPrimitive];if(yn!==void 0){var Rn=yn.call(cr,vn||"default");if(typeof Rn!="object")return Rn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(vn==="string"?String:Number)(cr)}function _toPropertyKey(cr){var vn=_toPrimitive(cr,"string");return typeof vn=="symbol"?vn:vn+""}function _unsupportedIterableToArray(cr,vn){if(cr){if(typeof cr=="string")return _arrayLikeToArray(cr,vn);var yn={}.toString.call(cr).slice(8,-1);return yn==="Object"&&cr.constructor&&(yn=cr.constructor.name),yn==="Map"||yn==="Set"?Array.from(cr):yn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yn)?_arrayLikeToArray(cr,vn):void 0}}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(cr){function vn(yn,Rn){if(is20223Decorator(Rn))return cr.decorate_20223_(yn,Rn);storeAnnotation(yn,Rn,cr)}return Object.assign(vn,cr)}function storeAnnotation(cr,vn,yn){hasProp(cr,storedAnnotationsSymbol)||addHiddenProp(cr,storedAnnotationsSymbol,_extends({},cr[storedAnnotationsSymbol])),isOverride(yn)||(cr[storedAnnotationsSymbol][vn]=yn)}function collectStoredAnnotations(cr){return hasProp(cr,storedAnnotationsSymbol)||addHiddenProp(cr,storedAnnotationsSymbol,_extends({},cr[storedAnnotationsSymbol])),cr[storedAnnotationsSymbol]}function is20223Decorator(cr){return typeof cr=="object"&&typeof cr.kind=="string"}var $mobx=Symbol("mobx administration"),Atom=function(){function cr(yn){yn===void 0&&(yn="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=yn}var vn=cr.prototype;return vn.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Rn){return Rn()})},vn.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Rn){return Rn()})},vn.reportObserved=function(){return reportObserved(this)},vn.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},vn.toString=function(){return this.name_},_createClass(cr,[{key:"isBeingObserved",get:function(){return getFlag(this.flags_,cr.isBeingObservedMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isBeingObservedMask_,Rn)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,cr.isPendingUnobservationMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isPendingUnobservationMask_,Rn)}},{key:"diffValue",get:function(){return getFlag(this.flags_,cr.diffValueMask_)?1:0},set:function(Rn){this.flags_=setFlag(this.flags_,cr.diffValueMask_,Rn===1)}}])}();Atom.isBeingObservedMask_=1;Atom.isPendingUnobservationMask_=2;Atom.diffValueMask_=4;var isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(cr,vn,yn){vn===void 0&&(vn=noop),yn===void 0&&(yn=noop);var Rn=new Atom(cr);return vn!==noop&&onBecomeObserved(Rn,vn),yn!==noop&&onBecomeUnobserved(Rn,yn),Rn}function identityComparer(cr,vn){return cr===vn}function structuralComparer(cr,vn){return deepEqual(cr,vn)}function shallowComparer(cr,vn){return deepEqual(cr,vn,1)}function defaultComparer(cr,vn){return Object.is?Object.is(cr,vn):cr===vn?cr!==0||1/cr===1/vn:cr!==cr&&vn!==vn}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(cr,vn,yn){return isObservable(cr)?cr:Array.isArray(cr)?observable.array(cr,{name:yn}):isPlainObject(cr)?observable.object(cr,void 0,{name:yn}):isES6Map(cr)?observable.map(cr,{name:yn}):isES6Set(cr)?observable.set(cr,{name:yn}):typeof cr=="function"&&!isAction(cr)&&!isFlow(cr)?isGenerator(cr)?flow(cr):autoAction(yn,cr):cr}function shallowEnhancer(cr,vn,yn){if(cr==null||isObservableObject(cr)||isObservableArray(cr)||isObservableMap(cr)||isObservableSet(cr))return cr;if(Array.isArray(cr))return observable.array(cr,{name:yn,deep:!1});if(isPlainObject(cr))return observable.object(cr,void 0,{name:yn,deep:!1});if(isES6Map(cr))return observable.map(cr,{name:yn,deep:!1});if(isES6Set(cr))return observable.set(cr,{name:yn,deep:!1})}function referenceEnhancer(cr){return cr}function refStructEnhancer(cr,vn){return deepEqual(cr,vn)?vn:cr}var OVERRIDE="override";function isOverride(cr){return cr.annotationType_===OVERRIDE}function createActionAnnotation(cr,vn){return{annotationType_:cr,options_:vn,make_:make_$1,extend_:extend_$1,decorate_20223_:decorate_20223_$1}}function make_$1(cr,vn,yn,Rn){var Bn;if((Bn=this.options_)!=null&&Bn.bound)return this.extend_(cr,vn,yn,!1)===null?0:1;if(Rn===cr.target_)return this.extend_(cr,vn,yn,!1)===null?0:2;if(isAction(yn.value))return 1;var Co=createActionDescriptor(cr,this,vn,yn,!1);return defineProperty(Rn,vn,Co),2}function extend_$1(cr,vn,yn,Rn){var Bn=createActionDescriptor(cr,this,vn,yn);return cr.defineProperty_(vn,Bn,Rn)}function decorate_20223_$1(cr,vn){var yn=vn.kind,Rn=vn.name,Bn=vn.addInitializer,Co=this,Po=function($l){var Wl,Xl,Yl,Zl;return createAction((Wl=(Xl=Co.options_)==null?void 0:Xl.name)!=null?Wl:Rn.toString(),$l,(Yl=(Zl=Co.options_)==null?void 0:Zl.autoAction)!=null?Yl:!1)};if(yn=="field")return function(Io){var $l,Wl=Io;return isAction(Wl)||(Wl=Po(Wl)),($l=Co.options_)!=null&&$l.bound&&(Wl=Wl.bind(this),Wl.isMobxAction=!0),Wl};if(yn=="method"){var To;return isAction(cr)||(cr=Po(cr)),(To=this.options_)!=null&&To.bound&&Bn(function(){var Io=this,$l=Io[Rn].bind(Io);$l.isMobxAction=!0,Io[Rn]=$l}),cr}die("Cannot apply '"+Co.annotationType_+"' to '"+String(Rn)+"' (kind: "+yn+"):"+(`
'`+Co.annotationType_+"' can only be used on properties with a function value."))}function assertActionDescriptor(cr,vn,yn,Rn){vn.annotationType_,Rn.value}function createActionDescriptor(cr,vn,yn,Rn,Bn){var Co,Po,To,Io,$l,Wl,Xl;Bn===void 0&&(Bn=globalState.safeDescriptors),assertActionDescriptor(cr,vn,yn,Rn);var Yl=Rn.value;if((Co=vn.options_)!=null&&Co.bound){var Zl;Yl=Yl.bind((Zl=cr.proxy_)!=null?Zl:cr.target_)}return{value:createAction((Po=(To=vn.options_)==null?void 0:To.name)!=null?Po:yn.toString(),Yl,(Io=($l=vn.options_)==null?void 0:$l.autoAction)!=null?Io:!1,(Wl=vn.options_)!=null&&Wl.bound?(Xl=cr.proxy_)!=null?Xl:cr.target_:void 0),configurable:Bn?cr.isPlainObject_:!0,enumerable:!1,writable:!Bn}}function createFlowAnnotation(cr,vn){return{annotationType_:cr,options_:vn,make_:make_$2,extend_:extend_$2,decorate_20223_:decorate_20223_$2}}function make_$2(cr,vn,yn,Rn){var Bn;if(Rn===cr.target_)return this.extend_(cr,vn,yn,!1)===null?0:2;if((Bn=this.options_)!=null&&Bn.bound&&(!hasProp(cr.target_,vn)||!isFlow(cr.target_[vn]))&&this.extend_(cr,vn,yn,!1)===null)return 0;if(isFlow(yn.value))return 1;var Co=createFlowDescriptor(cr,this,vn,yn,!1,!1);return defineProperty(Rn,vn,Co),2}function extend_$2(cr,vn,yn,Rn){var Bn,Co=createFlowDescriptor(cr,this,vn,yn,(Bn=this.options_)==null?void 0:Bn.bound);return cr.defineProperty_(vn,Co,Rn)}function decorate_20223_$2(cr,vn){var yn,Rn=vn.name,Bn=vn.addInitializer;return isFlow(cr)||(cr=flow(cr)),(yn=this.options_)!=null&&yn.bound&&Bn(function(){var Co=this,Po=Co[Rn].bind(Co);Po.isMobXFlow=!0,Co[Rn]=Po}),cr}function assertFlowDescriptor(cr,vn,yn,Rn){vn.annotationType_,Rn.value}function createFlowDescriptor(cr,vn,yn,Rn,Bn,Co){Co===void 0&&(Co=globalState.safeDescriptors),assertFlowDescriptor(cr,vn,yn,Rn);var Po=Rn.value;if(isFlow(Po)||(Po=flow(Po)),Bn){var To;Po=Po.bind((To=cr.proxy_)!=null?To:cr.target_),Po.isMobXFlow=!0}return{value:Po,configurable:Co?cr.isPlainObject_:!0,enumerable:!1,writable:!Co}}function createComputedAnnotation(cr,vn){return{annotationType_:cr,options_:vn,make_:make_$3,extend_:extend_$3,decorate_20223_:decorate_20223_$3}}function make_$3(cr,vn,yn){return this.extend_(cr,vn,yn,!1)===null?0:1}function extend_$3(cr,vn,yn,Rn){return assertComputedDescriptor(cr,this,vn,yn),cr.defineComputedProperty_(vn,_extends({},this.options_,{get:yn.get,set:yn.set}),Rn)}function decorate_20223_$3(cr,vn){var yn=this,Rn=vn.name,Bn=vn.addInitializer;return Bn(function(){var Co=asObservableObject(this)[$mobx],Po=_extends({},yn.options_,{get:cr,context:this});Po.name||(Po.name="ObservableObject."+Rn.toString()),Co.values_.set(Rn,new ComputedValue(Po))}),function(){return this[$mobx].getObservablePropValue_(Rn)}}function assertComputedDescriptor(cr,vn,yn,Rn){vn.annotationType_,Rn.get}function createObservableAnnotation(cr,vn){return{annotationType_:cr,options_:vn,make_:make_$4,extend_:extend_$4,decorate_20223_:decorate_20223_$4}}function make_$4(cr,vn,yn){return this.extend_(cr,vn,yn,!1)===null?0:1}function extend_$4(cr,vn,yn,Rn){var Bn,Co;return assertObservableDescriptor(cr,this),cr.defineObservableProperty_(vn,yn.value,(Bn=(Co=this.options_)==null?void 0:Co.enhancer)!=null?Bn:deepEnhancer,Rn)}function decorate_20223_$4(cr,vn){var yn=this,Rn=vn.kind,Bn=vn.name,Co=new WeakSet;function Po(To,Io){var $l,Wl,Xl=asObservableObject(To)[$mobx],Yl=new ObservableValue(Io,($l=(Wl=yn.options_)==null?void 0:Wl.enhancer)!=null?$l:deepEnhancer,"ObservableObject."+Bn.toString(),!1);Xl.values_.set(Bn,Yl),Co.add(To)}if(Rn=="accessor")return{get:function(){return Co.has(this)||Po(this,cr.get.call(this)),this[$mobx].getObservablePropValue_(Bn)},set:function(Io){return Co.has(this)||Po(this,Io),this[$mobx].setObservablePropValue_(Bn,Io)},init:function(Io){return Co.has(this)||Po(this,Io),Io}}}function assertObservableDescriptor(cr,vn,yn,Rn){vn.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(cr){return{annotationType_:AUTO,options_:cr,make_:make_$5,extend_:extend_$5,decorate_20223_:decorate_20223_$5}}function make_$5(cr,vn,yn,Rn){var Bn,Co;if(yn.get)return computed.make_(cr,vn,yn,Rn);if(yn.set){var Po=createAction(vn.toString(),yn.set);return Rn===cr.target_?cr.defineProperty_(vn,{configurable:globalState.safeDescriptors?cr.isPlainObject_:!0,set:Po})===null?0:2:(defineProperty(Rn,vn,{configurable:!0,set:Po}),2)}if(Rn!==cr.target_&&typeof yn.value=="function"){var To;if(isGenerator(yn.value)){var Io,$l=(Io=this.options_)!=null&&Io.autoBind?flow.bound:flow;return $l.make_(cr,vn,yn,Rn)}var Wl=(To=this.options_)!=null&&To.autoBind?autoAction.bound:autoAction;return Wl.make_(cr,vn,yn,Rn)}var Xl=((Bn=this.options_)==null?void 0:Bn.deep)===!1?observable.ref:observable;if(typeof yn.value=="function"&&(Co=this.options_)!=null&&Co.autoBind){var Yl;yn.value=yn.value.bind((Yl=cr.proxy_)!=null?Yl:cr.target_)}return Xl.make_(cr,vn,yn,Rn)}function extend_$5(cr,vn,yn,Rn){var Bn,Co;if(yn.get)return computed.extend_(cr,vn,yn,Rn);if(yn.set)return cr.defineProperty_(vn,{configurable:globalState.safeDescriptors?cr.isPlainObject_:!0,set:createAction(vn.toString(),yn.set)},Rn);if(typeof yn.value=="function"&&(Bn=this.options_)!=null&&Bn.autoBind){var Po;yn.value=yn.value.bind((Po=cr.proxy_)!=null?Po:cr.target_)}var To=((Co=this.options_)==null?void 0:Co.deep)===!1?observable.ref:observable;return To.extend_(cr,vn,yn,Rn)}function decorate_20223_$5(cr,vn){die("'"+this.annotationType_+"' cannot be used as a decorator")}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(cr){return cr||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(cr){return cr.deep===!0?deepEnhancer:cr.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(cr.defaultDecorator)}function getAnnotationFromOptions(cr){var vn;return cr?(vn=cr.defaultDecorator)!=null?vn:createAutoAnnotation(cr):void 0}function getEnhancerFromAnnotation(cr){var vn,yn;return cr&&(vn=(yn=cr.options_)==null?void 0:yn.enhancer)!=null?vn:deepEnhancer}function createObservable(cr,vn,yn){if(is20223Decorator(vn))return observableAnnotation.decorate_20223_(cr,vn);if(isStringish(vn)){storeAnnotation(cr,vn,observableAnnotation);return}return isObservable(cr)?cr:isPlainObject(cr)?observable.object(cr,vn,yn):Array.isArray(cr)?observable.array(cr,vn):isES6Map(cr)?observable.map(cr,vn):isES6Set(cr)?observable.set(cr,vn):typeof cr=="object"&&cr!==null?cr:observable.box(cr,vn)}assign(createObservable,observableDecoratorAnnotation);var observableFactories={box:function cr(vn,yn){var Rn=asCreateObservableOptions(yn);return new ObservableValue(vn,getEnhancerFromOptions(Rn),Rn.name,!0,Rn.equals)},array:function cr(vn,yn){var Rn=asCreateObservableOptions(yn);return(globalState.useProxies===!1||Rn.proxy===!1?createLegacyArray:createObservableArray)(vn,getEnhancerFromOptions(Rn),Rn.name)},map:function cr(vn,yn){var Rn=asCreateObservableOptions(yn);return new ObservableMap(vn,getEnhancerFromOptions(Rn),Rn.name)},set:function cr(vn,yn){var Rn=asCreateObservableOptions(yn);return new ObservableSet(vn,getEnhancerFromOptions(Rn),Rn.name)},object:function cr(vn,yn,Rn){return initObservable(function(){return extendObservable(globalState.useProxies===!1||(Rn==null?void 0:Rn.proxy)===!1?asObservableObject({},Rn):asDynamicObservableObject({},Rn),vn,yn)})},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function cr(vn,yn){if(is20223Decorator(yn))return computedAnnotation.decorate_20223_(vn,yn);if(isStringish(yn))return storeAnnotation(vn,yn,computedAnnotation);if(isPlainObject(vn))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,vn));var Rn=isPlainObject(yn)?yn:{};return Rn.get=vn,Rn.name||(Rn.name=vn.name||""),new ComputedValue(Rn)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(cr,vn,yn,Rn){yn===void 0&&(yn=!1);function Bn(){return executeAction(cr,yn,vn,Rn||this,arguments)}return Bn.isMobxAction=!0,Bn.toString=function(){return vn.toString()},isFunctionNameConfigurable&&(tmpNameDescriptor.value=cr,defineProperty(Bn,"name",tmpNameDescriptor)),Bn}function executeAction(cr,vn,yn,Rn,Bn){var Co=_startAction(cr,vn);try{return yn.apply(Rn,Bn)}catch(Po){throw Co.error_=Po,Po}finally{_endAction(Co)}}function _startAction(cr,vn,yn,Rn){var Bn=!1,Co=0,Po=globalState.trackingDerivation,To=!vn||!Po;startBatch();var Io=globalState.allowStateChanges;To&&(untrackedStart(),Io=allowStateChangesStart(!0));var $l=allowStateReadsStart(!0),Wl={runAsAction_:To,prevDerivation_:Po,prevAllowStateChanges_:Io,prevAllowStateReads_:$l,notifySpy_:Bn,startTime_:Co,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=Wl.actionId_,Wl}function _endAction(cr){currentActionId!==cr.actionId_&&die(30),currentActionId=cr.parentActionId_,cr.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(cr.prevAllowStateChanges_),allowStateReadsEnd(cr.prevAllowStateReads_),endBatch(),cr.runAsAction_&&untrackedEnd(cr.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(cr,vn){var yn=allowStateChangesStart(cr);try{return vn()}finally{allowStateChangesEnd(yn)}}function allowStateChangesStart(cr){var vn=globalState.allowStateChanges;return globalState.allowStateChanges=cr,vn}function allowStateChangesEnd(cr){globalState.allowStateChanges=cr}var ObservableValue=function(cr){function vn(Rn,Bn,Co,Po,To){var Io;return Co===void 0&&(Co="ObservableValue"),To===void 0&&(To=comparer.default),Io=cr.call(this,Co)||this,Io.enhancer=void 0,Io.name_=void 0,Io.equals=void 0,Io.hasUnreportedChange_=!1,Io.interceptors_=void 0,Io.changeListeners_=void 0,Io.value_=void 0,Io.dehancer=void 0,Io.enhancer=Bn,Io.name_=Co,Io.equals=To,Io.value_=Bn(Rn,void 0,Co),Io}_inheritsLoose(vn,cr);var yn=vn.prototype;return yn.dehanceValue=function(Bn){return this.dehancer!==void 0?this.dehancer(Bn):Bn},yn.set=function(Bn){this.value_,Bn=this.prepareNewValue_(Bn),Bn!==globalState.UNCHANGED&&this.setNewValue_(Bn)},yn.prepareNewValue_=function(Bn){if(hasInterceptors(this)){var Co=interceptChange(this,{object:this,type:UPDATE,newValue:Bn});if(!Co)return globalState.UNCHANGED;Bn=Co.newValue}return Bn=this.enhancer(Bn,this.value_,this.name_),this.equals(this.value_,Bn)?globalState.UNCHANGED:Bn},yn.setNewValue_=function(Bn){var Co=this.value_;this.value_=Bn,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:Bn,oldValue:Co})},yn.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},yn.intercept_=function(Bn){return registerInterceptor(this,Bn)},yn.observe_=function(Bn,Co){return Co&&Bn({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,Bn)},yn.raw=function(){return this.value_},yn.toJSON=function(){return this.get()},yn.toString=function(){return this.name_+"["+this.value_+"]"},yn.valueOf=function(){return toPrimitive(this.get())},yn[Symbol.toPrimitive]=function(){return this.valueOf()},vn}(Atom),ComputedValue=function(){function cr(yn){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,yn.get||die(31),this.derivation=yn.get,this.name_=yn.name||"ComputedValue",yn.set&&(this.setter_=createAction("ComputedValue-setter",yn.set)),this.equals_=yn.equals||(yn.compareStructural||yn.struct?comparer.structural:comparer.default),this.scope_=yn.context,this.requiresReaction_=yn.requiresReaction,this.keepAlive_=!!yn.keepAlive}var vn=cr.prototype;return vn.onBecomeStale_=function(){propagateMaybeChanged(this)},vn.onBO=function(){this.onBOL&&this.onBOL.forEach(function(Rn){return Rn()})},vn.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(Rn){return Rn()})},vn.get=function(){if(this.isComputing&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var Rn=globalState.trackingContext;this.keepAlive_&&!Rn&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=Rn}var Bn=this.value_;if(isCaughtException(Bn))throw Bn.cause;return Bn},vn.set=function(Rn){if(this.setter_){this.isRunningSetter&&die(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,Rn)}finally{this.isRunningSetter=!1}}else die(34,this.name_)},vn.trackAndCompute=function(){var Rn=this.value_,Bn=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,Co=this.computeValue_(!0),Po=Bn||isCaughtException(Rn)||isCaughtException(Co)||!this.equals_(Rn,Co);return Po&&(this.value_=Co),Po},vn.computeValue_=function(Rn){this.isComputing=!0;var Bn=allowStateChangesStart(!1),Co;if(Rn)Co=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)Co=this.derivation.call(this.scope_);else try{Co=this.derivation.call(this.scope_)}catch(Po){Co=new CaughtException(Po)}return allowStateChangesEnd(Bn),this.isComputing=!1,Co},vn.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},vn.observe_=function(Rn,Bn){var Co=this,Po=!0,To=void 0;return autorun(function(){var Io=Co.get();if(!Po||Bn){var $l=untrackedStart();Rn({observableKind:"computed",debugObjectName:Co.name_,type:UPDATE,object:Co,newValue:Io,oldValue:To}),untrackedEnd($l)}Po=!1,To=Io})},vn.warnAboutUntrackedRead_=function(){},vn.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},vn.valueOf=function(){return toPrimitive(this.get())},vn[Symbol.toPrimitive]=function(){return this.valueOf()},_createClass(cr,[{key:"isComputing",get:function(){return getFlag(this.flags_,cr.isComputingMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isComputingMask_,Rn)}},{key:"isRunningSetter",get:function(){return getFlag(this.flags_,cr.isRunningSetterMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isRunningSetterMask_,Rn)}},{key:"isBeingObserved",get:function(){return getFlag(this.flags_,cr.isBeingObservedMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isBeingObservedMask_,Rn)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,cr.isPendingUnobservationMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isPendingUnobservationMask_,Rn)}},{key:"diffValue",get:function(){return getFlag(this.flags_,cr.diffValueMask_)?1:0},set:function(Rn){this.flags_=setFlag(this.flags_,cr.diffValueMask_,Rn===1)}}])}();ComputedValue.isComputingMask_=1;ComputedValue.isRunningSetterMask_=2;ComputedValue.isBeingObservedMask_=4;ComputedValue.isPendingUnobservationMask_=8;ComputedValue.diffValueMask_=16;var isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(cr){cr[cr.NOT_TRACKING_=-1]="NOT_TRACKING_",cr[cr.UP_TO_DATE_=0]="UP_TO_DATE_",cr[cr.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",cr[cr.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(cr){cr[cr.NONE=0]="NONE",cr[cr.LOG=1]="LOG",cr[cr.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function cr(vn){this.cause=void 0,this.cause=vn};function isCaughtException(cr){return cr instanceof CaughtException}function shouldCompute(cr){switch(cr.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var vn=allowStateReadsStart(!0),yn=untrackedStart(),Rn=cr.observing_,Bn=Rn.length,Co=0;Co<Bn;Co++){var Po=Rn[Co];if(isComputedValue(Po)){if(globalState.disableErrorBoundaries)Po.get();else try{Po.get()}catch{return untrackedEnd(yn),allowStateReadsEnd(vn),!0}if(cr.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(yn),allowStateReadsEnd(vn),!0}}return changeDependenciesStateTo0(cr),untrackedEnd(yn),allowStateReadsEnd(vn),!1}}}function checkIfStateModificationsAreAllowed(cr){}function trackDerivedFunction(cr,vn,yn){var Rn=allowStateReadsStart(!0);changeDependenciesStateTo0(cr),cr.newObserving_=new Array(cr.runId_===0?100:cr.observing_.length),cr.unboundDepsCount_=0,cr.runId_=++globalState.runId;var Bn=globalState.trackingDerivation;globalState.trackingDerivation=cr,globalState.inBatch++;var Co;if(globalState.disableErrorBoundaries===!0)Co=vn.call(yn);else try{Co=vn.call(yn)}catch(Po){Co=new CaughtException(Po)}return globalState.inBatch--,globalState.trackingDerivation=Bn,bindDependencies(cr),allowStateReadsEnd(Rn),Co}function bindDependencies(cr){for(var vn=cr.observing_,yn=cr.observing_=cr.newObserving_,Rn=IDerivationState_.UP_TO_DATE_,Bn=0,Co=cr.unboundDepsCount_,Po=0;Po<Co;Po++){var To=yn[Po];To.diffValue===0&&(To.diffValue=1,Bn!==Po&&(yn[Bn]=To),Bn++),To.dependenciesState_>Rn&&(Rn=To.dependenciesState_)}for(yn.length=Bn,cr.newObserving_=null,Co=vn.length;Co--;){var Io=vn[Co];Io.diffValue===0&&removeObserver(Io,cr),Io.diffValue=0}for(;Bn--;){var $l=yn[Bn];$l.diffValue===1&&($l.diffValue=0,addObserver($l,cr))}Rn!==IDerivationState_.UP_TO_DATE_&&(cr.dependenciesState_=Rn,cr.onBecomeStale_())}function clearObserving(cr){var vn=cr.observing_;cr.observing_=[];for(var yn=vn.length;yn--;)removeObserver(vn[yn],cr);cr.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(cr){var vn=untrackedStart();try{return cr()}finally{untrackedEnd(vn)}}function untrackedStart(){var cr=globalState.trackingDerivation;return globalState.trackingDerivation=null,cr}function untrackedEnd(cr){globalState.trackingDerivation=cr}function allowStateReadsStart(cr){var vn=globalState.allowStateReads;return globalState.allowStateReads=cr,vn}function allowStateReadsEnd(cr){globalState.allowStateReads=cr}function changeDependenciesStateTo0(cr){if(cr.dependenciesState_!==IDerivationState_.UP_TO_DATE_){cr.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var vn=cr.observing_,yn=vn.length;yn--;)vn[yn].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function cr(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var cr=getGlobal();return cr.__mobxInstanceCount>0&&!cr.__mobxGlobals&&(canMergeGlobalState=!1),cr.__mobxGlobals&&cr.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?cr.__mobxGlobals?(cr.__mobxInstanceCount+=1,cr.__mobxGlobals.UNCHANGED||(cr.__mobxGlobals.UNCHANGED={}),cr.__mobxGlobals):(cr.__mobxInstanceCount=1,cr.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var cr=getGlobal();--cr.__mobxInstanceCount===0&&(cr.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(cr,vn){cr.observers_.add(vn),cr.lowestObserverState_>vn.dependenciesState_&&(cr.lowestObserverState_=vn.dependenciesState_)}function removeObserver(cr,vn){cr.observers_.delete(vn),cr.observers_.size===0&&queueForUnobservation(cr)}function queueForUnobservation(cr){cr.isPendingUnobservation===!1&&(cr.isPendingUnobservation=!0,globalState.pendingUnobservations.push(cr))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var cr=globalState.pendingUnobservations,vn=0;vn<cr.length;vn++){var yn=cr[vn];yn.isPendingUnobservation=!1,yn.observers_.size===0&&(yn.isBeingObserved&&(yn.isBeingObserved=!1,yn.onBUO()),yn instanceof ComputedValue&&yn.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(cr){var vn=globalState.trackingDerivation;return vn!==null?(vn.runId_!==cr.lastAccessedBy_&&(cr.lastAccessedBy_=vn.runId_,vn.newObserving_[vn.unboundDepsCount_++]=cr,!cr.isBeingObserved&&globalState.trackingContext&&(cr.isBeingObserved=!0,cr.onBO())),cr.isBeingObserved):(cr.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(cr),!1)}function propagateChanged(cr){cr.lowestObserverState_!==IDerivationState_.STALE_&&(cr.lowestObserverState_=IDerivationState_.STALE_,cr.observers_.forEach(function(vn){vn.dependenciesState_===IDerivationState_.UP_TO_DATE_&&vn.onBecomeStale_(),vn.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(cr){cr.lowestObserverState_!==IDerivationState_.STALE_&&(cr.lowestObserverState_=IDerivationState_.STALE_,cr.observers_.forEach(function(vn){vn.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?vn.dependenciesState_=IDerivationState_.STALE_:vn.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(cr.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(cr){cr.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(cr.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,cr.observers_.forEach(function(vn){vn.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(vn.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,vn.onBecomeStale_())}))}var Reaction=function(){function cr(yn,Rn,Bn,Co){yn===void 0&&(yn="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=TraceMode.NONE,this.name_=yn,this.onInvalidate_=Rn,this.errorHandler_=Bn,this.requiresObservable_=Co}var vn=cr.prototype;return vn.onBecomeStale_=function(){this.schedule_()},vn.schedule_=function(){this.isScheduled||(this.isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},vn.runReaction_=function(){if(!this.isDisposed){startBatch(),this.isScheduled=!1;var Rn=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(Bn){this.reportExceptionInDerivation_(Bn)}}globalState.trackingContext=Rn,endBatch()}},vn.track=function(Rn){if(!this.isDisposed){startBatch(),this.isRunning=!0;var Bn=globalState.trackingContext;globalState.trackingContext=this;var Co=trackDerivedFunction(this,Rn,void 0);globalState.trackingContext=Bn,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(Co)&&this.reportExceptionInDerivation_(Co.cause),endBatch()}},vn.reportExceptionInDerivation_=function(Rn){var Bn=this;if(this.errorHandler_){this.errorHandler_(Rn,this);return}if(globalState.disableErrorBoundaries)throw Rn;var Co="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(Co,Rn),globalState.globalReactionErrorHandlers.forEach(function(Po){return Po(Rn,Bn)})},vn.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(startBatch(),clearObserving(this),endBatch()))},vn.getDisposer_=function(Rn){var Bn=this,Co=function Po(){Bn.dispose(),Rn==null||Rn.removeEventListener==null||Rn.removeEventListener("abort",Po)};return Rn==null||Rn.addEventListener==null||Rn.addEventListener("abort",Co),Co[$mobx]=this,Co},vn.toString=function(){return"Reaction["+this.name_+"]"},vn.trace=function(Rn){},_createClass(cr,[{key:"isDisposed",get:function(){return getFlag(this.flags_,cr.isDisposedMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isDisposedMask_,Rn)}},{key:"isScheduled",get:function(){return getFlag(this.flags_,cr.isScheduledMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isScheduledMask_,Rn)}},{key:"isTrackPending",get:function(){return getFlag(this.flags_,cr.isTrackPendingMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isTrackPendingMask_,Rn)}},{key:"isRunning",get:function(){return getFlag(this.flags_,cr.isRunningMask_)},set:function(Rn){this.flags_=setFlag(this.flags_,cr.isRunningMask_,Rn)}},{key:"diffValue",get:function(){return getFlag(this.flags_,cr.diffValueMask_)?1:0},set:function(Rn){this.flags_=setFlag(this.flags_,cr.diffValueMask_,Rn===1)}}])}();Reaction.isDisposedMask_=1;Reaction.isScheduledMask_=2;Reaction.isTrackPendingMask_=4;Reaction.isRunningMask_=8;Reaction.diffValueMask_=16;var MAX_REACTION_ITERATIONS=100,reactionScheduler=function cr(vn){return vn()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var cr=globalState.pendingReactions,vn=0;cr.length>0;){++vn===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+cr[0]),cr.splice(0));for(var yn=cr.splice(0),Rn=0,Bn=yn.length;Rn<Bn;Rn++)yn[Rn].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(cr){var vn=reactionScheduler;reactionScheduler=function(Rn){return cr(function(){return vn(Rn)})}}function isSpyEnabled(){return!1}function spyReport(cr){}function spyReportStart(cr){}function spyReportEnd(cr){}function spy(cr){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(cr){var vn=function(Rn,Bn){if(isFunction(Rn))return createAction(Rn.name||DEFAULT_ACTION_NAME,Rn,cr);if(isFunction(Bn))return createAction(Rn,Bn,cr);if(is20223Decorator(Bn))return(cr?autoActionAnnotation:actionAnnotation).decorate_20223_(Rn,Bn);if(isStringish(Bn))return storeAnnotation(Rn,Bn,cr?autoActionAnnotation:actionAnnotation);if(isStringish(Rn))return createDecoratorAnnotation(createActionAnnotation(cr?AUTOACTION:ACTION,{name:Rn,autoAction:cr}))};return vn}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(cr){return executeAction(cr.name||DEFAULT_ACTION_NAME,!1,cr,this,void 0)}function isAction(cr){return isFunction(cr)&&cr.isMobxAction===!0}function autorun(cr,vn){var yn,Rn,Bn,Co;vn===void 0&&(vn=EMPTY_OBJECT);var Po=(yn=(Rn=vn)==null?void 0:Rn.name)!=null?yn:"Autorun",To=!vn.scheduler&&!vn.delay,Io;if(To)Io=new Reaction(Po,function(){this.track(Xl)},vn.onError,vn.requiresObservable);else{var $l=createSchedulerFromOptions(vn),Wl=!1;Io=new Reaction(Po,function(){Wl||(Wl=!0,$l(function(){Wl=!1,Io.isDisposed||Io.track(Xl)}))},vn.onError,vn.requiresObservable)}function Xl(){cr(Io)}return(Bn=vn)!=null&&(Bn=Bn.signal)!=null&&Bn.aborted||Io.schedule_(),Io.getDisposer_((Co=vn)==null?void 0:Co.signal)}var run=function cr(vn){return vn()};function createSchedulerFromOptions(cr){return cr.scheduler?cr.scheduler:cr.delay?function(vn){return setTimeout(vn,cr.delay)}:run}function reaction(cr,vn,yn){var Rn,Bn,Co;yn===void 0&&(yn=EMPTY_OBJECT);var Po=(Rn=yn.name)!=null?Rn:"Reaction",To=action(Po,yn.onError?wrapErrorHandler(yn.onError,vn):vn),Io=!yn.scheduler&&!yn.delay,$l=createSchedulerFromOptions(yn),Wl=!0,Xl=!1,Yl,Zl=yn.compareStructural?comparer.structural:yn.equals||comparer.default,ey=new Reaction(Po,function(){Wl||Io?Rm():Xl||(Xl=!0,$l(Rm))},yn.onError,yn.requiresObservable);function Rm(){if(Xl=!1,!ey.isDisposed){var ry=!1,_g=Yl;ey.track(function(){var ty=allowStateChanges(!1,function(){return cr(ey)});ry=Wl||!Zl(Yl,ty),Yl=ty}),(Wl&&yn.fireImmediately||!Wl&&ry)&&To(Yl,_g,ey),Wl=!1}}return(Bn=yn)!=null&&(Bn=Bn.signal)!=null&&Bn.aborted||ey.schedule_(),ey.getDisposer_((Co=yn)==null?void 0:Co.signal)}function wrapErrorHandler(cr,vn){return function(){try{return vn.apply(this,arguments)}catch(yn){cr.call(this,yn)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(cr,vn,yn){return interceptHook(ON_BECOME_OBSERVED,cr,vn,yn)}function onBecomeUnobserved(cr,vn,yn){return interceptHook(ON_BECOME_UNOBSERVED,cr,vn,yn)}function interceptHook(cr,vn,yn,Rn){var Bn=typeof Rn=="function"?getAtom(vn,yn):getAtom(vn),Co=isFunction(Rn)?Rn:yn,Po=cr+"L";return Bn[Po]?Bn[Po].add(Co):Bn[Po]=new Set([Co]),function(){var To=Bn[Po];To&&(To.delete(Co),To.size===0&&delete Bn[Po])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(cr){cr.isolateGlobalState===!0&&isolateGlobalState();var vn=cr.useProxies,yn=cr.enforceActions;if(vn!==void 0&&(globalState.useProxies=vn===ALWAYS?!0:vn===NEVER?!1:typeof Proxy!="undefined"),vn==="ifavailable"&&(globalState.verifyProxies=!0),yn!==void 0){var Rn=yn===ALWAYS?ALWAYS:yn===OBSERVED;globalState.enforceActions=Rn,globalState.allowStateChanges=!(Rn===!0||Rn===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Bn){Bn in cr&&(globalState[Bn]=!!cr[Bn])}),globalState.allowStateReads=!globalState.observableRequiresReaction,cr.reactionScheduler&&setReactionScheduler(cr.reactionScheduler)}function extendObservable(cr,vn,yn,Rn){var Bn=getOwnPropertyDescriptors(vn);return initObservable(function(){var Co=asObservableObject(cr,Rn)[$mobx];ownKeys(Bn).forEach(function(Po){Co.extend_(Po,Bn[Po],yn&&Po in yn?yn[Po]:!0)})}),cr}function getDependencyTree(cr,vn){return nodeToDependencyTree(getAtom(cr,vn))}function nodeToDependencyTree(cr){var vn={name:cr.name_};return cr.observing_&&cr.observing_.length>0&&(vn.dependencies=unique(cr.observing_).map(nodeToDependencyTree)),vn}function unique(cr){return Array.from(new Set(cr))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function cr(vn,yn){if(is20223Decorator(yn))return flowAnnotation.decorate_20223_(vn,yn);if(isStringish(yn))return storeAnnotation(vn,yn,flowAnnotation);var Rn=vn,Bn=Rn.name||"<unnamed flow>",Co=function(){var To=this,Io=arguments,$l=++generatorId,Wl=action(Bn+" - runid: "+$l+" - init",Rn).apply(To,Io),Xl,Yl=void 0,Zl=new Promise(function(ey,Rm){var ry=0;Xl=Rm;function _g(iy){Yl=void 0;var oy;try{oy=action(Bn+" - runid: "+$l+" - yield "+ry++,Wl.next).call(Wl,iy)}catch(ay){return Rm(ay)}ny(oy)}function ty(iy){Yl=void 0;var oy;try{oy=action(Bn+" - runid: "+$l+" - yield "+ry++,Wl.throw).call(Wl,iy)}catch(ay){return Rm(ay)}ny(oy)}function ny(iy){if(isFunction(iy==null?void 0:iy.then)){iy.then(ny,Rm);return}return iy.done?ey(iy.value):(Yl=Promise.resolve(iy.value),Yl.then(_g,ty))}_g(void 0)});return Zl.cancel=action(Bn+" - runid: "+$l+" - cancel",function(){try{Yl&&cancelPromise(Yl);var ey=Wl.return(void 0),Rm=Promise.resolve(ey.value);Rm.then(noop,noop),cancelPromise(Rm),Xl(new FlowCancellationError)}catch(ry){Xl(ry)}}),Zl};return Co.isMobXFlow=!0,Co},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(cr){isFunction(cr.cancel)&&cr.cancel()}function isFlow(cr){return(cr==null?void 0:cr.isMobXFlow)===!0}function _isObservable(cr,vn){return cr?vn!==void 0?isObservableObject(cr)?cr[$mobx].values_.has(vn):!1:isObservableObject(cr)||!!cr[$mobx]||isAtom(cr)||isReaction(cr)||isComputedValue(cr):!1}function isObservable(cr){return _isObservable(cr)}function transaction(cr,vn){vn===void 0&&(vn=void 0),startBatch();try{return cr.apply(vn)}finally{endBatch()}}function getAdm(cr){return cr[$mobx]}var objectProxyTraps={has:function cr(vn,yn){return getAdm(vn).has_(yn)},get:function cr(vn,yn){return getAdm(vn).get_(yn)},set:function cr(vn,yn,Rn){var Bn;return isStringish(yn)?(Bn=getAdm(vn).set_(yn,Rn,!0))!=null?Bn:!0:!1},deleteProperty:function cr(vn,yn){var Rn;return isStringish(yn)?(Rn=getAdm(vn).delete_(yn,!0))!=null?Rn:!0:!1},defineProperty:function cr(vn,yn,Rn){var Bn;return(Bn=getAdm(vn).defineProperty_(yn,Rn))!=null?Bn:!0},ownKeys:function cr(vn){return getAdm(vn).ownKeys_()},preventExtensions:function cr(vn){die(13)}};function asDynamicObservableObject(cr,vn){var yn,Rn;return assertProxies(),cr=asObservableObject(cr,vn),(Rn=(yn=cr[$mobx]).proxy_)!=null?Rn:yn.proxy_=new Proxy(cr,objectProxyTraps)}function hasInterceptors(cr){return cr.interceptors_!==void 0&&cr.interceptors_.length>0}function registerInterceptor(cr,vn){var yn=cr.interceptors_||(cr.interceptors_=[]);return yn.push(vn),once(function(){var Rn=yn.indexOf(vn);Rn!==-1&&yn.splice(Rn,1)})}function interceptChange(cr,vn){var yn=untrackedStart();try{for(var Rn=[].concat(cr.interceptors_||[]),Bn=0,Co=Rn.length;Bn<Co&&(vn=Rn[Bn](vn),vn&&!vn.type&&die(14),!!vn);Bn++);return vn}finally{untrackedEnd(yn)}}function hasListeners(cr){return cr.changeListeners_!==void 0&&cr.changeListeners_.length>0}function registerListener(cr,vn){var yn=cr.changeListeners_||(cr.changeListeners_=[]);return yn.push(vn),once(function(){var Rn=yn.indexOf(vn);Rn!==-1&&yn.splice(Rn,1)})}function notifyListeners(cr,vn){var yn=untrackedStart(),Rn=cr.changeListeners_;if(!!Rn){Rn=Rn.slice();for(var Bn=0,Co=Rn.length;Bn<Co;Bn++)Rn[Bn](vn);untrackedEnd(yn)}}function makeObservable(cr,vn,yn){return initObservable(function(){var Rn,Bn=asObservableObject(cr,yn)[$mobx];(Rn=vn)!=null||(vn=collectStoredAnnotations(cr)),ownKeys(vn).forEach(function(Co){return Bn.make_(Co,vn[Co])})}),cr}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function cr(vn,yn){var Rn=vn[$mobx];return yn===$mobx?Rn:yn==="length"?Rn.getArrayLength_():typeof yn=="string"&&!isNaN(yn)?Rn.get_(parseInt(yn)):hasProp(arrayExtensions,yn)?arrayExtensions[yn]:vn[yn]},set:function cr(vn,yn,Rn){var Bn=vn[$mobx];return yn==="length"&&Bn.setArrayLength_(Rn),typeof yn=="symbol"||isNaN(yn)?vn[yn]=Rn:Bn.set_(parseInt(yn),Rn),!0},preventExtensions:function cr(){die(15)}},ObservableArrayAdministration=function(){function cr(yn,Rn,Bn,Co){yn===void 0&&(yn="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=Bn,this.legacyMode_=Co,this.atom_=new Atom(yn),this.enhancer_=function(Po,To){return Rn(Po,To,"ObservableArray[..]")}}var vn=cr.prototype;return vn.dehanceValue_=function(Rn){return this.dehancer!==void 0?this.dehancer(Rn):Rn},vn.dehanceValues_=function(Rn){return this.dehancer!==void 0&&Rn.length>0?Rn.map(this.dehancer):Rn},vn.intercept_=function(Rn){return registerInterceptor(this,Rn)},vn.observe_=function(Rn,Bn){return Bn===void 0&&(Bn=!1),Bn&&Rn({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,Rn)},vn.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},vn.setArrayLength_=function(Rn){(typeof Rn!="number"||isNaN(Rn)||Rn<0)&&die("Out of range: "+Rn);var Bn=this.values_.length;if(Rn!==Bn)if(Rn>Bn){for(var Co=new Array(Rn-Bn),Po=0;Po<Rn-Bn;Po++)Co[Po]=void 0;this.spliceWithArray_(Bn,0,Co)}else this.spliceWithArray_(Rn,Bn-Rn)},vn.updateArrayLength_=function(Rn,Bn){Rn!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=Bn,this.legacyMode_&&Bn>0&&reserveArrayBuffer(Rn+Bn+1)},vn.spliceWithArray_=function(Rn,Bn,Co){var Po=this;this.atom_;var To=this.values_.length;if(Rn===void 0?Rn=0:Rn>To?Rn=To:Rn<0&&(Rn=Math.max(0,To+Rn)),arguments.length===1?Bn=To-Rn:Bn==null?Bn=0:Bn=Math.max(0,Math.min(Bn,To-Rn)),Co===void 0&&(Co=EMPTY_ARRAY),hasInterceptors(this)){var Io=interceptChange(this,{object:this.proxy_,type:SPLICE,index:Rn,removedCount:Bn,added:Co});if(!Io)return EMPTY_ARRAY;Bn=Io.removedCount,Co=Io.added}if(Co=Co.length===0?Co:Co.map(function(Xl){return Po.enhancer_(Xl,void 0)}),this.legacyMode_){var $l=Co.length-Bn;this.updateArrayLength_(To,$l)}var Wl=this.spliceItemsIntoValues_(Rn,Bn,Co);return(Bn!==0||Co.length!==0)&&this.notifyArraySplice_(Rn,Co,Wl),this.dehanceValues_(Wl)},vn.spliceItemsIntoValues_=function(Rn,Bn,Co){if(Co.length<MAX_SPLICE_SIZE){var Po;return(Po=this.values_).splice.apply(Po,[Rn,Bn].concat(Co))}else{var To=this.values_.slice(Rn,Rn+Bn),Io=this.values_.slice(Rn+Bn);this.values_.length+=Co.length-Bn;for(var $l=0;$l<Co.length;$l++)this.values_[Rn+$l]=Co[$l];for(var Wl=0;Wl<Io.length;Wl++)this.values_[Rn+Co.length+Wl]=Io[Wl];return To}},vn.notifyArrayChildUpdate_=function(Rn,Bn,Co){var Po=!this.owned_&&isSpyEnabled(),To=hasListeners(this),Io=To||Po?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:Rn,newValue:Bn,oldValue:Co}:null;this.atom_.reportChanged(),To&&notifyListeners(this,Io)},vn.notifyArraySplice_=function(Rn,Bn,Co){var Po=!this.owned_&&isSpyEnabled(),To=hasListeners(this),Io=To||Po?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:Rn,removed:Co,added:Bn,removedCount:Co.length,addedCount:Bn.length}:null;this.atom_.reportChanged(),To&&notifyListeners(this,Io)},vn.get_=function(Rn){if(this.legacyMode_&&Rn>=this.values_.length){console.warn("[mobx] Out of bounds read: "+Rn);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[Rn])},vn.set_=function(Rn,Bn){var Co=this.values_;if(this.legacyMode_&&Rn>Co.length&&die(17,Rn,Co.length),Rn<Co.length){this.atom_;var Po=Co[Rn];if(hasInterceptors(this)){var To=interceptChange(this,{type:UPDATE,object:this.proxy_,index:Rn,newValue:Bn});if(!To)return;Bn=To.newValue}Bn=this.enhancer_(Bn,Po);var Io=Bn!==Po;Io&&(Co[Rn]=Bn,this.notifyArrayChildUpdate_(Rn,Bn,Po))}else{for(var $l=new Array(Rn+1-Co.length),Wl=0;Wl<$l.length-1;Wl++)$l[Wl]=void 0;$l[$l.length-1]=Bn,this.spliceWithArray_(Co.length,0,$l)}},cr}();function createObservableArray(cr,vn,yn,Rn){return yn===void 0&&(yn="ObservableArray"),Rn===void 0&&(Rn=!1),assertProxies(),initObservable(function(){var Bn=new ObservableArrayAdministration(yn,vn,Rn,!1);addHiddenFinalProp(Bn.values_,$mobx,Bn);var Co=new Proxy(Bn.values_,arrayTraps);return Bn.proxy_=Co,cr&&cr.length&&Bn.spliceWithArray_(0,0,cr),Co})}var arrayExtensions={clear:function cr(){return this.splice(0)},replace:function cr(vn){var yn=this[$mobx];return yn.spliceWithArray_(0,yn.values_.length,vn)},toJSON:function cr(){return this.slice()},splice:function cr(vn,yn){for(var Rn=arguments.length,Bn=new Array(Rn>2?Rn-2:0),Co=2;Co<Rn;Co++)Bn[Co-2]=arguments[Co];var Po=this[$mobx];switch(arguments.length){case 0:return[];case 1:return Po.spliceWithArray_(vn);case 2:return Po.spliceWithArray_(vn,yn)}return Po.spliceWithArray_(vn,yn,Bn)},spliceWithArray:function cr(vn,yn,Rn){return this[$mobx].spliceWithArray_(vn,yn,Rn)},push:function cr(){for(var vn=this[$mobx],yn=arguments.length,Rn=new Array(yn),Bn=0;Bn<yn;Bn++)Rn[Bn]=arguments[Bn];return vn.spliceWithArray_(vn.values_.length,0,Rn),vn.values_.length},pop:function cr(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function cr(){return this.splice(0,1)[0]},unshift:function cr(){for(var vn=this[$mobx],yn=arguments.length,Rn=new Array(yn),Bn=0;Bn<yn;Bn++)Rn[Bn]=arguments[Bn];return vn.spliceWithArray_(0,0,Rn),vn.values_.length},reverse:function cr(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function cr(){globalState.trackingDerivation&&die(37,"sort");var vn=this.slice();return vn.sort.apply(vn,arguments),this.replace(vn),this},remove:function cr(vn){var yn=this[$mobx],Rn=yn.dehanceValues_(yn.values_).indexOf(vn);return Rn>-1?(this.splice(Rn,1),!0):!1}};addArrayExtension("at",simpleFunc);addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("toSorted",simpleFunc);addArrayExtension("toSpliced",simpleFunc);addArrayExtension("with",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("findLast",mapLikeFunc);addArrayExtension("findLastIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("toReversed",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(cr,vn){typeof Array.prototype[cr]=="function"&&(arrayExtensions[cr]=vn(cr))}function simpleFunc(cr){return function(){var vn=this[$mobx];vn.atom_.reportObserved();var yn=vn.dehanceValues_(vn.values_);return yn[cr].apply(yn,arguments)}}function mapLikeFunc(cr){return function(vn,yn){var Rn=this,Bn=this[$mobx];Bn.atom_.reportObserved();var Co=Bn.dehanceValues_(Bn.values_);return Co[cr](function(Po,To){return vn.call(yn,Po,To,Rn)})}}function reduceLikeFunc(cr){return function(){var vn=this,yn=this[$mobx];yn.atom_.reportObserved();var Rn=yn.dehanceValues_(yn.values_),Bn=arguments[0];return arguments[0]=function(Co,Po,To){return Bn(Co,Po,To,vn)},Rn[cr].apply(Rn,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(cr){return isObject(cr)&&isObservableArrayAdministration(cr[$mobx])}var ObservableMapMarker={},ADD="add",DELETE="delete",ObservableMap=function(){function cr(yn,Rn,Bn){var Co=this;Rn===void 0&&(Rn=deepEnhancer),Bn===void 0&&(Bn="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=Rn,this.name_=Bn,isFunction(Map)||die(18),initObservable(function(){Co.keysAtom_=createAtom("ObservableMap.keys()"),Co.data_=new Map,Co.hasMap_=new Map,yn&&Co.merge(yn)})}var vn=cr.prototype;return vn.has_=function(Rn){return this.data_.has(Rn)},vn.has=function(Rn){var Bn=this;if(!globalState.trackingDerivation)return this.has_(Rn);var Co=this.hasMap_.get(Rn);if(!Co){var Po=Co=new ObservableValue(this.has_(Rn),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(Rn,Po),onBecomeUnobserved(Po,function(){return Bn.hasMap_.delete(Rn)})}return Co.get()},vn.set=function(Rn,Bn){var Co=this.has_(Rn);if(hasInterceptors(this)){var Po=interceptChange(this,{type:Co?UPDATE:ADD,object:this,newValue:Bn,name:Rn});if(!Po)return this;Bn=Po.newValue}return Co?this.updateValue_(Rn,Bn):this.addValue_(Rn,Bn),this},vn.delete=function(Rn){var Bn=this;if(this.keysAtom_,hasInterceptors(this)){var Co=interceptChange(this,{type:DELETE,object:this,name:Rn});if(!Co)return!1}if(this.has_(Rn)){var Po=isSpyEnabled(),To=hasListeners(this),Io=To||Po?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(Rn).value_,name:Rn}:null;return transaction(function(){var $l;Bn.keysAtom_.reportChanged(),($l=Bn.hasMap_.get(Rn))==null||$l.setNewValue_(!1);var Wl=Bn.data_.get(Rn);Wl.setNewValue_(void 0),Bn.data_.delete(Rn)}),To&&notifyListeners(this,Io),!0}return!1},vn.updateValue_=function(Rn,Bn){var Co=this.data_.get(Rn);if(Bn=Co.prepareNewValue_(Bn),Bn!==globalState.UNCHANGED){var Po=isSpyEnabled(),To=hasListeners(this),Io=To||Po?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:Co.value_,name:Rn,newValue:Bn}:null;Co.setNewValue_(Bn),To&&notifyListeners(this,Io)}},vn.addValue_=function(Rn,Bn){var Co=this;this.keysAtom_,transaction(function(){var $l,Wl=new ObservableValue(Bn,Co.enhancer_,"ObservableMap.key",!1);Co.data_.set(Rn,Wl),Bn=Wl.value_,($l=Co.hasMap_.get(Rn))==null||$l.setNewValue_(!0),Co.keysAtom_.reportChanged()});var Po=isSpyEnabled(),To=hasListeners(this),Io=To||Po?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:Rn,newValue:Bn}:null;To&&notifyListeners(this,Io)},vn.get=function(Rn){return this.has(Rn)?this.dehanceValue_(this.data_.get(Rn).get()):this.dehanceValue_(void 0)},vn.dehanceValue_=function(Rn){return this.dehancer!==void 0?this.dehancer(Rn):Rn},vn.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},vn.values=function(){var Rn=this,Bn=this.keys();return makeIterableForMap({next:function(){var Po=Bn.next(),To=Po.done,Io=Po.value;return{done:To,value:To?void 0:Rn.get(Io)}}})},vn.entries=function(){var Rn=this,Bn=this.keys();return makeIterableForMap({next:function(){var Po=Bn.next(),To=Po.done,Io=Po.value;return{done:To,value:To?void 0:[Io,Rn.get(Io)]}}})},vn[Symbol.iterator]=function(){return this.entries()},vn.forEach=function(Rn,Bn){for(var Co=_createForOfIteratorHelperLoose(this),Po;!(Po=Co()).done;){var To=Po.value,Io=To[0],$l=To[1];Rn.call(Bn,$l,Io,this)}},vn.merge=function(Rn){var Bn=this;return isObservableMap(Rn)&&(Rn=new Map(Rn)),transaction(function(){isPlainObject(Rn)?getPlainObjectKeys(Rn).forEach(function(Co){return Bn.set(Co,Rn[Co])}):Array.isArray(Rn)?Rn.forEach(function(Co){var Po=Co[0],To=Co[1];return Bn.set(Po,To)}):isES6Map(Rn)?(isPlainES6Map(Rn)||die(19,Rn),Rn.forEach(function(Co,Po){return Bn.set(Po,Co)})):Rn!=null&&die(20,Rn)}),this},vn.clear=function(){var Rn=this;transaction(function(){untracked(function(){for(var Bn=_createForOfIteratorHelperLoose(Rn.keys()),Co;!(Co=Bn()).done;){var Po=Co.value;Rn.delete(Po)}})})},vn.replace=function(Rn){var Bn=this;return transaction(function(){for(var Co=convertToMap(Rn),Po=new Map,To=!1,Io=_createForOfIteratorHelperLoose(Bn.data_.keys()),$l;!($l=Io()).done;){var Wl=$l.value;if(!Co.has(Wl)){var Xl=Bn.delete(Wl);if(Xl)To=!0;else{var Yl=Bn.data_.get(Wl);Po.set(Wl,Yl)}}}for(var Zl=_createForOfIteratorHelperLoose(Co.entries()),ey;!(ey=Zl()).done;){var Rm=ey.value,ry=Rm[0],_g=Rm[1],ty=Bn.data_.has(ry);if(Bn.set(ry,_g),Bn.data_.has(ry)){var ny=Bn.data_.get(ry);Po.set(ry,ny),ty||(To=!0)}}if(!To)if(Bn.data_.size!==Po.size)Bn.keysAtom_.reportChanged();else for(var iy=Bn.data_.keys(),oy=Po.keys(),ay=iy.next(),uy=oy.next();!ay.done;){if(ay.value!==uy.value){Bn.keysAtom_.reportChanged();break}ay=iy.next(),uy=oy.next()}Bn.data_=Po}),this},vn.toString=function(){return"[object ObservableMap]"},vn.toJSON=function(){return Array.from(this)},vn.observe_=function(Rn,Bn){return registerListener(this,Rn)},vn.intercept_=function(Rn){return registerInterceptor(this,Rn)},_createClass(cr,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function makeIterableForMap(cr){return cr[Symbol.toStringTag]="MapIterator",makeIterable(cr)}function convertToMap(cr){if(isES6Map(cr)||isObservableMap(cr))return cr;if(Array.isArray(cr))return new Map(cr);if(isPlainObject(cr)){var vn=new Map;for(var yn in cr)vn.set(yn,cr[yn]);return vn}else return die(21,cr)}var ObservableSetMarker={},ObservableSet=function(){function cr(yn,Rn,Bn){var Co=this;Rn===void 0&&(Rn=deepEnhancer),Bn===void 0&&(Bn="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=Bn,isFunction(Set)||die(22),this.enhancer_=function(Po,To){return Rn(Po,To,Bn)},initObservable(function(){Co.atom_=createAtom(Co.name_),yn&&Co.replace(yn)})}var vn=cr.prototype;return vn.dehanceValue_=function(Rn){return this.dehancer!==void 0?this.dehancer(Rn):Rn},vn.clear=function(){var Rn=this;transaction(function(){untracked(function(){for(var Bn=_createForOfIteratorHelperLoose(Rn.data_.values()),Co;!(Co=Bn()).done;){var Po=Co.value;Rn.delete(Po)}})})},vn.forEach=function(Rn,Bn){for(var Co=_createForOfIteratorHelperLoose(this),Po;!(Po=Co()).done;){var To=Po.value;Rn.call(Bn,To,To,this)}},vn.add=function(Rn){var Bn=this;if(this.atom_,hasInterceptors(this)){var Co=interceptChange(this,{type:ADD,object:this,newValue:Rn});if(!Co)return this;Rn=Co.newValue}if(!this.has(Rn)){transaction(function(){Bn.data_.add(Bn.enhancer_(Rn,void 0)),Bn.atom_.reportChanged()});var Po=!1,To=hasListeners(this),Io=To||Po?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:Rn}:null;To&&notifyListeners(this,Io)}return this},vn.delete=function(Rn){var Bn=this;if(hasInterceptors(this)){var Co=interceptChange(this,{type:DELETE,object:this,oldValue:Rn});if(!Co)return!1}if(this.has(Rn)){var Po=!1,To=hasListeners(this),Io=To||Po?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:Rn}:null;return transaction(function(){Bn.atom_.reportChanged(),Bn.data_.delete(Rn)}),To&&notifyListeners(this,Io),!0}return!1},vn.has=function(Rn){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(Rn))},vn.entries=function(){var Rn=this.values();return makeIterableForSet({next:function(){var Co=Rn.next(),Po=Co.value,To=Co.done;return To?{value:void 0,done:To}:{value:[Po,Po],done:To}}})},vn.keys=function(){return this.values()},vn.values=function(){this.atom_.reportObserved();var Rn=this,Bn=this.data_.values();return makeIterableForSet({next:function(){var Po=Bn.next(),To=Po.value,Io=Po.done;return Io?{value:void 0,done:Io}:{value:Rn.dehanceValue_(To),done:Io}}})},vn.intersection=function(Rn){if(isES6Set(Rn)&&!isObservableSet(Rn))return Rn.intersection(this);var Bn=new Set(this);return Bn.intersection(Rn)},vn.union=function(Rn){if(isES6Set(Rn)&&!isObservableSet(Rn))return Rn.union(this);var Bn=new Set(this);return Bn.union(Rn)},vn.difference=function(Rn){return new Set(this).difference(Rn)},vn.symmetricDifference=function(Rn){if(isES6Set(Rn)&&!isObservableSet(Rn))return Rn.symmetricDifference(this);var Bn=new Set(this);return Bn.symmetricDifference(Rn)},vn.isSubsetOf=function(Rn){return new Set(this).isSubsetOf(Rn)},vn.isSupersetOf=function(Rn){return new Set(this).isSupersetOf(Rn)},vn.isDisjointFrom=function(Rn){if(isES6Set(Rn)&&!isObservableSet(Rn))return Rn.isDisjointFrom(this);var Bn=new Set(this);return Bn.isDisjointFrom(Rn)},vn.replace=function(Rn){var Bn=this;return isObservableSet(Rn)&&(Rn=new Set(Rn)),transaction(function(){Array.isArray(Rn)?(Bn.clear(),Rn.forEach(function(Co){return Bn.add(Co)})):isES6Set(Rn)?(Bn.clear(),Rn.forEach(function(Co){return Bn.add(Co)})):Rn!=null&&die("Cannot initialize set from "+Rn)}),this},vn.observe_=function(Rn,Bn){return registerListener(this,Rn)},vn.intercept_=function(Rn){return registerInterceptor(this,Rn)},vn.toJSON=function(){return Array.from(this)},vn.toString=function(){return"[object ObservableSet]"},vn[Symbol.iterator]=function(){return this.values()},_createClass(cr,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet);function makeIterableForSet(cr){return cr[Symbol.toStringTag]="SetIterator",makeIterable(cr)}var descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function cr(yn,Rn,Bn,Co){Rn===void 0&&(Rn=new Map),Co===void 0&&(Co=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=yn,this.values_=Rn,this.name_=Bn,this.defaultAnnotation_=Co,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject(this.target_)}var vn=cr.prototype;return vn.getObservablePropValue_=function(Rn){return this.values_.get(Rn).get()},vn.setObservablePropValue_=function(Rn,Bn){var Co=this.values_.get(Rn);if(Co instanceof ComputedValue)return Co.set(Bn),!0;if(hasInterceptors(this)){var Po=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:Rn,newValue:Bn});if(!Po)return null;Bn=Po.newValue}if(Bn=Co.prepareNewValue_(Bn),Bn!==globalState.UNCHANGED){var To=hasListeners(this),Io=!1,$l=To||Io?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:Co.value_,name:Rn,newValue:Bn}:null;Co.setNewValue_(Bn),To&&notifyListeners(this,$l)}return!0},vn.get_=function(Rn){return globalState.trackingDerivation&&!hasProp(this.target_,Rn)&&this.has_(Rn),this.target_[Rn]},vn.set_=function(Rn,Bn,Co){return Co===void 0&&(Co=!1),hasProp(this.target_,Rn)?this.values_.has(Rn)?this.setObservablePropValue_(Rn,Bn):Co?Reflect.set(this.target_,Rn,Bn):(this.target_[Rn]=Bn,!0):this.extend_(Rn,{value:Bn,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,Co)},vn.has_=function(Rn){if(!globalState.trackingDerivation)return Rn in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Bn=this.pendingKeys_.get(Rn);return Bn||(Bn=new ObservableValue(Rn in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(Rn,Bn)),Bn.get()},vn.make_=function(Rn,Bn){if(Bn===!0&&(Bn=this.defaultAnnotation_),Bn!==!1){if(!(Rn in this.target_)){var Co;if((Co=this.target_[storedAnnotationsSymbol])!=null&&Co[Rn])return;die(1,Bn.annotationType_,this.name_+"."+Rn.toString())}for(var Po=this.target_;Po&&Po!==objectPrototype;){var To=getDescriptor(Po,Rn);if(To){var Io=Bn.make_(this,Rn,To,Po);if(Io===0)return;if(Io===1)break}Po=Object.getPrototypeOf(Po)}recordAnnotationApplied(this,Bn,Rn)}},vn.extend_=function(Rn,Bn,Co,Po){if(Po===void 0&&(Po=!1),Co===!0&&(Co=this.defaultAnnotation_),Co===!1)return this.defineProperty_(Rn,Bn,Po);var To=Co.extend_(this,Rn,Bn,Po);return To&&recordAnnotationApplied(this,Co,Rn),To},vn.defineProperty_=function(Rn,Bn,Co){Co===void 0&&(Co=!1),this.keysAtom_;try{startBatch();var Po=this.delete_(Rn);if(!Po)return Po;if(hasInterceptors(this)){var To=interceptChange(this,{object:this.proxy_||this.target_,name:Rn,type:ADD,newValue:Bn.value});if(!To)return null;var Io=To.newValue;Bn.value!==Io&&(Bn=_extends({},Bn,{value:Io}))}if(Co){if(!Reflect.defineProperty(this.target_,Rn,Bn))return!1}else defineProperty(this.target_,Rn,Bn);this.notifyPropertyAddition_(Rn,Bn.value)}finally{endBatch()}return!0},vn.defineObservableProperty_=function(Rn,Bn,Co,Po){Po===void 0&&(Po=!1),this.keysAtom_;try{startBatch();var To=this.delete_(Rn);if(!To)return To;if(hasInterceptors(this)){var Io=interceptChange(this,{object:this.proxy_||this.target_,name:Rn,type:ADD,newValue:Bn});if(!Io)return null;Bn=Io.newValue}var $l=getCachedObservablePropDescriptor(Rn),Wl={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:$l.get,set:$l.set};if(Po){if(!Reflect.defineProperty(this.target_,Rn,Wl))return!1}else defineProperty(this.target_,Rn,Wl);var Xl=new ObservableValue(Bn,Co,"ObservableObject.key",!1);this.values_.set(Rn,Xl),this.notifyPropertyAddition_(Rn,Xl.value_)}finally{endBatch()}return!0},vn.defineComputedProperty_=function(Rn,Bn,Co){Co===void 0&&(Co=!1),this.keysAtom_;try{startBatch();var Po=this.delete_(Rn);if(!Po)return Po;if(hasInterceptors(this)){var To=interceptChange(this,{object:this.proxy_||this.target_,name:Rn,type:ADD,newValue:void 0});if(!To)return null}Bn.name||(Bn.name="ObservableObject.key"),Bn.context=this.proxy_||this.target_;var Io=getCachedObservablePropDescriptor(Rn),$l={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Io.get,set:Io.set};if(Co){if(!Reflect.defineProperty(this.target_,Rn,$l))return!1}else defineProperty(this.target_,Rn,$l);this.values_.set(Rn,new ComputedValue(Bn)),this.notifyPropertyAddition_(Rn,void 0)}finally{endBatch()}return!0},vn.delete_=function(Rn,Bn){if(Bn===void 0&&(Bn=!1),this.keysAtom_,!hasProp(this.target_,Rn))return!0;if(hasInterceptors(this)){var Co=interceptChange(this,{object:this.proxy_||this.target_,name:Rn,type:REMOVE});if(!Co)return null}try{var Po;startBatch();var To=hasListeners(this),Io=!1,$l=this.values_.get(Rn),Wl=void 0;if(!$l&&(To||Io)){var Xl;Wl=(Xl=getDescriptor(this.target_,Rn))==null?void 0:Xl.value}if(Bn){if(!Reflect.deleteProperty(this.target_,Rn))return!1}else delete this.target_[Rn];if($l&&(this.values_.delete(Rn),$l instanceof ObservableValue&&(Wl=$l.value_),propagateChanged($l)),this.keysAtom_.reportChanged(),(Po=this.pendingKeys_)==null||(Po=Po.get(Rn))==null||Po.set(Rn in this.target_),To||Io){var Yl={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Wl,name:Rn};To&&notifyListeners(this,Yl)}}finally{endBatch()}return!0},vn.observe_=function(Rn,Bn){return registerListener(this,Rn)},vn.intercept_=function(Rn){return registerInterceptor(this,Rn)},vn.notifyPropertyAddition_=function(Rn,Bn){var Co,Po=hasListeners(this),To=!1;if(Po||To){var Io=Po||To?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:Rn,newValue:Bn}:null;Po&&notifyListeners(this,Io)}(Co=this.pendingKeys_)==null||(Co=Co.get(Rn))==null||Co.set(!0),this.keysAtom_.reportChanged()},vn.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},vn.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},cr}();function asObservableObject(cr,vn){var yn;if(hasProp(cr,$mobx))return cr;var Rn=(yn=vn==null?void 0:vn.name)!=null?yn:"ObservableObject",Bn=new ObservableObjectAdministration(cr,new Map,String(Rn),getAnnotationFromOptions(vn));return addHiddenProp(cr,$mobx,Bn),cr}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(cr){return descriptorCache[cr]||(descriptorCache[cr]={get:function(){return this[$mobx].getObservablePropValue_(cr)},set:function(yn){return this[$mobx].setObservablePropValue_(cr,yn)}})}function isObservableObject(cr){return isObject(cr)?isObservableObjectAdministration(cr[$mobx]):!1}function recordAnnotationApplied(cr,vn,yn){var Rn;(Rn=cr.target_[storedAnnotationsSymbol])==null||delete Rn[yn]}var ENTRY_0=createArrayEntryDescriptor(0),safariPrototypeSetterInheritanceBug=function(){var cr=!1,vn={};return Object.defineProperty(vn,"0",{set:function(){cr=!0}}),Object.create(vn)[0]=1,cr===!1}(),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function cr(){};function inherit(cr,vn){Object.setPrototypeOf?Object.setPrototypeOf(cr.prototype,vn):cr.prototype.__proto__!==void 0?cr.prototype.__proto__=vn:cr.prototype=vn}inherit(StubArray,Array.prototype);var LegacyObservableArray=function(cr){function vn(Rn,Bn,Co,Po){var To;return Co===void 0&&(Co="ObservableArray"),Po===void 0&&(Po=!1),To=cr.call(this)||this,initObservable(function(){var Io=new ObservableArrayAdministration(Co,Bn,Po,!0);Io.proxy_=To,addHiddenFinalProp(To,$mobx,Io),Rn&&Rn.length&&To.spliceWithArray(0,0,Rn),safariPrototypeSetterInheritanceBug&&Object.defineProperty(To,"0",ENTRY_0)}),To}_inheritsLoose(vn,cr);var yn=vn.prototype;return yn.concat=function(){this[$mobx].atom_.reportObserved();for(var Bn=arguments.length,Co=new Array(Bn),Po=0;Po<Bn;Po++)Co[Po]=arguments[Po];return Array.prototype.concat.apply(this.slice(),Co.map(function(To){return isObservableArray(To)?To.slice():To}))},yn[Symbol.iterator]=function(){var Rn=this,Bn=0;return makeIterable({next:function(){return Bn<Rn.length?{value:Rn[Bn++],done:!1}:{done:!0,value:void 0}}})},_createClass(vn,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(Bn){this[$mobx].setArrayLength_(Bn)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(StubArray);Object.entries(arrayExtensions).forEach(function(cr){var vn=cr[0],yn=cr[1];vn!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,vn,yn)});function createArrayEntryDescriptor(cr){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(cr)},set:function(yn){this[$mobx].set_(cr,yn)}}}function createArrayBufferItem(cr){defineProperty(LegacyObservableArray.prototype,""+cr,createArrayEntryDescriptor(cr))}function reserveArrayBuffer(cr){if(cr>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var vn=OBSERVABLE_ARRAY_BUFFER_SIZE;vn<cr+100;vn++)createArrayBufferItem(vn);OBSERVABLE_ARRAY_BUFFER_SIZE=cr}}reserveArrayBuffer(1e3);function createLegacyArray(cr,vn,yn){return new LegacyObservableArray(cr,vn,yn)}function getAtom(cr,vn){if(typeof cr=="object"&&cr!==null){if(isObservableArray(cr))return vn!==void 0&&die(23),cr[$mobx].atom_;if(isObservableSet(cr))return cr.atom_;if(isObservableMap(cr)){if(vn===void 0)return cr.keysAtom_;var yn=cr.data_.get(vn)||cr.hasMap_.get(vn);return yn||die(25,vn,getDebugName(cr)),yn}if(isObservableObject(cr)){if(!vn)return die(26);var Rn=cr[$mobx].values_.get(vn);return Rn||die(27,vn,getDebugName(cr)),Rn}if(isAtom(cr)||isComputedValue(cr)||isReaction(cr))return cr}else if(isFunction(cr)&&isReaction(cr[$mobx]))return cr[$mobx];die(28)}function getAdministration(cr,vn){if(cr||die(29),vn!==void 0)return getAdministration(getAtom(cr,vn));if(isAtom(cr)||isComputedValue(cr)||isReaction(cr)||isObservableMap(cr)||isObservableSet(cr))return cr;if(cr[$mobx])return cr[$mobx];die(24,cr)}function getDebugName(cr,vn){var yn;if(vn!==void 0)yn=getAtom(cr,vn);else{if(isAction(cr))return cr.name;isObservableObject(cr)||isObservableMap(cr)||isObservableSet(cr)?yn=getAdministration(cr):yn=getAtom(cr)}return yn.name_}function initObservable(cr){var vn=untrackedStart(),yn=allowStateChangesStart(!0);startBatch();try{return cr()}finally{endBatch(),allowStateChangesEnd(yn),untrackedEnd(vn)}}var toString=objectPrototype.toString;function deepEqual(cr,vn,yn){return yn===void 0&&(yn=-1),eq(cr,vn,yn)}function eq(cr,vn,yn,Rn,Bn){if(cr===vn)return cr!==0||1/cr===1/vn;if(cr==null||vn==null)return!1;if(cr!==cr)return vn!==vn;var Co=typeof cr;if(Co!=="function"&&Co!=="object"&&typeof vn!="object")return!1;var Po=toString.call(cr);if(Po!==toString.call(vn))return!1;switch(Po){case"[object RegExp]":case"[object String]":return""+cr==""+vn;case"[object Number]":return+cr!=+cr?+vn!=+vn:+cr==0?1/+cr===1/vn:+cr==+vn;case"[object Date]":case"[object Boolean]":return+cr==+vn;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(cr)===Symbol.valueOf.call(vn);case"[object Map]":case"[object Set]":yn>=0&&yn++;break}cr=unwrap(cr),vn=unwrap(vn);var To=Po==="[object Array]";if(!To){if(typeof cr!="object"||typeof vn!="object")return!1;var Io=cr.constructor,$l=vn.constructor;if(Io!==$l&&!(isFunction(Io)&&Io instanceof Io&&isFunction($l)&&$l instanceof $l)&&"constructor"in cr&&"constructor"in vn)return!1}if(yn===0)return!1;yn<0&&(yn=-1),Rn=Rn||[],Bn=Bn||[];for(var Wl=Rn.length;Wl--;)if(Rn[Wl]===cr)return Bn[Wl]===vn;if(Rn.push(cr),Bn.push(vn),To){if(Wl=cr.length,Wl!==vn.length)return!1;for(;Wl--;)if(!eq(cr[Wl],vn[Wl],yn-1,Rn,Bn))return!1}else{var Xl=Object.keys(cr),Yl=Xl.length;if(Object.keys(vn).length!==Yl)return!1;for(var Zl=0;Zl<Yl;Zl++){var ey=Xl[Zl];if(!(hasProp(vn,ey)&&eq(cr[ey],vn[ey],yn-1,Rn,Bn)))return!1}}return Rn.pop(),Bn.pop(),!0}function unwrap(cr){return isObservableArray(cr)?cr.slice():isES6Map(cr)||isObservableMap(cr)||isES6Set(cr)||isObservableSet(cr)?Array.from(cr.entries()):cr}var _getGlobal$Iterator,maybeIteratorPrototype=((_getGlobal$Iterator=getGlobal().Iterator)==null?void 0:_getGlobal$Iterator.prototype)||{};function makeIterable(cr){return cr[Symbol.iterator]=getSelf,Object.assign(Object.create(maybeIteratorPrototype),cr)}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(cr){var vn=getGlobal();typeof vn[cr]=="undefined"&&die("MobX requires global '"+cr+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!react.exports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(cr){cr()}function observerBatching(cr){cr||(cr=defaultNoopBatch),configure({reactionScheduler:cr})}function printDebugValue(cr){return getDependencyTree(cr)}var REGISTRY_FINALIZE_AFTER=1e4,REGISTRY_SWEEP_INTERVAL=1e4,TimerBasedFinalizationRegistry=function(){function cr(vn){var yn=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:vn}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(Rn){Rn===void 0&&(Rn=REGISTRY_FINALIZE_AFTER),clearTimeout(yn.sweepTimeout),yn.sweepTimeout=void 0;var Bn=Date.now();yn.registrations.forEach(function(Co,Po){Bn-Co.registeredAt>=Rn&&(yn.finalize(Co.value),yn.registrations.delete(Po))}),yn.registrations.size>0&&yn.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){yn.sweep(0)}})}return Object.defineProperty(cr.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(vn,yn,Rn){this.registrations.set(Rn,{value:yn,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(cr.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(vn){this.registrations.delete(vn)}}),Object.defineProperty(cr.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,REGISTRY_SWEEP_INTERVAL))}}),cr}(),UniversalFinalizationRegistry=typeof FinalizationRegistry!="undefined"?FinalizationRegistry:TimerBasedFinalizationRegistry,observerFinalizationRegistry=new UniversalFinalizationRegistry(function(cr){var vn;(vn=cr.reaction)===null||vn===void 0||vn.dispose(),cr.reaction=null}),__read=globalThis&&globalThis.__read||function(cr,vn){var yn=typeof Symbol=="function"&&cr[Symbol.iterator];if(!yn)return cr;var Rn=yn.call(cr),Bn,Co=[],Po;try{for(;(vn===void 0||vn-- >0)&&!(Bn=Rn.next()).done;)Co.push(Bn.value)}catch(To){Po={error:To}}finally{try{Bn&&!Bn.done&&(yn=Rn.return)&&yn.call(Rn)}finally{if(Po)throw Po.error}}return Co};function observerComponentNameFor(cr){return"observer".concat(cr)}var ObjectToBeRetainedByReact=function(){function cr(){}return cr}();function objectToBeRetainedByReactFactory(){return new ObjectToBeRetainedByReact}function useObserver(cr,vn){vn===void 0&&(vn="observed");var yn=__read(React.useState(objectToBeRetainedByReactFactory),1),Rn=yn[0],Bn=__read(React.useState(),2),Co=Bn[1],Po=function(){return Co([])},To=React.useRef(null);To.current||(To.current={reaction:null,mounted:!1,changedBeforeMount:!1});var Io=To.current;Io.reaction||(Io.reaction=new Reaction(observerComponentNameFor(vn),function(){Io.mounted?Po():Io.changedBeforeMount=!0}),observerFinalizationRegistry.register(Rn,Io,Io)),React.useDebugValue(Io.reaction,printDebugValue),React.useEffect(function(){return observerFinalizationRegistry.unregister(Io),Io.mounted=!0,Io.reaction?Io.changedBeforeMount&&(Io.changedBeforeMount=!1,Po()):(Io.reaction=new Reaction(observerComponentNameFor(vn),function(){Po()}),Po()),function(){Io.reaction.dispose(),Io.reaction=null,Io.mounted=!1,Io.changedBeforeMount=!1}},[]);var $l,Wl;if(Io.reaction.track(function(){try{$l=cr()}catch(Xl){Wl=Xl}}),Wl)throw Wl;return $l}var hasSymbol=typeof Symbol=="function"&&Symbol.for,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof react.exports.forwardRef=="function"&&react.exports.forwardRef(function(cr){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof react.exports.memo=="function"&&react.exports.memo(function(cr){return null}).$$typeof;function observer$1(cr,vn){var yn;if(ReactMemoSymbol&&cr.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var Rn=(yn=vn==null?void 0:vn.forwardRef)!==null&&yn!==void 0?yn:!1,Bn=cr,Co=cr.displayName||cr.name;if(ReactForwardRefSymbol&&cr.$$typeof===ReactForwardRefSymbol&&(Rn=!0,Bn=cr.render,typeof Bn!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var Po=function(To,Io){return useObserver(function(){return Bn(To,Io)},Co)};return Co!==""&&(Po.displayName=Co),cr.contextTypes&&(Po.contextTypes=cr.contextTypes),Rn&&(Po=react.exports.forwardRef(Po)),Po=react.exports.memo(Po),copyStaticProperties(cr,Po),Po}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(cr,vn){Object.keys(cr).forEach(function(yn){hoistBlackList[yn]||Object.defineProperty(vn,yn,Object.getOwnPropertyDescriptor(cr,yn))})}globalThis&&globalThis.__read;var _a;observerBatching(reactDom.exports.unstable_batchedUpdates);_a=observerFinalizationRegistry.finalizeAllImmediately;var symbolId=0;function createSymbol(cr){if(typeof Symbol=="function")return Symbol(cr);var vn="__$mobx-react "+cr+" ("+symbolId+")";return symbolId++,vn}var createdSymbols={};function newSymbol(cr){return createdSymbols[cr]||(createdSymbols[cr]=createSymbol(cr)),createdSymbols[cr]}function shallowEqual(cr,vn){if(is(cr,vn))return!0;if(typeof cr!="object"||cr===null||typeof vn!="object"||vn===null)return!1;var yn=Object.keys(cr),Rn=Object.keys(vn);if(yn.length!==Rn.length)return!1;for(var Bn=0;Bn<yn.length;Bn++)if(!Object.hasOwnProperty.call(vn,yn[Bn])||!is(cr[yn[Bn]],vn[yn[Bn]]))return!1;return!0}function is(cr,vn){return cr===vn?cr!==0||1/cr===1/vn:cr!==cr&&vn!==vn}function setHiddenProp(cr,vn,yn){Object.hasOwnProperty.call(cr,vn)?cr[vn]=yn:Object.defineProperty(cr,vn,{enumerable:!1,configurable:!0,writable:!0,value:yn})}var mobxMixins=newSymbol("patchMixins"),mobxPatchedDefinition=newSymbol("patchedDefinition");function getMixins(cr,vn){var yn=cr[mobxMixins]=cr[mobxMixins]||{},Rn=yn[vn]=yn[vn]||{};return Rn.locks=Rn.locks||0,Rn.methods=Rn.methods||[],Rn}function wrapper(cr,vn){for(var yn=this,Rn=arguments.length,Bn=new Array(Rn>2?Rn-2:0),Co=2;Co<Rn;Co++)Bn[Co-2]=arguments[Co];vn.locks++;try{var Po;return cr!=null&&(Po=cr.apply(this,Bn)),Po}finally{vn.locks--,vn.locks===0&&vn.methods.forEach(function(To){To.apply(yn,Bn)})}}function wrapFunction(cr,vn){var yn=function(){for(var Bn=arguments.length,Co=new Array(Bn),Po=0;Po<Bn;Po++)Co[Po]=arguments[Po];wrapper.call.apply(wrapper,[this,cr,vn].concat(Co))};return yn}function patch(cr,vn,yn){var Rn=getMixins(cr,vn);Rn.methods.indexOf(yn)<0&&Rn.methods.push(yn);var Bn=Object.getOwnPropertyDescriptor(cr,vn);if(!(Bn&&Bn[mobxPatchedDefinition])){var Co=cr[vn],Po=createDefinition(cr,vn,Bn?Bn.enumerable:void 0,Rn,Co);Object.defineProperty(cr,vn,Po)}}function createDefinition(cr,vn,yn,Rn,Bn){var Co,Po=wrapFunction(Bn,Rn);return Co={},Co[mobxPatchedDefinition]=!0,Co.get=function(){return Po},Co.set=function(Io){if(this===cr)Po=wrapFunction(Io,Rn);else{var $l=createDefinition(this,vn,yn,Rn,Io);Object.defineProperty(this,vn,$l)}},Co.configurable=!0,Co.enumerable=yn,Co}var mobxAdminProperty=$mobx||"$mobx",mobxObserverProperty=newSymbol("isMobXReactObserver"),mobxIsUnmounted=newSymbol("isUnmounted"),skipRenderKey=newSymbol("skipRender"),isForcingUpdateKey=newSymbol("isForcingUpdate");function makeClassComponentObserver(cr){var vn=cr.prototype;if(cr[mobxObserverProperty]){var yn=getDisplayName(vn);console.warn("The provided component class ("+yn+`)
                has already been declared as an observer component.`)}else cr[mobxObserverProperty]=!0;if(vn.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(cr.__proto__!==react.exports.PureComponent){if(!vn.shouldComponentUpdate)vn.shouldComponentUpdate=observerSCU;else if(vn.shouldComponentUpdate!==observerSCU)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}makeObservableProp(vn,"props"),makeObservableProp(vn,"state"),cr.contextType&&makeObservableProp(vn,"context");var Rn=vn.render;if(typeof Rn!="function"){var Bn=getDisplayName(vn);throw new Error("[mobx-react] class component ("+Bn+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}return vn.render=function(){return this.render=createReactiveRender.call(this,Rn),this.render()},patch(vn,"componentDidMount",function(){this[mobxIsUnmounted]=!1,this.render[mobxAdminProperty]||react.exports.Component.prototype.forceUpdate.call(this)}),patch(vn,"componentWillUnmount",function(){var Co=this.render[mobxAdminProperty];if(Co)Co.dispose(),this.render[mobxAdminProperty]=null;else{var Po=getDisplayName(this);console.warn("The reactive render of an observer class component ("+Po+`)
                was overridden after MobX attached. This may result in a memory leak if the
                overridden reactive render was not properly disposed.`)}this[mobxIsUnmounted]=!0}),cr}function getDisplayName(cr){return cr.displayName||cr.name||cr.constructor&&(cr.constructor.displayName||cr.constructor.name)||"<component>"}function createReactiveRender(cr){var vn=this;setHiddenProp(this,skipRenderKey,!1),setHiddenProp(this,isForcingUpdateKey,!1);var yn=getDisplayName(this),Rn=cr.bind(this),Bn=!1,Co=function(){var Io=new Reaction(yn+".render()",function(){if(!Bn&&(Bn=!0,vn[mobxIsUnmounted]!==!0)){var $l=!0;try{setHiddenProp(vn,isForcingUpdateKey,!0),vn[skipRenderKey]||react.exports.Component.prototype.forceUpdate.call(vn),$l=!1}finally{setHiddenProp(vn,isForcingUpdateKey,!1),$l&&(Io.dispose(),vn.render[mobxAdminProperty]=null)}}});return Io.reactComponent=vn,Io};function Po(){var To;Bn=!1;var Io=(To=Po[mobxAdminProperty])!=null?To:Po[mobxAdminProperty]=Co(),$l=void 0,Wl=void 0;if(Io.track(function(){try{Wl=allowStateChanges(!1,Rn)}catch(Xl){$l=Xl}}),$l)throw $l;return Wl}return Po}function observerSCU(cr,vn){return this.state!==vn?!0:!shallowEqual(this.props,cr)}function makeObservableProp(cr,vn){var yn=newSymbol("reactProp_"+vn+"_valueHolder"),Rn=newSymbol("reactProp_"+vn+"_atomHolder");function Bn(){return this[Rn]||setHiddenProp(this,Rn,createAtom("reactive "+vn)),this[Rn]}Object.defineProperty(cr,vn,{configurable:!0,enumerable:!0,get:function(){var Po=!1;return allowStateReadsStart&&allowStateReadsEnd&&(Po=allowStateReadsStart(!0)),Bn.call(this).reportObserved(),allowStateReadsStart&&allowStateReadsEnd&&allowStateReadsEnd(Po),this[yn]},set:function(Po){!this[isForcingUpdateKey]&&!shallowEqual(this[yn],Po)?(setHiddenProp(this,yn,Po),setHiddenProp(this,skipRenderKey,!0),Bn.call(this).reportChanged(),setHiddenProp(this,skipRenderKey,!1)):setHiddenProp(this,yn,Po)}})}function observer(cr){return cr.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(react.exports.Component,cr)||Object.prototype.isPrototypeOf.call(react.exports.PureComponent,cr)?makeClassComponentObserver(cr):observer$1(cr)}if(!react.exports.Component)throw new Error("mobx-react requires React to be available");if(!observable)throw new Error("mobx-react requires mobx to be available");const _requestAnimationFrame=window.requestAnimationFrame||(cr=>setTimeout(()=>cr(performance.now()),16)),_cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;function requestAnimationFrameInterval(cr,vn=60){let yn=-1,Rn=0,Bn=-1;const Co=1e3/vn;function Po(To){Bn===-1&&(Bn=To),yn=_requestAnimationFrame(Po),!(To-Rn<Co)&&(Rn=To,cr&&cr(To-Bn))}return yn=_requestAnimationFrame(Po),function(){_cancelAnimationFrame(yn)}}var VreoKeyframeEnum=(cr=>(cr.CameraMovement="CameraMovement",cr.PanoTag="PanoTag",cr.PanoTextLabel="PanoTextLabel",cr.Prompter="Prompter",cr.UpdateVRPanorama="UpdateVRPanorama",cr.ModelVideo="ModelVideo",cr.PanoEffect="PanoEffect",cr.InfoPanel="InfoPanel",cr.VideoEffect="VideoEffect",cr.BgMusic="BgMusic",cr.Exit="Exit",cr.Custom="Custom",cr))(VreoKeyframeEnum||{}),InfoPanelTypeEnum=(cr=>(cr.Image="Image",cr.Video="Video",cr))(InfoPanelTypeEnum||{}),InfoPanelStyleEnum=(cr=>(cr.Drawer="Drawer",cr.PopUp="PopUp",cr))(InfoPanelStyleEnum||{});function setElementDataset(cr,vn){cr&&Object.keys(vn).forEach(yn=>{const Rn=vn[yn].toString();cr instanceof Element?cr.setAttribute(`data-${yn}`,Rn):cr instanceof Document?cr.documentElement.setAttribute(`data-${yn}`,Rn):cr instanceof HTMLElement?cr.dataset[yn]=Rn:cr.setAttribute(`data-${yn}`,Rn)})}function getFileExpandedName(cr){if(!cr)return"";const vn=cr.lastIndexOf(".");return cr.substring(vn+1).toLowerCase()}function getMediaType(cr){const vn=getFileExpandedName(cr);return getMediaTypeByExpandedName(vn)}function getMediaTypeByExpandedName(cr){return cr?/jpg|jpeg|png$/.test(cr)?"image":/mp3|wav$/.test(cr)?"audio":/avi|wmv|mpeg|mp4|m4v|mov|asf|flv|f4v|rmvb|rm|3gp|vob$/.test(cr)?"video":"unknown":"unknown"}class Controller extends X0{constructor({five:yn,container:Rn,configs:Bn}){super();V1(this,"five");V1(this,"configs");V1(this,"videoAgentScene");V1(this,"vreoUnit");V1(this,"stopInterval");V1(this,"playing",!1);V1(this,"ended",!1);V1(this,"loading",!1);V1(this,"containerSize",{width:0,height:0});V1(this,"appSize");V1(this,"container");V1(this,"waveAppearance",null);V1(this,"appearance",{waveStyle:"wave"});V1(this,"avatar",{});V1(this,"visible",!1);V1(this,"popUp",null);V1(this,"drawerConfig",null);this.configs=Bn,this.container=Rn,this.five=yn,this.appSize=Bn.appSize,this.appearance={...this.appearance,...Bn.appearance},makeObservable(this,{visible:observable,setVisible:action,playing:observable,setPlaying:action,loading:observable,setLoading:action,popUp:observable.ref,openPopUp:action,drawerConfig:observable.ref,openDrawer:action,ended:observable,waveAppearance:observable,avatar:observable,containerSize:observable,setContainerSize:action,appearance:observable,setAppearance:action,configs:observable.ref,setEnded:action,setAvatar:action}),reaction(()=>[this.appearance.waveStyle,this.loading],([Co,Po])=>{if(Po===null){this.waveAppearance=null;return}if(Co==="wave")switch(Po){case!0:this.waveAppearance="double";break;case!1:this.waveAppearance="solid";break}else if(Co==="solid")switch(Po){case!0:this.waveAppearance="swap";break;case!1:this.waveAppearance="expand";break}},{fireImmediately:!0}),this.appSize?setElementDataset(this.container,{size:this.appSize}):reaction(()=>this.containerSize,Co=>{if(!(Co!=null&&Co.width))return;const Po=Co.width,To=Co.height,Io=(()=>Po<=500?"S":Po<=1024?"M":Po<=2048?"L":"XL")(),$l=(()=>To>Po?"portrait":"landscape")();setElementDataset(this.container,{size:Io}),setElementDataset(this.container,{orientation:$l})},{fireImmediately:!0}),reaction(()=>this.ended,Co=>{Co&&this.emit("paused",!0)}),reaction(()=>this.playing,Co=>{this.ended||this.emit(Co?"playing":"paused")})}get agentType(){var Rn,Bn;const yn=getMediaType((Rn=this.videoAgentScene)==null?void 0:Rn.videoAgentMesh.videoUrl);return(Bn=this.avatar)!=null&&Bn.force?"avatar":yn==="video"?"video":"none"}openPopUp(yn){if(!yn){this.popUp=null;return}this.popUp=yn}setLoading(yn){this.loading=yn}setAvatar(yn){this.avatar=yn}setContainerSize(yn,Rn){this.containerSize={width:yn,height:Rn}}setVisible(yn){this.visible=yn}setPlaying(yn){this.playing=yn}setEnded(yn){this.ended=yn}setAppearance(yn){this.appearance={...this.appearance,...yn}}openDrawer(yn){var Rn;if(!yn){this.drawerConfig={content:"",height:(Rn=this.drawerConfig)==null?void 0:Rn.height};return}this.drawerConfig=yn}get ready(){return!!this.videoAgentScene}get currentTime(){var yn;return((yn=this.videoAgentScene)==null?void 0:yn.videoAgentMesh.currentTime)||0}get currentKeyframes(){return this.vreoUnit?this.vreoUnit.keyframes.filter(Rn=>{if(Rn.parsed||Rn.end<this.currentTime||Rn.start>this.currentTime)return!1;if(Rn.type===VreoKeyframeEnum.BgMusic)return!0;const Bn=this.currentTime-Rn.start;return Bn<=100&&Bn>=0}):[]}get mediaInstance(){var yn;return(yn=this.videoAgentScene)==null?void 0:yn.videoAgentMesh.mediaInstance}requestAnimationFrameLoop(yn){var Bn,Co,Po,To,Io;if(((Bn=this.mediaInstance)==null?void 0:Bn.ended)&&this.mediaInstance.currentTime!==0){if(this.ended)return;(Co=this.vreoUnit)==null||Co.keyframes.forEach($l=>$l.parsed=!1),this.setEnded(!0),this.setPlaying(!1),this.mediaInstance.pause(),this.mediaInstance.currentTime=0;return}if(!this.playing){(Po=this.mediaInstance)!=null&&Po.paused||(To=this.mediaInstance)==null||To.pause();return}((Io=this.mediaInstance)==null?void 0:Io.paused)&&this.playing&&this.mediaInstance.play(),this.currentKeyframes.forEach($l=>{$l.parsed||($l.parsed=!0,this.emit($l.type,$l,this.currentTime),yn&&yn($l.type,$l,this.currentTime))})}run(yn){this.stopInterval||(this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop(yn)))}clear(){var yn,Rn;this.setPlaying(!1),(yn=this.vreoUnit)==null||yn.keyframes.forEach(Bn=>Bn.parsed=!1),this.vreoUnit=void 0,this.mediaInstance&&(this.mediaInstance.pause(),this.mediaInstance.currentTime=0),(Rn=this.stopInterval)==null||Rn.call(this),this.stopInterval=void 0}dispose(){this.clear()}}const ControllerContext=react.exports.createContext(null);function useController(){const cr=React.useContext(ControllerContext);if(!cr)throw new Error('\u6CA1\u6709\u627E\u5230 "ControllerContext"');return cr}function useFiveInstance(){const cr=useController();if(!cr.five)throw new Error('\u6CA1\u6709\u627E\u5230 "five" \u5B9E\u4F8B');return cr.five}function useFiveProject2d(){const cr=useFiveInstance();return vn=>cr.project2d(vn,!1)}var CameraMovementEffect=(cr=>(cr.Move="Move",cr.Rotate="Rotate",cr))(CameraMovementEffect||{}),Rotation=(cr=>(cr.Clockwise="Clockwise",cr.Anticlockwise="Anticlockwise",cr.Loop="Loop",cr))(Rotation||{});const PI$1=Math.PI,PI_2$1=PI$1*2;let moving=!1;function progressNumber(cr,vn,yn){return cr===vn?cr:cr+(vn-cr)*yn}function progressLongitude(cr,vn,yn,Rn){const Bn=yn===Rotation.Clockwise,Po=(Bn?cr-vn:vn-cr)%PI_2$1,To=Po<0?Po+PI_2$1:Po,Io=Bn?-To:To;return(cr+Io*Rn)%PI_2$1}const CameraMovementPlugin=cr=>({move:(Rn,Bn,Co={preload:!0})=>new Promise(async(Po,To)=>{var $l;if(moving=!0,Co.asyncStartCallback&&Co.asyncStartCallback(),cr.panoIndex===void 0)return To(!1);if(Rn.mode&&Rn.mode!==cr.currentMode)return await cr.changeMode(Rn.mode,Rn,Bn),Po(!0);if(Rn.mode===Eg.Mode.Floorplan||(Co.preload&&Rn.panoIndex!==void 0&&Rn.panoIndex!==cr.panoIndex&&await cr.preloadPano(Rn.panoIndex),($l=Co.asyncEndCallback)==null||$l.call(Co),Rn.panoIndex===void 0&&Rn.fov===void 0&&Rn.latitude===void 0&&Rn.longitude===void 0))return Po(!0);const Io=Rn.panoIndex!==void 0?Rn.panoIndex:cr.panoIndex;if(Io!==void 0){const Wl=performance.now();await cr.ready();const Xl=Object.assign({},Rn,{duration:Bn-(performance.now()-Wl),moveEndCallback:()=>Po(!0),moveCancelCallback:()=>{Po(!0)},effect:Rn.transEffect||"fly"});await cr.moveToPano(Io,Xl)}else To(!1)}),rotate:async(Rn,Bn,Co={})=>{var Yl,Zl;moving=!1,(Yl=Co.asyncStartCallback)==null||Yl.call(Co),Rn.mode&&cr.currentMode!==Rn.mode&&await cr.changeMode(Rn.mode,Rn.mode===Eg.Mode.Panorama?{latitude:0}:void 0),Rn.mode===Eg.Mode.Panorama&&cr.currentMode===Eg.Mode.Panorama&&Rn.panoIndex!==void 0&&Rn.panoIndex!==cr.panoIndex&&(Co.preload&&await cr.preloadPano(Rn.panoIndex),await new Promise((ey,Rm)=>{cr.moveToPano(Rn.panoIndex,{moveEndCallback:()=>ey(!0),moveCancelCallback:()=>Rm(!1),effect:"fade"})})),await cr.ready(),(Zl=Co.asyncEndCallback)==null||Zl.call(Co);const Po=cr.getCurrentState(),To=(()=>Rn)();let Io=!1;const $l=performance.now();let Wl=Bn;Rn.rotation===Rotation.Loop&&(Wl=Rn.rotateSpeed?Math.ceil(Math.abs(To.longitude-Po.longitude)/Rn.rotateSpeed*1e3):Bn,Wl=Math.min(Bn,Wl));const Xl=()=>{if(Io||moving){cr.off("renderFrame",Xl);return}let ey={};if(Rn.rotation!==Rotation.Loop){const Rm=(performance.now()-$l)/Bn;ey={fov:progressNumber(Po.fov,To.fov,Rm),latitude:progressNumber(Po.latitude,To.latitude,Rm),longitude:progressLongitude(Po.longitude,To.longitude,Rn.rotation,Rm)}}else{const Rm=(performance.now()-$l)/Wl,ry=Math.floor(Rm),_g=Rm-ry,ny=ry%2===1?1-_g:_g;ey={fov:progressNumber(Po.fov,To.fov,ny),latitude:progressNumber(Po.latitude,To.latitude,ny),longitude:progressNumber(Po.longitude,To.longitude,ny)}}cr.setState(ey,!0)};return cr.on("renderFrame",Xl),await new Promise(ey=>{setTimeout(()=>{Io=!0,cr.off("renderFrame",Xl),ey(!0)},Bn)})}});function CameraMovement(){const cr=useController(),vn=useFiveInstance(),yn=react.exports.useRef();return react.exports.useEffect(()=>{const Rn=async Bn=>{yn.current||(yn.current=CameraMovementPlugin(vn));const{start:Co,end:Po,data:To}=Bn,Io=To,$l=Io.effect;$l===CameraMovementEffect.Rotate?await yn.current.rotate(To,Po-Co):$l===CameraMovementEffect.Move?await yn.current.move(To,Po-Co):Io.panoIndex!==void 0&&Io.panoIndex!==vn.panoIndex?await yn.current.move(To,Po-Co):await yn.current.rotate(To,Po-Co)};return cr.on(VreoKeyframeEnum.CameraMovement,Rn),()=>{cr.off(VreoKeyframeEnum.CameraMovement,Rn)}},[cr]),jsx(Fragment,{})}const resizeObserverCache=new Map;function addResizeListener(cr,vn,yn=!0){if(!cr)return()=>{};if(yn&&vn(cr.clientWidth,cr.clientHeight),typeof ResizeObserver!="undefined"&&ResizeObserver){const Rn=new ResizeObserver(()=>vn(cr.clientWidth,cr.clientHeight));return Rn.observe(cr),resizeObserverCache.set(cr,resizeObserverCache.get(cr)||0+1),()=>{cr&&Rn.unobserve(cr),resizeObserverCache.get(cr)===1&&resizeObserverCache.delete(cr)}}else{const Rn=document.createElement("iframe");return Rn.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;margin:0;border:0;padding:0;z-index:-1;",Rn.classList.add("resize-sensor-iframe"),cr.appendChild(Rn),Rn.contentWindow?(Rn.contentWindow.addEventListener("resize",()=>{vn(Rn.clientWidth,Rn.clientHeight)}),resizeObserverCache.set(cr,resizeObserverCache.get(cr)||0+1),()=>{cr.removeChild(Rn),resizeObserverCache.get(cr)===1&&resizeObserverCache.delete(cr)}):()=>{}}}function hasResizeListener(cr){return cr?resizeObserverCache.get(cr)||0>0:!1}function ResizeObserver$1(){const cr=React.useRef(null),vn=useController();return React.useEffect(()=>{if(!cr.current)return;const yn=vn.container.parentElement;if(hasResizeListener(yn))return;const Rn=addResizeListener(yn,(Bn,Co)=>{vn.setContainerSize(Bn,Co)});return()=>{Rn()}},[]),jsx("div",{className:"resizeObserver-element",ref:cr})}const isWX=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,isIOS=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1,isIOSorWX=isIOS||isWX,_videoElement=document.createElement("video");_videoElement.setAttribute("playsinline","true");_videoElement.setAttribute("webkit-playsinline","true");isIOSorWX&&_videoElement.paused&&_videoElement.addEventListener("click",()=>_videoElement.play(),{once:!0});function InfoPanelImg({url:cr,children:vn}){return jsx("div",{className:"vreo-infoPanel-container",children:jsxs("div",{className:"vreo-infoPanel",children:[vn,jsx("img",{src:cr})]})})}function InfoPanelVideo({url:cr,children:vn}){const yn=react.exports.useRef(null),Rn=useController();return react.exports.useEffect(()=>{var Po,To;const Bn=((To=(Po=Rn.configs)==null?void 0:Po.videos)==null?void 0:To.videoPanel)||_videoElement;if(!yn.current)return;Bn.src=cr,yn.current.contains(Bn)||yn.current.appendChild(Bn);const Co=()=>{Bn.removeEventListener("canplaythrough",Co);try{Bn.play()}catch{}};return Bn.addEventListener("canplaythrough",Co),Bn.load(),()=>{var Io;Bn.pause(),(Io=yn.current)!=null&&Io.contains(Bn)&&yn.current.removeChild(Bn)}},[yn.current]),jsx("div",{className:"vreo-infoPanel-container",children:jsxs("div",{className:"vreo-infoPanel",children:[vn,jsx("div",{className:"vreo-infoPanel-inner",ref:yn})]})})}const Title=cr=>!cr.title&&!cr.subTitle?null:jsx(Fragment,{children:jsxs("div",{className:"vreo-infoPanel-title",children:[jsx("div",{className:"vreo-infoPanel-t1",children:cr.title}),jsx("div",{className:"vreo-infoPanel-t2",children:cr.subTitle})]})});function InfoPanel(){const cr=react.exports.useRef(),vn=useController();return react.exports.useEffect(()=>{var Rn;if(((Rn=vn.configs)==null?void 0:Rn.keyframeMap.InfoPanel)===!1)return;const yn=Bn=>{const{start:Co,end:Po,data:To}=Bn,Io=To,{title:$l,subTitle:Wl,style:Xl}=Io;do{if(Xl===InfoPanelStyleEnum.PopUp){Io.type===InfoPanelTypeEnum.Image?vn.openPopUp(jsx(InfoPanelImg,{url:Io.url,children:jsx(Title,{title:$l,subTitle:Wl})})):Io.type===InfoPanelTypeEnum.Video&&vn.openPopUp(jsx(InfoPanelVideo,{url:Io.url,children:jsx(Title,{title:$l,subTitle:Wl})}));break}Io.type===InfoPanelTypeEnum.Image?vn.openDrawer({content:jsx(InfoPanelImg,{url:Io.url,children:jsx(Title,{title:$l,subTitle:Wl})}),height:"60vh"}):Io.type===InfoPanelTypeEnum.Video&&vn.openDrawer({content:jsx(InfoPanelVideo,{url:Io.url,children:jsx(Title,{title:$l,subTitle:Wl})}),height:"60vh"})}while(!1);cr.current=setTimeout(()=>{vn.openDrawer(!1),vn.openPopUp(!1)},Po-Co)};return vn.on(VreoKeyframeEnum.InfoPanel,yn),vn.on("ended",()=>{vn.openPopUp(!1)}),vn.on("paused",()=>{vn.openPopUp(!1)}),()=>{vn.off(VreoKeyframeEnum.InfoPanel,yn),cr.current&&clearTimeout(cr.current)}},[vn]),jsx(Fragment,{})}const ModelTVVideoPlugin=(cr,{videoElement:vn})=>{const yn={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:vn},Rn=Xl=>{yn.videoTexture&&(yn.videoTexture.image.muted=Xl,yn.videoTexture.image.play())},Bn=()=>yn.videoTexture?yn.videoTexture.image.muted:!0,Co=()=>{if(yn.enabled||!yn.videoTexture)return;yn.enabled=!0,yn.videoMeshes=To(),yn.videoMeshes.forEach(Yl=>cr.scene.add(Yl));const Xl=()=>{if(!yn.videoTexture)return;const Yl=()=>{var Zl;!yn.videoTexture||((Zl=yn.videoTexture)==null||Zl.image.removeEventListener("timeupdate",Yl),yn.videoTextureEnabled=!0,yn.videoMeshes.forEach(ey=>{ey.material.map!==yn.videoTexture&&(ey.material.map=yn.videoTexture)}),cr.needsRender=!0)};yn.videoTexture.image.addEventListener("timeupdate",Yl),yn.videoTexture&&yn.videoMeshes.length&&yn.videoTexture.image.play()};if(cr.model.loaded)Xl();else return cr.once("modelLoaded",()=>Xl())},Po=()=>{!yn.enabled||(yn.enabled=!1,yn.videoMeshes.forEach(Xl=>{Xl.geometry.dispose(),Xl.material.dispose(),cr.scene.remove(Xl),yn.videoTexture&&yn.videoTexture.image.pause()}),yn.videoMeshes=[],cr.needsRender=!0)},To=()=>yn.rectPoints.map((Xl,Yl)=>{const Zl=new BufferGeometry,ey=128,Rm=[];Rm.push(Xl[0].x,Xl[0].y,Xl[0].z);for(let iy=1;iy<ey;iy++)Rm.push(Xl[0].x+(Xl[1].x-Xl[0].x)*iy/ey,Xl[0].y+(Xl[1].y-Xl[0].y)*iy/ey,Xl[0].z+(Xl[1].z-Xl[0].z)*iy/ey);Rm.push(Xl[1].x,Xl[1].y,Xl[1].z),Rm.push(Xl[2].x,Xl[2].y,Xl[2].z);for(let iy=1;iy<ey;iy++)Rm.push(Xl[2].x+(Xl[3].x-Xl[2].x)*iy/ey,Xl[2].y+(Xl[3].y-Xl[2].y)*iy/ey,Xl[2].z+(Xl[3].z-Xl[2].z)*iy/ey);Rm.push(Xl[3].x,Xl[3].y,Xl[3].z);const ry=[];ry.push(0,1);for(let iy=1;iy<ey;iy++)ry.push(0,1-iy/ey);ry.push(0,0),ry.push(1,0);for(let iy=1;iy<ey;iy++)ry.push(1,iy/ey);ry.push(1,1);const _g=[];for(let iy=0;iy<ey;iy++)_g.push(iy,iy+1,ey*2-iy,iy,ey*2-iy,ey*2+1-iy);Zl.setAttribute("position",new BufferAttribute(new Float32Array(Rm),3)),Zl.setAttribute("uv",new BufferAttribute(new Float32Array(ry),2)),Zl.setIndex(new BufferAttribute(new Uint32Array(_g),1));const ty=new MeshBasicMaterial({map:yn.videoTextureEnabled?yn.videoTexture:yn.imageTexture,side:DoubleSide}),ny=new Mesh(Zl,ty);return ny.renderOrder=1,ny.name=`video-${Yl}-${performance.now()}`,ny}),Io=Xl=>{const Yl=new TextureLoader().load(Xl);return Yl.minFilter=LinearFilter,Yl.magFilter=LinearFilter,Yl.format=RGBFormat,Yl},$l=(Xl,Yl)=>new Promise((Zl,ey)=>{const Rm=new XMLHttpRequest;Rm.onreadystatechange=()=>{if(Rm.readyState==4)if(Rm.status==200){const ry=window.URL||window.webkitURL;Yl=Yl||document.createElement("video"),Yl.crossOrigin="anonymous",Yl.autoplay=!0,Yl.muted=!0,Yl.loop=!0,Yl.playsInline=!0,Yl.src=ry.createObjectURL(Rm.response);const _g=new VideoTexture(Yl);_g.minFilter=LinearFilter,_g.magFilter=LinearFilter,_g.format=RGBFormat,Zl(Object.assign(_g,{videoSource:Xl}))}else ey(new Error("Video download Error: "+Rm.status))},Rm.onerror=ry=>ey(ry),Rm.open("GET",Xl),Rm.responseType="blob",Rm.send()}),Wl=async(Xl,Yl)=>{const{video_src:Zl,video_poster_src:ey,points:Rm}=Xl;yn.videoSource=Zl,yn.rectPoints=Rm.map(ry=>ry.map(({x:_g,y:ty,z:ny})=>new Vector3(_g,ty,ny))),yn.imageTexture=Io(ey),Yl&&(yn.videoElement=Yl),yn.videoTexture=await $l(yn.videoSource,yn.videoElement),yn.enabled=!!Xl.enable,yn.enabled&&Co()};return cr.on("modeChange",()=>Rn(!0)),cr.on("wantsTapGesture",Xl=>{if(!yn.enabled)return;const[Yl]=Xl.intersectObjects(cr.scene.children,!0);if(!!Yl&&/^video/.test(Yl.object.name))return yn.videoTexture&&Rn(!yn.videoTexture.image.muted),!1}),cr.on("panoArrived",()=>{if(!yn.enabled||Bn())return;const Xl=cr.camera.position;yn.rectPoints.find(Zl=>{const ey=Zl.reduce((Rm,ry)=>new Vector3(Rm.x+ry.x/Zl.length,Rm.y+ry.y/Zl.length,Rm.z+ry.z/Zl.length),new Vector3);return Zl.map(Rm=>new Vector3((Rm.x+ey.x)/2,(Rm.y+ey.y)/2,(Rm.z+ey.z)/2)).filter(Rm=>{Rm=Rm.clone().sub(Xl).normalize();const ry=new Raycaster(Xl,Rm),[_g]=ry.intersectObjects(cr.scene.children,!0);return!!_g&&/^video/.test(_g.object.name)}).length>=2})||Rn(!0)}),cr.on("renderFrame",()=>{yn.videoMeshes.forEach(Xl=>{Xl&&(Xl.needsRender=!0)})}),cr.on("load",Xl=>{Xl.modelTVVideoData&&Wl(Xl.modelTVVideoData)}),{enable:Co,disable:Po,load:Wl}};function createTransMatrix(cr){const vn=new Matrix4;return vn.fromArray(cr),yn=>{const Rn=new Vector3(...yn);return Rn.applyMatrix4(vn),Rn.toArray()}}function ModelVideo(){const cr=useController(),vn=useFiveInstance(),yn=react.exports.useRef(),Rn=react.exports.useRef();return react.exports.useEffect(()=>{const Bn=async Co=>{var ey,Rm;yn.current||(yn.current=ModelTVVideoPlugin(vn,{}));const{start:Po,end:To}=Co,{videoSrc:Io,videoPosterSrc:$l,vertexs:Wl,matrixWorld:Xl}=Co.data,Yl=(()=>{if(Wl.length<4)throw new Error("ModelVideo: \u9876\u70B9\u6570\u636E\u96C6\u5408\u4E0D\u591F\uFF0C\u65E0\u6CD5\u7EC4\u6210\u77E9\u5F62 ....");if(Wl.length===4)return Wl;const ry=new Box3;return Wl.forEach(_g=>ry.expandByPoint(new Vector3(_g.x,_g.y,_g.z))),[new Vector3(ry.min.x,ry.max.y,ry.max.z),new Vector3(ry.min.x,ry.min.y,ry.max.z),new Vector3(ry.max.x,ry.min.y,ry.max.z),new Vector3(ry.max.x,ry.max.y,ry.max.z)]})(),Zl=(()=>{if(Xl){const ry=createTransMatrix(Xl);return[Yl.map(_g=>{const ty=ry([_g.x,_g.y,_g.z]);return{x:ty[0],y:ty[1],z:ty[2]}})]}return[Yl]})();yn.current.disable(),await yn.current.load({video_src:Io,video_poster_src:$l,points:Zl},(Rm=(ey=cr.configs)==null?void 0:ey.videos)==null?void 0:Rm.modelTVVideo),yn.current.enable(),Rn.current=setTimeout(()=>{var ry;return(ry=yn.current)==null?void 0:ry.disable()},To-Po)};return cr.on(VreoKeyframeEnum.ModelVideo,Bn),()=>{cr.off(VreoKeyframeEnum.ModelVideo,Bn),Rn.current&&clearTimeout(Rn.current)}},[cr]),jsx(Fragment,{})}var E$w=function(cr,vn){return E$w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yn,Rn){yn.__proto__=Rn}||function(yn,Rn){for(var Bn in Rn)Object.prototype.hasOwnProperty.call(Rn,Bn)&&(yn[Bn]=Rn[Bn])},E$w(cr,vn)};function A$A(cr,vn){if(typeof vn!="function"&&vn!==null)throw new TypeError("Class extends value "+String(vn)+" is not a constructor or null");E$w(cr,vn);function yn(){this.constructor=cr}cr.prototype=vn===null?Object.create(vn):(yn.prototype=vn.prototype,new yn)}var B$r=function(cr){A$A(vn,cr);function vn(){var yn=cr.call(this)||this;yn.type="LineSegmentsGeometry";var Rn=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],Bn=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],Co=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];return yn.setIndex(Co),yn.setAttribute("position",new Float32BufferAttribute(Rn,3)),yn.setAttribute("uv",new Float32BufferAttribute(Bn,2)),yn}return vn.prototype.applyMatrix4=function(yn){var Rn=this.attributes.instanceStart,Bn=this.attributes.instanceEnd;return Rn!==void 0&&(Rn.applyMatrix4(yn),Bn.applyMatrix4(yn),Rn.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},vn.prototype.setPositions=function(yn){var Rn;yn instanceof Float32Array?Rn=yn:Array.isArray(yn)?Rn=new Float32Array(yn):Rn=new Float32Array;var Bn=new InstancedInterleavedBuffer(Rn,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(Bn,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(Bn,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},vn.prototype.setColors=function(yn){var Rn;yn instanceof Float32Array?Rn=yn:Array.isArray(yn)?Rn=new Float32Array(yn):Rn=new Float32Array;var Bn=new InstancedInterleavedBuffer(Rn,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(Bn,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(Bn,3,3)),this},vn.prototype.fromWireframeGeometry=function(yn){return this.setPositions(yn.attributes.position.array),this},vn.prototype.fromEdgesGeometry=function(yn){return this.setPositions(yn.attributes.position.array),this},vn.prototype.fromMesh=function(yn){return this.fromWireframeGeometry(new WireframeGeometry(yn.geometry)),this},vn.prototype.fromLineSegments=function(yn){var Rn=yn.geometry;if(Rn instanceof Geometry){var Bn=new BufferGeometry().fromGeometry(Rn);this.setPositions(Bn.attributes.position.array)}else Rn instanceof BufferGeometry&&this.setPositions(Rn.attributes.position.array);return this},vn.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new Box3);var yn=this.attributes.instanceStart,Rn=this.attributes.instanceEnd;if(yn!==void 0&&Rn!==void 0){var Bn=new Box3;this.boundingBox.setFromBufferAttribute(yn),Bn.setFromBufferAttribute(Rn),this.boundingBox.union(Bn)}},vn.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingBox===null&&this.computeBoundingBox();var yn=this.attributes.instanceStart,Rn=this.attributes.instanceEnd;if(yn!==void 0&&Rn!==void 0){var Bn=this.boundingSphere.center;this.boundingBox.getCenter(Bn);for(var Co=0,Po=new Vector3,To=0,Io=yn.count;To<Io;To++)Po.fromBufferAttribute(yn,To),Co=Math.max(Co,Bn.distanceToSquared(Po)),Po.fromBufferAttribute(Rn,To),Co=Math.max(Co,Bn.distanceToSquared(Po));this.boundingSphere.radius=Math.sqrt(Co),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},vn.prototype.toJSON=function(){},vn}(InstancedBufferGeometry);Object.assign(B$r.prototype,{isLineSegmentsGeometry:!0});var x$u={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,{linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},L$o=function(cr){A$A(vn,cr);function vn(yn){var Rn=cr.call(this,{uniforms:UniformsUtils.clone(x$u.uniforms),vertexShader:x$u.vertexShader,fragmentShader:x$u.fragmentShader,clipping:!0})||this;return Rn.type="LineMaterial",Rn.dashed=!1,Object.defineProperties(Rn,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(Bn){this.uniforms.diffuse.value=Bn}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(Bn){this.uniforms.linewidth.value=Bn}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(Bn){this.uniforms.dashScale.value=Bn}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(Bn){this.uniforms.dashSize.value=Bn}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(Bn){this.uniforms.gapSize.value=Bn}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Bn){this.uniforms.opacity.value=Bn}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(Bn){this.uniforms.resolution.value.copy(Bn)}}}),Rn.setValues(yn),Rn}return vn}(ShaderMaterial);Object.assign(L$o.prototype,{isLineMaterial:!0});var F$l=function(cr){A$A(vn,cr);function vn(yn,Rn){var Bn=cr.call(this)||this;return Bn.type="LineSegments2",Bn.geometry=yn!==void 0?yn:new B$r,Bn.material=Rn!==void 0?Rn:new L$o({color:Math.random()*16777215}),Bn}return vn.prototype.computeLineDistances=function(){for(var yn=this.geometry,Rn=yn.attributes.instanceStart,Bn=yn.attributes.instanceEnd,Co=new Float32Array(2*Rn.count),Po=new Vector3,To=new Vector3,Io=0,$l=0,Wl=Rn.count;Io<Wl;Io++,$l+=2)Po.fromBufferAttribute(Rn,Io),To.fromBufferAttribute(Bn,Io),Co[$l]=$l===0?0:Co[$l-1],Co[$l+1]=Co[$l]+Po.distanceTo(To);var Xl=new InstancedInterleavedBuffer(Co,2,1);return yn.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(Xl,1,0)),yn.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(Xl,1,1)),this},vn.prototype.raycast=function(yn,Rn){yn.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var Bn=yn.ray,Co=yn.camera,Po=Co.projectionMatrix,To=this.geometry,Io=this.material,$l=Io.resolution,Wl=Io.linewidth,Xl=To.attributes.instanceStart,Yl=To.attributes.instanceEnd,Zl=new Vector4,ey=new Vector4,Rm=new Vector4,ry=new Vector3,_g=new Matrix4,ty=new Line3,ny=new Vector3;Bn.at(1,Rm),Rm.w=1,Rm.applyMatrix4(Co.matrixWorldInverse),Rm.applyMatrix4(Po),Rm.multiplyScalar(1/Rm.w),Rm.x*=$l.x/2,Rm.y*=$l.y/2,Rm.z=0,ry.copy(Rm);var iy=this.matrixWorld;_g.multiplyMatrices(Co.matrixWorldInverse,iy);for(var oy=0,ay=Xl.count;oy<ay;oy++){Zl.fromBufferAttribute(Xl,oy),ey.fromBufferAttribute(Yl,oy),Zl.w=1,ey.w=1,Zl.applyMatrix4(_g),ey.applyMatrix4(_g),Zl.applyMatrix4(Po),ey.applyMatrix4(Po),Zl.multiplyScalar(1/Zl.w),ey.multiplyScalar(1/ey.w);var uy=Zl.z<-1&&ey.z<-1,hy=Zl.z>1&&ey.z>1;if(!(uy||hy)){Zl.x*=$l.x/2,Zl.y*=$l.y/2,ey.x*=$l.x/2,ey.y*=$l.y/2,ty.start.copy(Zl),ty.start.z=0,ty.end.copy(ey),ty.end.z=0;var my=ty.closestPointToPointParameter(ry,!0);ty.at(my,ny);var ly=MathUtils.lerp(Zl.z,ey.z,my),sy=ly>=-1&&ly<=1,cy=ry.distanceTo(ny)<Wl*.5;if(sy&&cy){ty.start.fromBufferAttribute(Xl,oy),ty.end.fromBufferAttribute(Yl,oy),ty.start.applyMatrix4(iy),ty.end.applyMatrix4(iy);var fy=new Vector3,vy=new Vector3;Bn.distanceSqToSegment(ty.start,ty.end,vy,fy),Rn.push({point:vy,pointOnLine:fy,distance:Bn.origin.distanceTo(vy),object:this,faceIndex:oy})}}}},vn}(Mesh);Object.assign(F$l.prototype,{isLineSegments2:!0});var I$r=function(cr){A$A(vn,cr);function vn(yn,Rn){var Bn=cr.call(this,yn,Rn)||this;return Bn.type="Line2",Bn}return vn}(F$l);Object.assign(I$r.prototype,{isLine2:!0});var O$m=function(cr){A$A(vn,cr);function vn(){var yn=cr.call(this)||this;return yn.type="LineGeometry",yn}return vn.prototype.setPositions=function(yn){for(var Rn=yn.length-3,Bn=new Float32Array(2*Rn),Co=0;Co<Rn;Co+=3)Bn[2*Co]=yn[Co],Bn[2*Co+1]=yn[Co+1],Bn[2*Co+2]=yn[Co+2],Bn[2*Co+3]=yn[Co+3],Bn[2*Co+4]=yn[Co+4],Bn[2*Co+5]=yn[Co+5];return cr.prototype.setPositions.call(this,Bn),this},vn.prototype.setColors=function(yn){for(var Rn=yn.length-3,Bn=new Float32Array(2*Rn),Co=0;Co<Rn;Co+=3)Bn[2*Co]=yn[Co],Bn[2*Co+1]=yn[Co+1],Bn[2*Co+2]=yn[Co+2],Bn[2*Co+3]=yn[Co+3],Bn[2*Co+4]=yn[Co+4],Bn[2*Co+5]=yn[Co+5];return cr.prototype.setColors.call(this,Bn),this},vn.prototype.fromLine=function(yn){var Rn=yn.geometry;if(Rn instanceof Geometry){var Bn=new BufferGeometry().fromGeometry(Rn);this.setPositions(Bn.attributes.position.array)}else Rn instanceof BufferGeometry&&this.setPositions(Rn.attributes.position.array);return this},vn.prototype.copy=function(){return this},vn}(B$r);Object.assign(O$m.prototype,{isLineGeometry:!0});var T$n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==",V$d=14467195,H$r=8,R$p=2,k$p=20,D$r=null,Q$e=function(cr){A$A(vn,cr);function vn(yn,Rn){yn===void 0&&(yn=new Vector3),Rn===void 0&&(Rn=new Vector3);var Bn=cr.call(this)||this;Bn.type="FiveLine",Bn.needsRender=!0;var Co=new O$m,Po=new L$o({color:V$d,linewidth:R$p,dashScale:k$p,dashed:!1});Bn.line=new I$r(Co,Po);var To=new BufferGeometry,Io=new PointsMaterial({color:V$d,size:H$r,map:D$r||(D$r=new TextureLoader().load(T$n)),sizeAttenuation:!1,transparent:!0});return Bn.points=new Points(To,Io),Bn.points.renderOrder=11,Bn.points.frustumCulled=!1,Bn.setPoints(yn,Rn),Bn.add(Bn.line,Bn.points),Bn}return Object.defineProperty(vn,"version",{get:function(){return"6.4.0-alpha.36"},enumerable:!1,configurable:!0}),vn.prototype.setPoints=function(yn,Rn){var Bn=[].concat(yn.toArray(),Rn.toArray());this.points.geometry.setAttribute("position",new BufferAttribute(new Float32Array(Bn),3)),this.line.geometry.setPositions(Bn),this.line.computeLineDistances(),this.needsRender=!0},vn.prototype.getPoints=function(){var yn=this.points.geometry.attributes.position.array;return[new Vector3(yn[0],yn[1],yn[2]),new Vector3(yn[3],yn[4],yn[5])]},vn.prototype.setMaterial=function(yn){var Rn=this.line.material;for(var Bn in yn)if(yn.hasOwnProperty(Bn)){var Co=yn[Bn];Bn==="dashed"?(Rn.dashed=Co,Co?Rn.defines.USE_DASH="":delete Rn.defines.USE_DASH,Rn.needsUpdate=!0):Rn[Bn]=yn[Bn]}this.needsRender=!0},vn.prototype.setResolution=function(yn,Rn){var Bn=this.line.material.resolution;(Bn.x!==yn||Bn.y!==Rn)&&(Bn.set(yn,Rn),this.needsRender=!0)},vn}(Object3D);Object.assign(Q$e.prototype,{isFiveLine:!0});var Easing={Linear:{None:function(cr){return cr}},Quadratic:{In:function(cr){return cr*cr},Out:function(cr){return cr*(2-cr)},InOut:function(cr){return(cr*=2)<1?.5*cr*cr:-.5*(--cr*(cr-2)-1)}},Cubic:{In:function(cr){return cr*cr*cr},Out:function(cr){return--cr*cr*cr+1},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr:.5*((cr-=2)*cr*cr+2)}},Quartic:{In:function(cr){return cr*cr*cr*cr},Out:function(cr){return 1- --cr*cr*cr*cr},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr*cr:-.5*((cr-=2)*cr*cr*cr-2)}},Quintic:{In:function(cr){return cr*cr*cr*cr*cr},Out:function(cr){return--cr*cr*cr*cr*cr+1},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr*cr*cr:.5*((cr-=2)*cr*cr*cr*cr+2)}},Sinusoidal:{In:function(cr){return 1-Math.cos(cr*Math.PI/2)},Out:function(cr){return Math.sin(cr*Math.PI/2)},InOut:function(cr){return .5*(1-Math.cos(Math.PI*cr))}},Exponential:{In:function(cr){return cr===0?0:Math.pow(1024,cr-1)},Out:function(cr){return cr===1?1:1-Math.pow(2,-10*cr)},InOut:function(cr){return cr===0?0:cr===1?1:(cr*=2)<1?.5*Math.pow(1024,cr-1):.5*(-Math.pow(2,-10*(cr-1))+2)}},Circular:{In:function(cr){return 1-Math.sqrt(1-cr*cr)},Out:function(cr){return Math.sqrt(1- --cr*cr)},InOut:function(cr){return(cr*=2)<1?-.5*(Math.sqrt(1-cr*cr)-1):.5*(Math.sqrt(1-(cr-=2)*cr)+1)}},Elastic:{In:function(cr){return cr===0?0:cr===1?1:-Math.pow(2,10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI)},Out:function(cr){return cr===0?0:cr===1?1:Math.pow(2,-10*cr)*Math.sin((cr-.1)*5*Math.PI)+1},InOut:function(cr){return cr===0?0:cr===1?1:(cr*=2,cr<1?-.5*Math.pow(2,10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI):.5*Math.pow(2,-10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI)+1)}},Back:{In:function(cr){var vn=1.70158;return cr*cr*((vn+1)*cr-vn)},Out:function(cr){var vn=1.70158;return--cr*cr*((vn+1)*cr+vn)+1},InOut:function(cr){var vn=2.5949095;return(cr*=2)<1?.5*(cr*cr*((vn+1)*cr-vn)):.5*((cr-=2)*cr*((vn+1)*cr+vn)+2)}},Bounce:{In:function(cr){return 1-Easing.Bounce.Out(1-cr)},Out:function(cr){return cr<1/2.75?7.5625*cr*cr:cr<2/2.75?7.5625*(cr-=1.5/2.75)*cr+.75:cr<2.5/2.75?7.5625*(cr-=2.25/2.75)*cr+.9375:7.5625*(cr-=2.625/2.75)*cr+.984375},InOut:function(cr){return cr<.5?Easing.Bounce.In(cr*2)*.5:Easing.Bounce.Out(cr*2-1)*.5+.5}}},now;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?now=function(){var cr=process.hrtime();return cr[0]*1e3+cr[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?now=self.performance.now.bind(self.performance):Date.now!==void 0?now=Date.now:now=function(){return new Date().getTime()};var now$1=now,Group=function(){function cr(){this._tweens={},this._tweensAddedDuringUpdate={}}return cr.prototype.getAll=function(){var vn=this;return Object.keys(this._tweens).map(function(yn){return vn._tweens[yn]})},cr.prototype.removeAll=function(){this._tweens={}},cr.prototype.add=function(vn){this._tweens[vn.getId()]=vn,this._tweensAddedDuringUpdate[vn.getId()]=vn},cr.prototype.remove=function(vn){delete this._tweens[vn.getId()],delete this._tweensAddedDuringUpdate[vn.getId()]},cr.prototype.update=function(vn,yn){vn===void 0&&(vn=now$1()),yn===void 0&&(yn=!1);var Rn=Object.keys(this._tweens);if(Rn.length===0)return!1;for(;Rn.length>0;){this._tweensAddedDuringUpdate={};for(var Bn=0;Bn<Rn.length;Bn++){var Co=this._tweens[Rn[Bn]],Po=!yn;Co&&Co.update(vn,Po)===!1&&!yn&&delete this._tweens[Rn[Bn]]}Rn=Object.keys(this._tweensAddedDuringUpdate)}return!0},cr}(),Interpolation={Linear:function(cr,vn){var yn=cr.length-1,Rn=yn*vn,Bn=Math.floor(Rn),Co=Interpolation.Utils.Linear;return vn<0?Co(cr[0],cr[1],Rn):vn>1?Co(cr[yn],cr[yn-1],yn-Rn):Co(cr[Bn],cr[Bn+1>yn?yn:Bn+1],Rn-Bn)},Bezier:function(cr,vn){for(var yn=0,Rn=cr.length-1,Bn=Math.pow,Co=Interpolation.Utils.Bernstein,Po=0;Po<=Rn;Po++)yn+=Bn(1-vn,Rn-Po)*Bn(vn,Po)*cr[Po]*Co(Rn,Po);return yn},CatmullRom:function(cr,vn){var yn=cr.length-1,Rn=yn*vn,Bn=Math.floor(Rn),Co=Interpolation.Utils.CatmullRom;return cr[0]===cr[yn]?(vn<0&&(Bn=Math.floor(Rn=yn*(1+vn))),Co(cr[(Bn-1+yn)%yn],cr[Bn],cr[(Bn+1)%yn],cr[(Bn+2)%yn],Rn-Bn)):vn<0?cr[0]-(Co(cr[0],cr[0],cr[1],cr[1],-Rn)-cr[0]):vn>1?cr[yn]-(Co(cr[yn],cr[yn],cr[yn-1],cr[yn-1],Rn-yn)-cr[yn]):Co(cr[Bn?Bn-1:0],cr[Bn],cr[yn<Bn+1?yn:Bn+1],cr[yn<Bn+2?yn:Bn+2],Rn-Bn)},Utils:{Linear:function(cr,vn,yn){return(vn-cr)*yn+cr},Bernstein:function(cr,vn){var yn=Interpolation.Utils.Factorial;return yn(cr)/yn(vn)/yn(cr-vn)},Factorial:function(){var cr=[1];return function(vn){var yn=1;if(cr[vn])return cr[vn];for(var Rn=vn;Rn>1;Rn--)yn*=Rn;return cr[vn]=yn,yn}}(),CatmullRom:function(cr,vn,yn,Rn,Bn){var Co=(yn-cr)*.5,Po=(Rn-vn)*.5,To=Bn*Bn,Io=Bn*To;return(2*vn-2*yn+Co+Po)*Io+(-3*vn+3*yn-2*Co-Po)*To+Co*Bn+vn}}},Sequence=function(){function cr(){}return cr.nextId=function(){return cr._nextId++},cr._nextId=0,cr}(),mainGroup=new Group,Tween=function(){function cr(vn,yn){yn===void 0&&(yn=mainGroup),this._object=vn,this._group=yn,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return cr.prototype.getId=function(){return this._id},cr.prototype.isPlaying=function(){return this._isPlaying},cr.prototype.isPaused=function(){return this._isPaused},cr.prototype.to=function(vn,yn){return this._valuesEnd=Object.create(vn),yn!==void 0&&(this._duration=yn),this},cr.prototype.duration=function(vn){return this._duration=vn,this},cr.prototype.start=function(vn){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var yn in this._valuesStartRepeat)this._swapEndStartRepeatValues(yn),this._valuesStart[yn]=this._valuesStartRepeat[yn]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=vn!==void 0?typeof vn=="string"?now$1()+parseFloat(vn):vn:now$1(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},cr.prototype._setupProperties=function(vn,yn,Rn,Bn){for(var Co in Rn){var Po=vn[Co],To=Array.isArray(Po),Io=To?"array":typeof Po,$l=!To&&Array.isArray(Rn[Co]);if(!(Io==="undefined"||Io==="function")){if($l){var Wl=Rn[Co];if(Wl.length===0)continue;Wl=Wl.map(this._handleRelativeValue.bind(this,Po)),Rn[Co]=[Po].concat(Wl)}if((Io==="object"||To)&&Po&&!$l){yn[Co]=To?[]:{};for(var Xl in Po)yn[Co][Xl]=Po[Xl];Bn[Co]=To?[]:{},this._setupProperties(Po,yn[Co],Rn[Co],Bn[Co])}else typeof yn[Co]=="undefined"&&(yn[Co]=Po),To||(yn[Co]*=1),$l?Bn[Co]=Rn[Co].slice().reverse():Bn[Co]=yn[Co]||0}}},cr.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},cr.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},cr.prototype.pause=function(vn){return vn===void 0&&(vn=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=vn,this._group&&this._group.remove(this),this)},cr.prototype.resume=function(vn){return vn===void 0&&(vn=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=vn-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},cr.prototype.stopChainedTweens=function(){for(var vn=0,yn=this._chainedTweens.length;vn<yn;vn++)this._chainedTweens[vn].stop();return this},cr.prototype.group=function(vn){return this._group=vn,this},cr.prototype.delay=function(vn){return this._delayTime=vn,this},cr.prototype.repeat=function(vn){return this._initialRepeat=vn,this._repeat=vn,this},cr.prototype.repeatDelay=function(vn){return this._repeatDelayTime=vn,this},cr.prototype.yoyo=function(vn){return this._yoyo=vn,this},cr.prototype.easing=function(vn){return this._easingFunction=vn,this},cr.prototype.interpolation=function(vn){return this._interpolationFunction=vn,this},cr.prototype.chain=function(){for(var vn=[],yn=0;yn<arguments.length;yn++)vn[yn]=arguments[yn];return this._chainedTweens=vn,this},cr.prototype.onStart=function(vn){return this._onStartCallback=vn,this},cr.prototype.onUpdate=function(vn){return this._onUpdateCallback=vn,this},cr.prototype.onRepeat=function(vn){return this._onRepeatCallback=vn,this},cr.prototype.onComplete=function(vn){return this._onCompleteCallback=vn,this},cr.prototype.onStop=function(vn){return this._onStopCallback=vn,this},cr.prototype.update=function(vn,yn){if(vn===void 0&&(vn=now$1()),yn===void 0&&(yn=!0),this._isPaused)return!0;var Rn,Bn,Co=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(vn>Co)return!1;yn&&this.start(vn)}if(this._goToEnd=!1,vn<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),Bn=(vn-this._startTime)/this._duration,Bn=this._duration===0||Bn>1?1:Bn;var Po=this._easingFunction(Bn);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Po),this._onUpdateCallback&&this._onUpdateCallback(this._object,Bn),Bn===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(Rn in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Rn]=="string"&&(this._valuesStartRepeat[Rn]=this._valuesStartRepeat[Rn]+parseFloat(this._valuesEnd[Rn])),this._yoyo&&this._swapEndStartRepeatValues(Rn),this._valuesStart[Rn]=this._valuesStartRepeat[Rn];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=vn+this._repeatDelayTime:this._startTime=vn+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var To=0,Io=this._chainedTweens.length;To<Io;To++)this._chainedTweens[To].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},cr.prototype._updateProperties=function(vn,yn,Rn,Bn){for(var Co in Rn)if(yn[Co]!==void 0){var Po=yn[Co]||0,To=Rn[Co],Io=Array.isArray(vn[Co]),$l=Array.isArray(To),Wl=!Io&&$l;Wl?vn[Co]=this._interpolationFunction(To,Bn):typeof To=="object"&&To?this._updateProperties(vn[Co],Po,To,Bn):(To=this._handleRelativeValue(Po,To),typeof To=="number"&&(vn[Co]=Po+(To-Po)*Bn))}},cr.prototype._handleRelativeValue=function(vn,yn){return typeof yn!="string"?yn:yn.charAt(0)==="+"||yn.charAt(0)==="-"?vn+parseFloat(yn):parseFloat(yn)},cr.prototype._swapEndStartRepeatValues=function(vn){var yn=this._valuesStartRepeat[vn],Rn=this._valuesEnd[vn];typeof Rn=="string"?this._valuesStartRepeat[vn]=this._valuesStartRepeat[vn]+parseFloat(Rn):this._valuesStartRepeat[vn]=this._valuesEnd[vn],this._valuesEnd[vn]=yn},cr}(),VERSION="18.6.4",nextId=Sequence.nextId,TWEEN=mainGroup,getAll=TWEEN.getAll.bind(TWEEN),removeAll=TWEEN.removeAll.bind(TWEEN),add=TWEEN.add.bind(TWEEN),remove=TWEEN.remove.bind(TWEEN),update=TWEEN.update.bind(TWEEN),exports={Easing,Group,Interpolation,now:now$1,Sequence,nextId,Tween,VERSION,getAll,removeAll,add,remove,update};class BetterTween extends exports.Tween{constructor(){super(...arguments);V1(this,"disposeMethods",[]);V1(this,"animationFrameDisposer");V1(this,"onDispose",yn=>(this.disposeMethods.push(yn),this));V1(this,"play",()=>(this.start(),this.animationFrameDisposer=requestAnimationFrameInterval(()=>this.update()),this));V1(this,"dispose",()=>{var yn;this.stop(),(yn=this.animationFrameDisposer)==null||yn.call(this),this.disposeMethods.forEach(Rn=>Rn()),this.disposeMethods=[],exports.remove(this)})}}function tweenProgress(cr,vn=exports.Easing.Linear.None){const yn=new BetterTween({progress:0}).to({progress:1});return cr!==void 0&&yn.duration(cr),vn!==void 0&&yn.easing(vn),yn}function lineAnime(cr,vn,yn){const Rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",Bn=new TextureLoader().load(Rn),Co=new Color(16777215),Po=new Q$e;Po.setMaterial({linewidth:2,color:Co});const To=Po.points.material;return To.map=Bn,To.color.set(Co),Po.line.material.depthTest=!1,tweenProgress().onUpdate(({progress:Io})=>{const $l=.5-Io/2,Wl=.5+Io/2,Xl=vn.clone().lerp(yn,$l),Yl=vn.clone().lerp(yn,Wl);Po.setPoints(Xl,Yl)}).onStart(()=>cr.scene.add(Po)).onDispose(()=>{cr.scene.remove(Po),cr.needsRender=!0})}function PanoEffect(){const[cr,vn]=react.exports.useState(null),yn=useFiveInstance(),Rn=react.exports.useRef(null),[Bn,Co]=react.exports.useState(null),Po=react.exports.useRef(),To=useController(),Io=useFiveProject2d(),$l=()=>{Rn.current&&Rn.current.dispose()};return react.exports.useEffect(()=>{const Wl=Xl=>{const{start:Yl,end:Zl,data:ey}=Xl,Rm=ey,[ry,_g]=Rm.twoVertexs,ty=new Vector3(ry.x,ry.y,ry.z),ny=new Vector3(_g.x,_g.y,_g.z);Rn.current=lineAnime(yn,ty.clone(),ny.clone()),Rn.current.play();const iy=ty.lerp(ny,.5),oy=ty.distanceTo(ny),ay=Io(iy);if(!ay)return;const{x:uy,y:hy}=ay;vn({center:iy,distance:oy}),Co({left:uy,top:hy}),Po.current=setTimeout(()=>{vn(null),Co(null),$l()},Zl-Yl)};return To.on(VreoKeyframeEnum.PanoEffect,Wl),()=>{To.off(VreoKeyframeEnum.PanoEffect,Wl),Po.current&&clearTimeout(Po.current),$l()}},[To]),react.exports.useEffect(()=>{const Wl=()=>{if(!(cr!=null&&cr.center))return;const{x:Xl,y:Yl,z:Zl}=cr.center,ey=Io(new Vector3(Xl,Yl,Zl));if(!ey)return;const{x:Rm,y:ry}=ey;Co({left:Rm,top:ry})};return yn.on("currentStateChange",Wl),()=>{yn.off("currentStateChange",Wl)}},[cr==null?void 0:cr.center]),jsx(Fragment,{children:jsx("div",{className:classNames("PanoEffect",{"PanoEffect--notHidden":cr}),style:{left:((Bn==null?void 0:Bn.left)||0)+"px",top:((Bn==null?void 0:Bn.top)||0)+"px"},children:(cr==null?void 0:cr.distance.toFixed(4))+"m"})})}function A$z(){console.debug("%c %c@realsee/dnalogel %cv3.67.1",["background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAMCAMAAACHgmeRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAAAapPoap/oaqvkbrfkbr/gZnfwZoPsaqfnD4v/E4/8Ylv0clPm93/+/4P/B4f8Yj/683/8Wif+33P8Uhv+x2f8ShP+s1v8Pgf+n0/8Nf/+h0f8Lff8Lff8Nf/9dl/+czv8KfP8KfP+Lxf+Uyv+Xy/+Hwv+Jw/+Mxf+Oxv+RyP8aovsapfoap/oZmfwZm/wZnvsYnPsYkf4YlP0NePsDYfgYcfi43f+63v8Xiv8Xjf4EWfwCV/sWZ/qz2v+02/8Vh/8WiP8EUf8CTf4WXv2u1/+v2P8Thf8Thv8ETf8CR/8VV/+o1f+q1f8Qgv8Rg/8DSv8BRf8UVP+j0v+k0v8OgP8Pgf8DR/8DQv9Nhf+dzv+fz/+Kv/+Vyv+Xy/+azf+Oxv+Qx/+SyP////8MUhLdAAAAK3RSTlMACEWQ2bd98uQECPXxqO7c+Pb49vj2+Pb49vj23Oul8fMHA+TwerXXjEIG2P+bHgAAAAFiS0dEY1y+LaoAAAB+SURBVAjXY2BgZGJmYWVgYGBgY9fW0eVg4ORi4NbTNzDk4eXjZxAwMjYxNTO3EGQQsrSytrG1sxdmEHFwdHJ2cXUTZRBz9/D08vbxFWeQ8PMPCAwKDpFkkAoNC4+IjIqWZpCRlZOPiY2LV2BQVGJQTkhMUlEFWaOmrqGpxQAAyg0S9Dq+VPYAAAAASUVORK5CYII=')","background-repeat: no-repeat","background-position: 0 center","padding-left: 8px"].join(";"),"","background-color: #12ce9b;color:black;padding:0 6px;border-radius: 3px")}function c$P(){const cr=typeof OffscreenCanvas!="undefined",vn=cr&&new OffscreenCanvas(1,1).getContext("webgl")!==null;cr&&!vn&&Object.assign(window,{OffscreenCanvas:function(yn,Rn){const Bn=document.createElement("canvas");return Bn.width=yn,Bn.height=Rn,Bn}})}Promise.resolve();var y$x=Object.freeze({Linear:Object.freeze({None:function(cr){return cr},In:function(cr){return cr},Out:function(cr){return cr},InOut:function(cr){return cr}}),Quadratic:Object.freeze({In:function(cr){return cr*cr},Out:function(cr){return cr*(2-cr)},InOut:function(cr){return(cr*=2)<1?.5*cr*cr:-.5*(--cr*(cr-2)-1)}}),Cubic:Object.freeze({In:function(cr){return cr*cr*cr},Out:function(cr){return--cr*cr*cr+1},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr:.5*((cr-=2)*cr*cr+2)}}),Quartic:Object.freeze({In:function(cr){return cr*cr*cr*cr},Out:function(cr){return 1- --cr*cr*cr*cr},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr*cr:-.5*((cr-=2)*cr*cr*cr-2)}}),Quintic:Object.freeze({In:function(cr){return cr*cr*cr*cr*cr},Out:function(cr){return--cr*cr*cr*cr*cr+1},InOut:function(cr){return(cr*=2)<1?.5*cr*cr*cr*cr*cr:.5*((cr-=2)*cr*cr*cr*cr+2)}}),Sinusoidal:Object.freeze({In:function(cr){return 1-Math.sin((1-cr)*Math.PI/2)},Out:function(cr){return Math.sin(cr*Math.PI/2)},InOut:function(cr){return .5*(1-Math.sin(Math.PI*(.5-cr)))}}),Exponential:Object.freeze({In:function(cr){return cr===0?0:Math.pow(1024,cr-1)},Out:function(cr){return cr===1?1:1-Math.pow(2,-10*cr)},InOut:function(cr){return cr===0?0:cr===1?1:(cr*=2)<1?.5*Math.pow(1024,cr-1):.5*(-Math.pow(2,-10*(cr-1))+2)}}),Circular:Object.freeze({In:function(cr){return 1-Math.sqrt(1-cr*cr)},Out:function(cr){return Math.sqrt(1- --cr*cr)},InOut:function(cr){return(cr*=2)<1?-.5*(Math.sqrt(1-cr*cr)-1):.5*(Math.sqrt(1-(cr-=2)*cr)+1)}}),Elastic:Object.freeze({In:function(cr){return cr===0?0:cr===1?1:-Math.pow(2,10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI)},Out:function(cr){return cr===0?0:cr===1?1:Math.pow(2,-10*cr)*Math.sin((cr-.1)*5*Math.PI)+1},InOut:function(cr){return cr===0?0:cr===1?1:(cr*=2,cr<1?-.5*Math.pow(2,10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI):.5*Math.pow(2,-10*(cr-1))*Math.sin((cr-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(cr){var vn=1.70158;return cr===1?1:cr*cr*((vn+1)*cr-vn)},Out:function(cr){var vn=1.70158;return cr===0?0:--cr*cr*((vn+1)*cr+vn)+1},InOut:function(cr){var vn=2.5949095;return(cr*=2)<1?.5*(cr*cr*((vn+1)*cr-vn)):.5*((cr-=2)*cr*((vn+1)*cr+vn)+2)}}),Bounce:Object.freeze({In:function(cr){return 1-y$x.Bounce.Out(1-cr)},Out:function(cr){return cr<.36363636363636365?7.5625*cr*cr:cr<.7272727272727273?7.5625*(cr-=.5454545454545454)*cr+.75:cr<.9090909090909091?7.5625*(cr-=.8181818181818182)*cr+.9375:7.5625*(cr-=.9545454545454546)*cr+.984375},InOut:function(cr){return cr<.5?y$x.Bounce.In(cr*2)*.5:y$x.Bounce.Out(cr*2-1)*.5+.5}}),generatePow:function(cr){return cr===void 0&&(cr=4),cr=cr<Number.EPSILON?Number.EPSILON:cr,cr=cr>1e4?1e4:cr,{In:function(vn){return Math.pow(vn,cr)},Out:function(vn){return 1-Math.pow(1-vn,cr)},InOut:function(vn){return vn<.5?Math.pow(vn*2,cr)/2:(1-Math.pow(2-vn*2,cr))/2+.5}}}}),v$y=function(){return performance.now()},P$x=function(){function cr(){this._tweens={},this._tweensAddedDuringUpdate={}}return cr.prototype.getAll=function(){var vn=this;return Object.keys(this._tweens).map(function(yn){return vn._tweens[yn]})},cr.prototype.removeAll=function(){this._tweens={}},cr.prototype.add=function(vn){this._tweens[vn.getId()]=vn,this._tweensAddedDuringUpdate[vn.getId()]=vn},cr.prototype.remove=function(vn){delete this._tweens[vn.getId()],delete this._tweensAddedDuringUpdate[vn.getId()]},cr.prototype.update=function(vn,yn){vn===void 0&&(vn=v$y()),yn===void 0&&(yn=!1);var Rn=Object.keys(this._tweens);if(Rn.length===0)return!1;for(;Rn.length>0;){this._tweensAddedDuringUpdate={};for(var Bn=0;Bn<Rn.length;Bn++){var Co=this._tweens[Rn[Bn]],Po=!yn;Co&&Co.update(vn,Po)===!1&&!yn&&delete this._tweens[Rn[Bn]]}Rn=Object.keys(this._tweensAddedDuringUpdate)}return!0},cr}(),d$G={Linear:function(cr,vn){var yn=cr.length-1,Rn=yn*vn,Bn=Math.floor(Rn),Co=d$G.Utils.Linear;return vn<0?Co(cr[0],cr[1],Rn):vn>1?Co(cr[yn],cr[yn-1],yn-Rn):Co(cr[Bn],cr[Bn+1>yn?yn:Bn+1],Rn-Bn)},Bezier:function(cr,vn){for(var yn=0,Rn=cr.length-1,Bn=Math.pow,Co=d$G.Utils.Bernstein,Po=0;Po<=Rn;Po++)yn+=Bn(1-vn,Rn-Po)*Bn(vn,Po)*cr[Po]*Co(Rn,Po);return yn},CatmullRom:function(cr,vn){var yn=cr.length-1,Rn=yn*vn,Bn=Math.floor(Rn),Co=d$G.Utils.CatmullRom;return cr[0]===cr[yn]?(vn<0&&(Bn=Math.floor(Rn=yn*(1+vn))),Co(cr[(Bn-1+yn)%yn],cr[Bn],cr[(Bn+1)%yn],cr[(Bn+2)%yn],Rn-Bn)):vn<0?cr[0]-(Co(cr[0],cr[0],cr[1],cr[1],-Rn)-cr[0]):vn>1?cr[yn]-(Co(cr[yn],cr[yn],cr[yn-1],cr[yn-1],Rn-yn)-cr[yn]):Co(cr[Bn?Bn-1:0],cr[Bn],cr[yn<Bn+1?yn:Bn+1],cr[yn<Bn+2?yn:Bn+2],Rn-Bn)},Utils:{Linear:function(cr,vn,yn){return(vn-cr)*yn+cr},Bernstein:function(cr,vn){var yn=d$G.Utils.Factorial;return yn(cr)/yn(vn)/yn(cr-vn)},Factorial:function(){var cr=[1];return function(vn){var yn=1;if(cr[vn])return cr[vn];for(var Rn=vn;Rn>1;Rn--)yn*=Rn;return cr[vn]=yn,yn}}(),CatmullRom:function(cr,vn,yn,Rn,Bn){var Co=(yn-cr)*.5,Po=(Rn-vn)*.5,To=Bn*Bn,Io=Bn*To;return(2*vn-2*yn+Co+Po)*Io+(-3*vn+3*yn-2*Co-Po)*To+Co*Bn+vn}}},w$r=function(){function cr(){}return cr.nextId=function(){return cr._nextId++},cr._nextId=0,cr}(),O$l=new P$x,M$v=function(){function cr(vn,yn){yn===void 0&&(yn=O$l),this._object=vn,this._group=yn,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=y$x.Linear.None,this._interpolationFunction=d$G.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=w$r.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return cr.prototype.getId=function(){return this._id},cr.prototype.isPlaying=function(){return this._isPlaying},cr.prototype.isPaused=function(){return this._isPaused},cr.prototype.getDuration=function(){return this._duration},cr.prototype.to=function(vn,yn){if(yn===void 0&&(yn=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=vn,this._propertiesAreSetUp=!1,this._duration=yn<0?0:yn,this},cr.prototype.duration=function(vn){return vn===void 0&&(vn=1e3),this._duration=vn<0?0:vn,this},cr.prototype.dynamic=function(vn){return vn===void 0&&(vn=!1),this._isDynamic=vn,this},cr.prototype.start=function(vn,yn){if(vn===void 0&&(vn=v$y()),yn===void 0&&(yn=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var Rn in this._valuesStartRepeat)this._swapEndStartRepeatValues(Rn),this._valuesStart[Rn]=this._valuesStartRepeat[Rn]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=vn,this._startTime+=this._delayTime,!this._propertiesAreSetUp||yn){if(this._propertiesAreSetUp=!0,!this._isDynamic){var Bn={};for(var Co in this._valuesEnd)Bn[Co]=this._valuesEnd[Co];this._valuesEnd=Bn}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,yn)}return this},cr.prototype.startFromCurrentValues=function(vn){return this.start(vn,!0)},cr.prototype._setupProperties=function(vn,yn,Rn,Bn,Co){for(var Po in Rn){var To=vn[Po],Io=Array.isArray(To),$l=Io?"array":typeof To,Wl=!Io&&Array.isArray(Rn[Po]);if(!($l==="undefined"||$l==="function")){if(Wl){var Xl=Rn[Po];if(Xl.length===0)continue;for(var Yl=[To],Zl=0,ey=Xl.length;Zl<ey;Zl+=1){var Rm=this._handleRelativeValue(To,Xl[Zl]);if(isNaN(Rm)){Wl=!1,console.warn("Found invalid interpolation list. Skipping.");break}Yl.push(Rm)}Wl&&(Rn[Po]=Yl)}if(($l==="object"||Io)&&To&&!Wl){yn[Po]=Io?[]:{};var ry=To;for(var _g in ry)yn[Po][_g]=ry[_g];Bn[Po]=Io?[]:{};var Xl=Rn[Po];if(!this._isDynamic){var ty={};for(var _g in Xl)ty[_g]=Xl[_g];Rn[Po]=Xl=ty}this._setupProperties(ry,yn[Po],Xl,Bn[Po],Co)}else(typeof yn[Po]=="undefined"||Co)&&(yn[Po]=To),Io||(yn[Po]*=1),Wl?Bn[Po]=Rn[Po].slice().reverse():Bn[Po]=yn[Po]||0}}},cr.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},cr.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},cr.prototype.pause=function(vn){return vn===void 0&&(vn=v$y()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=vn,this._group&&this._group.remove(this),this)},cr.prototype.resume=function(vn){return vn===void 0&&(vn=v$y()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=vn-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},cr.prototype.stopChainedTweens=function(){for(var vn=0,yn=this._chainedTweens.length;vn<yn;vn++)this._chainedTweens[vn].stop();return this},cr.prototype.group=function(vn){return vn===void 0&&(vn=O$l),this._group=vn,this},cr.prototype.delay=function(vn){return vn===void 0&&(vn=0),this._delayTime=vn,this},cr.prototype.repeat=function(vn){return vn===void 0&&(vn=0),this._initialRepeat=vn,this._repeat=vn,this},cr.prototype.repeatDelay=function(vn){return this._repeatDelayTime=vn,this},cr.prototype.yoyo=function(vn){return vn===void 0&&(vn=!1),this._yoyo=vn,this},cr.prototype.easing=function(vn){return vn===void 0&&(vn=y$x.Linear.None),this._easingFunction=vn,this},cr.prototype.interpolation=function(vn){return vn===void 0&&(vn=d$G.Linear),this._interpolationFunction=vn,this},cr.prototype.chain=function(){for(var vn=[],yn=0;yn<arguments.length;yn++)vn[yn]=arguments[yn];return this._chainedTweens=vn,this},cr.prototype.onStart=function(vn){return this._onStartCallback=vn,this},cr.prototype.onEveryStart=function(vn){return this._onEveryStartCallback=vn,this},cr.prototype.onUpdate=function(vn){return this._onUpdateCallback=vn,this},cr.prototype.onRepeat=function(vn){return this._onRepeatCallback=vn,this},cr.prototype.onComplete=function(vn){return this._onCompleteCallback=vn,this},cr.prototype.onStop=function(vn){return this._onStopCallback=vn,this},cr.prototype.update=function(vn,yn){var Rn=this,Bn;if(vn===void 0&&(vn=v$y()),yn===void 0&&(yn=!0),this._isPaused)return!0;var Co,Po=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(vn>Po)return!1;yn&&this.start(vn,!0)}if(this._goToEnd=!1,vn<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var To=vn-this._startTime,Io=this._duration+((Bn=this._repeatDelayTime)!==null&&Bn!==void 0?Bn:this._delayTime),$l=this._duration+this._repeat*Io,Wl=function(){if(Rn._duration===0||To>$l)return 1;var ry=Math.trunc(To/Io),_g=To-ry*Io,ty=Math.min(_g/Rn._duration,1);return ty===0&&To===Rn._duration?1:ty},Xl=Wl(),Yl=this._easingFunction(Xl);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,Yl),this._onUpdateCallback&&this._onUpdateCallback(this._object,Xl),this._duration===0||To>=this._duration)if(this._repeat>0){var Zl=Math.min(Math.trunc((To-this._duration)/Io)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=Zl);for(Co in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[Co]=="string"&&(this._valuesStartRepeat[Co]=this._valuesStartRepeat[Co]+parseFloat(this._valuesEnd[Co])),this._yoyo&&this._swapEndStartRepeatValues(Co),this._valuesStart[Co]=this._valuesStartRepeat[Co];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=Io*Zl,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var ey=0,Rm=this._chainedTweens.length;ey<Rm;ey++)this._chainedTweens[ey].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},cr.prototype._updateProperties=function(vn,yn,Rn,Bn){for(var Co in Rn)if(yn[Co]!==void 0){var Po=yn[Co]||0,To=Rn[Co],Io=Array.isArray(vn[Co]),$l=Array.isArray(To),Wl=!Io&&$l;Wl?vn[Co]=this._interpolationFunction(To,Bn):typeof To=="object"&&To?this._updateProperties(vn[Co],Po,To,Bn):(To=this._handleRelativeValue(Po,To),typeof To=="number"&&(vn[Co]=Po+(To-Po)*Bn))}},cr.prototype._handleRelativeValue=function(vn,yn){return typeof yn!="string"?yn:yn.charAt(0)==="+"||yn.charAt(0)==="-"?vn+parseFloat(yn):parseFloat(yn)},cr.prototype._swapEndStartRepeatValues=function(vn){var yn=this._valuesStartRepeat[vn],Rn=this._valuesEnd[vn];typeof Rn=="string"?this._valuesStartRepeat[vn]=this._valuesStartRepeat[vn]+parseFloat(Rn):this._valuesStartRepeat[vn]=this._valuesEnd[vn],this._valuesEnd[vn]=yn},cr}();w$r.nextId;var o$J=O$l;o$J.getAll.bind(o$J);o$J.removeAll.bind(o$J);o$J.add.bind(o$J);var j$p=o$J.remove.bind(o$J);o$J.update.bind(o$J);function t$k(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r$F(){return(t$k()+t$k()+"-"+t$k()+"-4"+t$k().substr(0,3)+"-"+t$k()+"-"+t$k()+t$k()+t$k()).toLowerCase()}function v$x(cr){return typeof Symbol=="undefined"?`$Symbol<${cr}>$`:Symbol(cr)}const i$A=v$x("$$EVENT$$");function r$E(cr){return cr[i$A]||(cr[i$A]={}),cr[i$A]}function d$F(cr){cr[i$A]&&delete cr[i$A]}class E$v{hasListener(vn){const yn=r$E(this);return!!(yn!=null&&yn[vn]&&yn[vn].length>0)}on(vn,yn,Rn){const Bn=r$E(this);return Bn[vn]||(Bn[vn]=[]),Bn[vn].push([yn,Rn||!1]),()=>this.off(vn,yn)}once(vn,yn){return this.on(vn,yn,!0)}off(vn,yn){if(vn===void 0){d$F(this);return}const Rn=r$E(this);if(Rn[vn]||(Rn[vn]=[]),yn===void 0){Rn[vn].length=0;return}let Bn=0;for(;Bn<Rn[vn].length&&Rn[vn][Bn][0]!==yn;Bn++);Bn<Rn[vn].length&&Rn[vn].splice(Bn,1)}emit(vn,...yn){let Rn=!1;const Bn=r$E(this)[vn]||[];for(let Co of Bn.slice()){const[Po,To=!1]=Co,Io=Po(...yn);To&&this.off(vn,Po),Io===!1&&(Rn=!0)}return Rn}}const f$J=({x:cr,y:vn,z:yn})=>new Vector3(cr,vn,yn),a$D=cr=>new Vector3().fromArray(cr),t$j=cr=>{if(cr)return cr instanceof Vector3?cr:Array.isArray(cr)?a$D(cr):f$J(cr)};function o$I(cr){if(cr)return Array.isArray(cr)?typeof cr[0]=="number"?t$j(cr):cr.map(t$j):t$j(cr)}function i$z(cr,vn,yn){const{x:Rn,y:Bn,z:Co}=vn.clone().project(cr);return Co>1?void 0:{leftPx:(Rn+1)/2*yn.x,topPx:(-Bn+1)/2*yn.y}}function l$w(cr){var vn;return((vn=cr.models)==null?void 0:vn.filter(yn=>yn.name===cr.state.workCode)[0])||cr.model}var i$y=Object.defineProperty,o$H=(cr,vn,yn)=>vn in cr?i$y(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,t$i=(cr,vn,yn)=>(o$H(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class u$A extends E$v{constructor(vn){super(),t$i(this,"five"),this.five=vn}}const c$O=(cr,vn)=>{if(!vn)return cr;const yn=new Vector3,Rn=new Quaternion,Bn=new Vector3;return vn.decompose(yn,Rn,Bn),cr.clone().multiply(Bn).applyQuaternion(Rn).add(yn)};var a$C=Object.defineProperty,h$A=(cr,vn,yn)=>vn in cr?a$C(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,k$o=(cr,vn,yn)=>(h$A(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const n$w=new Map;class c$N extends u$A{constructor(vn){super(vn),k$o(this,"_workCode")}get fromType(){var vn,yn;const Rn=this.workCode;if(n$w.has(Rn))return n$w.get(Rn);const Bn=(yn=(vn=JSON.parse(this.work.raw.works[0]))==null?void 0:vn.from_type)!=null?yn:"vr";return n$w.set(Rn,Bn),Bn}set workCode(vn){this._workCode=vn}get workCode(){var vn;return(vn=this._workCode)!=null?vn:this.five.state.workCode}get work(){var vn,yn;return(yn=(vn=this.five.works)==null?void 0:vn.find(Rn=>Rn.workCode===this.workCode))!=null?yn:this.five.work}get observers(){var vn;return(vn=this.work)==null?void 0:vn.observers}get transform(){var vn,yn,Rn,Bn;const Co=(Bn=(vn=this.work)==null?void 0:vn.transform)!=null?Bn:(Rn=(yn=this.work)==null?void 0:yn.options)==null?void 0:Rn.transform;return Co?Co.clone():new Matrix4}getResolvedObserver(vn){return this.five.works.getResolvedObserver({workCode:this.workCode,panoIndex:vn})}getObserverPosition(vn){var yn;const Rn=(yn=this.getObserver(vn))==null?void 0:yn.position;if(Rn)return c$O(Rn,this.transform)}getObserverStandingPosition(vn){var yn;const Rn=(yn=this.getObserver(vn))==null?void 0:yn.standingPosition;if(Rn)return c$O(Rn,this.transform)}getObserver(vn){var yn;return(yn=this.observers)==null?void 0:yn[vn]}}var n$v=Object.defineProperty,m$B=(cr,vn,yn)=>vn in cr?n$v(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,t$h=(cr,vn,yn)=>(m$B(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class c$M extends u$A{constructor(vn){super(vn),t$h(this,"workUtil",new c$N(this.five))}get version(){return this.five.constructor.version}get majorVersion(){return Number(this.version.split(".")[0])}get model(){return l$w(this.five)}moveToPano(vn,yn){const Rn=this.majorVersion===5?vn:{workCode:this.workUtil.workCode,panoIndex:vn};return this.five.moveToPano(Rn,yn)}}class h$z extends Raycaster{intersectObject(vn,yn=!0,Rn=[]){return f$I(vn,this,Rn,yn),Rn.sort(a$B),Rn}intersectObjects(vn,yn=!0,Rn=[]){for(let Bn=0,Co=vn.length;Bn<Co;Bn++)f$I(vn[Bn],this,Rn,yn);return Rn.sort(a$B),Rn}}function a$B(cr,vn){return cr.distance-vn.distance}function f$I(cr,vn,yn,Rn){let Bn=!0;if(cr.layers.test(vn.layers)&&cr.raycast(vn,yn)===!1&&(Bn=!1),Bn===!0&&Rn===!0){const Co=cr.children;for(let Po=0,To=Co.length;Po<To;Po++)f$I(Co[Po],vn,yn,!0)}}function c$L(cr,vn,yn,Rn){let Bn=!0;if(cr.type!=="Line2"&&(cr.layers.test(vn.layers)&&cr.raycast(vn,yn)===!1&&(Bn=!1),Bn===!0&&Rn===!0)){const Co=cr.children;for(let Po=0,To=Co.length;Po<To;Po++)Co[Po].type!=="Line2"&&c$L(Co[Po],vn,yn,!0)}}const t$g=new h$z;t$g.params.Points.threshold=.02;function o$G(cr,vn){if(!vn||typeof ResizeObserver=="undefined"||!ResizeObserver)return{observe:()=>window.addEventListener("resize",cr),unobserve:()=>window.removeEventListener("resize",cr)};{const yn=new ResizeObserver(cr);return{observe:()=>yn.observe(vn),unobserve:()=>yn.unobserve(vn)}}}function o$F(cr,vn=200){let yn;return function(...Rn){yn||(cr(...Rn),yn=setTimeout(function(){yn=null},vn))}}function i$x(cr,vn){let yn=!1;const Rn=o$F(()=>{yn||(yn=!0,cr.ready().then(()=>{vn(),yn=!1}))},150);return cr.on("camera.update",Rn),()=>{cr.off("camera.update",Rn)}}var Qt$1={},He$2={get exports(){return Qt$1},set exports(cr){Qt$1=cr}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(cr){(function(vn,yn,Rn,Bn){var Co=["","webkit","Moz","MS","ms","o"],Po=yn.createElement("div"),To="function",Io=Math.round,$l=Math.abs,Wl=Date.now;function Xl(yy,Sy,Fy){return setTimeout(ny(yy,Fy),Sy)}function Yl(yy,Sy,Fy){return Array.isArray(yy)?(Zl(yy,Fy[Sy],Fy),!0):!1}function Zl(yy,Sy,Fy){var e1;if(yy)if(yy.forEach)yy.forEach(Sy,Fy);else if(yy.length!==Bn)for(e1=0;e1<yy.length;)Sy.call(Fy,yy[e1],e1,yy),e1++;else for(e1 in yy)yy.hasOwnProperty(e1)&&Sy.call(Fy,yy[e1],e1,yy)}function ey(yy,Sy,Fy){var e1="DEPRECATED METHOD: "+Sy+`
`+Fy+` AT 
`;return function(){var s1=new Error("get-stack-trace"),A1=s1&&s1.stack?s1.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",P1=vn.console&&(vn.console.warn||vn.console.log);return P1&&P1.call(vn.console,e1,A1),yy.apply(this,arguments)}}var Rm;typeof Object.assign!="function"?Rm=function(yy){if(yy===Bn||yy===null)throw new TypeError("Cannot convert undefined or null to object");for(var Sy=Object(yy),Fy=1;Fy<arguments.length;Fy++){var e1=arguments[Fy];if(e1!==Bn&&e1!==null)for(var s1 in e1)e1.hasOwnProperty(s1)&&(Sy[s1]=e1[s1])}return Sy}:Rm=Object.assign;var ry=ey(function(yy,Sy,Fy){for(var e1=Object.keys(Sy),s1=0;s1<e1.length;)(!Fy||Fy&&yy[e1[s1]]===Bn)&&(yy[e1[s1]]=Sy[e1[s1]]),s1++;return yy},"extend","Use `assign`."),_g=ey(function(yy,Sy){return ry(yy,Sy,!0)},"merge","Use `assign`.");function ty(yy,Sy,Fy){var e1=Sy.prototype,s1;s1=yy.prototype=Object.create(e1),s1.constructor=yy,s1._super=e1,Fy&&Rm(s1,Fy)}function ny(yy,Sy){return function(){return yy.apply(Sy,arguments)}}function iy(yy,Sy){return typeof yy==To?yy.apply(Sy&&Sy[0]||Bn,Sy):yy}function oy(yy,Sy){return yy===Bn?Sy:yy}function ay(yy,Sy,Fy){Zl(ly(Sy),function(e1){yy.addEventListener(e1,Fy,!1)})}function uy(yy,Sy,Fy){Zl(ly(Sy),function(e1){yy.removeEventListener(e1,Fy,!1)})}function hy(yy,Sy){for(;yy;){if(yy==Sy)return!0;yy=yy.parentNode}return!1}function my(yy,Sy){return yy.indexOf(Sy)>-1}function ly(yy){return yy.trim().split(/\s+/g)}function sy(yy,Sy,Fy){if(yy.indexOf&&!Fy)return yy.indexOf(Sy);for(var e1=0;e1<yy.length;){if(Fy&&yy[e1][Fy]==Sy||!Fy&&yy[e1]===Sy)return e1;e1++}return-1}function cy(yy){return Array.prototype.slice.call(yy,0)}function fy(yy,Sy,Fy){for(var e1=[],s1=[],A1=0;A1<yy.length;){var P1=Sy?yy[A1][Sy]:yy[A1];sy(s1,P1)<0&&e1.push(yy[A1]),s1[A1]=P1,A1++}return Fy&&(Sy?e1=e1.sort(function(G1,tx){return G1[Sy]>tx[Sy]}):e1=e1.sort()),e1}function vy(yy,Sy){for(var Fy,e1,s1=Sy[0].toUpperCase()+Sy.slice(1),A1=0;A1<Co.length;){if(Fy=Co[A1],e1=Fy?Fy+s1:Sy,e1 in yy)return e1;A1++}return Bn}var dy=1;function Ay(){return dy++}function gy(yy){var Sy=yy.ownerDocument||yy;return Sy.defaultView||Sy.parentWindow||vn}var wy=/mobile|tablet|ip(ad|hone|od)|android/i,Cy="ontouchstart"in vn,My=vy(vn,"PointerEvent")!==Bn,Py=Cy&&wy.test(navigator.userAgent),Dy="touch",qy="pen",Xy="mouse",$y="kinect",xy=25,Ry=1,Ly=2,ky=4,Ey=8,Iy=1,zy=2,Uy=4,Qy=8,Gy=16,Zy=zy|Uy,Ty=Qy|Gy,Vy=Zy|Ty,Yy=["x","y"],Jy=["clientX","clientY"];function Hy(yy,Sy){var Fy=this;this.manager=yy,this.callback=Sy,this.element=yy.element,this.target=yy.options.inputTarget,this.domHandler=function(e1){iy(yy.options.enable,[yy])&&Fy.handler(e1)},this.init()}Hy.prototype={handler:function(){},init:function(){this.evEl&&ay(this.element,this.evEl,this.domHandler),this.evTarget&&ay(this.target,this.evTarget,this.domHandler),this.evWin&&ay(gy(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&uy(this.element,this.evEl,this.domHandler),this.evTarget&&uy(this.target,this.evTarget,this.domHandler),this.evWin&&uy(gy(this.element),this.evWin,this.domHandler)}};function i1(yy){var Sy,Fy=yy.options.inputClass;return Fy?Sy=Fy:My?Sy=q1:Py?Sy=y1:Cy?Sy=S1:Sy=B1,new Sy(yy,u1)}function u1(yy,Sy,Fy){var e1=Fy.pointers.length,s1=Fy.changedPointers.length,A1=Sy&Ry&&e1-s1===0,P1=Sy&(ky|Ey)&&e1-s1===0;Fy.isFirst=!!A1,Fy.isFinal=!!P1,A1&&(yy.session={}),Fy.eventType=Sy,p1(yy,Fy),yy.emit("hammer.input",Fy),yy.recognize(Fy),yy.session.prevInput=Fy}function p1(yy,Sy){var Fy=yy.session,e1=Sy.pointers,s1=e1.length;Fy.firstInput||(Fy.firstInput=h1(Sy)),s1>1&&!Fy.firstMultiple?Fy.firstMultiple=h1(Sy):s1===1&&(Fy.firstMultiple=!1);var A1=Fy.firstInput,P1=Fy.firstMultiple,G1=P1?P1.center:A1.center,tx=Sy.center=l1(e1);Sy.timeStamp=Wl(),Sy.deltaTime=Sy.timeStamp-A1.timeStamp,Sy.angle=f1(G1,tx),Sy.distance=Wy(G1,tx),g1(Fy,Sy),Sy.offsetDirection=t1(Sy.deltaX,Sy.deltaY);var vx=o1(Sy.deltaTime,Sy.deltaX,Sy.deltaY);Sy.overallVelocityX=vx.x,Sy.overallVelocityY=vx.y,Sy.overallVelocity=$l(vx.x)>$l(vx.y)?vx.x:vx.y,Sy.scale=P1?w1(P1.pointers,e1):1,Sy.rotation=P1?m1(P1.pointers,e1):0,Sy.maxPointers=Fy.prevInput?Sy.pointers.length>Fy.prevInput.maxPointers?Sy.pointers.length:Fy.prevInput.maxPointers:Sy.pointers.length,v1(Fy,Sy);var $x=yy.element;hy(Sy.srcEvent.target,$x)&&($x=Sy.srcEvent.target),Sy.target=$x}function g1(yy,Sy){var Fy=Sy.center,e1=yy.offsetDelta||{},s1=yy.prevDelta||{},A1=yy.prevInput||{};(Sy.eventType===Ry||A1.eventType===ky)&&(s1=yy.prevDelta={x:A1.deltaX||0,y:A1.deltaY||0},e1=yy.offsetDelta={x:Fy.x,y:Fy.y}),Sy.deltaX=s1.x+(Fy.x-e1.x),Sy.deltaY=s1.y+(Fy.y-e1.y)}function v1(yy,Sy){var Fy=yy.lastInterval||Sy,e1=Sy.timeStamp-Fy.timeStamp,s1,A1,P1,G1;if(Sy.eventType!=Ey&&(e1>xy||Fy.velocity===Bn)){var tx=Sy.deltaX-Fy.deltaX,vx=Sy.deltaY-Fy.deltaY,$x=o1(e1,tx,vx);A1=$x.x,P1=$x.y,s1=$l($x.x)>$l($x.y)?$x.x:$x.y,G1=t1(tx,vx),yy.lastInterval=Sy}else s1=Fy.velocity,A1=Fy.velocityX,P1=Fy.velocityY,G1=Fy.direction;Sy.velocity=s1,Sy.velocityX=A1,Sy.velocityY=P1,Sy.direction=G1}function h1(yy){for(var Sy=[],Fy=0;Fy<yy.pointers.length;)Sy[Fy]={clientX:Io(yy.pointers[Fy].clientX),clientY:Io(yy.pointers[Fy].clientY)},Fy++;return{timeStamp:Wl(),pointers:Sy,center:l1(Sy),deltaX:yy.deltaX,deltaY:yy.deltaY}}function l1(yy){var Sy=yy.length;if(Sy===1)return{x:Io(yy[0].clientX),y:Io(yy[0].clientY)};for(var Fy=0,e1=0,s1=0;s1<Sy;)Fy+=yy[s1].clientX,e1+=yy[s1].clientY,s1++;return{x:Io(Fy/Sy),y:Io(e1/Sy)}}function o1(yy,Sy,Fy){return{x:Sy/yy||0,y:Fy/yy||0}}function t1(yy,Sy){return yy===Sy?Iy:$l(yy)>=$l(Sy)?yy<0?zy:Uy:Sy<0?Qy:Gy}function Wy(yy,Sy,Fy){Fy||(Fy=Yy);var e1=Sy[Fy[0]]-yy[Fy[0]],s1=Sy[Fy[1]]-yy[Fy[1]];return Math.sqrt(e1*e1+s1*s1)}function f1(yy,Sy,Fy){Fy||(Fy=Yy);var e1=Sy[Fy[0]]-yy[Fy[0]],s1=Sy[Fy[1]]-yy[Fy[1]];return Math.atan2(s1,e1)*180/Math.PI}function m1(yy,Sy){return f1(Sy[1],Sy[0],Jy)+f1(yy[1],yy[0],Jy)}function w1(yy,Sy){return Wy(Sy[0],Sy[1],Jy)/Wy(yy[0],yy[1],Jy)}var c1={mousedown:Ry,mousemove:Ly,mouseup:ky},M1="mousedown",L1="mousemove mouseup";function B1(){this.evEl=M1,this.evWin=L1,this.pressed=!1,Hy.apply(this,arguments)}ty(B1,Hy,{handler:function(yy){var Sy=c1[yy.type];Sy&Ry&&yy.button===0&&(this.pressed=!0),Sy&Ly&&yy.which!==1&&(Sy=ky),this.pressed&&(Sy&ky&&(this.pressed=!1),this.callback(this.manager,Sy,{pointers:[yy],changedPointers:[yy],pointerType:Xy,srcEvent:yy}))}});var D1={pointerdown:Ry,pointermove:Ly,pointerup:ky,pointercancel:Ey,pointerout:Ey},O1={2:Dy,3:qy,4:Xy,5:$y},j1="pointerdown",k1="pointermove pointerup pointercancel";vn.MSPointerEvent&&!vn.PointerEvent&&(j1="MSPointerDown",k1="MSPointerMove MSPointerUp MSPointerCancel");function q1(){this.evEl=j1,this.evWin=k1,Hy.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ty(q1,Hy,{handler:function(yy){var Sy=this.store,Fy=!1,e1=yy.type.toLowerCase().replace("ms",""),s1=D1[e1],A1=O1[yy.pointerType]||yy.pointerType,P1=A1==Dy,G1=sy(Sy,yy.pointerId,"pointerId");s1&Ry&&(yy.button===0||P1)?G1<0&&(Sy.push(yy),G1=Sy.length-1):s1&(ky|Ey)&&(Fy=!0),!(G1<0)&&(Sy[G1]=yy,this.callback(this.manager,s1,{pointers:Sy,changedPointers:[yy],pointerType:A1,srcEvent:yy}),Fy&&Sy.splice(G1,1))}});var _b={touchstart:Ry,touchmove:Ly,touchend:ky,touchcancel:Ey},Q1="touchstart",Y1="touchstart touchmove touchend touchcancel";function jy(){this.evTarget=Q1,this.evWin=Y1,this.started=!1,Hy.apply(this,arguments)}ty(jy,Hy,{handler:function(yy){var Sy=_b[yy.type];if(Sy===Ry&&(this.started=!0),!!this.started){var Fy=r1.call(this,yy,Sy);Sy&(ky|Ey)&&Fy[0].length-Fy[1].length===0&&(this.started=!1),this.callback(this.manager,Sy,{pointers:Fy[0],changedPointers:Fy[1],pointerType:Dy,srcEvent:yy})}}});function r1(yy,Sy){var Fy=cy(yy.touches),e1=cy(yy.changedTouches);return Sy&(ky|Ey)&&(Fy=fy(Fy.concat(e1),"identifier",!0)),[Fy,e1]}var n1={touchstart:Ry,touchmove:Ly,touchend:ky,touchcancel:Ey},a1="touchstart touchmove touchend touchcancel";function y1(){this.evTarget=a1,this.targetIds={},Hy.apply(this,arguments)}ty(y1,Hy,{handler:function(yy){var Sy=n1[yy.type],Fy=_1.call(this,yy,Sy);Fy&&this.callback(this.manager,Sy,{pointers:Fy[0],changedPointers:Fy[1],pointerType:Dy,srcEvent:yy})}});function _1(yy,Sy){var Fy=cy(yy.touches),e1=this.targetIds;if(Sy&(Ry|Ly)&&Fy.length===1)return e1[Fy[0].identifier]=!0,[Fy,Fy];var s1,A1,P1=cy(yy.changedTouches),G1=[],tx=this.target;if(A1=Fy.filter(function(vx){return hy(vx.target,tx)}),Sy===Ry)for(s1=0;s1<A1.length;)e1[A1[s1].identifier]=!0,s1++;for(s1=0;s1<P1.length;)e1[P1[s1].identifier]&&G1.push(P1[s1]),Sy&(ky|Ey)&&delete e1[P1[s1].identifier],s1++;if(G1.length)return[fy(A1.concat(G1),"identifier",!0),G1]}var E1=2500,b1=25;function S1(){Hy.apply(this,arguments);var yy=ny(this.handler,this);this.touch=new y1(this.manager,yy),this.mouse=new B1(this.manager,yy),this.primaryTouch=null,this.lastTouches=[]}ty(S1,Hy,{handler:function(yy,Sy,Fy){var e1=Fy.pointerType==Dy,s1=Fy.pointerType==Xy;if(!(s1&&Fy.sourceCapabilities&&Fy.sourceCapabilities.firesTouchEvents)){if(e1)x1.call(this,Sy,Fy);else if(s1&&N1.call(this,Fy))return;this.callback(yy,Sy,Fy)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function x1(yy,Sy){yy&Ry?(this.primaryTouch=Sy.changedPointers[0].identifier,W1.call(this,Sy)):yy&(ky|Ey)&&W1.call(this,Sy)}function W1(yy){var Sy=yy.changedPointers[0];if(Sy.identifier===this.primaryTouch){var Fy={x:Sy.clientX,y:Sy.clientY};this.lastTouches.push(Fy);var e1=this.lastTouches,s1=function(){var A1=e1.indexOf(Fy);A1>-1&&e1.splice(A1,1)};setTimeout(s1,E1)}}function N1(yy){for(var Sy=yy.srcEvent.clientX,Fy=yy.srcEvent.clientY,e1=0;e1<this.lastTouches.length;e1++){var s1=this.lastTouches[e1],A1=Math.abs(Sy-s1.x),P1=Math.abs(Fy-s1.y);if(A1<=b1&&P1<=b1)return!0}return!1}var R1=vy(Po.style,"touchAction"),$1=R1!==Bn,C1="compute",T1="auto",F1="manipulation",z1="none",Z1="pan-x",H1="pan-y",nx=Px();function J1(yy,Sy){this.manager=yy,this.set(Sy)}J1.prototype={set:function(yy){yy==C1&&(yy=this.compute()),$1&&this.manager.element.style&&nx[yy]&&(this.manager.element.style[R1]=yy),this.actions=yy.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var yy=[];return Zl(this.manager.recognizers,function(Sy){iy(Sy.options.enable,[Sy])&&(yy=yy.concat(Sy.getTouchAction()))}),Ix(yy.join(" "))},preventDefaults:function(yy){var Sy=yy.srcEvent,Fy=yy.offsetDirection;if(this.manager.session.prevented){Sy.preventDefault();return}var e1=this.actions,s1=my(e1,z1)&&!nx[z1],A1=my(e1,H1)&&!nx[H1],P1=my(e1,Z1)&&!nx[Z1];if(s1){var G1=yy.pointers.length===1,tx=yy.distance<2,vx=yy.deltaTime<250;if(G1&&tx&&vx)return}if(!(P1&&A1)&&(s1||A1&&Fy&Zy||P1&&Fy&Ty))return this.preventSrc(Sy)},preventSrc:function(yy){this.manager.session.prevented=!0,yy.preventDefault()}};function Ix(yy){if(my(yy,z1))return z1;var Sy=my(yy,Z1),Fy=my(yy,H1);return Sy&&Fy?z1:Sy||Fy?Sy?Z1:H1:my(yy,F1)?F1:T1}function Px(){if(!$1)return!1;var yy={},Sy=vn.CSS&&vn.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Fy){yy[Fy]=Sy?vn.CSS.supports("touch-action",Fy):!0}),yy}var ax=1,ix=2,hx=4,rx=8,sx=rx,ox=16,IA=32;function fx(yy){this.options=Rm({},this.defaults,yy||{}),this.id=Ay(),this.manager=null,this.options.enable=oy(this.options.enable,!0),this.state=ax,this.simultaneous={},this.requireFail=[]}fx.prototype={defaults:{},set:function(yy){return Rm(this.options,yy),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(yy){if(Yl(yy,"recognizeWith",this))return this;var Sy=this.simultaneous;return yy=lx(yy,this),Sy[yy.id]||(Sy[yy.id]=yy,yy.recognizeWith(this)),this},dropRecognizeWith:function(yy){return Yl(yy,"dropRecognizeWith",this)?this:(yy=lx(yy,this),delete this.simultaneous[yy.id],this)},requireFailure:function(yy){if(Yl(yy,"requireFailure",this))return this;var Sy=this.requireFail;return yy=lx(yy,this),sy(Sy,yy)===-1&&(Sy.push(yy),yy.requireFailure(this)),this},dropRequireFailure:function(yy){if(Yl(yy,"dropRequireFailure",this))return this;yy=lx(yy,this);var Sy=sy(this.requireFail,yy);return Sy>-1&&this.requireFail.splice(Sy,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(yy){return!!this.simultaneous[yy.id]},emit:function(yy){var Sy=this,Fy=this.state;function e1(s1){Sy.manager.emit(s1,yy)}Fy<rx&&e1(Sy.options.event+Dx(Fy)),e1(Sy.options.event),yy.additionalEvent&&e1(yy.additionalEvent),Fy>=rx&&e1(Sy.options.event+Dx(Fy))},tryEmit:function(yy){if(this.canEmit())return this.emit(yy);this.state=IA},canEmit:function(){for(var yy=0;yy<this.requireFail.length;){if(!(this.requireFail[yy].state&(IA|ax)))return!1;yy++}return!0},recognize:function(yy){var Sy=Rm({},yy);if(!iy(this.options.enable,[this,Sy])){this.reset(),this.state=IA;return}this.state&(sx|ox|IA)&&(this.state=ax),this.state=this.process(Sy),this.state&(ix|hx|rx|ox)&&this.tryEmit(Sy)},process:function(yy){},getTouchAction:function(){},reset:function(){}};function Dx(yy){return yy&ox?"cancel":yy&rx?"end":yy&hx?"move":yy&ix?"start":""}function Ox(yy){return yy==Gy?"down":yy==Qy?"up":yy==zy?"left":yy==Uy?"right":""}function lx(yy,Sy){var Fy=Sy.manager;return Fy?Fy.get(yy):yy}function cx(){fx.apply(this,arguments)}ty(cx,fx,{defaults:{pointers:1},attrTest:function(yy){var Sy=this.options.pointers;return Sy===0||yy.pointers.length===Sy},process:function(yy){var Sy=this.state,Fy=yy.eventType,e1=Sy&(ix|hx),s1=this.attrTest(yy);return e1&&(Fy&Ey||!s1)?Sy|ox:e1||s1?Fy&ky?Sy|rx:Sy&ix?Sy|hx:ix:IA}});function Tx(){cx.apply(this,arguments),this.pX=null,this.pY=null}ty(Tx,cx,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vy},getTouchAction:function(){var yy=this.options.direction,Sy=[];return yy&Zy&&Sy.push(H1),yy&Ty&&Sy.push(Z1),Sy},directionTest:function(yy){var Sy=this.options,Fy=!0,e1=yy.distance,s1=yy.direction,A1=yy.deltaX,P1=yy.deltaY;return s1&Sy.direction||(Sy.direction&Zy?(s1=A1===0?Iy:A1<0?zy:Uy,Fy=A1!=this.pX,e1=Math.abs(yy.deltaX)):(s1=P1===0?Iy:P1<0?Qy:Gy,Fy=P1!=this.pY,e1=Math.abs(yy.deltaY))),yy.direction=s1,Fy&&e1>Sy.threshold&&s1&Sy.direction},attrTest:function(yy){return cx.prototype.attrTest.call(this,yy)&&(this.state&ix||!(this.state&ix)&&this.directionTest(yy))},emit:function(yy){this.pX=yy.deltaX,this.pY=yy.deltaY;var Sy=Ox(yy.direction);Sy&&(yy.additionalEvent=this.options.event+Sy),this._super.emit.call(this,yy)}});function Mx(){cx.apply(this,arguments)}ty(Mx,cx,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[z1]},attrTest:function(yy){return this._super.attrTest.call(this,yy)&&(Math.abs(yy.scale-1)>this.options.threshold||this.state&ix)},emit:function(yy){if(yy.scale!==1){var Sy=yy.scale<1?"in":"out";yy.additionalEvent=this.options.event+Sy}this._super.emit.call(this,yy)}});function Ex(){fx.apply(this,arguments),this._timer=null,this._input=null}ty(Ex,fx,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[T1]},process:function(yy){var Sy=this.options,Fy=yy.pointers.length===Sy.pointers,e1=yy.distance<Sy.threshold,s1=yy.deltaTime>Sy.time;if(this._input=yy,!e1||!Fy||yy.eventType&(ky|Ey)&&!s1)this.reset();else if(yy.eventType&Ry)this.reset(),this._timer=Xl(function(){this.state=sx,this.tryEmit()},Sy.time,this);else if(yy.eventType&ky)return sx;return IA},reset:function(){clearTimeout(this._timer)},emit:function(yy){this.state===sx&&(yy&&yy.eventType&ky?this.manager.emit(this.options.event+"up",yy):(this._input.timeStamp=Wl(),this.manager.emit(this.options.event,this._input)))}});function bx(){cx.apply(this,arguments)}ty(bx,cx,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[z1]},attrTest:function(yy){return this._super.attrTest.call(this,yy)&&(Math.abs(yy.rotation)>this.options.threshold||this.state&ix)}});function Cx(){cx.apply(this,arguments)}ty(Cx,cx,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Zy|Ty,pointers:1},getTouchAction:function(){return Tx.prototype.getTouchAction.call(this)},attrTest:function(yy){var Sy=this.options.direction,Fy;return Sy&(Zy|Ty)?Fy=yy.overallVelocity:Sy&Zy?Fy=yy.overallVelocityX:Sy&Ty&&(Fy=yy.overallVelocityY),this._super.attrTest.call(this,yy)&&Sy&yy.offsetDirection&&yy.distance>this.options.threshold&&yy.maxPointers==this.options.pointers&&$l(Fy)>this.options.velocity&&yy.eventType&ky},emit:function(yy){var Sy=Ox(yy.offsetDirection);Sy&&this.manager.emit(this.options.event+Sy,yy),this.manager.emit(this.options.event,yy)}});function gx(){fx.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}ty(gx,fx,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[F1]},process:function(yy){var Sy=this.options,Fy=yy.pointers.length===Sy.pointers,e1=yy.distance<Sy.threshold,s1=yy.deltaTime<Sy.time;if(this.reset(),yy.eventType&Ry&&this.count===0)return this.failTimeout();if(e1&&s1&&Fy){if(yy.eventType!=ky)return this.failTimeout();var A1=this.pTime?yy.timeStamp-this.pTime<Sy.interval:!0,P1=!this.pCenter||Wy(this.pCenter,yy.center)<Sy.posThreshold;this.pTime=yy.timeStamp,this.pCenter=yy.center,!P1||!A1?this.count=1:this.count+=1,this._input=yy;var G1=this.count%Sy.taps;if(G1===0)return this.hasRequireFailures()?(this._timer=Xl(function(){this.state=sx,this.tryEmit()},Sy.interval,this),ix):sx}return IA},failTimeout:function(){return this._timer=Xl(function(){this.state=IA},this.options.interval,this),IA},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==sx&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function xx(yy,Sy){return Sy=Sy||{},Sy.recognizers=oy(Sy.recognizers,xx.defaults.preset),new Rx(yy,Sy)}xx.VERSION="2.0.7",xx.defaults={domEvents:!1,touchAction:C1,enable:!0,inputTarget:null,inputClass:null,preset:[[bx,{enable:!1}],[Mx,{enable:!1},["rotate"]],[Cx,{direction:Zy}],[Tx,{direction:Zy},["swipe"]],[gx],[gx,{event:"doubletap",taps:2},["tap"]],[Ex]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Fx=1,Lx=2;function Rx(yy,Sy){this.options=Rm({},xx.defaults,Sy||{}),this.options.inputTarget=this.options.inputTarget||yy,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=yy,this.input=i1(this),this.touchAction=new J1(this,this.options.touchAction),kx(this,!0),Zl(this.options.recognizers,function(Fy){var e1=this.add(new Fy[0](Fy[1]));Fy[2]&&e1.recognizeWith(Fy[2]),Fy[3]&&e1.requireFailure(Fy[3])},this)}Rx.prototype={set:function(yy){return Rm(this.options,yy),yy.touchAction&&this.touchAction.update(),yy.inputTarget&&(this.input.destroy(),this.input.target=yy.inputTarget,this.input.init()),this},stop:function(yy){this.session.stopped=yy?Lx:Fx},recognize:function(yy){var Sy=this.session;if(!Sy.stopped){this.touchAction.preventDefaults(yy);var Fy,e1=this.recognizers,s1=Sy.curRecognizer;(!s1||s1&&s1.state&sx)&&(s1=Sy.curRecognizer=null);for(var A1=0;A1<e1.length;)Fy=e1[A1],Sy.stopped!==Lx&&(!s1||Fy==s1||Fy.canRecognizeWith(s1))?Fy.recognize(yy):Fy.reset(),!s1&&Fy.state&(ix|hx|rx)&&(s1=Sy.curRecognizer=Fy),A1++}},get:function(yy){if(yy instanceof fx)return yy;for(var Sy=this.recognizers,Fy=0;Fy<Sy.length;Fy++)if(Sy[Fy].options.event==yy)return Sy[Fy];return null},add:function(yy){if(Yl(yy,"add",this))return this;var Sy=this.get(yy.options.event);return Sy&&this.remove(Sy),this.recognizers.push(yy),yy.manager=this,this.touchAction.update(),yy},remove:function(yy){if(Yl(yy,"remove",this))return this;if(yy=this.get(yy),yy){var Sy=this.recognizers,Fy=sy(Sy,yy);Fy!==-1&&(Sy.splice(Fy,1),this.touchAction.update())}return this},on:function(yy,Sy){if(yy!==Bn&&Sy!==Bn){var Fy=this.handlers;return Zl(ly(yy),function(e1){Fy[e1]=Fy[e1]||[],Fy[e1].push(Sy)}),this}},off:function(yy,Sy){if(yy!==Bn){var Fy=this.handlers;return Zl(ly(yy),function(e1){Sy?Fy[e1]&&Fy[e1].splice(sy(Fy[e1],Sy),1):delete Fy[e1]}),this}},emit:function(yy,Sy){this.options.domEvents&&Oy(yy,Sy);var Fy=this.handlers[yy]&&this.handlers[yy].slice();if(!(!Fy||!Fy.length)){Sy.type=yy,Sy.preventDefault=function(){Sy.srcEvent.preventDefault()};for(var e1=0;e1<Fy.length;)Fy[e1](Sy),e1++}},destroy:function(){this.element&&kx(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function kx(yy,Sy){var Fy=yy.element;if(Fy.style){var e1;Zl(yy.options.cssProps,function(s1,A1){e1=vy(Fy.style,A1),Sy?(yy.oldCssProps[e1]=Fy.style[e1],Fy.style[e1]=s1):Fy.style[e1]=yy.oldCssProps[e1]||""}),Sy||(yy.oldCssProps={})}}function Oy(yy,Sy){var Fy=yn.createEvent("Event");Fy.initEvent(yy,!0,!0),Fy.gesture=Sy,Sy.target.dispatchEvent(Fy)}Rm(xx,{INPUT_START:Ry,INPUT_MOVE:Ly,INPUT_END:ky,INPUT_CANCEL:Ey,STATE_POSSIBLE:ax,STATE_BEGAN:ix,STATE_CHANGED:hx,STATE_ENDED:rx,STATE_RECOGNIZED:sx,STATE_CANCELLED:ox,STATE_FAILED:IA,DIRECTION_NONE:Iy,DIRECTION_LEFT:zy,DIRECTION_RIGHT:Uy,DIRECTION_UP:Qy,DIRECTION_DOWN:Gy,DIRECTION_HORIZONTAL:Zy,DIRECTION_VERTICAL:Ty,DIRECTION_ALL:Vy,Manager:Rx,Input:Hy,TouchAction:J1,TouchInput:y1,MouseInput:B1,PointerEventInput:q1,TouchMouseInput:S1,SingleTouchInput:jy,Recognizer:fx,AttrRecognizer:cx,Tap:gx,Pan:Tx,Swipe:Cx,Pinch:Mx,Rotate:bx,Press:Ex,on:ay,off:uy,each:Zl,merge:_g,extend:ry,assign:Rm,inherit:ty,bindFn:ny,prefixed:vy});var Ny=typeof vn!="undefined"?vn:typeof self!="undefined"?self:{};Ny.Hammer=xx,typeof Bn=="function"&&Bn.amd?Bn(function(){return xx}):cr.exports?cr.exports=xx:vn[Rn]=xx})(window,document,"Hammer")})(He$2);var b$t=Object.defineProperty,C$q=(cr,vn,yn)=>vn in cr?b$t(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$u=(cr,vn,yn)=>(C$q(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S$u{constructor(vn,yn){n$u(this,"width"),n$u(this,"height"),n$u(this,"containerDom"),n$u(this,"hooks",new E$v),n$u(this,"canvas",document.createElement("canvas")),n$u(this,"config"),n$u(this,"state",{enabled:!1}),n$u(this,"five"),n$u(this,"scale"),n$u(this,"offset",{x:0,y:0}),n$u(this,"context"),n$u(this,"renderCenter",new Vector3),n$u(this,"hammer"),n$u(this,"offsetRange"),n$u(this,"isPanning",!1),n$u(this,"imageData",new ImageData(1,1)),n$u(this,"onPanstart",()=>{this.isPanning=!0,this.canvas.style.boxShadow="0 2px 30px 0 rgba(0,0,0,0.20)"}),n$u(this,"onPan",Io=>{if(!this.isPanning||!this.offsetRange||this.hooks.emit("wantsPanGesture",Io))return;const{translateX:$l,translateY:Wl}=this.getPanOffset(Io,this.offsetRange);this.canvas.style.transform=`translate3d(${$l}px, ${Wl}px, 100px)`}),n$u(this,"onPanend",Io=>{if(this.isPanning=!1,this.canvas.style.boxShadow="none",!this.offsetRange)return;const{translateX:$l,translateY:Wl}=this.getPanOffset(Io,this.offsetRange);this.canvas.style.transform=`translate3d(${$l}px, ${Wl}px, 100px)`,this.offset={x:$l,y:Wl}});var Rn,Bn,Co,Po;if(!vn.renderer){console.error("Five Render \u672A\u521D\u59CB\u5316");return}this.five=vn,this.scale=(Rn=yn==null?void 0:yn.scale)!=null?Rn:2,this.width=(Bn=yn==null?void 0:yn.width)!=null?Bn:190,this.height=(Po=(Co=yn==null?void 0:yn.height)!=null?Co:yn==null?void 0:yn.width)!=null?Po:190,this.config={dragEnabled:(yn==null?void 0:yn.dragEnabled)||!1,autoFixPCPosition:(yn==null?void 0:yn.autoFixPCPosition)||!1,initialPosition:(yn==null?void 0:yn.initialPosition)||{left:"0",top:"0"}};const To=this.canvas.getContext("2d");if(!To)throw new Error("CANNOT CREATE CONTEXT2D");this.context=To,this.config.dragEnabled&&(this.hammer=new Qt$1(this.canvas),this.hammer.on("pan",this.onPan),this.hammer.on("panstart",this.onPanstart),this.hammer.on("panend",this.onPanend)),this.initStyle()}enable(){if(!this.state.enabled)return this.state.enabled=!0,this.containerDom&&this._appendTo(this.containerDom),this}disable(){if(this.state.enabled)return this.state.enabled=!1,this.canvas.style.visibility="hidden",this.canvas.remove(),this}dispose(){var vn;this.clear(),this.disable(),(vn=this.hammer)==null||vn.destroy()}appendTo(vn){var yn;return this.containerDom&&((yn=this.containerDom)==null||yn.removeChild(this.canvas)),this.containerDom=vn,this.state.enabled&&this._appendTo(vn),this}clear(){var vn;return(vn=this.context)==null||vn.clearRect(0,0,this.canvas.width,this.canvas.height),this}renderWithPoint(vn){this.containerDom&&this.state.enabled&&(this.renderCenter=vn,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}renderWithScreenPoint(vn){this.containerDom&&this.state.enabled&&(this.renderCenter=vn,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}resetOffset(){this.offset={x:0,y:0},this.canvas.style.transform="translate3d(0px, 0px, 100px)"}render(){if(!this.five.renderer||!this.containerDom)return;const{scale:vn,context:yn,width:Rn,height:Bn}=this,Co=this.five.renderer.getSize(new Vector2),[Po,To]=(()=>{if(this.renderCenter.isVector3){const ry=this.renderCenter.clone().project(this.five.camera);return[(ry.x+1)/2*Co.x,(ry.y+1)/2*Co.y]}else return[this.renderCenter.x,Co.y-this.renderCenter.y]})(),Io=1,$l=Rn/vn,Wl=Bn/vn,Xl=Io*vn,Yl=new Map;this.five.scene.traverse(ry=>{ry.disableGetPixel===!0&&(Yl.set(ry,ry.visible),ry.visible=!1)});const Zl=this.five.getPixels(Po-$l/2,To-$l/2,$l,Wl,Xl);Yl.forEach((ry,_g)=>{_g.visible=ry});const ey=Math.floor(Rn*Io),Rm=Math.floor(Bn*Io);R$o(Zl,ey,Rm),(this.imageData.width!==ey||this.imageData.height!==Rm)&&(this.imageData=new ImageData(ey,Rm)),this.imageData.data.set(Zl),yn.putImageData(this.imageData,0,0),this.canvas.style.visibility="visible"}getRenderCenter(){return this.renderCenter}_appendTo(vn){if(this.resetOffset(),vn.appendChild(this.canvas),!this.offsetRange){const yn=this.canvas.getBoundingClientRect(),Rn=vn.getBoundingClientRect(),Bn=Rn.right-yn.right,Co=Rn.bottom-yn.bottom,Po=Rn.left-yn.left,To=Rn.top-yn.top;this.offsetRange={min:{x:Po,y:To},max:{x:Bn,y:Co}}}}autoFixPCPosition(){if(!this.containerDom)return;const{width:vn,height:yn}=this,{clientWidth:Rn,clientHeight:Bn}=this.containerDom,[Co,Po,To]=(()=>{if(this.renderCenter.isVector3){const Io=this.renderCenter.clone().project(this.five.camera);return[(Io.x+1)/2*Rn,-(Io.x-1)/2*Rn,-(Io.y-1)/2*Bn]}else return[this.renderCenter.x,Rn-this.renderCenter.x,this.renderCenter.y]})();Co<183?(this.canvas.style.top=-yn/2+"px",this.canvas.style.left="90px"):To<183?(this.canvas.style.top="90px",this.canvas.style.left=-vn/2+"px"):Po<183?(this.canvas.style.top=-yn/2+"px",this.canvas.style.left=-vn-90+"px"):(this.canvas.style.left=-vn/2+"px",this.canvas.style.top=-yn-90+"px"),this.canvas.style.transform=`translate3d(${Co}px, ${To}px, 10px)`,this.offset={x:Co,y:To}}initStyle(){const vn=this.canvas;vn.classList.add("five-plugin__magnifier"),vn.style.position="absolute",vn.style.pointerEvents=this.config.dragEnabled?"all":"none",vn.style.borderRadius="50%",vn.style.zIndex="99";const yn=1;vn.setAttribute("width",(this.width*yn).toString()),vn.setAttribute("height",(this.height*yn).toString()),vn.style.border="2px solid rgba(255,255,255,0.20)",vn.style.width=this.width+"px",vn.style.height=this.height+"px",vn.style.top=this.config.initialPosition.top,vn.style.left=this.config.initialPosition.left,vn.style.transform="translate(0,0,100px)",vn.style.visibility="hidden",this.config.dragEnabled&&(this.canvas.style.cursor="pointer")}getPanOffset(vn,yn){const{min:{x:Rn,y:Bn},max:{x:Co,y:Po}}=yn,To=this.offset.x+vn.deltaX,Io=this.offset.y+vn.deltaY,$l=Math.min(Math.max(To,Rn),Co),Wl=Math.min(Math.max(Io,Bn),Po);return{translateX:$l,translateY:Wl}}}function d$E(cr,vn,yn){const Rn=cr[vn],Bn=cr[yn];Rn===void 0||Bn===void 0||(cr[vn]=Bn,cr[yn]=Rn)}function R$o(cr,vn,yn){const Rn=yn/2;for(let Bn=1;Bn<=Rn;Bn++){const Co=yn-(Bn-1);for(let Po=1;Po<=vn;Po++){const To=(Bn-1)*vn+Po-1,Io=(Co-1)*vn+Po-1;d$E(cr,To*4+0,Io*4+0),d$E(cr,To*4+1,Io*4+1),d$E(cr,To*4+2,Io*4+2),d$E(cr,To*4+3,Io*4+3)}}}const A$y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbYAAAGwCAYAAADFUEBtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABtqADAAQAAAABAAABsAAAAABTZ8U6AAAtiklEQVR4Ae2dAXJbSbJdp+d7AfYSHOGVeAPek5fkNXgLjviLmRkZl+CRbtc8UBKRRalZpyIesiorMx/eIcjb+QCh//Y3hwQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkMEbgj7FKFpLA4QS+fPnyx23czJc//V498h2Oy8uXwDYCf/oF3HYWC0vgAAI3QfuP22V+uR35vYplrOsX/03w/kWAVgISmCPwX+ZKWUkCErgR+PvtiKjF9uj/iMx+C1/HOZeABJ4koLA9CdB0CRQBxKxFrLa/Tung7Ni+InEigTkCCtscSytJIATo2BC3dGYIWfvs2Hy9SGATAYVtE1jLHkkgohbxQsACgTkWn8IWEg4JbCCgsG2AasljCXArMgB6DpAWs3/i1EpAArMEFLZZnlY7m0C6snwyMuPqFiT+2Cvhi98hAQk8SUBhexKg6RIoAtyKjItbj1jCWGPxayUggSECCtsQSMtI4EYgYhVx624tYOK/8mXPIQEJDBNQ2IaBWu5oAnRh3GZkHSiIG8J3NCgvXgI7CShsO+la+zQCEa0ciBgWDlnji3VIQAIbCChsG6Ba8mgCdGSxjCsRu/IRr5WABJ4goLA9Ac9UCSwE6Nj6Y/0RsBxXviXdpQQkMEFAYZugaA0J3AnQhdG1xYsPccPKTAIS2ERAYdsE1rJHEohocQsy8xwZdGuse+8e4aMEJDBGQGEbQ2khCXz94AgCxkf8gwZf5u3P2iEBCQwSUNgGYVpKAjcC+eYRRKw7NeaBpLCFgkMCmwgobJvAWvZIAhE1bkUGAAK3zq/W8TkkIIEBAgrbAERLSOCVQISsPzgSd3x0a8xjczgkIIENBBS2DVAteSwBBGsVrV4zxx4LywuXwC4CCtsustY9kUDEio4t8/W9tO7cTuTjNUvgQwgobB+C2ZMcQoD317BX4kanhj0EjZcpgY8joLB9HGvP9PkJRKwiai1odm2f/+fuFf5mBBS23+wH4tP5yxPgViRdWy6I7iwihx/fX/6CvQAJ/G4EFLbf7Sfi8/krE+DfsEW0umvrOdensEFCK4FhAgrbMFDLHU0AQUO0sHRq3JaMdUhAApsIKGybwFr2SAIRsr7ViLAFRsSsha33su+QgASGCChsQyAtI4EbgYhabkdmRLi6M1uFbF2/JPkgAQk8T0Bhe56hFSQAgYgVHVt8iBsWX2zHZe2QgASGCChsQyAtI4EbgQhYjh6s23Yn17HOJSCBAQIK2wBES0jglUC6sBy8l9Zg8MUmBqHrGOcSkMAAAYVtAKIlJPBKIGLFsULBT7emsK2EXEtgiIDCNgTSMhK4EUC8EK0WsZ6zLzQJSGADAYVtA1RLHksggtUfCmkB63kAretjoXnhEpgmoLBNE7XeyQQQNrqzlUX22VPYVjquJTBEQGEbAmkZCdwI8KGQt0SLPazgJCCBYQIK2zBQyx1PgE9FAiICli4NG7+iFgoOCWwioLBtAmvZIwnw/hpfhsxtxxUGQrf6XUtAAgMEFLYBiJaQwCuBCBu/UxEvhG4F9NbeGutaAhL4SQL8Ev5kmuESkMAFgdxi5Fbko9uNj/wX5XRJQALvIaCwvYeaORK4JhBRQ7hi37rlSNx1Jb0SkMC7CShs70ZnogT+jUDEiiObLV6ZR+gYvYdPKwEJDBBQ2AYgWkICrwQQNUSsxWt9X633BCgBCQwSUNgGYVrqeAIRKz4wsgrX99bHwxOABKYIKGxTJK0jgfutx/XDI7zPxm1IBA4rNwlIYJiAwjYM1HJHE+DDIy1azLFHA/LiJfARBBS2j6DsOU4hEPFaOzauvTu3xCl0kNFKYJiAwjYM1HJHE0CwEC3W3IZE3AKJmKOBefES2EFAYdtB1ZqnEki3lq/TYiBkLWL4iNFKQALDBBS2YaCWO5oAHRoQ1tuSLWrZc0hAAhsIKGwboFryWAIRKwQLEYvYPZofC8oLl8BOAgrbTrrWPo1Ad2x0a2FwNe/bk6dx8nolsJWAwrYVr8UPIxCxomPj0hGw2O7c2NdKQALDBBS2YaCWO5pAxGsVsgbSe8x737kEJDBAQGEbgGgJCbwSSLdGx5bujPkKiM5t9buWgAQGCChsAxAtIYFXAmvH9gjMI8F7FK9fAhL4CQIK20/AMlQC3yEQYYto0ZHFZvRtR/bad4/yUQISGCGgsI1gtIgEXgjQsSFa2MaDD9t7ziUggQECCtsAREtI4JVAurUIFscVmKsu7ipOnwQk8E4CCts7wZkmgQcE8jvF7cYrEbvyPSilWwISeA8Bhe091MyRwDWBfE9kd2tXtxvxYa8r6ZWABN5NQGF7NzoTJfBvBBC1WDozgvC1ZU8rAQkMElDYBmFa6ngCES0+Fbl+pD9Chy9xORwSkMAGAgrbBqiWPJYAgoW4NQj24lu7uY5zLgEJPElAYXsSoOkSKAIRtO7KEDC6M9aJwVfpTiUggQkCCtsERWtI4E6gu7J4unPLHsKWPYUtFBwS2EBAYdsA1ZLHEohY0bFFxBC6R/NjQXnhEthJQGHbSdfapxFAyHLd3a09mp/Gx+uVwIcQUNg+BLMnOYRABIyOjUtmna6NW5HxeSsSQloJDBNQ2IaBWu54AnRtCFeLGbck/3WjxP7xwAQggWkCCts0UeudTCDfPJKjRwsYc76hpOOcS0ACQwQUtiGQlpHAjUCEK7cZ6cwChTmdG+KGTYxDAhIYJKCwDcK01PEEIlYcwEDAsKuftVYCEhgioLANgbSMBG4EHolad22JYS00CUhgAwGFbQNUSx5LILch+RRkQ6Bba8u845xLQAIDBBS2AYiWkMArgYhVv8fW76vRpeETmgQksImAwrYJrGWPJBBh4wiAtSt7a+9IYF60BHYQUNh2ULXmqQQQrti1M0Pk2GN9KiuvWwLbCChs29Ba+EACvMcWUVvfa+NWZLBE1BS2kHBIYAMBhW0DVEseTQDRamFrUcs8h0MCEthEQGHbBNayRxKImPGtIi1e3Z1l3kJ3JCgvWgI7CShsO+la+zQCb92KbBYKW9NwLoFhAgrbMFDLHU2A25DdoV0ByX7fqryK0ScBCbyTgML2TnCmSeCCAILVHRlzbNIyd0hAApsIKGybwFr2SALpwujaAED3ho1/jSFWKwEJDBBQ2AYgWkICrwRasBCytTvDLzQJSGATAYVtE1jLHkkgorW+d/ZIyNa4I4F50RLYQUBh20HVmqcSQNjo0rJmDpNHQse+VgISeJKAwvYkQNMlUATW99giao86MwWuwDmVwCQBhW2SprUk8OevyqKD+9cNDN1bW3lJQAIbCChsG6Ba8lgC6c440q0hYvk2Egb+7DkkIIENBBS2DVAteSyBiFVEbL0F2SKWPYcEJLCRgMK2Ea6ljyPQ3RoXH1HLgaAhco/eeyNPKwEJvJOAwvZOcKZJ4IIAYhW7Chni1vaihC4JSOBZAgrbswTNl8A3AhEtxI3ODCFLVPu+ZTmTgARGCShsozgtdjiBCBdHUKRruxKz9ifOIQEJDBJQ2AZhWup4AhGxdGyxLV6IG4CyXn3saSUggScJKGxPAjRdAkUgYsX7a9ySbIEjND6HBCSwiYDCtgmsZY8kQLfW3VjPgRLflZ99rQQk8AQBhe0JeKZK4IIAHRvCRceGTUrPL0rokoAEniGgsD1Dz1wJ/JnA2rGtnVm+Witj9d+9PkpAAiMEFLYRjBaRwAsBhC2W0d0Z++0jTisBCQwRUNiGQFpGAq8E8pVa6cgQLyyAWHOrEr9WAhIYIqCwDYG0jARuBNKR5Yh4ddeGiLUf3y3UIQEJTBJQ2CZpWut0AtxqjGjl6O6MOYwUNkhoJTBMQGEbBmq5owkgaIgWlk4NccMeDcuLl8AuAgrbLrLWPZEAtyK59ghbixjC1z5itRKQwBABhW0IpGUk8EqA99jo1uLuuaLmS0UCmwkobJsBW/4oAnRsES9Gd2nxIXJY4rQSkMAQAYVtCKRlJHAjgFjRtQVKfBE6fKyz55CABDYQUNg2QLXksQQiWhGwDESuhax9zO/RPkpAAmMEFLYxlBaSwIuYRbA4rpCke/N9tisy+iQwREBhGwJpGQncCETQeJ8tQHivLf51Hp9DAhLYQEBh2wDVkscSiFjlK7UYLV49Z18rAQlsIKCwbYBqyWMJRNT4kMgVhIhbd25XMfokIIEnCShsTwI0XQJFIMJFZ4Zlm/fV8PMhE/a1EpDAEAGFbQikZSRwIxDRWju2+CJq7Y8PgbtNHRKQwCQBhW2SprVOJ0AXhg0PRA02CBoWv1YCEhgioLANgbSMBG4EIlYRtVhuPcZm4LuvfJSABLYRUNi2obXwoQS45dhdG6IWmyMDe1/5KAEJjBFQ2MZQWkgCLx/1R7xi6dqYNyKFrWk4l8AgAYVtEKaljifQohYY3bVF5BA6bk8eD0wAEthBQGHbQdWaJxNAzBC5sEDQ6NxYn8zJa5fANgIK2za0Fj6QQIQrwhbbo9eZ/+t2tK9jnUtAAk8SUNieBGi6BIpARC3fPtIdGfPYDAQNe/f6KAEJjBFQ2MZQWkgCL6IVwWrRYo4Npv4+SbFJQALDBBS2YaCWO5rA+l2RLWbducXfe0dD8+IlME1AYZsmar2TCSBYV6KFD8uHTE7m5bVLYAsBhW0LVoseSmAVtn5fjXnQIG6HYvKyJbCXgMK2l6/VzyPQnVgLWM9DpePOo+QVS2AjAYVtI1xLH0cgYpWju7OGEHFjbxW6jnMuAQk8QUBhewKeqRJYCETUECwsIRG0+HIgbuxpJSCBQQIK2yBMS0ngRqA7NoQMMPmH2Rmr/+71UQISGCGgsI1gtIgEXghE1DJiW+BenLcH/vE2a60EJLCBgMK2AaoljyWQTqxFDaFrIN21td+5BCQwREBhGwJpGQncCCBsb91qpGtLjEMCEthAQGHbANWSxxJIh4aoxfIhkRaxK9+xwLxwCewgoLDtoGrNkwn090C2oMEkPm5H4tNKQAKDBBS2QZiWOp5Ad2x8vD9Q6NIyj7ARl7VDAhIYJqCwDQO13NEEEK1AoFuLqK0fImnROxqYFy+BHQQUth1UrXkqAYQN4cLGn3kGc4Tv7vVRAhIYI6CwjaG0kARe/p1aBKtFizk2mHouNglIYJiAwjYM1HLHE8htR7qzfi+tPzASYVPcjn+pCGAXAYVtF1nrnkiA99KwLV78+zW49B4+rQQkMEBAYRuAaAkJvBKIoHWXBhhEjK4ta3zEaCUggSECCtsQSMtI4JVAhC23IhE4bksiZr0WmgQksIGAwrYBqiWPJRDxQtgQstiIGevu2o4F5YVLYCcBhW0nXWufRgDxynX3e2qIXfzME+uQgAQ2EFDYNkC15LEEIlqrcCFgsd6GPPal4YV/JAGF7SNpe65TCETEELi+ZsWtaTiXwCYCCtsmsJY9kgCChqhh42f4HhsktBLYREBh2wTWskcSQNhyyzGiltGiljX+zB0SkMAGAscI25cvX/IHhj8y+ePCmj807QvqK3/7EkMNbO8zZ++RTdy6l9rk9/6Vb41lfRW7nidr6pPXMfERs+53feKI7Rr4Oqb3OX/73po/E881XFmeZyz7PA+ulfVqEx/ff3+1mSen31Pjk5F0bP/r9pr8H68x2SM2+6yxN9fX/9UN+T9iiaHO9+zVuR/l/ExsarwVv14fzxvLc2Dddt1jvdrkxIddz5l175PPua7W1GLvkU3tf77WJyY+ancd5uwnnnnb+FMzg5rYl7p//PEH9e9RBz3mF/CIUcLWfxjzyTXWWP4oscYmlr237Fs11zxi8zPIeTjXapPHf4QkJ4P42AxyqMm58K9xWa+xySEPS17Oj6/j2E8t/Fd1E7fmX8URs8ZTf/Wva/K7Nr63bNd/VLPzmV/FZi9HRvb5gxObwR8c/ohhs88c2778IYu/97LffzTZw2b/H7ej6/Temk9s/OQQv1rOu/rJw2afA99b9lHd9TzUbD/ztT6x+L8X92h/zU8cz5e9tsw7rmtnP/kZ8ffRudknjvNhqYcl78tN3DI/buSX7tTRf3xggC82Lwj+OF3tx3e1T+yP2h954fHHkfPFMu98fFfn5nrIJbbzH+Vx/t7vfObZT2zWnC++jPU8iem8xLSv89e4xDK6buJy/hw/Ovqcb51nrbcKZ+dSExZXNvU6Z62/ruGxXh/X/1YtePC8sDkHdcnnua7nz5o8LHWJpQZrLPGssWt8r3lexLYlLpbrz37W7K35+BOXwfpR/j3q22PHrfl93m8Z386Bjzhs/OvzJLZt4juO/B/l37WOmK9gPvtF8wLJdeaFwos1/gzWvIiIaU74Ov6t/MSxj8XH+fCzXm3iGZwfG3/nM8dSa81nPzYHce0nJxY/cdj2r/PEXMVR79Fe7yeGutjsM+Jb/dSNfZTfeeR3Xup3fmLyOiCPvcSR3zEdmzlHxxLfIpl6/Zx5TvFnsE5u1+rnc5Wf82cQh717v/m7bmIyOE/m5GGv4snDJi+j62TNPv5ex5d1DvaxxMXC+Tb9Wi/zq/yOoUbi1rqPfJ2feY/Uy0GtWHyJw48Pm72MrDPIyxxf5gzysPF37ayzhy/r4wYv9k9/4a8tef/A84Pnhx//jwziyMPiTw3q9rmofRXHXudSF9sxV3HU/dGf51r36rlyzr4ezt2245ivNjV4jn1u5uyteVn3Na1xa37WHMntedbkU3PNT8w6Eksce6yx1GUfm33yiY3lIK7zE5+jfcTFdp2sE8ugLjH4Y1MP/2qzT27mGTzv++r+yHMiljr4OzZz9vE/Wnc+tcnBJqbj4qfe6ienY/CRg43/rXzyiOm8dd5r8rDkZ524PvDFZvAzfVRvzb2q3b571YMeAfjpL/n1Pba+zrw4+OH3PDH9guo5+eRhOx9fYpljyWfvkZ+43ud5cK7ssc8eddtSizwsfmpc2fiI73N0/TUvex17lc8+ucRQt9f4YtfR+WvNxLKPJZ81ltzVEo9NfD+3zo8fMcDGx4Gva2VOjbbUwpe4+HqwF9t77WeePGJi8WOzz7xtzxOTQX722Mf3EvAakzn7+B+t33pu1CaGWmt9aseusexd5RLfMZyz49eanJ+/oeSvljxqYhPHQa2265w19ThP/PioHd/fTn1/LdfODyXzTz0e/JB5QeTae86Lpn0dgx+77nV+Yoh7ZJPfo/Px44td6xATyx4+1uRhiWW/4zlX7+HrOOarJfYqfz3/mpucNYY6jyznoxbrjseXmPaT05bYxBGb/cyzhw+bPQYxWWfOQU0sudi38rNHHpa678knB8u5Y+N7dA72yMOSx3rNz34G+6u97357TH5iOo6aiWp/1j2yR2zH4cNmjwMfdXpNjfYRxx7r2PgSu+7hwxIb26PzMl/XV8+j8zN/ibn4j/k17tOujxG2+lQkP8x8goixvlh4MeHHrvHxc/Re56/7iVvrxUdOz78Xl1gG+Vc5xMQmjueExR8bH7WyZsTX/vU87LW/5+THwj77HFf5OTf7mTPwYePPnLHWyh7nJ2a12adG5+MjvuPwJSZHrquvjXUsMV375r48Z/xdJ2tG51Mztv3MyYmND3/i19F7PeccxLPHOpZ6WGLIxU9O+5l3nc7HH9/qp17s1R7njWUfy3mJaT/ztX77yefnxB7noi412Mfix+LvPM7RPuLIi+39rK9i4j9mHCNsrz9RXihZXv3wr3zJwc8LiHUs80c128/51xz8if3e4DkQl1rk9x7naB9x2euDWm2pm1/crtX1Et97VzWJ59ysySW/1+27On+fp2NT42oQc/UcEo+fuK7B3vfisr/m57nnWGskltE5mRPLnDhs9nsQv/qpiz+Wj4uzlzqchzhq95r4+NpPPjnEscbih0XWfaxxrGNzPvI5P+uOy/yqJn5ief5Xsfg6h3jOzZrY2Az899WfnzP71CAmlvz2vVVr3eu8P80f3KX6U8xnXZwmbPk58kLqF8jqYy/+HPmFzFjj7t5/93c+MdjUyD4xsWtd9vAnt+dZM9b8R3Hx9x5/ZDgXlpi1LudjnzV5WfOHE1+fkzwsTK/Oc5XP+ZLPfizz7HfNrDlX5gzyk0c8cdTC4k9ufBzkxZ9BXPyJiSWG9ZVdfc0ve9S9Tb/O8WU/R0b77p5ve71+FNf+zHnu+FMj817Hl5HnjJ/ng8WfOOax7MefwR7+Pv8av66JTS75WOq+nOT1AR/xxGabeWoyf037+hy/l8/+Vd66lxjOg01Mz7vOVX728ZP3Yr0VCbozLD98XgyPrjpxxK4x5LKPTVz2Hu3jX+utecRR961fNGr1eeMjl3mv4+McmWes67v3/sgfj6yos8ZzfvZjmd+r3B/xJT5zbMdk3vmcfz1n4lZf53Eu7NW5spf62buqdXN/vY7OJy+5OThH4vGtlpyOTXwG58fevffHxJPDudbnSt7qT4Xk9CD2ytexnLPPT05qJPbqfPg6n1h8qdPzrMlj72q/fT3v3DU/cVwXOcRjk3M12CcPi5+crNtHHPucn3XHxtfrnmcvtdZ6iemaWZOHvbnOHEcBuP0XTDpUXgBYutZ13X7y2kf8lU3cz8RSI69C8mLxY/FdxcXXcdTBh1391GT/LftWLM+J/D7P1RzfWzUf1cLfdj0/e12fmCvb8ez3c4yPmNWy9z9vk/+WxW2Qmz9Iicfyx+g/b77/9+rnD9dqb9tf/3iRF9txicn60X7HMu9Y8qlBzCOb+OSvz+Mqntiuje+RvapDfnJ6/3vPoc+RzjK5Gev1v1Vnje3zrx127/U85/zR8/dzuXquXZfzr8+R9bHfPMLXNAXgpx+3e878wD/9tXqBH0/g9h9O//d21v96O/LHpwfr2LwGI3T/5/Z6/N8d5FwCEpghcJSwzSCzigQeEmjhajFLAl1b/BwPC7khAQm8n4DC9n52ZkpgJYBgxUbIesSXQcx95aMEJDBOQGEbR2rBwwlwu/vqPbagQfQQusNxefkSmCegsM0zteK5BOjGrsQLISPmXEpeuQQ2E1DYNgO2/FEE0q3RsWEDIPN+jy0+hC5zhwQkMEhAYRuEaanjCXQ31mIWMAjZao+HJgAJTBNQ2KaJWu9kAhEtOrV0aHRpfJCkhQ+BO5mX1y6BLQQUti1YLXoogVW4ELTg6D3Wh2LysiWwl4DCtpev1c8ikG5tvQWZT0ciarF0cZk7JCCBDQQUtg1QLXk0gQgW4hYQfO1Ri9rRgLx4CewmoLDtJmz9kwhExBC12Aw6tPvq/hiRs2NrIs4lMEhAYRuEaanjCSBYLVrrPOsrsTsengAkMEVAYZsiaR0J/Pt7aWGCkPU83VwLXvYcEpDAEAGFbQikZSRwIxCx4hZkC9c677XgJCCBYQIK2zBQyx1NIKKW99lyqzFHRkSMW4/47Nhe0PgggT0EFLY9XK16JoGIGN0YNiSYt2V+JimvWgIbCShsG+Fa+jgCEat0Y2vHFhB0bYlhHr9DAhIYJqCwDQO13NEEIlociFvWDPZ4Hw6/VgISGCSgsA3CtNTxBHjvDDHjW0cicuxlnkHMfeWjBCQwRkBhG0NpIQm8EOhu7B83D0IGHgQNi18rAQkMEVDYhkBaRgI3AhG1FjagRMQicG0VNuhoJTBMQGEbBmq5owlErFbBYr3ao0F58RLYSUBh20nX2qcRQNhi6dDCgDk2vqvOLn6HBCTwJAGF7UmApkugCETQECw6tGwzx1aKUwlIYJqAwjZN1HonE+A9tu7M4IEPiwCyr5WABIYIKGxDIC0jgRuBiFW6sqvODB9WYBKQwCYCCtsmsJY9kkBEK+JGVxYIzGMZCCBrrQQkMEhAYRuEaanjCUTY8iXI/3E76MxWG0jx4c/aIQEJDBJQ2AZhWup4AnRi+YfZ+daRq5GYDIXtzsFHCYwTUNjGkVrwcAII1ipu+GP7tuThuLx8CcwTUNjmmVrxXALpxujIIl65LZnB+2zM6exeNn2QgARmCShsszytdjaBdGPdmdGdtY9uDd/ZxLx6CWwgoLBtgGrJYwlErLpjy3oVsKy7gzsWlhcugV0EFLZdZK17IoEWslXQmgfi1z7nEpDAEAGFbQikZSRwI8B7Z4jaVWfmrUhfKhLYTEBh2wzY8kcRiKB1N5Y5QgYIRA+LXysBCQwRUNiGQFpGAjcCq7ABJX66N2wLIHFaCUhggIDCNgDREhJ4JcCtyAZCZ7bajnEuAQkMElDYBmFa6ngCEbb827V0ZXRmgZI5IwLHgU8rAQkMElDYBmFa6ngCCFYErr9Si24tgJhjj4cmAAlME1DYpola72QCESveO+NbRx7xUNgekdEvgScJKGxPAjRdAkUgYsXRtx8TEv/qi98hAQkME1DYhoFa7mgCES86tsyvBn7sVYw+CUjgCQIK2xPwTJXAQgBhozNDvFgjelmzt5RwKQEJPEtAYXuWoPkS+EYgwhXBQrQQsKyZJ7pjsnZIQAKDBBS2QZiWOp5ACxZiFiiP5scDE4AEdhBQ2HZQteapBCJgfbvxrXliHRKQwAYCCtsGqJY8lkDECsFi3rcgA6b3jwXlhUtgJwGFbSdda59GIP92rbs0xG3lsIrduu9aAhJ4goDC9gQ8UyWwEIiQRdzyrSN0ZkvIyzIxb+1f5eiTgAR+kIDC9oOgDJPADxCgQ+NbR1aBazHr+Q+UNkQCEvhRAgrbj5IyTgLfJ4CwxeZ24z9eU7j1iI1bYXuFo5HANAGFbZqo9U4mELHiPbYWLubYMOr5ycy8dgmME1DYxpFa8GACEasIG51ZbEaLGL77jo8SkMA4AYVtHKkFDyYQUYuIIWTYRoIP23vOJSCBAQIK2wBES0jglUDEahWsrOngEkbHtsZlzyEBCQwQUNgGIFpCAq8EIlZ9KxIwq4hlvfqI1UpAAk8SUNieBGi6BIoAgoW41daLkHXn1nvOJSCBQQIK2yBMSx1PIIKWI+OtjgwBvEf6KAEJjBJQ2EZxWuxwAqtgIW68r4boZc38cGRevgTmCShs80yteC6BfONIDoSMW48RuJ6fS8grl8AHEFDYPgCypziGAB1bd2P5Wi3WiFuA0M0dA8cLlcBHEVDYPoq05zmFACLG9fK9kVm3mPWcWK0EJDBAQGEbgGgJCbwSiKjRtdGdxTIQM/bwayUggUECCtsgTEsdTyDCxXtsiBg2cDJX1ELCIYGNBBS2jXAtfRwBRCy2Ray7Nm5VEnscJC9YArsJKGy7CVv/JAIRK4Qr1414YWFh1wYJrQQ2EFDYNkC15LEEImAcLV7dsWW/946F5YVLYBcBhW0XWeueSCDdGh1bd2k9DxfE70RGXrMEthNQ2LYj9gQHEYhgRdjoyK46tYNweKkS+DUEFLZfw92zfk4C+UQk3VhEje6Nq6Vz686OPa0EJDBEQGEbAmkZCdwI0LHF5htHMjLvDg6xQ+RegnyQgATmCChscyytJIEQ4N+x0b1d3Y5U1HytSGAjAYVtI1xLH0eAbgxLpxYQiFl3cMcB8oIl8BEEFLaPoOw5TiEQ0aJjyzUjZuv1x/9ob411LQEJ/CQBhe0ngRkugTcIrIKFeHXnlvR1/UZJtyQggZ8loLD9LDHjJfCYQG5BruKWaASOzHWNXysBCQwQUNgGIFpCAq8EELVHwtWd2qMYYUpAAk8SUNieBGi6BIpAxIoPjpT767TFrOdfA5xIQALPE1DYnmdoBQlAIGLFQXcWy0DM2MOvlYAEBgkobIMwLXU8gQhXd2yI3ArmkX+Ncy0BCbyDgML2DmimSOABgXzUP0e+dSQCR2e2dm0K2w2OQwK7CChsu8ha90QCCNY/bhePmCFudHL4E+uQgAQ2EFDYNkC15NEEELBAQLwQt/YdDcmLl8BOAgrbTrrWPo1ARK1vQXL97UPkED1itBKQwBABhW0IpGUkcCPArUhECxELHHzMex2fQwISGCKgsA2BtIwEbgTSmSFuiFrWmTPYV9ggopXAMAGFbRio5Y4msIpWi1fPj4bkxUtgNwGFbTdh659EIOKVri0DkaNzu3u/PSp031g4k8AoAYVtFKfFDieAmCFaLWr4gqj9hyPz8iUwT0Bhm2dqxXMJRLzo2EKhxaypxP9or+OcS0AC7yCgsL0DmikSeEAg3zrCR/sTgnitHdq6flBOtwQk8B4CCtt7qJkjgWsCETI+GZmv1WIgcFlnzsG+VgISGCSgsA3CtNTxBBC2gEj35pCABH4BAYXtF0D3lJ+WAN1aBC63GzOYY/H1e3EvgT5IQAIzBBS2GY5WkQAEImAc7cs8fkbP8WklIIEBAgrbAERLSOCVQMSKW5DdsWWbD4ys/tdUjQQkMEVAYZsiaR0JfPvgSFhE5BAz2MRnpwYNrQQ2EVDYNoG17JEE1vfYELIIHO+p2bEd+dLwoj+SgML2kbQ91wkEELBca3dnzLEnsPAaJfBLCChsvwS7J/2kBCJaEbb1FmT72FPgPumLwMv69QQUtl//M/AZfB4CESsEKxYRyxXiZ97r+BwSkMAQAYVtCKRlJHAjkE9ERrAQLea8rxZI+PqWZfwOCUhgiIDCNgTSMhK4EYho8XH/ALkStPgdEpDARgIK20a4lj6OQLqwfj+tAXBbEktX1zHOJSCBAQIK2wBES0igCHCrsVwvU4RstWucawlI4EkCCtuTAE2XQBG46tjo0LwtWaCcSmAnAYVtJ11rn0agu7W1M2N9GhOvVwIfTkBh+3DknvATE0DYeJ/t0aUmLjEOCUhgAwGFbQNUSx5LoAXLDu3Yl4EX/qsJKGy/+ifg+T8TgXRhdG28p5b1+j4bMZ/p2r0WCfw2BBS23+ZH4RP5BAQQLGwuKaLGrcm+/ZgYhwQksIGAwrYBqiWPJRCxyj/QplsLCEQNseu97DskIIFhAgrbMFDLHU0gIpbj77cjQsYtSOY318s+cVk7JCCBYQIK2zBQyx1NIIIVEfvHKwWEraHQsSXOIQEJbCCgsG2AasmjCUTcGJkjZPgUNEhoJbCJgMK2CaxljySw3mKkY+NWZFsF7siXiBf9EQQUto+g7DlOIRCxasG6muPDnsLG65TAhxFQ2D4MtSc6gEDEioNuLZfdtyMRNOwBWLxECXwsAYXtY3l7ts9NIGLFe2wtXD3/3AS8Ogn8BgQUtt/gh+BT+DQEELa1W4sfH1ax+zQ/di/kdyOgsP1uPxGfz1+ZQLq1CNYqWu1jD/tXvl6fuwR+SwIK22/5Y/FJ/UUJRKz6I/5Z06HFMuJX2KChlcAwAYVtGKjljieAYD2yAGKftVYCEhgioLANgbSMBG4E8o0j/E7la7XWwQdL4lfYVjquJTBEgF/CoXKWkcDxBBCsiBy3H+Nb58QdD0wAEpgmoLBNE7XeyQTSkdGV8d4aotZ+5iez8tolsI2AwrYNrYUPJBARoxPDBsPVvH0HovKSJbCPgMK2j62VzyMQsaIbo2O7ovDW3lW8PglI4CcIKGw/ActQCXyHQISNTgx7ldJxV/v6JCCBJwgobE/AM1UCC4F0ay1adGbYhGee8Zbw3SN8lIAE3kVAYXsXNpMkcEkgYsWtyAQgXtj2Ze6QgAQ2EFDYNkC15LEEEDY6tO7O2pe4FrtjgXnhEthBQGHbQdWapxJAsFq0mGPDhrhTOXndEthKQGHbitfihxH45+168zsV4UqHxm1JOreb68WnsIWEQwKbCChsm8Ba9lgCEbceiFxsBiLH+u71UQISGCOgsI2htJAEXrqxdGm8nwaSVcSyXn3EaiUggScJKGxPAjRdAkUAwULcauvr7UkEDdsxziUggQECCtsAREtI4JVAxIr31d4Sruy9tS9QCUjgCQIK2xPwTJXAQmAVLMSL99UQPdZLuksJSGCCgMI2QdEaErgTWG9B8l5bBI55IlcBvGf7KAEJjBBQ2EYwWkQCLwRasBCzbFzN43NIQAIbCChsG6Ba8lgCCBtCxjrdWt+GZH4sKC9cAjsJKGw76Vr7NAIRMkQrc8bVvH3EaSUggQECCtsAREtI4JVAC1u/p7YCemtvjXUtAQn8JAGF7SeBGS6BNwjkW0f+/rof8boaVx3dVZw+CUjgnQQUtneCM00CFwS6Y7vY/uqyY/uKwokE5gkobPNMrXguAd43i23x6u5t3TuXllcugU0EFLZNYC17JIGIVosbEPD1evWxp5WABJ4koLA9CdB0CRQBhI1u7apTq3CnEpDADgIK2w6q1jyVQH8wJKLGunnYqTUN5xLYQEBh2wDVkscSaNF6mf/xxx9fbuNm7vZYMl64BCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQn8NQn8fyHnyuSABiy2AAAAAElFTkSuQmCC";function t$f(cr,vn){const yn=Math.round(cr);return yn%2===0?yn:yn+(vn!=null&&vn.floor?-1:1)}var c$K=Object.defineProperty,m$A=(cr,vn,yn)=>vn in cr?c$K(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$E=(cr,vn,yn)=>(m$A(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class p$B extends Mesh{constructor(vn,yn){const Rn=new MeshBasicMaterial({opacity:0,color:0,transparent:!1,side:DoubleSide}),Bn=new PlaneGeometry(vn,yn);super(Bn,Rn),o$E(this,"name","opacity-mesh")}removeFromParent(){const vn=this.parent;return vn!==null&&vn.remove(this),this}}function c$J(...cr){const vn=new Vector3;return cr.forEach(yn=>vn.add(yn)),vn.divideScalar(cr.length),vn}const r$D=cr=>cr?cr.visible===!1?!1:r$D(cr.parent):!0;var c$I=function(cr){Object3D.call(this),this.element=cr,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(vn){vn.element instanceof Element&&vn.element.parentNode!==null&&vn.element.remove()})})};c$I.prototype=Object.create(Object3D.prototype);c$I.prototype.constructor=c$I;var C$p=function(cr){c$I.call(this,cr)};C$p.prototype=Object.create(c$I.prototype);C$p.prototype.constructor=C$p;let I$q=function(cr){let vn=this,yn,Rn,Bn,Co,Po=new Matrix4,To={camera:{fov:0,style:""},objects:new Map},Io=document.createElement("div");Io.style.overflow="hidden",this.domElement=Io;let $l=document.createElement("div");$l.style.WebkitTransformStyle="preserve-3d",$l.style.transformStyle="preserve-3d",$l.style.pointerEvents="none",Io.appendChild($l),this.getSize=function(){return{width:yn,height:Rn}},this.setSize=function(Rm,ry){yn=Rm,Rn=ry,Bn=yn/2,Co=Rn/2,Io.style.width=Rm+"px",Io.style.height=ry+"px",$l.style.width=Rm+"px",$l.style.height=ry+"px"};function Wl(Rm){return Math.abs(Rm)<1e-10?0:Rm}function Xl(Rm){let ry=Rm.elements;return"matrix3d("+Wl(ry[0])+","+Wl(-ry[1])+","+Wl(ry[2])+","+Wl(ry[3])+","+Wl(ry[4])+","+Wl(-ry[5])+","+Wl(ry[6])+","+Wl(ry[7])+","+Wl(ry[8])+","+Wl(-ry[9])+","+Wl(ry[10])+","+Wl(ry[11])+","+Wl(ry[12])+","+Wl(-ry[13])+","+Wl(ry[14])+","+Wl(ry[15])+")"}function Yl(Rm,ry){let _g=Rm.elements;return"translate(-50%,-50%)"+("matrix3d("+Wl(_g[0])+","+Wl(_g[1])+","+Wl(_g[2])+","+Wl(_g[3])+","+Wl(-_g[4])+","+Wl(-_g[5])+","+Wl(-_g[6])+","+Wl(-_g[7])+","+Wl(_g[8])+","+Wl(_g[9])+","+Wl(_g[10])+","+Wl(_g[11])+","+Wl(_g[12])+","+Wl(_g[13])+","+Wl(_g[14])+","+Wl(_g[15])+")")}function Zl(Rm){var ry;if(Rm.isCSS3DObject){const _g=(ry=Rm.mode)!=null?ry:"front";(!cr||_g===cr)&&(Rm.element.style.display="none")}for(let _g=0,ty=Rm.children.length;_g<ty;_g++)Zl(Rm.children[_g])}function ey(Rm,ry,_g,ty,ny){var iy;if(Rm.visible===!1){Zl(Rm);return}if(Rm.isCSS3DObject){const oy=(iy=Rm.mode)!=null?iy:"front";if(cr&&oy!==cr)return;Rm.flag=ny;const ay=Rm.layers.test(_g.layers)===!0,uy=Rm.element;if(uy.style.display=ay===!0?"":"none",ay){Rm.onBeforeRender(vn,ry,_g);let hy;Rm.isCSS3DSprite?(Po.copy(_g.matrixWorldInverse),Po.transpose(),Po.copyPosition(Rm.matrixWorld),Po.scale(Rm.scale),Po.elements[3]=0,Po.elements[7]=0,Po.elements[11]=0,Po.elements[15]=1,hy=Yl(Po)):hy=Yl(Rm.matrixWorld);let my=To.objects.get(Rm);if(my===void 0||my.style!==hy){uy.style.WebkitTransform=hy,uy.style.transform=hy;let ly={style:hy};To.objects.set(Rm,ly)}uy.style.display=Rm.visible?"":"none",uy.parentNode!==$l&&$l.appendChild(uy),Rm.onAfterRender(vn,ry,_g)}}for(let oy=0,ay=Rm.children.length;oy<ay;oy++)ey(Rm.children[oy],ry,_g,ty,ny)}this.render=function(Rm,ry){let _g=ry.projectionMatrix.elements[5]*Co;if(To.camera.fov!==_g&&(ry.isPerspectiveCamera?(Io.style.WebkitPerspective=_g+"px",Io.style.perspective=_g+"px"):(Io.style.WebkitPerspective="",Io.style.perspective=""),To.camera.fov=_g),Rm.autoUpdate===!0&&Rm.updateMatrixWorld(),ry.parent===null&&ry.updateMatrixWorld(),ry.isOrthographicCamera)var ty=-(ry.right+ry.left)/2,ny=(ry.top+ry.bottom)/2;let iy=ry.isOrthographicCamera?"scale("+_g+")translate("+Wl(ty)+"px,"+Wl(ny)+"px)"+Xl(ry.matrixWorldInverse):"translateZ("+_g+"px)"+Xl(ry.matrixWorldInverse),oy=iy+"translate("+Bn+"px,"+Co+"px)";To.camera.style!==oy&&($l.style.WebkitTransform=oy,$l.style.transform=oy,To.camera.style=oy);const ay=Rm.uuid+"_"+performance.now().toString();ey(Rm,Rm,ry,iy,ay),To.objects.forEach(function(uy,hy){hy.flag!==ay&&(hy.element.remove(),To.objects.delete(hy))})}};const e$h=document.createElement("div");e$h.classList.add("behindFiveElement");e$h.style.position="absolute";e$h.style.top="0";e$h.style.left="0";e$h.style.width="100%";e$h.style.height="100%";e$h.style.pointerEvents="none";function d$D(cr){var vn,yn,Rn,Bn,Co;const Po=(Co=(yn=c$H(cr.getElement()))!=null?yn:c$H((vn=cr.getElement())==null?void 0:vn.parentElement))!=null?Co:c$H((Bn=(Rn=cr.getElement())==null?void 0:Rn.parentElement)==null?void 0:Bn.parentElement),To=Po==null?void 0:Po.parentElement;if(To)return To.contains(e$h)||Po.parentElement.insertBefore(e$h,Po),e$h;console.error("Can not find a valid element to insert behindFiveElement. How to fix it: https://github.com/realsee-developer/dnalogel/tree/main/plugins/src/CSS3DRenderPlugin/README.md")}function c$H(cr){var vn;if(!cr)return;const yn=(vn=cr.style.position)!=null?vn:getComputedStyle(cr).position;if(yn!=="fixed"&&yn!=="absolute"&&yn!=="relative")return;const Rn=getComputedStyle(cr),Bn=Rn.backgroundColor,Co=Rn.backgroundImage;if(!(Bn!=="transparent"&&Bn!=="rgba(0, 0, 0, 0)"&&Bn!==""||Co!=="none"&&Co!==""))return cr}function t$e(cr){return!i$w(cr)}function i$w(cr){return cr!=null}var o$D=Object.defineProperty,c$G=(cr,vn,yn)=>vn in cr?o$D(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$A=(cr,vn,yn)=>(c$G(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const s$p={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,{linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) < dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class l$v extends ShaderMaterial{constructor(vn){super({uniforms:UniformsUtils.clone(s$p.uniforms),vertexShader:s$p.vertexShader,fragmentShader:s$p.fragmentShader,clipping:!0}),a$A(this,"color"),a$A(this,"dashed"),a$A(this,"dashScale"),a$A(this,"dashSize"),a$A(this,"gapSize"),a$A(this,"resolution"),this.type="LineMaterial",this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get(){return this.uniforms.diffuse.value},set(yn){this.uniforms.diffuse.value=yn}},linewidth:{enumerable:!0,get(){return this.uniforms.linewidth.value},set(yn){this.uniforms.linewidth.value=yn}},dashScale:{enumerable:!0,get(){return this.uniforms.dashScale.value},set(yn){this.uniforms.dashScale.value=yn}},dashSize:{enumerable:!0,get(){return this.uniforms.dashSize.value},set(yn){this.uniforms.dashSize.value=yn}},gapSize:{enumerable:!0,get(){return this.uniforms.gapSize.value},set(yn){this.uniforms.gapSize.value=yn}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(yn){this.uniforms.opacity.value=yn}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(yn){this.uniforms.resolution.value.copy(yn)}}}),this.setValues(vn)}}Object.assign(l$v.prototype,{isLineMaterial:!0});const t$d=new Vector3;class c$F extends Sphere{expandByPoint(vn){if(this.isEmpty())return this.center.copy(vn),this.radius=0,this;t$d.subVectors(vn,this.center);const yn=t$d.lengthSq();if(yn>this.radius*this.radius){const Rn=Math.sqrt(yn),Bn=(Rn-this.radius)*.5;this.center.addScaledVector(t$d,Bn/Rn),this.radius+=Bn}return this}}var pr={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Y$f={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Fr=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],U$g={CSS:{},springs:{}};function D$q(cr,vn,yn){return Math.min(Math.max(cr,vn),yn)}function R$n(cr,vn){return cr.indexOf(vn)>-1}function K$j(cr,vn){return cr.apply(null,vn)}var c$E={arr:function(cr){return Array.isArray(cr)},obj:function(cr){return R$n(Object.prototype.toString.call(cr),"Object")},pth:function(cr){return c$E.obj(cr)&&cr.hasOwnProperty("totalLength")},svg:function(cr){return cr instanceof SVGElement},inp:function(cr){return cr instanceof HTMLInputElement},dom:function(cr){return cr.nodeType||c$E.svg(cr)},str:function(cr){return typeof cr=="string"},fnc:function(cr){return typeof cr=="function"},und:function(cr){return typeof cr=="undefined"},nil:function(cr){return c$E.und(cr)||cr===null},hex:function(cr){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(cr)},rgb:function(cr){return/^rgb/.test(cr)},hsl:function(cr){return/^hsl/.test(cr)},col:function(cr){return c$E.hex(cr)||c$E.rgb(cr)||c$E.hsl(cr)},key:function(cr){return!pr.hasOwnProperty(cr)&&!Y$f.hasOwnProperty(cr)&&cr!=="targets"&&cr!=="keyframes"}};function mr(cr){var vn=/\(([^)]+)\)/.exec(cr);return vn?vn[1].split(",").map(function(yn){return parseFloat(yn)}):[]}function yr(cr,vn){var yn=mr(cr),Rn=D$q(c$E.und(yn[0])?1:yn[0],.1,100),Bn=D$q(c$E.und(yn[1])?100:yn[1],.1,100),Co=D$q(c$E.und(yn[2])?10:yn[2],.1,100),Po=D$q(c$E.und(yn[3])?0:yn[3],.1,100),To=Math.sqrt(Bn/Rn),Io=Co/(2*Math.sqrt(Bn*Rn)),$l=Io<1?To*Math.sqrt(1-Io*Io):0,Wl=1,Xl=Io<1?(Io*To+-Po)/$l:-Po+To;function Yl(ey){var Rm=vn?vn*ey/1e3:ey;return Io<1?Rm=Math.exp(-Rm*Io*To)*(Wl*Math.cos($l*Rm)+Xl*Math.sin($l*Rm)):Rm=(Wl+Xl*Rm)*Math.exp(-Rm*To),ey===0||ey===1?ey:1-Rm}function Zl(){var ey=U$g.springs[cr];if(ey)return ey;for(var Rm=1/6,ry=0,_g=0;;)if(ry+=Rm,Yl(ry)===1){if(_g++,_g>=16)break}else _g=0;var ty=ry*Rm*1e3;return U$g.springs[cr]=ty,ty}return vn?Yl:Zl}function Vr(cr){return cr===void 0&&(cr=10),function(vn){return Math.ceil(D$q(vn,1e-6,1)*cr)*(1/cr)}}var jr=function(){var cr=11,vn=1/(cr-1);function yn(Wl,Xl){return 1-3*Xl+3*Wl}function Rn(Wl,Xl){return 3*Xl-6*Wl}function Bn(Wl){return 3*Wl}function Co(Wl,Xl,Yl){return((yn(Xl,Yl)*Wl+Rn(Xl,Yl))*Wl+Bn(Xl))*Wl}function Po(Wl,Xl,Yl){return 3*yn(Xl,Yl)*Wl*Wl+2*Rn(Xl,Yl)*Wl+Bn(Xl)}function To(Wl,Xl,Yl,Zl,ey){var Rm,ry,_g=0;do ry=Xl+(Yl-Xl)/2,Rm=Co(ry,Zl,ey)-Wl,Rm>0?Yl=ry:Xl=ry;while(Math.abs(Rm)>1e-7&&++_g<10);return ry}function Io(Wl,Xl,Yl,Zl){for(var ey=0;ey<4;++ey){var Rm=Po(Xl,Yl,Zl);if(Rm===0)return Xl;var ry=Co(Xl,Yl,Zl)-Wl;Xl-=ry/Rm}return Xl}function $l(Wl,Xl,Yl,Zl){if(!(0<=Wl&&Wl<=1&&0<=Yl&&Yl<=1))return;var ey=new Float32Array(cr);if(Wl!==Xl||Yl!==Zl)for(var Rm=0;Rm<cr;++Rm)ey[Rm]=Co(Rm*vn,Wl,Yl);function ry(_g){for(var ty=0,ny=1,iy=cr-1;ny!==iy&&ey[ny]<=_g;++ny)ty+=vn;--ny;var oy=(_g-ey[ny])/(ey[ny+1]-ey[ny]),ay=ty+oy*vn,uy=Po(ay,Wl,Yl);return uy>=.001?Io(_g,ay,Wl,Yl):uy===0?ay:To(_g,ty,ty+vn,Wl,Yl)}return function(_g){return Wl===Xl&&Yl===Zl||_g===0||_g===1?_g:Co(ry(_g),Xl,Zl)}}return $l}(),br=function(){var cr={linear:function(){return function(Rn){return Rn}}},vn={Sine:function(){return function(Rn){return 1-Math.cos(Rn*Math.PI/2)}},Expo:function(){return function(Rn){return Rn?Math.pow(2,10*Rn-10):0}},Circ:function(){return function(Rn){return 1-Math.sqrt(1-Rn*Rn)}},Back:function(){return function(Rn){return Rn*Rn*(3*Rn-2)}},Bounce:function(){return function(Rn){for(var Bn,Co=4;Rn<((Bn=Math.pow(2,--Co))-1)/11;);return 1/Math.pow(4,3-Co)-7.5625*Math.pow((Bn*3-2)/22-Rn,2)}},Elastic:function(Rn,Bn){Rn===void 0&&(Rn=1),Bn===void 0&&(Bn=.5);var Co=D$q(Rn,1,10),Po=D$q(Bn,.1,2);return function(To){return To===0||To===1?To:-Co*Math.pow(2,10*(To-1))*Math.sin((To-1-Po/(Math.PI*2)*Math.asin(1/Co))*(Math.PI*2)/Po)}}},yn=["Quad","Cubic","Quart","Quint"];return yn.forEach(function(Rn,Bn){vn[Rn]=function(){return function(Co){return Math.pow(Co,Bn+2)}}}),Object.keys(vn).forEach(function(Rn){var Bn=vn[Rn];cr["easeIn"+Rn]=Bn,cr["easeOut"+Rn]=function(Co,Po){return function(To){return 1-Bn(Co,Po)(1-To)}},cr["easeInOut"+Rn]=function(Co,Po){return function(To){return To<.5?Bn(Co,Po)(To*2)/2:1-Bn(Co,Po)(To*-2+2)/2}},cr["easeOutIn"+Rn]=function(Co,Po){return function(To){return To<.5?(1-Bn(Co,Po)(1-To*2))/2:(Bn(Co,Po)(To*2-1)+1)/2}}}),cr}();function G$g(cr,vn){if(c$E.fnc(cr))return cr;var yn=cr.split("(")[0],Rn=br[yn],Bn=mr(cr);switch(yn){case"spring":return yr(cr,vn);case"cubicBezier":return K$j(jr,Bn);case"steps":return K$j(Vr,Bn);default:return K$j(Rn,Bn)}}function xr(cr){try{var vn=document.querySelectorAll(cr);return vn}catch{return}}function W$g(cr,vn){for(var yn=cr.length,Rn=arguments.length>=2?arguments[1]:void 0,Bn=[],Co=0;Co<yn;Co++)if(Co in cr){var Po=cr[Co];vn.call(Rn,Po,Co,cr)&&Bn.push(Po)}return Bn}function q$o(cr){return cr.reduce(function(vn,yn){return vn.concat(c$E.arr(yn)?q$o(yn):yn)},[])}function lr(cr){return c$E.arr(cr)?cr:(c$E.str(cr)&&(cr=xr(cr)||cr),cr instanceof NodeList||cr instanceof HTMLCollection?[].slice.call(cr):[cr])}function X$b(cr,vn){return cr.some(function(yn){return yn===vn})}function rr$1(cr){var vn={};for(var yn in cr)vn[yn]=cr[yn];return vn}function _$j(cr,vn){var yn=rr$1(cr);for(var Rn in cr)yn[Rn]=vn.hasOwnProperty(Rn)?vn[Rn]:cr[Rn];return yn}function N$h(cr,vn){var yn=rr$1(cr);for(var Rn in vn)yn[Rn]=c$E.und(cr[Rn])?vn[Rn]:cr[Rn];return yn}function zr(cr){var vn=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(cr);return vn?"rgba("+vn[1]+",1)":cr}function Rr(cr){var vn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yn=cr.replace(vn,function(To,Io,$l,Wl){return Io+Io+$l+$l+Wl+Wl}),Rn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(yn),Bn=parseInt(Rn[1],16),Co=parseInt(Rn[2],16),Po=parseInt(Rn[3],16);return"rgba("+Bn+","+Co+","+Po+",1)"}function Hr(cr){var vn=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(cr)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(cr),yn=parseInt(vn[1],10)/360,Rn=parseInt(vn[2],10)/100,Bn=parseInt(vn[3],10)/100,Co=vn[4]||1;function Po(Yl,Zl,ey){return ey<0&&(ey+=1),ey>1&&(ey-=1),ey<1/6?Yl+(Zl-Yl)*6*ey:ey<1/2?Zl:ey<2/3?Yl+(Zl-Yl)*(2/3-ey)*6:Yl}var To,Io,$l;if(Rn==0)To=Io=$l=Bn;else{var Wl=Bn<.5?Bn*(1+Rn):Bn+Rn-Bn*Rn,Xl=2*Bn-Wl;To=Po(Xl,Wl,yn+1/3),Io=Po(Xl,Wl,yn),$l=Po(Xl,Wl,yn-1/3)}return"rgba("+To*255+","+Io*255+","+$l*255+","+Co+")"}function Ur(cr){if(c$E.rgb(cr))return zr(cr);if(c$E.hex(cr))return Rr(cr);if(c$E.hsl(cr))return Hr(cr)}function O$k(cr){var vn=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(cr);if(vn)return vn[1]}function Wr$1(cr){if(R$n(cr,"translate")||cr==="perspective")return"px";if(R$n(cr,"rotate")||R$n(cr,"skew"))return"deg"}function J$k(cr,vn){return c$E.fnc(cr)?cr(vn.target,vn.id,vn.total):cr}function k$n(cr,vn){return cr.getAttribute(vn)}function er(cr,vn,yn){var Rn=O$k(vn);if(X$b([yn,"deg","rad","turn"],Rn))return vn;var Bn=U$g.CSS[vn+yn];if(!c$E.und(Bn))return Bn;var Co=100,Po=document.createElement(cr.tagName),To=cr.parentNode&&cr.parentNode!==document?cr.parentNode:document.body;To.appendChild(Po),Po.style.position="absolute",Po.style.width=Co+yn;var Io=Co/Po.offsetWidth;To.removeChild(Po);var $l=Io*parseFloat(vn);return U$g.CSS[vn+yn]=$l,$l}function Mr(cr,vn,yn){if(vn in cr.style){var Rn=vn.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Bn=cr.style[vn]||getComputedStyle(cr).getPropertyValue(Rn)||"0";return yn?er(cr,Bn,yn):Bn}}function nr(cr,vn){if(c$E.dom(cr)&&!c$E.inp(cr)&&(!c$E.nil(k$n(cr,vn))||c$E.svg(cr)&&cr[vn]))return"attribute";if(c$E.dom(cr)&&X$b(Fr,vn))return"transform";if(c$E.dom(cr)&&vn!=="transform"&&Mr(cr,vn))return"css";if(cr[vn]!=null)return"object"}function Tr$1(cr){if(c$E.dom(cr)){for(var vn=cr.style.transform||"",yn=/(\w+)\(([^)]*)\)/g,Rn=new Map,Bn;Bn=yn.exec(vn);)Rn.set(Bn[1],Bn[2]);return Rn}}function qr$1(cr,vn,yn,Rn){var Bn=R$n(vn,"scale")?1:0+Wr$1(vn),Co=Tr$1(cr).get(vn)||Bn;return yn&&(yn.transforms.list.set(vn,Co),yn.transforms.last=vn),Rn?er(cr,Co,Rn):Co}function tr(cr,vn,yn,Rn){switch(nr(cr,vn)){case"transform":return qr$1(cr,vn,Rn,yn);case"css":return Mr(cr,vn,yn);case"attribute":return k$n(cr,vn);default:return cr[vn]||0}}function ar(cr,vn){var yn=/^(\*=|\+=|-=)/.exec(cr);if(!yn)return cr;var Rn=O$k(cr)||0,Bn=parseFloat(vn),Co=parseFloat(cr.replace(yn[0],""));switch(yn[0][0]){case"+":return Bn+Co+Rn;case"-":return Bn-Co+Rn;case"*":return Bn*Co+Rn}}function wr$1(cr,vn){if(c$E.col(cr))return Ur(cr);if(/\s/g.test(cr))return cr;var yn=O$k(cr),Rn=yn?cr.substr(0,cr.length-yn.length):cr;return vn?Rn+vn:Rn}function ir(cr,vn){return Math.sqrt(Math.pow(vn.x-cr.x,2)+Math.pow(vn.y-cr.y,2))}function Nr(cr){return Math.PI*2*k$n(cr,"r")}function Zr(cr){return k$n(cr,"width")*2+k$n(cr,"height")*2}function $r$1(cr){return ir({x:k$n(cr,"x1"),y:k$n(cr,"y1")},{x:k$n(cr,"x2"),y:k$n(cr,"y2")})}function Pr(cr){for(var vn=cr.points,yn=0,Rn,Bn=0;Bn<vn.numberOfItems;Bn++){var Co=vn.getItem(Bn);Bn>0&&(yn+=ir(Rn,Co)),Rn=Co}return yn}function Qr(cr){var vn=cr.points;return Pr(cr)+ir(vn.getItem(vn.numberOfItems-1),vn.getItem(0))}function Ir(cr){if(cr.getTotalLength)return cr.getTotalLength();switch(cr.tagName.toLowerCase()){case"circle":return Nr(cr);case"rect":return Zr(cr);case"line":return $r$1(cr);case"polyline":return Pr(cr);case"polygon":return Qr(cr)}}function Kr(cr){var vn=Ir(cr);return cr.setAttribute("stroke-dasharray",vn),vn}function _r(cr){for(var vn=cr.parentNode;c$E.svg(vn)&&c$E.svg(vn.parentNode);)vn=vn.parentNode;return vn}function Cr(cr,vn){var yn=vn||{},Rn=yn.el||_r(cr),Bn=Rn.getBoundingClientRect(),Co=k$n(Rn,"viewBox"),Po=Bn.width,To=Bn.height,Io=yn.viewBox||(Co?Co.split(" "):[0,0,Po,To]);return{el:Rn,viewBox:Io,x:Io[0]/1,y:Io[1]/1,w:Po,h:To,vW:Io[2],vH:Io[3]}}function Jr$1(cr,vn){var yn=c$E.str(cr)?xr(cr)[0]:cr,Rn=vn||100;return function(Bn){return{property:Bn,el:yn,svg:Cr(yn),totalLength:Ir(yn)*(Rn/100)}}}function Yr(cr,vn,yn){function Rn(Wl){Wl===void 0&&(Wl=0);var Xl=vn+Wl>=1?vn+Wl:0;return cr.el.getPointAtLength(Xl)}var Bn=Cr(cr.el,cr.svg),Co=Rn(),Po=Rn(-1),To=Rn(1),Io=yn?1:Bn.w/Bn.vW,$l=yn?1:Bn.h/Bn.vH;switch(cr.property){case"x":return(Co.x-Bn.x)*Io;case"y":return(Co.y-Bn.y)*$l;case"angle":return Math.atan2(To.y-Po.y,To.x-Po.x)*180/Math.PI}}function vr(cr,vn){var yn=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Rn=wr$1(c$E.pth(cr)?cr.totalLength:cr,vn)+"";return{original:Rn,numbers:Rn.match(yn)?Rn.match(yn).map(Number):[0],strings:c$E.str(cr)||vn?Rn.split(yn):[]}}function ur(cr){var vn=cr?q$o(c$E.arr(cr)?cr.map(lr):lr(cr)):[];return W$g(vn,function(yn,Rn,Bn){return Bn.indexOf(yn)===Rn})}function Dr(cr){var vn=ur(cr);return vn.map(function(yn,Rn){return{target:yn,id:Rn,total:vn.length,transforms:{list:Tr$1(yn)}}})}function Gr(cr,vn){var yn=rr$1(vn);if(/^spring/.test(yn.easing)&&(yn.duration=yr(yn.easing)),c$E.arr(cr)){var Rn=cr.length,Bn=Rn===2&&!c$E.obj(cr[0]);Bn?cr={value:cr}:c$E.fnc(vn.duration)||(yn.duration=vn.duration/Rn)}var Co=c$E.arr(cr)?cr:[cr];return Co.map(function(Po,To){var Io=c$E.obj(Po)&&!c$E.pth(Po)?Po:{value:Po};return c$E.und(Io.delay)&&(Io.delay=To?0:vn.delay),c$E.und(Io.endDelay)&&(Io.endDelay=To===Co.length-1?vn.endDelay:0),Io}).map(function(Po){return N$h(Po,yn)})}function Xr(cr){for(var vn=W$g(q$o(cr.map(function(Co){return Object.keys(Co)})),function(Co){return c$E.key(Co)}).reduce(function(Co,Po){return Co.indexOf(Po)<0&&Co.push(Po),Co},[]),yn={},Rn=function(Co){var Po=vn[Co];yn[Po]=cr.map(function(To){var Io={};for(var $l in To)c$E.key($l)?$l==Po&&(Io.value=To[$l]):Io[$l]=To[$l];return Io})},Bn=0;Bn<vn.length;Bn++)Rn(Bn);return yn}function re$3(cr,vn){var yn=[],Rn=vn.keyframes;Rn&&(vn=N$h(Xr(Rn),vn));for(var Bn in vn)c$E.key(Bn)&&yn.push({name:Bn,tweens:Gr(vn[Bn],cr)});return yn}function ee$6(cr,vn){var yn={};for(var Rn in cr){var Bn=J$k(cr[Rn],vn);c$E.arr(Bn)&&(Bn=Bn.map(function(Co){return J$k(Co,vn)}),Bn.length===1&&(Bn=Bn[0])),yn[Rn]=Bn}return yn.duration=parseFloat(yn.duration),yn.delay=parseFloat(yn.delay),yn}function ne$6(cr,vn){var yn;return cr.tweens.map(function(Rn){var Bn=ee$6(Rn,vn),Co=Bn.value,Po=c$E.arr(Co)?Co[1]:Co,To=O$k(Po),Io=tr(vn.target,cr.name,To,vn),$l=yn?yn.to.original:Io,Wl=c$E.arr(Co)?Co[0]:$l,Xl=O$k(Wl)||O$k(Io),Yl=To||Xl;return c$E.und(Po)&&(Po=$l),Bn.from=vr(Wl,Yl),Bn.to=vr(ar(Po,Wl),Yl),Bn.start=yn?yn.end:0,Bn.end=Bn.start+Bn.delay+Bn.duration+Bn.endDelay,Bn.easing=G$g(Bn.easing,Bn.duration),Bn.isPath=c$E.pth(Co),Bn.isPathTargetInsideSVG=Bn.isPath&&c$E.svg(vn.target),Bn.isColor=c$E.col(Bn.from.original),Bn.isColor&&(Bn.round=1),yn=Bn,Bn})}var kr={css:function(cr,vn,yn){return cr.style[vn]=yn},attribute:function(cr,vn,yn){return cr.setAttribute(vn,yn)},object:function(cr,vn,yn){return cr[vn]=yn},transform:function(cr,vn,yn,Rn,Bn){if(Rn.list.set(vn,yn),vn===Rn.last||Bn){var Co="";Rn.list.forEach(function(Po,To){Co+=To+"("+Po+") "}),cr.style.transform=Co}}};function Or(cr,vn){var yn=Dr(cr);yn.forEach(function(Rn){for(var Bn in vn){var Co=J$k(vn[Bn],Rn),Po=Rn.target,To=O$k(Co),Io=tr(Po,Bn,To,Rn),$l=To||O$k(Io),Wl=ar(wr$1(Co,$l),Io),Xl=nr(Po,Bn);kr[Xl](Po,Bn,Wl,Rn.transforms,!0)}})}function te$5(cr,vn){var yn=nr(cr.target,vn.name);if(yn){var Rn=ne$6(vn,cr),Bn=Rn[Rn.length-1];return{type:yn,property:vn.name,animatable:cr,tweens:Rn,duration:Bn.end,delay:Rn[0].delay,endDelay:Bn.endDelay}}}function ae$3(cr,vn){return W$g(q$o(cr.map(function(yn){return vn.map(function(Rn){return te$5(yn,Rn)})})),function(yn){return!c$E.und(yn)})}function Er(cr,vn){var yn=cr.length,Rn=function(Co){return Co.timelineOffset?Co.timelineOffset:0},Bn={};return Bn.duration=yn?Math.max.apply(Math,cr.map(function(Co){return Rn(Co)+Co.duration})):vn.duration,Bn.delay=yn?Math.min.apply(Math,cr.map(function(Co){return Rn(Co)+Co.delay})):vn.delay,Bn.endDelay=yn?Bn.duration-Math.max.apply(Math,cr.map(function(Co){return Rn(Co)+Co.duration-Co.endDelay})):vn.endDelay,Bn}var dr=0;function ie$4(cr){var vn=_$j(pr,cr),yn=_$j(Y$f,cr),Rn=re$3(yn,cr),Bn=Dr(cr.targets),Co=ae$3(Bn,Rn),Po=Er(Co,yn),To=dr;return dr++,N$h(vn,{id:To,children:[],animatables:Bn,animations:Co,duration:Po.duration,delay:Po.delay,endDelay:Po.endDelay})}var C$o=[],Sr=function(){var cr;function vn(){!cr&&(!gr()||!x$t.suspendWhenDocumentHidden)&&C$o.length>0&&(cr=requestAnimationFrame(yn))}function yn(Bn){for(var Co=C$o.length,Po=0;Po<Co;){var To=C$o[Po];To.paused?(C$o.splice(Po,1),Co--):(To.tick(Bn),Po++)}cr=Po>0?requestAnimationFrame(yn):void 0}function Rn(){x$t.suspendWhenDocumentHidden&&(gr()?cr=cancelAnimationFrame(cr):(C$o.forEach(function(Bn){return Bn._onDocumentVisibility()}),Sr()))}return typeof document!="undefined"&&document.addEventListener("visibilitychange",Rn),vn}();function gr(){return!!document&&document.hidden}function x$t(cr){cr===void 0&&(cr={});var vn=0,yn=0,Rn=0,Bn,Co=0,Po=null;function To(ty){var ny=window.Promise&&new Promise(function(iy){return Po=iy});return ty.finished=ny,ny}var Io=ie$4(cr);To(Io);function $l(){var ty=Io.direction;ty!=="alternate"&&(Io.direction=ty!=="normal"?"normal":"reverse"),Io.reversed=!Io.reversed,Bn.forEach(function(ny){return ny.reversed=Io.reversed})}function Wl(ty){return Io.reversed?Io.duration-ty:ty}function Xl(){vn=0,yn=Wl(Io.currentTime)*(1/x$t.speed)}function Yl(ty,ny){ny&&ny.seek(ty-ny.timelineOffset)}function Zl(ty){if(Io.reversePlayback)for(var ny=Co;ny--;)Yl(ty,Bn[ny]);else for(var iy=0;iy<Co;iy++)Yl(ty,Bn[iy])}function ey(ty){for(var ny=0,iy=Io.animations,oy=iy.length;ny<oy;){var ay=iy[ny],uy=ay.animatable,hy=ay.tweens,my=hy.length-1,ly=hy[my];my&&(ly=W$g(hy,function(xy){return ty<xy.end})[0]||ly);for(var sy=D$q(ty-ly.start-ly.delay,0,ly.duration)/ly.duration,cy=isNaN(sy)?1:ly.easing(sy),fy=ly.to.strings,vy=ly.round,dy=[],Ay=ly.to.numbers.length,gy=void 0,wy=0;wy<Ay;wy++){var Cy=void 0,My=ly.to.numbers[wy],Py=ly.from.numbers[wy]||0;ly.isPath?Cy=Yr(ly.value,cy*My,ly.isPathTargetInsideSVG):Cy=Py+cy*(My-Py),vy&&(ly.isColor&&wy>2||(Cy=Math.round(Cy*vy)/vy)),dy.push(Cy)}var Dy=fy.length;if(!Dy)gy=dy[0];else{gy=fy[0];for(var qy=0;qy<Dy;qy++){fy[qy];var Xy=fy[qy+1],$y=dy[qy];isNaN($y)||(Xy?gy+=$y+Xy:gy+=$y+" ")}}kr[ay.type](uy.target,ay.property,gy,uy.transforms),ay.currentValue=gy,ny++}}function Rm(ty){Io[ty]&&!Io.passThrough&&Io[ty](Io)}function ry(){Io.remaining&&Io.remaining!==!0&&Io.remaining--}function _g(ty){var ny=Io.duration,iy=Io.delay,oy=ny-Io.endDelay,ay=Wl(ty);Io.progress=D$q(ay/ny*100,0,100),Io.reversePlayback=ay<Io.currentTime,Bn&&Zl(ay),!Io.began&&Io.currentTime>0&&(Io.began=!0,Rm("begin")),!Io.loopBegan&&Io.currentTime>0&&(Io.loopBegan=!0,Rm("loopBegin")),ay<=iy&&Io.currentTime!==0&&ey(0),(ay>=oy&&Io.currentTime!==ny||!ny)&&ey(ny),ay>iy&&ay<oy?(Io.changeBegan||(Io.changeBegan=!0,Io.changeCompleted=!1,Rm("changeBegin")),Rm("change"),ey(ay)):Io.changeBegan&&(Io.changeCompleted=!0,Io.changeBegan=!1,Rm("changeComplete")),Io.currentTime=D$q(ay,0,ny),Io.began&&Rm("update"),ty>=ny&&(yn=0,ry(),Io.remaining?(vn=Rn,Rm("loopComplete"),Io.loopBegan=!1,Io.direction==="alternate"&&$l()):(Io.paused=!0,Io.completed||(Io.completed=!0,Rm("loopComplete"),Rm("complete"),!Io.passThrough&&"Promise"in window&&(Po(),To(Io)))))}return Io.reset=function(){var ty=Io.direction;Io.passThrough=!1,Io.currentTime=0,Io.progress=0,Io.paused=!0,Io.began=!1,Io.loopBegan=!1,Io.changeBegan=!1,Io.completed=!1,Io.changeCompleted=!1,Io.reversePlayback=!1,Io.reversed=ty==="reverse",Io.remaining=Io.loop,Bn=Io.children,Co=Bn.length;for(var ny=Co;ny--;)Io.children[ny].reset();(Io.reversed&&Io.loop!==!0||ty==="alternate"&&Io.loop===1)&&Io.remaining++,ey(Io.reversed?Io.duration:0)},Io._onDocumentVisibility=Xl,Io.set=function(ty,ny){return Or(ty,ny),Io},Io.tick=function(ty){Rn=ty,vn||(vn=Rn),_g((Rn+(yn-vn))*x$t.speed)},Io.seek=function(ty){_g(Wl(ty))},Io.pause=function(){Io.paused=!0,Xl()},Io.play=function(){Io.paused&&(Io.completed&&Io.reset(),Io.paused=!1,C$o.push(Io),Xl(),Sr())},Io.reverse=function(){$l(),Io.completed=!Io.reversed,Xl()},Io.restart=function(){Io.reset(),Io.play()},Io.remove=function(ty){var ny=ur(ty);Lr(ny,Io)},Io.reset(),Io.autoplay&&Io.play(),Io}function hr(cr,vn){for(var yn=vn.length;yn--;)X$b(cr,vn[yn].animatable.target)&&vn.splice(yn,1)}function Lr(cr,vn){var yn=vn.animations,Rn=vn.children;hr(cr,yn);for(var Bn=Rn.length;Bn--;){var Co=Rn[Bn],Po=Co.animations;hr(cr,Po),!Po.length&&!Co.children.length&&Rn.splice(Bn,1)}!yn.length&&!Rn.length&&vn.pause()}function ue$4(cr){for(var vn=ur(cr),yn=C$o.length;yn--;){var Rn=C$o[yn];Lr(vn,Rn)}}function oe$2(cr,vn){vn===void 0&&(vn={});var yn=vn.direction||"normal",Rn=vn.easing?G$g(vn.easing):null,Bn=vn.grid,Co=vn.axis,Po=vn.from||0,To=Po==="first",Io=Po==="center",$l=Po==="last",Wl=c$E.arr(cr),Xl=parseFloat(Wl?cr[0]:cr),Yl=Wl?parseFloat(cr[1]):0,Zl=O$k(Wl?cr[1]:cr)||0,ey=vn.start||0+(Wl?Xl:0),Rm=[],ry=0;return function(_g,ty,ny){if(To&&(Po=0),Io&&(Po=(ny-1)/2),$l&&(Po=ny-1),!Rm.length){for(var iy=0;iy<ny;iy++){if(!Bn)Rm.push(Math.abs(Po-iy));else{var oy=Io?(Bn[0]-1)/2:Po%Bn[0],ay=Io?(Bn[1]-1)/2:Math.floor(Po/Bn[0]),uy=iy%Bn[0],hy=Math.floor(iy/Bn[0]),my=oy-uy,ly=ay-hy,sy=Math.sqrt(my*my+ly*ly);Co==="x"&&(sy=-my),Co==="y"&&(sy=-ly),Rm.push(sy)}ry=Math.max.apply(Math,Rm)}Rn&&(Rm=Rm.map(function(fy){return Rn(fy/ry)*ry})),yn==="reverse"&&(Rm=Rm.map(function(fy){return Co?fy<0?fy*-1:-fy:Math.abs(ry-fy)}))}var cy=Wl?(Yl-Xl)/ry:Xl;return ey+cy*(Math.round(Rm[ty]*100)/100)+Zl}}function fe$4(cr){cr===void 0&&(cr={});var vn=x$t(cr);return vn.duration=0,vn.add=function(yn,Rn){var Bn=C$o.indexOf(vn),Co=vn.children;Bn>-1&&C$o.splice(Bn,1);function Po(Yl){Yl.passThrough=!0}for(var To=0;To<Co.length;To++)Po(Co[To]);var Io=N$h(yn,_$j(Y$f,cr));Io.targets=Io.targets||cr.targets;var $l=vn.duration;Io.autoplay=!1,Io.direction=vn.direction,Io.timelineOffset=c$E.und(Rn)?$l:ar(Rn,$l),Po(vn),vn.seek(Io.timelineOffset);var Wl=x$t(Io);Po(Wl),Co.push(Wl);var Xl=Er(Co,cr);return vn.delay=Xl.delay,vn.endDelay=Xl.endDelay,vn.duration=Xl.duration,vn.seek(0),vn.reset(),vn.autoplay&&vn.play(),vn},vn}x$t.version="3.2.1";x$t.speed=1;x$t.suspendWhenDocumentHidden=!0;x$t.running=C$o;x$t.remove=ue$4;x$t.get=tr;x$t.set=Or;x$t.convertPx=er;x$t.path=Jr$1;x$t.setDashoffset=Kr;x$t.stagger=oe$2;x$t.timeline=fe$4;x$t.easing=G$g;x$t.penner=br;x$t.random=function(cr,vn){return Math.floor(Math.random()*(vn-cr+1))+cr};function u$z(cr,vn,yn=!0){if(!cr)return console.error("createResizeObserver: element is undefined"),{observe:()=>{},unobserve:()=>{}};const Rn=()=>{const Co=t$f(cr.clientWidth,{floor:!0}),Po=t$f(cr.clientHeight,{floor:!0});vn(Co,Po)};if(typeof ResizeObserver=="undefined"||!ResizeObserver)return console.warn("createResizeObserver: ResizeObserver is undefined"),{observe:()=>Rn(),unobserve:()=>{}};const Bn=new ResizeObserver(Rn);return yn&&Rn(),{observe:()=>Bn.observe(cr),unobserve:()=>Bn.unobserve(cr)}}var l$u=Object.defineProperty,a$z=(cr,vn,yn)=>vn in cr?l$u(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$t=(cr,vn,yn)=>(a$z(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class W$f extends I$q{constructor(vn){super(vn),n$t(this,"wrapper"),n$t(this,"domElementWrapper",document.createElement("div")),n$t(this,"requestAnimationFrameId"),n$t(this,"resizeDisoper"),this.domElementWrapper.classList.add("ICSS3DRendererWrapper"),this.domElementWrapper.style.position="absolute",this.domElementWrapper.style.top="0",this.domElementWrapper.style.left="0",this.domElementWrapper.style.width="100%",this.domElementWrapper.style.height="100%",this.domElementWrapper.style.userSelect="none",this.domElementWrapper.style.pointerEvents="none",this.domElement.classList.add("ICSS3DRenderer"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.userSelect="none",this.domElement.style.pointerEvents="none",this.domElementWrapper.appendChild(this.domElement)}setWrapper(vn){if(!vn)throw new Error("CSS3DRenderer: wrapper is required");if((()=>{for(let Rn=0;Rn<vn.children.length;Rn++)if(vn.children.item(Rn)===this.domElementWrapper)return!0;return!1})())return;const yn=this.wrapper;return yn&&yn.contains(this.domElementWrapper)&&this.domElementWrapper.remove(),this.appendToElement(vn),this.wrapper=vn,this}appendToElement(vn){vn.appendChild(this.domElementWrapper);const yn=(Co,Po)=>this.setSize(Co,Po),{observe:Rn,unobserve:Bn}=u$z(this.domElementWrapper,yn,!0);Rn(),this.resizeDisoper=Bn,this.wrapper=vn}renderEveryFrame(vn,yn){if(this.wrapper||console.warn("wrapper is not find, creating a html element and call setWrapper(wrapper)",this,vn),this.requestAnimationFrameId)return;const Rn=()=>{this.requestAnimationFrameId=requestAnimationFrame(Rn),vn.visible&&this.render(vn,yn)};Rn()}stopRender(){this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId)}dispose(){var vn;this.stopRender(),(vn=this.resizeDisoper)==null||vn.call(this),this.domElementWrapper.remove()}}function t$c(cr){return arguments.length===0?[]:Array.isArray(cr)?cr:[cr]}function o$C(cr){const vn=[];return t$c(cr).forEach(yn=>{yn.traverse(Rn=>{(Rn.isCSS3DObjectPlus||Rn.isCSS3DObject||Rn.isCSS3DSprite)&&vn.push(Rn)})}),vn}var a$y=Object.defineProperty,h$y=(cr,vn,yn)=>vn in cr?a$y(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$v=(cr,vn,yn)=>(h$y(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class m$z extends Scene{constructor(){super()}add(...vn){return super.add(...vn),o$C(vn).forEach(yn=>{yn.mode="front"}),this}}class u$y extends Scene{constructor(vn){if(super(),i$v(this,"scene"),!vn)throw new Error("CSS3DBehindScene: scene is required");this.scene=vn}add(...vn){return super.add(...vn),o$C(vn).forEach(yn=>{yn.mode="behind",this.scene.add(yn.getOpacityMesh())}),this}remove(...vn){return o$C(vn).forEach(yn=>{var Rn;(Rn=yn.opacityMesh)==null||Rn.removeFromParent(),yn.opacityMesh=null}),super.remove(...vn),this}}var d$C=Object.defineProperty,n$s=(cr,vn,yn)=>vn in cr?d$C(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$u=(cr,vn,yn)=>(n$s(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class o$B extends Group$1{constructor(vn){super(),i$u(this,"isCSS3DGroup",!0),i$u(this,"mode"),i$u(this,"CSS3DObjectLength",0),this.mode=vn}add(...vn){return o$C(vn).forEach(yn=>{yn.mode=this.mode}),super.add(...vn),this.updateLength(),this}setVisible(vn){this.visible=vn,this.traverse(yn=>{yn.isCSS3DObjectPlus&&yn.updateVisible()})}remove(...vn){return super.remove(...vn),this.updateLength(),this}updateLength(){this.CSS3DObjectLength=o$C(this).length}}class c$D extends o$B{constructor(){super("front")}}class m$y extends o$B{constructor(vn){if(super("behind"),i$u(this,"scene"),!vn)throw new Error("CSS3DBehindScene: scene is required");this.scene=vn}add(...vn){return o$C(vn).forEach(yn=>{this.scene.add(yn.getOpacityMesh())}),super.add(...vn),this}}const A$x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAADYCAYAAACJIC3tAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAA2KADAAQAAAABAAAA2AAAAADs6jNqAABAAElEQVR4Aey9C7ClZ1Wu29253yAkJGBCQoAEdBOCbkSgkIMKKgSjIJvLPket2qVyDiLi8VLiPvFSp8ACEUuUAsXN3orgQQoBUVBBvLCFjbg1CiiICSEEwiUESELu6e4znn/OZ/a7Rn//XKuTbO1e7aj65jvGO94xvu///+9bc625Vjo7d/yb/WvegZ3/QpPv/Rea59+maXfgX+oBt2kPi/DO3tsDrb+zh+jO1h8WD/VAL/JAH+KB9j8c9AdyD7eq3aqu39+tHpKt6uh/INq+nsM+vqMP8nC9cVu9X+t0dzR3IPd83aG4oznnX1ev5t9weQfWPex/u0mLO7CVezTS3BnOez/qYS5x3aYf5e4Ml/Pij3p1zWEbb/UBHk43aCv3ZKRJLn3u3YHGeb97bebw123wnjuQuGs3m8t1jerMHXa42cM7XG7IZvdhlE/uzvjc46z3no84cyMcbezOZXxnfOfPHnLiupyabY8H+hC32w1Zd/09Nxcnry9yv/TFOS55/LSsTX5uEye/mT/Kb5VzLamXS9wsn9pt5c89uG11kYOLWXfdPWcs0k7/jmL2WOeTO1DLzbyZb/6OImuz1nX2WH6kzdy29N0g2/LiBhe17nozN/LlRjjimB5+Lmc+ER+zZhFt/TU392a+eTB9ZpvjzK1Dcpg9F9G+1zl+n2IbeUduo2vZ7FLmNm3yI18OvDM+68v6jLs/iuHWWd+4Geuvw8zh95i1y21lHXP6OX5dz0M25wM/ZC9giwufu87k9UcIl/wdiVlq9si4+8SY+kU0/zra+HIi1frgOr/nRvqu6f2JMXWLaN/rHL9PsQ28w+kdrD+u3Lz64DrffCJ9M9ZPfuTLgRh1aT3O3MjvG9ZYpEYf7P4oVpdIH9YmR5wGbx4+/dQdFv7hcMBGGzU5fbD7cgeKbJ6syVg/cZ1PbivGxk7LWD+x+8QHMnIufGq9f/ogBq8/EYfLy+FwwPqzdBPA64PdlxN3LTXGB4p9vlEMh9H7jlhu4pEvB3ZfruOepXbE9zWice364MjQzeVG+kOSOxwPmA/KjQB2X64fqs1i60bIvDnPKE4O/0Ctb1jjESaHnyMPFWvOGB/jXlBjDIfZlzr8jmgOGzvcDpgb3AecMX6OPEwjf8RlffeZU04fxODTepy5db6bW43xCOGSx/cgMX+PzdHbHD73oR8yeDT2IT4sbbsfsLmNmjx+H6PDIwemb62ccUc2GBzWMblJsHxRl9zIZzN3S04/Eb8P5pPj0BD3g1XUxHG9Hqy5dTqffUV6HBa23Q/YuofIw3Zj6Hf00ICb+dSq6X1Yh5z+jl/5lV+57+Me97jzTzvttAedeOKJ5xx55JFn7tq168SdO3cezSjhUTV4RkfUsHe5q0Owe+/evbtLe1vh7cXfsnv37mtuueWWT95www0fu/LKK//pjW984wde9KIXfW5ZY63oYUr0QLFeD5AHhZh1YPogWk2tMbnObSWn5pDGvDGH9IXMLD6vTz8RP4ebOBHfgVY/NfLZa+X/wA/8wKnPe97zHnfmmWc+8rjjjvuqOkT3qj7HLOcuWNncRlwJtugwdxp9b96zZ8/nb7rppn+og/fun/zJn3zXW97yluuLJ8fgoHRfDsyhfsTZY4TVZr/Dhm7bWn8Q2+1C8/r0wfQ9KHD6HiI5446Zx5/ietd48OMf//innXTSSY+sd5evqME7ETksN5Q+aH4SLXWdM9dxs/rso0/NTbfffvsnbrzxxr/9wAc+8MePecxj3recl5yHJ325EapLxHeUu7p2OC19uW2D3uxtc0HtQvL69MHR6IerH6ZRTJ9dz3nOc079qZ/6qWeeeuqpj6tv8x5YHO9OmJsnN9ki86//6j1gJfjYrXXg/vGqq65665Oe9KTXf+hDH7qluNFhGnFco7zXSzy6B3KVXuXxt515Y7fdhS0vKK+vbyhjDxbx6BANue/93u+9x0te8pJnn3zyyRfVOxTf8lHvxhJZhjw+1uMFO//a9T2er1xkur7H1sPnqO8o93zq+uuvf+ery370R3/0k5X3AO0OX87DZOw96Mh8cFr6ctsGuaHb2by+EcId0OF6whOecOLrXve6769D9R/q56izq54ebiA2FuaGMddxodr3Sh6jTi2xfkdyaf8r6umZ96Y+Q9n76Wuvvfb1T3ziE3/lfe97382V9yCNkGuB994kFr26R90n3lbmw9lWFxUX4/Ul4vfhZurvVtOnd5dccskjzz///Ivr27+vqVo0bqA8VM7B9OQxOPxE+M4Zk8MOpnrW433hOuqDyt3v+8M//MMfv+iiiy4lrpGHjLV7uEQ4R7mr6+s+8bay3BTb6sKWF+P1JeLnmDtcu/70T//0wd/wDd/w23xQsezHJuHjcAwfs3fG+MnjyyVarxZMn7wmb+x8Gcsl5nz0yJha+1qTGvKp96CBu9/61rc+6ju+4zsuLz8PmD51/YAVNfVzLmNwW5o3dzteXF6bPtjH7AGrn0E+VIfr9KrhqzQHyz7lrswNuCLCyRy+G7SvIUp27OF3WjXv7YW3VYJxa/n8josPHfbWt6fHVJ7flfHp5FGFR1Z+4irua2RexmizF706QPjd+vrtDR5dnz7+6gknnHBx+R6qxNG89JfHx4i3rR3Ov2je9KHWxr1Hidg0/V0rNx595jaJB8pD7AblF8NfrE/sruaXwvWzzcc+/vGPf/S3fuu3Pvhrv/Zr19CwbK7nIrv/69T7uc997ulPecpTzj3nnHMecI973OPs448//n71re05dShPrpJ83nkY8Ocs16HPt857r7nmmr+eK/o3fnEHfODb8X7ktemDfbj58zBM/m233fam2pyPqRreRTxk6+4Vvdl8DOeps7T3S3WQLqsN+f43vOENf/IjP/Ijl1fezVru5KPHkl8wi9cRnzX6YtZO/stf/vL7X3jhhV9/73vf+6HHHHPM+XXoTqsE10pvRv48VeHQpr8uqS8Of3LUUUf9H6XgcGadB5d++PYGMeNFtIj1tx3OPoxtcqVeXyJ+jn7AOBzYkfUucMRll1327tqI51Xst2tTMl6o91C5Wa+vb5/eX7+8/f2nPvWpf1m/V2IDYmwu5naT6ZsDMTfjItr6K/20kU9f1ojtPffcc49885vf/IQHPOABT6i/MDm/ON7lXBNfUDw45U68h+tP63D978XRT40HDc6DJcI5yt1wffDb1vIhbMeL9PoS8ftg0zHgOSz4E5511llH1Ldvf748ZLcWz8ZTx7dcaHmX+tx11133F695zWte+0M/9EOXLzUF+5kbqmMXmu/8uph1dUsu/a7b8731u72f//mf/+761vLC+vb4PiVAzyHhmrnOI+td/c+OPvpo37k8VJVaHTQOHGsfHS6vSaQufeJtZetu+Ha4UK8vET8HGwdbHaqlTzyN+9znPkdcccUVf7Y8ZGycqR+H6otf/OJbLr744t945Stf+aWlvmAy5yQYbSK5jnN6eHqqJ+6Wc+p3zBp62TP77q1vY+/xMz/zM8+uP/d6Uh22U0q3t/6O8Q/qZ7ofKN9DJHrQ6IHvIO6jqA3XkPOS21bmzd9WFxUXk9eHb6wP8k5l7LsXcR64I84444xdH/nIR36uPjV7dH0Vv+ztb3/7y77zO7/zw0ud9aCWfm4ifVF9xumbB+HpK8Kl5Zzpq0kuffrZk8OBye156EMfelT9HvDI+iX7dUveg5VIHTVy+PYyB4eJ3Z+S2+klb/J2ui6vJa8P31ifQ5S+71pw/bB54FKvD2JoRsaGUuPm6khdcuqTx09TY3+QNRirVScmn3PK94ORBwTfQS2+h0odMWYMYqO55BaKbfaaH9tus0tbezlsNDebvjEPHB/UN2ajeIh6Ho0byl5FrQw9hsZ+clOiXuxJbI+RJnN9PalXl0jemHnSnN8exmj0RbjR9ZKnv4gu56PmsLHD7YDx0HNDuhF44Lkh3ABwHgg5a9S7eeyLTg5NmjV+he+51DsPms67SdFkL3R9Hc5JH/SMrIfP/vpgDmp6bG3ycBo81ueUX2S38evhcsDcWD5sUR5MYwOwofg2ESPum4SYzWyOjQ7n5uk9K7XK6aunxj7WG6NNMw+nr5Z+Hjh8+7tOauA088T2ALMv90EdvIez64jtbb11lVr1WOeT21bmBtpOF+VDFrk2fb+6E7vp8B1qM4YbGRo3Enk3HHxuQnxz6DKG7/FIa52IpvvWieTVgcwzWpu6XmcsUp/a7hsndj/vGb6Wvty2wO36DuYDE/NhwTHYOObxNXkRPvPW5ob14KbWDak++6efvfVH67KmIzXObz2x8+cXknx3o4/6Pp+8GuI+7N95YvqZz7XQz/XgY+ixfp8W7CH+6o09xC9jtXwfEui1iYj0QR807+LJ45svd7V50Y90cmwUe1IH7+Zx062LqemWddkPnXHOr2+fjLu+a3Iucx6SXDe+I/P6ohqR+ckRayM/OXWHLOYDOGQvYrlwrqVfzyhOHT6HAhMz76Gyz0hjTqSXmwROP3l8zBxovdwkuAMvOac9RdsZ51xyaOAzlzH+3CGytufh5dSAWs4Fl/OpOSQxb+oheQG16H4NxiLXpQ/y8DwoHiA1qcM3VtfrrQPpq77zxFrfTPCdy176I6TWOe1hTA4zJs919D5oMOv1s04O9KCI5ozp03uZU5vIPFmTtanDP+TsUP+Qw02QiG/MA8kYPw+LuhEmh++Dd5Mad2RODD43lhyY1uudV03m8XMtaOTU97y8WtF5sn/X5vrRqbUHiMZexOn3tZlXA9oTP3m0mSM+5OxQPmA+HB+M6EMg5jBgmcPnwZkzD3bzMMFTp/ngRwgnTw0bUC5jeqnDx1xb8vqg+dTK9Xxq8LOPcXLr6sllPutG86eWuTS0mj6obw5M3vkyf0j4ows7FBae6x75W+W41n7QspYcsRsGPXFq4DR5N0SPU6cGzv7o812DHJx5a+Qyrw9uZnP11PW5Rhwa10K+r7nn1Yr2BLGul5uSy3znzB3UeKi+g7FBsMT053LJp09t1vPAjdOnBnNDoMHX9HuNsYherbXON0I5tCMfLvne27rR/CMOPdb7qAUz5/yZdz2po6c8vpacvqjmkMRD8SJYc193vgvxIDI/8pNLPTwbwncucpi8daN4odz3qhYmN1ny+9T75pDrc9jDeuI5jT06WgNvP3z7yOcccFjqjZPTF6eiqNsKj4aR81sn9r7GByUeau9g3niRm9r9jDMPb04kn4dTTebRaGrVwePnw7c2OXXmjBP1s7ecuK6e+axNHbWafK4Njth6taBc6tNHY8/057g5nlrnwsdG81jfc4uKg/DVBR+ES1stqa/RuCMFcunLgfkQk0ePpca8/CSIl8xLdy5j/JzfmkQ1cFmrxvqO5JNT33FOA48xp58Kyk2J5Ytc7yOPLP0em0v0muGcnzottes4cwcV+hX5oFpUWww32JvspkvsOcvVGKOT64hGbt09UZOYfvaRh9PkOpJPTt86Ub7jqF6NtV2TcfrWdbwjmrzn6WfvfH5dY465R2afUe6g4A72Bbo+sN/85PDVjnSp9carJ9YXu2aOd66e7/UZWyMn2mMury7z6fc8OY3extaA+urAfAfLOnL26H7GqRnxmU9fbXIjH47B2vqnl/Q4qMyHelAtarmY0drgHN7k1OmLtOp+xpmXF8lpyaVP3hh0TdaJajJObfpo1MN3c57OZ6zGeuPUOKcac503L48O39i8PKipI1bnWozF1KyrV0dd72XdQYMH81/TewO5WdxIRpqcN9m4a4hHteqsV9fnlQfdDNmv16PTRjo4eWszpnazefg2Vs1Ib27UV446/a4nh5nX7zrzyeuD5q33HQc+89bIo0+OGBtxi8xB+po34GBZojfZtYH6rlHOh2ReRDfy7wiXvaxnXje5XOrw01IjD5frz82jP9LCWafOXuTSH2nhtN4n+fTpmd86Zk4fdD1i51ybeTF16ZNnWJc5fXuI8AeNsfCD0VwX6M3VN5frTk4d+fTVqxV9gMai9aM6a8yNtGrop9/18Jhzpk7f+pEOjTry3bcGvlty1q3j5jS9xnnmePLmQP3k53y1ifq9hnhkeT9H+buUO9i+RcyLd9NxwfjG3lDj/NRPzhoQoyZ1E7l8Sd56EQm+cy5LVuuBn9P6Dpc19uk1zpE16dOj18jJe43OMao3Zy2x9QfCodWcx/l9pyNv/0T8tFE9ee9Jake+63eOkaZz1nS+x32tPb9pvNWJNm20FNyV/ehlP9AbmJzrSu2Im6u3JzXZV37EZX/r1I9iOevEXJNcx9TkHPqJvdZ4nYYclhrm7D8rqQGx1BtPieWL9ea8jrm6XIc19hvlNutj7V2NrmXLfbnwO2p3pnYrc/KVTXOuRG8ynDx6fXHEjXKpm/Opc1402FyvnjO2XkweX8u+ciN0TfRLk08O33n7O03qslf61idal7qRLweytjyE9lOTPTtnnbzXSSxnPUh+nY1q1unJbblms8n7RAeq7/WbxfYHuQjQkbF9Ug+n1nxyW6lX3+uN+3ydX1fv/L2m8+ZF55zTwc9Z1nSdueQ713PO03nWCJf1qaHOvD6IpU4/tQvVvgOZc2U9NXmvrLsj6DrW1W5Fs1rQukbmXLzxHG5V1+tdsPVg+t7A5Owx4vIdEF32M15Xb8/UwrmOXpu67qe216uVB+Wcb0mthVE9BfazuMcjPnt1fcYH4qsVc21wDK93TmNNauEwa8R8fgvF+lfrumqOR7cuN/XZ6iI2092R/Ghx9gHJZ6zPwkc+3By/roYctq52Li/vWumhTw6b48jNaa0Dt2L0wZxrEe17dZ6uM96n3Lhpeh1x56jNPvpi5jtHzJr9tm+dNnNzfl6/c8GtM3WpuTNc9tmwqTYkIli3wFFuxEW7WZc6bzii3sd8vjPBdZ2fSsnPYc6hRo51jObJ9akFsexhnHryGaPRrDUPeh2pgV9nWe986olHP3dZg87+cuqTt5/cKO51ag70IDlHx7w2csbpyzE3/pzZ23zG6ZPv8Rxnr7UTKxotrnObxfbaCtpLpIYLMwb1yWH9MMCpEeGwrM9c+uiyJ7E24nstWg/IKJcc16bWOcDUJD/n94dPfXLpk8tDoDY1zJNx+pmD7/UjbXIjX050DmOxz4UODkPDyFif/MjsS+5A/V6zX//NJh/lk5vzmShz+00cBDovrNfkzeo549zwcqLTEDvgsm9u7uyVtfi93rqcK/1RvVyiNbkmOO9J18qrEVOnr9ZY7HyP0cGt43Peruu1mc8cvn3UyI3e7VgXpsYauXwm5NSRX2f2EdHqd8ycPdUYr5CLW2c9n/HIH3H2N9cXAz/irAOzVr9j6nrOeJ0mc+lTy2CN6/pQk6ZWNDeKvX5yfR7rtoq9V9bZWw05/VEu8+mnNutTo+81dZ35RPw8WJmzHg7zPuZanGuhWLzKqTeX/bpvPIf0MNd9+0/YJ92QrCDzI19uDulnrvdmgeb059Ba9KnJdxx7daS2cz3O/plzLnuQ61zW9lzG9kjOueyR6FwjzpyYmu4zX1rG1ieHNuP0Mwff69X2nDH1owPU6/z2Va1550t0TbkX4LScWy7R3onpoyUecfYxZ7xCFjpnmRv5cmD69OvxaA403MD+tj7SwnER9k0NnPxmSF1q6OmDkUeDETNyXjWiOtEbbV4kjxFnv5x/ErS8nHXGI1Rj/8TUw2v61sLLdY28OKc1D476Zn6kMd/nz/nom5axPcknn3p950rsfo+pTa73Mp7wQP8W0QWDW/GZRN00YbywSP5NENBNTlp9vwh50Jxc1sGpQTfSoMfycC+Yxas9ktNf1w/Nulrz9srrlst6rzNz+nltqct6tXBq0vf61YHkNd9BiK0zv25+653TOPvoZy45ah3Omfnkku/3tK8breb6ch59NSCc8+mDm5pFXZi8fmL3iUecfc0Zd/Si1PUY/eiC1JPHZ6CTlzOu1GTGIqS+uBlHvm9QY3uAuZ7smb7XZh25NPvIGYvyoL3we961pKbXkOv5kQYO63prE12HnHXiHG8e1LzHxPS1t746Y3rjj8x5wa0MeqTOGMTst4jqdW7i5PVBBw3051BNIj7GQqhzQembB/MrKDFmDT512Dp0LnT51S1rnB+UR4/JZR95MevhsOwzl7en+V5HrEac4+A1tJp1W+GypvvZp/sjLVyfU07ePiNeDsRSy/3K+zv3XKfCpTbr5eEYmL7I3tMfYdbgY+g22Fa/RewXZLwVZMK8GfgsRHTxxurhvXFqzIHdnEM0bw9jUI3oelKjDo159eZSP8p1LuPegxzzYOmzfuc3l4jfzXow/a7LWB1c97su45FvPYh5Xfhy+FjmFszG+ZPD78/TfmLm4fr9y/n0QYdf1K0zZu40a5lDP/OTn4vZL1mEizZH3Ac9DmRQj17k5zAGsWgO1PAzTh6fiyTvxabWHDpNLahWDo2cfsZwWvL4OdSAqcvYewGHr9mnx/1a1InqsxfcaH5rzBmrN845vb85T9bLy83F8nn9oxo5dHlN8A57uH+IefOQ33XOOecccdttt/3m3r17L9+zZ8973vjGN56zzKNx0C99+yeWZNbQbbD9iMoml41HvhdALv0N2je/+c1nf/M3f/P3XHPNNf/zvve97x+X1oc0Qrjk06/UZPlVhbmwnJOazqsBscyP4q1y9OnzUYs5xyLaGPe61HjNqZnjUkMPdfZzbdwz1yOnVsz6Oc2cNufbisa50I7msoc59Kzfa9AfoVr25I6zzjpr1xVXXPH2nTt3PrTC62ucUAftn3bt2vVN5Ts/yD3aCmaNfpVORryyaQGraGvO6II8XOCG8fa3v/0BT37yk997wgkn/NDZZ5/9m7fccst/KQ1fadTh51ce+xe94YYSY1yAmkRzeYHkRyZvPZqsI1aDryWX+uRTKw86zOd1yCVmLXzW41tvDuzWa7Kn609N1qvdCjfSUjfinVd0fmPnk7eHMbrOmQM37Kv73Oc+R8Th+kzlL6vx+TpsX/l7v/d7Dwy9daK9srd+lW3NKOgml8ikNu++ccdJX2/LrzvyyCO/ser/ucY9a5xy++23v+2oo476/vIxblgOOL6S+C7ljferC3k5fCzX6jrh0bEuLXNwWTeK5dDRa7N69aBmjWt2TvLppx6/653fnLXyifZK5P5ljTnrzBNj4iLa9zzoQc58R/WpgUudfud7rTrn5Fnm88w9R23GO88444xdV1555R/UO9UFlft0jc8iKju6xlfdeuutf3jMMcc8q3zX6h4D+0Ajl/qiV/X64GS5WLlELsyHAq8PejH6xDmOePzjH398Ha5HF39tjS/XuKLGNcU96eabb+adDL3vZvRhYNmTOG+0utTKqVVPf8w8aK7XT8J4sUZKfY+T775xn5Me5tLvnOtXY16UT8THUmOcnH7HqXhZby7r+7WgyYEWjRxxt3W57N+vnz7k7U9ML6zjro985CM/G4eLA2btzeVff/TRR3/Tgx70IA4b8zhcWyK5jPtclR5bXgAKC7u6NzfuizKe8PWvfz1fHY6p8fllQy7wihrX1FeOC7/85S+/tHx7+a2iPeAxcMRNyeULfTF7WbtgFzdWX4160AdmDsyeau0rwqfJi+TwGVwDZqwmsefUd6RX1pHHer2xuUlUL30t5tXbW76jefWjezXi6INZn769zFHP6Gsl748UWYPvfZny9WMJX9xvqcHhwuyJf3WNY9/97nf/p0Lq1o0+T8k3XAOxhnZlLn5FLJ0U6Sfi5xgu7pRTTnla6W6twTuYFwd+vMaX6gb8h2c84xknlU999q9wGFOrTk2uw7yIBlOjP5HxknnoXh/SLc2PPte5rl4t+pw360f3xzpRfce5PLxGDWNufnWg/Tt3R+p7L+bXek4eVIfG4T3icGE768eTywt5h+ITRWpyfKni20477bRnFI72r33nsMo23At0+xmN58zG5C2W67jfAn/4h3/4lPpB8pyq/WKNvDB87KYau/7mb/6GA5j19Cbuc1AH1y1584n6zks9XI7eM3P61onyzm9sXpzjzXfs/ajX7JVIbl1sruuSz/6j+dFiidarz/wkXurVyY1Qzag/evPWGs/pp/30rne961eXBacUsk4HNP4Xao+e+4IXvOCM8kd7cLQP5+am537mAk0YZxMnyQXo89VCHzTeefXVVz/nnve8548V9+Ea/PyF0ZcLwy6oj0o/V98jP7b8/OFRH/SG6FOXPnnmxdL3OuD1vSY4LHljuUmw1MiJqc055UVy+qI9yOmLncv6zNHLONE5rBPh05LXF9Hhsybus9bz8mjQku+a5PDzOtUmpl/yVT/7+5ztQ4zvH0u4/+CmbxHJ1++83l2HiAP2QeIazlPujuNrPPjaa6991cknn/zi8rkex+4t+PRCDzrK3TeHi4Z04fiaHNiHFwiPvyGubw+fWNxtNTxc5a4e2gnlH/OFL3zhrYXW2QOdPfExYixvjuuRU7NQ7r/eOd4+5kG5RPM5T/rmQdZEzmtTl2uFky93NSc+Zh60T+etV0tekxOTxx/Vyrl+4+whlz2yd16j6wYxc4to/zWMeo9qXA99R2ulP7ld9bvX3y88tsaJNTgMmD1vKP/Wk0466RsLJ/0S6U/sPGJRGzhjMA39ZDTpZrIjOidKdCGrBZ5//vnH1DvTA0vP97lcjF8Vyp38Uwt3P+c5z/mvhdkLrWuSL2p1Q+Aw0BtL7A3DV4OP9VzGmbeuY+p7zpg++qADPi2vjb7WoNFPTdamRq2YOjiHvNegHtzq/NakXk5kHn0RznnxMXPigt2nyznMiaMcfdaO5z//+ewx3o3usWzkIRO/WHv1fhdccAGHkHtPv47r5qAteUxcRI0w2ZsxWQ6/DUzUR3fE5Zdf/rT605SfK/+jNfgZLI0b9bB6677siCOO+I7yuVA4bsI69IaIJV9tklw7/Fw8l/Oayfsgk7MfeSxzc/EkDK19RXqkr76jc6sV0eF3G3Fo5MXk7GFOTI2cSC6fhdrM64Ppp9b7kJy+6D1gf2HEfU92btqLaOvDjrfUr4buX/7f1mAd9sPn4D3o0ksv/c/nnXfeG8vnmvz2EHR0ntjh9YmVWlyvC4YYGQtZN6jP/BSfeeaZFxXPwvIDDhZTP3bt5VPDoz772c/+UWHWu5bkSrK6GfhY3pwFs//D67xxrhUue3lzusZa9a4PvdzSXcX2lVdLnPVeszpwbn57imqtlZ+rV+f81ltnfh1vDuSanItY65y6zI98OXG0rryPc32p4xq9tzuXe+2o4vjRBKPWXnzCvaf+hO/CQte+Dku2nw5uaC5ilOwXuG5Scj64nfVXGg+teFp4YV7M3vqB825wL33pS99ciLkGb1jq+5yLivkLHK05a/C9sfjZn9i14KeO2N7yWWtOHGm8P/ZSK8qDmjVo1HVfDTVqrFcLdp05tWDWcw1qRLXGqc/6fv2Z07eHPZPHH81vjWhNzmct3HTNv/RLv8TP+sR3XyK+NbwRXLvcs94j0XlGWGUrIz80Gq2zbIzORslvWEz9fReHi09nvlDDC0k8ud7Frq4Dxi+f6UPOfuVumMObAI85v7x95VOTHPxoHvs4v5pRn9RmXh4Os5doXlyo9l2LOhDr8YJdvKpRZy5r0jcvWu9aQLgNz3Aphle3pPa7//DOl5o+T+bw7SuqVwc6P5o+el4tvLbifuEXfuFz7LlKnFwje03fVRX3xRonvfWtb+VPqqgbjaJXfPpojRMn0gOWIptPgngZadSKux796Ec/dlnDXy1zMZgXxXwn3nTTTXwv7NzkMfunnxw8fZwrdfhazglnD3GOs77nna9j6rOm833zug77qZc3tqe6OUx91uiP7nP28n6h13ct6uwlJm8NOW1Unznr1dlDhE/fWtDa5NDaK/P6O2vPXVIaPknk8wJ7gwwO2I7HPOYxTyhY1Qx8ZObxu5HTJr/ffJOgYhtuCe92t7s9rGpvr3FjDS/AC7o7fetvxN5RqLkBiZ3TnEi9OXsaz63La0td9sPPvsRqu5+x1+K8o/Wbo07L3nJganPN6jtmLb7zZx9467xGY3KYcc6pn/lJHC9ev5TziuSdUw3ofMnJm8v587rQGeP7zoOPUe+cfX3k9/7DP/zDO5e66UeUpV4tf5t424knnvjQpcZrGWFJpvl6Dn4/ywvaL1kETbDEbLzIxoT1vey5RfZ3L3TcFD6xue2iiy7688I0LxSO/sRyoFy5q7WYh0vfOOt6/dproEHZqCc8tSOT73OhzRx+DnupyWcil5i18n2O7KleTY/VipvN70bPPnmvzDvfCJ0rkX4+M3h7ymWcdWp7vZqpvv6TqT8rgt/Lsgex7Mfe/HJ90nhOode1Dku2eqb4s5Y3M0U01/RFeXDDIi688EI+peG35h4wLsJR7o671cfzn7jqqqv4wdILhLd3auFTQ4xxM7BRbsQt1Pte1YhmiJPz2sjru05QrTl0mpx6eTF5tebEEW+diFYd65GXM7anCD+3fvvM1VonOpe94c3Jdcz5zVkzqu+c9dbQw3e11K7y7Dn2Xul8B0s99dfVOHm5h4m9LjBNHi5z6a/0cwfMYosS8YfjxS9+8WMrR08W64WK1BxX3wv/c2HWmwc1eqDBRH1z9pAX5a0zJo8Zi50zBnNNxJh9XUdq7KmGXOfMZa/U4NNbyxyc9fJyxuKo3lpyuf6sSU3vbZyY1y+fPbK3eVGdGtG1dZ33E16N81sroknbu9x7xxWJBqPWwZvCrhe+8IVfX2i+3Mnsmby+ObUbMB+kCQuNRRvN4Y76XcKjlmIPGKEXwLvbzk9/+tN/t+TIjQy9X12Yi1izF9hzqdFHg6nPWH4SDF7Qju5Procye2aLPp+51KZvPpG8mo7oOmdsD+LOmUtU45pHOTm1xPpgjtTC0zfvmb459YmpgTfWJ3bApbF3GGlTfe29vy+SedmL1ovs2R33v//9H1mQ1zPnI++GdoPlBrLRBkEFc/x+uvrPT76qSP5Knr+QZ+FeKL9g5hOcHfVR6P8AZ6zPtapvenT073pkcBqakamxfqSDcw569Br7jnjvq/3n6ns+e4362yf7qzOXPeVEc84jnzjn9xrvDXy/f2rV9J7EGLrN6ifhUoefPc2xT+Bdhz2N0e38gz/4g/fh1F48qcbk8lJGwJ695fjjj38wxBbMtYNp8hNnUlLkAebgo83Nxq76Hvcv6hfJ1H2gBr0WV7GX3y/vfFDF9yjkKwQ8P4dxY8T0/Rmt49SvajB81wtqzG8OrmtSa07dgaK9ep+5+ZMfzZUcvuY8Wd99tHLcS2qI05I3J6LTT9Qnv9V6dWCaMT2zr/4I5eyT95o9Seze1Af9V6XIrfZyHSy+wPOx/EdqpFFzfuWPqL9N5NtE9t5WBteUg/WuBhNvZky8FeMQ8TE872BOkHUn1gH8dBJrfOecQ0rJmbcVMXObE8nDa/IgJi6i/evN9zr1oP03mz97jHx6JZ/PCB4zv4j2xT2vLvms73n7ieSZf109WvP4Xr+8Oe9P8uZE60HNHPW9B5rMEzu/enHKLfcg303ZK/HG2sP8Kd9Wzbln9fnwRiIbgProjFf4rGc965Ti+a9HOWCYp5q3L74SnFD/otTHSZSRS9twE5YJOHTegJxfruOopxrXikYuEb/PAeegDrNGrUjOOZKDx+DyfqsBs6c8NWnwDvTqRLTmQXvC66s1FtFg5kXyjsxbBzqX3Kh2lKOfPKi/WX1q9cVeyxza1H+5B/ln29C6D8nh8/uwIy+++OLTC8n3UdRk8gT4s5ZfnRStK8jG6if8ru/6Ln7+wvwF8yKqG1d2TAW7brzxxk8uSfp4U6D6nNPNCN5YpCat15vr6x3Vq+k9ks/71HU5l77zqBXl1YnmE/Ed/WDKp55exvqpM9c5eWq6mRNdf/agpsed6/V9HmN0ozmsVyeqTdS3hlhuxw033PCpirmf/PEvlnkO2I4nPOEJ/DgzMnrady6f/PTzUhL62WizhlP+fve73wOWxSzSRYscsB31H79ducwRpqkDsUR9vsIwlzE61yYHyonoNLlEa7vGGFSTdfDG+BqcwzpRfUdq4dBlTl/egyYPpl/hZMk7Nwl4Y3sa9z49th7ErEs/uUnUXkbrVzKaz96jvnB5PWoT8TfYF7/4xSuWxDH1hR+XFwdvDnwafj+wjP6MOTM3q/OC5xrI26DjKn/3u9/9/svAd7Bp0cuL4D9m21H/ndjHC+gxXdkS9eExYzHnlENnn8zLkceIMXERLV7ntH2OuXp4tfRyDjnr4LnPatQlZp46zZp8TnLWox1xc7xaerJWY5E6DQ6by3mt5lNvnUhOvZyx9fBY9sHP658Ey5es10/Ez3jHxz72sSuWtcfUjy7+CKJm+vGm/tzvnNK4BuT4jozxu2XdfgvfkKzKHvdmq/jYY489swL+FIWh8fPXnhr8bLbjLW95y2UmGnojvNBMm4NjPW5GeOJeA+e6e65SG3Lq4LVe7/yiOnCzejTWiXCa9eQ05weTz/zIT84ecok5Z/q5vhHvWjKnT/+sdz45Ed4aOH341BBjcJiInzX6+bMUnDz6DVb/jPvHIGpP9ncwerB3b69/UpC9PGe9d4831OVi8N28IMOPP9OX24C7d+9+U328ycLeW0PbyTtYXcyDCs+s/MMrwYU4+PADnz8OlhPJcWOJvfmiF5XrL9l0Y80Rs24suaxJX53azK3zpwmWc1i7Wa+sST/r7ZGoFuReoAcxUb/H8iBmHnR0vsfWjHhz9gL7+rqGPhjPWLM+Y3x5nql92YP4DPcjPhrG8KP6+iTxryvHz2Ifrb1p3wqnPo+q/FX1X9s/pWL24LrBus27b+nnnl1twOKm5uDIWHQ3L2zK8RWhBEyWxrsXk5HjH79hcsyLEuf6q19U7XuF7zWjuNerGfHkcuybbeFZA6ZP1r4L5f4x/FwNtX4hQOca5LL3yFcv0gPL2DpxtBZzHRfdFq/mNqtH5/qpRD+qMWdfYnxja1JnLzTmR3rz6tWCX2a/1mC/Jo9/e/HTjzTl08NR7gZzzg3kMljl8iZ04UrUiuYm5NtA3olYJIODxUeIvIvxlYR/YXXO0Pf50I7m6hy13dAkn771IEbOfPpTsl7UzcVZYx+14FbrU4dPL/7r8J3vfe97v/P6669/TX2X8Jc13oMPR44Jyibtwp1e5QnSD8nKzfVDeg1irydOrtfbOOutAdftud7LeeDx7ekcoFzWzmmtu4U9yd4sYvVus/Q5dNOPNIqXiJYxsjl+eLGz4uo8l4P3HSwXPF10fUXYVRfDn6Jg3pBFtHilHl70ZiWq7/WuqdfLgw56jOpT6zxy1hjfkXp6WG9/kQ1nTiS383u+53vuWf++5K8+6lGP+qn6b5UeUt9iH8/AhyNXvx45bVk/Whd9tA29izSend/CQu8tFH7ORR97gebkitqvHk5LXfrk7aVWLvm5ObNX6vmifyt7cvkO1nvyJsEBy3o0Gvy6XOpWB6wX9NiiWazF8nsFv0XkglajLojvj30HG/X2BoCZ1wfVyBW1wdRkXg7hunpz6KyRA+XMgxg8A+u4YBevo5y1zrNBU+9OO375l3/5hfXp7Ndlo/TJvfzlL38B2jL72Sel+H0eOLTw5uRAzF7qFuz+r9aD1nTOeP/qBWNdzrWO631Sm1/k0Zmbajhg7MkazsXaHLuXe3nSHsDLhjmsW/d2jWZYZHFDnnJ+izgtuBbLz2H8neK6dzBaeYGt7X4hOkxcRPvH8oneULis9zq3sgY06rN39pNX13O5jq6ZtH/xF3/xnesOlxOgQbuM181jiRqR+fsa1CaqgcO3Xk2PU69GHOWsF9WCcNTkvF1nPP1oQtHAJk0drFvYk+zNwSHjTYIfabZqo2tZ1W52wFbCLTgsigOGcSHTqAsg5quFB4w4DYE3T95FT8WSSzQn3TWjXtY4F7Vdl9xIb77fsz4/Os1c9jMnqjGe1vWQhzzkyRKb4VKb15PzJU8rc7bN+c2J5oi7D6cu/d5XjXzG+lmffp+TOGvoqSb7q+m5SbPci9M7WB2y/l3X7spP3xLY8M5g3yx3phcHjMWu3p5robX+6VNELmb6M5TBBNwMbkTeDH1vVJapHeXQ9byxPeytVl5UT3/XRs75Mp+9sl4/a3oPYuuda6Wv/2ziATbZDJdaeym3p+uVV0de35wov1qPiWVN53OOdbW0GWnlxXU9zKEdWfZ3nRt0y714xPJwqRf5FJEfae4SuysPWF/Q9BE9h6xGz41iboY3RFTXG2R+5MNZYz5Rf13/Xq8WtD+YvXpsj6y1XrRXarJn8pv5WcfcDDkxe8Ax+jrVJi9HffrEGJyD2Fq1Irn01WZtz2dN6pLH10b15hJd4+pNIZN3hX9XHjC+PaQfi/b7YA4Z72r84Dj9PWL568wL7uhNlaeHvogGPzF1+Bo66+B8IL2+67Ime9ljlFcHjvLJ6e+tP4y+LAvX+Uut1z03jy3yWtWOOPUd0c5tSNdPTe8Jl/nU4GPkqVMnkkuDNyc637r6Sbvci7fzxT/60J/r4t3LH3Xg7pTdlQeMPzNhcV7whFxEGW+76w6YN6dfTPL2TU59ctykjPWtpwbOQazBobMmNVmvfoQjnf1G+s5N9R/84Aff0hNz8VJL3Whuy9bl1Kxbp/1B74t6kT59HnOdd05QDf5m/bueOG1Ub36aZ7kX+cKPNgc69jB7+S6xzQ4Yk2/V8oC5aL/S7a7f3/jLu7yZ9lbvetQ4vwivVk1y9JNXl7WZQ2tOhNO2Wt979ph+9u85+M5N8WMf+9g31f+36v0uZg7RoF3m7SVmGRwj15Lzd23GWQNvnKjv3MQ5qMscsTXq4LTk1GW9vjjS2EuctB6wQvcntfoHesCc1zk2oBu6i3q8oWgU1DsVB4wPOqh1IK3UXr5aeMDgunHheaOcX06kLrWjPjm3enX2NRazvxzY5xrV9/nUZE99c9k7OfipX/0fQXb84A/+4MXrDhk5NGitC4TTcn59cvjD+S1cojVd22Qb+lGTY6TtnLHzOK8or24OnXeYr4N1NHuyBnlesi8HbO4Tb/Rzlj1WGg/YiihnKFzy63L8Ipl+aNT51/R8i+gBM1eylcFxU0QSxvjJW99RPZiGzqHGvNrei3hdjvrU2G/UB86vjtaBcFqvm/jXvva1V9f/Q/j//Ku/+qv/t/6H8R+s3yXeyMCHq9z/habE1lPnuvHhR/PLo8GsB7PenHlzHdHBbVaPTvP6qbG/OVFezDnkQNfT64w3IHuxhj9nUe9gTf5Kyf4bapfazhlnzeSv+4Vaim0Awu+Xq68G/PkJ/+acOZBPELl4PuQgh/WbIbehrsipviFazZvdv0hYh865ROewh1ryaqzLnPpE9F1jj8zZL2vlej283IS8Oz3ykY/k5zF/Jss8esz58N24yWc+eXpljC8n9jyxpib7y4nkMGIHMbxrTY05tPYV7akm0X2QGvIj4x2Mf3+D76ww58fngPlXR8Rarr3P0WNrVn8qBTErmsk5oXX8nqsf2OlTxLoQ/iNM/qERLwTMkb3UlGS/NVljjtj54bCuWbD7Xu1vXc4tZx8wuTlejZg6/DTXrBZ0pA5fPjH5kd+vP2vxe43xIrPxGcl1tE+/lyMdh8g1kM8affjUEGPOk7l+kMypzevXF+mJfyJ7cvnFnzrXCLKH/Z1t712plTnfighnlXOxkdvPXYn3ywRRX2n5VoX/bRF6FsqY/pq+gAN29Pd93/fxD+Nwgd28Abke+nTtaC1qMoc/V5861tHrrZ3WjyDMXFCTm7w+9fhp5pzTnPxmsf1GmFzO7Vyiuj6XPMiYu/5eR2xNzzFnDvOJ5J27r9G498hYDT3ls3/6O9mDdbj4Sw3/y3vyeb3H1V7+Qhat8V33rCQ39EjUG/R4VVOL+mQFLHx6F+OrQw3yBXu5mB1PecpT7g8OrN8kJH1tOTd+1qAfxVmTmuTTTw395nLyICPn1hfVpA4fE1ObvLXrOHukFj2WnDr5ROeH0+CsF8nZxxpiffKa9cQHUk+d/ZzLHqKH37x7xRidPfBX9vSnP33ag8s9yd70TQANe/fo2sufWBVs7uScqDfELsw2G5KSyyJzoEPJ3vrHRD6+DKZ3sfoq4VdRtPzf3HfU/wP3HLDMi8+bCe8c8OmT6+Yacp6s0acufed0Dfbtcdakbz11vQZOrZgaOXQYMSM3DDE1qU2/UpPJgXP+UroWej3inD/Xb26uoevoNVk3ytnPtYjJ61OfPdR2Hn1yU839ypaN2JNTbexV9u6O5V4mpzlHR/Oz2A+YQhsR50TmxZWu/kGby5ek3ybyTwXw18popgN2yimn3MfCht6IXI+cUnN9PanDd034mjVgP5DqyFlPnTy+lvVw9jXfkbzD3jl/6tGpsW9HarPeGvuM1kyOGgy9PSeiXqyRV5Nr6Tlr4a2HS18NaL2+c3TeOdFlr5wna9CxL9Qm6qNZ2amnnuoevIG9iVXScQLC+h+if2xZIL8M9wPXMqtjcYqs7rE8ONvoTW960z8thSwSXX2iPD1XroEfGncfd9xxZyw1ADfAm5Bz5g1Tjk6NNeZAc/hq5UA586BGPrXwcxy5zea3Hkxzk6+rz3WkTx/rsye+axWT09/s+tG5LpF++h3XzeWcaPSpN16wG1+dS7ROHNXDuS50+qLzqZvi5T/OxJ9J8UkhnIMe0zvY6173OvcyXFpqk9ef5jAo3Ou7QnAbXAt6Y+MVvuxlL+MHQ35B5zvYhtq6oOuPPvroc5bdvQnLcHVziO2J33X5BcH+qcta+JFZJ6ZmxGUeX41onjhH8vqgdanlOjNWo34Uq0eDGYu950I1/w5onah+hPbOHHXYna1fdNn/2Sef+0Lf+VOnD057vf7jVN7B+Pdh+IJlDUjMv/h7y6tf/Wr+7XqvI7HoyeQI8GdtswNG4doG0RkdC5v+LyrU1Z9H+XsGZF+o/4PgmThh3pygJheeQc/UELNm85krej++16sRrZ9D6jV8Y5Fc+sSuLfXwadagndPB57vWnC43Sp+DGq/NemO1WW9OpEaznrjz6snhG6eOnAafuvRTg28v+URy2cs+I5x09a9FnVU1q08JY4+SZ+96uMrd1KhZa3MHjEKHDYzncMftt9/+6RKfXGPaGPUtIhc6PcD6eeya8o//xV/8xbML6UEO6zdjwS5euwbW+fHdHHKgHHnqzRFjxqlNTh9tr3c95DC0mDWJ8FmfOetYa1pq4LOeOPP68Jg9xQW7sUadtaDXlJz3sM+f9ebkQMw++GrkRHKY8ySfPppRDO+6Rbh1trP23lm1D/kOi71IX++/c9yt3sE+s2wiN4dL2Wp96PazPGA26qI5fj9d/QnPh4rkZzD+2ausq3Xvnb5qfNu3fdsjKpfzVrgybtbohvXFo4Eb6bO+1zmRGutHOjjnoA6tHHE3e8mrdS550F5ybjRj0Hp9c/CafuLIR++c5HNNxNagw8zLd7QXqD8VLl+yXl/sus3q1VsP6pPTT17f3KT79m//dvYeH8uzF6drWn5OwP3nv/Y4sfbwPxZuxaj3vqR+Az/a6KMiGlg4h/yzxH+1nIlfKPMt4h4GfhlvvXvOPPPMhyw1HbgZzu0NQpM3qdcQZ80on5zaOc58oj41+K5HPjG/Ino95FNjn87Jd0xd9k8/NdSbs1fPE3dO7Qjh0qwXzdkz5zcnju7fiFPfUS289xjUH+3pqebe9773Q0vHJ9sesGmP0qjsVF4uu+wy9rDXtQ6Rd/P6V/xoMSZtTmyh3BCf//znv6+03NxpsdQtv01Ezyc319UHHQ8qP82bAzfdiEwu/Tk+pbmm5PXJa6nFH/V3XeasF+3V0c3VdcYidfjG+j22v7yxKD+H6lyXccdeP5eH997gU+c9GsVwGDrHRCxfnFeux53vedciP3ede+tTbP6F6WurIZ8NoHcwxz1r7PmJn/iJ9y55OE2dc8Drm1O7AecOmMW9URbbeIXvfOc7+d3C50o0LbbQDzrUfL4+6LjvySfzY9oGy/lMyIneSFAuEb8/aDhH76vWftaDGA/KWjlrjBP1UwPnoCeWMX7Ob15Um5sGzlhUR50mJ3aemBzWNcmpmYRLbd4beGLXQozZU4TLe6OmX39qem3mqNdcI3n2tDry+HvrC/uO+m6Kn8E+T8xYfndV7rR29uxn2cMQZc5t7wW7j1eTvP4K5w6YApvnZPpqQLm99UHHRytmsZjvYFNQF/epco5929ve9uiJWNTh5g1ZpiaAz5zrIZl8j9VZL6LDzK/zsz++10jNOsve6uxFzl7mun40jzVdSw8568RR/9SO8vZT57pHWnLm0+/zW2vvjEd+zm1f5yGnL2YPOOvh1ex8xzvewZ47tt4A+BBDDeg4tf7nfOxd43VYsg09iIe27oAxAeZE6cvth9ddd93flZD/9ov/Fef0DlZfKXhLru8Wp/+F7J4LLrjgWyrGvCE5FzyxaxvlrFOb64DTkrcPuawnHuWyNr86q01MP/vZw6/4mbOnGnLJqSWf9WpEdZvh3BqzLnvKOz9x3jfX5PpFNGlz8yafPrX26mjOvcFczufajNFqex/2sIex5/j5i7+Z5d3MXyFxHXevcXT9B6x/U9jn7HFJNmiMwf3MhdJEs6GxqMb8CPe8//3v/+/LgntZuPw5jJDfnn++/pmxry2k3odU7spyHsi8YemTUwtvTo68Zs5YVJv53GTyInoHPdLvPclZJ3Y9cTe5xKxHnzl9+xiL8iP0Wu0vorUejkEsV+7KrBHViCthc+wJje9ImT17zt7uH3XUmrMP8c4TTjjh4YV8ezj9BcdyT3r9pyN+97vf/Z4C9HMDmTn8NHkQm9ADtqCWpMFSZCF0Fst7kVN84YUXfqC+SnyptPxCD878hJX7VH31OKM+EDmtcpq9iPNmyidaozZjOXpkTfpojPExYkxcRPt0qfdhzmmttZ+1qZfbikZt1lvnXOs0mbMHyPPwPuFjmTf2+dnH658KljXmrCdn764jRuecxvYgdg45ET5zuX/VUK9N3E//9E+fXj+enOG7VyXz5y8096ncdU972tP+gdzMKHqVSx/9rOUCu6gXzk0sv3oQ9XPYX1ezr6hhf3uBvEXvfO5zn3thYZp9RPrlDfXGUqPG+ozxfXhZo08+zdoRnzp8tSNeTk3vt67enOi9zJ7m7J+55PS9B7kOc9YmquuoJu+ffdSONH1+69HiO6y111xvdOasAeljrXOkbueznvWsb1vq2HvmRPboGbfeeit7Vs77bzzCkq+M/NA8AMNkkaPGyfWFTPEVV1zx9qo9sgZ/3Dt9tVh+YlNfKPZeXdxNp59++jcVos8eFa5ulj55/cTRjV0o9732tZrxhog+mLm8PGjPka/OvmrFzMul1ryohjh1+t671KvN+5N9zINZnxr7i1kj5z0zBvXRm7fWHOi8Pls0WtbJieayF/6Ip2aa6173utf/Vj7/BfP0CaJ7cZlnjx5Z/zEIexb9ZqMk+2nghjZ3wJgkzUnh9BO9YXB7nvSkJ/1RId/rnl0DSy3xx+vj+gue+tSn8lcfUw1kmTccTvPmzcXZ23WgtYf1oJy91MmLXQufOevsY07MvPNnj6xLvq/ffh2zv/WJ5LNXzqefaH84fVHOuF+PfNclT06j3h4gOrUjX23W64NZQ5x7aG/99caJtdceUofrE0stn7ahw6g9u8bNF110EXuW2Psm2j+xZPsZ+f1sdMAUdqQ4J9F3IeA0PvrRj95aF/Ghiv05zI/rqeGTnMsKj3rFK17xzEKNHDfTfvD65DDnTMwHMOdbb4+p2fLFGjX2ls8ac6kljza57hvby1iUt0/y5kRy5kVymvnslbq8p8nrz9Xbz3rng9fUGGdPOOKsN28P6+Hl8NWN/KxJXZXt2PvKV77yGYX8l/aXEtdY/XXRMj67zFxizQAAIERJREFUfqT5YP03YLeSU9PQeUdY0g3rI15ZHjAXt0qWIzdq7GLI4W+Ir7nmmncWxx9WTr8Ti49F+bsp/ij4+vpnx76jkI9LrQW9YfianLEon+sk53r11RHjY2rEBbtvfnnQGjWJ5HPd5uAxMf3Oea3wrhXfkbX4mD1GmhHnHIvqfa9qnddrtT9Kc/uq9nno6N37WC9aYX9jUA3Y51KvxliEd9iLmDXtqT+PYo9dv9xz5DH1fNJ93Oc//3nevSb9Es13rPSqlhwmLqLF64rLA5aC9BWDfbgoeeM9r3rVq3639Bye+y3rCqZ6NNil9cnOeWeddRb/0CP18GK5K5OHcJ7uG4Mjyzr7waWp2Yw3r94eXlfnySdnveuwXo0or84682Lq8FOXsb551wuP5TzZW19cqPfpiec2u1rQeTuq6XyP1eU65cTM7f3t3/7t8+oL+7mV/KelYPq97NJHe06N3fUp45sKmc9Bzl6iuUqtzDWuiO6sO2DZ0EZyHV3QCi+++OLP1beJfOzJBWK+NePXF5S9/EHw7V/7tV/rAes9iemH4Ws+TJEcvrE6+xGbU6sGzN4ZZ728WlEeTHM+12/OOhE+fXXymcPPeE7TexhnffZJX604l5PnOvVFar3+5PTNjeboGmO0+BnLcY/hxRX/5Cc/+T8R1P/Xmr/QmPLL33+hZx0PqH34j7/+67/Or5XIO5zLnsYdq2S4LvjJ5g4YjTT9xD6RC9uA9f8QfkM14YMM/x2E6RPFeud6bI371n8a8Jo3v/nNN1bebxO9IJE15LzGOX9y6fsg1ZLDjMnbe0rEi7waYyT6oL68HOvHsl6tSF7fOjCvXc1IZ806Tc/12LnslYg210+MqSHndcJp5o1B86BzJp9+1o/mR4ulTt/+07rq7w/vX7ov1167fqqomvgEkT15wmc+85nfKUQ/Gtm3+7SE09KXW/2eSmIoqmRvbuyiejzxT3ziE19btV+u8e+ixzfUBT/opptu+p2TTjrpZ4PPHvj0ADF8zJgbnybfOXmRPL4PTj1cDnhjNb1GXm3GcvTQF+c4+UXFxvkzp5+o7xyifEfzORd+3ldqrEsdXL8XXYd+xNkn54Hz+ZoHqc8ezimf6F6B0999/fXX85cZJ9V++/fRz55fVdwN3/qt3/r/LWuomxs5l/VilW2wDfzcO5gV2RjOYtAL0e+L233JJZfcUr/Ae0dpz67BL56/scZX3nzzza+vP5f6v8unxncv+xQ18WByxnKg3NJdrS9jdWrzQcmB+dCtSex+xtRjyeE7puRM3hyY9cb2EOG992pADB4T8a3rSA6D17IvnLmslTdnrXxHa73v5JnHuciTMy8WNVw7POb81oP2nPDBD37wS+sTwvfUAXt4jYfFuxcfvp1Te/OP6n/9xK+TXI9Irxz2hcM6LtjB67oDZhPLcsL0nTzRhe554xvf+HPVgG8Dn1zjQXVRr6v/LsfDpY5+HDSx3NXNwoe3P3G3/lDM++CIc83mE80nl755eqbJw6WfGnzWPzJqtKxPnry55PXNqct+3c/1W5919hJ7vbGYPbKPebFffz6brFOX+dGaXR96hjE4cVddddXuc84555n1M9hfcsiKf1gN7ME19tZ/mvKyQuvFVT2aTUalVxr8/SwXbjI5L3IOOaDm0pebsP4PIPeuXz4/rT4O/VD946N/XjUsHEvER8+FYsTpT+SStw6OGsw59e03yqtJTN+aziVPDuO6XU+uYUrWS9bouzY0c5w97aNWnjr7dM4aeWNRvteTz1zXZz59anovudSxZp8pPL7X4bzw1iaHLt8QiHNQZ16c8ve973131u+53lC/cP760lxR48z6cOPv6h3tovJzLtZDvBlmjX6VTUa8MhYwMvlE/NHgYka8HP3xNfwNi1jG3mxQc/EjvZreG340t7qO6kXmsl7tKAeHdc2CnedH+eScX+5Asd8r65N3js6NtHDqErlunxl85qjB5PSNRfmOmSen5b1m36GD80CJcI5yd+ysd7Kd9QcQL6t/tu1xdbiufMMb3vC9z3zmM68kWUYfhgcr/eSSt8b6RPzJcsFyYPIuVC7jrfi9X86DnwvNmN6Zw8dAcyCWaC4fgJrUyYFY5pjDhzUll3l7pzbz+Obkk5ur95p6jdcsb/1cLG+/Xk++cxlblwen16hXC8qpHeXUiGgxYrk5VMf1O+C6D+dzI4d1dA5y+qBjswOlTux9iFfG76BG5qLIdT/jUa0cC8ASXRQXgXkx9jRPLuuI09Az0OiTt89m2LXq4THjRNeTeX11xCMd+REvZ32P6dcNTer11dnDOLHnPEjrNDlf6pjX55h8nyNz3Xf+vAbrRWoybw84NebBXJN5EB7c6thMX60mcw7jDTh3wBDlojPuPrGWk+kn4jusAfNi5NW5DvuQz5z5RH17JWZOP3vDyWedmsyln1p7WENOv9cQmwOtzRp8LfVyc2hf8/aX773kU7/Op16j1np5ubl55K0DrRXt4Tx+Z5Jacl1HjHngjNXdEVx0XLzaT67HE+9FKErMnH7iVnz6qcve+Cwocy4QDt9857OmZFMPteZGKGdNIj7WNcbiSDMVLl9Sl9oR75qzvvu9Lmu632uN53TyIANjvowncsnhqxv563LosZGmz2cMup6peFkP1+8L+eStHenQaugw50xfTsxc943BDbaVdzAKcqHpb2i2DHLRUC6wI326dtlixVuv1rmtUy8vwqeffbqfOnxjEb2WnL440sCZZ834c2s3T82dNXv1uegLZ97YNRKnZb2+iC79rNPPPO8kXr886Nxy1natPDjSymcu373g141en9pRDm5T8+LmhJkf+XJzSF9zfY68Eerg1Js3VtP7yI90cJ3P2F6py7y868pc1roGdZmjZu5aRvyo15xOPmucOzF18MSuK/25mlG9fTK3mW9e7D0673rgGaP7r6bnNtNb55yJ6aMjHnG9h/EK172DIeqLzlhfXDUtx8XA5eJGMfVq9NF1M2dv5xXR64vZI793n9NaBzKcK/VyqSWPWdPrqXF+daC8vvXEaeicL/mRn+vTt97YuuTTzzx+5rKHfNe4VvOiOhDLXsT9+s2LaDS1ORc5tWD61olz+RG/ro/9hujihskiR/nk5nz6ZW6uf/Kp54Iy7r755N3AciBDLXPJ6YtqrIXHjLPPiEvtVLh8USuXsT3nauVdGzji7CMuZRP0mszhmxfNZ4zfe5vvmPW9bt23iL3PKLYfc+irc96+TvnN0D4iev2OmbOvGuMVbvYOhpBFd+vcZnGv77EL7OgNk3cekT76aPAZ6sudTE1i16gVR72sR5PzWZOYWn3QOjFr0rcmufR7PfHIOm8sOo8xPfDl7SnnzzVd1+uzDt9+qUuN/cHUpK8elKevPtgH2nVmLZoD9XvNfvPc0QNmI2+aMTjiMj/yRzXJ4Xvx8iL99EEHPDaK5SfBUtM5c513ruThWJ85YzUZw3WzrvPGWT/y5+rznunbU8x1yzlH5qyfm8vaRGvg0h9pnHOU6/W5Btdof3PGYvZNv+czTr+vIXvM+ls5YBS76LlGdySfi8fPeK6fvOjaMrYPHMNYLZiWtfJyYueJey7nUb8Oqaem97FG3r5qjXu9vPWivCgPds4YpL9zoNXUjGJz1qNJrteYm9Pl/K4ntfaTU5994dZZatXdGc4eE271gCHebKE23qpOvTi6KHuJaPF7bA9+DsscPDG9sy41c3nX0/Pw/ee9oiazb9b0XNabE603nkP7k9f3Gq1x/caiusynry6x512nvJg1+PJicqnNvLycc1krb5x6coysMb8ZZt/UzvGpmfUP5IDR5I4sfHbymYRziMp6DC8nenNFa9V23jrzIjoPERyWWmI0Wubw+zzq5K1dp7UGtL/1cN2H6+Y88PTwgwbizBFj9kxcZBav1oAjzRxnj6zvHHHPz8Ujrf28p8Z3BJ13Xe1WNDsO9IDlhD705O4qn97ZP302viYvwnPhxHIiOa1zHqbOo+9cxvjO1zF1zjvql1w+tLn67NX9rdTP9bVWTJ0cKC+6htTAzeV7zp693r5zqN48sUMO7OvIHH7v0/OjeMs1d+aAjSbe7GJGNSMu++iD+tToi3McPGa9N4cYX0SDZb8Fs+81c/q93h7OY7X6jJ0fLn01idbb13nFUb3a7IOffNanLjXJW0+d74hoGXCa9WLyctaAcnO6zve5er36uxIPeI67+oDd2YvxYdPHG9jRXPJcOLGcmkR8DE3eqM1qMm+9mH1GXK9VA44s16Y/6tFrXYc15Ed13qe5enh7rdP0nHHOn5x+7z3Sdw21XkvmRrXOc1dhzneHeh5sBywvwps64ry56zRZp9/rsl4/MW+wvL069nyP0cP1nsaplxvNkTn7wY3qU2svtYnpqwOzXk2+a6lVJ67j1djPOOczJ7cVjVrnHuHoHo10dxl3MB8wLtIbIuaFw3nj8VPT/c3y9O01cFjyGcPnRui61OKnqbXeGI3XhN/ngEtTO1efWnz18s5PbA+5rrUmcZ1mlINj5FzZb85Xn3m4/KU3uZEua/7F/YP1gM3dKPmOeeO2klOv1hiEk++bxFzfKL0+4/Ttm1z6ufnkR2uYm7/X91p7gpnTF9URy4mZ6z4arlEt2Dnzauixzjcnpj7vZ+bRHBR2sB4wb443UITHZ3BDk69wFY/yqdUXqcWM82HJLRQbX82pN0bl+sSsRJe89alJXz1c1iWf+q4zl/NkH/PWiV6PaL3ziqlHow4e6/ULdh9vLPZ6eHukRm6kV/evigf7AePmcBMZ3ERvaLkrTh/E1Iibcevy/cH1nuZHfHLMgcFZMxHxMtKnFt/69Ed10XY/N3tm0p7J4asXk+vaHo9qRtxcT7QMr1tdctmP/EFlh8oB86a5mRK9wXJo5/xRLuvT73P2WmNr1IvyrAV/tCY11ozQenPZR26EOefcPJ03dk5Qf24Oa0R1GeMz7KcG7Dpz8s5vbL7XJn/Q+IfKAfPhcOO44VjH5NL3AfnLZHLYXL0P0vxCvU/fY/tnz+67fnvbo6O9nFt91suNtJ2zf9bLgfLp9/6jXNa5VnSY9emrB3ve+tRQi6kV57hJfDC+HAoHjPuWG8cH0u+nvFrrRmitNXMae4F9bFbjHOrcQPLZu+fU3Bm0Z+JcPzXkXdecNnnq0ozFzOnTv1vq+/yZ0wdHfXrff/X4UDlg3ihvqg8BlFMjbpZLXfrZb64HvA879fTJGnOJbg7RuUdInfOQNxaTw9+K2c/5XVuvTT59dMaiPXsPYnOiGn+fZtzz8qJ5Uf6gxvy7voN6ocvFeXNF6PR94F4LD9E8mL4auF5HLrn0uWfEoPePeDSK3tBnFI/WhA7L3/OsW/9CvfFVfe+f67QCDuuY3CRYauyZnLVyYOq6rz6vsdf2GmLrUnvQ+ofaO1jeSG+0mDl9cvmQurbHHJh8iB4m+qH1QBmL9lFv3BG9Ri7ngpfTzxgubS4nDzKw9BfMPi415qzpsdpcd3Lovd8d7QlvfR4u9dmj+8SHlB15SK1232J5qD6kfexGLx8YmV7jxsgqavIQWQfC55zWJzpnctRi9mVT9bx94Rn2KXelxe9mn6zvGueVR+u1yIGjueWpcU0gX5jzOsz1tVOPmQcZqcPf7KD1mio5NOxQfgfrd5gHhYmLaOOrDzo3GHqGG9H6RDWJdM5YvX3y3qrLmpEvJ9rTGOxmb7WgGzK5kc61imqYA84+xqDmvTQGU2/c88Zz9dZ5HeoPSTxU38G82T4EEMuHJieaM0avD7o5RDdYbj5qjPGznhiznpx9p8TyxRrXAzoXEuuX8tUc8llvfzlr6NdzvV6ttSK8tdmHekydaF9yatRljN+1zoNes0YcadQe9OhNOugXumaB+QDcqHld+qA+7dBiIrn01cJZK1JnXkwO3w2ir67z5kE0mYdL2yyPts9jLHaNPPPqoyH220B883DGIAanNrHr0Mrha3LMb09RzSGJh/o7GDc9H4QPCj43S+rgzflA5ajPHH4/dMTo+BbQue1jrlKrutSw+dC4Cc2J1NnLdcBp6Jyj6zKHnrw9xK6hl0bOnnDWW8Oa1ZDX5NTDw2k5t9dNDp44jbqszdwh6Xvxh+TiZxbNNfGQcvMoletIjYMcviifHP3k9ROdv28gNG4yNPRIjRw6jHgrRh8s6+F6PInqpefkRedlbfqgA505uPTVyKOV009c55M7pG07vIP1B8DDxEA3HrG+m4sDpAaO4cHLWD8xdVU21ZJPUy/nulIHlx+GELsm0HnokTwxfeAw5yJW5zziJFy+yHWth9181vD/0Ib3MOHn/GqTUyOicU5967YlbscDxoPigWI+7EW0ePVhk2MDqyUrl7wcOoY5Y+rskRx8zo9PXm6E2Sfz1pm3dx5ANeTwja2hn3pzaNO8NjgOErHrsA+cB1FfDagOP3n9oie+x/DbzrbrAePh+aB9aG4qcmwMbKSB9+GjQ8OY87OH2qyv0snkQHRsUpDYYS83t/nkS77a+PLW+27oHHmdctY7PzG5NOeHwydPb3yMviPf9aJ3PntbI0+fbW/b9YCNHhwPlocM+pBzI7E5GGgS5ZMryaQTyWGi/Rfs4lXOjdkPg3zORyV1GJg1rBPLOYm9RnmR+szZixrM9SVmDd8iWp/fLlJLLziMGg3fIcd6usbctsPD5YDlJvMBd86Hy8N388LhM3aecsopO0888cSjPvGJT3gw6WGfjpUamjo3mcgmxbenvk3UkR/lXLP9qdvMt6dzeF3wc8P51YKux35qnD97OddhgT6Uw+Ji4yJ98FD4xiN/yt3jHvc44rOf/ex/u+KKK/725ptv/oV3vvOdX72s4x5yOEC+YIFy8ObkO6YmtelnP/3so1YcaVKvj94Bl+tXs+t3f/d3z7vyyiv/4/K68hAVtd/9g9PUGh926Mbajhee16YP9sFGgmOjdZw2Wb1zTYfryCOPfPzevXs/vnPnzvuU9sg9e/Zcce21177tpS996e+88IUv/HxxGD1G1jebsUjNnD/q17mcd+Qn12uJnRvc84IXvOD0Zz/72U87+eSTL9y1a9e5CG688cbfOOGEE36qXL4dRAfyDua7GGguObTZX7/oFY+/7Wyzm34oX3Bemz7YhwfMr9getOmr+T3vec+dn/70p1+zPFx/VAfsj+tgnXjEEUd8dR20h1e/s2vsvv322y+pbx1//8UvfvGfvupVr/pSzFPuhk3k5uqITjNnvBX0GrtWXjTPHMnt/e7v/u4TX/SiFz353ve+N4fq/Mrvquv9VOElNe7F9da793877rjjLq64HyYPloeO/gwPmtckX6mVmVsR28XJG7xdrsnryGvTB3Pk4YIn5oBNh+2000474qqrrvqt5eH6w9ps76jcjt27d9tvR2260+uwPbzwYZU6uUadvz2fuOGGGy659NJL3/PjP/7j733Xu951I3XN3FQi6Tm/lQ7D1ZqWWWOR3lyXtvexj33sCfXu+3XnnXfeI+pny6+pazi3Bl9Yrq5rvaSu828Kr6agrnFv5f5jja9bHrL/p2gPmcgcHrQ8WPgYecdELF/gtqV587fjxeW14Rvrg3nA9KcDdq973euIT33qU6+tjfXNtck4XH88ukkettJxsu5XeF5twvNKe04NNuvtxV923XXX/c+PfOQj73/Tm9700Ze85CWfKR7LjYXvGtmQ+uiwzOuL5j1AyU/F9bLz6U9/+t2e//znP/zcc899RH2r99X1LnX/4rnePXV9nyz858K/L/xEXBe9tJ1V88wKHlGH7NX1Tvafy/dA+c7lwRKp74N+2Td9ctvG+kPcNhdWF5LXhm+sD3qowNU488wzd9WHGb9dh+Vbiudgva0OifUVTr322xRuSgRVe2Rt1vvXhvTAnV00c2A3Vb9P33bbbZ/48pe//Imrr776sksuueSff/Znf/bSj370o7ctJNPrfnNELt3V2h7xiEcc+2M/9mMPuOCCCx5w6qmn3q8O0tn1DnyfGveugrsti26vtV1Z/qUc/vqC8LHyb3H9tfZ183LI+MDjEbfccst/OfbYY59fPofJQW36xH0U9W8HjJtwKNtq09VF4Bvrg/2AwR3x4Q9/+OFf+ZVf+ary71vj+hr/vcZ7alznQatNtle/eIxaNpIINxkbtzbtsbWp71t1pxd5rxqn18bG59tKajDqb61xc2lvLryp8Kaqv7Hmwr+hOL4tPa76HL/E4wqPZVSKcRySGtq1Vce3edMo/xPV6+NVf2s7UK5btF7kYFXpHvCMIp9T46T6IvHrRx999E+Un4cq/X64iDGx+1Nyu7zkg9gu1+R15LXpgznygMGv3sXKP+Lyyy//trPOOuvZdTi+tmI2zQdr/FVtsg/XJuNbP/RsFPvnpoHbL1ebmhre4fbg18E4qsLTqx8H7p7lH1+Dg3LMcnB4Vn5x2C2OOjC3VH6K8Yvni8DVxV0NFje9IzIfhcxZPutybSJpfG3D+mt9rJP78Kga59S4rXr9j3r3/Y2v+IqveEvFHiqQPiJ+H0VtmCvnJbdtzI2xbS4oLiSvTR/sIw9ZHrCV/yd/8ifnP+Yxj/n++kr9rVV/9xq8q72/xl/XJv5Ubb5p8y4PXNGT9U2zszYk72STthSsA404bf6psl7ULWv2cjCWub0cEGI0IrnQrOqXNcDa+esaeEd2jh1eU9Xdr8aja/z7GsfUgb2yPq5/46tf/er/+rznPe+zxXE9fXBdcKB+uasYLq3HmTukfR7udrW8Nn1wNDxM5PTF6UMP+Ac+8IFH1y+YL6qf0Z5Rm5uP6PkQ4ws1+GDg72uDXlYbkx/2+cBjtVmJl8ZGci1yojk320inZvokk4NmcaE5ubX1UcdhomY6YOWTOrfGBTUeUuO0GjfXryH+rD6k+c2HPOQhf1lxHqjRhxv9cE39qw5Lf8EsOP1thaOHsF0uMK9NH5wbHigQjfHqgAW3qz6Nu2d9Bb+ofk/2LfUBwtdU7uga/Iz0T8vxz4X5aeHOOnT0ZYOBaZ1bF/ccfTq3Lt67PER8EeDnKbT8LPjAGg+q8e9q8HPcjfWO+Pdf+MIX3vXc5z73d8quKy4P1jqfnnnIiBlY+sZTYju+9Ae9na4xr00/EZ/hgdL3YPVYfj984hOfeOIrXvGKb6mfRR53zDHHfHX15Ks+dm2NS2tcUYMPFz5ZG5pD6OZmE3rwoA/I/v92zZ+3jiqI4kaKG0MTpUCisEXSgYRER0PpypU/hBt/Bxdu/CVc+oNEokqBRGVRIAGFU2AJhcgIpEDBnPfeLz6MZ++760eQvJuR9p0zZ+bevf/Ga69f9BVdlk/KxVNJBUSHKiT5gSoefRNF17O49LTS20W9qv8hfv17cXl5+fzw8PBF/A9Qf79RLK2C8hj5FFLG6PJtsWUuf1L2dgMmNavlZPLc5KPBHSk0xzvFFH1UcfpZxM7Pz58eHBx8HU+3r+Lp9nm8cKDgNDJ9peoqLr3Vu17513H4f4vD779e6kmjw/kvWxXJQm/wR9FWbyd1X7040aXX9CqqJ3Fh12/evPn26urqm7Ozs+fxd5V+IPDkcfQCcq5xVD5FRR+6HxpcKFvMZUmn98mBm97MbouJuTFXikE6nKKRDxdmXmneJnP5W0dHR4+Pj4+/3Nvb+yK+MfHZ9vb2bsh6Va+3g5gOmr7xoRcov6/wz8C/7Vq8EQxfb/T0qyv4YfCP7NKbSI0V+yueTr/E31E/xv/dvo+vdF1eXFx8F9/i+DUSOPhCCsJ5VUBDmrfzfsVlGV1bJEztY3EApjYpm4/PD+4oni8vKsXWFVXOz/3ha1jisg/ijeTWycnJJ/v7+093d3c/3dnZ+Ti0J1F8j/X0iaeeLr2uVxHperTCgC0VGoWn4vkjrtfxN9PreKq9in8Av7q5uXkZT6af42taP52enr6MJ5Xa+QHPBeA+hebYw72PivsYxGXKm6yx4VOdYJ4fvjBzNApGPrwX6aNCrTE6XCiT7pZ9j7V4Pqz4FbomTgGJu4/ei7R31Jjly8Cld9dHnwTqp+JcTRvtB5mNB7UuOlQqLiG5jspVnL4Ua10RvtOPa5nLd+PePkaPi3us4tK4yMcXUkho+BmrXNqA6l8mf5Y21wLThuuw+sYPHV6KywtN7Xiq0VersOibHB02tBZXTOa5S2X56eNHdy1zfGHmaCAFVfmtGOMQcg+0dT55k8G5FZg2mMOaed5U4iokGYVGkXgczVFthnxiQpnyMOdowqzr/pW5Dq/QNfHWlQuKXNcZCzGhDFx6M/uceoFpc6uD6Ro5fhDQdBxyYamtX+S6Rv+uqS/XK1+ajLyl1//pc1Ar/ApdE9/04n70K99tSPecyfH7buRDWoihOaK3UDGP42fUemQttyOnQtcyl99rfogrjibMvPLJc9RY3Iejt1AxTO0mb1N/gmkDtZEcdt9Q9HUbTZ735cUkfcj3GLxC18Rl1ZiXkfozz8N9eIWuiVf+Ok0j8rb4juKzs7Gb+JAXaGiurldcGrrjWK618zbuZ1750lpGEZDjPryFHss8+7qHa5XvmrgbbV2bJGfDJzm5YlKt+Xqs4mgV9moaUs51jSGTg9+L+eDig+oH7uicnEoj1kLFZLRferefQ/ptxoTYfTfyIS/Bujl7fB0nPha1frkNa4qOD2Z96KBmHR9Uf/BN0ftinPSJ79iKed5keN60yUyscyKt+efYkO86PKOG09IYLjn43s41+NCBzTo+qPZw8D7aunH0xsmbHFYbOrlJdkxo3TpUcdc24Rqet6/8jiksUrxYJLR8j43lVd+LAdiH92nyvGje2HnNvp5tz5pUOa45113G+owst0PPOHSYsz7Gz7m6Z6X1jiXnzcLv3cBZLMbAJHvWqMrp0aochtGKkePYOvw5ln3106v5PYfa5ZzZ+mM3cbYLtZp473q18oZiQ/p917wqGPU1pK+LMY5We3Le42oF/utNnePCjlnD3tzevLzevYe/N0/9j8nN45m9f9+NnP3CdSzApms7tv2mhbBp+44lmV/K2E2c3wq92xn/X+v/vnje7T4O9v4PRqxOxnwQYu4AAAAASUVORK5CYII=";var r$C=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});function M$u(cr){return r$C(this,null,function*(){return new Promise(vn=>{if(s$o(cr))vn();else{const yn=Rn=>{const Bn=l$w(cr);Rn===Bn&&(cr.off("modelLoaded",yn),vn())};cr.on("modelLoaded",yn)}})})}function s$o(cr){var vn;return(vn=l$w(cr))==null?void 0:vn.loaded}let r$B=[null,null,()=>null];function E$u(cr){var vn;if(r$B){if(r$B[0]===cr)return r$B[2];(vn=r$B[1])==null||vn.dispose()}const yn=new W$f("front");yn.domElementWrapper.style.zIndex="1";const Rn=new W$f("behind");M$u(cr).then(()=>{var Co;const Po=(Co=cr.getElement())==null?void 0:Co.parentElement,To=d$D(cr);if(!Po)return console.error("initialCSS3DRender: five element is not exist"),()=>null;if(yn.appendToElement(Po),yn.renderEveryFrame(cr.scene,cr.camera),!To)return console.error("initialCSS3DRender: behindWrapper is not exist"),()=>null;Rn.appendToElement(To),Rn.renderEveryFrame(cr.scene,cr.camera)});const Bn=()=>{yn.dispose(),Rn.dispose()};return r$B=[cr,yn,Bn],Bn}const L$n=16777215,T$m=16777215,_$i=1,A$w=.5,E$t=.6;var s$n=Object.defineProperty,h$x=(cr,vn,yn)=>vn in cr?s$n(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$t=(cr,vn,yn)=>(h$x(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class c$C extends Object3D{constructor(){super(),i$t(this,"name","IObject3D"),i$t(this,"needsRender")}removeChildren(){for(;this.children.length>0;)this.remove(this.children[0]);return this}add(...vn){const yn=vn.filter(Boolean);return yn.length===0?this:super.add(...yn)}addIfNotExists(...vn){return vn.forEach(yn=>{this.children.includes(yn)||this.add(yn)}),this}remove(...vn){if(vn.length===0)return this;const yn=vn.filter(Boolean);return super.remove(...yn)}removeFromParent(){const vn=this.parent;return vn!==null&&vn.remove(this),this}}function c$B(cr,vn){if(!document.getElementById("LineLengthTagStyle")){const Rn=document.createElement("style");Rn.id="LineLengthTagStyle",document.head.appendChild(Rn),Rn.innerHTML=`
    .LineLengthTag {
      cursor: default;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: Arial-BoldMT;
      font-weight: BoldMT;
      color: #041066;
      letter-spacing: 0;
      line-height: 20px;
      background-color: #FFFFFF;
      border-radius: 12px;
      padding: 2px 8px;
      left: 50%;
      transform: translate(-50%, -50%);
      word-break: keep-all;
      --distance-scale: 1; /* Default scale if not provided */
      transition: font-size 0.5s ease; /* Smooth transition for font size */
    }
    
    /* sm screen */
    @media screen and (max-width: 499px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* md screen */
    @media screen and (min-width: 500px) and (max-width: 929px) {
      .LineLengthTag {
        font-size: calc(12px + (14px - 12px) * var(--distance-scale));
      }
    }
    
    /* lg screen */
    @media screen and (min-width: 930px) and (max-width: 1365px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xl screen */
    @media screen and (min-width: 1366px) and (max-width: 2549px) {
      .LineLengthTag {
        font-size: calc(14px + (16px - 14px) * var(--distance-scale));
      }
    }
    
    /* xxl screen */
    @media screen and (min-width: 2550px) {
      .LineLengthTag {
        font-size: calc(0.875rem + (1rem - 0.875rem) * var(--distance-scale));
      }
    }
    `}const yn=vn!=null&&vn.offsetY?`translateY(${vn.offsetY}px)`:"";return`
    <div class="LineLengthTag" style="${yn?`transform: translate(-50%, -50%) ${yn};`:""}${vn!=null&&vn.style?" "+vn.style:""}">
      ${cr}
    </div>
  `}function a$x(cr,vn){const yn=t$c(vn).map(Rn=>cr.localToWorld(Rn.clone()));return Array.isArray(vn)?yn:yn[0]}function e$g(cr,vn){const yn=t$c(vn).map(Rn=>cr.worldToLocal(Rn.clone()));return Array.isArray(vn)?yn:yn[0]}class a$w extends O$m{constructor(...vn){super(...vn),this.setAttribute("instanceStart",new BufferAttribute(new Float32Array,3)),this.setAttribute("instanceEnd",new BufferAttribute(new Float32Array,3))}fromEdgesGeometry(vn){if(vn.attributes.position.array.length<6)return this.setAttribute("position",new BufferAttribute(new Float32Array,3)),this.setAttribute("instanceStart",new BufferAttribute(new Float32Array,3)),this.setAttribute("instanceEnd",new BufferAttribute(new Float32Array,3)),this;if(vn instanceof EdgesGeometry){const yn=new InstancedInterleavedBuffer(vn.attributes.position.array,6,1);this.setPositions(vn.attributes.position.array),this.setAttribute("instanceStart",new InterleavedBufferAttribute(yn,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(yn,3,3))}else super.fromEdgesGeometry(vn);return this}toJSON(){return{type:"FiveLineGeometry",attributes:this.attributes}}}var s$m=Object.defineProperty,l$t=(cr,vn,yn)=>vn in cr?s$m(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$A=(cr,vn,yn)=>(l$t(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S$t extends L$o{constructor(vn){var yn;super(vn),r$A(this,"_three_color"),r$A(this,"_dashed"),i$w(vn==null?void 0:vn.color)&&(this.three_color=(yn=vn==null?void 0:vn.color)!=null?yn:16777215),Object.keys(vn).forEach(Rn=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(Rn)||Rn in this&&(this[Rn]=vn[Rn])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(Rn){this._dashed=Rn,Rn?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(vn){this._three_color=vn,this.color=vn}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}class o$A extends I$r{constructor(vn,yn){super(vn,yn)}toJSON(){return{type:"Five_THREE_Line2",geometryAttributes:this.geometry.attributes}}}var s$l=Object.defineProperty,c$A=(cr,vn,yn)=>vn in cr?s$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$z=(cr,vn,yn)=>(c$A(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S$s extends l$v{constructor(vn){var yn;super(vn),r$z(this,"_three_color"),r$z(this,"_dashed"),i$w(vn==null?void 0:vn.color)&&(this.three_color=(yn=vn==null?void 0:vn.color)!=null?yn:16777215),Object.keys(vn).forEach(Rn=>{["color","dashed","dashScale","dashSize","gapSize","resolution"].includes(Rn)||Rn in this&&(this[Rn]=vn[Rn])}),Object.defineProperties(this,{dashed:{get(){return this._dashed},set(Rn){this._dashed=Rn,Rn?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}}})}get three_color(){return this._three_color}set three_color(vn){this._three_color=vn,this.color=vn}toJSON(){return{type:"FiveLineMaterial",color:this.color}}}function i$s(cr,vn="m"){let yn;if(vn==="m")return yn=cr.toFixed(2),yn==="0.00"?void 0:yn+"m";if(vn==="mm")return yn=(cr*1e3).toFixed(0),yn==="0"?void 0:yn+"mm";if(vn==="ft"){const Rn=Math.floor(cr/.3048),Bn=Math.floor(cr%.3048/.0254);return Rn===0&&Bn===0?void 0:`${Rn}\u2032${Bn}\u2033`}}function o$z(cr,vn="m"){let yn;if(vn==="m")return yn=cr.toFixed(2),yn==="0.00"?void 0:yn+"m\xB2";if(vn==="mm")return yn=(cr*1e3*1e3).toFixed(0),yn==="0"?void 0:yn+"mm\xB2";if(vn==="ft"){const Rn=(cr*10.76).toFixed(1);return Rn==="0.0"?void 0:Rn+"ft\xB2"}}var s$k=Object.defineProperty,m$x=(cr,vn,yn)=>vn in cr?s$k(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$r=(cr,vn,yn)=>(m$x(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const t$b=class{static checkDom(cr){let vn=cr,yn=!0;for(;vn.parent;)yn===!0&&vn.visible===!1&&(yn=!1),vn=vn.parent;vn.type==="Scene"?(cr._onAdded(),yn?cr._onShowed():cr._onHidden()):cr._onRemoved()}static checkDomEveryFrame(){t$b.checkDomEveryFrameIsRunning||(t$b.checkDomEveryFrameIsRunning=!0,t$b._checkDomEveryFrame())}static _checkDomEveryFrame(){t$b.cacheObject.forEach(cr=>t$b.checkDom(cr)),requestAnimationFrame(t$b._checkDomEveryFrame)}};let r$y=t$b;n$r(r$y,"cacheObject",new Set),n$r(r$y,"checkDomEveryFrameIsRunning",!1);new Vector2;var $$c=Object.defineProperty,Y$e=Object.defineProperties,q$n=Object.getOwnPropertyDescriptors,B$q=Object.getOwnPropertySymbols,J$j=Object.prototype.hasOwnProperty,K$i=Object.prototype.propertyIsEnumerable,L$m=(cr,vn,yn)=>vn in cr?$$c(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$A=(cr,vn)=>{for(var yn in vn||(vn={}))J$j.call(vn,yn)&&L$m(cr,yn,vn[yn]);if(B$q)for(var yn of B$q(vn))K$i.call(vn,yn)&&L$m(cr,yn,vn[yn]);return cr},E$s=(cr,vn)=>Y$e(cr,q$n(vn)),o$y=(cr,vn,yn)=>(L$m(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class Oe$1 extends c$C{constructor(vn){var yn,Rn,Bn,Co;super(),o$y(this,"name","LineMesh"),o$y(this,"type","Line2"),o$y(this,"object"),o$y(this,"points",[]),o$y(this,"doms",[]),o$y(this,"highlighted",!1),o$y(this,"_geometry"),o$y(this,"line1"),o$y(this,"line2"),o$y(this,"opacityBeforeHighlight"),o$y(this,"colorBeforeHighlight"),o$y(this,"paramsStyle",{}),o$y(this,"lastRenderDomItem"),o$y(this,"lastFOV"),o$y(this,"_onAdded",()=>{this.doms.length===0&&this.paramsStyle.lengthEnable&&this.updateDomItems()}),o$y(this,"_onRemoved",()=>{this.doms.forEach($l=>$l.destroy()),this.doms=[]}),o$y(this,"_onShowed",()=>{this.doms.forEach($l=>$l.container.style.display="block")}),o$y(this,"_onHidden",()=>{this.doms.forEach($l=>$l.container.style.display="none")}),o$y(this,"onCameraUpdate",()=>{var $l;($l=this.five)!=null&&$l.camera&&this.lastFOV!==this.five.camera.fov&&(this.lastFOV=this.five.camera.fov,this.updateDomItems({force:!0}))}),o$y(this,"onPanoArrived",()=>{setTimeout(()=>this.updateDomItems({force:!0}),100)}),this.paramsStyle=p$A({dashed:!1,lineOpacity:1},vn),this.geometry=new a$w;const Po={color:new Color((yn=vn==null?void 0:vn.lineColor)!=null?yn:T$m),linewidth:(Rn=vn==null?void 0:vn.lineWidth)!=null?Rn:_$i,dashScale:1,dashSize:.02,gapSize:.02,opacity:(Bn=vn==null?void 0:vn.lineOpacity)!=null?Bn:1,depthWrite:!1,transparent:!0},To=new S$t(E$s(p$A({},Po),{dashed:!1,depthTest:!0})),Io=new S$s(E$s(p$A({},Po),{dashed:!0,depthTest:!1}));if(this.line1=new o$A(this.geometry,To),this.line2=new o$A(this.geometry,Io),this.line1.renderOrder=2,this.line2.renderOrder=2,this.line1.name="line1",this.line2.name="line2",this.add(this.line1),this.five){const $l=(Co=this.five.renderer)==null?void 0:Co.getSize(new Vector2);$l&&this.setResolution($l.width,$l.height),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraUpdate),this.five.on("panoArrived",this.onPanoArrived)}vn&&this.setStyle(vn),vn!=null&&vn.points&&this.setPoints(vn.points),this.addEventListener("removed",()=>{this.five&&(this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraUpdate),this.five.off("panoArrived",this.onPanoArrived)),r$y.cacheObject.delete(this),r$y.checkDom(this)}),this.addEventListener("added",()=>{r$y.cacheObject.add(this)}),r$y.checkDomEveryFrame()}get style(){return{lineColor:this.color,lineWidth:this.lineWidth,lineOpacity:this.lineOpacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:this.paramsStyle.lengthEnable,tip:this.paramsStyle.tip}}get lineOpacity(){var vn;return(vn=this.line1.material.opacity)!=null?vn:this.paramsStyle.lineOpacity}get lineWidth(){var vn;return(vn=this.line1.material.linewidth)!=null?vn:this.paramsStyle.lineWidth}get color(){var vn;return new Color((vn=this.line1.material.three_color)!=null?vn:this.paramsStyle.lineColor)}get dashed(){return this.paramsStyle.dashed}get occlusionVisibility(){return this.paramsStyle.occlusionVisibility}get occlusionMode(){return this.paramsStyle.occlusionMode}get five(){var vn,yn;const Rn=(yn=(vn=window.globalModules)==null?void 0:vn.five)!=null?yn:window.$five;return Rn||console.error("\u8BF7\u5148\u8C03\u7528 Sculpt.modules.init(five) "),Rn}set geometry(vn){var yn;this._geometry=vn,this.line1&&(this.line1.geometry=vn),this.line2&&(this.line2.geometry=vn),(yn=this.line1)==null||yn.computeLineDistances()}get geometry(){return this._geometry}updateMatrixWorld(vn){var yn;if(super.updateMatrixWorld(vn),this.points){const Rn=(yn=a$x(this,this.points))==null?void 0:yn.map(Bn=>Bn.toArray().join(",")).join(",");Rn!==this.lastRenderDomItem&&(this.updateDomItems(),this.lastRenderDomItem=Rn)}}setPoints(vn){if(this.points.length===0&&vn.length===0)return;const yn=vn.map(t$j).filter(i$w);if(this.points=yn,yn.length<2){const Bn=new a$w;this.line1.geometry=Bn,this.line2.geometry=Bn,this.updateDomItems();return}const Rn=yn.flatMap(Bn=>[Bn.x,Bn.y,Bn.z]);if(Rn.length>2){this.line1.geometry.dispose();const Bn=new a$w;this.line1.geometry=Bn,this.line2.geometry=Bn}this.line1.geometry.setPositions(Rn),this.line1.computeLineDistances(),this.updateDomItems(),this.needsRender=!0}setResolution(vn,yn){const Rn=this.line1.material.resolution;(Rn.x!==vn||Rn.y!==yn)&&(Rn.set(vn,yn),this.needsRender=!0);const Bn=this.line2.material.resolution;(Bn.x!==vn||Bn.y!==yn)&&(Bn.set(vn,yn),this.needsRender=!0)}setStyle(vn){var yn,Rn,Bn,Co;if(this.paramsStyle=p$A(p$A({},this.paramsStyle),vn),i$w(vn.lineColor)){const Io=new Color(vn.lineColor);this.line1.material.three_color=Io,this.line2.material.three_color=Io}i$w(vn.lineWidth)&&(this.line1.material.linewidth=vn.lineWidth,this.line2.material.linewidth=vn.lineWidth),i$w(vn.dashed)&&(this.line1.material.dashed=vn.dashed),i$w(vn.lineOpacity)&&(this.line1.material.opacity=vn.lineOpacity,this.line2.material.opacity=vn.lineOpacity),this.updateDomItems({force:!0});const Po=(Rn=(yn=vn.occlusionVisibility)!=null?yn:this.paramsStyle.occlusionVisibility)!=null?Rn:!0,To=(Co=(Bn=vn.occlusionMode)!=null?Bn:this.paramsStyle.occlusionMode)!=null?Co:"translucence";Po?this.dashed?(this.remove(this.line2),this.line1.material.dashed=!0,this.line1.material.depthTest=!1):To==="depthTest"?(this.remove(this.line2),this.line1.material.dashed=!1,this.line1.material.depthTest=!1):To==="translucence"&&(this.line1.material.depthTest=!0,this.line2.material.depthTest=!1,this.line1.material.dashed=!0,this.line2.material.dashed=!0,this.addIfNotExists(this.line2)):(this.remove(this.line2),this.line1.material.depthTest=!0,this.line1.material.dashed=this.paramsStyle.dashed),this.doms.forEach(Io=>Io.intersectCheck=!Po),this.needsRender=!0}highlight(vn){var yn,Rn;if(this.highlighted=!0,vn!=null&&vn.color){const Bn=new Color(vn.color);this.colorBeforeHighlight=(yn=this.colorBeforeHighlight)!=null?yn:this.line1.material.three_color,this.line1.material.three_color=Bn,this.line2.material.three_color=Bn}else{this.opacityBeforeHighlight=(Rn=this.opacityBeforeHighlight)!=null?Rn:this.line1.material.opacity;const Bn=this.opacityBeforeHighlight*E$t;this.line1.material.opacity=Bn,this.line2.material.opacity=Bn}this.needsRender=!0}unhighlight(){this.highlighted&&(this.highlighted=!1,i$w(this.opacityBeforeHighlight)&&(this.line1.material.opacity=this.opacityBeforeHighlight,this.line2.material.opacity=this.line1.material.opacity,this.opacityBeforeHighlight=void 0),i$w(this.colorBeforeHighlight)&&(this.line1.material.three_color=this.colorBeforeHighlight,this.line2.material.three_color=this.colorBeforeHighlight,this.colorBeforeHighlight=void 0),this.needsRender=!0)}updateDomItems(vn){const yn=()=>{this.doms.forEach(Bn=>Bn.destroy()),this.doms=[]};if(!this.points||this.points.length<2||!this.paramsStyle.lengthEnable&&!this.paramsStyle.tip)return yn();if(!this.five)return console.error("Five not found");const Rn=this.points.map((Bn,Co)=>Co!==0?[this.points[Co-1],Bn]:null).filter(i$w).map(Bn=>a$x(this,Bn));Rn.forEach(([Bn,Co],Po)=>{var To;const Io=c$J(Bn,Co);this.doms[Po]=(To=this.doms[Po])!=null?To:(()=>{var Wl;const Xl=new R$k(this.five),Yl=(Wl=this.paramsStyle.occlusionVisibility)!=null?Wl:!0;return Xl.intersectCheck=!Yl,Xl.simulate3D=!0,Xl})(),this.doms[Po].setPosition(Io,[Bn,Co]);const $l=(Wl,Xl)=>{var Yl,Zl,ey;const Rm=(Yl=Xl==null?void 0:Xl.force)!=null?Yl:!1;if(!(this.doms[Po].__text===Wl&&!Rm))if(this.doms[Po].__text=Wl,Wl instanceof HTMLElement)this.doms[Po].container.innerHTML="",this.doms[Po].container.appendChild(Wl);else if(Wl){const ry=(()=>{if(!this.five||!this.five.camera)return 0;const hy=this.five.getElement();if(!hy)return 0;const my=hy.clientWidth,ly=hy.clientHeight,sy=my/2,cy=ly/2,fy=Bn.clone().project(this.five.camera),vy=Co.clone().project(this.five.camera),dy={x:fy.x*sy,y:fy.y*cy},Ay={x:vy.x*sy,y:vy.y*cy};return Math.sqrt(Math.pow(Ay.x-dy.x,2)+Math.pow(Ay.y-dy.y,2))})(),_g=(()=>!this.five||!this.five.camera?20:c$J(Bn,Co).distanceTo(this.five.camera.position))(),ty=((ey=(Zl=this.five)==null?void 0:Zl.camera)==null?void 0:ey.fov)||60,ny=2*Math.tan(.5*ty/180*Math.PI),iy=`--distance-scale: ${Math.max(Math.min(1-ny*_g/40,1),0)};`,oy=hy=>{const my=document.createElement("div");my.classList.add("LineLengthTag"),my.style.visibility="hidden",my.style.position="absolute",my.style.padding="2px 8px",my.style.fontFamily="Arial-BoldMT",my.style.fontSize="14px",my.innerText=hy,document.body.appendChild(my);const ly=my.offsetWidth;return document.body.removeChild(my),ly};let ay=0;const uy=oy(Wl);ry>0&&uy>ry&&(ay=-20),this.doms[Po].container.innerHTML=c$B(Wl,{style:`${iy} ${this.paramsStyle.cssStyle||""}`,offsetY:ay})}else this.doms[Po].container.innerHTML=""};if(this.paramsStyle.tip)$l(this.paramsStyle.tip,vn);else{const Wl=i$s(Bn.distanceTo(Co),this.paramsStyle.lengthUnit);$l(Wl||null,vn)}}),this.doms.length>Rn.length&&(this.doms.slice(Rn.length).forEach(Bn=>Bn.destroy()),this.doms.length=Rn.length)}}var i$r=Object.defineProperty,p$z=(cr,vn,yn)=>vn in cr?i$r(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$x=(cr,vn,yn)=>(p$z(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class m$w extends C$p{constructor(){super(...arguments),r$x(this,"isCSS3DSprite",!0),r$x(this,"isCSS3DObject",!0)}}var M$t=Object.defineProperty,v$w=Object.defineProperties,p$y=Object.getOwnPropertyDescriptors,d$B=Object.getOwnPropertySymbols,f$H=Object.prototype.hasOwnProperty,m$v=Object.prototype.propertyIsEnumerable,l$s=(cr,vn,yn)=>vn in cr?M$t(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,c$z=(cr,vn)=>{for(var yn in vn||(vn={}))f$H.call(vn,yn)&&l$s(cr,yn,vn[yn]);if(d$B)for(var yn of d$B(vn))m$v.call(vn,yn)&&l$s(cr,yn,vn[yn]);return cr},h$w=(cr,vn)=>v$w(cr,p$y(vn)),o$x=(cr,vn,yn)=>(l$s(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const w$q=`
varying vec2 vUv;
varying float vRadius;
varying float vDistanceToCamera;
varying float vCenterDistanceToCamera;
void main() {
  vUv = uv;
  // \u8BA1\u7B97\u9876\u70B9\u5230\u5706\u5FC3\u7684\u8DDD\u79BB
  vRadius = length(position.xy);
  // \u8BA1\u7B97\u9876\u70B9\u5230\u6444\u50CF\u673A\u7684\u8DDD\u79BB
  vec3 worldPosition = vec3(modelViewMatrix * vec4(position, 1.0));
  vDistanceToCamera = distance(cameraPosition, worldPosition);
  vCenterDistanceToCamera = distance(cameraPosition, vec3(0.0));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);
}
`,y$w=`
varying vec2 vUv;
varying float vRadius;

uniform float borderWidth;
uniform float radius;

void main() {
  vec2 uv = vUv;

  if (vRadius > radius - borderWidth && vRadius < radius) {
    // \u5982\u679C\u9876\u70B9\u5728\u8FB9\u6846\u533A\u57DF\uFF0C\u5219\u4F7F\u7528\u8FB9\u6846\u989C\u8272
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.3);
  } else {
    // \u5982\u679C\u9876\u70B9\u5728\u586B\u5145\u533A\u57DF\uFF0C\u5219\u4F7F\u7528\u586B\u5145\u989C\u8272
    gl_FragColor = vec4(1.0, 1.0, 1.0, 0.2);
  }
}
`;function P$w(){const cr=new CircleGeometry(.2,64),vn=new ShaderMaterial({side:DoubleSide,uniforms:{borderWidth:{value:.01},radius:{value:.2}},vertexShader:w$q,fragmentShader:y$w,depthTest:!1,transparent:!0,blending:CustomBlending,blendEquation:AddEquation,blendSrc:DstColorFactor,blendDst:SrcAlphaFactor,blendDstAlpha:DstAlphaFactor});return new Mesh(cr,vn)}function b$s(){const cr=new Group$1,vn={lineWidth:1,lineColor:3407837,lineOpacity:.7,occlusionVisibility:!0},yn=new Oe$1(h$w(c$z({points:[{x:-.5},{x:.5}]},vn),{lineColor:3407837})),Rn=new Oe$1(h$w(c$z({points:[{y:-.5},{y:.5}]},vn),{lineColor:3407837}));return cr.add(yn,Rn),cr}function V$c(cr){const vn=new CurvePath;vn.add(new LineCurve3(new Vector3(0,0,0),new Vector3(0,0,cr)));const yn=new TubeGeometry(vn,32,.003),Rn=new MeshBasicMaterial({color:10994687,depthTest:!1,transparent:!0});return new Mesh(yn,Rn)}function C$n(){const cr=new RingGeometry(.03,.035,64),vn=new MeshBasicMaterial({color:16777215,depthTest:!1,transparent:!0,side:DoubleSide});return new Mesh(cr,vn)}function x$s(){const cr=new SphereGeometry(.018,32,32),vn=new MeshBasicMaterial({color:5085183,depthTest:!1,transparent:!0});return new Mesh(cr,vn)}function S$r(){const cr=document.createElement("img");cr.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAMAAAB8FU7dAAAAw1BMVEUAAACDuuiAsu11q/x8r/+HxtKHxtKIx9J4ut6Hx9Jcn/uNwNlmmf+RuP9ppf9orel3ud2HxtJrpf9oremev/9ppP9orelQmP9ZoPWSuP92q/9cnv9prel4ut53qv9orelYoPWIxdJPmP+HxtGRuP9oo/+Suf9Qmf92q/+RuP+DsP9Pmv+FxdFtre2SyMiRuP9PmP+evv9ppf9cnv+rxf9orepZofV4ut52q/+Dsf+Esv+5y/93q/9aofbF0f93rP9qpf8IzZ1iAAAAL3RSTlMAEg4s3dK5nodgVQoF/Pf39vbt7evr39rV1NTOzs6srJ+fiIZ9fWlpW09ERCwcHMH8LhIAAADRSURBVBjTjdDHkoMwEIThBrzOm3POOQwSYCRhe/f9n2p75FD2zX/VXL5qOAjzkixLsFL6fOFF5PwpXUj/eEwx7Oh9Jq+FdV5MqZkXlU9K4KZsmqY02x/A8LSwv14o0ylJWkP087WVhDfcjmjj5b/E3+CEpDPdGY58C7tKfzSiiA9uB4dV/NIF7yVQ7AGuq0lOIzrvnLP2Et2aMzUqryge8FVX0Zjl5XkG3KsR593pM2zVEScjvbMU7IdGjF19IzZ43Ceyve4Ai5Jep93u9BJs3j/gXjHbRgy31AAAAABJRU5ErkJggg==";const vn=new m$w(cr);return cr.style.pointerEvents="none",vn.scale.set(.003,.003,.003),vn}class E$r extends Object3D{constructor(vn){super(),o$x(this,"disableGetPixel",!0),o$x(this,"planeMesh"),o$x(this,"ringMesh"),o$x(this,"crossline"),o$x(this,"lineMesh"),o$x(this,"ballMesh"),o$x(this,"cssBallMesh");const yn=.18;this.planeMesh=P$w(),this.ringMesh=C$n(),this.crossline=b$s(),this.lineMesh=V$c(yn),this.ballMesh=x$s(),this.cssBallMesh=S$r(),this.ballMesh.position.setZ(yn),this.cssBallMesh.position.setZ(yn),this.planeMesh.renderOrder=0,this.ringMesh.renderOrder=1,this.crossline.renderOrder=2,this.lineMesh.renderOrder=3,this.ballMesh.renderOrder=4,this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.ringMesh,this.cssBallMesh),E$u(vn)}updateWithIntersect(vn){if(!vn.face)return;const yn=(()=>{const Bn=vn.face.normal.clone().normalize();return Bn.y>.99?new Vector3(0,1,0):Bn.y<-.99?new Vector3(0,-1,0):Bn.x>.99?new Vector3(1,0,0):Bn.x<-.99?new Vector3(-1,0,0):Bn.z>.99?new Vector3(0,0,1):Bn.z<-.99?new Vector3(0,0,-1):Bn.y<.01&&Bn.y>-.01?new Vector3(Bn.x,0,Bn.z):Bn})(),Rn=new Vector3().addVectors(vn.point,yn);this.position.copy(vn.point),this.lookAt(Rn)}show(){this.visible=!0,this.add(this.cssBallMesh)}hide(){this.visible=!1,this.remove(this.cssBallMesh)}dispose(){}}const o$w="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var u$x=Object.defineProperty,m$u=Object.defineProperties,d$A=Object.getOwnPropertyDescriptors,c$y=Object.getOwnPropertySymbols,p$x=Object.prototype.hasOwnProperty,y$v=Object.prototype.propertyIsEnumerable,s$j=(cr,vn,yn)=>vn in cr?u$x(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,l$r=(cr,vn)=>{for(var yn in vn||(vn={}))p$x.call(vn,yn)&&s$j(cr,yn,vn[yn]);if(c$y)for(var yn of c$y(vn))y$v.call(vn,yn)&&s$j(cr,yn,vn[yn]);return cr},a$v=(cr,vn)=>m$u(cr,d$A(vn));function w$p(cr,vn,yn){const Rn=V$b(cr,vn);return yn!=null&&yn.virtualPoint?Rn!=null?Rn:f$G(vn):Rn}function f$G(cr,vn=3){const yn=new Vector3().addVectors(cr.ray.origin,cr.ray.direction.clone().normalize().multiplyScalar(vn)),Rn=cr.ray.direction.clone().negate();return{distance:vn,point:yn,object:new Object3D,face:new Face3(0,0,0,Rn),raycaster:cr,isVirtual:!0}}function V$b(cr,vn){const yn=l$w(cr).intersectRaycaster(vn)[0];if(yn)return a$v(l$r({},yn),{raycaster:vn,isVirtual:!1})}function m$t(cr,vn){const{x:yn,y:Rn}=vn,Bn=yn*2-1,Co=Rn*2-1,Po=new Raycaster;return Po.setFromCamera({x:Bn,y:Co},cr.camera),Po.params.Points.threshold=.02,Po}const e$f=`url("data:image/svg+xml,%3Csvg width='12px' height='12px' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cpath d='M6,12 C9.3137085,12 12,9.3137085 12,6 C12,2.6862915 9.3137085,0 6,0 C2.6862915,0 0,2.6862915 0,6 C0,9.3137085 2.6862915,12 6,12 Z' fill='%23FF5959'%3E%3C/path%3E%3Cg transform='translate(2, 2)' stroke='%23FFFFFF'%3E%3Ccircle cx='4' cy='4' r='4'%3E%3C/circle%3E%3Cline x1='1.07141075' y1='1.23997894' x2='6.64700843' y2='6.81557662'%3E%3C/line%3E%3C/g%3E%3C/g%3E%3C/svg%3E") 6 6, auto`,u$w=new Vector3;function w$o(cr){const{raycaster:vn,line:yn,clampToLine:Rn=!0}=cr,Bn=new Plane().setFromNormalAndCoplanarPoint(vn.ray.direction.clone().normalize(),new Vector3),Co=Bn.projectPoint(yn.start,new Vector3),Po=Bn.projectPoint(yn.end,new Vector3),To=new Line3(Co,Po),Io=To.closestPointToPoint(vn.ray.origin,Rn,u$w),$l=Io.distanceTo(Po),Wl=Io.distanceTo(Co),Xl=To.distance();if($l>Wl&&$l>Xl){const Yl=-Io.distanceTo(Co)/Xl,Zl=yn.start.clone().sub(yn.end).normalize();return yn.start.clone().sub(Zl.clone().multiplyScalar(Yl*yn.distance()))}else{const Yl=Io.distanceTo(Co)/Xl;return new Vector3().lerpVectors(yn.start,yn.end,Yl)}}var $$b=Object.defineProperty,_$h=Object.defineProperties,k$m=Object.getOwnPropertyDescriptors,R$m=Object.getOwnPropertySymbols,P$v=Object.prototype.hasOwnProperty,L$l=Object.prototype.propertyIsEnumerable,C$m=(cr,vn,yn)=>vn in cr?$$b(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,g$B=(cr,vn)=>{for(var yn in vn||(vn={}))P$v.call(vn,yn)&&C$m(cr,yn,vn[yn]);if(R$m)for(var yn of R$m(vn))L$l.call(vn,yn)&&C$m(cr,yn,vn[yn]);return cr},v$v=(cr,vn)=>_$h(cr,k$m(vn)),n$q=(cr,vn,yn)=>(C$m(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),l$q=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const J$i=3,G$f="CSS3DRenderer",f$F=`${G$f}@${J$i}`,S$q=()=>{console.error(`${f$F} is disposed`)},i$q={css3DObjects:[],frontModeStore:{css3DRenderer:new W$f},behindModeStore:{css3DRenderer:new W$f}};function w$n(cr){return i$q.css3DObjects.find(vn=>vn.id===cr)}function K$h(cr){i$q.frontModeStore.css3DRenderer.setWrapper(cr)}function Q$d(cr){i$q.behindModeStore.css3DRenderer.setWrapper(cr)}class y$u{constructor(vn){n$q(this,"hooks",new E$v),n$q(this,"state",{enabled:!0,visible:!0,disposed:!1}),n$q(this,"_scene"),n$q(this,"store",{frontModeGroup:new c$D}),n$q(this,"create3DElement",(yn,Rn,Bn)=>{if(this.state.disposed)return S$q();const Co=(()=>{const ay={ratio:.00216,devicePixelRatio:1,mode:"front",autoRender:!0,container:document.createElement("div"),pointerEvents:"none",wrapperStyle:{}};return Object.assign(ay,Bn)})(),Po=Rn.map(t$j);if((Po==null?void 0:Po.length)<4)return console.error(`${f$F}: requires 4 point but params may have fewer`);const{ratio:To,devicePixelRatio:Io,mode:$l,autoRender:Wl,container:Xl,pointerEvents:Yl,wrapperStyle:Zl}=Co;let ey=!1;const Rm=this.createObject(Po,{ratio:To,dpr:Io,container:Xl,mode:$l,pointerEvents:Yl,wrapperStyle:Zl});i$q.css3DObjects.push(Rm),Co.scene&&this.setScene(Co.scene);const ry=()=>{if(ey)return;const ay=Rm.mode==="front"?this.getFrontCSS3DObjectGroup():this.getBehindCSS3DObjectGroup();ay&&ay.add(Rm)},_g=()=>{ey||(ry(),this.render(yn),this.hooks.emit("render"))},ty=ay=>this.setVisibleById(Rm.id,ay),ny=ay=>this.setEnabledById(Rm.id,ay),iy=()=>(ey=!0,Rm.removeFromParent(),!0),oy=$l==="front"?i$q.frontModeStore.css3DRenderer:i$q.behindModeStore.css3DRenderer;return Wl&&_g(),{id:Rm.uuid,container:Xl,css3DObject:Rm,render:Wl?void 0:_g,show:()=>ty(!0),hide:()=>ty(!1),setVisible:ty,enable:()=>ny(!0),disable:()=>ny(!1),setEnabled:ny,dispose:iy,appendToElement:ay=>oy.setWrapper(ay)}}),n$q(this,"setVisibleById",(yn,Rn)=>{var Bn;(Bn=w$n(yn))==null||Bn.setVisible(Rn)}),n$q(this,"setEnabledById",(yn,Rn)=>{const Bn=w$n(yn);if(!Bn)return;const Co=Bn.mode==="front"?this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}):this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1});Co&&(Rn?Co.add(Bn):Co.remove(Bn))}),n$q(this,"createObject",(yn,Rn)=>{const Bn=new ti(v$v(g$B({cornerPoints:yn},Rn),{style:Rn.wrapperStyle}));return Bn.element.classList.add(`${G$f}__container`),Bn.element.id=`${G$f}__container--${Bn.uuid}`,Bn}),vn&&this.setScene(vn)}get scene(){return this._scene||console.error("scene doesn't exist!, please call setScene(scene) first"),this._scene}static get frontModeCSS3DRenderer(){return i$q.frontModeStore.css3DRenderer}static get behindModeCSS3DRenderer(){return i$q.behindModeStore.css3DRenderer}get frontModeCSS3DRenderer(){return i$q.frontModeStore.css3DRenderer}get behindModeCSS3DRenderer(){return i$q.behindModeStore.css3DRenderer}setScene(vn){this._scene=vn}getCurrentState(){return this.state}setState(vn,yn={userAction:!0}){if(this.state.disposed)return S$q();const Rn=g$B({},this.state);this.state=Object.assign(this.state,vn),Rn.visible!==this.state.visible&&(vn.visible?this.handleShow():this.handleHide()),Rn.enabled!==this.state.enabled&&(vn.enabled?this.handleEnable():this.handleDisable()),Rn.disposed!==this.state.disposed&&this.handleDispose(),this.hooks.emit("stateChange",{state:this.state,prevState:Rn,userAction:yn.userAction})}dispose(){this.setState({disposed:!0}),this.hooks.emit("dispose")}show(){return l$q(this,arguments,function*({userAction:vn}={userAction:!0}){if(this.state.disposed)return S$q();this.setState({visible:!0},{userAction:vn}),this.hooks.emit("show",{userAction:vn})})}hide(){return l$q(this,arguments,function*({userAction:vn}={userAction:!0}){if(this.state.disposed)return S$q();this.setState({visible:!1},{userAction:vn}),this.hooks.emit("hide",{userAction:vn})})}enable({userAction:vn}={userAction:!0}){if(this.state.disposed)return S$q();this.setState({enabled:!0},{userAction:vn}),this.hooks.emit("enable",{userAction:vn})}disable({userAction:vn}={userAction:!0}){if(this.state.disposed)return S$q();this.setState({enabled:!1},{userAction:vn}),this.hooks.emit("disable",{userAction:vn})}getFrontCSS3DScene({createSceneIfNotExists:vn=!1}={}){var yn;const Rn=(yn=i$q.frontModeStore)==null?void 0:yn.css3DScene;if(Rn)return Rn;if(vn){const Bn=new m$z;i$q.frontModeStore.css3DScene=Bn}return i$q.frontModeStore.css3DScene}getBehindCSS3DScene({createSceneIfNotExists:vn=!1}={}){var yn,Rn;const Bn=(yn=i$q.behindModeStore)==null?void 0:yn.css3DScene;if(Bn)return Bn;if(vn){const Co=(Rn=i$q.behindModeStore.scene)!=null?Rn:this.scene;if(!Co){console.error(`${f$F}: scene is required when mode is behind`);return}const Po=new u$y(Co);i$q.behindModeStore.css3DScene=Po,i$q.behindModeStore.scene=Co}return i$q.behindModeStore.css3DScene}getFrontCSS3DObjectGroup({addGroupIfNotExists:vn=!0}={}){const yn=this.getFrontCSS3DScene({createSceneIfNotExists:vn});return vn&&yn&&(yn.getObjectById(this.store.frontModeGroup.id)||yn.add(this.store.frontModeGroup)),this.store.frontModeGroup}getBehindCSS3DObjectGroup({addGroupIfNotExists:vn=!0}={}){var yn;const Rn=this.getBehindCSS3DScene({createSceneIfNotExists:vn});if(vn&&Rn&&this.scene){const Bn=(yn=this.store.behindModeGroup)!=null?yn:new m$y(this.scene);this.store.behindModeGroup=Bn,Rn.getObjectById(Bn.id)||Rn.add(Bn)}return this.store.behindModeGroup}render(vn){var yn,Rn;if(this.getFrontCSS3DObjectGroup({addGroupIfNotExists:!1}).CSS3DObjectLength>0){const Bn=this.getFrontCSS3DScene({createSceneIfNotExists:!0});if(!Bn)return console.error(`${f$F}: css3DScene is required when mode is front`);i$q.frontModeStore.css3DRenderer.renderEveryFrame(Bn,vn)}if(((Rn=(yn=this.getBehindCSS3DObjectGroup({addGroupIfNotExists:!1}))==null?void 0:yn.CSS3DObjectLength)!=null?Rn:0)>0){const Bn=this.getBehindCSS3DScene({createSceneIfNotExists:!0});if(!Bn)return console.error(`${f$F}: css3DScene is required when mode is behind`);i$q.behindModeStore.css3DRenderer.renderEveryFrame(Bn,vn)}}handleShow(){return l$q(this,null,function*(){var vn;this.store.frontModeGroup.setVisible(!0),(vn=this.store.behindModeGroup)==null||vn.setVisible(!0)})}handleHide(){return l$q(this,null,function*(){var vn;this.store.frontModeGroup.setVisible(!1),(vn=this.store.behindModeGroup)==null||vn.setVisible(!1)})}handleEnable(){var vn,yn;(vn=this.getFrontCSS3DScene())==null||vn.add(this.store.frontModeGroup),this.store.behindModeGroup&&((yn=this.getBehindCSS3DScene())==null||yn.add(this.store.behindModeGroup))}handleDisable(){var vn,yn,Rn;this.store.frontModeGroup.children.forEach(Bn=>{Bn instanceof c$I&&Bn.element instanceof Element&&Bn.element.parentNode!==null&&Bn.element.remove()}),(vn=this.store.behindModeGroup)==null||vn.children.forEach(Bn=>{Bn instanceof c$I&&Bn.element instanceof Element&&Bn.element.parentNode!==null&&Bn.element.remove()}),(yn=this.getFrontCSS3DScene())==null||yn.remove(this.store.frontModeGroup),this.store.behindModeGroup&&((Rn=this.getBehindCSS3DScene())==null||Rn.remove(this.store.behindModeGroup))}handleDispose(){this.handleDisable()}}n$q(y$u,"setFrontModeContainer",K$h),n$q(y$u,"setBehindModeContainer",Q$d);var A$v=Object.defineProperty,D$p=(cr,vn,yn)=>vn in cr?A$v(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$v=(cr,vn,yn)=>(D$p(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const $$a=1,W$e=`CSS3DObjectPlus@${$$a}`,k$l=.00216,z$k=.003;class ti extends c$I{constructor(vn){var yn,Rn,Bn,Co,Po;if(t$e(vn.cornerPoints)&&t$e(vn.width))throw new Error("cornerPoints and width cannot be both empty");const To=(yn=vn.container)!=null?yn:document.createElement("div"),Io=(Rn=vn.cornerPoints)!=null?Rn:(()=>{const my=vn.width/2;return[new Vector3(-my,my,0),new Vector3(-my,-my,0),new Vector3(my,-my,0),new Vector3(my,my,0)]})(),$l=(Bn=vn.ratio)!=null?Bn:z$k,Wl=(Co=vn.dpr)!=null?Co:1,Xl=(Po=vn.pointerEvents)!=null?Po:"auto",Yl=Math.max(k$l,$l),Zl=Io[0].distanceTo(Io[1]),ey=Io[1].distanceTo(Io[2]),Rm=t$f(Zl/$l*Wl),ry=t$f(ey/$l*Wl),_g=c$J(...Io);let ty;if(Yl===$l)To.style.width=`${Rm}px`,To.style.height=`${ry}px`,ty=To;else{const my=document.createElement("div");my.style.width=`${Rm}px`,my.style.height=`${ry}px`,my.style.pointerEvents="none";const ly=$l/Yl;To.style.position="absolute",To.style.left="0",To.style.top="0",To.style.width=`${ly*Rm}px`,To.style.height=`${ly*ry}px`,my.appendChild(To),ty=my}if(super(ty),o$v(this,"version",$$a),o$v(this,"isCSS3DObjectPlus",!0),o$v(this,"isCSS3DObject",!0),o$v(this,"name",W$e),o$v(this,"container"),o$v(this,"width"),o$v(this,"height"),o$v(this,"domWidthPx"),o$v(this,"domHeightPx"),o$v(this,"cornerPoints"),o$v(this,"centerPosition"),o$v(this,"ratio"),o$v(this,"mode","front"),o$v(this,"hooks",new E$v),o$v(this,"opacityMesh"),o$v(this,"selfVisible",!0),o$v(this,"setVisible",my=>{this.selfVisible=my,this.visible=r$D(this.parent)&&this.selfVisible,this.opacityMesh&&(this.opacityMesh.visible=this.visible)}),o$v(this,"updateVisible",()=>{this.setVisible(this.selfVisible)}),o$v(this,"createOpacityMesh",my=>{const{domWidthPx:ly,domHeightPx:sy}=my,cy=new p$B(ly,sy);return cy.position.copy(my.position),cy.rotation.copy(my.rotation),cy.scale.copy(my.scale),cy}),To.style.pointerEvents=Xl,Object.assign(To.style,vn.style),this.scale.set(Yl,Yl,Yl),this.cornerPoints=Io,this.ratio=$l,this.container=To,vn.mode&&(this.mode=vn.mode),Yl===$l)this.width=Zl,this.height=ey,this.domWidthPx=Rm,this.domHeightPx=ry,this.centerPosition=_g;else{const my=$l/Yl;this.width=my*Zl,this.height=my*ey,this.domWidthPx=my*Rm,this.domHeightPx=my*ry,this.centerPosition=new Vector3().subVectors(_g,Io[0]).multiplyScalar(my).add(Io[0])}To.classList.add(`${W$e}__container`);const ny=new Vector3().subVectors(Io[1],Io[0]),iy=new Vector3().subVectors(Io[3],Io[0]),oy=new Vector3().crossVectors(ny,iy).normalize();this.lookAt(oy);const ay=this.up.clone().applyQuaternion(this.quaternion),uy=iy.clone(),hy=new Vector3().crossVectors(ay,uy).normalize();this.rotateOnWorldAxis(hy,ay.angleTo(uy)),this.position.copy(_g),this.addEventListener("added",()=>{var my;this.mode==="front"&&((my=this.opacityMesh)==null||my.removeFromParent())}),this.addEventListener("removed",()=>{var my;(my=this.opacityMesh)==null||my.removeFromParent()})}removeFromParent(){var vn;const yn=this.parent;return yn!==null&&yn.remove(this),(vn=this.opacityMesh)==null||vn.removeFromParent(),this}removeOpacityMesh(){var vn;return(vn=this.opacityMesh)==null||vn.removeFromParent(),this.opacityMesh=void 0,this}dispose(){var vn;this.container.remove(),this.removeFromParent(),(vn=this.opacityMesh)==null||vn.removeFromParent()}getOpacityMesh(){if(this.opacityMesh)return this.opacityMesh;{const vn=this.createOpacityMesh(this);return this.opacityMesh=vn,vn}}applyMatrix4(vn){var yn;super.applyMatrix4(vn),(yn=this.opacityMesh)==null||yn.applyMatrix4(vn)}applyQuaternion(vn){var yn;return super.applyQuaternion(vn),(yn=this.opacityMesh)==null||yn.applyQuaternion(vn),this}applyScaleMatrix4(vn){var yn;this.scale.applyMatrix4(vn),(yn=this.opacityMesh)==null||yn.scale.applyMatrix4(vn)}}var a$u=Object.defineProperty,h$v=(cr,vn,yn)=>vn in cr?a$u(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$p=(cr,vn,yn)=>(h$v(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const M$s=`
varying vec2 vUv;
void main() {
  vUv = uv;
  vec4 mvPosition = modelViewMatrix * vec4(position, 1);
  gl_Position = projectionMatrix * mvPosition;
}
`,u$v=`
varying vec2 vUv;
void main() {
  vec2 uv = vec2(vUv.x, vUv.y);
  float a = 1.0;
  float match = 1.0 - uv.x;
  gl_FragColor = vec4(1.0,1.0,1.0,match);
}
`;function v$u(){const cr=new PlaneGeometry(.4,.4),vn=A$y,yn=new TextureLoader().load(vn);yn.encoding=sRGBEncoding,yn.minFilter=LinearFilter;const Rn=new MeshBasicMaterial({map:yn,transparent:!0,depthTest:!1});return new Mesh(cr,Rn)}function m$s(){const cr=new CurvePath;cr.add(new LineCurve3(new Vector3(0,0,0),new Vector3(0,0,.1)));const vn=new TubeGeometry(cr,8,.003),yn=new ShaderMaterial({vertexShader:M$s,fragmentShader:u$v,depthTest:!1,transparent:!0});return new Mesh(vn,yn)}function b$r(){const cr=new SphereGeometry(.01,20,20),vn=new MeshBasicMaterial({color:10349931,depthTest:!1,transparent:!0,side:DoubleSide}),yn=new Mesh(cr,vn);return yn.position.set(0,0,.1),yn}function w$m(){const cr=new ti({pointerEvents:"none",cornerPoints:[new Vector3(-.2,.2,0),new Vector3(-.2,-.2,0),new Vector3(.2,-.2,0),new Vector3(.2,.2,0)]}),vn=document.createElement("div");return vn.style.width="100%",vn.style.height="100%",vn.style.backgroundImage=`url(${A$x})`,vn.style.backgroundSize="100%",vn.style.backgroundRepeat="no-repeat",cr.container.appendChild(vn),cr}class T$l extends Object3D{constructor(vn){super(),n$p(this,"planeMesh"),n$p(this,"lineMesh"),n$p(this,"ballMesh"),n$p(this,"borderMesh"),n$p(this,"five"),this.planeMesh=v$u(),this.lineMesh=m$s(),this.ballMesh=b$r(),this.borderMesh=w$m(),this.addEventListener("added",()=>{this.add(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),this.addEventListener("removed",()=>{this.remove(this.planeMesh,this.lineMesh,this.ballMesh,this.borderMesh)}),E$u(vn),this.five=vn}updateWithIntersect(vn){var yn;const Rn=(yn=vn==null?void 0:vn.face)!=null&&yn.normal?new Vector3().addVectors(vn.point,vn.face.normal):this.five.camera.position;this.position.copy(vn.point),this.lookAt(Rn)}show(){this.visible=!0,this.borderMesh.parent||this.add(this.borderMesh)}hide(){this.visible=!1,this.remove(this.borderMesh)}dispose(){var vn;(vn=this.planeMesh.material.map)==null||vn.dispose()}}var d$z=Object.defineProperty,m$r=(cr,vn,yn)=>vn in cr?d$z(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,t$a=(cr,vn,yn)=>(m$r(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class T$k{constructor(vn,yn){t$a(this,"five"),t$a(this,"hooks",new E$v),t$a(this,"position",null),t$a(this,"magnifier",null),t$a(this,"pointHelper",null),t$a(this,"state",{enabled:!1,visible:!0}),t$a(this,"group",new Group$1),t$a(this,"show",()=>{var $l,Wl;this.state.visible||(this.state.visible=!0,($l=this.pointHelper)==null||$l.show(),(Wl=this.magnifier)==null||Wl.enable(),this.five.needsRender=!0)}),t$a(this,"hide",()=>{var $l,Wl;this.state.visible&&(this.state.visible=!1,($l=this.pointHelper)==null||$l.hide(),(Wl=this.magnifier)==null||Wl.disable(),this.five.needsRender=!0)}),t$a(this,"updateWithIntersect",($l,Wl={emitEvent:!0})=>{var Xl;if(!$l)return;this.abortUpdateMagnifier(),this.position=$l,Wl.emitEvent&&this.hooks.emit("intersectionUpdate",$l),(Xl=this.pointHelper)==null||Xl.updateWithIntersect($l);const Yl=()=>{var Zl;return(Zl=this.magnifier)==null?void 0:Zl.renderWithPoint($l.point)};this.abortUpdateMagnifier=()=>this.five.off("renderFrame",Yl),this.five.once("renderFrame",Yl),this.five.needsRender=!0}),t$a(this,"abortUpdateMagnifier",()=>{});var Rn,Bn,Co,Po,To;this.five=vn,this.magnifier=(yn==null?void 0:yn.magnifier)!==void 0?yn.magnifier:new S$u(vn,(Rn=yn==null?void 0:yn.magnifierParams)!=null?Rn:{dragEnabled:!0});let Io;(yn==null?void 0:yn.pointHelper)==="default"||(yn==null?void 0:yn.pointHelper)===void 0?Io=new T$l(vn):(yn==null?void 0:yn.pointHelper)==="highlight"?Io=new E$r(vn):Io=yn.pointHelper,this.pointHelper=Io,this.group.name="five-point-selector",this.five.scene.add(this.group),(To=this.magnifier)==null||To.appendTo((Po=(Co=yn.container)!=null?Co:(Bn=vn.getElement())==null?void 0:Bn.parentElement)!=null?Po:document.body)}enable(){var vn;this.state.enabled||(this.state.enabled=!0,this.pointHelper&&this.group.add(this.pointHelper),(vn=this.magnifier)==null||vn.enable(),this.five.needsRender=!0,this.hooks.emit("enabled"))}disable(){var vn;this.state.enabled&&(this.state.enabled=!1,this.pointHelper&&this.group.remove(this.pointHelper),(vn=this.magnifier)==null||vn.disable(),this.hooks.emit("disabled"))}dispose(){this.hooks.off(),this.disable(),this.magnifier=null,this.pointHelper=null}}var R$l=Object.defineProperty,O$j=Object.defineProperties,X$a=Object.getOwnPropertyDescriptors,N$g=Object.getOwnPropertySymbols,Y$d=Object.prototype.hasOwnProperty,B$p=Object.prototype.propertyIsEnumerable,E$q=(cr,vn,yn)=>vn in cr?R$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,P$u=(cr,vn)=>{for(var yn in vn||(vn={}))Y$d.call(vn,yn)&&E$q(cr,yn,vn[yn]);if(N$g)for(var yn of N$g(vn))B$p.call(vn,yn)&&E$q(cr,yn,vn[yn]);return cr},M$r=(cr,vn)=>O$j(cr,X$a(vn)),i$p=(cr,vn,yn)=>(E$q(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const _$g=new Vector3,w$l=()=>!1;class se$3 extends E$v{constructor(vn,yn){var Rn,Bn,Co,Po;super(),i$p(this,"_cursorError",!1),i$p(this,"actionIfNoIntersection","virtualPoint"),i$p(this,"plane"),i$p(this,"planeMode","onlyVirtual"),i$p(this,"pointSelectorHelper"),i$p(this,"five"),i$p(this,"hook",this),i$p(this,"adhereEnabled",!0),i$p(this,"adhereRadius",.1),i$p(this,"adherePlane",[]),i$p(this,"adhereLine",[]),i$p(this,"_outOfFive",!1),i$p(this,"_enabled",!1),i$p(this,"mode"),i$p(this,"pressDown",!1),i$p(this,"adherePoints"),i$p(this,"setPressDown"),i$p(this,"lastFiveHelperVisible"),i$p(this,"lastIntersection"),i$p(this,"mousePosition"),i$p(this,"_mouseDownInfo"),i$p(this,"_touchStartInfo"),i$p(this,"config",{}),i$p(this,"select",$l=>{$l&&this.updatePointSelectorHelperIntersect($l);const Wl=this.emit("wantsSelect",this.position);return Wl||(this.pointSelectorHelper.hide(),this.emit("select",this.position),console.debug(this.position)),!Wl}),i$p(this,"onKeyDown",$l=>{$l.key==="Shift"&&(this.adhereEnabled=!1)}),i$p(this,"onKeyUp",$l=>{$l.key==="Shift"&&(this.adhereEnabled=!0)}),i$p(this,"onMouseWheel",$l=>{this.updateByMousePosition($l);const Wl=()=>this.updateByMousePosition();this.five.off("render.prepare",Wl),this.five.on("render.prepare",Wl),setTimeout(()=>{this.five.off("render.prepare",Wl)},200)}),i$p(this,"onEnter",()=>{this.cursorError||this.pointSelectorHelper.show(),this.outOfFive=!1}),i$p(this,"onMouseEnter",()=>{this.onEnter(),this.emit("intersectionUpdate",this.position)}),i$p(this,"onMouseLeave",()=>{this.pointSelectorHelper.hide(),this.outOfFive=!0,this.emit("intersectionUpdate",void 0)}),i$p(this,"onMouseDown",$l=>{this._mouseDownInfo={clientX:$l.clientX,clientY:$l.clientY,timestamp:performance.now()}}),i$p(this,"onMouseUp",$l=>{if(!this._mouseDownInfo)return;const{clientX:Wl,clientY:Xl,timestamp:Yl}=this._mouseDownInfo;Math.abs($l.clientX-Wl)<2&&Math.abs($l.clientY-Xl)<2&&performance.now()-Yl<500?this.select():this._mouseDownInfo=null}),i$p(this,"onTouchStart",$l=>{this._touchStartInfo={clientX:$l.touches[0].clientX,clientY:$l.touches[0].clientY,timestamp:performance.now()},this.setPressDown=setTimeout(()=>{if(this.setPressDown=void 0,this.mousePosition={clientX:$l.touches[0].clientX,clientY:$l.touches[0].clientY},!this.mouseNdcPosition)return;const Wl=this.updateByNdcPosition(this.mouseNdcPosition);this.pressDown=Wl},200)}),i$p(this,"onTouchMove",$l=>{if(this.setPressDown){let Wl=!1;if(this._touchStartInfo){const{clientX:Xl,clientY:Yl}=this._touchStartInfo;(Math.abs($l.touches[0].clientX-Xl)>2||Math.abs($l.touches[0].clientY-Yl)>2)&&(Wl=!0)}Wl&&(clearTimeout(this.setPressDown),this.setPressDown=void 0);return}if(this.pressDown){if(this.mousePosition={clientX:$l.touches[0].clientX,clientY:$l.touches[0].clientY},!this.mouseNdcPosition)return;this.updateByNdcPosition(this.mouseNdcPosition)}}),i$p(this,"onTouchEnd",$l=>{if(this.setPressDown){clearTimeout(this.setPressDown),this.setPressDown=void 0;return}this.pressDown&&(setTimeout(()=>{this.pressDown=!1},100),this.select())}),i$p(this,"updateByMousePosition",$l=>{if(this.five.getElement()){if(!$l||($l==null?void 0:$l.buttons)!==0){this.pointSelectorHelper.hide();return}else this.pointSelectorHelper.show();$l&&(this.mousePosition={clientX:$l.clientX,clientY:$l.clientY}),this.updateByNdcPosition(this.mouseNdcPosition)}}),i$p(this,"updateByNdcPosition",$l=>{var Wl,Xl,Yl;const Zl=m$t(this.five,$l);let ey=w$p(this.five,Zl);if(ey){if(this.plane&&this.planeMode==="vertical"&&(ey=M$r(P$u({},ey),{point:this.plane.projectPoint(ey.point,new Vector3),face:new Face3(0,0,0,this.plane.normal.clone()),originalPoint:ey.point.clone()})),this.plane&&this.planeMode==="onlyPlane"){const Rm=Zl.ray.intersectPlane(this.plane,_$g);if(!Rm)return!1;ey={distance:this.five.camera.position.distanceTo(Rm),point:Rm.clone(),originalPoint:ey.point.clone(),face:new Face3(0,0,0,this.plane.normal.clone()),raycaster:Zl}}return this.updatePointSelectorHelperIntersect(ey),this.lastIntersection=ey,!0}if(this.plane){const Rm=Zl.ray.intersectPlane(this.plane,_$g);if(Rm){const ry={distance:this.five.camera.position.distanceTo(Rm),point:Rm.clone(),object:new Object3D,face:new Face3(0,0,0,this.plane.normal.clone()),raycaster:Zl,isVirtual:!0};return this.updatePointSelectorHelperIntersect(ry),!0}}if(this.actionIfNoIntersection==="lastPoint")return this.updatePointSelectorHelperIntersect(this.lastIntersection),!0;if(this.actionIfNoIntersection==="virtualPoint"){const Rm=f$G(Zl,(Wl=this.lastIntersection)==null?void 0:Wl.distance);return Rm.face=new Face3(0,0,0,(Yl=(Xl=this.lastIntersection)==null?void 0:Xl.face)==null?void 0:Yl.normal),Rm.isVirtual=!0,this.lastIntersection=Rm,this.updatePointSelectorHelperIntersect(Rm),!0}else if(this.actionIfNoIntersection==="disable")return this.updatePointSelectorHelperIntersect(null),!1}),i$p(this,"updatePointSelectorHelperIntersect",$l=>{var Wl,Xl,Yl,Zl,ey,Rm,ry,_g;if(!$l){this.pointSelectorHelper.hide(),this.pointSelectorHelper.position=$l,this.emit("intersectionUpdate",$l),this.five.getElement().style.cursor=e$f;return}this.onEnter(),this.cursorError||(this.five.getElement().style.cursor="");const ty=P$u({},$l);if(this.adhereEnabled&&this.mouseNdcPosition&&this.five.renderer){const ny={x:this.mouseNdcPosition.x,y:1-this.mouseNdcPosition.y},iy=this.five.renderer.getSize(new Vector2);if(this.adhereEnabled&&typeof this.adherePoints=="function"&&typeof this.adhereRadius=="number"){for(const oy of this.adherePlane){const ay=oy.distanceToPoint($l.point);let uy=oy.projectPoint($l.point,new Vector3);(!this.plane||this.plane.distanceToPoint(uy)<.01)&&(uy=(Xl=(Wl=this.plane)==null?void 0:Wl.projectPoint(uy,new Vector3))!=null?Xl:uy,ay<this.adhereRadius&&(ty.point=uy.clone(),ty.adherePoint=uy.clone(),this.plane||(ty.face=new Face3(0,0,0,oy.normal.clone())),ty.isAdsorbed=!0))}for(const oy of this.adhereLine){let ay=oy.closestPointToPoint($l.point,!1,new Vector3);if(ay.distanceTo($l.point)<this.adhereRadius)(!this.plane||this.plane.distanceToPoint(ay)<.01)&&(ay=(Zl=(Yl=this.plane)==null?void 0:Yl.projectPoint(ay,new Vector3))!=null?Zl:ay,ty.point=ay.clone(),ty.adhereLine=oy.clone(),ty.isAdsorbed=!0);else{const uy=w$o({raycaster:new h$z(this.five.camera.position,$l.point.clone().sub(this.five.camera.position).normalize()),line:oy,clampToLine:!1}),hy=uy.clone().project(this.five.camera);if(hy.z<=1){const my={x:(hy.x+1)/2,y:(1-hy.y)/2},ly={x:Math.abs(my.x-ny.x)*iy.width,y:Math.abs(my.y-ny.y)*iy.height};let sy=uy.clone();ly.x<10&&ly.y<10&&(!this.plane||this.plane.distanceToPoint(sy)<.01)&&(sy=(Rm=(ey=this.plane)==null?void 0:ey.projectPoint(sy,new Vector3))!=null?Rm:sy,ty.point=sy.clone(),ty.adhereLine=oy.clone(),ty.isAdsorbed=!0)}}}for(const oy of this.adherePoints({intersection:$l,pointSelectorInstance:this})){const ay=oy instanceof Face3?new Vector3(oy.a,oy.b,oy.c):oy;if(ay.IsAlwaysVisible=oy.IsAlwaysVisible,!(this.plane&&this.plane.distanceToPoint(ay)>.01))if(ay.distanceTo($l.point)<this.adhereRadius){ty.point=(_g=(ry=this.plane)==null?void 0:ry.projectPoint(ay,new Vector3))!=null?_g:ay.clone(),!this.plane&&oy instanceof Face3&&(ty.face=oy),ty.isAdsorbed=!0;break}else{const uy=ay.clone().project(this.five.camera);if(uy.z>1)continue;const hy=this.five.renderer.getSize(new Vector2),my={x:(uy.x+1)/2,y:(1-uy.y)/2},ly={x:Math.abs(my.x-ny.x)*hy.width,y:Math.abs(my.y-ny.y)*hy.height};if(ly.x<10&&ly.y<10){let sy=!1;if(ay.IsAlwaysVisible)sy=!0;else{const cy=new Raycaster;cy.setFromCamera(ay.clone(),this.five.camera);const fy=this.five.model.intersectRaycaster(cy,void 0,!0)[0],vy=.1,dy=this.five.camera.position.distanceTo(ay);fy&&fy.distance<dy+vy&&(sy=!0)}if(sy){ty.point=ay.clone(),!this.plane&&oy instanceof Face3&&(ty.face=oy),ty.isAdsorbed=!0;break}}}}}}this.pointSelectorHelper.updateWithIntersect(ty,{emitEvent:!1}),this.emit("intersectionUpdate",ty)}),i$p(this,"mousePositionToNdcPosition",$l=>{const Wl=this.five.getElement();if(!Wl)return null;const{top:Xl,left:Yl,width:Zl,height:ey}=Wl.getBoundingClientRect(),{clientX:Rm,clientY:ry}=$l;return{x:(Rm-Yl)/Zl,y:1-(ry-Xl)/ey}}),i$p(this,"onFiveWantsPanGesture",()=>{if(this.pressDown)return!1}),i$p(this,"renderScreenCenter",()=>{this.updateByNdcPosition({x:.5,y:.5})}),i$p(this,"emitIntersectionUpdate",$l=>{this.emit("intersectionUpdate",$l)}),this.five=vn,this.config=P$u(P$u({},this.config),yn),this.actionIfNoIntersection=(Bn=(Rn=yn==null?void 0:yn.actionIfNoIntersection)!=null?Rn:yn==null?void 0:yn.actionIfNoModelUnderMouse)!=null?Bn:"virtualPoint";const To=(Co=yn==null?void 0:yn.mode)!=null?Co:"auto";To==="auto"?this.mode=o$w?"fixed":"cursor":this.mode=To;const Io={autoFixPCPosition:this.mode==="cursor",initialPosition:this.mode==="fixed"?{left:"35%",top:"20%"}:void 0};this.pointSelectorHelper=new T$k(this.five,M$r(P$u({},yn==null?void 0:yn.helper),{magnifierParams:P$u(P$u({},Io),(Po=yn==null?void 0:yn.helper)==null?void 0:Po.magnifierParams)})),this.pointSelectorHelper.hide()}get position(){if(!this.outOfFive)return this.pointSelectorHelper.position}get outOfFive(){return this._outOfFive}get enabled(){return this._enabled}get cursorError(){return this._cursorError}set cursorError(vn){this._cursorError=vn,this.five.getElement().style.cursor=vn?e$f:"",vn?this.pointSelectorHelper.hide():this.pointSelectorHelper.show()}set outOfFive(vn){this._outOfFive=vn}set enabled(vn){this._enabled=vn}get mouseNdcPosition(){return this.mousePosition?this.mousePositionToNdcPosition(this.mousePosition):null}enable(){if(this.enabled)return;this.enabled=!0,this.outOfFive=!1,this.pointSelectorHelper.enable(),this.pointSelectorHelper.hide();const vn=this.five.getElement();if(!vn)throw new Error("five element not found");this.mode==="cursor"?(this.five.on("wantsMoveToPano",w$l),this.five.on("wantsChangeMode",w$l),this.five.on("wantsTapGesture",w$l),vn.addEventListener("touchstart",this.onTouchStart,{passive:!0}),vn.addEventListener("touchmove",this.onTouchMove),vn.addEventListener("touchend",this.onTouchEnd),vn.addEventListener("mousedown",this.onMouseDown),vn.addEventListener("mouseup",this.onMouseUp),vn.addEventListener("mousemove",this.updateByMousePosition),vn.addEventListener("wheel",this.onMouseWheel),vn.addEventListener("mouseenter",this.onMouseEnter),vn.addEventListener("mouseout",this.onMouseLeave),this.five.on("wantsPanGesture",this.onFiveWantsPanGesture)):this.mode==="fixed"&&(this.five.on("panoArrived",this.renderScreenCenter),this.five.on("panGesture",this.renderScreenCenter),this.five.on("interiaPan",this.renderScreenCenter),this.renderScreenCenter(),this.pointSelectorHelper.show()),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.on("intersectionUpdate",this.emitIntersectionUpdate),this.lastFiveHelperVisible=this.five.helperVisible,this.five.helperVisible=!1,this.emit("enable")}disable(){if(!this.enabled)return;this.enabled=!1,this.adherePoints=null,this.adhereLine=[],this.adherePlane=[],this.plane=void 0,this.pointSelectorHelper.disable(),this.five.getElement().style.cursor="";const vn=this.five.getElement();this.five.off("wantsPanGesture",this.onFiveWantsPanGesture),this.five.off("wantsMoveToPano",w$l),this.five.off("wantsChangeMode",w$l),this.five.off("wantsTapGesture",w$l),this.five.helperVisible=this.lastFiveHelperVisible,vn==null||vn.removeEventListener("touchstart",this.onTouchStart),vn==null||vn.removeEventListener("touchmove",this.onTouchMove),vn==null||vn.removeEventListener("touchend",this.onTouchEnd),vn==null||vn.removeEventListener("mousedown",this.onMouseDown),vn==null||vn.removeEventListener("mouseup",this.onMouseUp),vn==null||vn.removeEventListener("mousemove",this.updateByMousePosition),vn==null||vn.removeEventListener("wheel",this.onMouseWheel),vn==null||vn.removeEventListener("mouseenter",this.onMouseEnter),vn==null||vn.removeEventListener("mouseout",this.onMouseLeave),this.five.off("panoArrived",this.renderScreenCenter),this.five.off("panGesture",this.renderScreenCenter),this.five.off("interiaPan",this.renderScreenCenter),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.pointSelectorHelper.hooks.off("intersectionUpdate",this.emitIntersectionUpdate),this.emit("disable")}dispose(){this.disable(),this.pointSelectorHelper.dispose()}setAdherePoints(vn,yn){vn?typeof vn=="function"?this.adherePoints=vn:this.adherePoints=()=>vn:this.adherePoints=null}}var P$t=Object.defineProperty,C$l=(cr,vn,yn)=>vn in cr?P$t(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$w=(cr,vn,yn)=>(C$l(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),u$u=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const M$q=new Vector2;class R$k{constructor(vn,yn,Rn){r$w(this,"container"),r$w(this,"visible",!1),r$w(this,"enabled",!1),r$w(this,"visibles",[]),r$w(this,"wrapper"),r$w(this,"positionsForRotate"),r$w(this,"intersectCheck",!0),r$w(this,"extraObjectsForIntersectCheck",[]),r$w(this,"simulate3D",!1),r$w(this,"tagWrapper"),r$w(this,"five"),r$w(this,"originPosition"),r$w(this,"transformedPosition"),r$w(this,"disposer"),r$w(this,"config"),r$w(this,"fiveUtil"),r$w(this,"disposers",[]),r$w(this,"onModeChange",()=>{this.visibles[3]=void 0,this.updateVisible()}),r$w(this,"onPanoArrived",()=>{this.visibles[3]=void 0,this.updateVisible()}),r$w(this,"onCameraUpdate",()=>{this.visible!==!1&&this.updateScreenPosition()}),r$w(this,"onCameraFovUpdate",()=>{this.onCameraUpdate(),this.five.off("render.prepare",this.onCameraUpdate),this.five.on("render.prepare",this.onCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.onCameraUpdate)},1e3)}),r$w(this,"onFiveEveryReady",()=>{this.five.state.mode!=="Panorama"&&this.updateVisible()}),r$w(this,"updateVisible",()=>{this.visible&&(this.updateIntersectCheckVisible(),this.needsRender=!0)}),r$w(this,"applyVisible",()=>{this.visibles[3]===!0||this.visibles.every(To=>To!==!1)?(this.container.style.opacity="1",this.container.style.pointerEvents="auto"):(this.container.style.opacity="0",this.container.style.pointerEvents="none")}),r$w(this,"updateIntersectCheckVisible",()=>{var To,Io;if(!this.position)return;if(!this.intersectCheck){this.visibles[1]=!0;return}let $l=!1,Wl=.01;this.fiveUtil.workUtil.fromType==="poincare"&&(Wl=.05);const Xl=this.transformedPosition.clone().sub(this.five.camera.position).normalize();t$g.set(this.five.camera.position,Xl);const Yl=(To=l$w(this.five).intersectRaycaster(t$g))!=null?To:[],Zl=(Io=t$g.intersectObjects(this.extraObjectsForIntersectCheck,!0))!=null?Io:[],ey=[...Yl,...Zl].sort((Rm,ry)=>Rm.distance-ry.distance)[0];ey?$l=(ey==null?void 0:ey.distance)+Wl>this.transformedPosition.distanceTo(this.five.camera.position):$l=!0,this.visibles[1]=$l});var Bn,Co,Po;this.five=vn,this.fiveUtil=(Bn=vn.__fiveUtil__)!=null?Bn:vn.__fiveUtil__=new c$M(vn),this.originPosition=yn?t$j(yn).clone():void 0,this.transformedPosition=(Co=this.originPosition)==null?void 0:Co.clone(),this.positionsForRotate=(Po=Rn==null?void 0:Rn.positionsForRotate)==null?void 0:Po.map(To=>t$j(To).clone()),this.config=Rn!=null?Rn:{},this.container=(()=>{const To=document.createElement("div");return To.classList.add("light-tag"),To.style.width="0",To.style.height="0",To.style.position="absolute",Rn!=null&&Rn.disableOpacityTransition||(To.style.transition="opacity 0.2s linear"),To})(),this.addResizeListener(),this.show(),this.enable(),setTimeout(()=>{this.updateVisible(),this.needsRender=!0},0)}get position(){return this.transformedPosition}set needsRender(vn){this.applyVisible()}show(vn){this.visible=!0,this.visibles[0]=!0,vn!=null&&vn.force&&(this.visibles[3]=!0),this.container.style.opacity="1",this.container.style.pointerEvents="auto",this.updateVisible(),this.onCameraUpdate()}hide(){this.visible=!1,this.visibles[0]=!1,this.container.style.opacity="0",this.container.style.pointerEvents="none"}enable(){return u$u(this,null,function*(){var vn,yn,Rn,Bn;if(this.enabled||(this.enabled=!0,yield M$u(this.five),!this.enabled))return;if(this.wrapper=(yn=this.config.wrapper)!=null?yn:(vn=this.five.getElement())==null?void 0:vn.parentElement,!this.wrapper){console.error("lighttag: wrapper is required");return}const Co=`light-tag-wrapper-${(Bn=(Rn=this.config)==null?void 0:Rn.namespace)!=null?Bn:"default"}`;if(!this.tagWrapper){let To=Array.from(this.wrapper.children).find(Io=>Io.id===Co);if(!To){const Io=document.createElement("div");To=Io,Io.id=Co,Io.style.position="absolute",Io.style.overflow="hidden",Io.style.top="0",Io.style.left="0",Io.style.width="100%",Io.style.height="100%",Io.style.pointerEvents="none",Io.style.zIndex="1",this.wrapper.appendChild(To)}this.tagWrapper=To}this.tagWrapper.appendChild(this.container),this.updateVisible();const Po=i$x(this.five,this.onFiveEveryReady);this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("cameraFovUpdate",this.onCameraFovUpdate),this.five.on("panoArrived",this.onPanoArrived),this.five.on("modeChange",this.onModeChange),this.disposer=()=>{Po(),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("cameraFovUpdate",this.onCameraFovUpdate),this.five.off("panoArrived",this.onPanoArrived),this.five.off("modeChange",this.onModeChange)}})}disable(){var vn,yn;this.enabled&&(this.enabled=!1,(vn=this.tagWrapper)==null||vn.removeChild(this.container),(yn=this.disposer)==null||yn.call(this))}destroy(){this.disable(),this.container.remove(),this.disposers.forEach(vn=>vn())}setPosition(vn,yn){this.transformedPosition=t$j(vn).clone(),this.positionsForRotate=yn==null?void 0:yn.map(Rn=>t$j(Rn).clone()),this.onCameraUpdate(),setTimeout(()=>this.onCameraUpdate(),0)}setTransformMatrix(vn){var yn;this.transformedPosition=(yn=this.originPosition)==null?void 0:yn.clone().applyMatrix4(vn),this.onCameraUpdate()}updateScreenPosition(){var vn;if(!this.transformedPosition){this.container.style.left="-100%",this.container.style.top="-100%";return}const yn=(vn=this.five.renderer)==null?void 0:vn.getSize(M$q);if(!yn){this.container.style.left="-100%",this.container.style.top="-100%";return}const Rn=i$z(this.five.camera,this.transformedPosition,yn);if(!Rn){this.container.style.left="-100%",this.container.style.top="-100%";return}const Bn=(()=>{if(!this.simulate3D)return 1;const Po=3*Math.tan(.5*this.five.camera.fov/180*Math.PI),To=this.transformedPosition.distanceTo(this.five.camera.position);return Math.max(Math.min(1-Po*To/40,1),.75)})(),Co=(()=>{if(this.positionsForRotate===void 0||this.positionsForRotate.length!==2)return 0;const[Po,To]=this.positionsForRotate,Io=i$z(this.five.camera,Po,yn),$l=i$z(this.five.camera,To,yn);if(!Io||!$l)return 0;const Wl=Io.leftPx>$l.leftPx?$l:Io,Xl=Io.leftPx>$l.leftPx?Io:$l,Yl=Xl.leftPx-Wl.leftPx,Zl=Xl.topPx-Wl.topPx;return Math.atan2(Zl,Yl)*(180/Math.PI)})();this.container.style.left=Rn.leftPx+"px",this.container.style.top=Rn.topPx+"px",this.container.style.transformOrigin="center",this.container.style.transform=`scale(${Bn})`,Co&&(this.container.style.transform+=` rotate(${Co}deg)`)}addResizeListener(){const vn=this.five.getElement();if(vn){const{observe:yn,unobserve:Rn}=o$G(this.onCameraUpdate,vn);yn(),this.disposers.push(Rn)}}}function R$j(cr){return M$p(cr,"box3")}function T$j(cr){return M$p(cr,"sphere")}function h$u(cr,vn){const yn=vn==="box3"?new Box3:new c$F,Rn=new Vector3;if(cr.updateWorldMatrix(!1,!1),cr.traverse(Bn=>{var Co;if(Bn.name==="shadow"||Bn.type==="Line2")return;const Po=Bn.geometry;if(Bn.updateWorldMatrix(!1,!1),Po!==void 0){const To=(Co=Po==null?void 0:Po.attributes)==null?void 0:Co.position;if(To)for(let Io=0,$l=To.count;Io<$l;Io++)Rn.fromBufferAttribute(To,Io).applyMatrix4(Bn.matrixWorld),yn.expandByPoint(Rn);else Po.vertices&&Po.vertices.forEach(Io=>{const $l=Io.clone().applyMatrix4(Bn.matrixWorld);yn.expandByPoint($l)})}}),!yn.isEmpty())return yn}function M$p(cr,vn){const yn=h$u(cr,vn);return yn&&yn.applyMatrix4(W$d(cr.matrixWorld.clone())),yn}const W$d=cr=>{const vn=cr.elements,yn=vn[0],Rn=vn[1],Bn=vn[2],Co=vn[3],Po=vn[4],To=vn[5],Io=vn[6],$l=vn[7],Wl=vn[8],Xl=vn[9],Yl=vn[10],Zl=vn[11],ey=vn[12],Rm=vn[13],ry=vn[14],_g=vn[15],ty=Xl*ry*$l-Rm*Yl*$l+Rm*Io*Zl-To*ry*Zl-Xl*Io*_g+To*Yl*_g,ny=ey*Yl*$l-Wl*ry*$l-ey*Io*Zl+Po*ry*Zl+Wl*Io*_g-Po*Yl*_g,iy=Wl*Rm*$l-ey*Xl*$l+ey*To*Zl-Po*Rm*Zl-Wl*To*_g+Po*Xl*_g,oy=ey*Xl*Io-Wl*Rm*Io-ey*To*Yl+Po*Rm*Yl+Wl*To*ry-Po*Xl*ry,ay=yn*ty+Rn*ny+Bn*iy+Co*oy;if(ay===0)return cr.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const uy=1/ay;return vn[0]=ty*uy,vn[1]=(Rm*Yl*Co-Xl*ry*Co-Rm*Bn*Zl+Rn*ry*Zl+Xl*Bn*_g-Rn*Yl*_g)*uy,vn[2]=(To*ry*Co-Rm*Io*Co+Rm*Bn*$l-Rn*ry*$l-To*Bn*_g+Rn*Io*_g)*uy,vn[3]=(Xl*Io*Co-To*Yl*Co-Xl*Bn*$l+Rn*Yl*$l+To*Bn*Zl-Rn*Io*Zl)*uy,vn[4]=ny*uy,vn[5]=(Wl*ry*Co-ey*Yl*Co+ey*Bn*Zl-yn*ry*Zl-Wl*Bn*_g+yn*Yl*_g)*uy,vn[6]=(ey*Io*Co-Po*ry*Co-ey*Bn*$l+yn*ry*$l+Po*Bn*_g-yn*Io*_g)*uy,vn[7]=(Po*Yl*Co-Wl*Io*Co+Wl*Bn*$l-yn*Yl*$l-Po*Bn*Zl+yn*Io*Zl)*uy,vn[8]=iy*uy,vn[9]=(ey*Xl*Co-Wl*Rm*Co-ey*Rn*Zl+yn*Rm*Zl+Wl*Rn*_g-yn*Xl*_g)*uy,vn[10]=(Po*Rm*Co-ey*To*Co+ey*Rn*$l-yn*Rm*$l-Po*Rn*_g+yn*To*_g)*uy,vn[11]=(Wl*To*Co-Po*Xl*Co-Wl*Rn*$l+yn*Xl*$l+Po*Rn*Zl-yn*To*Zl)*uy,vn[12]=oy*uy,vn[13]=(Wl*Rm*Bn-ey*Xl*Bn+ey*Rn*Yl-yn*Rm*Yl-Wl*Rn*ry+yn*Xl*ry)*uy,vn[14]=(ey*To*Bn-Po*Rm*Bn-ey*Rn*Io+yn*Rm*Io+Po*Rn*ry-yn*To*ry)*uy,vn[15]=(Po*Xl*Bn-Wl*To*Bn+Wl*Rn*Io-yn*Xl*Io-Po*Rn*Yl+yn*To*Yl)*uy,cr};function n$o(cr){return/^https?:\/\/|^\/\//.test(cr)||/^data:/.test(cr)}function s$i(cr,vn){return n$o(vn)?vn:`${cr}${vn}`}function N$f(){}const Z$a=cr=>cr;function kt$1(cr,vn){for(const yn in vn)cr[yn]=vn[yn];return cr}function xt$2(cr){return!!cr&&(typeof cr=="object"||typeof cr=="function")&&typeof cr.then=="function"}function at$3(cr){return cr()}function ut$3(){return Object.create(null)}function M$o(cr){cr.forEach(at$3)}function L$k(cr){return typeof cr=="function"}function Ft$1(cr,vn){return cr!=cr?vn==vn:cr!==vn||cr&&typeof cr=="object"||typeof cr=="function"}let F$k;function Wt$1(cr,vn){return F$k||(F$k=document.createElement("a")),F$k.href=vn,cr===F$k.href}function Et(cr){return Object.keys(cr).length===0}function Bt(cr,vn,yn,Rn){if(cr){const Bn=dt$2(cr,vn,yn,Rn);return cr[0](Bn)}}function dt$2(cr,vn,yn,Rn){return cr[1]&&Rn?kt$1(yn.ctx.slice(),cr[1](Rn(vn))):yn.ctx}function Ht$1(cr,vn,yn,Rn){if(cr[2]&&Rn){const Bn=cr[2](Rn(yn));if(vn.dirty===void 0)return Bn;if(typeof Bn=="object"){const Co=[],Po=Math.max(vn.dirty.length,Bn.length);for(let To=0;To<Po;To+=1)Co[To]=vn.dirty[To]|Bn[To];return Co}return vn.dirty|Bn}return vn.dirty}function It(cr,vn,yn,Rn,Bn,Co){if(Bn){const Po=dt$2(vn,yn,Rn,Co);cr.p(Po,Bn)}}function Ut(cr){if(cr.ctx.length>32){const vn=[],yn=cr.ctx.length/32;for(let Rn=0;Rn<yn;Rn++)vn[Rn]=-1;return vn}return-1}function Gt(cr){return cr==null?"":cr}function Jt$1(cr){return cr&&L$k(cr.destroy)?cr.destroy:N$f}function Kt(cr){const vn=typeof cr=="string"&&cr.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return vn?[parseFloat(vn[1]),vn[2]||"px"]:[cr,"px"]}const ht$3=typeof window!="undefined";let tt$3=ht$3?()=>window.performance.now():()=>Date.now(),et$2=ht$3?cr=>requestAnimationFrame(cr):N$f;const j$o=new Set;function _t$2(cr){j$o.forEach(vn=>{vn.c(cr)||(j$o.delete(vn),vn.f())}),j$o.size!==0&&et$2(_t$2)}function nt$5(cr){let vn;return j$o.size===0&&et$2(_t$2),{promise:new Promise(yn=>{j$o.add(vn={c:cr,f:yn})}),abort(){j$o.delete(vn)}}}function pt$1(cr,vn){cr.appendChild(vn)}function Qt(cr,vn,yn){const Rn=it$5(cr);if(!Rn.getElementById(vn)){const Bn=K$g("style");Bn.id=vn,Bn.textContent=yn,mt$2(Rn,Bn)}}function it$5(cr){if(!cr)return document;const vn=cr.getRootNode?cr.getRootNode():cr.ownerDocument;return vn&&vn.host?vn:cr.ownerDocument}function vt$2(cr){const vn=K$g("style");return mt$2(it$5(cr),vn),vn.sheet}function mt$2(cr,vn){return pt$1(cr.head||cr,vn),vn.sheet}function Nt(cr,vn,yn){cr.insertBefore(vn,yn||null)}function J$h(cr){cr.parentNode&&cr.parentNode.removeChild(cr)}function Vt(cr,vn){for(let yn=0;yn<cr.length;yn+=1)cr[yn]&&cr[yn].d(vn)}function K$g(cr){return document.createElement(cr)}function Mt(cr){return document.createElementNS("http://www.w3.org/2000/svg",cr)}function gt$3(cr){return document.createTextNode(cr)}function Xt$1(){return gt$3(" ")}function Yt(){return gt$3("")}function lt$2(cr,vn,yn,Rn){return cr.addEventListener(vn,yn,Rn),()=>cr.removeEventListener(vn,yn,Rn)}function Zt(cr){return function(vn){return vn.stopPropagation(),cr.call(this,vn)}}function te$4(cr,vn,yn){yn==null?cr.removeAttribute(vn):cr.getAttribute(vn)!==yn&&cr.setAttribute(vn,yn)}function At(cr){return Array.from(cr.childNodes)}function ee$5(cr,vn){vn=""+vn,cr.data!==vn&&(cr.data=vn)}function ne$5(cr,vn,yn,Rn){yn===null?cr.style.removeProperty(vn):cr.style.setProperty(vn,yn,Rn?"important":"")}function re$2(cr,vn,yn){cr.classList[yn?"add":"remove"](vn)}function yt$2(cr,vn,{bubbles:yn=!1,cancelable:Rn=!1}={}){const Bn=document.createEvent("CustomEvent");return Bn.initCustomEvent(cr,yn,Rn,vn),Bn}class se$2{constructor(vn=!1){this.is_svg=!1,this.is_svg=vn,this.e=this.n=null}c(vn){this.h(vn)}m(vn,yn,Rn=null){this.e||(this.is_svg?this.e=Mt(yn.nodeName):this.e=K$g(yn.nodeType===11?"TEMPLATE":yn.nodeName),this.t=yn.tagName!=="TEMPLATE"?yn:yn.content,this.c(vn)),this.i(Rn)}h(vn){this.e.innerHTML=vn,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(vn){for(let yn=0;yn<this.n.length;yn+=1)Nt(this.t,this.n[yn],vn)}p(vn){this.d(),this.h(vn),this.i(this.a)}d(){this.n.forEach(J$h)}}const H$q=new Map;let I$p=0;function Ct$1(cr){let vn=5381,yn=cr.length;for(;yn--;)vn=(vn<<5)-vn^cr.charCodeAt(yn);return vn>>>0}function Pt(cr,vn){const yn={stylesheet:vt$2(vn),rules:{}};return H$q.set(cr,yn),yn}function U$f(cr,vn,yn,Rn,Bn,Co,Po,To=0){const Io=16.666/Rn;let $l=`{
`;for(let ry=0;ry<=1;ry+=Io){const _g=vn+(yn-vn)*Co(ry);$l+=ry*100+`%{${Po(_g,1-_g)}}
`}const Wl=$l+`100% {${Po(yn,1-yn)}}
}`,Xl=`__svelte_${Ct$1(Wl)}_${To}`,Yl=it$5(cr),{stylesheet:Zl,rules:ey}=H$q.get(Yl)||Pt(Yl,cr);ey[Xl]||(ey[Xl]=!0,Zl.insertRule(`@keyframes ${Xl} ${Wl}`,Zl.cssRules.length));const Rm=cr.style.animation||"";return cr.style.animation=`${Rm?`${Rm}, `:""}${Xl} ${Rn}ms linear ${Bn}ms 1 both`,I$p+=1,Xl}function G$e(cr,vn){const yn=(cr.style.animation||"").split(", "),Rn=yn.filter(vn?Co=>Co.indexOf(vn)<0:Co=>Co.indexOf("__svelte")===-1),Bn=yn.length-Rn.length;Bn&&(cr.style.animation=Rn.join(", "),I$p-=Bn,I$p||jt$2())}function jt$2(){et$2(()=>{I$p||(H$q.forEach(cr=>{const{ownerNode:vn}=cr.stylesheet;vn&&J$h(vn)}),H$q.clear())})}let D$o;function v$t(cr){D$o=cr}function A$u(){if(!D$o)throw new Error("Function called outside component initialization");return D$o}function ce$2(cr){A$u().$$.on_mount.push(cr)}function ue$3(cr){A$u().$$.after_update.push(cr)}function le$1(cr){A$u().$$.on_destroy.push(cr)}function fe$3(){const cr=A$u();return(vn,yn,{cancelable:Rn=!1}={})=>{const Bn=cr.$$.callbacks[vn];if(Bn){const Co=yt$2(vn,yn,{cancelable:Rn});return Bn.slice().forEach(Po=>{Po.call(cr,Co)}),!Co.defaultPrevented}return!0}}function ae$2(cr,vn){return A$u().$$.context.set(cr,vn),vn}function de$3(cr){return A$u().$$.context.get(cr)}function he$1(cr,vn){const yn=cr.$$.callbacks[vn.type];yn&&yn.slice().forEach(Rn=>Rn.call(this,vn))}const P$s=[],ft$1=[];let S$p=[];const X$9=[],bt$2=Promise.resolve();let Y$c=!1;function wt$1(){Y$c||(Y$c=!0,bt$2.then(rt$4))}function _e$2(){return wt$1(),bt$2}function z$j(cr){S$p.push(cr)}function pe$3(cr){X$9.push(cr)}const V$a=new Set;let C$k=0;function rt$4(){if(C$k!==0)return;const cr=D$o;do{try{for(;C$k<P$s.length;){const vn=P$s[C$k];C$k++,v$t(vn),St$1(vn.$$)}}catch(vn){throw P$s.length=0,C$k=0,vn}for(v$t(null),P$s.length=0,C$k=0;ft$1.length;)ft$1.pop()();for(let vn=0;vn<S$p.length;vn+=1){const yn=S$p[vn];V$a.has(yn)||(V$a.add(yn),yn())}S$p.length=0}while(P$s.length);for(;X$9.length;)X$9.pop()();Y$c=!1,V$a.clear(),v$t(cr)}function St$1(cr){if(cr.fragment!==null){cr.update(),M$o(cr.before_update);const vn=cr.dirty;cr.dirty=[-1],cr.fragment&&cr.fragment.p(cr.ctx,vn),cr.after_update.forEach(z$j)}}function zt$2(cr){const vn=[],yn=[];S$p.forEach(Rn=>cr.indexOf(Rn)===-1?vn.push(Rn):yn.push(Rn)),yn.forEach(Rn=>Rn()),S$p=vn}let O$i;function st$3(){return O$i||(O$i=Promise.resolve(),O$i.then(()=>{O$i=null})),O$i}function T$i(cr,vn,yn){cr.dispatchEvent(yt$2(`${vn?"intro":"outro"}${yn}`))}const B$o=new Set;let x$r;function Lt(){x$r={r:0,c:[],p:x$r}}function Ot$1(){x$r.r||M$o(x$r.c),x$r=x$r.p}function ot$4(cr,vn){cr&&cr.i&&(B$o.delete(cr),cr.i(vn))}function $t(cr,vn,yn,Rn){if(cr&&cr.o){if(B$o.has(cr))return;B$o.add(cr),x$r.c.push(()=>{B$o.delete(cr),Rn&&(yn&&cr.d(1),Rn())}),cr.o(vn)}else Rn&&Rn()}const ct$3={duration:0};function me$1(cr,vn,yn){const Rn={direction:"in"};let Bn=vn(cr,yn,Rn),Co=!1,Po,To,Io=0;function $l(){Po&&G$e(cr,Po)}function Wl(){const{delay:Yl=0,duration:Zl=300,easing:ey=Z$a,tick:Rm=N$f,css:ry}=Bn||ct$3;ry&&(Po=U$f(cr,0,1,Zl,Yl,ey,ry,Io++)),Rm(0,1);const _g=tt$3()+Yl,ty=_g+Zl;To&&To.abort(),Co=!0,z$j(()=>T$i(cr,!0,"start")),To=nt$5(ny=>{if(Co){if(ny>=ty)return Rm(1,0),T$i(cr,!0,"end"),$l(),Co=!1;if(ny>=_g){const iy=ey((ny-_g)/Zl);Rm(iy,1-iy)}}return Co})}let Xl=!1;return{start(){Xl||(Xl=!0,G$e(cr),L$k(Bn)?(Bn=Bn(Rn),st$3().then(Wl)):Wl())},invalidate(){Xl=!1},end(){Co&&($l(),Co=!1)}}}function ge$5(cr,vn,yn){const Rn={direction:"out"};let Bn=vn(cr,yn,Rn),Co=!0,Po;const To=x$r;To.r+=1;function Io(){const{delay:$l=0,duration:Wl=300,easing:Xl=Z$a,tick:Yl=N$f,css:Zl}=Bn||ct$3;Zl&&(Po=U$f(cr,1,0,Wl,$l,Xl,Zl));const ey=tt$3()+$l,Rm=ey+Wl;z$j(()=>T$i(cr,!1,"start")),nt$5(ry=>{if(Co){if(ry>=Rm)return Yl(0,1),T$i(cr,!1,"end"),--To.r||M$o(To.c),!1;if(ry>=ey){const _g=Xl((ry-ey)/Wl);Yl(1-_g,_g)}}return Co})}return L$k(Bn)?st$3().then(()=>{Bn=Bn(Rn),Io()}):Io(),{end($l){$l&&Bn.tick&&Bn.tick(1,0),Co&&(Po&&G$e(cr,Po),Co=!1)}}}function ye$2(cr,vn,yn,Rn){const Bn={direction:"both"};let Co=vn(cr,yn,Bn),Po=Rn?0:1,To=null,Io=null,$l=null;function Wl(){$l&&G$e(cr,$l)}function Xl(Zl,ey){const Rm=Zl.b-Po;return ey*=Math.abs(Rm),{a:Po,b:Zl.b,d:Rm,duration:ey,start:Zl.start,end:Zl.start+ey,group:Zl.group}}function Yl(Zl){const{delay:ey=0,duration:Rm=300,easing:ry=Z$a,tick:_g=N$f,css:ty}=Co||ct$3,ny={start:tt$3()+ey,b:Zl};Zl||(ny.group=x$r,x$r.r+=1),To||Io?Io=ny:(ty&&(Wl(),$l=U$f(cr,Po,Zl,Rm,ey,ry,ty)),Zl&&_g(0,1),To=Xl(ny,Rm),z$j(()=>T$i(cr,Zl,"start")),nt$5(iy=>{if(Io&&iy>Io.start&&(To=Xl(Io,Rm),Io=null,T$i(cr,To.b,"start"),ty&&(Wl(),$l=U$f(cr,Po,To.b,To.duration,0,ry,Co.css))),To){if(iy>=To.end)_g(Po=To.b,1-Po),T$i(cr,To.b,"end"),Io||(To.b?Wl():--To.group.r||M$o(To.group.c)),To=null;else if(iy>=To.start){const oy=iy-To.start;Po=To.a+To.d*ry(oy/To.duration),_g(Po,1-Po)}}return!!(To||Io)}))}return{run(Zl){L$k(Co)?st$3().then(()=>{Co=Co(Bn),Yl(Zl)}):Yl(Zl)},end(){Wl(),To=Io=null}}}function be$2(cr,vn){const yn=vn.token={};function Rn(Bn,Co,Po,To){if(vn.token!==yn)return;vn.resolved=To;let Io=vn.ctx;Po!==void 0&&(Io=Io.slice(),Io[Po]=To);const $l=Bn&&(vn.current=Bn)(Io);let Wl=!1;vn.block&&(vn.blocks?vn.blocks.forEach((Xl,Yl)=>{Yl!==Co&&Xl&&(Lt(),$t(Xl,1,1,()=>{vn.blocks[Yl]===Xl&&(vn.blocks[Yl]=null)}),Ot$1())}):vn.block.d(1),$l.c(),ot$4($l,1),$l.m(vn.mount(),vn.anchor),Wl=!0),vn.block=$l,vn.blocks&&(vn.blocks[Co]=$l),Wl&&rt$4()}if(xt$2(cr)){const Bn=A$u();if(cr.then(Co=>{v$t(Bn),Rn(vn.then,1,vn.value,Co),v$t(null)},Co=>{if(v$t(Bn),Rn(vn.catch,2,vn.error,Co),v$t(null),!vn.hasCatch)throw Co}),vn.current!==vn.pending)return Rn(vn.pending,0),!0}else{if(vn.current!==vn.then)return Rn(vn.then,1,vn.value,cr),!0;vn.resolved=cr}}function we$1(cr,vn,yn){const Rn=vn.slice(),{resolved:Bn}=cr;cr.current===cr.then&&(Rn[cr.value]=Bn),cr.current===cr.catch&&(Rn[cr.error]=Bn),cr.block.p(Rn,yn)}function ke$2(cr,vn){cr.d(1),vn.delete(cr.key)}function xe(cr,vn){$t(cr,1,1,()=>{vn.delete(cr.key)})}function Ee$3(cr,vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl){let Yl=cr.length,Zl=Co.length,ey=Yl;const Rm={};for(;ey--;)Rm[cr[ey].key]=ey;const ry=[],_g=new Map,ty=new Map,ny=[];for(ey=Zl;ey--;){const uy=Xl(Bn,Co,ey),hy=yn(uy);let my=Po.get(hy);my?Rn&&ny.push(()=>my.p(uy,vn)):(my=$l(hy,uy),my.c()),_g.set(hy,ry[ey]=my),hy in Rm&&ty.set(hy,Math.abs(ey-Rm[hy]))}const iy=new Set,oy=new Set;function ay(uy){ot$4(uy,1),uy.m(To,Wl),Po.set(uy.key,uy),Wl=uy.first,Zl--}for(;Yl&&Zl;){const uy=ry[Zl-1],hy=cr[Yl-1],my=uy.key,ly=hy.key;uy===hy?(Wl=uy.first,Yl--,Zl--):_g.has(ly)?!Po.has(my)||iy.has(my)?ay(uy):oy.has(ly)?Yl--:ty.get(my)>ty.get(ly)?(oy.add(my),ay(uy)):(iy.add(ly),Yl--):(Io(hy,Po),Yl--)}for(;Yl--;){const uy=cr[Yl];_g.has(uy.key)||Io(uy,Po)}for(;Zl;)ay(ry[Zl-1]);return M$o(ny),ry}function ve$1(cr,vn){const yn={},Rn={},Bn={$$scope:1};let Co=cr.length;for(;Co--;){const Po=cr[Co],To=vn[Co];if(To){for(const Io in Po)Io in To||(Rn[Io]=1);for(const Io in To)Bn[Io]||(yn[Io]=To[Io],Bn[Io]=1);cr[Co]=To}else for(const Io in Po)Bn[Io]=1}for(const Po in Rn)Po in yn||(yn[Po]=void 0);return yn}function Ne$3(cr){return typeof cr=="object"&&cr!==null?cr:{}}function Me$1(cr,vn,yn){const Rn=cr.$$.props[vn];Rn!==void 0&&(cr.$$.bound[Rn]=yn,yn(cr.$$.ctx[Rn]))}function Ae$1(cr){cr&&cr.c()}function Dt$1(cr,vn,yn,Rn){const{fragment:Bn,after_update:Co}=cr.$$;Bn&&Bn.m(vn,yn),Rn||z$j(()=>{const Po=cr.$$.on_mount.map(at$3).filter(L$k);cr.$$.on_destroy?cr.$$.on_destroy.push(...Po):M$o(Po),cr.$$.on_mount=[]}),Co.forEach(z$j)}function Rt(cr,vn){const yn=cr.$$;yn.fragment!==null&&(zt$2(yn.after_update),M$o(yn.on_destroy),yn.fragment&&yn.fragment.d(vn),yn.on_destroy=yn.fragment=null,yn.ctx=[])}function qt(cr,vn){cr.$$.dirty[0]===-1&&(P$s.push(cr),wt$1(),cr.$$.dirty.fill(0)),cr.$$.dirty[vn/31|0]|=1<<vn%31}function Te$1(cr,vn,yn,Rn,Bn,Co,Po,To=[-1]){const Io=D$o;v$t(cr);const $l=cr.$$={fragment:null,ctx:[],props:Co,update:N$f,not_equal:Bn,bound:ut$3(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(vn.context||(Io?Io.$$.context:[])),callbacks:ut$3(),dirty:To,skip_bound:!1,root:vn.target||Io.$$.root};Po&&Po($l.root);let Wl=!1;if($l.ctx=yn?yn(cr,vn.props||{},(Xl,Yl,...Zl)=>{const ey=Zl.length?Zl[0]:Yl;return $l.ctx&&Bn($l.ctx[Xl],$l.ctx[Xl]=ey)&&(!$l.skip_bound&&$l.bound[Xl]&&$l.bound[Xl](ey),Wl&&qt(cr,Xl)),Yl}):[],$l.update(),Wl=!0,M$o($l.before_update),$l.fragment=Rn?Rn($l.ctx):!1,vn.target){if(vn.hydrate){const Xl=At(vn.target);$l.fragment&&$l.fragment.l(Xl),Xl.forEach(J$h)}else $l.fragment&&$l.fragment.c();vn.intro&&ot$4(cr.$$.fragment),Dt$1(cr,vn.target,vn.anchor,vn.customElement),rt$4()}v$t(Io)}class Ce$1{$destroy(){Rt(this,1),this.$destroy=N$f}$on(vn,yn){if(!L$k(yn))return N$f;const Rn=this.$$.callbacks[vn]||(this.$$.callbacks[vn]=[]);return Rn.push(yn),()=>{const Bn=Rn.indexOf(yn);Bn!==-1&&Rn.splice(Bn,1)}}$set(vn){this.$$set&&!Et(vn)&&(this.$$.skip_bound=!0,this.$$set(vn),this.$$.skip_bound=!1)}}var _$f=function(){if(typeof Map!="undefined")return Map;function cr(vn,yn){var Rn=-1;return vn.some(function(Bn,Co){return Bn[0]===yn?(Rn=Co,!0):!1}),Rn}return function(){function vn(){this.__entries__=[]}return Object.defineProperty(vn.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),vn.prototype.get=function(yn){var Rn=cr(this.__entries__,yn),Bn=this.__entries__[Rn];return Bn&&Bn[1]},vn.prototype.set=function(yn,Rn){var Bn=cr(this.__entries__,yn);~Bn?this.__entries__[Bn][1]=Rn:this.__entries__.push([yn,Rn])},vn.prototype.delete=function(yn){var Rn=this.__entries__,Bn=cr(Rn,yn);~Bn&&Rn.splice(Bn,1)},vn.prototype.has=function(yn){return!!~cr(this.__entries__,yn)},vn.prototype.clear=function(){this.__entries__.splice(0)},vn.prototype.forEach=function(yn,Rn){Rn===void 0&&(Rn=null);for(var Bn=0,Co=this.__entries__;Bn<Co.length;Bn++){var Po=Co[Bn];yn.call(Rn,Po[1],Po[0])}},vn}()}(),v$s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,f$E=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),O$h=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(f$E):function(cr){return setTimeout(function(){return cr(Date.now())},1e3/60)}}(),E$p=2;function R$i(cr,vn){var yn=!1,Rn=!1,Bn=0;function Co(){yn&&(yn=!1,cr()),Rn&&To()}function Po(){O$h(Co)}function To(){var Io=Date.now();if(yn){if(Io-Bn<E$p)return;Rn=!0}else yn=!0,Rn=!1,setTimeout(Po,vn);Bn=Io}return To}var M$n=20,x$q=["top","right","bottom","left","width","height","size","weight"],A$t=typeof MutationObserver!="undefined",z$i=function(){function cr(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=R$i(this.refresh.bind(this),M$n)}return cr.prototype.addObserver=function(vn){~this.observers_.indexOf(vn)||this.observers_.push(vn),this.connected_||this.connect_()},cr.prototype.removeObserver=function(vn){var yn=this.observers_,Rn=yn.indexOf(vn);~Rn&&yn.splice(Rn,1),!yn.length&&this.connected_&&this.disconnect_()},cr.prototype.refresh=function(){var vn=this.updateObservers_();vn&&this.refresh()},cr.prototype.updateObservers_=function(){var vn=this.observers_.filter(function(yn){return yn.gatherActive(),yn.hasActive()});return vn.forEach(function(yn){return yn.broadcastActive()}),vn.length>0},cr.prototype.connect_=function(){!v$s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),A$t?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},cr.prototype.disconnect_=function(){!v$s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},cr.prototype.onTransitionEnd_=function(vn){var yn=vn.propertyName,Rn=yn===void 0?"":yn,Bn=x$q.some(function(Co){return!!~Rn.indexOf(Co)});Bn&&this.refresh()},cr.getInstance=function(){return this.instance_||(this.instance_=new cr),this.instance_},cr.instance_=null,cr}(),m$q=function(cr,vn){for(var yn=0,Rn=Object.keys(vn);yn<Rn.length;yn++){var Bn=Rn[yn];Object.defineProperty(cr,Bn,{value:vn[Bn],enumerable:!1,writable:!1,configurable:!0})}return cr},c$x=function(cr){var vn=cr&&cr.ownerDocument&&cr.ownerDocument.defaultView;return vn||f$E},y$t=d$y(0,0,0,0);function h$t(cr){return parseFloat(cr)||0}function b$q(cr){for(var vn=[],yn=1;yn<arguments.length;yn++)vn[yn-1]=arguments[yn];return vn.reduce(function(Rn,Bn){var Co=cr["border-"+Bn+"-width"];return Rn+h$t(Co)},0)}function T$h(cr){for(var vn=["top","right","bottom","left"],yn={},Rn=0,Bn=vn;Rn<Bn.length;Rn++){var Co=Bn[Rn],Po=cr["padding-"+Co];yn[Co]=h$t(Po)}return yn}function C$j(cr){var vn=cr.getBBox();return d$y(0,0,vn.width,vn.height)}function S$o(cr){var vn=cr.clientWidth,yn=cr.clientHeight;if(!vn&&!yn)return y$t;var Rn=c$x(cr).getComputedStyle(cr),Bn=T$h(Rn),Co=Bn.left+Bn.right,Po=Bn.top+Bn.bottom,To=h$t(Rn.width),Io=h$t(Rn.height);if(Rn.boxSizing==="border-box"&&(Math.round(To+Co)!==vn&&(To-=b$q(Rn,"left","right")+Co),Math.round(Io+Po)!==yn&&(Io-=b$q(Rn,"top","bottom")+Po)),!G$d(cr)){var $l=Math.round(To+Co)-vn,Wl=Math.round(Io+Po)-yn;Math.abs($l)!==1&&(To-=$l),Math.abs(Wl)!==1&&(Io-=Wl)}return d$y(Bn.left,Bn.top,To,Io)}var D$n=function(){return typeof SVGGraphicsElement!="undefined"?function(cr){return cr instanceof c$x(cr).SVGGraphicsElement}:function(cr){return cr instanceof c$x(cr).SVGElement&&typeof cr.getBBox=="function"}}();function G$d(cr){return cr===c$x(cr).document.documentElement}function L$j(cr){return v$s?D$n(cr)?C$j(cr):S$o(cr):y$t}function P$r(cr){var vn=cr.x,yn=cr.y,Rn=cr.width,Bn=cr.height,Co=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Po=Object.create(Co.prototype);return m$q(Po,{x:vn,y:yn,width:Rn,height:Bn,top:yn,right:vn+Rn,bottom:Bn+yn,left:vn}),Po}function d$y(cr,vn,yn,Rn){return{x:cr,y:vn,width:yn,height:Rn}}var W$c=function(){function cr(vn){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=d$y(0,0,0,0),this.target=vn}return cr.prototype.isActive=function(){var vn=L$j(this.target);return this.contentRect_=vn,vn.width!==this.broadcastWidth||vn.height!==this.broadcastHeight},cr.prototype.broadcastRect=function(){var vn=this.contentRect_;return this.broadcastWidth=vn.width,this.broadcastHeight=vn.height,vn},cr}(),j$n=function(){function cr(vn,yn){var Rn=P$r(yn);m$q(this,{target:vn,contentRect:Rn})}return cr}(),F$j=function(){function cr(vn,yn,Rn){if(this.activeObservations_=[],this.observations_=new _$f,typeof vn!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=vn,this.controller_=yn,this.callbackCtx_=Rn}return cr.prototype.observe=function(vn){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(vn instanceof c$x(vn).Element))throw new TypeError('parameter 1 is not of type "Element".');var yn=this.observations_;yn.has(vn)||(yn.set(vn,new W$c(vn)),this.controller_.addObserver(this),this.controller_.refresh())}},cr.prototype.unobserve=function(vn){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(vn instanceof c$x(vn).Element))throw new TypeError('parameter 1 is not of type "Element".');var yn=this.observations_;yn.has(vn)&&(yn.delete(vn),yn.size||this.controller_.removeObserver(this))}},cr.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},cr.prototype.gatherActive=function(){var vn=this;this.clearActive(),this.observations_.forEach(function(yn){yn.isActive()&&vn.activeObservations_.push(yn)})},cr.prototype.broadcastActive=function(){if(this.hasActive()){var vn=this.callbackCtx_,yn=this.activeObservations_.map(function(Rn){return new j$n(Rn.target,Rn.broadcastRect())});this.callback_.call(vn,yn,vn),this.clearActive()}},cr.prototype.clearActive=function(){this.activeObservations_.splice(0)},cr.prototype.hasActive=function(){return this.activeObservations_.length>0},cr}(),g$A=typeof WeakMap!="undefined"?new WeakMap:new _$f,w$k=function(){function cr(vn){if(!(this instanceof cr))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var yn=z$i.getInstance(),Rn=new F$j(vn,yn,this);g$A.set(this,Rn)}return cr}();["observe","unobserve","disconnect"].forEach(function(cr){w$k.prototype[cr]=function(){var vn;return(vn=g$A.get(this))[cr].apply(vn,arguments)}});var H$p=function(){return typeof f$E.ResizeObserver!="undefined"?f$E.ResizeObserver:w$k}();function E$o(cr){new H$p((vn,yn)=>{var Rn,Bn,Co,Po,To,Io;for(const $l of vn){const{borderBoxSize:Wl,contentRect:Xl}=$l,Yl=(Co=(Bn=(Rn=Wl==null?void 0:Wl[0])==null?void 0:Rn.inlineSize)!=null?Bn:Xl.width)!=null?Co:cr.clientWidth,Zl=(Io=(To=(Po=Wl==null?void 0:Wl[0])==null?void 0:Po.blockSize)!=null?To:Xl.height)!=null?Io:cr.clientHeight;cr.dispatchEvent(new CustomEvent("clientWidth",{detail:Yl})),cr.dispatchEvent(new CustomEvent("clientHeight",{detail:Zl}))}}).observe(cr)}function c$w(cr){return cr<.5?4*cr*cr*cr:.5*Math.pow(2*cr-2,3)+1}function o$u(cr){const vn=cr-1;return vn*vn*vn+1}function C$i(cr,{delay:vn=0,duration:yn=400,easing:Rn=Z$a}={}){const Bn=+getComputedStyle(cr).opacity;return{delay:vn,duration:yn,easing:Rn,css:Co=>`opacity: ${Co*Bn}`}}function S$n(cr,{delay:vn=0,duration:yn=400,easing:Rn=o$u,x:Bn=0,y:Co=0,opacity:Po=0}={}){const To=getComputedStyle(cr),Io=+To.opacity,$l=To.transform==="none"?"":To.transform,Wl=Io*(1-Po),[Xl,Yl]=Kt(Bn),[Zl,ey]=Kt(Co);return{delay:vn,duration:yn,easing:Rn,css:(Rm,ry)=>`
			transform: ${$l} translate(${(1-Rm)*Xl}${Yl}, ${(1-Rm)*Zl}${ey});
			opacity: ${Io-Wl*ry}`}}function I$o(cr,{delay:vn=0,speed:yn,duration:Rn,easing:Bn=c$w}={}){let Co=cr.getTotalLength();const Po=getComputedStyle(cr);return Po.strokeLinecap!=="butt"&&(Co+=parseInt(Po.strokeWidth)),Rn===void 0?yn===void 0?Rn=800:Rn=Co/yn:typeof Rn=="function"&&(Rn=Rn(Co)),{delay:vn,duration:Rn,easing:Bn,css:(To,Io)=>`
			stroke-dasharray: ${Co};
			stroke-dashoffset: ${Io*Co};
		`}}const s$h=[];function h$s(cr,vn=N$f){let yn;const Rn=new Set;function Bn(To){if(Ft$1(cr,To)&&(cr=To,yn)){const Io=!s$h.length;for(const $l of Rn)$l[1](),s$h.push($l,cr);if(Io){for(let $l=0;$l<s$h.length;$l+=2)s$h[$l][0](s$h[$l+1]);s$h.length=0}}}function Co(To){Bn(To(cr))}function Po(To,Io=N$f){const $l=[To,Io];return Rn.add($l),Rn.size===1&&(yn=vn(Bn)||N$f),To(cr),()=>{Rn.delete($l),Rn.size===0&&yn&&(yn(),yn=null)}}return{set:Bn,update:Co,subscribe:Po}}function t$9(cr){return cr*180/Math.PI}var e$e=Object.defineProperty,s$g=(cr,vn,yn)=>vn in cr?e$e(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$o=(cr,vn,yn)=>(s$g(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);let F$i=class{constructor(cr,vn){i$o(this,"VERSION","3.67.1"),i$o(this,"NAME"),i$o(this,"five"),i$o(this,"workUtil"),i$o(this,"fiveUtil"),i$o(this,"hooks",new E$v),i$o(this,"staticPrefix","//vr-image-4.realsee-cdn.cn"),this.five=cr,this.fiveUtil=new c$M(cr),this.workUtil=this.fiveUtil.workUtil,vn!=null&&vn.staticPrefix&&(this.staticPrefix=vn.staticPrefix)}set workCode(cr){this.workUtil.workCode=cr,this.onWorkCodeChange()}get workCode(){return this.workUtil.workCode}updateFive(cr){this.five=cr,this.fiveUtil.five=cr,this.workUtil.five=cr}getCurrentState(){return this.state}absoluteUrl(cr){return s$i(this.staticPrefix,cr)}onWorkCodeChange(){}};function r$v(cr,vn,yn=4){return Math.abs(cr-vn)<Math.pow(10,-yn)}function h$r(cr,vn,yn=4){const Rn=Math.PI*2,Bn=cr%Rn,Co=vn%Rn,Po=Math.min(Bn,Co),To=Math.max(Bn,Co);return r$v(Po,To,yn)||r$v(Po+Rn,To,yn)}Object.assign(window,{nearlyEqual:r$v,nearlyEqualRad:h$r});/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var tt$2={},b$p=void 0,et$1=tt$2;function C$h(cr,vn){var yn=cr.split("."),Rn=et$1;!(yn[0]in Rn)&&Rn.execScript&&Rn.execScript("var "+yn[0]);for(var Bn;yn.length&&(Bn=yn.shift());)!yn.length&&vn!==b$p?Rn[Bn]=vn:Rn=Rn[Bn]?Rn[Bn]:Rn[Bn]={}}var o$t=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function k$k(cr){var vn=cr.length,yn=0,Rn=Number.POSITIVE_INFINITY,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl;for(Xl=0;Xl<vn;++Xl)cr[Xl]>yn&&(yn=cr[Xl]),cr[Xl]<Rn&&(Rn=cr[Xl]);for(Bn=1<<yn,Co=new(o$t?Uint32Array:Array)(Bn),Po=1,To=0,Io=2;Po<=yn;){for(Xl=0;Xl<vn;++Xl)if(cr[Xl]===Po){for($l=0,Wl=To,Yl=0;Yl<Po;++Yl)$l=$l<<1|Wl&1,Wl>>=1;for(Zl=Po<<16|Xl,Yl=$l;Yl<Bn;Yl+=Io)Co[Yl]=Zl;++To}++Po,To<<=1,Io<<=1}return[Co,yn,Rn]}function A$s(cr,vn){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=o$t?new Uint8Array(cr):cr,this.m=!1,this.i=x$p,this.r=!1,(vn||!(vn={}))&&(vn.index&&(this.a=vn.index),vn.bufferSize&&(this.h=vn.bufferSize),vn.bufferType&&(this.i=vn.bufferType),vn.resize&&(this.r=vn.resize)),this.i){case D$m:this.b=32768,this.c=new(o$t?Uint8Array:Array)(32768+this.h+258);break;case x$p:this.b=0,this.c=new(o$t?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var D$m=0,x$p=1,J$g={t:D$m,s:x$p};A$s.prototype.k=function(){for(;!this.m;){var cr=v$r(this,3);switch(cr&1&&(this.m=!0),cr>>>=1,cr){case 0:var vn=this.input,yn=this.a,Rn=this.c,Bn=this.b,Co=vn.length,Po=b$p,To=b$p,Io=Rn.length,$l=b$p;if(this.d=this.f=0,yn+1>=Co)throw Error("invalid uncompressed block header: LEN");if(Po=vn[yn++]|vn[yn++]<<8,yn+1>=Co)throw Error("invalid uncompressed block header: NLEN");if(To=vn[yn++]|vn[yn++]<<8,Po===~To)throw Error("invalid uncompressed block header: length verify");if(yn+Po>vn.length)throw Error("input buffer is broken");switch(this.i){case D$m:for(;Bn+Po>Rn.length;){if($l=Io-Bn,Po-=$l,o$t)Rn.set(vn.subarray(yn,yn+$l),Bn),Bn+=$l,yn+=$l;else for(;$l--;)Rn[Bn++]=vn[yn++];this.b=Bn,Rn=this.e(),Bn=this.b}break;case x$p:for(;Bn+Po>Rn.length;)Rn=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(o$t)Rn.set(vn.subarray(yn,yn+Po),Bn),Bn+=Po,yn+=Po;else for(;Po--;)Rn[Bn++]=vn[yn++];this.a=yn,this.b=Bn,this.c=Rn;break;case 1:this.j(st$2,ht$2);break;case 2:for(var Wl=v$r(this,5)+257,Xl=v$r(this,5)+1,Yl=v$r(this,4)+4,Zl=new(o$t?Uint8Array:Array)(O$g.length),ey=b$p,Rm=b$p,ry=b$p,_g=b$p,ty=b$p,ny=b$p,iy=b$p,ay=b$p,oy=b$p,ay=0;ay<Yl;++ay)Zl[O$g[ay]]=v$r(this,3);if(!o$t)for(ay=Yl,Yl=Zl.length;ay<Yl;++ay)Zl[O$g[ay]]=0;for(ey=k$k(Zl),_g=new(o$t?Uint8Array:Array)(Wl+Xl),ay=0,oy=Wl+Xl;ay<oy;)switch(ty=T$g(this,ey),ty){case 16:for(iy=3+v$r(this,2);iy--;)_g[ay++]=ny;break;case 17:for(iy=3+v$r(this,3);iy--;)_g[ay++]=0;ny=0;break;case 18:for(iy=11+v$r(this,7);iy--;)_g[ay++]=0;ny=0;break;default:ny=_g[ay++]=ty}Rm=k$k(o$t?_g.subarray(0,Wl):_g.slice(0,Wl)),ry=k$k(o$t?_g.subarray(Wl):_g.slice(Wl)),this.j(Rm,ry);break;default:throw Error("unknown BTYPE: "+cr)}}return this.n()};var Q$c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O$g=o$t?new Uint16Array(Q$c):Q$c,R$h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],rt$3=o$t?new Uint16Array(R$h):R$h,W$b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],S$m=o$t?new Uint8Array(W$b):W$b,X$8=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],it$4=o$t?new Uint16Array(X$8):X$8,_$e=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z$9=o$t?new Uint8Array(_$e):_$e,B$n=new(o$t?Uint8Array:Array)(288),g$z,$$9;g$z=0;for($$9=B$n.length;g$z<$$9;++g$z)B$n[g$z]=143>=g$z?8:255>=g$z?9:279>=g$z?7:8;var st$2=k$k(B$n),L$i=new(o$t?Uint8Array:Array)(30),j$m,F$h;j$m=0;for(F$h=L$i.length;j$m<F$h;++j$m)L$i[j$m]=5;var ht$2=k$k(L$i);function v$r(cr,vn){for(var yn=cr.f,Rn=cr.d,Bn=cr.input,Co=cr.a,Po=Bn.length,To;Rn<vn;){if(Co>=Po)throw Error("input buffer is broken");yn|=Bn[Co++]<<Rn,Rn+=8}return To=yn&(1<<vn)-1,cr.f=yn>>>vn,cr.d=Rn-vn,cr.a=Co,To}function T$g(cr,vn){for(var yn=cr.f,Rn=cr.d,Bn=cr.input,Co=cr.a,Po=Bn.length,To=vn[0],Io=vn[1],$l,Wl;Rn<Io&&!(Co>=Po);)yn|=Bn[Co++]<<Rn,Rn+=8;if($l=To[yn&(1<<Io)-1],Wl=$l>>>16,Wl>Rn)throw Error("invalid code length: "+Wl);return cr.f=yn>>Wl,cr.d=Rn-Wl,cr.a=Co,$l&65535}A$s.prototype.j=function(cr,vn){var yn=this.c,Rn=this.b;this.o=cr;for(var Bn=yn.length-258,Co,Po,To,Io;(Co=T$g(this,cr))!==256;)if(256>Co)Rn>=Bn&&(this.b=Rn,yn=this.e(),Rn=this.b),yn[Rn++]=Co;else for(Po=Co-257,Io=rt$3[Po],0<S$m[Po]&&(Io+=v$r(this,S$m[Po])),Co=T$g(this,vn),To=it$4[Co],0<Z$9[Co]&&(To+=v$r(this,Z$9[Co])),Rn>=Bn&&(this.b=Rn,yn=this.e(),Rn=this.b);Io--;)yn[Rn]=yn[Rn++-To];for(;8<=this.d;)this.d-=8,this.a--;this.b=Rn};A$s.prototype.w=function(cr,vn){var yn=this.c,Rn=this.b;this.o=cr;for(var Bn=yn.length,Co,Po,To,Io;(Co=T$g(this,cr))!==256;)if(256>Co)Rn>=Bn&&(yn=this.e(),Bn=yn.length),yn[Rn++]=Co;else for(Po=Co-257,Io=rt$3[Po],0<S$m[Po]&&(Io+=v$r(this,S$m[Po])),Co=T$g(this,vn),To=it$4[Co],0<Z$9[Co]&&(To+=v$r(this,Z$9[Co])),Rn+Io>Bn&&(yn=this.e(),Bn=yn.length);Io--;)yn[Rn]=yn[Rn++-To];for(;8<=this.d;)this.d-=8,this.a--;this.b=Rn};A$s.prototype.e=function(){var cr=new(o$t?Uint8Array:Array)(this.b-32768),vn=this.b-32768,yn,Rn,Bn=this.c;if(o$t)cr.set(Bn.subarray(32768,cr.length));else for(yn=0,Rn=cr.length;yn<Rn;++yn)cr[yn]=Bn[yn+32768];if(this.g.push(cr),this.l+=cr.length,o$t)Bn.set(Bn.subarray(vn,vn+32768));else for(yn=0;32768>yn;++yn)Bn[yn]=Bn[vn+yn];return this.b=32768,Bn};A$s.prototype.z=function(cr){var vn,yn=this.input.length/this.a+1|0,Rn,Bn,Co,Po=this.input,To=this.c;return cr&&(typeof cr.p=="number"&&(yn=cr.p),typeof cr.u=="number"&&(yn+=cr.u)),2>yn?(Rn=(Po.length-this.a)/this.o[2],Co=258*(Rn/2)|0,Bn=Co<To.length?To.length+Co:To.length<<1):Bn=To.length*yn,o$t?(vn=new Uint8Array(Bn),vn.set(To)):vn=To,this.c=vn};A$s.prototype.n=function(){var cr=0,vn=this.c,yn=this.g,Rn,Bn=new(o$t?Uint8Array:Array)(this.l+(this.b-32768)),Co,Po,To,Io;if(yn.length===0)return o$t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(Co=0,Po=yn.length;Co<Po;++Co)for(Rn=yn[Co],To=0,Io=Rn.length;To<Io;++To)Bn[cr++]=Rn[To];for(Co=32768,Po=this.b;Co<Po;++Co)Bn[cr++]=vn[Co];return this.g=[],this.buffer=Bn};A$s.prototype.v=function(){var cr,vn=this.b;return o$t?this.r?(cr=new Uint8Array(vn),cr.set(this.c.subarray(0,vn))):cr=this.c.subarray(0,vn):(this.c.length>vn&&(this.c.length=vn),cr=this.c),this.buffer=cr};function Y$b(cr,vn){var yn,Rn;switch(this.input=cr,this.a=0,(vn||!(vn={}))&&(vn.index&&(this.a=vn.index),vn.verify&&(this.A=vn.verify)),yn=cr[this.a++],Rn=cr[this.a++],yn&15){case M$m:this.method=M$m;break;default:throw Error("unsupported compression method")}if(((yn<<8)+Rn)%31!==0)throw Error("invalid fcheck flag:"+((yn<<8)+Rn)%31);if(Rn&32)throw Error("fdict flag is not supported");this.q=new A$s(cr,{index:this.a,bufferSize:vn.bufferSize,bufferType:vn.bufferType,resize:vn.resize})}Y$b.prototype.k=function(){var cr=this.input,vn,yn;if(vn=this.q.k(),this.a=this.q.a,this.A){yn=(cr[this.a++]<<24|cr[this.a++]<<16|cr[this.a++]<<8|cr[this.a++])>>>0;var Rn=vn;if(typeof Rn=="string"){var Bn=Rn.split(""),Co,Po;for(Co=0,Po=Bn.length;Co<Po;Co++)Bn[Co]=(Bn[Co].charCodeAt(0)&255)>>>0;Rn=Bn}for(var To=1,Io=0,$l=Rn.length,Wl,Xl=0;0<$l;){Wl=1024<$l?1024:$l,$l-=Wl;do To+=Rn[Xl++],Io+=To;while(--Wl);To%=65521,Io%=65521}if(yn!==(Io<<16|To)>>>0)throw Error("invalid adler-32 checksum")}return vn};var M$m=8;C$h("Zlib.Inflate",Y$b);C$h("Zlib.Inflate.prototype.decompress",Y$b.prototype.k);var P$q={ADAPTIVE:J$g.s,BLOCK:J$g.t},I$n,m$p,U$e,q$m;if(Object.keys)I$n=Object.keys(P$q);else for(m$p in I$n=[],U$e=0,P$q)I$n[U$e++]=m$p;U$e=0;for(q$m=I$n.length;U$e<q$m;++U$e)m$p=I$n[U$e],C$h("Zlib.Inflate.BufferType."+m$p,P$q[m$p]);var nt$4=tt$2.Zlib,A$r={findSpan:function(cr,vn,yn){var Rn=yn.length-cr-1;if(vn>=yn[Rn])return Rn-1;if(vn<=yn[cr])return cr;for(var Bn=cr,Co=Rn,Po=Math.floor((Bn+Co)/2);vn<yn[Po]||vn>=yn[Po+1];)vn<yn[Po]?Co=Po:Bn=Po,Po=Math.floor((Bn+Co)/2);return Po},calcBasisFunctions:function(cr,vn,yn,Rn){var Bn=[],Co=[],Po=[];Bn[0]=1;for(var To=1;To<=yn;++To){Co[To]=vn-Rn[cr+1-To],Po[To]=Rn[cr+To]-vn;for(var Io=0,$l=0;$l<To;++$l){var Wl=Po[$l+1],Xl=Co[To-$l],Yl=Bn[$l]/(Wl+Xl);Bn[$l]=Io+Wl*Yl,Io=Xl*Yl}Bn[To]=Io}return Bn},calcBSplinePoint:function(cr,vn,yn,Rn){for(var Bn=this.findSpan(cr,Rn,vn),Co=this.calcBasisFunctions(Bn,Rn,cr,vn),Po=new Vector4(0,0,0,0),To=0;To<=cr;++To){var Io=yn[Bn-cr+To],$l=Co[To],Wl=Io.w*$l;Po.x+=Io.x*Wl,Po.y+=Io.y*Wl,Po.z+=Io.z*Wl,Po.w+=Io.w*$l}return Po},calcBasisFunctionDerivatives:function(cr,vn,yn,Rn,Bn){for(var Co=[],Po=0;Po<=yn;++Po)Co[Po]=0;for(var To=[],Po=0;Po<=Rn;++Po)To[Po]=Co.slice(0);for(var Io=[],Po=0;Po<=yn;++Po)Io[Po]=Co.slice(0);Io[0][0]=1;for(var $l=Co.slice(0),Wl=Co.slice(0),Xl=1;Xl<=yn;++Xl){$l[Xl]=vn-Bn[cr+1-Xl],Wl[Xl]=Bn[cr+Xl]-vn;for(var Yl=0,Zl=0;Zl<Xl;++Zl){var ey=Wl[Zl+1],Rm=$l[Xl-Zl];Io[Xl][Zl]=ey+Rm;var ry=Io[Zl][Xl-1]/Io[Xl][Zl];Io[Zl][Xl]=Yl+ey*ry,Yl=Rm*ry}Io[Xl][Xl]=Yl}for(var Xl=0;Xl<=yn;++Xl)To[0][Xl]=Io[Xl][yn];for(var Zl=0;Zl<=yn;++Zl){for(var _g=0,ty=1,ny=[],Po=0;Po<=yn;++Po)ny[Po]=Co.slice(0);ny[0][0]=1;for(var iy=1;iy<=Rn;++iy){var oy=0,ay=Zl-iy,uy=yn-iy;Zl>=iy&&(ny[ty][0]=ny[_g][0]/Io[uy+1][ay],oy=ny[ty][0]*Io[ay][uy]);for(var hy=ay>=-1?1:-ay,my=Zl-1<=uy?iy-1:yn-Zl,Xl=hy;Xl<=my;++Xl)ny[ty][Xl]=(ny[_g][Xl]-ny[_g][Xl-1])/Io[uy+1][ay+Xl],oy+=ny[ty][Xl]*Io[ay+Xl][uy];Zl<=uy&&(ny[ty][iy]=-ny[_g][iy-1]/Io[uy+1][Zl],oy+=ny[ty][iy]*Io[Zl][uy]),To[iy][Zl]=oy;var Xl=_g;_g=ty,ty=Xl}}for(var Zl=yn,iy=1;iy<=Rn;++iy){for(var Xl=0;Xl<=yn;++Xl)To[iy][Xl]*=Zl;Zl*=yn-iy}return To},calcBSplineDerivatives:function(cr,vn,yn,Rn,Bn){for(var Co=Bn<cr?Bn:cr,Po=[],To=this.findSpan(cr,Rn,vn),Io=this.calcBasisFunctionDerivatives(To,Rn,cr,Co,vn),$l=[],Wl=0;Wl<yn.length;++Wl){var Xl=yn[Wl].clone(),Yl=Xl.w;Xl.x*=Yl,Xl.y*=Yl,Xl.z*=Yl,$l[Wl]=Xl}for(var Zl=0;Zl<=Co;++Zl){for(var Xl=$l[To-cr].clone().multiplyScalar(Io[Zl][0]),ey=1;ey<=cr;++ey)Xl.add($l[To-cr+ey].clone().multiplyScalar(Io[Zl][ey]));Po[Zl]=Xl}for(var Zl=Co+1;Zl<=Bn+1;++Zl)Po[Zl]=new Vector4(0,0,0);return Po},calcKoverI:function(cr,vn){for(var yn=1,Rn=2;Rn<=cr;++Rn)yn*=Rn;for(var Bn=1,Rn=2;Rn<=vn;++Rn)Bn*=Rn;for(var Rn=2;Rn<=cr-vn;++Rn)Bn*=Rn;return yn/Bn},calcRationalCurveDerivatives:function(cr){for(var vn=cr.length,yn=[],Rn=[],Bn=0;Bn<vn;++Bn){var Co=cr[Bn];yn[Bn]=new Vector3(Co.x,Co.y,Co.z),Rn[Bn]=Co.w}for(var Po=[],To=0;To<vn;++To){for(var Io=yn[To].clone(),Bn=1;Bn<=To;++Bn)Io.sub(Po[To-Bn].clone().multiplyScalar(this.calcKoverI(To,Bn)*Rn[Bn]));Po[To]=Io.divideScalar(Rn[0])}return Po},calcNURBSDerivatives:function(cr,vn,yn,Rn,Bn){var Co=this.calcBSplineDerivatives(cr,vn,yn,Rn,Bn);return this.calcRationalCurveDerivatives(Co)},calcSurfacePoint:function(cr,vn,yn,Rn,Bn,Co,Po,To){for(var Io=this.findSpan(cr,Co,yn),$l=this.findSpan(vn,Po,Rn),Wl=this.calcBasisFunctions(Io,Co,cr,yn),Xl=this.calcBasisFunctions($l,Po,vn,Rn),Yl=[],Zl=0;Zl<=vn;++Zl){Yl[Zl]=new Vector4(0,0,0,0);for(var ey=0;ey<=cr;++ey){var Rm=Bn[Io-cr+ey][$l-vn+Zl].clone(),ry=Rm.w;Rm.x*=ry,Rm.y*=ry,Rm.z*=ry,Yl[Zl].add(Rm.multiplyScalar(Wl[ey]))}}for(var _g=new Vector4(0,0,0,0),Zl=0;Zl<=vn;++Zl)_g.add(Yl[Zl].multiplyScalar(Xl[Zl]));_g.divideScalar(_g.w),To.set(_g.x,_g.y,_g.z)}},e$d=function(cr,vn,yn,Rn,Bn){Curve.call(this),this.degree=cr,this.knots=vn,this.controlPoints=[],this.startKnot=Rn||0,this.endKnot=Bn||this.knots.length-1;for(var Co=0;Co<yn.length;++Co){var Po=yn[Co];this.controlPoints[Co]=new Vector4(Po.x,Po.y,Po.z,Po.w)}};e$d.prototype=Object.create(Curve.prototype);e$d.prototype.constructor=e$d;e$d.prototype.getPoint=function(cr,vn){var yn=vn||new Vector3,Rn=this.knots[this.startKnot]+cr*(this.knots[this.endKnot]-this.knots[this.startKnot]),Bn=A$r.calcBSplinePoint(this.degree,this.knots,this.controlPoints,Rn);return Bn.w!=1&&Bn.divideScalar(Bn.w),yn.set(Bn.x,Bn.y,Bn.z)};e$d.prototype.getTangent=function(cr,vn){var yn=vn||new Vector3,Rn=this.knots[0]+cr*(this.knots[this.knots.length-1]-this.knots[0]),Bn=A$r.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,Rn,1);return yn.copy(Bn[1]).normalize(),yn};(function(){var cr,vn,yn;function Rn(ly){Loader.call(this,ly)}Rn.prototype=Object.assign(Object.create(Loader.prototype),{constructor:Rn,load:function(ly,sy,cy,fy){var vy=this,dy=vy.path===""?LoaderUtils.extractUrlBase(ly):vy.path,Ay=new FileLoader(this.manager);Ay.setPath(vy.path),Ay.setResponseType("arraybuffer"),Ay.load(ly,function(gy){try{sy(vy.parse(gy,dy))}catch(wy){fy?fy(wy):console.error(wy),vy.manager.itemError(ly)}},cy,fy)},parse:function(ly,sy){if(Xl(ly))cr=new Io().parse(ly);else{var cy=ay(ly);if(!Yl(cy))throw new Error("THREE.FBXLoader: Unknown format.");if(Zl(cy)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Zl(cy));cr=new To().parse(cy)}var fy=new TextureLoader(this.manager).setPath(this.resourcePath||sy).setCrossOrigin(this.crossOrigin);return new Bn(fy,this.manager).parse(cr)}});function Bn(ly,sy){this.textureLoader=ly,this.manager=sy}Bn.prototype={constructor:Bn,parse:function(){vn=this.parseConnections();var ly=this.parseImages(),sy=this.parseTextures(ly),cy=this.parseMaterials(sy),fy=this.parseDeformers(),vy=new Co().parse(fy);return this.parseScene(fy,vy,cy),yn},parseConnections:function(){var ly=new Map;if("Connections"in cr){var sy=cr.Connections.connections;sy.forEach(function(cy){var fy=cy[0],vy=cy[1],dy=cy[2];ly.has(fy)||ly.set(fy,{parents:[],children:[]});var Ay={ID:vy,relationship:dy};ly.get(fy).parents.push(Ay),ly.has(vy)||ly.set(vy,{parents:[],children:[]});var gy={ID:fy,relationship:dy};ly.get(vy).children.push(gy)})}return ly},parseImages:function(){var ly={},sy={};if("Video"in cr.Objects){var cy=cr.Objects.Video;for(var fy in cy){var vy=cy[fy],dy=parseInt(fy);if(ly[dy]=vy.RelativeFilename||vy.Filename,"Content"in vy){var Ay=vy.Content instanceof ArrayBuffer&&vy.Content.byteLength>0,gy=typeof vy.Content=="string"&&vy.Content!=="";if(Ay||gy){var wy=this.parseImage(cy[fy]);sy[vy.RelativeFilename||vy.Filename]=wy}}}}for(var dy in ly){var Cy=ly[dy];sy[Cy]!==void 0?ly[dy]=sy[Cy]:ly[dy]=ly[dy].split("\\").pop()}return ly},parseImage:function(ly){var sy=ly.Content,cy=ly.RelativeFilename||ly.Filename,fy=cy.slice(cy.lastIndexOf(".")+1).toLowerCase(),vy;switch(fy){case"bmp":vy="image/bmp";break;case"jpg":case"jpeg":vy="image/jpeg";break;case"png":vy="image/png";break;case"tif":vy="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",cy),vy="image/tga";break;default:console.warn('FBXLoader: Image type "'+fy+'" is not supported.');return}if(typeof sy=="string")return"data:"+vy+";base64,"+sy;var dy=new Uint8Array(sy);return window.URL.createObjectURL(new Blob([dy],{type:vy}))},parseTextures:function(ly){var sy=new Map;if("Texture"in cr.Objects){var cy=cr.Objects.Texture;for(var fy in cy){var vy=this.parseTexture(cy[fy],ly);sy.set(parseInt(fy),vy)}}return sy},parseTexture:function(ly,sy){var cy=this.loadTexture(ly,sy);cy.ID=ly.id,cy.name=ly.attrName;var fy=ly.WrapModeU,vy=ly.WrapModeV,dy=fy!==void 0?fy.value:0,Ay=vy!==void 0?vy.value:0;if(cy.wrapS=dy===0?RepeatWrapping:ClampToEdgeWrapping,cy.wrapT=Ay===0?RepeatWrapping:ClampToEdgeWrapping,"Scaling"in ly){var gy=ly.Scaling.value;cy.repeat.x=gy[0],cy.repeat.y=gy[1]}return cy},loadTexture:function(ly,sy){var cy,fy=this.textureLoader.path,vy=vn.get(ly.id).children;vy!==void 0&&vy.length>0&&sy[vy[0].ID]!==void 0&&(cy=sy[vy[0].ID],(cy.indexOf("blob:")===0||cy.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var dy,Ay=ly.FileName.slice(-3).toLowerCase();if(Ay==="tga"){var gy=this.manager.getHandler(".tga");gy===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",ly.RelativeFilename),dy=new Texture):dy=gy.load(cy)}else Ay==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",ly.RelativeFilename),dy=new Texture):dy=this.textureLoader.load(cy);return this.textureLoader.setPath(fy),dy},parseMaterials:function(ly){var sy=new Map;if("Material"in cr.Objects){var cy=cr.Objects.Material;for(var fy in cy){var vy=this.parseMaterial(cy[fy],ly);vy!==null&&sy.set(parseInt(fy),vy)}}return sy},parseMaterial:function(ly,sy){var cy=ly.id,fy=ly.attrName,vy=ly.ShadingModel;if(typeof vy=="object"&&(vy=vy.value),!vn.has(cy))return null;var dy=this.parseParameters(ly,sy,cy),Ay;switch(vy.toLowerCase()){case"phong":Ay=new MeshPhongMaterial;break;case"lambert":Ay=new MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',vy),Ay=new MeshPhongMaterial;break}return Ay.setValues(dy),Ay.name=fy,Ay},parseParameters:function(ly,sy,cy){var fy={};ly.BumpFactor&&(fy.bumpScale=ly.BumpFactor.value),ly.Diffuse?fy.color=new Color().fromArray(ly.Diffuse.value):ly.DiffuseColor&&ly.DiffuseColor.type==="Color"&&(fy.color=new Color().fromArray(ly.DiffuseColor.value)),ly.DisplacementFactor&&(fy.displacementScale=ly.DisplacementFactor.value),ly.Emissive?fy.emissive=new Color().fromArray(ly.Emissive.value):ly.EmissiveColor&&ly.EmissiveColor.type==="Color"&&(fy.emissive=new Color().fromArray(ly.EmissiveColor.value)),ly.EmissiveFactor&&(fy.emissiveIntensity=parseFloat(ly.EmissiveFactor.value)),ly.Opacity&&(fy.opacity=parseFloat(ly.Opacity.value)),fy.opacity<1&&(fy.transparent=!0),ly.ReflectionFactor&&(fy.reflectivity=ly.ReflectionFactor.value),ly.Shininess&&(fy.shininess=ly.Shininess.value),ly.Specular?fy.specular=new Color().fromArray(ly.Specular.value):ly.SpecularColor&&ly.SpecularColor.type==="Color"&&(fy.specular=new Color().fromArray(ly.SpecularColor.value));var vy=this;return vn.get(cy).children.forEach(function(dy){var Ay=dy.relationship;switch(Ay){case"Bump":fy.bumpMap=vy.getTexture(sy,dy.ID);break;case"Maya|TEX_ao_map":fy.aoMap=vy.getTexture(sy,dy.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":fy.map=vy.getTexture(sy,dy.ID),fy.map.encoding=sRGBEncoding;break;case"DisplacementColor":fy.displacementMap=vy.getTexture(sy,dy.ID);break;case"EmissiveColor":fy.emissiveMap=vy.getTexture(sy,dy.ID),fy.emissiveMap.encoding=sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":fy.normalMap=vy.getTexture(sy,dy.ID);break;case"ReflectionColor":fy.envMap=vy.getTexture(sy,dy.ID),fy.envMap.mapping=EquirectangularReflectionMapping,fy.envMap.encoding=sRGBEncoding;break;case"SpecularColor":fy.specularMap=vy.getTexture(sy,dy.ID),fy.specularMap.encoding=sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":fy.alphaMap=vy.getTexture(sy,dy.ID),fy.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",Ay);break}}),fy},getTexture:function(ly,sy){return"LayeredTexture"in cr.Objects&&sy in cr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),sy=vn.get(sy).children[0].ID),ly.get(sy)},parseDeformers:function(){var ly={},sy={};if("Deformer"in cr.Objects){var cy=cr.Objects.Deformer;for(var fy in cy){var vy=cy[fy],dy=vn.get(parseInt(fy));if(vy.attrType==="Skin"){var Ay=this.parseSkeleton(dy,cy);Ay.ID=fy,dy.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),Ay.geometryID=dy.parents[0].ID,ly[fy]=Ay}else if(vy.attrType==="BlendShape"){var gy={id:fy};gy.rawTargets=this.parseMorphTargets(dy,cy),gy.id=fy,dy.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),sy[fy]=gy}}}return{skeletons:ly,morphTargets:sy}},parseSkeleton:function(ly,sy){var cy=[];return ly.children.forEach(function(fy){var vy=sy[fy.ID];if(vy.attrType==="Cluster"){var dy={ID:fy.ID,indices:[],weights:[],transformLink:new Matrix4().fromArray(vy.TransformLink.a)};"Indexes"in vy&&(dy.indices=vy.Indexes.a,dy.weights=vy.Weights.a),cy.push(dy)}}),{rawBones:cy,bones:[]}},parseMorphTargets:function(ly,sy){for(var cy=[],fy=0;fy<ly.children.length;fy++){var vy=ly.children[fy],dy=sy[vy.ID],Ay={name:dy.attrName,initialWeight:dy.DeformPercent,id:dy.id,fullWeights:dy.FullWeights.a};if(dy.attrType!=="BlendShapeChannel")return;Ay.geoID=vn.get(parseInt(vy.ID)).children.filter(function(gy){return gy.relationship===void 0})[0].ID,cy.push(Ay)}return cy},parseScene:function(ly,sy,cy){yn=new Group$1;var fy=this.parseModels(ly.skeletons,sy,cy),vy=cr.Objects.Model,dy=this;fy.forEach(function(gy){var wy=vy[gy.ID];dy.setLookAtProperties(gy,wy);var Cy=vn.get(gy.ID).parents;Cy.forEach(function(My){var Py=fy.get(My.ID);Py!==void 0&&Py.add(gy)}),gy.parent===null&&yn.add(gy)}),this.bindSkeleton(ly.skeletons,sy,fy),this.createAmbientLight(),this.setupMorphMaterials(),yn.traverse(function(gy){if(gy.userData.transformData){gy.parent&&(gy.userData.transformData.parentMatrixWorld=gy.parent.matrix);var wy=ny(gy.userData.transformData);gy.applyMatrix4(wy)}});var Ay=new Po().parse();yn.children.length===1&&yn.children[0].isGroup&&(yn.children[0].animations=Ay,yn=yn.children[0]),yn.animations=Ay},parseModels:function(ly,sy,cy){var fy=new Map,vy=cr.Objects.Model;for(var dy in vy){var Ay=parseInt(dy),gy=vy[dy],wy=vn.get(Ay),Cy=this.buildSkeleton(wy,ly,Ay,gy.attrName);if(!Cy){switch(gy.attrType){case"Camera":Cy=this.createCamera(wy);break;case"Light":Cy=this.createLight(wy);break;case"Mesh":Cy=this.createMesh(wy,sy,cy);break;case"NurbsCurve":Cy=this.createCurve(wy,sy);break;case"LimbNode":case"Root":Cy=new Bone;break;case"Null":default:Cy=new Group$1;break}Cy.name=gy.attrName?PropertyBinding.sanitizeNodeName(gy.attrName):"",Cy.ID=Ay}this.getTransformData(Cy,gy),fy.set(Ay,Cy)}return fy},buildSkeleton:function(ly,sy,cy,fy){var vy=null;return ly.parents.forEach(function(dy){for(var Ay in sy){var gy=sy[Ay];gy.rawBones.forEach(function(wy,Cy){if(wy.ID===dy.ID){var My=vy;vy=new Bone,vy.matrixWorld.copy(wy.transformLink),vy.name=fy?PropertyBinding.sanitizeNodeName(fy):"",vy.ID=cy,gy.bones[Cy]=vy,My!==null&&vy.add(My)}})}}),vy},createCamera:function(ly){var sy,cy;if(ly.children.forEach(function(Py){var Dy=cr.Objects.NodeAttribute[Py.ID];Dy!==void 0&&(cy=Dy)}),cy===void 0)sy=new Object3D;else{var fy=0;cy.CameraProjectionType!==void 0&&cy.CameraProjectionType.value===1&&(fy=1);var vy=1;cy.NearPlane!==void 0&&(vy=cy.NearPlane.value/1e3);var dy=1e3;cy.FarPlane!==void 0&&(dy=cy.FarPlane.value/1e3);var Ay=window.innerWidth,gy=window.innerHeight;cy.AspectWidth!==void 0&&cy.AspectHeight!==void 0&&(Ay=cy.AspectWidth.value,gy=cy.AspectHeight.value);var wy=Ay/gy,Cy=45;cy.FieldOfView!==void 0&&(Cy=cy.FieldOfView.value);var My=cy.FocalLength?cy.FocalLength.value:null;switch(fy){case 0:sy=new PerspectiveCamera(Cy,wy,vy,dy),My!==null&&sy.setFocalLength(My);break;case 1:sy=new OrthographicCamera(-Ay/2,Ay/2,gy/2,-gy/2,vy,dy);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+fy+"."),sy=new Object3D;break}}return sy},createLight:function(ly){var sy,cy;if(ly.children.forEach(function(My){var Py=cr.Objects.NodeAttribute[My.ID];Py!==void 0&&(cy=Py)}),cy===void 0)sy=new Object3D;else{var fy;cy.LightType===void 0?fy=0:fy=cy.LightType.value;var vy=16777215;cy.Color!==void 0&&(vy=new Color().fromArray(cy.Color.value));var dy=cy.Intensity===void 0?1:cy.Intensity.value/100;cy.CastLightOnObject!==void 0&&cy.CastLightOnObject.value===0&&(dy=0);var Ay=0;cy.FarAttenuationEnd!==void 0&&(cy.EnableFarAttenuation!==void 0&&cy.EnableFarAttenuation.value===0?Ay=0:Ay=cy.FarAttenuationEnd.value);var gy=1;switch(fy){case 0:sy=new PointLight(vy,dy,Ay,gy);break;case 1:sy=new DirectionalLight(vy,dy);break;case 2:var wy=Math.PI/3;cy.InnerAngle!==void 0&&(wy=MathUtils.degToRad(cy.InnerAngle.value));var Cy=0;cy.OuterAngle!==void 0&&(Cy=MathUtils.degToRad(cy.OuterAngle.value),Cy=Math.max(Cy,1)),sy=new SpotLight(vy,dy,Ay,wy,Cy,gy);break;default:console.warn("THREE.FBXLoader: Unknown light type "+cy.LightType.value+", defaulting to a PointLight."),sy=new PointLight(vy,dy);break}cy.CastShadows!==void 0&&cy.CastShadows.value===1&&(sy.castShadow=!0)}return sy},createMesh:function(ly,sy,cy){var fy,vy=null,dy=null,Ay=[];return ly.children.forEach(function(gy){sy.has(gy.ID)&&(vy=sy.get(gy.ID)),cy.has(gy.ID)&&Ay.push(cy.get(gy.ID))}),Ay.length>1?dy=Ay:Ay.length>0?dy=Ay[0]:(dy=new MeshPhongMaterial({color:13421772}),Ay.push(dy)),"color"in vy.attributes&&Ay.forEach(function(gy){gy.vertexColors=!0}),vy.FBX_Deformer?(Ay.forEach(function(gy){gy.skinning=!0}),fy=new SkinnedMesh(vy,dy),fy.normalizeSkinWeights()):fy=new Mesh(vy,dy),fy},createCurve:function(ly,sy){var cy=ly.children.reduce(function(vy,dy){return sy.has(dy.ID)&&(vy=sy.get(dy.ID)),vy},null),fy=new LineBasicMaterial({color:3342591,linewidth:1});return new Line(cy,fy)},getTransformData:function(ly,sy){var cy={};"InheritType"in sy&&(cy.inheritType=parseInt(sy.InheritType.value)),"RotationOrder"in sy?cy.eulerOrder=iy(sy.RotationOrder.value):cy.eulerOrder="ZYX","Lcl_Translation"in sy&&(cy.translation=sy.Lcl_Translation.value),"PreRotation"in sy&&(cy.preRotation=sy.PreRotation.value),"Lcl_Rotation"in sy&&(cy.rotation=sy.Lcl_Rotation.value),"PostRotation"in sy&&(cy.postRotation=sy.PostRotation.value),"Lcl_Scaling"in sy&&(cy.scale=sy.Lcl_Scaling.value),"ScalingOffset"in sy&&(cy.scalingOffset=sy.ScalingOffset.value),"ScalingPivot"in sy&&(cy.scalingPivot=sy.ScalingPivot.value),"RotationOffset"in sy&&(cy.rotationOffset=sy.RotationOffset.value),"RotationPivot"in sy&&(cy.rotationPivot=sy.RotationPivot.value),ly.userData.transformData=cy},setLookAtProperties:function(ly,sy){if("LookAtProperty"in sy){var cy=vn.get(ly.ID).children;cy.forEach(function(fy){if(fy.relationship==="LookAtProperty"){var vy=cr.Objects.Model[fy.ID];if("Lcl_Translation"in vy){var dy=vy.Lcl_Translation.value;ly.target!==void 0?(ly.target.position.fromArray(dy),yn.add(ly.target)):ly.lookAt(new Vector3().fromArray(dy))}}})}},bindSkeleton:function(ly,sy,cy){var fy=this.parsePoseNodes();for(var vy in ly){var dy=ly[vy],Ay=vn.get(parseInt(dy.ID)).parents;Ay.forEach(function(gy){if(sy.has(gy.ID)){var wy=gy.ID,Cy=vn.get(wy);Cy.parents.forEach(function(My){if(cy.has(My.ID)){var Py=cy.get(My.ID);Py.bind(new Skeleton(dy.bones),fy[My.ID])}})}})}},parsePoseNodes:function(){var ly={};if("Pose"in cr.Objects){var sy=cr.Objects.Pose;for(var cy in sy)if(sy[cy].attrType==="BindPose"){var fy=sy[cy].PoseNode;Array.isArray(fy)?fy.forEach(function(vy){ly[vy.Node]=new Matrix4().fromArray(vy.Matrix.a)}):ly[fy.Node]=new Matrix4().fromArray(fy.Matrix.a)}}return ly},createAmbientLight:function(){if("GlobalSettings"in cr&&"AmbientColor"in cr.GlobalSettings){var ly=cr.GlobalSettings.AmbientColor.value,sy=ly[0],cy=ly[1],fy=ly[2];if(sy!==0||cy!==0||fy!==0){var vy=new Color(sy,cy,fy);yn.add(new AmbientLight(vy,1))}}},setupMorphMaterials:function(){var ly=this;yn.traverse(function(sy){sy.isMesh&&sy.geometry.morphAttributes.position&&sy.geometry.morphAttributes.position.length&&(Array.isArray(sy.material)?sy.material.forEach(function(cy,fy){ly.setupMorphMaterial(sy,cy,fy)}):ly.setupMorphMaterial(sy,sy.material))})},setupMorphMaterial:function(ly,sy,cy){var fy=ly.uuid,vy=sy.uuid,dy=!1;if(yn.traverse(function(gy){gy.isMesh&&(Array.isArray(gy.material)?gy.material.forEach(function(wy){wy.uuid===vy&&gy.uuid!==fy&&(dy=!0)}):gy.material.uuid===vy&&gy.uuid!==fy&&(dy=!0))}),dy===!0){var Ay=sy.clone();Ay.morphTargets=!0,cy===void 0?ly.material=Ay:ly.material[cy]=Ay}else sy.morphTargets=!0}};function Co(){}Co.prototype={constructor:Co,parse:function(ly){var sy=new Map;if("Geometry"in cr.Objects){var cy=cr.Objects.Geometry;for(var fy in cy){var vy=vn.get(parseInt(fy)),dy=this.parseGeometry(vy,cy[fy],ly);sy.set(parseInt(fy),dy)}}return sy},parseGeometry:function(ly,sy,cy){switch(sy.attrType){case"Mesh":return this.parseMeshGeometry(ly,sy,cy);case"NurbsCurve":return this.parseNurbsGeometry(sy)}},parseMeshGeometry:function(ly,sy,cy){var fy=cy.skeletons,vy=[],dy=ly.parents.map(function(My){return cr.Objects.Model[My.ID]});if(dy.length!==0){var Ay=ly.children.reduce(function(My,Py){return fy[Py.ID]!==void 0&&(My=fy[Py.ID]),My},null);ly.children.forEach(function(My){cy.morphTargets[My.ID]!==void 0&&vy.push(cy.morphTargets[My.ID])});var gy=dy[0],wy={};"RotationOrder"in gy&&(wy.eulerOrder=iy(gy.RotationOrder.value)),"InheritType"in gy&&(wy.inheritType=parseInt(gy.InheritType.value)),"GeometricTranslation"in gy&&(wy.translation=gy.GeometricTranslation.value),"GeometricRotation"in gy&&(wy.rotation=gy.GeometricRotation.value),"GeometricScaling"in gy&&(wy.scale=gy.GeometricScaling.value);var Cy=ny(wy);return this.genGeometry(sy,Ay,vy,Cy)}},genGeometry:function(ly,sy,cy,fy){var vy=new BufferGeometry;ly.attrName&&(vy.name=ly.attrName);var dy=this.parseGeoNode(ly,sy),Ay=this.genBuffers(dy),gy=new Float32BufferAttribute(Ay.vertex,3);if(gy.applyMatrix4(fy),vy.setAttribute("position",gy),Ay.colors.length>0&&vy.setAttribute("color",new Float32BufferAttribute(Ay.colors,3)),sy&&(vy.setAttribute("skinIndex",new Uint16BufferAttribute(Ay.weightsIndices,4)),vy.setAttribute("skinWeight",new Float32BufferAttribute(Ay.vertexWeights,4)),vy.FBX_Deformer=sy),Ay.normal.length>0){var wy=new Matrix3().getNormalMatrix(fy),Cy=new Float32BufferAttribute(Ay.normal,3);Cy.applyNormalMatrix(wy),vy.setAttribute("normal",Cy)}if(Ay.uvs.forEach(function(Xy,$y){var xy="uv"+($y+1).toString();$y===0&&(xy="uv"),vy.setAttribute(xy,new Float32BufferAttribute(Ay.uvs[$y],2))}),dy.material&&dy.material.mappingType!=="AllSame"){var My=Ay.materialIndex[0],Py=0;if(Ay.materialIndex.forEach(function(Xy,$y){Xy!==My&&(vy.addGroup(Py,$y-Py,My),My=Xy,Py=$y)}),vy.groups.length>0){var Dy=vy.groups[vy.groups.length-1],qy=Dy.start+Dy.count;qy!==Ay.materialIndex.length&&vy.addGroup(qy,Ay.materialIndex.length-qy,My)}vy.groups.length===0&&vy.addGroup(0,Ay.materialIndex.length,Ay.materialIndex[0])}return this.addMorphTargets(vy,ly,cy,fy),vy},parseGeoNode:function(ly,sy){var cy={};if(cy.vertexPositions=ly.Vertices!==void 0?ly.Vertices.a:[],cy.vertexIndices=ly.PolygonVertexIndex!==void 0?ly.PolygonVertexIndex.a:[],ly.LayerElementColor&&(cy.color=this.parseVertexColors(ly.LayerElementColor[0])),ly.LayerElementMaterial&&(cy.material=this.parseMaterialIndices(ly.LayerElementMaterial[0])),ly.LayerElementNormal&&(cy.normal=this.parseNormals(ly.LayerElementNormal[0])),ly.LayerElementUV){cy.uv=[];for(var fy=0;ly.LayerElementUV[fy];)cy.uv.push(this.parseUVs(ly.LayerElementUV[fy])),fy++}return cy.weightTable={},sy!==null&&(cy.skeleton=sy,sy.rawBones.forEach(function(vy,dy){vy.indices.forEach(function(Ay,gy){cy.weightTable[Ay]===void 0&&(cy.weightTable[Ay]=[]),cy.weightTable[Ay].push({id:dy,weight:vy.weights[gy]})})})),cy},genBuffers:function(ly){var sy={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},cy=0,fy=0,vy=!1,dy=[],Ay=[],gy=[],wy=[],Cy=[],My=[],Py=this;return ly.vertexIndices.forEach(function(Dy,qy){var Xy=!1;Dy<0&&(Dy=Dy^-1,Xy=!0);var $y=[],xy=[];if(dy.push(Dy*3,Dy*3+1,Dy*3+2),ly.color){var Ry=ry(qy,cy,Dy,ly.color);gy.push(Ry[0],Ry[1],Ry[2])}if(ly.skeleton){if(ly.weightTable[Dy]!==void 0&&ly.weightTable[Dy].forEach(function(zy){xy.push(zy.weight),$y.push(zy.id)}),xy.length>4){vy||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),vy=!0);var Ly=[0,0,0,0],ky=[0,0,0,0];xy.forEach(function(zy,Uy){var Qy=zy,Gy=$y[Uy];ky.forEach(function(Zy,Ty,Vy){if(Qy>Zy){Vy[Ty]=Qy,Qy=Zy;var Yy=Ly[Ty];Ly[Ty]=Gy,Gy=Yy}})}),$y=Ly,xy=ky}for(;xy.length<4;)xy.push(0),$y.push(0);for(var Ey=0;Ey<4;++Ey)Cy.push(xy[Ey]),My.push($y[Ey])}if(ly.normal){var Ry=ry(qy,cy,Dy,ly.normal);Ay.push(Ry[0],Ry[1],Ry[2])}if(ly.material&&ly.material.mappingType!=="AllSame")var Iy=ry(qy,cy,Dy,ly.material)[0];ly.uv&&ly.uv.forEach(function(zy,Uy){var Qy=ry(qy,cy,Dy,zy);wy[Uy]===void 0&&(wy[Uy]=[]),wy[Uy].push(Qy[0]),wy[Uy].push(Qy[1])}),fy++,Xy&&(Py.genFace(sy,ly,dy,Iy,Ay,gy,wy,Cy,My,fy),cy++,fy=0,dy=[],Ay=[],gy=[],wy=[],Cy=[],My=[])}),sy},genFace:function(ly,sy,cy,fy,vy,dy,Ay,gy,wy,Cy){for(var My=2;My<Cy;My++)ly.vertex.push(sy.vertexPositions[cy[0]]),ly.vertex.push(sy.vertexPositions[cy[1]]),ly.vertex.push(sy.vertexPositions[cy[2]]),ly.vertex.push(sy.vertexPositions[cy[(My-1)*3]]),ly.vertex.push(sy.vertexPositions[cy[(My-1)*3+1]]),ly.vertex.push(sy.vertexPositions[cy[(My-1)*3+2]]),ly.vertex.push(sy.vertexPositions[cy[My*3]]),ly.vertex.push(sy.vertexPositions[cy[My*3+1]]),ly.vertex.push(sy.vertexPositions[cy[My*3+2]]),sy.skeleton&&(ly.vertexWeights.push(gy[0]),ly.vertexWeights.push(gy[1]),ly.vertexWeights.push(gy[2]),ly.vertexWeights.push(gy[3]),ly.vertexWeights.push(gy[(My-1)*4]),ly.vertexWeights.push(gy[(My-1)*4+1]),ly.vertexWeights.push(gy[(My-1)*4+2]),ly.vertexWeights.push(gy[(My-1)*4+3]),ly.vertexWeights.push(gy[My*4]),ly.vertexWeights.push(gy[My*4+1]),ly.vertexWeights.push(gy[My*4+2]),ly.vertexWeights.push(gy[My*4+3]),ly.weightsIndices.push(wy[0]),ly.weightsIndices.push(wy[1]),ly.weightsIndices.push(wy[2]),ly.weightsIndices.push(wy[3]),ly.weightsIndices.push(wy[(My-1)*4]),ly.weightsIndices.push(wy[(My-1)*4+1]),ly.weightsIndices.push(wy[(My-1)*4+2]),ly.weightsIndices.push(wy[(My-1)*4+3]),ly.weightsIndices.push(wy[My*4]),ly.weightsIndices.push(wy[My*4+1]),ly.weightsIndices.push(wy[My*4+2]),ly.weightsIndices.push(wy[My*4+3])),sy.color&&(ly.colors.push(dy[0]),ly.colors.push(dy[1]),ly.colors.push(dy[2]),ly.colors.push(dy[(My-1)*3]),ly.colors.push(dy[(My-1)*3+1]),ly.colors.push(dy[(My-1)*3+2]),ly.colors.push(dy[My*3]),ly.colors.push(dy[My*3+1]),ly.colors.push(dy[My*3+2])),sy.material&&sy.material.mappingType!=="AllSame"&&(ly.materialIndex.push(fy),ly.materialIndex.push(fy),ly.materialIndex.push(fy)),sy.normal&&(ly.normal.push(vy[0]),ly.normal.push(vy[1]),ly.normal.push(vy[2]),ly.normal.push(vy[(My-1)*3]),ly.normal.push(vy[(My-1)*3+1]),ly.normal.push(vy[(My-1)*3+2]),ly.normal.push(vy[My*3]),ly.normal.push(vy[My*3+1]),ly.normal.push(vy[My*3+2])),sy.uv&&sy.uv.forEach(function(Py,Dy){ly.uvs[Dy]===void 0&&(ly.uvs[Dy]=[]),ly.uvs[Dy].push(Ay[Dy][0]),ly.uvs[Dy].push(Ay[Dy][1]),ly.uvs[Dy].push(Ay[Dy][(My-1)*2]),ly.uvs[Dy].push(Ay[Dy][(My-1)*2+1]),ly.uvs[Dy].push(Ay[Dy][My*2]),ly.uvs[Dy].push(Ay[Dy][My*2+1])})},addMorphTargets:function(ly,sy,cy,fy){if(cy.length!==0){ly.morphTargetsRelative=!0,ly.morphAttributes.position=[];var vy=this;cy.forEach(function(dy){dy.rawTargets.forEach(function(Ay){var gy=cr.Objects.Geometry[Ay.geoID];gy!==void 0&&vy.genMorphGeometry(ly,sy,gy,fy,Ay.name)})})}},genMorphGeometry:function(ly,sy,cy,fy,vy){for(var dy=sy.PolygonVertexIndex!==void 0?sy.PolygonVertexIndex.a:[],Ay=cy.Vertices!==void 0?cy.Vertices.a:[],gy=cy.Indexes!==void 0?cy.Indexes.a:[],wy=ly.attributes.position.count*3,Cy=new Float32Array(wy),My=0;My<gy.length;My++){var Py=gy[My]*3;Cy[Py]=Ay[My*3],Cy[Py+1]=Ay[My*3+1],Cy[Py+2]=Ay[My*3+2]}var Dy={vertexIndices:dy,vertexPositions:Cy},qy=this.genBuffers(Dy),Xy=new Float32BufferAttribute(qy.vertex,3);Xy.name=vy||cy.attrName,Xy.applyMatrix4(fy),ly.morphAttributes.position.push(Xy)},parseNormals:function(ly){var sy=ly.MappingInformationType,cy=ly.ReferenceInformationType,fy=ly.Normals.a,vy=[];return cy==="IndexToDirect"&&("NormalIndex"in ly?vy=ly.NormalIndex.a:"NormalsIndex"in ly&&(vy=ly.NormalsIndex.a)),{dataSize:3,buffer:fy,indices:vy,mappingType:sy,referenceType:cy}},parseUVs:function(ly){var sy=ly.MappingInformationType,cy=ly.ReferenceInformationType,fy=ly.UV.a,vy=[];return cy==="IndexToDirect"&&(vy=ly.UVIndex.a),{dataSize:2,buffer:fy,indices:vy,mappingType:sy,referenceType:cy}},parseVertexColors:function(ly){var sy=ly.MappingInformationType,cy=ly.ReferenceInformationType,fy=ly.Colors.a,vy=[];return cy==="IndexToDirect"&&(vy=ly.ColorIndex.a),{dataSize:4,buffer:fy,indices:vy,mappingType:sy,referenceType:cy}},parseMaterialIndices:function(ly){var sy=ly.MappingInformationType,cy=ly.ReferenceInformationType;if(sy==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:cy};for(var fy=ly.Materials.a,vy=[],dy=0;dy<fy.length;++dy)vy.push(dy);return{dataSize:1,buffer:fy,indices:vy,mappingType:sy,referenceType:cy}},parseNurbsGeometry:function(ly){if(e$d===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new BufferGeometry;var sy=parseInt(ly.Order);if(isNaN(sy))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",ly.Order,ly.id),new BufferGeometry;for(var cy=sy-1,fy=ly.KnotVector.a,vy=[],dy=ly.Points.a,Ay=0,gy=dy.length;Ay<gy;Ay+=4)vy.push(new Vector4().fromArray(dy,Ay));var wy,Cy;if(ly.Form==="Closed")vy.push(vy[0]);else if(ly.Form==="Periodic"){wy=cy,Cy=fy.length-1-wy;for(var Ay=0;Ay<cy;++Ay)vy.push(vy[Ay])}var My=new e$d(cy,fy,vy,wy,Cy),Py=My.getPoints(vy.length*7),Dy=new Float32Array(Py.length*3);Py.forEach(function(Xy,$y){Xy.toArray(Dy,$y*3)});var qy=new BufferGeometry;return qy.setAttribute("position",new BufferAttribute(Dy,3)),qy}};function Po(){}Po.prototype={constructor:Po,parse:function(){var ly=[],sy=this.parseClips();if(sy!==void 0)for(var cy in sy){var fy=sy[cy],vy=this.addClip(fy);ly.push(vy)}return ly},parseClips:function(){if(cr.Objects.AnimationCurve!==void 0){var ly=this.parseAnimationCurveNodes();this.parseAnimationCurves(ly);var sy=this.parseAnimationLayers(ly),cy=this.parseAnimStacks(sy);return cy}},parseAnimationCurveNodes:function(){var ly=cr.Objects.AnimationCurveNode,sy=new Map;for(var cy in ly){var fy=ly[cy];if(fy.attrName.match(/S|R|T|DeformPercent/)!==null){var vy={id:fy.id,attr:fy.attrName,curves:{}};sy.set(vy.id,vy)}}return sy},parseAnimationCurves:function(ly){var sy=cr.Objects.AnimationCurve;for(var cy in sy){var fy={id:sy[cy].id,times:sy[cy].KeyTime.a.map(ey),values:sy[cy].KeyValueFloat.a},vy=vn.get(fy.id);if(vy!==void 0){var dy=vy.parents[0].ID,Ay=vy.parents[0].relationship;Ay.match(/X/)?ly.get(dy).curves.x=fy:Ay.match(/Y/)?ly.get(dy).curves.y=fy:Ay.match(/Z/)?ly.get(dy).curves.z=fy:Ay.match(/d|DeformPercent/)&&ly.has(dy)&&(ly.get(dy).curves.morph=fy)}}},parseAnimationLayers:function(ly){var sy=cr.Objects.AnimationLayer,cy=new Map;for(var fy in sy){var vy=[],dy=vn.get(parseInt(fy));if(dy!==void 0){var Ay=dy.children;Ay.forEach(function(gy,wy){if(ly.has(gy.ID)){var Cy=ly.get(gy.ID);if(Cy.curves.x!==void 0||Cy.curves.y!==void 0||Cy.curves.z!==void 0){if(vy[wy]===void 0){var My=vn.get(gy.ID).parents.filter(function(xy){return xy.relationship!==void 0})[0].ID;if(My!==void 0){var Py=cr.Objects.Model[My.toString()];if(Py===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",gy);return}var Dy={modelName:Py.attrName?PropertyBinding.sanitizeNodeName(Py.attrName):"",ID:Py.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};yn.traverse(function(xy){xy.ID===Py.id&&(Dy.transform=xy.matrix,xy.userData.transformData&&(Dy.eulerOrder=xy.userData.transformData.eulerOrder))}),Dy.transform||(Dy.transform=new Matrix4),"PreRotation"in Py&&(Dy.preRotation=Py.PreRotation.value),"PostRotation"in Py&&(Dy.postRotation=Py.PostRotation.value),vy[wy]=Dy}}vy[wy]&&(vy[wy][Cy.attr]=Cy)}else if(Cy.curves.morph!==void 0){if(vy[wy]===void 0){var qy=vn.get(gy.ID).parents.filter(function(ky){return ky.relationship!==void 0})[0].ID,Xy=vn.get(qy).parents[0].ID,$y=vn.get(Xy).parents[0].ID,My=vn.get($y).parents[0].ID,Py=cr.Objects.Model[My],Dy={modelName:Py.attrName?PropertyBinding.sanitizeNodeName(Py.attrName):"",morphName:cr.Objects.Deformer[qy].attrName};vy[wy]=Dy}vy[wy][Cy.attr]=Cy}}}),cy.set(parseInt(fy),vy)}}return cy},parseAnimStacks:function(ly){var sy=cr.Objects.AnimationStack,cy={};for(var fy in sy){var vy=vn.get(parseInt(fy)).children;vy.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var dy=ly.get(vy[0].ID);cy[fy]={name:sy[fy].attrName,layer:dy}}return cy},addClip:function(ly){var sy=[],cy=this;return ly.layer.forEach(function(fy){sy=sy.concat(cy.generateTracks(fy))}),new AnimationClip(ly.name,-1,sy)},generateTracks:function(ly){var sy=[],cy=new Vector3,fy=new Quaternion,vy=new Vector3;if(ly.transform&&ly.transform.decompose(cy,fy,vy),cy=cy.toArray(),fy=new Euler().setFromQuaternion(fy,ly.eulerOrder).toArray(),vy=vy.toArray(),ly.T!==void 0&&Object.keys(ly.T.curves).length>0){var dy=this.generateVectorTrack(ly.modelName,ly.T.curves,cy,"position");dy!==void 0&&sy.push(dy)}if(ly.R!==void 0&&Object.keys(ly.R.curves).length>0){var Ay=this.generateRotationTrack(ly.modelName,ly.R.curves,fy,ly.preRotation,ly.postRotation,ly.eulerOrder);Ay!==void 0&&sy.push(Ay)}if(ly.S!==void 0&&Object.keys(ly.S.curves).length>0){var gy=this.generateVectorTrack(ly.modelName,ly.S.curves,vy,"scale");gy!==void 0&&sy.push(gy)}if(ly.DeformPercent!==void 0){var wy=this.generateMorphTrack(ly);wy!==void 0&&sy.push(wy)}return sy},generateVectorTrack:function(ly,sy,cy,fy){var vy=this.getTimesForAllAxes(sy),dy=this.getKeyframeTrackValues(vy,sy,cy);return new VectorKeyframeTrack(ly+"."+fy,vy,dy)},generateRotationTrack:function(ly,sy,cy,fy,vy,dy){sy.x!==void 0&&(this.interpolateRotations(sy.x),sy.x.values=sy.x.values.map(MathUtils.degToRad)),sy.y!==void 0&&(this.interpolateRotations(sy.y),sy.y.values=sy.y.values.map(MathUtils.degToRad)),sy.z!==void 0&&(this.interpolateRotations(sy.z),sy.z.values=sy.z.values.map(MathUtils.degToRad));var Ay=this.getTimesForAllAxes(sy),gy=this.getKeyframeTrackValues(Ay,sy,cy);fy!==void 0&&(fy=fy.map(MathUtils.degToRad),fy.push(dy),fy=new Euler().fromArray(fy),fy=new Quaternion().setFromEuler(fy)),vy!==void 0&&(vy=vy.map(MathUtils.degToRad),vy.push(dy),vy=new Euler().fromArray(vy),vy=new Quaternion().setFromEuler(vy).inverse());for(var wy=new Quaternion,Cy=new Euler,My=[],Py=0;Py<gy.length;Py+=3)Cy.set(gy[Py],gy[Py+1],gy[Py+2],dy),wy.setFromEuler(Cy),fy!==void 0&&wy.premultiply(fy),vy!==void 0&&wy.multiply(vy),wy.toArray(My,Py/3*4);return new QuaternionKeyframeTrack(ly+".quaternion",Ay,My)},generateMorphTrack:function(ly){var sy=ly.DeformPercent.curves.morph,cy=sy.values.map(function(vy){return vy/100}),fy=yn.getObjectByName(ly.modelName).morphTargetDictionary[ly.morphName];return new NumberKeyframeTrack(ly.modelName+".morphTargetInfluences["+fy+"]",sy.times,cy)},getTimesForAllAxes:function(ly){var sy=[];return ly.x!==void 0&&(sy=sy.concat(ly.x.times)),ly.y!==void 0&&(sy=sy.concat(ly.y.times)),ly.z!==void 0&&(sy=sy.concat(ly.z.times)),sy=sy.sort(function(cy,fy){return cy-fy}).filter(function(cy,fy,vy){return vy.indexOf(cy)==fy}),sy},getKeyframeTrackValues:function(ly,sy,cy){var fy=cy,vy=[],dy=-1,Ay=-1,gy=-1;return ly.forEach(function(wy){if(sy.x&&(dy=sy.x.times.indexOf(wy)),sy.y&&(Ay=sy.y.times.indexOf(wy)),sy.z&&(gy=sy.z.times.indexOf(wy)),dy!==-1){var Cy=sy.x.values[dy];vy.push(Cy),fy[0]=Cy}else vy.push(fy[0]);if(Ay!==-1){var My=sy.y.values[Ay];vy.push(My),fy[1]=My}else vy.push(fy[1]);if(gy!==-1){var Py=sy.z.values[gy];vy.push(Py),fy[2]=Py}else vy.push(fy[2])}),vy},interpolateRotations:function(ly){for(var sy=1;sy<ly.values.length;sy++){var cy=ly.values[sy-1],fy=ly.values[sy]-cy,vy=Math.abs(fy);if(vy>=180){for(var dy=vy/180,Ay=fy/dy,gy=cy+Ay,wy=ly.times[sy-1],Cy=ly.times[sy]-wy,My=Cy/dy,Py=wy+My,Dy=[],qy=[];Py<ly.times[sy];)Dy.push(Py),Py+=My,qy.push(gy),gy+=Ay;ly.times=my(ly.times,sy,Dy),ly.values=my(ly.values,sy,qy)}}}};function To(){}To.prototype={constructor:To,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(ly){this.nodeStack.push(ly),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(ly,sy){this.currentProp=ly,this.currentPropName=sy},parse:function(ly){this.currentIndent=0,this.allNodes=new Wl,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var sy=this,cy=ly.split(/[\r\n]+/);return cy.forEach(function(fy,vy){var dy=fy.match(/^[\s\t]*;/),Ay=fy.match(/^[\s\t]*$/);if(!(dy||Ay)){var gy=fy.match("^\\t{"+sy.currentIndent+"}(\\w+):(.*){",""),wy=fy.match("^\\t{"+sy.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Cy=fy.match("^\\t{"+(sy.currentIndent-1)+"}}");gy?sy.parseNodeBegin(fy,gy):wy?sy.parseNodeProperty(fy,wy,cy[++vy]):Cy?sy.popStack():fy.match(/^[^\s\t}]/)&&sy.parseNodePropertyContinued(fy)}}),this.allNodes},parseNodeBegin:function(ly,sy){var cy=sy[1].trim().replace(/^"/,"").replace(/"$/,""),fy=sy[2].split(",").map(function(gy){return gy.trim().replace(/^"/,"").replace(/"$/,"")}),vy={name:cy},dy=this.parseNodeAttr(fy),Ay=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(cy,vy):cy in Ay?(cy==="PoseNode"?Ay.PoseNode.push(vy):Ay[cy].id!==void 0&&(Ay[cy]={},Ay[cy][Ay[cy].id]=Ay[cy]),dy.id!==""&&(Ay[cy][dy.id]=vy)):typeof dy.id=="number"?(Ay[cy]={},Ay[cy][dy.id]=vy):cy!=="Properties70"&&(cy==="PoseNode"?Ay[cy]=[vy]:Ay[cy]=vy),typeof dy.id=="number"&&(vy.id=dy.id),dy.name!==""&&(vy.attrName=dy.name),dy.type!==""&&(vy.attrType=dy.type),this.pushStack(vy)},parseNodeAttr:function(ly){var sy=ly[0];ly[0]!==""&&(sy=parseInt(ly[0]),isNaN(sy)&&(sy=ly[0]));var cy="",fy="";return ly.length>1&&(cy=ly[1].replace(/^(\w+)::/,""),fy=ly[2]),{id:sy,name:cy,type:fy}},parseNodeProperty:function(ly,sy,cy){var fy=sy[1].replace(/^"/,"").replace(/"$/,"").trim(),vy=sy[2].replace(/^"/,"").replace(/"$/,"").trim();fy==="Content"&&vy===","&&(vy=cy.replace(/"/g,"").replace(/,$/,"").trim());var dy=this.getCurrentNode(),Ay=dy.name;if(Ay==="Properties70"){this.parseNodeSpecialProperty(ly,fy,vy);return}if(fy==="C"){var gy=vy.split(",").slice(1),wy=parseInt(gy[0]),Cy=parseInt(gy[1]),My=vy.split(",").slice(3);My=My.map(function(Py){return Py.trim().replace(/^"/,"")}),fy="connections",vy=[wy,Cy],uy(vy,My),dy[fy]===void 0&&(dy[fy]=[])}fy==="Node"&&(dy.id=vy),fy in dy&&Array.isArray(dy[fy])?dy[fy].push(vy):fy!=="a"?dy[fy]=vy:dy.a=vy,this.setCurrentProp(dy,fy),fy==="a"&&vy.slice(-1)!==","&&(dy.a=oy(vy))},parseNodePropertyContinued:function(ly){var sy=this.getCurrentNode();sy.a+=ly,ly.slice(-1)!==","&&(sy.a=oy(sy.a))},parseNodeSpecialProperty:function(ly,sy,cy){var fy=cy.split('",').map(function(Cy){return Cy.trim().replace(/^\"/,"").replace(/\s/,"_")}),vy=fy[0],dy=fy[1],Ay=fy[2],gy=fy[3],wy=fy[4];switch(dy){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":wy=parseFloat(wy);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":wy=oy(wy);break}this.getPrevNode()[vy]={type:dy,type2:Ay,flag:gy,value:wy},this.setCurrentProp(this.getPrevNode(),vy)}};function Io(){}Io.prototype={constructor:Io,parse:function(ly){var sy=new $l(ly);sy.skip(23);var cy=sy.getUint32();console.info("THREE.FBXLoader: FBX binary version: "+cy);for(var fy=new Wl;!this.endOfContent(sy);){var vy=this.parseNode(sy,cy);vy!==null&&fy.add(vy.name,vy)}return fy},endOfContent:function(ly){return ly.size()%16===0?(ly.getOffset()+160+16&-16)>=ly.size():ly.getOffset()+160+16>=ly.size()},parseNode:function(ly,sy){var cy={},fy=sy>=7500?ly.getUint64():ly.getUint32(),vy=sy>=7500?ly.getUint64():ly.getUint32();sy>=7500?ly.getUint64():ly.getUint32();var dy=ly.getUint8(),Ay=ly.getString(dy);if(fy===0)return null;for(var gy=[],wy=0;wy<vy;wy++)gy.push(this.parseProperty(ly));var Cy=gy.length>0?gy[0]:"",My=gy.length>1?gy[1]:"",Py=gy.length>2?gy[2]:"";for(cy.singleProperty=vy===1&&ly.getOffset()===fy;fy>ly.getOffset();){var Dy=this.parseNode(ly,sy);Dy!==null&&this.parseSubNode(Ay,cy,Dy)}return cy.propertyList=gy,typeof Cy=="number"&&(cy.id=Cy),My!==""&&(cy.attrName=My),Py!==""&&(cy.attrType=Py),Ay!==""&&(cy.name=Ay),cy},parseSubNode:function(ly,sy,cy){if(cy.singleProperty===!0){var fy=cy.propertyList[0];Array.isArray(fy)?(sy[cy.name]=cy,cy.a=fy):sy[cy.name]=fy}else if(ly==="Connections"&&cy.name==="C"){var vy=[];cy.propertyList.forEach(function(Py,Dy){Dy!==0&&vy.push(Py)}),sy.connections===void 0&&(sy.connections=[]),sy.connections.push(vy)}else if(cy.name==="Properties70"){var dy=Object.keys(cy);dy.forEach(function(Py){sy[Py]=cy[Py]})}else if(ly==="Properties70"&&cy.name==="P"){var Ay=cy.propertyList[0],gy=cy.propertyList[1],wy=cy.propertyList[2],Cy=cy.propertyList[3],My;Ay.indexOf("Lcl ")===0&&(Ay=Ay.replace("Lcl ","Lcl_")),gy.indexOf("Lcl ")===0&&(gy=gy.replace("Lcl ","Lcl_")),gy==="Color"||gy==="ColorRGB"||gy==="Vector"||gy==="Vector3D"||gy.indexOf("Lcl_")===0?My=[cy.propertyList[4],cy.propertyList[5],cy.propertyList[6]]:My=cy.propertyList[4],sy[Ay]={type:gy,type2:wy,flag:Cy,value:My}}else sy[cy.name]===void 0?typeof cy.id=="number"?(sy[cy.name]={},sy[cy.name][cy.id]=cy):sy[cy.name]=cy:cy.name==="PoseNode"?(Array.isArray(sy[cy.name])||(sy[cy.name]=[sy[cy.name]]),sy[cy.name].push(cy)):sy[cy.name][cy.id]===void 0&&(sy[cy.name][cy.id]=cy)},parseProperty:function(ly){var sy=ly.getString(1);switch(sy){case"C":return ly.getBoolean();case"D":return ly.getFloat64();case"F":return ly.getFloat32();case"I":return ly.getInt32();case"L":return ly.getInt64();case"R":var cy=ly.getUint32();return ly.getArrayBuffer(cy);case"S":var cy=ly.getUint32();return ly.getString(cy);case"Y":return ly.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var fy=ly.getUint32(),vy=ly.getUint32(),dy=ly.getUint32();if(vy===0)switch(sy){case"b":case"c":return ly.getBooleanArray(fy);case"d":return ly.getFloat64Array(fy);case"f":return ly.getFloat32Array(fy);case"i":return ly.getInt32Array(fy);case"l":return ly.getInt64Array(fy)}typeof nt$4=="undefined"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var Ay=new nt$4.Inflate(new Uint8Array(ly.getArrayBuffer(dy))),gy=new $l(Ay.decompress().buffer);switch(sy){case"b":case"c":return gy.getBooleanArray(fy);case"d":return gy.getFloat64Array(fy);case"f":return gy.getFloat32Array(fy);case"i":return gy.getInt32Array(fy);case"l":return gy.getInt64Array(fy)}default:throw new Error("THREE.FBXLoader: Unknown property type "+sy)}}};function $l(ly,sy){this.dv=new DataView(ly),this.offset=0,this.littleEndian=sy!==void 0?sy:!0}$l.prototype={constructor:$l,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(ly){this.offset+=ly},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy.push(this.getBoolean());return sy},getUint8:function(){var ly=this.dv.getUint8(this.offset);return this.offset+=1,ly},getInt16:function(){var ly=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,ly},getInt32:function(){var ly=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,ly},getInt32Array:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy.push(this.getInt32());return sy},getUint32:function(){var ly=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,ly},getInt64:function(){var ly,sy;return this.littleEndian?(ly=this.getUint32(),sy=this.getUint32()):(sy=this.getUint32(),ly=this.getUint32()),sy&2147483648?(sy=~sy&4294967295,ly=~ly&4294967295,ly===4294967295&&(sy=sy+1&4294967295),ly=ly+1&4294967295,-(sy*4294967296+ly)):sy*4294967296+ly},getInt64Array:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy.push(this.getInt64());return sy},getUint64:function(){var ly,sy;return this.littleEndian?(ly=this.getUint32(),sy=this.getUint32()):(sy=this.getUint32(),ly=this.getUint32()),sy*4294967296+ly},getFloat32:function(){var ly=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,ly},getFloat32Array:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy.push(this.getFloat32());return sy},getFloat64:function(){var ly=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,ly},getFloat64Array:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy.push(this.getFloat64());return sy},getArrayBuffer:function(ly){var sy=this.dv.buffer.slice(this.offset,this.offset+ly);return this.offset+=ly,sy},getString:function(ly){for(var sy=[],cy=0;cy<ly;cy++)sy[cy]=this.getUint8();var fy=sy.indexOf(0);return fy>=0&&(sy=sy.slice(0,fy)),LoaderUtils.decodeText(new Uint8Array(sy))}};function Wl(){}Wl.prototype={constructor:Wl,add:function(ly,sy){this[ly]=sy}};function Xl(ly){var sy="Kaydara FBX Binary  \0";return ly.byteLength>=sy.length&&sy===ay(ly,0,sy.length)}function Yl(ly){var sy=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],cy=0;function fy(Ay){var gy=ly[Ay-1];return ly=ly.slice(cy+Ay),cy++,gy}for(var vy=0;vy<sy.length;++vy){var dy=fy(1);if(dy===sy[vy])return!1}return!0}function Zl(ly){var sy=/FBXVersion: (\d+)/,cy=ly.match(sy);if(cy){var fy=parseInt(cy[1]);return fy}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ey(ly){return ly/46186158e3}var Rm=[];function ry(ly,sy,cy,fy){var vy;switch(fy.mappingType){case"ByPolygonVertex":vy=ly;break;case"ByPolygon":vy=sy;break;case"ByVertice":vy=cy;break;case"AllSame":vy=fy.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+fy.mappingType)}fy.referenceType==="IndexToDirect"&&(vy=fy.indices[vy]);var dy=vy*fy.dataSize,Ay=dy+fy.dataSize;return hy(Rm,fy.buffer,dy,Ay)}var _g=new Euler,ty=new Vector3;function ny(ly){var sy=new Matrix4,cy=new Matrix4,fy=new Matrix4,vy=new Matrix4,dy=new Matrix4,Ay=new Matrix4,gy=new Matrix4,wy=new Matrix4,Cy=new Matrix4,My=new Matrix4,Py=new Matrix4,Dy=ly.inheritType?ly.inheritType:0;if(ly.translation&&sy.setPosition(ty.fromArray(ly.translation)),ly.preRotation){var qy=ly.preRotation.map(MathUtils.degToRad);qy.push(ly.eulerOrder),cy.makeRotationFromEuler(_g.fromArray(qy))}if(ly.rotation){var qy=ly.rotation.map(MathUtils.degToRad);qy.push(ly.eulerOrder),fy.makeRotationFromEuler(_g.fromArray(qy))}if(ly.postRotation){var qy=ly.postRotation.map(MathUtils.degToRad);qy.push(ly.eulerOrder),vy.makeRotationFromEuler(_g.fromArray(qy))}ly.scale&&dy.scale(ty.fromArray(ly.scale)),ly.scalingOffset&&gy.setPosition(ty.fromArray(ly.scalingOffset)),ly.scalingPivot&&Ay.setPosition(ty.fromArray(ly.scalingPivot)),ly.rotationOffset&&wy.setPosition(ty.fromArray(ly.rotationOffset)),ly.rotationPivot&&Cy.setPosition(ty.fromArray(ly.rotationPivot)),ly.parentMatrixWorld&&(My=ly.parentMatrixWorld);var Xy=cy.multiply(fy).multiply(vy),$y=new Matrix4;My.extractRotation($y);var xy=new Matrix4;xy.copyPosition(My);var Ry=new Matrix4;Ry.getInverse($y).multiply(My);var Ly=new Matrix4;if(Dy===0)Ly.copy($y).multiply(Xy).multiply(Ry).multiply(dy);else if(Dy===1)Ly.copy($y).multiply(Ry).multiply(Xy).multiply(dy);else{var ky=new Matrix4().getInverse(dy),Ey=new Matrix4().multiply(Ry).multiply(ky);Ly.copy($y).multiply(Xy).multiply(Ey).multiply(dy)}var Iy=new Matrix4().getInverse(Cy),zy=new Matrix4().getInverse(Ay),Uy=new Matrix4;Uy.copy(sy).multiply(wy).multiply(Cy).multiply(cy).multiply(fy).multiply(vy).multiply(Iy).multiply(gy).multiply(Ay).multiply(dy).multiply(zy);var Qy=new Matrix4().copyPosition(Uy),Gy=new Matrix4().copy(My).multiply(Qy);return Py.copyPosition(Gy),Uy=new Matrix4().multiply(Py).multiply(Ly),Uy}function iy(ly){ly=ly||0;var sy=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return ly===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),sy[0]):sy[ly]}function oy(ly){var sy=ly.split(",").map(function(cy){return parseFloat(cy)});return sy}function ay(ly,sy,cy){return sy===void 0&&(sy=0),cy===void 0&&(cy=ly.byteLength),LoaderUtils.decodeText(new Uint8Array(ly,sy,cy))}function uy(ly,sy){for(var cy=0,fy=ly.length,vy=sy.length;cy<vy;cy++,fy++)ly[fy]=sy[cy]}function hy(ly,sy,cy,fy){for(var vy=cy,dy=0;vy<fy;vy++,dy++)ly[dy]=sy[vy];return ly}function my(ly,sy,cy){return ly.slice(0,sy).concat(cy).concat(ly.slice(sy))}return Rn})();const m$o=window.requestAnimationFrame||(cr=>setTimeout(cr,16)),F$g=window.cancelAnimationFrame||clearTimeout;function T$f(cr,vn=0){vn<=0?m$o(cr):m$o(()=>T$f(cr,vn-1))}function l$p(cr,vn=60){let yn=-1,Rn=0,Bn=-1;const Co=1e3/vn;function Po(To){Bn===-1&&(Bn=To),yn=m$o(Po),!(To-Rn<Co)&&(Rn=To,cr==null||cr(To-Bn))}return yn=m$o(Po),function(){F$g(yn)}}var i$n=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const m$n=new TextureLoader;function p$w(cr){return i$n(this,null,function*(){return new Promise((vn,yn)=>{m$n.load(cr,vn,void 0,yn)}).then(vn=>(vn.encoding=sRGBEncoding,vn.minFilter=NearestFilter,vn.magFilter=NearestFilter,vn))})}function u$t(cr){return i$n(this,null,function*(){return p$w(cr).then(vn=>{const yn=cr.startsWith("data:")?cr.includes("png"):new URL(cr,location.href).pathname.toLowerCase().endsWith(".png");return{texture:vn,transparent:yn}})})}var r$u=Object.defineProperty,n$n=(cr,vn,yn)=>vn in cr?r$u(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$m=(cr,vn,yn)=>(n$n(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class d$x extends M$v{constructor(){super(...arguments),i$m(this,"disposeMethods",[]),i$m(this,"animationFrameDisposer"),i$m(this,"onDispose",vn=>(this.disposeMethods.push(vn),this)),i$m(this,"play",()=>{var vn;return this.start(0),(vn=this.animationFrameDisposer)==null||vn.call(this),this.animationFrameDisposer=l$p(yn=>this.update(yn)),this}),i$m(this,"stop",()=>{var vn;return super.stop(),(vn=this.animationFrameDisposer)==null||vn.call(this),this}),i$m(this,"dispose",()=>{var vn;this.stop(),(vn=this.animationFrameDisposer)==null||vn.call(this),this.disposeMethods.forEach(yn=>yn()),this.disposeMethods=[],j$p(this)})}}function F$f(cr,vn=y$x.Linear.None){const yn=new d$x({progress:0}).to({progress:1});return cr!==void 0&&yn.duration(cr),vn!==void 0&&yn.easing(vn),yn}var C$g=Object.defineProperty,g$y=Object.defineProperties,d$w=Object.getOwnPropertyDescriptors,t$8=Object.getOwnPropertySymbols,p$v=Object.prototype.hasOwnProperty,a$t=Object.prototype.propertyIsEnumerable,i$l=(cr,vn,yn)=>vn in cr?C$g(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$t=(cr,vn)=>{for(var yn in vn||(vn={}))p$v.call(vn,yn)&&i$l(cr,yn,vn[yn]);if(t$8)for(var yn of t$8(vn))a$t.call(vn,yn)&&i$l(cr,yn,vn[yn]);return cr},l$o=(cr,vn)=>g$y(cr,d$w(vn));const c$v=1,L$h=new Color(16777215);new Color(6522623);const R$g=new Color(16777215);new Color(6522623);const E$n=6,O$f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",s$f=new TextureLoader().load(O$f),U$d={pointTexture:s$f,pointSize:E$n,lineWidth:c$v,lineColor:L$h,pointColor:R$g,lineRenderOrder:20,pointsRenderOrder:20};l$o(r$t({},U$d),{dashed:!0});var B$m={},N$e={get exports(){return B$m},set exports(cr){B$m=cr}};N$e.exports=P$p;B$m.default=P$p;function P$p(cr,vn,yn){yn=yn||2;var Rn=vn&&vn.length,Bn=Rn?vn[0]*yn:cr.length,Co=G$c(cr,0,Bn,yn,!0),Po=[];if(!Co||Co.next===Co.prev)return Po;var To,Io,$l,Wl,Xl,Yl,Zl;if(Rn&&(Co=I$m(cr,vn,Co,yn)),cr.length>80*yn){To=$l=cr[0],Io=Wl=cr[1];for(var ey=yn;ey<Bn;ey+=yn)Xl=cr[ey],Yl=cr[ey+1],Xl<To&&(To=Xl),Yl<Io&&(Io=Yl),Xl>$l&&($l=Xl),Yl>Wl&&(Wl=Yl);Zl=Math.max($l-To,Wl-Io),Zl=Zl!==0?32767/Zl:0}return k$j(Co,Po,yn,To,Io,Zl,0),Po}function G$c(cr,vn,yn,Rn,Bn){var Co,Po;if(Bn===R$f(cr,vn,yn,Rn)>0)for(Co=vn;Co<yn;Co+=Rn)Po=$$8(Co,cr[Co],cr[Co+1],Po);else for(Co=yn-Rn;Co>=vn;Co-=Rn)Po=$$8(Co,cr[Co],cr[Co+1],Po);return Po&&C$f(Po,Po.next)&&(z$h(Po),Po=Po.next),Po}function g$x(cr,vn){if(!cr)return cr;vn||(vn=cr);var yn=cr,Rn;do if(Rn=!1,!yn.steiner&&(C$f(yn,yn.next)||Z$8(yn.prev,yn,yn.next)===0)){if(z$h(yn),yn=vn=yn.prev,yn===yn.next)break;Rn=!0}else yn=yn.next;while(Rn||yn!==vn);return vn}function k$j(cr,vn,yn,Rn,Bn,Co,Po){if(cr){!Po&&Co&&q$l(cr,Rn,Bn,Co);for(var To=cr,Io,$l;cr.prev!==cr.next;){if(Io=cr.prev,$l=cr.next,Co?U$c(cr,Rn,Bn,Co):Q$b(cr)){vn.push(Io.i/yn|0),vn.push(cr.i/yn|0),vn.push($l.i/yn|0),z$h(cr),cr=$l.next,To=$l.next;continue}if(cr=$l,cr===To){Po?Po===1?(cr=W$a(g$x(cr),vn,yn),k$j(cr,vn,yn,Rn,Bn,Co,2)):Po===2&&_$d(cr,vn,yn,Rn,Bn,Co):k$j(g$x(cr),vn,yn,Rn,Bn,Co,1);break}}}}function Q$b(cr){var vn=cr.prev,yn=cr,Rn=cr.next;if(Z$8(vn,yn,Rn)>=0)return!1;for(var Bn=vn.x,Co=yn.x,Po=Rn.x,To=vn.y,Io=yn.y,$l=Rn.y,Wl=Bn<Co?Bn<Po?Bn:Po:Co<Po?Co:Po,Xl=To<Io?To<$l?To:$l:Io<$l?Io:$l,Yl=Bn>Co?Bn>Po?Bn:Po:Co>Po?Co:Po,Zl=To>Io?To>$l?To:$l:Io>$l?Io:$l,ey=Rn.next;ey!==vn;){if(ey.x>=Wl&&ey.x<=Yl&&ey.y>=Xl&&ey.y<=Zl&&F$e(Bn,To,Co,Io,Po,$l,ey.x,ey.y)&&Z$8(ey.prev,ey,ey.next)>=0)return!1;ey=ey.next}return!0}function U$c(cr,vn,yn,Rn){var Bn=cr.prev,Co=cr,Po=cr.next;if(Z$8(Bn,Co,Po)>=0)return!1;for(var To=Bn.x,Io=Co.x,$l=Po.x,Wl=Bn.y,Xl=Co.y,Yl=Po.y,Zl=To<Io?To<$l?To:$l:Io<$l?Io:$l,ey=Wl<Xl?Wl<Yl?Wl:Yl:Xl<Yl?Xl:Yl,Rm=To>Io?To>$l?To:$l:Io>$l?Io:$l,ry=Wl>Xl?Wl>Yl?Wl:Yl:Xl>Yl?Xl:Yl,_g=D$l(Zl,ey,vn,yn,Rn),ty=D$l(Rm,ry,vn,yn,Rn),ny=cr.prevZ,iy=cr.nextZ;ny&&ny.z>=_g&&iy&&iy.z<=ty;){if(ny.x>=Zl&&ny.x<=Rm&&ny.y>=ey&&ny.y<=ry&&ny!==Bn&&ny!==Po&&F$e(To,Wl,Io,Xl,$l,Yl,ny.x,ny.y)&&Z$8(ny.prev,ny,ny.next)>=0||(ny=ny.prevZ,iy.x>=Zl&&iy.x<=Rm&&iy.y>=ey&&iy.y<=ry&&iy!==Bn&&iy!==Po&&F$e(To,Wl,Io,Xl,$l,Yl,iy.x,iy.y)&&Z$8(iy.prev,iy,iy.next)>=0))return!1;iy=iy.nextZ}for(;ny&&ny.z>=_g;){if(ny.x>=Zl&&ny.x<=Rm&&ny.y>=ey&&ny.y<=ry&&ny!==Bn&&ny!==Po&&F$e(To,Wl,Io,Xl,$l,Yl,ny.x,ny.y)&&Z$8(ny.prev,ny,ny.next)>=0)return!1;ny=ny.prevZ}for(;iy&&iy.z<=ty;){if(iy.x>=Zl&&iy.x<=Rm&&iy.y>=ey&&iy.y<=ry&&iy!==Bn&&iy!==Po&&F$e(To,Wl,Io,Xl,$l,Yl,iy.x,iy.y)&&Z$8(iy.prev,iy,iy.next)>=0)return!1;iy=iy.nextZ}return!0}function W$a(cr,vn,yn){var Rn=cr;do{var Bn=Rn.prev,Co=Rn.next.next;!C$f(Bn,Co)&&J$f(Bn,Rn,Rn.next,Co)&&H$o(Bn,Co)&&H$o(Co,Bn)&&(vn.push(Bn.i/yn|0),vn.push(Rn.i/yn|0),vn.push(Co.i/yn|0),z$h(Rn),z$h(Rn.next),Rn=cr=Co),Rn=Rn.next}while(Rn!==cr);return g$x(Rn)}function _$d(cr,vn,yn,Rn,Bn,Co){var Po=cr;do{for(var To=Po.next.next;To!==Po.prev;){if(Po.i!==To.i&&m$m(Po,To)){var Io=K$f(Po,To);Po=g$x(Po,Po.next),Io=g$x(Io,Io.next),k$j(Po,vn,yn,Rn,Bn,Co,0),k$j(Io,vn,yn,Rn,Bn,Co,0);return}To=To.next}Po=Po.next}while(Po!==cr)}function I$m(cr,vn,yn,Rn){var Bn=[],Co,Po,To,Io,$l;for(Co=0,Po=vn.length;Co<Po;Co++)To=vn[Co]*Rn,Io=Co<Po-1?vn[Co+1]*Rn:cr.length,$l=G$c(cr,To,Io,Rn,!1),$l===$l.next&&($l.steiner=!0),Bn.push(b$o($l));for(Bn.sort(S$l),Co=0;Co<Bn.length;Co++)yn=X$7(Bn[Co],yn);return yn}function S$l(cr,vn){return cr.x-vn.x}function X$7(cr,vn){var yn=j$l(cr,vn);if(!yn)return vn;var Rn=K$f(yn,cr);return g$x(Rn,Rn.next),g$x(yn,yn.next)}function j$l(cr,vn){var yn=vn,Rn=cr.x,Bn=cr.y,Co=-1/0,Po;do{if(Bn<=yn.y&&Bn>=yn.next.y&&yn.next.y!==yn.y){var To=yn.x+(Bn-yn.y)*(yn.next.x-yn.x)/(yn.next.y-yn.y);if(To<=Rn&&To>Co&&(Co=To,Po=yn.x<yn.next.x?yn:yn.next,To===Rn))return Po}yn=yn.next}while(yn!==vn);if(!Po)return null;var Io=Po,$l=Po.x,Wl=Po.y,Xl=1/0,Yl;yn=Po;do Rn>=yn.x&&yn.x>=$l&&Rn!==yn.x&&F$e(Bn<Wl?Rn:Co,Bn,$l,Wl,Bn<Wl?Co:Rn,Bn,yn.x,yn.y)&&(Yl=Math.abs(Bn-yn.y)/(Rn-yn.x),H$o(yn,cr)&&(Yl<Xl||Yl===Xl&&(yn.x>Po.x||yn.x===Po.x&&Y$a(Po,yn)))&&(Po=yn,Xl=Yl)),yn=yn.next;while(yn!==Io);return Po}function Y$a(cr,vn){return Z$8(cr.prev,cr,vn.prev)<0&&Z$8(vn.next,cr,cr.next)<0}function q$l(cr,vn,yn,Rn){var Bn=cr;do Bn.z===0&&(Bn.z=D$l(Bn.x,Bn.y,vn,yn,Rn)),Bn.prevZ=Bn.prev,Bn.nextZ=Bn.next,Bn=Bn.next;while(Bn!==cr);Bn.prevZ.nextZ=null,Bn.prevZ=null,a$s(Bn)}function a$s(cr){var vn,yn,Rn,Bn,Co,Po,To,Io,$l=1;do{for(yn=cr,cr=null,Co=null,Po=0;yn;){for(Po++,Rn=yn,To=0,vn=0;vn<$l&&(To++,Rn=Rn.nextZ,!!Rn);vn++);for(Io=$l;To>0||Io>0&&Rn;)To!==0&&(Io===0||!Rn||yn.z<=Rn.z)?(Bn=yn,yn=yn.nextZ,To--):(Bn=Rn,Rn=Rn.nextZ,Io--),Co?Co.nextZ=Bn:cr=Bn,Bn.prevZ=Co,Co=Bn;yn=Rn}Co.nextZ=null,$l*=2}while(Po>1);return cr}function D$l(cr,vn,yn,Rn,Bn){return cr=(cr-yn)*Bn|0,vn=(vn-Rn)*Bn|0,cr=(cr|cr<<8)&16711935,cr=(cr|cr<<4)&252645135,cr=(cr|cr<<2)&858993459,cr=(cr|cr<<1)&1431655765,vn=(vn|vn<<8)&16711935,vn=(vn|vn<<4)&252645135,vn=(vn|vn<<2)&858993459,vn=(vn|vn<<1)&1431655765,cr|vn<<1}function b$o(cr){var vn=cr,yn=cr;do(vn.x<yn.x||vn.x===yn.x&&vn.y<yn.y)&&(yn=vn),vn=vn.next;while(vn!==cr);return yn}function F$e(cr,vn,yn,Rn,Bn,Co,Po,To){return(Bn-Po)*(vn-To)>=(cr-Po)*(Co-To)&&(cr-Po)*(Rn-To)>=(yn-Po)*(vn-To)&&(yn-Po)*(Co-To)>=(Bn-Po)*(Rn-To)}function m$m(cr,vn){return cr.next.i!==vn.i&&cr.prev.i!==vn.i&&!d$v(cr,vn)&&(H$o(cr,vn)&&H$o(vn,cr)&&ee$4(cr,vn)&&(Z$8(cr.prev,cr,vn.prev)||Z$8(cr,vn.prev,vn))||C$f(cr,vn)&&Z$8(cr.prev,cr,cr.next)>0&&Z$8(vn.prev,vn,vn.next)>0)}function Z$8(cr,vn,yn){return(vn.y-cr.y)*(yn.x-vn.x)-(vn.x-cr.x)*(yn.y-vn.y)}function C$f(cr,vn){return cr.x===vn.x&&cr.y===vn.y}function J$f(cr,vn,yn,Rn){var Bn=A$q(Z$8(cr,vn,yn)),Co=A$q(Z$8(cr,vn,Rn)),Po=A$q(Z$8(yn,Rn,cr)),To=A$q(Z$8(yn,Rn,vn));return!!(Bn!==Co&&Po!==To||Bn===0&&E$m(cr,yn,vn)||Co===0&&E$m(cr,Rn,vn)||Po===0&&E$m(yn,cr,Rn)||To===0&&E$m(yn,vn,Rn))}function E$m(cr,vn,yn){return vn.x<=Math.max(cr.x,yn.x)&&vn.x>=Math.min(cr.x,yn.x)&&vn.y<=Math.max(cr.y,yn.y)&&vn.y>=Math.min(cr.y,yn.y)}function A$q(cr){return cr>0?1:cr<0?-1:0}function d$v(cr,vn){var yn=cr;do{if(yn.i!==cr.i&&yn.next.i!==cr.i&&yn.i!==vn.i&&yn.next.i!==vn.i&&J$f(yn,yn.next,cr,vn))return!0;yn=yn.next}while(yn!==cr);return!1}function H$o(cr,vn){return Z$8(cr.prev,cr,cr.next)<0?Z$8(cr,vn,cr.next)>=0&&Z$8(cr,cr.prev,vn)>=0:Z$8(cr,vn,cr.prev)<0||Z$8(cr,cr.next,vn)<0}function ee$4(cr,vn){var yn=cr,Rn=!1,Bn=(cr.x+vn.x)/2,Co=(cr.y+vn.y)/2;do yn.y>Co!=yn.next.y>Co&&yn.next.y!==yn.y&&Bn<(yn.next.x-yn.x)*(Co-yn.y)/(yn.next.y-yn.y)+yn.x&&(Rn=!Rn),yn=yn.next;while(yn!==cr);return Rn}function K$f(cr,vn){var yn=new O$e(cr.i,cr.x,cr.y),Rn=new O$e(vn.i,vn.x,vn.y),Bn=cr.next,Co=vn.prev;return cr.next=vn,vn.prev=cr,yn.next=Bn,Bn.prev=yn,Rn.next=yn,yn.prev=Rn,Co.next=Rn,Rn.prev=Co,Rn}function $$8(cr,vn,yn,Rn){var Bn=new O$e(cr,vn,yn);return Rn?(Bn.next=Rn.next,Bn.prev=Rn,Rn.next.prev=Bn,Rn.next=Bn):(Bn.prev=Bn,Bn.next=Bn),Bn}function z$h(cr){cr.next.prev=cr.prev,cr.prev.next=cr.next,cr.prevZ&&(cr.prevZ.nextZ=cr.nextZ),cr.nextZ&&(cr.nextZ.prevZ=cr.prevZ)}function O$e(cr,vn,yn){this.i=cr,this.x=vn,this.y=yn,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}P$p.deviation=function(cr,vn,yn,Rn){var Bn=vn&&vn.length,Co=Bn?vn[0]*yn:cr.length,Po=Math.abs(R$f(cr,0,Co,yn));if(Bn)for(var To=0,Io=vn.length;To<Io;To++){var $l=vn[To]*yn,Wl=To<Io-1?vn[To+1]*yn:cr.length;Po-=Math.abs(R$f(cr,$l,Wl,yn))}var Xl=0;for(To=0;To<Rn.length;To+=3){var Yl=Rn[To]*yn,Zl=Rn[To+1]*yn,ey=Rn[To+2]*yn;Xl+=Math.abs((cr[Yl]-cr[ey])*(cr[Zl+1]-cr[Yl+1])-(cr[Yl]-cr[Zl])*(cr[ey+1]-cr[Yl+1]))}return Po===0&&Xl===0?0:Math.abs((Xl-Po)/Po)};function R$f(cr,vn,yn,Rn){for(var Bn=0,Co=vn,Po=yn-Rn;Co<yn;Co+=Rn)Bn+=(cr[Po]-cr[Co])*(cr[Co+1]+cr[Po+1]),Po=Co;return Bn}P$p.flatten=function(cr){for(var vn=cr[0][0].length,yn={vertices:[],holes:[],dimensions:vn},Rn=0,Bn=0;Bn<cr.length;Bn++){for(var Co=0;Co<cr[Bn].length;Co++)for(var Po=0;Po<vn;Po++)yn.vertices.push(cr[Bn][Co][Po]);Bn>0&&(Rn+=cr[Bn-1].length,yn.holes.push(Rn))}return yn};function l$n(cr){if(cr.length<3){console.error("points.length < 3");return}const[vn,yn,Rn]=cr;return new Vector3().subVectors(Rn,yn).cross(new Vector3().subVectors(vn,yn)).normalize()}function p$u(cr){if(cr.length<3)return[];const vn=l$n(cr),yn=new Quaternion().setFromUnitVectors(vn,new Vector3(0,1,0)),Rn=cr.map(Bn=>Bn.clone().applyQuaternion(yn)).flatMap(Bn=>[Bn.x,Bn.z]);return B$m(Rn)}function a$r(cr,vn){const yn=Array.isArray(vn)?vn:[vn];for(let Rn=0;Rn<yn.length;Rn++){const Bn=cr.start,Co=cr.end,Po=yn[Rn].start,To=yn[Rn].end;if(!(f$D(Bn,Po)||f$D(Bn,To)||f$D(Co,Po)||f$D(Co,To)||f$D(Bn,Co))&&d$u([Bn.x,Bn.y,Bn.z],[Co.x,Co.y,Co.z],[Po.x,Po.y,Po.z],[To.x,To.y,To.z]))return!0}return!1}function d$u(cr,vn,yn,Rn){const Bn=[vn[0]-cr[0],vn[1]-cr[1],vn[2]-cr[2]],Co=[Rn[0]-yn[0],Rn[1]-yn[1],Rn[2]-yn[2]],Po=[[Bn[0],-Co[0]],[Bn[1],-Co[1]],[Bn[2],-Co[2]]],To=[yn[0]-cr[0],yn[1]-cr[1],yn[2]-cr[2]],Io=g$w(Po,To);if(Io===null)return!1;const[$l,Wl]=Io;return!!(y$s($l)&&y$s(Wl))}function g$w(cr,vn){if(q$k(cr)===0)return null;const yn=I$l(cr);return V$9(yn,vn)}function q$k(cr){return cr[0][0]*cr[1][1]-cr[0][1]*cr[1][0]}function I$l(cr){const vn=cr[0][0]*cr[1][1]-cr[0][1]*cr[1][0];return[[cr[1][1]/vn,-cr[0][1]/vn],[-cr[1][0]/vn,cr[0][0]/vn]]}function V$9(cr,vn){return[cr[0][0]*vn[0]+cr[0][1]*vn[1],cr[1][0]*vn[0]+cr[1][1]*vn[1]]}function y$s(cr){return cr>=0&&cr<=1}function f$D(cr,vn){return cr.x===vn.x&&cr.y===vn.y&&cr.z===vn.z}function h$q(cr,vn){const yn=[...new Set(cr)];if(yn.length<3)return;if(yn.at(-1).equals(yn[0])||yn.push(yn[0]),vn!=null&&vn.checkLinesIntersect&&yn.length>=5){const To=yn.map((Io,$l)=>$l===0?null:{start:yn[$l-1],end:yn[$l]}).filter(Boolean);for(let Io=0;Io<To.length;Io++)if(a$r(To[Io],To.slice(Io)))return}const Rn=yn.flatMap(To=>[To.x,To.y,To.z]),Bn=new Float32BufferAttribute(Rn,3),Co=p$u(yn),Po=new BufferGeometry;return Po.setAttribute("position",Bn),Po.setIndex(Co),Po.name="PolygonGeometry",Po}new BufferGeometry;function b$n(cr){const vn=A$p(cr);if(vn.length===0){console.warn("No geometry triangles found"),console.debug({geometry:cr,triangles:vn});return}let yn=0,Rn=new Vector3;for(const[Bn,Co,Po]of vn){const To=u$s(Bn,Co,Po),Io=d$t(Bn,Co,Po,To);yn+=To,Rn.add(Io)}return Rn=Rn.divideScalar(yn),{center:Rn,area:yn}}function u$s(cr,vn,yn){return vn.clone().sub(cr).cross(yn.clone().sub(cr)).length()/2}function d$t(cr,vn,yn,Rn){const Bn=Rn!=null?Rn:u$s(cr,vn,yn);return c$J(cr,vn,yn).multiplyScalar(Bn)}function A$p(cr){var vn;const yn=cr.getAttribute("position"),Rn=(vn=cr.getIndex())==null?void 0:vn.array;if(!yn||!Rn)return[];let Bn=[];for(let Co=0;Co<Rn.length;Co+=3){const Po=Rn[Co],To=Rn[Co+1],Io=Rn[Co+2],$l=new Vector3().fromArray([yn.getX(Po),yn.getY(Po),yn.getZ(Po)]),Wl=new Vector3().fromArray([yn.getX(To),yn.getY(To),yn.getZ(To)]),Xl=new Vector3().fromArray([yn.getX(Io),yn.getY(Io),yn.getZ(Io)]);Bn.push([$l,Wl,Xl])}return Bn}function h$p(cr,vn){const{top:yn,left:Rn,width:Bn,height:Co}=vn.getBoundingClientRect();return new Vector2((cr.x-Rn)/Bn*2-1,-(cr.y-yn)/Co*2+1)}var a$q={},k$i={get exports(){return a$q},set exports(cr){a$q=cr}};function f$C(cr){return cr===null?"null":typeof cr=="undefined"?"undefined":typeof cr=="object"?Array.isArray(cr)?"array":"object":typeof cr}function h$o(cr){return f$C(cr)==="object"?j$k(cr):f$C(cr)==="array"?b$m(cr):cr}function b$m(cr){return cr.map(h$o)}function j$k(cr){const vn={};for(const yn in cr)cr.hasOwnProperty(yn)&&(vn[yn]=h$o(cr[yn]));return vn}function y$r(cr,vn=[],yn={}){const Rn={arrayBehaviour:yn.arrayBehaviour||"replace"},Bn=vn.map(Po=>Po||{}),Co=cr||{};for(let Po=0;Po<Bn.length;Po++){const To=Bn[Po],Io=Object.keys(To);for(let $l=0;$l<Io.length;$l++){const Wl=Io[$l],Xl=To[Wl],Yl=f$C(Xl),Zl=f$C(Co[Wl]);if(Yl==="object")if(Zl!=="undefined"){const ey=Zl==="object"?Co[Wl]:{};Co[Wl]=y$r({},[ey,j$k(Xl)],Rn)}else Co[Wl]=j$k(Xl);else if(Yl==="array")if(Zl==="array"){const ey=b$m(Xl);Co[Wl]=Rn.arrayBehaviour==="merge"?Co[Wl].concat(ey):ey}else Co[Wl]=b$m(Xl);else Co[Wl]=Xl}}return Co}k$i.exports=function(cr,...vn){return y$r(cr,vn)};a$q.noMutate=function(...cr){return y$r({},cr)};a$q.withOptions=function(cr,vn,yn){return y$r(cr,vn,yn)};function r$s(cr){return typeof cr=="object"?cr===null?{}:cr:{}}var R$e=Object.defineProperty,P$o=Object.defineProperties,V$8=Object.getOwnPropertyDescriptors,N$d=Object.getOwnPropertySymbols,T$e=Object.prototype.hasOwnProperty,B$l=Object.prototype.propertyIsEnumerable,D$k=(cr,vn,yn)=>vn in cr?R$e(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,L$g=(cr,vn)=>{for(var yn in vn||(vn={}))T$e.call(vn,yn)&&D$k(cr,yn,vn[yn]);if(N$d)for(var yn of N$d(vn))B$l.call(vn,yn)&&D$k(cr,yn,vn[yn]);return cr},S$k=(cr,vn)=>P$o(cr,V$8(vn)),a$p=(cr,vn,yn)=>(D$k(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class Q$a{constructor(vn,yn){a$p(this,"_five"),a$p(this,"dragging",!1),a$p(this,"boundObject",{}),a$p(this,"config"),a$p(this,"handleWantsGesture",(Bn,Co)=>{if(Co.length!==1)return;const Po=Co[0];if(Po.raycaster){const To=new h$z;To.ray=Po.raycaster.ray,To.near=Po.raycaster.near,To.far=Po.raycaster.far,To.camera=Po.raycaster.camera,To.layers=Po.raycaster.layers,To.params=Po.raycaster.params,Po.raycaster=To}if(Po){if(Bn==="mouseMove"&&this.onDomEvent("hover",Po),Bn==="tap"){const To=new MouseEvent("click",{clientX:Po.x,clientY:Po.y}),Io=this.onDomEvent("click",Po,To),$l=this.onDomEvent("wantDblclick",Po,To,this.boundObject.dblclick);if(Io===!1||$l===!1)return!1}if(this.dragging)return!1}}),a$p(this,"handleDomEvent",(Bn,Co,Po)=>{const To={x:Co.clientX,y:Co.clientY};this.onDomEvent(Bn,To,Co,Po)}),a$p(this,"handleMouseEvent",Bn=>{this.handleDomEvent(Bn.type,Bn)}),a$p(this,"handleMousedown",Bn=>{this.handleDomEvent("mousedown",Bn),this.handleDomEvent("dragstart",Bn,this.haveDragEventObject)}),a$p(this,"handleMouseup",Bn=>{var Co;this.dragging=!1,(Co=this.haveDragEventObject)==null||Co.forEach(Po=>{Po._dragging&&(Po._dragging=!1,this.notify({eventName:"dragend",object:Po,originEvent:Bn,raycaster:this.getRaycaster({x:Bn.clientX,y:Bn.clientY})}))}),this.handleDomEvent("mouseup",Bn)}),a$p(this,"handleMousemove",Bn=>{var Co;this.dragging&&((Co=this.boundObject.drag)==null||Co.forEach(Po=>{Po._dragging&&this.notify({eventName:"drag",object:Po,originEvent:Bn,raycaster:this.getRaycaster({x:Bn.clientX,y:Bn.clientY})})}))}),a$p(this,"onDomEvent",(Bn,Co,Po,To=this.boundObject[Bn])=>{var Io,$l,Wl,Xl,Yl;if(!Co||!To||(To==null?void 0:To.length)===0)return;const Zl=[];((Io=this.config)==null?void 0:Io.fiveModels)!==null&&(($l=this.config)!=null&&$l.fiveModels?Zl.push(...this.config.fiveModels):Zl.push(this.model));const ey=Zl.filter(iy=>iy.loaded),Rm=(Wl=Co.raycaster)!=null?Wl:this.getRaycaster(Co);Rm.params.Points.threshold=.04;const ry=Rm.intersectObjects(To,!0),_g=[];ey.forEach(iy=>{const oy=iy.intersectRaycaster(Rm);_g.push(...oy)});const ty=.01;if(_g.length>0&&ry.length>0&&_g[0].distance+ty<ry[0].distance)return;const ny=(Xl=ry==null?void 0:ry[0])==null?void 0:Xl.object;if(Bn==="wantDblclick")return!1;if((!ny||!this.objectIsBound(ny))&&Bn==="hover")for(const iy of(Yl=this.boundObject.hover)!=null?Yl:[])iy._hovered&&this.notify({eventName:"unHover",object:iy});if(ny&&ny&&this.notify({eventName:Bn,object:ny,originEvent:Po,raycaster:Rm,intersects:ry,fiveModelIntersects:_g}))return!1}),a$p(this,"objectIsBound",Bn=>{let Co=Bn._domEvent,Po=Bn.parent;for(;typeof Co=="undefined"&&Po;)Co=Po._domEvent,Po=Po.parent;return!!Co}),a$p(this,"notify",Bn=>{var Co,Po,To,Io,$l,Wl,Xl;const{eventName:Yl,object:Zl,originEvent:ey,raycaster:Rm,intersects:ry,fiveModelIntersects:_g}=Bn;if(!Zl)return!1;let ty=!1,ny=[];const iy=[],oy=()=>{if(!ry)return!1;const my=ry.slice(1);return my[0]?this.notify(S$k(L$g({},Bn),{object:my[0].object,intersects:my})):!1};let ay=Zl;for(iy.push(ay);ay.parent;)ay=ay.parent,iy.push(ay);const uy=iy[iy.length-1];if((Co=this.config)!=null&&Co.noEmitWhenNotInScene&&uy.type!=="Scene")return oy();let hy=!1;for(const my of iy){if(ty)break;my.draggable&&(Yl==="dragstart"&&(my._dragging=!0,this.dragging=!0),Yl==="dragend"&&(my._dragging=!1,this.dragging=!1));const ly=my._domEvent;if(!ly)continue;const sy=ly[`${Yl}Handler`];if(sy)for(const[cy,fy]of sy){if(fy!=null&&fy.noEmitWhenNotInScene&&uy.type!=="Scene")continue;if(fy.skipPano&&_g){const dy=(Po=_g[0])==null?void 0:Po.point;if(dy&&($l=(Io=(To=this.five.observers)==null?void 0:To[this.five.panoIndex])==null?void 0:Io.accessibleNodes)!=null&&$l.some(Ay=>{var gy;const wy=(gy=this.five.works.getResolvedObserver({workCode:this.five.state.workCode,panoIndex:Ay}))==null?void 0:gy.standingPosition;return(wy==null?void 0:wy.distanceTo(dy))<.3}))continue}if(((Wl=this.config)!=null&&Wl.noEmitWhenHide||fy!=null&&fy.noEmitWhenHide)&&!r$D(my))continue;if(hy=!0,Yl==="hover"){if(my._hovered)continue;my._hovered=!0;for(const dy of(Xl=this.boundObject.hover)!=null?Xl:[])dy!==my&&dy._hovered&&this.notify({eventName:"unHover",object:dy})}if(Yl==="unHover"){if(!my._hovered)continue;my._hovered=!1}const vy=cy({type:Yl,target:my,origDomEvent:ey,raycaster:Rm,intersects:ry,stopPropagation:()=>{ty=!0}});ny.push(vy!=null?vy:!0)}}if(hy===!1)return oy();if(Yl==="click"||Yl==="wantDblclick")return ny.some(my=>my===!0)});var Rn;this.five=vn,this.config=yn,vn.off("wantsGesture",this.handleWantsGesture),vn.on("wantsGesture",this.handleWantsGesture),document.addEventListener("mousedown",this.handleMousedown),document.addEventListener("dblclick",this.handleMouseEvent),document.addEventListener("mouseup",this.handleMouseup),document.addEventListener("mousemove",this.handleMousemove),window.__FIVE_DOM_EVENTS__=(Rn=window.__FIVE_DOM_EVENTS__)!=null?Rn:[],window.__FIVE_DOM_EVENTS__.push(this)}get five(){return this._five}set five(vn){var yn;(yn=this._five)==null||yn.off("wantsGesture",this.handleWantsGesture),this._five=vn,this._five.on("wantsGesture",this.handleWantsGesture)}get haveDragEventObject(){return[...new Set([this.boundObject.dragend,this.boundObject.drag,this.boundObject.dragstart].flat())].filter(Boolean)}get model(){return l$w(this.five)}addAutoBindEventListener(vn,yn,Rn,Bn){const Co=()=>this.addEventListener(vn,yn,Rn,Bn),Po=()=>this.removeEventListener(vn,yn,Rn,Bn);return vn.addEventListener("added",Co),vn.addEventListener("removed",Po),vn.addEventListener("dispose",Po),()=>{vn.removeEventListener("added",Co),vn.removeEventListener("removed",Po),vn.removeEventListener("dispose",Po)}}addEventListener(vn,yn,Rn,Bn){vn._domEvent||(vn._domEvent={}),vn._domEvent[`${yn}Handler`]||(vn._domEvent[`${yn}Handler`]=[]),this.boundObject[yn]||(this.boundObject[yn]=[]),this.boundObject[yn].includes(vn)||this.boundObject[yn].push(vn),vn._domEvent[`${yn}Handler`].push([Rn,L$g({noEmitWhenHide:!1,noEmitWhenNotInScene:!1},Bn)])}removeEventListener(vn,yn,Rn,...Bn){var Co,Po;if(!vn._domEvent||(yn===void 0&&(Object.keys(this.boundObject).forEach(Io=>{var $l,Wl;const Xl=($l=this.boundObject[Io])==null?void 0:$l.findIndex(Yl=>Yl===vn);Xl!==-1&&((Wl=this.boundObject[Io])==null||Wl.splice(Xl,1))}),vn._domEvent={}),!vn._domEvent[`${yn}Handler`]))return;if(Rn===void 0){delete vn._domEvent[`${yn}Handler`];return}const To=vn._domEvent[`${yn}Handler`].findIndex(Io=>Io[0]===Rn);if(To!==-1&&(vn._domEvent[`${yn}Handler`].splice(To,1),vn._domEvent[`${yn}Handler`].length===0&&delete vn._domEvent[`${yn}Handler`],vn._domEvent&&Object.keys(vn._domEvent).length===0&&delete vn._domEvent,!vn._domEvent)){const Io=(Co=this.boundObject[yn])==null?void 0:Co.findIndex($l=>$l===vn);Io!==-1&&((Po=this.boundObject[yn])==null||Po.splice(Io,1))}}clear(){this.boundObject={}}dispose(){var vn;(vn=this.five)==null||vn.off("wantsGesture",this.handleWantsGesture),document.removeEventListener("mousedown",this.handleMousedown),document.removeEventListener("mouseup",this.handleMouseup),document.removeEventListener("mousemove",this.handleMousemove),this.boundObject={}}toJSON(){return{boundObject:this.boundObject}}getRaycaster(vn){const yn=this.five.getElement();if(!yn)return;const Rn=h$p(vn,yn),Bn=new h$z;return Bn.setFromCamera(Rn,this.five.camera),Bn}}var E$l=Object.defineProperty,N$c=Object.defineProperties,P$n=Object.getOwnPropertyDescriptors,A$o=Object.getOwnPropertySymbols,b$l=Object.prototype.hasOwnProperty,v$q=Object.prototype.propertyIsEnumerable,f$B=(cr,vn,yn)=>vn in cr?E$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$o=(cr,vn)=>{for(var yn in vn||(vn={}))b$l.call(vn,yn)&&f$B(cr,yn,vn[yn]);if(A$o)for(var yn of A$o(vn))v$q.call(vn,yn)&&f$B(cr,yn,vn[yn]);return cr},m$l=(cr,vn)=>N$c(cr,P$n(vn)),k$h=(cr,vn)=>{var yn={};for(var Rn in cr)b$l.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&A$o)for(var Rn of A$o(cr))vn.indexOf(Rn)<0&&v$q.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},s$e=(cr,vn,yn)=>(f$B(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const x$o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==";let C$e=null;class ot$3 extends c$C{constructor(vn){var yn,Rn,Bn;super(),s$e(this,"name","PointMesh"),s$e(this,"dom"),s$e(this,"opacityBeforeHighlight"),s$e(this,"highlighted",!1),s$e(this,"fontMesh"),s$e(this,"backgroundMesh"),s$e(this,"lastRenderDomItem"),s$e(this,"paramsStyle"),s$e(this,"_visible",!0),s$e(this,"_onAdded",()=>{this.dom||this.updateDom()}),s$e(this,"_onRemoved",()=>{var Zl;(Zl=this.dom)==null||Zl.destroy(),this.dom=void 0}),s$e(this,"_onShowed",()=>{this.dom&&(this.dom.container.style.display="block")}),s$e(this,"_onHidden",()=>{this.dom&&(this.dom.container.style.display="none")});const Co=vn!=null?vn:{},Po=k$h(Co,["point"]);this.paramsStyle=Po!=null?Po:{};const To=new BufferGeometry;To.setAttribute("position",new Float32BufferAttribute([0,0,0],3));const Io={transparent:!0,side:DoubleSide,size:(yn=vn==null?void 0:vn.size)!=null?yn:8,map:C$e||(C$e=new TextureLoader().load(x$o)),sizeAttenuation:!1},$l=new PointsMaterial(m$l(a$o({},Io),{color:(Rn=vn==null?void 0:vn.color)!=null?Rn:16777215,depthTest:!0,opacity:(Bn=vn==null?void 0:vn.opacity)!=null?Bn:1})),Wl=new PointsMaterial(m$l(a$o({},Io),{size:$l.size,color:$l.color,depthWrite:!1,depthTest:!1,opacity:$l.opacity*.5})),Xl=new Points(To,$l),Yl=new Points(To,Wl);this.fontMesh=Xl,this.backgroundMesh=Yl,Xl.name="FontMesh",Yl.name="BackgroundMesh",Xl.renderOrder=10,Yl.renderOrder=0,this.add(Xl,Yl),vn!=null&&vn.point&&this.position.copy(t$j(vn.point)),vn&&this.setStyle(vn),this.addEventListener("removed",()=>{r$y.cacheObject.delete(this),r$y.checkDom(this)}),this.addEventListener("added",()=>{r$y.cacheObject.add(this)}),r$y.checkDomEveryFrame()}get color(){return this.fontMesh.material.color}get size(){return this.fontMesh.material.size}get style(){return{color:this.color,size:this.size,opacity:this.fontMesh.material.opacity,occlusionVisibility:this.fontMesh.material.depthTest,occlusionMode:this.backgroundMesh.visible?"depthWrite":"depthTest"}}get five(){var vn,yn;return(yn=(vn=window.globalModules)==null?void 0:vn.five)!=null?yn:window.$five}setStyle(vn){i$w(vn.color)&&(this.fontMesh.material.setValues({color:vn.color}),this.backgroundMesh.material.setValues({color:vn.color})),i$w(vn.size)&&(this.fontMesh.material.setValues({side:vn.size}),this.backgroundMesh.material.setValues({side:vn.size})),i$w(vn.occlusionVisibility)&&(vn.occlusionVisibility?vn.occlusionMode==="depthTest"?(this.fontMesh.material.depthTest=!1,this.backgroundMesh.visible=!1):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!0):(this.fontMesh.material.depthTest=!0,this.backgroundMesh.visible=!1))}highlight(){this.highlighted||(this.highlighted=!0,this.opacityBeforeHighlight=this.fontMesh.material.opacity,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight*E$t}))}unhighlight(){this.highlighted&&(this.highlighted=!1,this.fontMesh.material.setValues({opacity:this.opacityBeforeHighlight}))}updateMatrixWorld(vn){super.updateMatrixWorld(vn);const yn=a$x(this,this.position).toArray().join(",");yn!==this.lastRenderDomItem&&(this.updateDom(),this.lastRenderDomItem=yn)}updateDom(){const vn=this.paramsStyle.tip;vn&&!this.dom&&(this.dom=new R$k(this.five),this.dom.intersectCheck=!1,this.dom.simulate3D=!0,this.dom.container.style.display=this.visible?"block":"none");const yn=Rn=>{this.dom&&this.dom.__text!==Rn&&(this.dom.__text=Rn,Rn instanceof HTMLElement?(this.dom.container.innerHTML="",this.dom.container.appendChild(Rn)):Rn?this.dom.container.innerHTML=c$B(Rn,{style:""}):this.dom.container.innerHTML="")};vn?(yn(vn),this.dom.setPosition(this.position.clone())):yn(null)}}var g$v=Object.defineProperty,f$A=Object.defineProperties,S$j=Object.getOwnPropertyDescriptors,u$r=Object.getOwnPropertySymbols,c$u=Object.prototype.hasOwnProperty,b$k=Object.prototype.propertyIsEnumerable,l$m=(cr,vn,yn)=>vn in cr?g$v(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$r=(cr,vn)=>{for(var yn in vn||(vn={}))c$u.call(vn,yn)&&l$m(cr,yn,vn[yn]);if(u$r)for(var yn of u$r(vn))b$k.call(vn,yn)&&l$m(cr,yn,vn[yn]);return cr},a$n=(cr,vn)=>f$A(cr,S$j(vn)),e$c=(cr,vn,yn)=>(l$m(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class z$g extends Oe$1{constructor(vn){super(),e$c(this,"name","LineWithDotsMesh"),e$c(this,"pointGroup",new c$C),e$c(this,"_paramsStyle"),e$c(this,"setStyle",yn=>{super.setStyle(yn),this._paramsStyle=r$r(r$r({},this._paramsStyle),yn),this.pointMeshes.forEach(Rn=>{var Bn,Co,Po;return Rn.setStyle(a$n(r$r({},this._paramsStyle),{color:(Po=(Bn=this._paramsStyle)==null?void 0:Bn.pointColor)!=null?Po:(Co=this._paramsStyle)==null?void 0:Co.lineColor,tip:void 0}))}),this.updateEdgePointsVisibility(),this.needsRender=!0}),e$c(this,"highlight",yn=>{super.highlight(yn),this.pointMeshes.forEach(Rn=>Rn.highlight())}),e$c(this,"unhighlight",()=>{super.unhighlight(),this.pointMeshes.forEach(yn=>yn.unhighlight())}),e$c(this,"updateEdgePointsVisibility",()=>{var yn;i$w((yn=this._paramsStyle)==null?void 0:yn.pointVisibility)&&(this.startPoint&&(this.startPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.startPoint:this._paramsStyle.pointVisibility),this.endPoint&&(this.endPoint.visible=typeof this._paramsStyle.pointVisibility=="object"?this._paramsStyle.pointVisibility.endPoint:this._paramsStyle.pointVisibility))}),this.add(this.pointGroup),vn&&this.setStyle(vn),vn!=null&&vn.points&&this.setPoints(vn.points)}get startPoint(){return this.pointMeshes[0]}get endPoint(){return this.pointMeshes.length<2?null:this.pointMeshes[this.pointMeshes.length-1]}get visiblePointMeshes(){return this.pointMeshes.filter(vn=>vn.visible)}get pointMeshes(){return this.pointGroup.children}setPoints(vn){super.setPoints(vn);const yn=vn.map(t$j).filter(i$w);this.pointGroup.removeChildren(),this.addIfNotExists(this.pointGroup),yn.forEach(Rn=>{var Bn,Co,Po;const To=new ot$3(a$n(r$r({},this.style),{color:(Po=(Bn=this._paramsStyle)==null?void 0:Bn.pointColor)!=null?Po:(Co=this._paramsStyle)==null?void 0:Co.lineColor,tip:void 0}));To.position.copy(Rn),this.pointGroup.add(To)}),this.updateEdgePointsVisibility(),this.needsRender=!0}}var y$q=Object.defineProperty,u$q=Object.getOwnPropertySymbols,f$z=Object.prototype.hasOwnProperty,B$k=Object.prototype.propertyIsEnumerable,g$u=(cr,vn,yn)=>vn in cr?y$q(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$m=(cr,vn)=>{for(var yn in vn||(vn={}))f$z.call(vn,yn)&&g$u(cr,yn,vn[yn]);if(u$q)for(var yn of u$q(vn))B$k.call(vn,yn)&&g$u(cr,yn,vn[yn]);return cr},s$d=(cr,vn,yn)=>(g$u(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class A$n extends c$C{constructor(vn){var yn,Rn;super(),s$d(this,"name","ColoredMesh"),s$d(this,"meshFont"),s$d(this,"meshBackground"),s$d(this,"paramsStyle",{}),s$d(this,"_geometry",new BufferGeometry),s$d(this,"highlighted",!1),s$d(this,"opacityBeforeHighlight"),s$d(this,"colorBeforeHighlight"),this.paramsStyle=vn!=null?vn:{};const Bn=new MeshBasicMaterial({color:new Color((yn=vn==null?void 0:vn.color)!=null?yn:L$n).convertSRGBToLinear(),transparent:!0,side:DoubleSide,depthTest:!0,depthWrite:!1,opacity:(Rn=vn==null?void 0:vn.opacity)!=null?Rn:A$w}),Co=new MeshBasicMaterial({color:16777215,transparent:!0,side:DoubleSide,depthTest:!1,depthWrite:!1,opacity:.3/.5*Bn.opacity}),Po=new Mesh(this.geometry,Bn),To=new Mesh(this.geometry,Co);Po.name="MeshFront",To.name="MeshBackground",Po.renderOrder=1,To.renderOrder=0,this.meshFont=Po,this.meshBackground=To,this.add(Po),this.setOcclusionVisibility({occlusionVisibility:vn==null?void 0:vn.occlusionVisibility,occlusionMode:vn==null?void 0:vn.occlusionMode})}get style(){return{color:this.color,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get color(){return this.meshFont.material.color}get opacity(){return this.meshFont.material.opacity}get occlusionVisibility(){return!!this.meshBackground.parent||this.meshFont.material.depthTest===!1}get occlusionMode(){return this.meshFont.material.depthTest===!1?"depthTest":"translucence"}set geometry(vn){this._geometry=vn,this.meshFont.geometry=vn,this.meshBackground.geometry=vn}get geometry(){return this._geometry}setStyle(vn){this.paramsStyle=a$m(a$m({},this.paramsStyle),vn),i$w(vn.color)&&(this.meshFont.material.color.set(new Color(vn.color).convertSRGBToLinear()),this.needsRender=!0),i$w(vn.opacity)&&(this.meshFont.material.opacity=vn.opacity,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.needsRender=!0),this.setOcclusionVisibility(vn)}highlight(vn){var yn,Rn;this.highlighted=!0,i$w(vn==null?void 0:vn.color)?(this.colorBeforeHighlight=(yn=this.colorBeforeHighlight)!=null?yn:this.meshFont.material.color.clone(),this.meshFont.material.color.set(new Color(vn.color).convertSRGBToLinear())):(this.opacityBeforeHighlight=(Rn=this.opacityBeforeHighlight)!=null?Rn:this.opacity,this.meshFont.material.opacity=this.opacity*E$t,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity),this.needsRender=!0}unhighlight(){this.highlighted=!1,i$w(this.opacityBeforeHighlight)&&(this.meshFont.material.opacity=this.opacityBeforeHighlight,this.meshBackground.material.opacity=.3/.5*this.meshFont.material.opacity,this.opacityBeforeHighlight=void 0),i$w(this.colorBeforeHighlight)&&(this.meshFont.material.color=new Color(this.colorBeforeHighlight),this.colorBeforeHighlight=void 0),this.needsRender=!0}setOcclusionVisibility(vn){var yn,Rn,Bn;const Co=(Rn=(yn=vn.occlusionMode)!=null?yn:this.paramsStyle.occlusionMode)!=null?Rn:"translucence",Po=(Bn=vn.occlusionVisibility)!=null?Bn:this.paramsStyle.occlusionVisibility;i$w(Po)&&(Po?Co==="depthTest"?(this.meshFont.material.depthTest=!1,this.remove(this.meshBackground)):Co==="translucence"&&(this.meshFont.material.depthTest=!0,this.addIfNotExists(this.meshBackground)):(this.meshFont.material.depthTest=!0,this.remove(this.meshBackground)))}}var f$y=Object.defineProperty,g$t=Object.defineProperties,I$k=Object.getOwnPropertyDescriptors,u$p=Object.getOwnPropertySymbols,D$j=Object.prototype.hasOwnProperty,_$c=Object.prototype.propertyIsEnumerable,p$t=(cr,vn,yn)=>vn in cr?f$y(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,h$n=(cr,vn)=>{for(var yn in vn||(vn={}))D$j.call(vn,yn)&&p$t(cr,yn,vn[yn]);if(u$p)for(var yn of u$p(vn))_$c.call(vn,yn)&&p$t(cr,yn,vn[yn]);return cr},y$p=(cr,vn)=>g$t(cr,I$k(vn)),i$k=(cr,vn,yn)=>(p$t(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const d$s=new BufferGeometry;d$s.name="blankGeometry";d$s.isBlank=!0;class j$j extends A$n{constructor(vn){super(vn),i$k(this,"name","PolygonMesh"),i$k(this,"points",[]),i$k(this,"planeHelperNeedUpdate",!0),i$k(this,"geometryInfoNeedUpdate",!0),i$k(this,"_paramsStyle"),i$k(this,"areaDom"),i$k(this,"planeHelper",null),i$k(this,"_geometryInfo",null),i$k(this,"lastRenderAreaItem"),i$k(this,"_onAdded",()=>{this.areaDom||this.updateAreaItems()}),i$k(this,"_onRemoved",()=>{var yn;(yn=this.areaDom)==null||yn.destroy(),this.areaDom=void 0}),i$k(this,"_onShowed",()=>{this.areaDom&&(this.areaDom.container.style.display="block")}),i$k(this,"_onHidden",()=>{this.areaDom&&(this.areaDom.container.style.display="none")}),vn!=null&&vn.points&&this.setPoints(vn.points),this._paramsStyle=vn!=null?vn:{},this.updateAreaItems(),this.addEventListener("removed",()=>{r$y.cacheObject.delete(this),r$y.checkDom(this)}),this.addEventListener("added",()=>{r$y.cacheObject.add(this)}),r$y.checkDomEveryFrame()}get normal(){return this.points.length>=3?new Vector3().crossVectors(this.points[1].clone().sub(this.points[0]),this.points[2].clone().sub(this.points[0])).normalize():new Vector3(0,0,1)}get style(){return y$p(h$n({},super.style),{lengthEnable:this._paramsStyle.lengthEnable})}get isBlank(){return!!this.geometry.isBlank}get center(){var vn;return(vn=this.geometryInfo)==null?void 0:vn.center.clone()}get geometryInfo(){return this.geometryInfoNeedUpdate&&(this.isBlank?this._geometryInfo=null:this._geometryInfo=b$n(this.geometry),this.geometryInfoNeedUpdate=!1),this._geometryInfo}get five(){var vn,yn;return(yn=(vn=window.globalModules)==null?void 0:vn.five)!=null?yn:window.$five}updateMatrixWorld(vn){if(super.updateMatrixWorld(vn),this.center){const yn=a$x(this,this.center).toArray().join(",");yn!==this.lastRenderAreaItem&&(this.updateAreaItems(),this.lastRenderAreaItem=yn)}}setStyle(vn){var yn;this._paramsStyle=h$n(h$n({},this._paramsStyle),vn),super.setStyle(this._paramsStyle);const Rn=(yn=this._paramsStyle.occlusionVisibility)!=null?yn:!0;this.areaDom&&(this.areaDom.intersectCheck=!Rn),this.updateAreaItems()}setPoints(vn,yn){var Rn,Bn;const Co=vn.map(t$j);this.points=Co,this.geometry=(Bn=h$q(this.points,{checkLinesIntersect:(Rn=yn==null?void 0:yn.checkLinesIntersect)!=null?Rn:!0}))!=null?Bn:d$s,this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0,this.updateAreaItems()}projectPoint(vn){return vn&&(this.planeHelperNeedUpdate&&this.updatePlaneHelper(),this.planeHelper?this.planeHelper.projectPoint(vn,new Vector3):vn)}updatePlaneHelper(){this.points.length>=3?this.planeHelper=new Plane().setFromCoplanarPoints(this.points[0],this.points[1],this.points[2]):this.planeHelper=null,this.planeHelperNeedUpdate=!1}updateAreaItems(){var vn;const yn=()=>{var Bn;(Bn=this.areaDom)==null||Bn.destroy(),this.areaDom=void 0};if(!this._paramsStyle.lengthEnable||!this.geometryInfo)return yn();if(!this.five)return console.error("Five not found");this.areaDom=(vn=this.areaDom)!=null?vn:(()=>{var Bn;const Co=new R$k(this.five),Po=(Bn=this._paramsStyle.occlusionVisibility)!=null?Bn:!0;return Co.intersectCheck=!Po,Co.simulate3D=!0,Co})(),this.areaDom.setPosition(this.center);const Rn=o$z(this.geometryInfo.area,this._paramsStyle.lengthUnit);Rn?this.areaDom.container.innerHTML=c$B(Rn,{style:"color: #FFFFFF; background: #3366FF"}):this.areaDom.container.innerHTML=""}}function u$o(cr,vn){return!(Math.abs(cr.x-vn.x)>1e-5||Math.abs(cr.y-vn.y)>1e-5||Math.abs(cr.z-vn.z)>1e-5)}const j$i=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function A$m(cr,vn,yn,Rn){cr.addEventListener?cr.addEventListener(vn,yn,Rn):cr.attachEvent&&cr.attachEvent("on".concat(vn),yn)}function O$d(cr,vn,yn,Rn){cr.removeEventListener?cr.removeEventListener(vn,yn,Rn):cr.detachEvent&&cr.detachEvent("on".concat(vn),yn)}function B$j(cr,vn){const yn=vn.slice(0,vn.length-1);for(let Rn=0;Rn<yn.length;Rn++)yn[Rn]=cr[yn[Rn].toLowerCase()];return yn}function D$i(cr){typeof cr!="string"&&(cr=""),cr=cr.replace(/\s/g,"");const vn=cr.split(",");let yn=vn.lastIndexOf("");for(;yn>=0;)vn[yn-1]+=",",vn.splice(yn,1),yn=vn.lastIndexOf("");return vn}function H$n(cr,vn){const yn=cr.length>=vn.length?cr:vn,Rn=cr.length>=vn.length?vn:cr;let Bn=!0;for(let Co=0;Co<yn.length;Co++)Rn.indexOf(yn[Co])===-1&&(Bn=!1);return Bn}const b$j={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":j$i?173:189,"=":j$i?61:187,";":j$i?59:186,"'":222,"[":219,"]":221,"\\":220},g$s={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},C$d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},u$n={16:!1,18:!1,17:!1,91:!1},c$t={};for(let cr=1;cr<20;cr++)b$j["f".concat(cr)]=111+cr;let f$x=[],E$k=null,z$f="all";const w$j=new Map,L$f=cr=>b$j[cr.toLowerCase()]||g$s[cr.toLowerCase()]||cr.toUpperCase().charCodeAt(0),I$j=cr=>Object.keys(b$j).find(vn=>b$j[vn]===cr),R$d=cr=>Object.keys(g$s).find(vn=>g$s[vn]===cr);function F$d(cr){z$f=cr||"all"}function x$n(){return z$f||"all"}function V$7(){return f$x.slice(0)}function X$6(){return f$x.map(cr=>I$j(cr)||R$d(cr)||String.fromCharCode(cr))}function q$j(){const cr=[];return Object.keys(c$t).forEach(vn=>{c$t[vn].forEach(yn=>{let{key:Rn,scope:Bn,mods:Co,shortcut:Po}=yn;cr.push({scope:Bn,shortcut:Po,mods:Co,keys:Rn.split("+").map(To=>L$f(To))})})}),cr}function v$p(cr){const vn=cr.target||cr.srcElement,{tagName:yn}=vn;let Rn=!0;const Bn=yn==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(vn.type);return(vn.isContentEditable||(Bn||yn==="TEXTAREA"||yn==="SELECT")&&!vn.readOnly)&&(Rn=!1),Rn}function J$e(cr){return typeof cr=="string"&&(cr=L$f(cr)),f$x.indexOf(cr)!==-1}function Q$9(cr,vn){let yn,Rn;cr||(cr=x$n());for(const Bn in c$t)if(Object.prototype.hasOwnProperty.call(c$t,Bn))for(yn=c$t[Bn],Rn=0;Rn<yn.length;)yn[Rn].scope===cr?yn.splice(Rn,1).forEach(Co=>{let{element:Po}=Co;return S$i(Po)}):Rn++;x$n()===cr&&F$d(vn||"all")}function W$9(cr){let vn=cr.keyCode||cr.which||cr.charCode;const yn=f$x.indexOf(vn);if(yn>=0&&f$x.splice(yn,1),cr.key&&cr.key.toLowerCase()==="meta"&&f$x.splice(0,f$x.length),(vn===93||vn===224)&&(vn=91),vn in u$n){u$n[vn]=!1;for(const Rn in g$s)g$s[Rn]===vn&&(K$e[Rn]=!1)}}function G$b(cr){if(typeof cr=="undefined")Object.keys(c$t).forEach(Bn=>{Array.isArray(c$t[Bn])&&c$t[Bn].forEach(Co=>_$b(Co)),delete c$t[Bn]}),S$i(null);else if(Array.isArray(cr))cr.forEach(Bn=>{Bn.key&&_$b(Bn)});else if(typeof cr=="object")cr.key&&_$b(cr);else if(typeof cr=="string"){for(var vn=arguments.length,yn=new Array(vn>1?vn-1:0),Rn=1;Rn<vn;Rn++)yn[Rn-1]=arguments[Rn];let[Bn,Co]=yn;typeof Bn=="function"&&(Co=Bn,Bn=""),_$b({key:cr,scope:Bn,method:Co,splitKey:"+"})}}const _$b=cr=>{let{key:vn,scope:yn,method:Rn,splitKey:Bn="+"}=cr;D$i(vn).forEach(Co=>{const Po=Co.split(Bn),To=Po.length,Io=Po[To-1],$l=Io==="*"?"*":L$f(Io);if(!c$t[$l])return;yn||(yn=x$n());const Wl=To>1?B$j(g$s,Po):[],Xl=[];c$t[$l]=c$t[$l].filter(Yl=>{const Zl=(Rn?Yl.method===Rn:!0)&&Yl.scope===yn&&H$n(Yl.mods,Wl);return Zl&&Xl.push(Yl.element),!Zl}),Xl.forEach(Yl=>S$i(Yl))})};function T$d(cr,vn,yn,Rn){if(vn.element!==Rn)return;let Bn;if(vn.scope===yn||vn.scope==="all"){Bn=vn.mods.length>0;for(const Co in u$n)Object.prototype.hasOwnProperty.call(u$n,Co)&&(!u$n[Co]&&vn.mods.indexOf(+Co)>-1||u$n[Co]&&vn.mods.indexOf(+Co)===-1)&&(Bn=!1);(vn.mods.length===0&&!u$n[16]&&!u$n[18]&&!u$n[17]&&!u$n[91]||Bn||vn.shortcut==="*")&&(vn.keys=[],vn.keys=vn.keys.concat(f$x),vn.method(cr,vn)===!1&&(cr.preventDefault?cr.preventDefault():cr.returnValue=!1,cr.stopPropagation&&cr.stopPropagation(),cr.cancelBubble&&(cr.cancelBubble=!0)))}}function U$b(cr,vn){const yn=c$t["*"];let Rn=cr.keyCode||cr.which||cr.charCode;if(!K$e.filter.call(this,cr))return;if((Rn===93||Rn===224)&&(Rn=91),f$x.indexOf(Rn)===-1&&Rn!==229&&f$x.push(Rn),["metaKey","ctrlKey","altKey","shiftKey"].forEach(To=>{const Io=C$d[To];cr[To]&&f$x.indexOf(Io)===-1?f$x.push(Io):!cr[To]&&f$x.indexOf(Io)>-1?f$x.splice(f$x.indexOf(Io),1):To==="metaKey"&&cr[To]&&(f$x=f$x.filter($l=>$l in C$d||$l===Rn))}),Rn in u$n){u$n[Rn]=!0;for(const To in g$s)g$s[To]===Rn&&(K$e[To]=!0);if(!yn)return}for(const To in u$n)Object.prototype.hasOwnProperty.call(u$n,To)&&(u$n[To]=cr[C$d[To]]);cr.getModifierState&&!(cr.altKey&&!cr.ctrlKey)&&cr.getModifierState("AltGraph")&&(f$x.indexOf(17)===-1&&f$x.push(17),f$x.indexOf(18)===-1&&f$x.push(18),u$n[17]=!0,u$n[18]=!0);const Bn=x$n();if(yn)for(let To=0;To<yn.length;To++)yn[To].scope===Bn&&(cr.type==="keydown"&&yn[To].keydown||cr.type==="keyup"&&yn[To].keyup)&&T$d(cr,yn[To],Bn,vn);if(!(Rn in c$t))return;const Co=c$t[Rn],Po=Co.length;for(let To=0;To<Po;To++)if((cr.type==="keydown"&&Co[To].keydown||cr.type==="keyup"&&Co[To].keyup)&&Co[To].key){const Io=Co[To],{splitKey:$l}=Io,Wl=Io.key.split($l),Xl=[];for(let Yl=0;Yl<Wl.length;Yl++)Xl.push(L$f(Wl[Yl]));Xl.sort().join("")===f$x.sort().join("")&&T$d(cr,Io,Bn,vn)}}function K$e(cr,vn,yn){f$x=[];const Rn=D$i(cr);let Bn=[],Co="all",Po=document,To=0,Io=!1,$l=!0,Wl="+",Xl=!1,Yl=!1;for(yn===void 0&&typeof vn=="function"&&(yn=vn),Object.prototype.toString.call(vn)==="[object Object]"&&(vn.scope&&(Co=vn.scope),vn.element&&(Po=vn.element),vn.keyup&&(Io=vn.keyup),vn.keydown!==void 0&&($l=vn.keydown),vn.capture!==void 0&&(Xl=vn.capture),typeof vn.splitKey=="string"&&(Wl=vn.splitKey),vn.single===!0&&(Yl=!0)),typeof vn=="string"&&(Co=vn),Yl&&G$b(cr,Co);To<Rn.length;To++)cr=Rn[To].split(Wl),Bn=[],cr.length>1&&(Bn=B$j(g$s,cr)),cr=cr[cr.length-1],cr=cr==="*"?"*":L$f(cr),cr in c$t||(c$t[cr]=[]),c$t[cr].push({keyup:Io,keydown:$l,scope:Co,mods:Bn,shortcut:Rn[To],method:yn,key:Rn[To],splitKey:Wl,element:Po});if(typeof Po!="undefined"&&window){if(!w$j.has(Po)){const Zl=function(){let Rm=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return U$b(Rm,Po)},ey=function(){let Rm=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;U$b(Rm,Po),W$9(Rm)};w$j.set(Po,{keydownListener:Zl,keyupListenr:ey,capture:Xl}),A$m(Po,"keydown",Zl,Xl),A$m(Po,"keyup",ey,Xl)}if(!E$k){const Zl=()=>{f$x=[]};E$k={listener:Zl,capture:Xl},A$m(window,"focus",Zl,Xl)}}}function Y$9(cr){let vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(c$t).forEach(yn=>{c$t[yn].filter(Rn=>Rn.scope===vn&&Rn.shortcut===cr).forEach(Rn=>{Rn&&Rn.method&&Rn.method()})})}function S$i(cr){const vn=Object.values(c$t).flat();if(vn.findIndex(yn=>{let{element:Rn}=yn;return Rn===cr})<0){const{keydownListener:yn,keyupListenr:Rn,capture:Bn}=w$j.get(cr)||{};yn&&Rn&&(O$d(cr,"keyup",Rn,Bn),O$d(cr,"keydown",yn,Bn),w$j.delete(cr))}if((vn.length<=0||w$j.size<=0)&&(Object.keys(w$j).forEach(yn=>{const{keydownListener:Rn,keyupListenr:Bn,capture:Co}=w$j.get(yn)||{};Rn&&Bn&&(O$d(yn,"keyup",Bn,Co),O$d(yn,"keydown",Rn,Co),w$j.delete(yn))}),w$j.clear(),Object.keys(c$t).forEach(yn=>delete c$t[yn]),E$k)){const{listener:yn,capture:Rn}=E$k;O$d(window,"focus",yn,Rn),E$k=null}}const P$m={getPressedKeyString:X$6,setScope:F$d,getScope:x$n,deleteScope:Q$9,getPressedKeyCodes:V$7,getAllKeyCodes:q$j,isPressed:J$e,filter:v$p,trigger:Y$9,unbind:G$b,keyMap:b$j,modifier:g$s,modifierMap:C$d};for(const cr in P$m)Object.prototype.hasOwnProperty.call(P$m,cr)&&(K$e[cr]=P$m[cr]);if(typeof window!="undefined"){const cr=window.hotkeys;K$e.noConflict=vn=>(vn&&window.hotkeys===K$e&&(window.hotkeys=cr),K$e),window.hotkeys=K$e}const A$l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAA53+RiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAZqADAAQAAAABAAAAZgAAAACBRx3mAAAKZ0lEQVR4Ae2d65PVRBDFWUF8IAoiLIJICaVAUSgUfvH//2RpgRRUCSgI5QIFAiryfrieX3Y6Jtnk5nGTubn3dlf15j3Tc066e2aSzd2yxWWUCKyM0qoJRq2vr2Pz1qCsv5VRrW5Zz+i/Wn8jfbWyssL+uZFREyMSAP3tjG7TOqQYIVpN1tkuavHYa+14FfS5lk9FFvtGKaMiJniDEbFdiEGE2QiI5gGs4wnmHew3j+D8rBdRBmWh7wQ1cl9q+0nQxyKKckYh1uiZGiNCAM9AM5vsDn/Z952t+t5VfTukHwSFSIh9JH2o+h5rOVMxEKIbEbzDyOAOBhhCzQsBwzKKBDveV2UfS3dJuUmo/4H0nmzBM6NLdGIKhHCn4hkvpDNP0LINez6S7pFCEqHtnvRuzJtF9aXxm/VBJUMIsR4PIb4/n9UdWddY2fuezjkghSS8+Q/pmuzlRhpconiMGklCp6HUR5iAkNEkWtlTKbKdfARBq1JIuSnb8aJBZVBi1ChCA4TgIRDxTI2aScxW3VOJ2kJn4aj0QymdhF/VlqdaDiKDEaOGELK42xA8hNA196J24TlHpESB62rX2hCN6p0YGU6ZEILhuD5eYmMMbc6/qI207Zh0r5Tcc1lt7DX39EqMDCZkQQpLur30thZW1N5DatyXUtp5Ue0lxPUivREjI+n/W+ia21zSFlW1m5zztZQx2QWRc79tGWXn90JMIIVBGomdOaiFCl1lwGX3qf2EtrNSxkCX1P5b2eNd1qcmRkbZHBS9rqUjxUAXDoTvM1LyzhWRc92OdVlORUyGlDcyZLCuY5eGzeIa4QGe30g/k/4sTK51tYO80ElkhOWU107KBoTCgRD+UyDopJZMwP7eBeBOxARSkpzipJTCfkF76QidDuTcLT1rwk5G5q1EFRFLGc0nOaXVxUtysm5WsPlB+pf0rDCjU9BKWhGjCoihkII8Ca67seV/cwgIGwac30t5WnpG2NFzayytiFGpkILHLG3vqzGyOlHkMA11TkpYOyVtLI2JEeN0i2F9tFP1jVsd8USRQzi7LN0rDD9vWnUjYlQg51myX+hplqbAtTlP5NzQ+Twq+EpY8ji7VhoRo1LSvFJbop9QhcAlHeBZFJOftVJLTCaELdwscS06PZ4gr4GUX6S7hOn+uqInEqMC6IV5CKtDseFxkXNbp/4pPSpsJ44hJxKjAghhnPNM6tIPAldVDKQcnlRcJTHBW5jK7v29rkkGLfoxeQ3vrN2RfiqMK8c2lcToQveW4e4Smz87WFVFKTEFb5nLlyeqGjyG/fIaUgOPpPdX5ZpSYnSBPR723DIck3gN+Jf20KqIIYzxZmSvLxgM18b5K1nY8vzqoXRfmfWbiAkJifkwJt9chkWAcLZdmPPeQE42EaOjNspfiPfAcq0d3wZjGgaevIabkxwxmaTPq0dL9UJFDpVIG8KY5zb8VwGzATkuchs6gRlk9nkYEwiRBGLAPPcwrUgMA0oRuRivs0YCdtpqGHDSycrNOheJwWM8t0wLdYvrQ8r4R5fszF6WEqMYR0/MicmiE28dr6F3lk7RpMQEUjDFH4SBQlzBY+gIpOGsSAz5he6bS0QEhDkzLBBjQ5WkN2Am4EZOiqERf0lPuDSUsdMnLOMTYjVCDL3iRJJQFgaWPLzxubEAzAwW5PZtgYs0lEEKJHkomwEjoUqIIc/QM06JoavM830OuMwGAXOK5F0A65WxdGJmQ4jVilOg8JB6jBMDGrMVi1alxPiM8uzIMY9JopiFMnIMYqxtbPnfmAgY9jliMMBIimmM15VHAHKSqGVksEFss+386b4VAwHDPvGc3IYTEwP/yjqsV5wjBo+BJCOq8mo/MBgCYA8POWLYgDHrBGjVJTICSTdZdeaIYY6MA+nsZmSjvLoNp8BjkolkC108ToaYdHbTkYqOAE4BMclEckJMeO7MXE0ygRbdJK8QBJgjS78Lah7DAbwmfYLGDpeoCJDfbSIz1wuDGPusVVSLvLIEAYhJn4dlPYbnzlv1oMa9JvKdknk7Jn11LEsMr9DQAci93xTZxmWtznJ7+oZSSkx4O4YDTkz82wNiSPzJGIbqU2KCLXjNTnvuHPb5YngE6Cqn3kJ1RWJ48YyT0hfPOMllOATkBHgLKSTNL9RWJOZv7cOdPuGgSxQEGNQz2q8mJsQ4/plmj5gskhbFymWqJKQMiOHDSYz6UykD/76OEs52p2f5ylAIWBjL5Rcq20SMmOOjzrjVKie4DIoA3sI3RdMRv9W2iZhwgE847Zar8R0ZlwEQELaM9PGY0v/eqyLmji4g5h2SugyDADMsJP3mxMi1mLOBnH1i1qdoBESfkvGWyn9CrvIY7LglpX99mA2XXhFgsphhSeWXRyqJkdfQAbgt5XsnPuAUEH1IE2+hnkpighE3tCSsnQjbvpgeATpUeEtpbrHiJxITcs01ncwHAg7aRb7shoAwpHtMb6z288gTiaF6kUMngNkAvoDKwNOlAwLCjnxNbmEWedO4pVhkLTHhgstaQsqpYgG+3RgBGxNWJvxsSY2IEcM8DrgiXRXzX2QL8PV6BDIhjC/xps9cJl3ZiBgKUIE3tbgrPaGK+FVVlwYICCtyCrmFqZfcDPKkyxsTEwq5qCW9CX7hgekElwkICCPyCiGMEX6jEGbFtSJGjJO07EcEvlPFyf8LWmG+/B+BDClMbbX+mHgrYqhW5PAjAj9K+Srdt8EArboUEGAqC3x51tIor2Svb00MF6sics15KU86T0tdMgjoZoUUcguekr4rljmldrVzKFKFazKAPHNcS9yV34BkudQSSAFXJig7kQKAnYnhYlV8PZByjLK0fl77SHRLJ2q7DSCNlMY9sDKwKGxqkVEHVMhJKU8/z4mc2pHt1JWOqIBACr0vUkPn8JVtUi/EUKCMI98wM8Cd0uvvDqu80YraTS5hqgUsSfSdw1e2kb0RQ6Eykp4ansOAit+7X9NyYUXtJcdCCmR06n1VgdMrMVQiY4mxx6V4EB98vrpooU1tBDfreRkpvXZ8eidGBici43lMcERKvvlN5NDFnnsJXkJEQOh5TZXkN4rZ/HcwYqhKjSAhHpUS4njLE4KeaDl3oraQS/ASErx5SeuBY9OGD0qMGaFG8Yvdh6U0jvB2WwRNfIKnc0Yhsh0i8BAeexCuyCWD9zqjEKPGWO4hvEES8lB6R41sNbmXXBnhT/CQLCGErMq3Wvo2KRoxZrgazJ23KqVzgAcx9/ZA+kgkDRYaVH6tyDbwwD56W3Ri8BBeX41GiOpKJDoxVnG4I/GePVLAIG5DEo+xa5+J65zeJNws5h2Uyw1CqOX32XrtbVF4E5kZMVnjBAyvR/ESO50EbGJah05CogKn13yk+vAGbgZTrSZk4B2j+LG8URADKogAI9FC0g4pPTqAQ/AmYnxW2cedbWp3Nm2iHJYo4bKo2pV+7IBEnuisvANjijIqYorGhTsbghhdQxJ3usV+rSbgQoyRwtKU4xxD2Af4eCKEGhF2XLvGJaMmpgwqkYXNkIQXsJ71DggwomwJGW/G5A2yx2VeEfgPPUASVA2Hk1IAAAAASUVORK5CYII=",o$s=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient id="grad1" x1="22.39%" y1="67.34%" x2="56.24%" y2="-36.34%">
            <stop stop-color="#FFFFFF" offset="0%"/>
            <stop stop-color="#FFFFFF" stop-opacity="0.5" offset="100%"/>
        </linearGradient>
    </defs>
    <g fill-rule="nonzero" transform="translate(3.39, 2.29)">
        <path d="M14.39,3.17C14.82,3.17,15.17,3.52,15.17,3.96C15.17,4.4,14.82,4.75,14.39,4.75L14.06,4.75L13.16,15.72C13.08,16.68,12.29,17.42,11.34,17.42H3.87C2.92,17.42,2.13,16.68,2.06,15.72L1.15,4.75L0.83,4.75C0.4,4.75,0.05,4.4,0.05,3.96C0.05,3.52,0.4,3.17,0.83,3.17L14.39,3.17ZM12.49,4.75L2.72,4.75L3.61,15.59C3.62,15.71,3.7,15.8,3.81,15.82L3.87,15.83H11.34C11.48,15.83,11.59,15.73,11.6,15.59L12.49,4.75ZM6.04,7.39C6.48,7.39,6.83,7.74,6.83,8.18V12.4C6.83,12.84,6.48,13.19,6.04,13.19C5.61,13.19,5.26,12.84,5.26,12.4V8.18C5.26,7.74,5.61,7.39,6.04,7.39ZM9.17,7.39C9.61,7.39,9.96,7.74,9.96,8.18V12.4C9.96,12.84,9.61,13.19,9.17,13.19C8.74,13.19,8.39,12.84,8.39,12.4V8.18C8.39,7.74,8.74,7.39,9.17,7.39ZM10.22,0C10.65,0,11,0.35,11,0.79C11,1.23,10.65,1.58,10.22,1.58H5C4.57,1.58,4.22,1.23,4.22,0.79C4.22,0.35,4.57,0,5,0H10.22Z" fill="url(#grad1)"/>
    </g>
</svg>`;var l$l=Object.defineProperty,u$m=(cr,vn,yn)=>vn in cr?l$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$q=(cr,vn,yn)=>(u$m(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const d$r={auto:"",pen:"","pen-forbidden":"","pen-crosshair":"","pne-polygon":"","pen-circle":"","crosshair-rectangle":"","crosshair-circle":""},h$m={position:"absolute",width:"34px",height:"34px",transform:"translate(-50%, -40px)",borderRadius:"50%",cursor:"pointer",zIndex:"9999",userSelect:"none",display:"flex",pointerEvents:"auto",alignItems:"center",justifyContent:"center",backgroundSize:"34px 34px",backgroundPosition:"center",backgroundRepeat:"no-repeat"},m$k=`
  <div style="width: 32px; height: 32px; background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
    ${o$s}
  </div>
`;class B$i{constructor(vn){r$q(this,"container"),r$q(this,"deleteButton"),this.container=vn!=null?vn:document.documentElement}setType(vn){const yn=d$r[vn];yn?this.container.style.cursor=`url(${yn}), auto`:this.container.style.cursor=vn}showDeleteButton(vn){const{clientX:yn,clientY:Rn,container:Bn=this.container,onClick:Co}=vn;let Po=this.deleteButton;return Po||(Po=document.createElement("div"),Object.assign(Po.style,h$m),Po.style.backgroundImage=`url(${A$l})`,Po.innerHTML=m$k),this.deleteButton=Po,Bn.appendChild(Po),Po.style.left=`${yn}px`,Po.style.top=`${Rn}px`,Po.onclick=()=>{Bn.removeChild(Po),Co()},Po}removeDeleteButton(){this.deleteButton&&this.deleteButton.remove()}tip(vn){return()=>this.closeTip()}closeTip(){}reset(){this.container.style.cursor="auto"}}var o$r={},u$l={get exports(){return o$r},set exports(cr){o$r=cr}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(cr){(function(){var vn={}.hasOwnProperty;function yn(){for(var Co="",Po=0;Po<arguments.length;Po++){var To=arguments[Po];To&&(Co=Bn(Co,Rn(To)))}return Co}function Rn(Co){if(typeof Co=="string"||typeof Co=="number")return Co;if(typeof Co!="object")return"";if(Array.isArray(Co))return yn.apply(null,Co);if(Co.toString!==Object.prototype.toString&&!Co.toString.toString().includes("[native code]"))return Co.toString();var Po="";for(var To in Co)vn.call(Co,To)&&Co[To]&&(Po=Bn(Po,To));return Po}function Bn(Co,Po){return Po?Co?Co+" "+Po:Co+Po:Co}cr.exports?(yn.default=yn,cr.exports=yn):window.classNames=yn})()})(u$l);const a$l=o$r,A$k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKqADAAQAAAABAAAAKgAAAADUGqULAAAB0ElEQVRYCe2WSUoEQRBFLVHEiVZU1I03cKW38SSewRt4A5fiTty5cQIFR9pZQWkcUNSe2/Z9yISiSGxRkUAy4BGZSVX168gistraYsQKxArECsQKxApYqkDyU5lmsznMM+ZgAGpQhaUkSRbINgLJCXiCBtSgAkVYtGGIBTKj8AgKSVahDNvQa0IUkUG4Bx91BpLdBTOS/cgUIB3a+gMwI9mFzE3a0I3z5B4r292JzGVA8tSSZILMcUDyzIykthOZvYDk+V9Ktmz4yGzhOhV4/+5YU4N/hzqo0StX3Fg5TcnNlYvgs8bPsM4hkScHoyO46haRnGEYktQVI+4ypUYKyXtxyUu27JCceAMJvjo0HoM5CEZ7cPX7i013q3IWVV5r2aw/2TK+svWbPGU68KQCa6pYeus1V0X99quSfvtVSc39lmfz2mdbz32tg1dAJ0421AVs9E7/FxBSezrMmjI/gm5/nYmMkBq+TqBs7LNgTlZH6EnWlPmORdk+pHQipUNfTxtg7p3NIXWRMvXfoqusmXsNhpC6crIS1Zf9C6yAOdlxpK5BW18CiT7A/G93gE+P0FY/RoO+RWqS62YhB2r4YhlixArECsQKxArECvzjCnwAOr0wF44ggHAAAAAASUVORK5CYII=",a$k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAACoCAMAAAD6pITnAAABQVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvr68AAAAAAAAAAAB5eXkAAAA8PDzr6+sLCwuenp4UFBT////8/PyLi4umpqZycnKxsbHMzMykpKTy8vKoqKhcXFwpKSmwsLD+/v7k5OSCgoLw8PDo6Oi0tLRkZGSrq6syMjL6+vrn5+eYmJj29vbd3d3Q0NCwsLDDw8Pz8/PT09P09PSwsLB/f39OTk739/fh4eHY2NiFhYX4+PjGxsZkZGSkpKS3t7eRkZG/v78eHh6CgoKKiorr6+uysrL+/v77+/vb29v9/f2wsLCysrKxsbFdXV39/f3u7u7t7e3j4+OoqKj5+fmrq6vp6elqamqVlZWtra0+Pj7w8PDW1tbJycnNzc27u7v29vba2tqXl5cjIyNsbGzf399ubm7d3d3///8pT4ZyAAAAanRSTlMzAAYIDA8KFRIccB8XIlIZPr80ZDb88FppT2iLaNJrRzpW+LNWzrp0Sm086rdg26WST4LVltltU0Pfq51X44UoJHdcfjcuHMFF++6i82RiWxX2x8SvSOc7vEs1LiHKmYiOe92gLCMfqE2kqsY2dQAAEBhJREFUeNrs2MFqq0AUxvHT28xdnEWQGNBKMHGnARdutIsspARxU+NOiu//HrdUZFozYTxMbltn5v8IPw7fxMCD7Vuy0OIs9FKz0OIs9FKz0OIs9FKz0OKWCf3nl/fw37sz9O8n/Tl+dWj9hO/nrQ5tCLICtiq0HPlRi1Sw7w+tIfA0ZWt1aLHxX2165NGt6dByZqHwasEJvRWoVaAnyjrwivqKTaVWh/6iPCFm2sS5OTaBWh16osyRq7Krs+jSBDkuvDxoLlFWd2XFsbm1gJoMTWcezrjqswbf8930xTsV64VXnLyX1PXxvSbrq+G41ag5NJGZK7d9/Yroe+u9swWt2jr7tecjvtZ9y63p1HRoAXOZ5Rh68QG07RB7IeZZOaHm0lRoOjOr6gD9wgHtcwofg7piCtRAdebMZYaJ9wyG9OwlmJWcmioN5HMemSMMnzQbZclkP4UYjdTkowai8zgaF/TfNmBYmzcfL+OACKTVoSfMbY1+bBzzB3XsY91OqAnQFGe26gMsjBqNz20LDPoVI0sDZTaGc44wPYLBHVOMhqOmzAfMdB7PmZVBEoPhxUlQsuGoZ0sDbTZYh67R5zx0dLFjkvkgQl/NxsnIR3Da5nQ1HwRoiTNjVZPswfbRPmkqxuZLA8U5CA343J6bEwYUaZjvXOY7jf87onfY5aVEmgLNndE9g+1TZxe5NAFa5pwa+5Fyq206XxpmOle5a52vpd28mikNsoEe38Gd3Q1B5934IspmGmY5t01o30Fhh7BpJ9JkaO7MosT+rruRk0SMS0ugZc4d2u+Um+2xmyMNsoeQMVbiP/bMhSdtKIrjJ3sEcrMsFagFpqC4ifIaviY4MAONPHQ6xDgX49vodr7/B9i5lnpb0setddFFfonaXhDw58n/nNvWYIQjNfaNJImG6Fe0COhkdHR9w4VINPnDu6RBJqBH1+tcycnENHh6PmYv/vqzF3Ps2GLav+i3PDiKMMKDIg+Pt+6iPQo63Gaj4PAkx9phc0nLi6YGqnveYqswwpNVtqWbJnGSoq3BEd6Ljy5xSBCL74XN4SEpWgTHt1EnlO2H30R4SIm2FvR0fDRCSxGJT7uXNHgU9C8YIcUvj5IGl4IOhxdSo4KWJJJaCIddShrcCnqLJWCEJAm25VbS4FbQ7fkY+GF9vzUPL5XYfNutpMGloMNJDfxQRuLgxe5vtGTYpaTBpaCvWQX8cIicahNeJhV2bSlpGdF6QS/EwReooy5HgvdwTdMUuSaUIBzfMJ3NZjVwYKr52/LcjULUErrrRQX8EF/QS1pOtCjoH19WfYo2+BR4KCwgIgMZFCQchWQRccam+LTs+UxJxSUQnCLiEZg4p4Vt8MHqlx+ipF1FWwv6mCkPFI07F89MdCQ+zxoXG+vlq4Ojk1IPDRbhnvcqopoGwSwiboAPFHZsKWkv0UYrbKfAH2iioDwr0VBCWy5NY9UYnZ8OtZwE+CHVNtqht2iRHKHvWgDReBgNKrqwbOV9ENHLOIR6eHLVsGR0kVbzQnyaTrvgC+17yDE7wDE5bthcENGofo0FEz0MCyI6gZ3eeL5eXVnKkM7Fid82H+4EERtgcEFnY36vLN04Zgc4JscxmwoimlhK/BvRxc8m1pBYM68kHJthDogq4goQMyfrFcPphzsKSA/dHfEWc0RnrUWBRBZOsWPH7ADH5KDhLqBo7C3+E9Fn6ErUXnSMjfUqQnS6gzgJOis4RAkgl0ErCakBT2SHt+g3uuhdLahoYqzycNHlqJWKT9EH/X6fK8z3+wd0GqXDZSGaT3MTLqIb+ADR2q4u+o276FcW0ex9YNFEPvXIU4e86LpYqgPRQjyMGKI3u4h9cBE99hDR75lJNOEm2kiOG5YOIlrwefOxRacnTDAkmHlFcRDNB2VmiN6gVe0+YCiC6dmZRYMsJFS+xS1z+jx+ymUFvEmzGyM7PESLiL5mSiDRglLtKeZoq+hKniB3vbvvaj7f49+JbRgwSQ+CYE3sE//QYVF2y3ItQlpS9E8WCyZakPkAUjABn7S+MhOaf9EKwQu3QD8r6MCBveh0R2RQiw5/gxQx9lNStIjodhz8go7sS8WQis7MBtsZeotesoi+Ne1WqnQsO+nG207dEOyn6FBoIRpctKCbfVrRue07jhC74/TFO6G+0jA1xB0wKKpI1PQq7SCOgyTRhVDIfpIGh14Ymi4GFW3lIPd0og3i46hO8GbY3BF5JhJ9J6UzMVVFzhVwEsi7pyTF6ZBDNwSHiA7tNR9XNFabEqI7H2yYMYs+H7PSR6I/tFi2FV1WEcv61DHRGc6zLt4zvm2aVWBevIQ3zT0h+rWc6F3tkUVjp+wtOgM2NMyiCyjBmFV0hP8ttRYfJIzxrqGS0GUF7smYRPPfWjJmjQ90sA6SaLu+RSdrjyyaWH8a0azUgmYLiVbOEA3ZHaSw2DaqOoKCLpxiq0Lmb4HYp5UmSFJLyokWQ8e7L6uPL3rpSUR3yOy+HroR00WlxAoSna8i6i/PiC4XDX8UmKXSzgHM8U8Vk7/J8m4wdvz3ouc+WikiURxanDP/KpFHInMBFqZmkDgbvKyRxHUu2sjmc/3Wfh/+oejnGh0+po7E+YmKnN5ZgdueHCaDeLg56GJ8hzQQndfDJE9Hm3Dp64ZWLekl2npJKRR691ybobTojUvjfW/TUKnX0YbCacN0mf/MIhqueGnwf0BGAflm+C4UuhdNeIt+mvFO/WRDdVj0Gi1u2oqmB2bETWwdfWEWbViz3ANngzuFh/pSOoNYv+UtFKRp7vkW/Zw3LJN8U2wrmo5LRnEhkbGILnNK9JQycWoRXTBmizzZBZ3PtMY/0zxIU5z2Lfo5b8GlREfGM4VUwyxaBc7RYChRLKL52FwZbFyqIEpatHDJLbhv0X/ZOaPetGEgAEd7K0LLYBAadQXagcogndAQEiorFQsoCs0eKAG1qHSsPKzL//8By9mxEzMy26jNHpp7gCgoEf7sO/vOd/4PQSXtH+JKg1YO/btnoqCnxDRr4RsgQCo1oCGoJA062TApX6RBg7CgPR1k5vc7fJeioHVqiqeRIXwnOaAhTCoNOvnAf20Q17X59ad9QQtOhj9gQ5G44scEG/ImHfT3hQP/0qCT38qyvMVghM+kxPZubdziHuh4k8rLggbPsUxc8Zuge4NHWsT9EdrK2gLNd1jUpDdnzz3s87a7RU8nAXe4KFxC458D9CkILCLRRQR00yZzYTN04F2aNyas228zqrRnqCadblAPtHdDXMg2UedDeFN7f9D8yRCF62gimEEXd97iAT7rVWF/RR509jkSaMTCizS04ACwMlnMNYpAjbTZ/vaCoA0U1wD5Gtyt5JA+Pil9NF6qohnSWQJaOEyaXSaaEvbukuRyVn2dnlDDWUO3HkGBRwzoZh4LBp0PRBZ0mLHrYUts4r9haogzNOAjcmuF1LuaWWal49HZZJMcDTygQVaE7xcS6FFKNjIjIeh4YUFvGBvdAfERavDdDUHDb/WwvweNGfay0CxVWMG1vRZLctwDtJpk2u5PeOSIugn4skG3k5ACn+pyoC/quRsYqhveqqOEI4vW8Wxlo8spbkEtULauqNNV+q4Kgn4TBT1PLhH9zoExlVeo9lp0ox+b5uoCmioH+iG4YfJAX0OHFpQL8oLCZxSLoi1oGuQ9HCnPKWj+LjhdSKvL5EorCv2iN9VJTBdekCfZFb/DUKkxioC2cruEccGDqGGBgu5H5ZqCHvkgh3STYPEE+ZDakFE4B/qe764sATQ33WB72XGfZLHQh9YRpW57jy7q44w3uSXjaKUNd646WImCbjqOo3V/9ZRwMgyFXXX0YW3Xc636zDWhN91tO6F3tIrA9sp93KIDQMcb6T3L3+y9yt964UPviSZV9UhTIw09Gwxi3HX/h2FMXM00Wd0f+TfOKfWt5cPfOlcSWdyFlkMKtGxBZ+vVF3QKg2ZnQzUtUZYrUVYBtFDaLmuk1bls0f3KKiuvVfyie5Ux0b5wSivokL5Kj5EQFz1zBQOaU1qx20gfnKQHo4gfjHJywJpofvlbaDvG6VE/4kf9jMFyCJe/sbbjID28SvjwKjygOQWdcbZDHafHsf1h74xxGISBIJjWdhOFF6RLeAOSm7ikpEH+/zviQ4LTWTbrB+w9YbRaBBI7Y/cpgW40B/rpXiPNgcHRgUENNPjpvt0dkZOZY5OZ0TQHAl13RyG9cQQW3+y3wrnZHAoaRDpz1nhk1jjXgcag60jvfB7iJ+FuAo1Ba3dopB2n5/H0vNNAd+fYYKQzZQpIppBRoAU0jnSiHuReD5JgoAU0jrSj8OZeeONgoAU0jHQhTYVT955HQYNAg6FuLY+8UkrWk5KtWYsDDHWDSAvpSM1eT7MXtTjA9DyOtJCmOLItjhTOONBYD3KRTlShtlSo6eLc0INg0LY8jpp2iXLf6n6TcJaCNsXRB43LQ0iHRF11ratOQTjD4sCgLelIAbsVsEfLGYBGpLWmQ1y/fHM531O+awymoLFmD9f0STq//cLvHuVei39n4QwLelyFakiHzU/8lveYJ78Fw3lAhQojbUn/27Gf1kaBOIzju2kWktH8oQ1oPaTrzSzk4CX2UBAKHiUnKfXu+38Lu78Js08rA89h2sOMfl+B82F4RJvsNPn/08Upa+BsGWgKzaX1fJwnfan/nPVsMGfEoe3SUZ+parIfL4dKZX1kdybQiErHN+mhU2kxyZfifZGqbrg5x9yZQ2M8xtJ6qKP6qtL3yVHfv6fqWkd6nsfOGA4GzaVXRlqom1wdHyc1IIfHo8obYTbOK+rMobl0VOfqlDz/mEjPyUnldUScHaBH0p+pu0yl1QQ+y/dVqrLuE/PY2QGaSGvqoSkv6pgUAf9t+l0kR3Upm0EzU2cOzaWt1Juh71ql0mT7tA9ssg/7p22SKtV2/bCxMFudOTSXXkIa1GK9qfuyVf9KH86vyUu19bzqJXk9P6Ryorbs640ogxnOS4szg+bSmA9QG2vBHurmrSvza5tdlOddsvaal91bUw+CbJTBjNmAM4Xm0pKWxnwYalgLdnBFH5UNM2ZDOy/gTKC5NObDSm2sA/KO0NrCjNkgzgSazIdIG2pYi3ZgrddQBrM409ng0Fwa1P+tDXYY4msJyFAGM3Em0ETaQg1rwRbugNrpYijbmeHsDg3pMbVYA1u0db6q75AYA1mUR8zMmUPzS22oYW200c7T4lswhjKY+XXm0Fwa1LDW2Cj2OpxDkKEMZpszh3aghrXhDqiVCcqE2Rka0iNqWEPbZ3U8O4yhDGbi7A4Naqu1cAfTLwRlwuwAzanFWmsH2VISZcLsAE2pYS3YwXHLaYAMZc7sDg1qWBtszR1Y5lx3UCbMDtCMWqyBHQI5TgFkKBNmB2hGDWvtHUx3aOHA7AgNa2gH2QI5KLtBwzpA8AVyVHaHBnbwOeA4Qk8I2wHla6GD9f4yFA7tnh/8P789gZ6zNUP72gxtb4b2tRna3gztazO0vRna1/4CjIBfFd68JpIAAAAASUVORK5CYII=",g$r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAAC3aM1AAAAKo0lEQVR4Ae2cW2wU1xmAxxcutqFxRJ04jWW5NBelIJUKcX1ARaWoAp4QEiAFaFBAPIBElDcQEkg0Sh6IokjNQ1NxKw9IjaUg1X1IXQl4AIGEQh4IFQHkGhsMhnKLL1Bj9//G+4/Pzs7OztpzW9u/9O+5zJlzznz7n/+cMzO7ZVY6ZLp0o1qUsCqjlRJWGCpR64WhAxLvy2i/hL2ihIlKWUKtT5V2a0VfyijpMOS5VPI4o48kJB2rxAkUa5slWicKyDgEuN2iD0Sx7sglDqAM4ddFfypaHvkVeTcwKNn3RTtFcRORSZRAa6TXDaJYZZoEa+0Q7YmiU1EAxR82iWKRaRYstk00VD8bJlDqqhdtFMVfloLgV9tFu0SHwuhwWEBZ7rwlOiOMTiVQx4/S5jXRMS+7wrAkfOQvRYFaqoKbekUUoGOatMYCFOv+uWiTaFKztzQdmnAN+H02FCy3RiWjBUrjb4vyrY43mSkXxArlv6JF+9XRAOUbfEeUnc54FdbOPxEFKmvYwFIsUGDOFS3VyScwGCk4TfRlUZZXgaEWA5RhjmVOBJhymbZMkU9cAFADDf+gQJmA8JnjeZjL5XkKlsqdMHZYBSUoUGbz8TgBFQSUKYBPxd1xB8tXggBlndnkW8vEOMjQ556r7zq10PqRxfobE4NXoKuEhe8Gxg8ofpPtZBArDtSbcVAIFjCBjaf4wXpNznjV86yJnck2lccv7P9zJJ+FchJ3jSbFmwBsYJQj+YA2SUk/682paIJlwKbJ65q9gLKPTfvNYa9riTsPRrDKEi+gPLaIXLZs2fJae3v7oVu3bn129OjRJZE3GE0DOazcsxUL2F9H0/ZIrYsWLao5e/Zsy9SpU6cMDQ1ZZWVlQ/fu3bu2devWD1taWh6OlCyJ2LfSS2dt6gbKOivyHdGZM2c2LVu2bMf9+/etvr4+q7a21poxY4b1QuTSpUt/Xbx48ZclgXK4k/ckuK79NYc8jjYW3ykAeTZvPX/+3MJCHz58aN29e9caHBysEOv9w5MnT77ev38/671SEJg5E7gJlC2mmY71YoALVODW1NTU7du37/CNGzcOzpw5M7E+BQRA/5xH5WZnbasJWEkkxbDWp0+fWnfu3LGePXtWNnv27OXd3d3fNDc3/zaSBsOr1GGnQFmkxvV6TMHLEFdq4V8fPHhgVVZWVq1du/aAgD28evVqbvimUWBnL/QVaOruc8rMb/X391sy+1s9PT1ls2bNevvUqVNfX7x48f00EpU+2QwVaGqsE1jAVCWNG8C3yqRVOX/+/Pdk0mo+cODAmxxLkdgMUwMUgIiCNNPl5eXWwMCA9fjxY6u3t9eqrq6u37t37+GbN2/uS9Gk5QDl/p7nRt++wpg+Mgt8ByjNKlwzLpOVbbHiZ8sbGxt/L7717ydPnlwWUzf9moHhdCyU5yWpEgWpIZ1Ti8VaETYEwK2oqHhp3bp1H8mS6/OVK1cm7bqq6Z3vHWi79xF/KDhCBebOM9MaZzUAVAmZtObLtrX5/PnzGyPurl/1toWyf09UGO4IoBCgKjTSmq+h5mkZ/CsqUrVw4cKdMmkd37NnTxMZMUsVFpoIUIXIBSsYDRWCpglNyGY+ZdWqZRVgb2Vlp/WLgwcPHpWd1gcxT1o20Eq9gBjDQS+g2r4CJE1cQzdIrzT1ZuqeIjutdTJpfXXs2LEFdiXRf1Rioc7GPvr2hluQC0bshGl5xDXNQS9g5Gk5LUOo52lIOWTatGmvbt68+VPZzv5x6dKlUb/1UpEIUBmaDlAvaIBQcPmOU8YNjzxEYQ6n7M/y+vr637S2th5paGjg9ZqoJBmgStO8cBOcguKq3flKwjzXXc59TM+pqqr62ZEjR36n6QjCiiT8Jz7OZqqwAIiYIPSY5usxhU1azzPztJxdofdHoJe+vE8tnMuVxPKDKFdXsoByzA1FgZqh1mFCU6jkaVzLuUPZDLRt27btX+78ENMvEgEqNO33LSV0hjQXpaBMMJrHcYXuFSfPRwY7Ojq+Wb58+fa2trZQf0bjavMFQz4xCwUQa0egKTiFSVoB6vF8IRel57kukC3qrRMnTny8ffv2y+5jEaRtoPYWI4LK/ap0/Fg+SOQjZmiWNSvXMmaefFHPrl69enLBggVfClSnPbNMBPEBhrzzCDSCBjyrZNnEAUCYlqXA3MfUUjVfy5FvHuM4IvdOv9u1a9e7c+fO/XOMMGm6jyEfO1BmJBEbKKFCUUtTYPTQL85xU2Q//0geUX+xYsWKFjM/xrgNdMy/HhtFhx0LNc9VeCZgjVPODVzLyyEmndb169cfOnfu3I9mnTHH+7FQ3sqNVcQq7VleGzXA5FikllGwlCWOEGfSOX78+Mc7duyIY9LR7uQLewGKhbKUiPOuvT3k6ZUbFJAQhWyGmp8J+69cucKk85eY/STNewkM+4e/6jH8FM+r5kJ55qRkAtTzyFMrJE/LKHx5tnR5586dm2TSiXMG1+7lC+2fM2KhCAnnYb2dE+1Hlg9VUApSARKaefJFPDp9+vQX8qgjqUnHj0oW0Ed+JcM+ZloodZsAtS2FKc+MOD54+/btf27YsOHThCcd7Z5XaDNUC2X8QziWh1wCyFloK0zTSskjjcozo3bZ6XySkknHCyR5sLO3tAqUzG7RWIDqLA8wRKESV5CSZ086S5YsScukQ/fyCexs0UmJBD+9y1rO2CUi+NAhb1YNVHmPyQYqD9ku7969e9O8efPSNOmY3TXjMHN+tmhaKDdJ+JFo5C/cdnV1ddIjrJGdkoKUx8HsdP60atWqf3C8RARmzg2m4UXfSM9jeSW8rq6u8vr163+TV8JfyQx3e9LZuHHjoQsXLvSMdKckYt9KL53tu/sBHXeeeJMk0rdJ5P2kQXkvqXXOnDnlEr8pTyUPrVmz5qvOzs7/lQTCkU4y1LtGkjIfmIlMnJ+K/MojfzIrl8B3kpU1osxJSYtTAL8wKf4EYJQFk+JeQMlvE3UcLRmTkkUANm1ZOZmE24dqGU5gOfCyZkyGWQT+IykW8zmSz0IpiLNN8t5iTmdTkgGTrInI7JcfULaH10Qnh/4IMVjAxNk6jxwajuUb8lqOZRT3S/lx06RY1g8C4akfiEJAOZdFKzsq/nNjIssdufjbhQAEAUodOGDWp4m8S0oHEhb+YexGkD4EBUpdVMrfl/E/RhNJnsjF/ls0r980YRQDlAqBylIqylcCzf4lHecB5veigSfmYoBycaxN2SHgT8e7pWKZwCzqzZpigUr9DlRuoIxXn8pIZJgHtkwpa8togHIiw587LeNx9mc2ZwIK5DOlXJaMFqhWwoMp/Ax+1W+ToOXTHGKNrDMLLo38LmKsQKmbdSrWil+N82UJaS40YTuJv/RdtAdpzet+aJDzvMpQV71oo2gYX5RXG2HnYZXtouzNRzXE3R0KE6jWjZU2iaZ9u8pqpU3UfvwrYSgSBVDtGDurBlHn/zj0QMIh7qlDNOfmcBj9ihKo9o+l1euiWGxSE5eun3na6jxQk3joEgdQ7TR+FWutE43lhQpph3sQvISAVRa9ppRzipY4gZqdw8/WigIWDWt1gD8EIsqSLlT/KPUVlKSAujs2XTLYeRHiIlA2DVi1qkRtK8PSULaEDF+Ue7ashwkTlf8DQc/cITdx9+UAAAAASUVORK5CYII=",U$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABcVBMVEUAAAAAAAD////////+/v45OTn////////39/fp6enPz8/7+/vw8PD+/v7x8fHc3NzHx8f////////+/v77+/vr6+v////7+/v5+fn////z8/P////////q6uqgoKD+/v79/f3m5ub+/v7////////////////39/f39/f////z8/P////t7e3s7Oz29vb////5+fn////h4eH////g4ODV1dX////////BwcH///////////+Ojo5zc3MlJSX////////////////////////7+/v////////////v7+/u7u7n5+f////39/f////09PT6+vr09PT+/v76+vr////5+fnv7+/09PTk5OT////////////////Jycn///++vr7///////+0tLT///9TU1P///8SEhL////////+/v76+vr////8/Pz39/ft7e3t7e36+vr////////X19fV1dX///+xsbF9fX1iYmL///////+K8mOEAAAAenRSTlMaAIDy8CD41cWRX9uk7Kl1VVEw6dWT/M/NvKyVkY475eWIgx0Z39rHv7axnZyZmIuKhn56emZjX1FEPTU0Kx4PCAX69fTgxcKkopWL7crJuri2sa6rnIyHhX54bVtZVU9NSUcsJSIcFROno6Hcwp+ekHVxbWhnRC8nDLc9s8oAAAOGSURBVEjHpdd3X9pAGAfwkBBDAoQmBJmWvUWWiIDIHoJb66x7a4d78Op7pBQ1J5DY33987vnyXEIu3CGy/0hvnDthM+l0hj3JScSudDKOdhNPpl1i8Ut624Gi6+trI3zW1tcdqGM7/SIC5/ZRR2SNJEm7JkHt7FAJjR18WIs40P3cAFxIOaIRna6ZOHxGunk+TDR1ukjUkSr0w86bcKShiz1OI4JMP8YAD9+4emM2Gm407IfIhzm0NxrhKNsLH4SvQ+RktyvUfZIMXYcPPsSFCcvY6EYW6ZPsxuiYZaLwAW5bDY70Da5paxjvm8d+UcjAUL/GzPtCnDF/mwFWhJ75Zs68x05gxxFRGQfa+RYXokHVCC4O4yOqYLTwBjNB+ncWEZnsbzrIvOLz4CW9g4jODn0ZPO/iZN0UmhaPp0Omq+Q/nLu6NO0hErJnurjKdTBzEdAhkqILXDAdbFkJ7EnDe4EVy198srpiwhE4X1RKDFOqviBwcNPK6gmPmeWlGDz+VdHqRPEVHo0tLTM8RpcX4G+flLe6kU/Cs1pYRnm8uriQhfoC+0ZDvbMLi6ttfO5fDCDCKFrvooAKAov+c4BZvy8EzaolCHRdIZ+fBThl9G0Ih1RCrBJWbPiMKYAZ409oMSqFWAktzJ9GBuDvRoVGOIQJMSas0CiM39u45v0M9tbaeLc6F5M+7dhcbRfgg+pcU/oNa85VDwDOzBtmpP9UKsN8BuCzeb1P+kPi08+fASyr6fVPUh/PJ72+xj/bZk5PSV0YlJ4z83iC4EipS5LkiAkeHxGcQerLwMARRzyW+QklhUgKpST8nXfYg+fHkjS89MPz0MFnhKdCSWpc8RBnPAZB3RUvLt7i3oob7f5juDzuikY81tjcHlcHg9xabdyUWDvF2ay3slecr1ptimNx9lhhs1bzXQxy5NZa6VMx9pS2Wt1H77cVjFartYvBdlDICDc0cbVa3Twd2NcOyuLwVqo+K1ebjgdcr0k+O1uXwThfl8vlhqm+99kASup5GINsYhhmG8d7UXzcBgo2e21cd9WlUll5/7G958ql8uxu7y0zS5SGSkOGBA51TRiGQAi232Y9v4kVQZGavpt6c6l3tLpNsc38gGOC01IeLg4Xi8NaLz1KkqO0VzvcTrFscYo4oLjiRAsKEXeJPRqxW0bsFWLGLVbiocyZSm5vbW0nU9BsIfyp/AGqAvfOkBaFawAAAABJRU5ErkJggg==";function n$m(cr){return cr.toLowerCase().includes("panorama")}function o$q(cr){return!n$m(cr)}var R$c=Object.defineProperty,T$c=Object.getOwnPropertySymbols,L$e=Object.prototype.hasOwnProperty,m$j=Object.prototype.propertyIsEnumerable,H$m=(cr,vn,yn)=>vn in cr?R$c(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,M$l=(cr,vn)=>{for(var yn in vn||(vn={}))L$e.call(vn,yn)&&H$m(cr,yn,vn[yn]);if(T$c)for(var yn of T$c(vn))m$j.call(vn,yn)&&H$m(cr,yn,vn[yn]);return cr};const f$w=new Map,v$o=new Map;function D$h(cr){t$c(cr).forEach(vn=>{var yn,Rn,Bn;f$w.has(vn)||(vn instanceof HTMLElement?f$w.set(vn,{opacity:vn.style.opacity===""?void 0:vn.style.opacity,visible:{display:vn.style.display,visibility:vn.style.visibility}}):vn.isObject3D&&(vn.material?vn.material instanceof ShaderMaterial?f$w.set(vn,{opacity:(yn=vn.material.uniforms.opacity)==null?void 0:yn.value,transparent:vn.material.transparent,visible:vn.visible}):f$w.set(vn,{opacity:(Rn=vn.material)==null?void 0:Rn.opacity,transparent:(Bn=vn.material)==null?void 0:Bn.transparent,visible:vn.visible}):f$w.set(vn,{visible:vn.visible})))})}function o$p(cr){t$c(cr).forEach(vn=>{const yn=f$w.get(vn);yn&&(vn instanceof HTMLElement&&(vn.style.opacity=yn.opacity===void 0?"":yn.opacity,vn.style.display=yn.visible.display,vn.style.visibility=yn.visible.visibility),vn.isObject3D&&(vn.visible=yn.visible,vn.material&&(vn.material instanceof ShaderMaterial?(vn.material.uniforms.opacity&&(vn.material.uniforms.opacity.value=yn.opacity),vn.material.transparent=yn.transparent):(vn.material.opacity=yn.opacity,vn.material.transparent=yn.transparent))),f$w.delete(vn))})}function k$g(cr,vn){var yn;const Rn=(yn=vn==null?void 0:vn.traverseTHREEObject)!=null?yn:!0;let Bn=t$c(cr);const Co=[];Bn.forEach(Io=>{Io&&(Io instanceof HTMLElement?Co.push(Io):Io.isObject3D&&(Rn?(Co.push(Io),Io.traverse($l=>{$l&&Co.push($l)})):Co.push(Io)))}),Bn=[...new Set(Co.filter(Boolean))],D$h(Bn);const Po=x$t(M$l({targets:Bn,duration:300,easing:"linear",direction:"alternate",loop:4,autoplay:!1,update:Io=>{var $l;Io.animatables.forEach(Wl=>{var Xl;const Yl=Wl.target;if(!f$w.has(Yl))return;const Zl=Number((Xl=f$w.get(Yl).opacity)!=null?Xl:1)*(100-Io.progress)/100;Yl instanceof HTMLElement?Yl.style.opacity=String(Zl):Yl.material&&(Yl.material instanceof ShaderMaterial?(Yl.material.uniforms.opacity&&(Yl.material.uniforms.opacity.value=Zl),Yl.material.transparent=!0):(Yl.material.opacity=Zl,Yl.material.transparent=!0))}),($l=vn==null?void 0:vn.updateRender)==null||$l.call(vn)}},vn));Po.preComplete=()=>{Po!=null&&Po.completed||(Po==null||Po.pause(),o$p(Bn),setTimeout(()=>{var Io;return(Io=vn==null?void 0:vn.updateRender)==null?void 0:Io.call(vn)}))};const To=v$o.get(cr);return To==null||To.pause(),To==null||To.seek(0),v$o.set(cr,Po),Po.play(),Po.finished.then(()=>{var Io;o$p(Bn),setTimeout(()=>{v$o.get(cr)===Po&&v$o.delete(cr)},1e3),(Io=vn==null?void 0:vn.updateRender)==null||Io.call(vn)}),Po}function q$i(cr,vn){return k$g(cr,M$l({update:yn=>{var Rn;yn.animatables.forEach(Bn=>{var Co,Po;const To=Bn.target;if(!f$w.has(To))return;const Io=f$w.get(To),$l=Number((Po=(Co=Io==null?void 0:Io.opacity)!=null?Co:vn==null?void 0:vn.maxOpacity)!=null?Po:1)*(yn.progress/100);To instanceof HTMLElement?(To.style.opacity=String($l),To.style.visibility="visible"):To.isObject3D&&(t$c(cr).includes(To)&&(To.visible=!0),To.material&&(To.material instanceof ShaderMaterial?(To.material.uniforms.opacity&&(To.material.uniforms.opacity.value=$l),To.material.transparent=!0):(To.material.opacity=$l,To.material.transparent=!0)))}),(Rn=vn==null?void 0:vn.updateRender)==null||Rn.call(vn)}},vn))}function n$l(cr){return cr.stickType==="Plane"}function i$j(cr){return cr.stickType==="3DPoint"}function o$o(cr){return cr.stickType==="Model"&&cr.contentType==="MediaModel"}function c$s(cr){return cr.stickType==="Model"&&cr.contentType==="Model"}function T$b(cr){return cr.stickType==="Plane"&&cr.contentType==="MediaPlane"}const i$i=(cr,vn=16.666666666666668)=>{let yn=null;const Rn=cr;return(...Bn)=>{yn&&clearTimeout(yn),yn=setTimeout(()=>{Rn==null||Rn(...Bn),yn&&clearTimeout(yn),yn=null},vn)}};function i$h(cr,vn=200){let yn;return function(...Rn){yn||(cr.apply(this,Rn),yn=setTimeout(function(){yn=null},vn))}}function o$n(cr){return cr.stickType?cr.stickType:cr.pointType==="PointTag"&&cr.dimensionType==="3D"?"3DPoint":cr.pointType==="PlaneTag"?"Plane":"2DPoint"}function p$s(cr){var vn,yn,Rn,Bn;if(cr.stickType||(cr.stickType=o$n(cr)),cr.contentType==="VRLink"||cr.contentType==="PanoLink"||cr.contentType==="Link"){const Co=cr;!((yn=(vn=Co.data)==null?void 0:vn.icon)!=null&&yn.url)&&!((Bn=(Rn=Co.style)==null?void 0:Rn.point)!=null&&Bn.url)&&(Co.data.icon={url:"//vr-static.realsee-cdn.cn/release/web/test.09dee741.png",steps:28})}return cr.extraData&&(cr.data?cr.data.extraData=cr.extraData:cr.data={extraData:cr.extraData}),cr}var q$h=Object.defineProperty,c$r=(cr,vn,yn)=>vn in cr?q$h(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$g=(cr,vn,yn)=>(c$r(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const r$p="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",s$c={};var d$q=(cr=>(cr.Default="default",cr.GetAudioDuration="getAudioDuration",cr.PlayAudio="playAudio",cr))(d$q||{});function L$d(cr,vn){const yn=(vn==null?void 0:vn.namespace)||"default",Rn=s$c[yn]||(s$c[yn]=[]);let Bn=Rn.find(Co=>!Co.realSrc||Co.realSrc===r$p);return Bn||(console.warn("\u672A\u627E\u5230\u7F13\u5B58\u97F3\u9891\uFF0C\u5DF2\u65B0\u5EFA",s$c),Bn=new u$k(r$p),Rn.push(Bn)),cr&&(Bn.src=cr),Bn}function a$j(cr,vn){const yn=(vn==null?void 0:vn.namespace)||"default",Rn=s$c[yn]||(s$c[yn]=[]),Bn=cr-Rn.length;if(!(Bn<=0))for(let Co=0;Co<Bn;Co++)Rn.push(new u$k(r$p))}class u$k extends(()=>typeof Audio=="undefined"?class{}:Audio)(){constructor(vn){super(vn),i$g(this,"preload","auto"),i$g(this,"crossOrigin","anonymous"),i$g(this,"realSrc",""),i$g(this,"inited",!1),i$g(this,"removeDocumentEventListener"),this.realSrc=vn!=null?vn:"",this.muted=!0,super.autoplay=!0,super.addEventListener("ended",()=>{this.src=""});const yn=()=>h$l(this);document.addEventListener("click",yn),document.addEventListener("touchend",yn),this.removeDocumentEventListener=()=>{document.removeEventListener("click",yn),document.removeEventListener("touchend",yn)}}get isBlankAudio(){return this.realSrc===r$p||!this.realSrc}get src(){return super.src}set src(vn){super.src=vn,this.realSrc=vn,this.removeDocumentEventListener()}get muted(){return super.muted}set muted(vn){super.muted=vn}clear(){this.currentTime=0,this.src=r$p}}function h$l(cr){cr&&(cr.inited||(cr.src&&(cr.inited=!0,cr.removeDocumentEventListener()),cr.src===r$p&&cr.play()))}const e$b={visibleConfig:{intersectRaycaster:{enabled:!0,distanceAccuracy:.01,checkPoints:"corner",needPassed:1}},clickable:!0,simulate3D:!1,renderType:"Dom"},e$a={globalConfig:{visibleConfig:{followModelVisibility:!0},unfoldedConfig:{autoUnfold:{enable:!0,strategy:"MinimumDistance",distance:{max:5}}},tag3DConfig:{ratio:.0035},popoverConfig:{enabled:!1,trigger:"hover",triggerDelay:500,placement:"auto",autoPlacementBaseSpace:{top:.2,right:.15,bottom:.2},transitionDuration:100,toolbar:{showMore:!0,showShare:!0},viewMoreText:"\u67E5\u770B\u66F4\u591A"}},contentTypeConfig:{"[Mapview]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"[Floorplan]":{unfoldedConfig:{autoUnfold:{enable:!1,distance:{max:9999}}}},"Any-Audio-plane":{unfoldedConfig:{keep:"unfolded"}},Link:{unfoldedConfig:{keep:"unfolded"}},Panorama:{unfoldedConfig:{keep:"unfolded"}},VRLink:{unfoldedConfig:{keep:"unfolded"}},PanoLink:{unfoldedConfig:{keep:"unfolded"}},MediaPlane:{unfoldedConfig:{keep:"unfolded"},initialData:{autoplayConfig:{autoplayCarousel:!0,autoplayVideo:!1,autoplayVideoInCarousel:!1}}},"Model-Any":{unfoldedConfig:{keep:"unfolded"},visibleConfig:{visibleFiveMode:"all"}},Marketing:{popoverConfig:{enabled:!1}},Audio:{popoverConfig:{toolbar:{showMore:!1}}}}};function d$p(cr,vn,yn){const Rn=new Plane().setFromNormalAndCoplanarPoint(yn,vn),Bn=vn.clone().sub(cr).cross(new Vector3(0,1,0)).setLength(.01),Co=new Vector3(0,.01,0);return[vn.clone().sub(Bn).sub(Co),vn.clone().add(Bn).sub(Co),vn.clone().add(Bn).add(Co),vn.clone().sub(Bn).add(Co)].map(Po=>Rn.projectPoint(Po,new Vector3))}const e$9=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;navigator.userAgent.toLowerCase().indexOf("android");const o$m=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,n$k=e$9&&o$m;function r$o(cr){if(cr.length!==4)return!1;const[vn,yn,Rn,Bn]=cr,Co=vn.distanceTo(yn),Po=yn.distanceTo(Rn),To=Rn.distanceTo(Bn),Io=Bn.distanceTo(vn),$l=vn.distanceTo(Rn),Wl=yn.distanceTo(Bn);return Co===To&&Po===Io&&$l===Wl}var b$i=Object.defineProperty,m$i=(cr,vn,yn)=>vn in cr?b$i(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,x$m=(cr,vn,yn)=>(m$i(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class M$k extends Mesh{constructor(vn,yn,Rn){if(vn.length!==4)throw new Error("QuadrangleMesh: Invalid number of points, it's not a quadrangle");const[Bn,Co,Po,To]=vn,Io=c$J(...vn),$l=[Bn.clone().sub(Io),Co.clone().sub(Io),Po.clone().sub(Io),To.clone().sub(Io)],Wl=new z$e($l,Rn);super(Wl,yn),x$m(this,"name","QuadrangleMesh"),this.position.copy(Io)}removeFromParent(){const vn=this.parent;return vn!==null&&vn.remove(this),this}}class z$e extends BufferGeometry{constructor(vn,yn){super(),x$m(this,"name","QuadrangleGeometry"),x$m(this,"points"),this.points=vn;const Rn=yn!=null?yn:r$o(vn)?64:1;if(vn.length!==4){console.error("Invalid number of points, it's not a quadrangle");return}const[Bn,Co,Po,To]=vn,[Io,$l,Wl,Xl]=[new Vector2(0,0),new Vector2(1,0),new Vector2(1,1),new Vector2(0,1)],Yl=[],Zl=[];Yl.push(...Bn.toArray()),Zl.push(...Io.toArray());for(let Rm=1;Rm<Rn;Rm++)Yl.push(Bn.x+(Co.x-Bn.x)*Rm/Rn,Bn.y+(Co.y-Bn.y)*Rm/Rn,Bn.z+(Co.z-Bn.z)*Rm/Rn),Zl.push(Io.x+($l.x-Io.x)*Rm/Rn,Io.y+($l.y-Io.y)*Rm/Rn);Yl.push(...Co.toArray()),Zl.push(...$l.toArray()),Yl.push(...Po.toArray()),Zl.push(...Wl.toArray());for(let Rm=1;Rm<Rn;Rm++)Yl.push(Po.x+(To.x-Po.x)*Rm/Rn,Po.y+(To.y-Po.y)*Rm/Rn,Po.z+(To.z-Po.z)*Rm/Rn),Zl.push(Wl.x+(Xl.x-Wl.x)*Rm/Rn,Wl.y+(Xl.y-Wl.y)*Rm/Rn);Yl.push(...To.toArray()),Zl.push(...Xl.toArray());const ey=[];for(let Rm=0;Rm<Rn;Rm++)ey.push(Rm,Rm+1,Rn*2-Rm,Rm,Rn*2-Rm,Rn*2+1-Rm);this.setAttribute("position",new BufferAttribute(new Float32Array(Yl),3)),this.setAttribute("uv",new BufferAttribute(new Float32Array(Zl),2)),this.setIndex(new BufferAttribute(new Uint32Array(ey),1))}}function s$b(cr,vn){let yn=!o$m;const Rn=vn!=null?vn:document.createElement("video");Rn.preload="metadata",Rn.crossOrigin="anonymous",Rn.muted=!0,Rn.loop=!0,Rn.playsInline=!0,Rn.autoplay=!0;const Bn=new VideoTexture(Rn);Bn.minFilter=LinearFilter,Bn.magFilter=LinearFilter,Bn.encoding=sRGBEncoding,Bn.metadataLoaded=!1,Rn.src=cr;const Co=()=>{Bn.metadataLoaded||(Bn.dispatchEvent({type:"videoLoaded"}),Bn.metadataLoaded=!0)};if(o$m||(Rn.onloadedmetadata=()=>{Co()}),o$m){const Po=()=>{if(!yn){if(!Rn.paused){Co();return}Rn.muted=!0,Rn.play().then(()=>{yn=!0,Rn.pause(),Rn.currentTime=0,Co()}).catch(()=>{console.warn("video auto play error")})}};document.addEventListener("click",Po,{once:!0}),document.addEventListener("touchend",Po,{once:!0})}return Bn}function H$l(cr,vn,yn){if(cr==="fill")return vn;if(cr==="contain"){const[Rn,Bn,Co,Po]=vn,To=Rn.distanceTo(Bn),Io=Co.distanceTo(Po),$l=Rn.distanceTo(Po),Wl=Bn.distanceTo(Co),Xl=To,Yl=$l,Zl=Xl/Yl;if(Zl>yn){const ey=Yl*yn,Rm=new Vector3().subVectors(Bn,Rn).multiplyScalar((To-ey)/2/To),ry=new Vector3().subVectors(Co,Po).multiplyScalar((Io-ey)/2/Io);return[Rn.clone().add(Rm),Bn.clone().sub(Rm),Co.clone().sub(ry),Po.clone().add(ry)]}else if(Zl<yn){const ey=Xl/yn,Rm=new Vector3().subVectors(Po,Rn).multiplyScalar(($l-ey)/2/$l),ry=new Vector3().subVectors(Co,Bn).multiplyScalar((Wl-ey)/2/Wl);return[Rn.clone().add(Rm),Bn.clone().add(ry),Co.clone().sub(ry),Po.clone().sub(Rm)]}else return vn}else return console.warn(`objectFit: ${cr} is not supported yet`),vn}var i$f=Object.defineProperty,o$l=(cr,vn,yn)=>vn in cr?i$f(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$n=(cr,vn,yn)=>(o$l(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class s$a extends ShaderMaterial{constructor(vn){super(),r$n(this,"transparent",!1),r$n(this,"blending",CustomBlending),r$n(this,"blendSrc",SrcAlphaFactor),r$n(this,"blendDst",OneMinusSrcAlphaFactor),r$n(this,"blendSrcAlpha",OneFactor),r$n(this,"blendDstAlpha",OneMinusSrcAlphaFactor),r$n(this,"vertexShader",`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `),r$n(this,"fragmentShader",`
    uniform sampler2D map;
    // \u7EB9\u7406\u5750\u6807
    varying vec2 vUv;
    void main() {
      gl_FragColor = texture2D(map, vUv);
    }
  `),this.uniforms={map:{value:vn}}}}const F$c={Z_FIGHTING_OFFSET:.01};var H$k=Object.defineProperty,S$h=(cr,vn,yn)=>vn in cr?H$k(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$m=(cr,vn,yn)=>(S$h(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),v$n=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class C$c extends Mesh{constructor(){super(...arguments),r$m(this,"name","MediaPlane"),r$m(this,"src")}removeFromParent(){const vn=this.parent;return vn!==null&&vn.remove(this),this}dispose(){this.traverse(vn=>{if(vn.isMesh){const yn=vn;yn.geometry.dispose(),(yn.material instanceof Array?yn.material:[yn.material]).forEach(Rn=>{Rn.dispose()})}})}}class z$d extends C$c{constructor(vn,yn,Rn){var Bn;super(),r$m(this,"name","PanoTagPluginImagePlane"),this.src=vn;const Co=(Bn=Rn==null?void 0:Rn.resolveZFighting)!=null?Bn:!0;let Po=yn;if(Co){const To=l$n(yn).multiplyScalar(F$c.Z_FIGHTING_OFFSET);Po=yn.map(Io=>Io.clone().add(To))}u$t(vn).then(({texture:To,transparent:Io})=>{var $l;const Wl=new MeshBasicMaterial({map:To,transparent:Io}),Xl=H$l(($l=Rn==null?void 0:Rn.objectFit)!=null?$l:"contain",Po,To.image.width/To.image.height),Yl=c$J(...Xl),Zl=Xl.map(Rm=>Rm.clone().sub(Yl)),ey=new z$e(Zl);this.position.copy(Yl),this.geometry=ey,this.material=Wl}).catch(To=>{console.error(`Imageplane error: ${To==null?void 0:To.message}`)})}}class D$g extends C$c{constructor(vn,yn,Rn){const{videoCoverSrc:Bn,objectFit:Co="contain",playButton:Po="withText",paused:To=!0,videoTextureMap:Io,ImageTextureMap:$l,domEvents:Wl}=Rn!=null?Rn:{};super(),r$m(this,"isVideoPlane",!0),r$m(this,"name","PanoTagPluginImagePlane"),r$m(this,"videoInstance"),r$m(this,"onVideoReady"),r$m(this,"objectFit"),r$m(this,"buttonSrc"),r$m(this,"videoCoverSrc"),r$m(this,"domEvents"),r$m(this,"disposers",[]),r$m(this,"cornerPoints"),r$m(this,"videoMesh"),r$m(this,"coverMesh"),r$m(this,"buttonMesh"),r$m(this,"videoTextureMap"),r$m(this,"ImageTextureMap"),this.cornerPoints=yn,this.src=vn,this.buttonSrc=(()=>Po==="withText"?a$k:Po==="withoutText"?g$r:typeof Po=="string"?Po:g$r)(),this.videoCoverSrc=Bn,this.objectFit=Co,this.videoTextureMap=Io,this.ImageTextureMap=$l,this.domEvents=Wl,this.position.copy(c$J(...yn)),this.videoCoverSrc&&To?this.addCoverMesh().then(()=>this.addButtonMesh()):this.addVideoMesh().then(()=>{To?this.addButtonMesh():this.play(!0)}),this.addEventListener("removed",()=>{this.remove(...this.children)}),this.addEventListener("dispose",()=>{var Xl;(Xl=this.disposers)==null||Xl.forEach(Yl=>Yl==null?void 0:Yl())})}play(vn=!1){return v$n(this,null,function*(){this.videoMesh||(yield this.addVideoMesh()),this.showPlayUI(),this.videoInstance.paused&&this.videoInstance.play().then(()=>this.showPlayUI()).catch(yn=>{this.pause(),console.error("play error",yn)}),this.videoInstance.muted=vn,this.render()})}pause(){this.videoInstance&&(this.videoInstance.pause(),this.showPauseUI().then(()=>this.render()))}initialRenderHooks(vn){const yn=vn(()=>{var Rn;this.videoMesh&&((Rn=this.videoInstance)==null?void 0:Rn.paused)===!1&&(this.videoMesh.needsRender=!0)});this.disposers.push(()=>yn)}showPlayUI(){this.coverMesh&&(this.coverMesh.visible=!1),this.remove(this.buttonMesh),this.videoMesh.visible=!0}showPauseUI(){return v$n(this,null,function*(){this.coverMesh?(this.coverMesh.visible=!0,this.videoMesh&&(this.videoMesh.visible=!1)):(yield this.addCoverMesh(),this.coverMesh&&(this.videoMesh.visible=!1)),this.addButtonMesh().then(()=>this.render())})}render(){var vn;this.videoMesh&&(this.videoMesh.needsRender=!0),this.coverMesh&&(this.coverMesh.needsRender=!0),this.buttonMesh&&(this.buttonMesh.needsRender=!0),this.videoMesh&&((vn=this.videoInstance)==null?void 0:vn.paused)===!1&&(this.videoMesh.needsRender=!0)}addCoverMesh(){return v$n(this,null,function*(){if(this.children.includes(this.coverMesh))return;const vn=yield(()=>v$n(this,null,function*(){if(this.coverMesh)return this.coverMesh;if(!this.videoCoverSrc)return;const{texture:yn,transparent:Rn}=yield this.getImageTexture(this.videoCoverSrc),Bn=new MeshBasicMaterial({transparent:!1,map:yn}),Co=H$l(this.objectFit,this.cornerPoints,yn.image.width/yn.image.height),Po=new M$k(Co,Bn);return Po.position.copy(new Vector3(0,0,0)),Po.name="videoCoverMesh",Po}))();return vn&&(this.children.includes(this.coverMesh)||(this.add(vn),this.coverMesh=vn)),vn})}addVideoMesh(){return v$n(this,null,function*(){var vn;if(this.children.includes(this.videoMesh))return;const yn=yield(()=>v$n(this,null,function*(){if(this.videoMesh)return this.videoMesh;if(!this.src)return;const Bn=this.getVideoTexture(this.src),Co=new MeshBasicMaterial({transparent:!1,map:Bn}),Po=yield new Promise(Io=>{Bn.metadataLoaded?Io(H$l(this.objectFit,this.cornerPoints,Bn.image.videoWidth/Bn.image.videoHeight)):Bn.addEventListener("videoLoaded",()=>Io(H$l(this.objectFit,this.cornerPoints,Bn.image.videoWidth/Bn.image.videoHeight)))}),To=new M$k(Po,Co);return To.name="videoMesh",To.position.copy(new Vector3(0,0,0)),To}))();if(!yn)return;this.domEvents.addAutoBindEventListener(yn,"click",()=>{!this.videoInstance.paused&&this.videoInstance.muted?this.videoInstance.muted=!1:this.pause()},{noEmitWhenHide:!0});const Rn=yn.material.map.image;return(vn=this.onVideoReady)==null||vn.call(this,Rn),Rn.addEventListener("playing",()=>{this.coverMesh||this.remove(this.buttonMesh),this.render()}),Rn.addEventListener("pause",()=>{this.videoInstance.paused&&(this.showPauseUI(),this.render())}),this.children.includes(this.videoMesh)||(this.add(yn),this.videoMesh=yn,this.videoInstance=Rn),yn})}addButtonMesh(){return v$n(this,null,function*(){if(this.children.includes(this.buttonMesh))return;const vn=yield(()=>v$n(this,null,function*(){var yn,Rn,Bn,Co;if(this.buttonMesh)return this.buttonMesh;const Po=(Rn=(yn=this.videoMesh)==null?void 0:yn.geometry.points[0].distanceTo(this.videoMesh.geometry.points[3]))!=null?Rn:1/0,To=(Co=(Bn=this.coverMesh)==null?void 0:Bn.geometry.points[0].distanceTo(this.coverMesh.geometry.points[3]))!=null?Co:1/0,Io=this.cornerPoints[0].distanceTo(this.cornerPoints[3]),$l=Math.min(Po,To,Io)/Io*.3,{texture:Wl,transparent:Xl}=yield this.getImageTexture(this.buttonSrc),Yl=H$l("contain",this.cornerPoints,Wl.image.width/Wl.image.height),Zl=new M$k(Yl,new s$a(Wl));Zl.position.copy(new Vector3(0,0,0)),Zl.name="buttonMesh",Zl.scale.set($l,$l,$l),this.domEvents.addAutoBindEventListener(Zl,"click",()=>{this.play()},{noEmitWhenHide:!0});const ey=l$n(Yl).multiplyScalar(F$c.Z_FIGHTING_OFFSET);return Zl.position.add(ey),Zl}))();return this.children.includes(this.buttonMesh)||(this.add(vn),this.buttonMesh=vn),vn})}getImageTexture(vn){return v$n(this,null,function*(){var yn,Rn;if((yn=this.ImageTextureMap)!=null&&yn.has(vn))return this.ImageTextureMap.get(vn);const Bn=yield u$t(vn);return(Rn=this.ImageTextureMap)==null||Rn.set(vn,Bn),Bn})}getVideoTexture(vn){var yn,Rn;if((yn=this.videoTextureMap)!=null&&yn.has(vn))return this.videoTextureMap.get(vn);const Bn=s$b(vn);return(Rn=this.videoTextureMap)==null||Rn.set(vn,Bn),Bn}}var h$k=Object.defineProperty,y$o=Object.getOwnPropertySymbols,b$h=Object.prototype.hasOwnProperty,g$q=Object.prototype.propertyIsEnumerable,c$q=(cr,vn,yn)=>vn in cr?h$k(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$j=(cr,vn)=>{for(var yn in vn||(vn={}))b$h.call(vn,yn)&&c$q(cr,yn,vn[yn]);if(y$o)for(var yn of y$o(vn))g$q.call(vn,yn)&&c$q(cr,yn,vn[yn]);return cr},o$k=(cr,vn,yn)=>(c$q(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class l$k{constructor(){o$k(this,"cache_raycasterDistance",new Map),o$k(this,"cache_visible",new Map)}clear(){this.cache_visible.clear(),this.cache_raycasterDistance.clear()}static generateCameraTagKey(vn,yn,Rn=3){const Bn=n$j(n$j({},yn.five.getCurrentState()),vn),Co=Bn.mode==="Panorama"?yn.workUtil.getObserverPosition(Bn.panoIndex):yn.five.camera.position;return Co?[Co.x.toFixed(Rn),Co.y.toFixed(Rn),Co.z.toFixed(Rn),yn.id].join(","):void 0}getVisible(vn,yn,Rn=1){const Bn=l$k.generateCameraTagKey(yn,vn,Rn);if(Bn)return this.cache_visible.get(Bn)}setVisible(vn,yn,Rn,Bn=1){const Co=l$k.generateCameraTagKey(yn,vn,Bn);Co&&this.cache_visible.set(Co,Rn)}}function t$7(cr){return Object.entries(cr)}function f$v(cr){var vn,yn;typeof cr.visibleConfig=="object"&&cr.visibleConfig.keep&&(cr.visibleConfig.keep==="visible"?cr.visibleConfig={keep:cr.visibleConfig.keep,visibleFiveMode:(vn=cr.visibleConfig)==null?void 0:vn.visibleFiveMode}:cr.visibleConfig.keep==="hidden"&&(cr.visibleConfig={keep:cr.visibleConfig.keep})),typeof cr.unfoldedConfig=="object"&&(cr.unfoldedConfig.disableFold&&(cr.unfoldedConfig={keep:"unfolded"}),cr.unfoldedConfig.disableUnfold&&(cr.unfoldedConfig={keep:"folded"}),cr.unfoldedConfig.keep&&(cr.unfoldedConfig={keep:cr.unfoldedConfig.keep}));const Rn=(yn=cr.initialState)!=null?yn:{};return typeof cr.unfoldedConfig=="object"&&(cr.unfoldedConfig.keep==="unfolded"?Rn.unfolded=!0:cr.unfoldedConfig.keep==="folded"&&(Rn.unfolded=!1)),typeof cr.visibleConfig=="object"&&(cr.visibleConfig.keep==="visible"?Rn.visible=!0:cr.visibleConfig.keep==="hidden"&&(Rn.visible=!1)),cr.initialState=Rn,cr}var $$7=Object.defineProperty,q$g=Object.defineProperties,z$c=Object.getOwnPropertyDescriptors,S$g=Object.getOwnPropertySymbols,G$a=Object.prototype.hasOwnProperty,X$5=Object.prototype.propertyIsEnumerable,D$f=(cr,vn,yn)=>vn in cr?$$7(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,W$8=(cr,vn)=>{for(var yn in vn||(vn={}))G$a.call(vn,yn)&&D$f(cr,yn,vn[yn]);if(S$g)for(var yn of S$g(vn))X$5.call(vn,yn)&&D$f(cr,yn,vn[yn]);return cr},Q$8=(cr,vn)=>q$g(cr,z$c(vn)),s$9=(cr,vn,yn)=>(D$f(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class zt$1 extends F$i{constructor(vn){super(vn),s$9(this,"tags",[]),s$9(this,"cache",new l$k),s$9(this,"config",e$a),s$9(this,"renderQueue",new Map),s$9(this,"params"),s$9(this,"mediaStore",h$s({currentMediaElement:null})),s$9(this,"store",{disposers:[],disposed:!1,resizeObserverDisposerAdding:!1,css3DRenderDisposer:new Map}),s$9(this,"domEvents",new Q$a(this.five)),s$9(this,"_cache_pointTag"),s$9(this,"_cache_2DPointTag"),s$9(this,"_cache_css3DTag"),s$9(this,"_container",null),s$9(this,"timeoutIds",[]),s$9(this,"whyHide",yn=>{const Rn=this.getTagById(yn);return Rn?Rn.whyHide():{reason:`tag ${yn} not found`}}),s$9(this,"loadVideoFirstFrame",()=>{n$k&&this.hooks.emit("loadVideoFirstFrame")}),s$9(this,"tagsDo",(yn,Rn,Bn=!0)=>{let Co=[...yn!=null?yn:this.tags].sort(($l,Wl)=>$l.getSquaredDistance()-Wl.getSquaredDistance());this.timeoutIds.forEach($l=>clearTimeout($l)),this.timeoutIds.length=0;for(let $l=0;$l<20;$l++){const Wl=Co[$l];Wl&&(Rn(Wl),Bn&&(Wl._updating=!1))}Co=Co.slice(20);const Po=Co.length>1e3,To=Po?30:17,Io=Po?1:3;for(let $l=0;$l<Co.length;$l+=Io){const Wl=[];for(let Yl=0;Yl<Io;Yl++)Co[$l+Yl]&&Wl.push(Co[$l+Yl]);Wl.forEach(Yl=>{Bn&&(Yl._updating=!0)});const Xl=setTimeout(()=>{Wl.forEach(Yl=>{Rn(Yl),Bn&&(Yl._updating=!1)})},$l*To);this.timeoutIds.push(Xl)}}),this.mediaStore.subscribe(({currentMediaElement:yn})=>{this.tags.forEach(Rn=>{var Bn;if(Rn.mediaPlane instanceof D$g&&yn!==Rn.mediaPlane.videoInstance){if(!((Bn=Rn.mediaPlane.videoInstance)!=null&&Bn.src)||yn===Rn.mediaPlane.videoInstance)return;Rn.mediaPlane.pause()}})})}get container(){var vn;return this._container||((vn=this.five.getElement())==null?void 0:vn.parentElement)}set container(vn){this._container=vn}set tagsLengthWillUpdate(vn){vn&&(this._cache_pointTag=this.tags.filter(yn=>yn.stickType==="2DPoint"||yn.stickType==="3DPoint").filter(yn=>yn.position),this._cache_2DPointTag=this.tags.filter(yn=>yn.stickType==="2DPoint").filter(yn=>yn.position),this._cache_css3DTag=this.tags.filter(yn=>yn.stickType==="3DPoint"||yn.stickType==="Plane"||yn.stickType==="Model"&&yn.contentType==="MediaModel").filter(yn=>{const Rn=yn.computeRenderType();return Rn==="BehindDom"||Rn==="Dom"}))}get filterPointTag(){var vn;return(vn=this._cache_pointTag)!=null?vn:[]}get filter2DPointTag(){var vn;return(vn=this._cache_2DPointTag)!=null?vn:[]}get filterCSS3DTag(){var vn;return(vn=this._cache_css3DTag)!=null?vn:[]}updateFive(vn){super.updateFive(vn),this.domEvents.dispose(),this.domEvents=new Q$a(vn)}addRenderQueue(vn){var yn,Rn;const{type:Bn,keys:Co=[],tags:Po=[]}=vn;this.renderQueue.has(Bn)?this.renderQueue.set(Bn,{keys:Array.from(new Set([...(yn=this.renderQueue.get(Bn).keys)!=null?yn:[],...Co])),tags:Array.from(new Set([...(Rn=this.renderQueue.get(Bn).tags)!=null?Rn:[],...Po]))}):this.renderQueue.set(Bn,{keys:Co,tags:Po})}getTagById(vn){const yn=this.tags.find(Rn=>Rn.id===vn);if(!yn){console.warn(`getTagById Error: can't find tag id: ${vn}`);return}return yn}pauseCurrentMedia(){this.mediaStore.set({currentMediaElement:null})}getTagConfig(vn,yn){var Rn,Bn,Co;const Po=this.calculateTagConfig(vn,{useCache:yn==null?void 0:yn.useCache}),To=(Rn=yn==null?void 0:yn.fiveMode)!=null?Rn:this.five.getCurrentState().mode,Io=(Bn=Po.configWithFiveMode)==null?void 0:Bn[To];return(Co=Io!=null?Io:Po)!=null?Co:{}}getPositions(vn){if(n$l(vn))return vn.position;if(o$o(vn))return vn.data.mediaPosition;if(i$j(vn))return d$p(this.five.camera.position,t$j(vn.position),t$j(vn.normal))}addObjectClickHandler(vn,yn,Rn){if(!yn||!this.domEvents)return()=>{};const Bn=()=>!(!vn.currentVisible||vn.loading),Co=Po=>{if(!Bn())return!1;Rn(Po.origDomEvent)};return this.domEvents.addEventListener(yn,"click",Co),()=>{var Po;(Po=this.domEvents)==null||Po.removeEventListener(yn,"click",Co)}}checkDisposed(){return this.store.disposed?(console.error("PanoTagPluginController has been disposed"),!0):!1}calculateTagConfig(vn,yn){var Rn,Bn,Co,Po,To;const Io=(Rn=yn==null?void 0:yn.useCache)!=null?Rn:!0;if(!vn)return(Bn=this.config.globalConfig)!=null?Bn:{};if(Io){if((Co=vn==null?void 0:vn.computedConfig)!=null&&Co._isMerged)return vn.computedConfig;if((Po=vn==null?void 0:vn.config)!=null&&Po._isMerged)return vn.config}const $l={},Wl={},Xl={};this.config.contentTypeConfig&&Object.entries(this.config.contentTypeConfig).forEach(([ty,ny])=>{var iy,oy;const ay=ty,uy=ay.split("-"),hy=ty.startsWith("["),my=hy?uy[0].slice(1,-1):void 0,ly=hy?uy.slice(1):uy,sy=my?["PanoramaLike","ModelLike"].includes(my)?(iy=Wl[my])!=null?iy:Wl[my]={}:(oy=Xl[my])!=null?oy:Xl[my]={}:$l;if(!sy[ay]){if(ly.length===0&&(sy[ay]=ny),ly.length===1){const[cy]=ly;(vn.contentType===cy||cy==="Any")&&(sy[ay]=ny)}if(ly.length===2){const[cy="Any",fy="Any"]=ly;cy==="Mixin"&&vn.contentType===fy&&(sy[ay]=ny),(vn.stickType===cy||cy==="Any")&&(vn.contentType===fy||fy==="Any")&&(sy[ay]=ny)}if(ly.length===3){const[cy="Any",fy,vy]=ly;if(fy==="Audio"&&vn.contentType==="Audio"){const dy=vn;(dy.stickType===cy||cy==="Any")&&dy.data.appearance===vy&&(sy[ay]=ny)}}}});const Yl=(To=vn.initialConfig)!=null?To:{},Zl=a$q({},e$b,this.config.globalConfig,...Object.values($l)),ey=a$q({},Zl,Yl),Rm={},ry=Object.values(Eg.Mode);t$7(Wl).forEach(([ty,ny])=>{ry.forEach(iy=>{(ty==="PanoramaLike"&&n$m(iy)||ty==="ModelLike"&&o$q(iy))&&(Rm[iy]=a$q({},Zl,...Object.values(ny),Yl,{_isMerged:!0}))})}),t$7(Xl).forEach(([ty,ny])=>{const iy=Rm[ty];Rm[ty]=a$q({},Zl,iy,...Object.values(ny),Yl,{_isMerged:!0})});const _g=Q$8(W$8({},ey),{configWithFiveMode:Rm});return f$v(_g),Object.values(Rm).forEach(ty=>f$v(ty)),_g._isMerged=!0,_g}}var n$i=Object.defineProperty,a$i=(cr,vn,yn)=>vn in cr?n$i(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$j=(cr,vn,yn)=>(a$i(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class Xt extends zt$1{constructor(vn){super(vn),o$j(this,"rendererMap",new Map),o$j(this,"contentTypeMap",new Map),o$j(this,"group",new Group$1),o$j(this,"imagePlaneGroup",new Group$1),o$j(this,"gltfObjectGroup",new Group$1),o$j(this,"enabledModelTagSet",new Set),o$j(this,"temporaryState",{visible:!0}),o$j(this,"TagContainerSvelte"),this.group.name="PanoTagPluginModelGroup",this.gltfObjectGroup.name="PanoTagPluginGLTFObjectGroup",this.imagePlaneGroup.name="ImagePlaneGroup",this.group.add(this.gltfObjectGroup),this.group.add(this.imagePlaneGroup)}registerRenderer(vn,yn,Rn){var Bn;this.rendererMap.set(vn,{renderer:yn,usePoint:(Bn=Rn==null?void 0:Rn.usePoint)!=null?Bn:!1})}bindRenderer(vn,yn){this.contentTypeMap.set(vn,yn)}disposeAllCSS3DContainer(){for(const[,vn]of this.store.css3DRenderDisposer)vn==null||vn.forEach(yn=>yn==null?void 0:yn());this.store.css3DRenderDisposer=new Map}clearUnusedPanelTag(){this.filter2DPointTag.forEach(vn=>{var yn;(yn=vn.tag3DContentSvelte)==null||yn.dispose(),vn.tag3DContentSvelte=void 0});for(const[vn,yn]of this.store.css3DRenderDisposer){const Rn=this.getTagById(vn);(!Rn||Rn.stickType==="2DPoint")&&(yn==null||yn.forEach(Bn=>Bn==null?void 0:Bn()),this.store.css3DRenderDisposer.delete(vn))}}}function M$j(cr,vn){vn.forEach(yn=>{const Rn=new SphereGeometry(.02,16,16),Bn=[],Co=[new MeshBasicMaterial({color:16776960}),new MeshBasicMaterial({color:16711935}),new MeshBasicMaterial({color:16711680}),new MeshBasicMaterial({color:65535})];if(yn.position.length===4)yn.position.forEach((Po,To)=>{const Io=Co[To],$l=new Mesh(Rn,Io);$l.position.copy(a$D(Po)),Bn.push($l)});else{const Po=Co[0],To=new Mesh(Rn,Po);To.position.copy(a$D(yn.position)),Bn.push(To)}Bn.forEach(Po=>{Po.material.depthTest=!1,cr.scene.add(Po)})})}var l$j=Object.defineProperty,c$p=(cr,vn,yn)=>vn in cr?l$j(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$i=(cr,vn,yn)=>(c$p(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class h$j{constructor(vn){o$i(this,"plugin"),o$i(this,"logBound",!1),o$i(this,"bindLogByObject",yn=>{Object.getOwnPropertyNames(yn).forEach(Rn=>{try{typeof yn[Rn]=="function"&&(yn[Rn]=new Proxy(yn[Rn],{apply:(Bn,Co,Po)=>(["render"].includes(Rn)||this.log(Rn,{obj:yn},...Po),Bn.apply(Co,Po))}))}catch{}})}),this.plugin=vn}get debug(){return this.plugin.debug}addDebugPoints(){try{M$j(this.plugin.five,this.plugin.tags)}catch(vn){console.error(vn)}}bindLog(){this.logBound||(this.logBound=!0,this.bindLogByObject(this.plugin),this.bindLogByObject(this.plugin.constructor.prototype))}log(vn,...yn){let Rn=new Error().stack;console.debug(`%cPanoTagPlugin%c${vn}`,"background-color: #35e0ed; color: black; padding:0 6px; border-radius: 3px","padding: 0 3px; color: #f3f47c",...yn,{stack:Rn})}closeIntersectRaycaster(){this.plugin.tags.forEach(vn=>{var yn;r$s((yn=vn==null?void 0:vn.initialConfig)==null?void 0:yn.visibleConfig).intersectRaycaster&&(vn.initialConfig.visibleConfig.intersectRaycaster.enabled=!1)}),this.plugin.changeGlobalConfig({visibleConfig:{intersectRaycaster:{enabled:!1}}})}}var z$b=Object.defineProperty,B$h=Object.defineProperties,H$j=Object.getOwnPropertyDescriptors,E$j=Object.getOwnPropertySymbols,J$d=Object.prototype.hasOwnProperty,K$d=Object.prototype.propertyIsEnumerable,x$l=(cr,vn,yn)=>vn in cr?z$b(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,F$b=(cr,vn)=>{for(var yn in vn||(vn={}))J$d.call(vn,yn)&&x$l(cr,yn,vn[yn]);if(E$j)for(var yn of E$j(vn))K$d.call(vn,yn)&&x$l(cr,yn,vn[yn]);return cr},_$a=(cr,vn)=>B$h(cr,H$j(vn));function ui(cr,vn,yn){var Rn,Bn,Co,Po,To;const Io=(Rn=yn==null?void 0:yn.useCache)!=null?Rn:!0;if(!cr)return(Bn=vn.globalConfig)!=null?Bn:{};if(Io){if((Co=cr==null?void 0:cr.computedConfig)!=null&&Co._isMerged)return cr.computedConfig;if((Po=cr==null?void 0:cr.config)!=null&&Po._isMerged)return cr.config}const $l={},Wl={},Xl={};vn.contentTypeConfig&&Object.entries(vn.contentTypeConfig).forEach(([ty,ny])=>{var iy,oy;const ay=ty,uy=ay.split("-"),hy=ty.startsWith("["),my=hy?uy[0].slice(1,-1):void 0,ly=hy?uy.slice(1):uy,sy=my?["PanoramaLike","ModelLike"].includes(my)?(iy=Wl[my])!=null?iy:Wl[my]={}:(oy=Xl[my])!=null?oy:Xl[my]={}:$l;if(!sy[ay]){if(ly.length===0&&(sy[ay]=ny),ly.length===1){const[cy]=ly;(cr.contentType===cy||cy==="Any")&&(sy[ay]=ny)}if(ly.length===2){const[cy="Any",fy="Any"]=ly;cy==="Mixin"&&cr.contentType===fy&&(sy[ay]=ny),(cr.stickType===cy||cy==="Any")&&(cr.contentType===fy||fy==="Any")&&(sy[ay]=ny)}if(ly.length===3){const[cy="Any",fy,vy]=ly;if(fy==="Audio"&&cr.contentType==="Audio"){const dy=cr;(dy.stickType===cy||cy==="Any")&&dy.data.appearance===vy&&(sy[ay]=ny)}}}});const Yl=(To=cr.initialConfig)!=null?To:{},Zl=a$q({},e$b,vn.globalConfig,...Object.values($l)),ey=a$q({},Zl,Yl),Rm={},ry=Object.values(Eg.Mode);t$7(Wl).forEach(([ty,ny])=>{ry.forEach(iy=>{(ty==="PanoramaLike"&&n$m(iy)||ty==="ModelLike"&&o$q(iy))&&(Rm[iy]=a$q({},Zl,...Object.values(ny),Yl,{_isMerged:!0}))})}),t$7(Xl).forEach(([ty,ny])=>{const iy=Rm[ty];Rm[ty]=a$q({},Zl,iy,...Object.values(ny),Yl,{_isMerged:!0})});const _g=_$a(F$b({},ey),{configWithFiveMode:Rm});return f$v(_g),Object.values(Rm).forEach(ty=>f$v(ty)),_g._isMerged=!0,_g}const t$6=Math.PI*2;function o$h(cr){return(cr%t$6+t$6)%t$6}function n$h(cr){return{longitude:o$h(-Math.atan2(cr.x,-cr.z)),latitude:-Math.asin(cr.y/1)}}var g$p=Object.defineProperty,b$g=Object.getOwnPropertySymbols,x$k=Object.prototype.hasOwnProperty,E$i=Object.prototype.propertyIsEnumerable,U$9=(cr,vn,yn)=>vn in cr?g$p(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,y$n=(cr,vn)=>{for(var yn in vn||(vn={}))x$k.call(vn,yn)&&U$9(cr,yn,vn[yn]);if(b$g)for(var yn of b$g(vn))E$i.call(vn,yn)&&U$9(cr,yn,vn[yn]);return cr},P$l=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});function j$h(cr,vn,yn){return P$l(this,null,function*(){var Rn,Bn;if(!vn)return;const Co=(Rn=yn==null?void 0:yn.distance)!=null?Rn:3,Po=new c$M(cr),To=cr.camera.position.clone().sub(vn).setY(0).normalize(),Io=cr.state.mode==="Mapview"?cr.state.fov:60,$l=Co,Wl=$l*Math.cos(MathUtils.degToRad(Io/2)),Xl=$l*Math.sin(MathUtils.degToRad(Io/2));let Yl=0;const Zl=[],ey=_g=>{const ty=MathUtils.degToRad(_g);return To.clone().applyAxisAngle(new Vector3(0,1,0),ty).clone().multiplyScalar(Wl).add(new Vector3(0,Xl,0)).add(vn)};for(;Yl!==360;){let _g=0;const ty=ey(Yl);if((ny=>{const iy=ny.distanceTo(ty),oy=new Raycaster(ny,ty.clone().sub(ny).normalize()),ay=Po.model.intersectRaycaster(oy,void 0,!0)[0],uy=ay==null?void 0:ay.distance;i$w(uy)?uy>iy&&(_g+=1):_g+=1})(vn),Zl[_g]=Yl,_g===1)break;Yl+=30}const Rm=ey((Bn=Zl[1])!=null?Bn:0),ry=n$h(vn.clone().sub(Rm).normalize());if(cr.state.mode==="Mapview")return cr.updateCamera(y$n({offset:vn,distance:Co},ry),800);cr.setState(y$n({mode:"Mapview",offset:vn,distance:Co},ry)),yield cr.ready()})}function p$r(cr){const vn=(()=>{if(o$o(cr)&&cr.matrix){const yn=new Matrix4().fromArray(cr.matrix);return cr.data.mediaPosition.map(Rn=>t$j(Rn).clone().applyMatrix4(yn))}else return cr.position})();return o$I(vn)}function x$j(cr){const vn=p$r(cr);return c$J(...Array.isArray(vn)?vn:[vn])}function i$e(cr,vn){if(cr===void 0)return;const{min:yn,max:Rn}=vn!=null?vn:{};if(!(yn===void 0&&Rn===void 0))return!(typeof Rn=="number"&&Rn<cr||typeof yn=="number"&&yn>cr)}function o$g(cr){const vn=cr.split("?")[0].split(".").pop();return vn?vn.toLowerCase():""}function d$o(cr,vn){if(!cr)return 0;const yn=cr.observers;if(!vn||!yn)return console.error("getFloorIndex: invalid arguments: ",{point:vn,observer:yn}),0;const Rn=[];yn.forEach(Co=>{var Po,To,Io;const $l=(To=(Po=Co.floorIndex)!=null?Po:Co.floor_index)!=null?To:0;Rn[$l]||(Rn[$l]=[]),Rn[$l].push(c$O(Co.position,(Io=cr.options)==null?void 0:Io.transform).y)});const Bn=Rn.map(Co=>Co.reduce((Po,To)=>Po+To,0)/Co.length);for(let Co=Bn.length-1;Co>0;Co--)if(vn.y>=Bn[Co])return Co;return 0}function i$d(){let cr,vn;return{promise:new Promise((yn,Rn)=>{cr=yn,vn=Rn}),resolve:cr,reject:vn}}var G$9=Object.defineProperty,K$c=Object.defineProperties,Q$7=Object.getOwnPropertyDescriptors,P$k=Object.getOwnPropertySymbols,j$g=Object.prototype.hasOwnProperty,A$j=Object.prototype.propertyIsEnumerable,k$f=Math.pow,w$i=(cr,vn,yn)=>vn in cr?G$9(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,g$o=(cr,vn)=>{for(var yn in vn||(vn={}))j$g.call(vn,yn)&&w$i(cr,yn,vn[yn]);if(P$k)for(var yn of P$k(vn))A$j.call(vn,yn)&&w$i(cr,yn,vn[yn]);return cr},U$8=(cr,vn)=>K$c(cr,Q$7(vn)),E$h=(cr,vn)=>{var yn={};for(var Rn in cr)j$g.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&P$k)for(var Rn of P$k(cr))vn.indexOf(Rn)<0&&A$j.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},a$h=(cr,vn,yn)=>(w$i(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),C$b=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class Ji{constructor(vn,yn){a$h(this,"plugin"),a$h(this,"id"),a$h(this,"contentType"),a$h(this,"stickType"),a$h(this,"enabled"),a$h(this,"config"),a$h(this,"data"),a$h(this,"state"),a$h(this,"temporaryState",{visible:!0}),a$h(this,"originPosition"),a$h(this,"position"),a$h(this,"fiveState"),a$h(this,"model"),a$h(this,"matrix"),a$h(this,"screenPosition"),a$h(this,"normal"),a$h(this,"mediaPlane"),a$h(this,"hooks"),a$h(this,"zIndex"),a$h(this,"play"),a$h(this,"pause"),a$h(this,"tag3DContentSvelte"),a$h(this,"dom"),a$h(this,"contentDom"),a$h(this,"initialConfig"),a$h(this,"computedConfig"),a$h(this,"cache"),a$h(this,"entryFromModel"),a$h(this,"_updating",!1),a$h(this,"hoverEnabled"),a$h(this,"ready",()=>{const{promise:Rm,resolve:ry}=i$d();if(!this._updating)ry();else{const _g=setInterval(()=>{this._updating||(clearInterval(_g),ry())},17);setTimeout(()=>{clearInterval(_g),ry()},300)}return Rm});var Rn,Bn,Co,Po,To,Io;this.plugin=vn;const $l=o$n(yn);yn.stickType=$l;const Wl=JSON.parse(JSON.stringify(yn.data)),Xl=(Rn=yn.initialConfig)!=null?Rn:yn.config?JSON.parse(JSON.stringify(yn.config)):{};yn.initialConfig=Xl;const Yl=ui(yn,vn.config),Zl=this.getConfig(yn);yn.config=Zl,this.id=(Bn=yn.id)!=null?Bn:r$F(),this.enabled=(Co=yn.enabled)!=null?Co:!0,this.contentType=yn.contentType,this.hoverEnabled=(To=(Po=Zl.popoverConfig)==null?void 0:Po.enabled)!=null?To:!0,this.data=(Io=Zl.initialData)!=null&&Io.important?a$q(yn.data,Wl,Zl.initialData):a$q(yn.data,Zl.initialData,Wl);let ey;typeof Zl.unfoldedConfig=="object"?Zl.unfoldedConfig.keep==="unfolded"?ey=!0:Zl.unfoldedConfig.keep==="folded"?ey=!1:ey=!this.can("fold"):ey=!this.can("fold"),this.state=g$o({visible:void 0,unfolded:ey},Zl.initialState),this.isPopoverConfigEnabled()&&(this.state.unfolded=!1),this.originPosition=yn.position,yn.originPosition=this.originPosition,this.position=(()=>{const Rm=yn.originPosition;if(!Rm)return;const ry=vn.workUtil.transform;return Array.isArray(Rm)&&Rm.length===4?Rm.map(t$j).map(_g=>c$O(_g,ry).toArray()):c$O(t$j(Rm),ry).toArray()})(),this.matrix=yn.matrix?(()=>{const Rm=new Matrix4().fromArray(yn.matrix);return Rm.premultiply(vn.workUtil.transform),Rm.elements})():yn.matrix,this.initialConfig=Xl,this.computedConfig=Yl,this.stickType=$l,this.config=yn.config,this.fiveState=yn.fiveState,this.normal=yn.normal,this.cache=new l$k,this.hooks=new E$v,Object.keys(yn).forEach(Rm=>{this[Rm]===void 0&&yn[Rm]!==void 0&&(this[Rm]=yn[Rm])})}get visible(){var vn;return((vn=this.temporaryState)==null?void 0:vn.visible)!==!1&&this.state.visible!==!1&&this.enabled!==!1}get five(){return this.plugin.five}get fiveUtil(){return this.plugin.fiveUtil}get workUtil(){return this.plugin.workUtil}get centerPosition(){const vn=p$r(this);return c$J(...Array.isArray(vn)?vn:[vn])}get currentConfig(){var vn,yn;const Rn=ui(this,this.plugin.config,{useCache:!0}),Bn=this.five.getCurrentState().mode,Co=(vn=Rn.configWithFiveMode)==null?void 0:vn[Bn];return(yn=Co!=null?Co:Rn)!=null?yn:{}}get currentVisible(){return!(!this.plugin.state.enabled||!this.plugin.state.visible||!this.enabled||!this.state.visible)}get sharedCache(){return this.plugin.cache}applyVisible(){throw new Error("Method not implemented.")}find(vn){return C$b(this,null,function*(){var yn;const Rn=this.fiveState;if(!this.fiveState)return this;const Bn=(yn=vn==null?void 0:vn.targetMode)!=null?yn:this.five.state.mode;if(Bn==="Panorama"){const Co=Rn==null?void 0:Rn.panoIndex;if(t$e(Co))return this;const Po=this.workUtil.getObserverPosition(Co),To=this.centerPosition.clone().sub(Po).normalize();this.five.setState(g$o({mode:"Panorama",workCode:this.workUtil.workCode,panoIndex:Co},n$h(To))),yield this.five.ready()}else Bn==="Mapview"&&(yield j$h(this.five,this.centerPosition,vn==null?void 0:vn.pointConfig));return this})}blink(vn){return C$b(this,null,function*(){var yn,Rn,Bn,Co;yield this.ready();const Po=(yn=this.enabled)!=null?yn:!0,To=(Rn=this.state)==null?void 0:Rn.visible,Io=Po&&To;Io===!1&&(this.state.visible=!0,this.enabled=!0,this.applyVisible(),this.plugin.render(),this.computeRenderType()!=="Mesh"?yield new Promise(Wl=>C$b(this,null,function*(){if(this.dom||this.contentDom){Wl();return}const Xl=setInterval(()=>{(this.dom||this.contentDom)&&(Wl(),clearInterval(Xl))},16.7)})):this.stickType==="Model"&&!((Bn=this.model)!=null&&Bn.object)?yield(Co=this.model)==null?void 0:Co.promise:this.stickType==="Plane"&&(yield new Promise(Wl=>C$b(this,null,function*(){if(this.mediaPlane){Wl();return}const Xl=setInterval(()=>{this.mediaPlane&&(Wl(),clearInterval(Xl))},16.7)}))),this.dom&&(this.dom.style.visibility="hidden"),this.contentDom&&(this.contentDom.style.visibility="hidden"));const $l=(()=>{var Wl,Xl,Yl;const Zl=[];return Zl.push(this.dom),Zl.push((Xl=(Wl=this.tag3DContentSvelte)==null?void 0:Wl.css3DInstance)==null?void 0:Xl.container),Zl.push((Yl=this.model)==null?void 0:Yl.object),Zl.push(this.mediaPlane),Zl.filter(Boolean)})();if(!$l.length){console.warn("tagDom is empty");return}yield(Io?k$g:q$i)($l,g$o({begin:()=>{Io===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))},updateRender:()=>{this.five.needsRender=!0}},vn)).finished,Po===!1&&(this.enabled=!1,this.updateVisible()),To===!1&&this.updateVisible(),Io===!1&&(this.dom&&(this.dom.style.visibility=""),this.contentDom&&(this.contentDom.style.visibility=""))})}unfold(){}unfoldAndFoldOthers(){}fold(){}enable(){this.enabled=!0,this.hooks.emit("enable"),this.applyVisible()}disable(){this.enabled=!1,this.hooks.emit("disable"),this.applyVisible()}changeData(vn,yn=!0){return this.setData(vn,yn)}changePosition(vn){return this.setPosition(vn)}setData(vn,yn=!0){yn?this.data=a$q(this.data,vn):this.data=g$o(g$o({},this.data),vn),this.hooks.emit("dataChanged",this.data)}setPosition(vn){throw new Error("Method not implemented.")}set(vn,yn=!0){this.plugin.tagsLengthWillUpdate=!0,yn?a$q(this,vn):Object.assign(this,vn),this.cache.clear()}updateConfig(){var vn;const yn=this.getConfig(void 0,{useCache:!1});this.computedConfig=yn;const Rn=this.getConfig();if(this.config=Rn,this.config.initialData){const Bn=JSON.parse(JSON.stringify(this.data));this.data=(vn=Rn.initialData)!=null&&vn.important?a$q(this.data,Bn,Rn.initialData):a$q(this.data,Rn.initialData,Bn)}this.cache.clear()}updateVisible(){this.enabled?(this.state.visible=this.getVisible(),this.applyVisible()):this.applyVisible(),this._updating=!1}updateZIndex(){const vn=this.getSquaredDistance();this.zIndex=Math.round((1e4-(vn!=null?vn:0))*100)}getConfig(vn,yn){var Rn,Bn,Co;const Po=ui(vn!=null?vn:this,this.plugin.config,{useCache:yn==null?void 0:yn.useCache}),To=(Rn=yn==null?void 0:yn.fiveMode)!=null?Rn:this.five.getCurrentState().mode,Io=(Bn=Po.configWithFiveMode)==null?void 0:Bn[To];return(Co=Io!=null?Io:Po)!=null?Co:{}}getDistance(vn,yn=3){const Rn=g$o(g$o({},this.five.getCurrentState()),vn),{panoIndex:Bn,mode:Co}=Rn,Po=Co==="Panorama"?this.workUtil.getObserverPosition(Bn):this.five.camera.position,To=this.centerPosition;return!Po||!To?-1:Po.distanceTo(To)}getSquaredDistance(){const vn=this.five.camera.position;let yn;return Array.isArray(this.position[0])?yn=this.position[0]:yn=this.position,k$f(yn[0]-vn.x,2)+k$f(yn[1]-vn.y,2)+k$f(yn[2]-vn.z,2)}getVisible(vn){if(!this.enabled||!this.plugin.state.enabled||!this.fiveUtil.model)return!1;const yn=g$o(g$o({},this.five.getCurrentState()),vn);let Rn=this.cache.getVisible(this,yn);return t$e(Rn)&&(Rn=this.computeVisible(yn).value,this.cache.setVisible(this,yn,Rn)),Rn}getUnfoldedByPanoIndex(vn){return this.currentVisible?this.computeUnfoldedByPanoIndex(vn)&&this.getUnfoldedByCamera():void 0}getUnfoldedByCamera(){return this.currentVisible?this.computeUnfoldedByCamera():void 0}can(vn){var yn,Rn;if((vn==="fold"||vn==="unfold")&&((Rn=(yn=this.currentConfig)==null?void 0:yn.popoverConfig)==null?void 0:Rn.enabled)===!0)return!1;const Bn=this.currentConfig;if(!Bn||typeof Bn!="object")return!0;if(vn==="show"||vn==="hide"){if(!Bn.visibleConfig||typeof Bn.visibleConfig!="object")return!0;if(vn==="show"&&Bn.visibleConfig.keep==="hidden"||vn==="hide"&&Bn.visibleConfig.keep==="visible")return!1}if(vn==="fold"||vn==="unfold"){if(!Bn.unfoldedConfig||typeof Bn.unfoldedConfig!="object")return!0;if(vn==="fold"&&Bn.unfoldedConfig.keep==="unfolded"||vn==="unfold"&&Bn.unfoldedConfig.keep==="folded")return!1}return!0}onClick(vn){}computeRenderType(){const vn=(()=>{if(this.stickType==="3DPoint")return"Dom";const yn=this.getConfig();if(!yn||typeof yn!="object"||!yn.renderType)return;const Rn=this.data.mediaData;if(!(!Rn||Rn.length===0)&&yn.renderType==="Mesh"){if(T$b(this)){if(Rn.length===1){if(Rn[0].type==="Video")return navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"Dom":"Mesh";if(Rn[0].type==="Image")return o$g(Rn[0].url)==="gif"?"Dom":"Mesh"}}else if(o$o(this))return Rn.length===1&&Rn[0].type==="Image"?o$g(Rn[0].url)==="gif"?"Dom":"Mesh":"BehindDom"}})();return vn!=null?vn:"Dom"}computeVisible(vn){const yn=g$o(g$o({},this.five.getCurrentState()),vn),{panoIndex:Rn,mode:Bn}=yn,Co=[];return(()=>{var Po,To,Io,$l;const Wl=(Po=this.getConfig().visibleConfig)!=null?Po:{};if(typeof Wl=="function")return{value:Wl(this.five,{tag:this,distance:this.getDistance(yn,void 0)}),checkedList:Co,reason:"config function result"};{if(Wl.keep==="hidden")return{value:!1,checkedList:Co,reason:"config.keep is hidden"};if(Wl.keep==="visible")return{value:!0,checkedList:Co,reason:"config.keep is visible"};const Xl=this.computeVisibleByFiveMode(Wl,Bn);if((Xl==null?void 0:Xl.value)===!1)return Xl;if(Wl.followModelVisibility===!0&&["poincare","aerophoto","sand"].includes(this.workUtil.fromType)&&(Bn==="Floorplan"||Bn==="Mapview")){const Yl=this.computeVisibleByFloorIndex(),{value:Zl}=Yl,ey=E$h(Yl,["value"]);if(Zl===!1)return g$o({value:!1,checkedList:Co,reason:"followModelVisibility check failed"},ey)}if(n$m(Bn)&&Wl.visiblePanoIndex!==void 0&&Wl.visiblePanoIndex!=="all"&&Rn!==void 0){if(Co.push("visiblePanoIndex"),Array.isArray(Wl.visiblePanoIndex)&&!Wl.visiblePanoIndex.includes(Rn))return{value:!1,checkedList:Co,reason:`current panoIndex is not included in visiblePano. currentPanoIndex: ${Rn}, visiblePanoIndex: ${Wl.visiblePanoIndex}`};if(Wl.visiblePanoIndex==="current"&&Rn!==((To=this.fiveState)==null?void 0:To.panoIndex))return{value:!1,checkedList:Co,reason:`current panoIndex is not equal to tag.panoIndex. currentPanoIndex: ${Rn}, tag.panoIndex: ${(Io=this.fiveState)==null?void 0:Io.panoIndex}`}}if(Wl.visibleDistance!==void 0&&(Co.push("visibleDistance"),Wl.visibleDistance!=="unLimited")){const Yl=this.getDistance(yn,1);if(i$e(Yl,Wl.visibleDistance)===!1)return{value:!1,checkedList:Co,panoIndex:Rn,visibleDistance:Wl.visibleDistance,reason:`distance is not in visibleDistance. distance: ${Yl}, visibleDistance: ${Wl.visibleDistance.min} - ${Wl.visibleDistance.max}`}}if(Wl.intersectRaycaster!==!1&&(typeof Wl.intersectRaycaster!="object"||Wl.intersectRaycaster.enabled!==!1)){if(Co.push("intersectRaycaster"),Rn===void 0)return{value:!1,checkedList:Co,reason:`intersectRaycaster check failed: panoIndex is ${Rn}`};if(Rn===(($l=this.fiveState)==null?void 0:$l.panoIndex))Co.push("intersectCheckSkiped");else{const Yl=this.computeVisibleByIntersect(Rn);if(Yl.value===!1)return Object.assign(Yl,{checkedList:Co})}}return{value:!0,checkedList:Co,reason:"all check passed"}}})()}computeVisibleByFiveMode(vn,yn){const Rn=()=>{var Bn,Co;let Po=typeof vn.visibleFiveMode=="function"?vn.visibleFiveMode(this):vn.visibleFiveMode;if(Po||(Po=(Co=(Bn=this.fiveState)==null?void 0:Bn.mode)!=null?Co:this.workUtil.observers.length?"Panorama":"ModelLike"),Array.isArray(Po))return Po.includes(yn);if(Po==="ModelLike")return o$q(yn);if(Po==="PanoramaLike")return!n$m(yn);if(Po==="all")return!0;if(typeof Po=="string")return Po===yn};if((()=>{var Bn;const Co=Rn();if(i$w((Bn=this.fiveState)==null?void 0:Bn.panoIndex)&&vn.entryFromModel){if(o$q(yn)&&Co?this.entryFromModel=!1:this.entryFromModel=!0,o$q(yn))return!0}else this.entryFromModel=!1;return Co})()===!1)return{value:!1,reason:"current mode is not included in visibleFiveMode",visibleFiveMode:vn.visibleFiveMode,mode:yn}}computeVisibleByIntersect(vn){var yn,Rn,Bn,Co;const Po=r$s(r$s((yn=this.getConfig().visibleConfig)!=null?yn:{}).intersectRaycaster),To=vn!=null?vn:this.five.getCurrentState().panoIndex,Io=n$m(this.five.getCurrentState().mode)?this.workUtil.getObserverPosition(To):this.five.camera.position;if(Io===void 0)return{value:!1,reason:{type:"startPosition is undefined",fivePanoIndex:To}};const $l=t$c((()=>{var Yl;const Zl=(Yl=Po.checkPoints)!=null?Yl:"center";return Zl==="center"?x$j(this):Zl==="corner"?p$r(this):Array.isArray(Zl)?Zl:[]})());let Wl=0,Xl=0;for(const Yl of $l){const Zl=new Vector3().subVectors(Yl,Io).normalize();let ey;t$g.set(Io,Zl);const[Rm]=this.fiveUtil.model.intersectRaycaster(t$g);ey=Rm==null?void 0:Rm.distance;const ry=(()=>{if(!o$o(this))return;const iy=this.plugin.tags.filter(o$o).map(ay=>{var uy;return(uy=ay.model)==null?void 0:uy.object}).filter(i$w),[oy]=t$g.intersectObjects(iy,!0);return oy})(),_g=Io.distanceTo(Yl),ty=(Rn=Po.distanceAccuracy)!=null?Rn:.01;ey=Math.min(ey!=null?ey:1/0,(Bn=ry==null?void 0:ry.distance)!=null?Bn:1/0),ey+ty>=_g?Wl++:Xl++;const ny=(Co=Po.needPassed)!=null?Co:1;if(Wl>=ny)return{value:!0}}return Xl===0?{value:!0}:{value:!1,reason:{type:"intersectRaycaster check failed",passedCount:Wl,needPassed:Po.needPassed,model:this.fiveUtil.model.name}}}computeVisibleByFloorIndex(){var vn,yn,Rn,Bn,Co,Po,To;let Io=0;const $l=(vn=this.fiveState)==null?void 0:vn.panoIndex;$l!==void 0?Io=(yn=this.workUtil.getObserver($l))==null?void 0:yn.floorIndex:Io=d$o(this.workUtil.work,(To=(Po=(Bn=(Rn=this.model)==null?void 0:Rn.object)==null?void 0:Bn.position)!=null?Po:(Co=this.mediaPlane)==null?void 0:Co.position)!=null?To:x$j(this));const Wl=this.fiveUtil.model.shownFloor;return{value:Wl===null||Wl===Io,currentFiveFloorIndex:Wl,tagFloorIndex:Io}}computeUnfoldedByPanoIndex(vn){const yn=this.getConfig().unfoldedConfig;if(yn){if(typeof yn=="function")return yn(this.five,{tag:this,distance:this.getDistance({panoIndex:vn})});if(yn.keep==="folded")return!1;if(yn.keep==="unfolded")return!0;if(yn.unfoldDistance&&i$e(this.getDistance({panoIndex:vn}),yn.unfoldDistance)===!1)return!1}}computeUnfoldedByCamera(){var vn;if(this.entryFromModel&&o$q(this.five.state.mode))return!1;const yn=this.getConfig().unfoldedConfig;if(yn){if(typeof yn=="function")return yn(this.five,{tag:this,distance:this.getDistance()});if(yn.keep==="folded")return!1;if(yn.keep==="unfolded")return!0;if(yn.autoUnfold===void 0||yn.autoUnfold===!1||yn.autoUnfold.enable===!1||!yn.autoUnfold.strategy)return;if(yn.autoUnfold.strategy==="ScreenPostion"){const Rn=this.computeTagProject();if(Rn&&i$e(Rn.x,yn.autoUnfold.autoUnfoldProjectX)===!1)return!1}if(yn.autoUnfold.strategy==="MinimumDistance"){const Rn=this.plugin.filterPointTag.filter(Bn=>Bn.currentVisible).filter(Bn=>{const Co=this.computeTagProject();if(!Co)return!1;const{x:Po,y:To,z:Io}=Co;return!(Math.abs(Io)>1||Math.abs(Po)>1||Math.abs(To)>1)}).map(Bn=>({tag:Bn,id:Bn.id,tagConfig:Bn.getConfig().unfoldedConfig})).filter(({tagConfig:Bn})=>{var Co,Po;return!(typeof Bn=="function"||Bn.keep||Bn.autoUnfold===!1||((Co=Bn.autoUnfold)==null?void 0:Co.enable)===!1||((Po=Bn.autoUnfold)==null?void 0:Po.strategy)!=="MinimumDistance")}).map(Bn=>U$8(g$o({},Bn),{distance:Bn.tag.getDistance()})).filter(({distance:Bn,tagConfig:Co})=>{const Po=Co.autoUnfold.distance;return!(Po&&i$e(Bn,Po)===!1)}).sort((Bn,Co)=>Bn.distance-Co.distance).findIndex(Bn=>Bn.id===this.id);if(Rn===-1||!(Rn<=((vn=yn.autoUnfold.maxNumber)!=null?vn:1)-1))return!1}return yn.autoUnfold.strategy!=="FoldWhenMove"}}computeTagProject(){const vn=this.centerPosition;if(!vn)return;const{x:yn,y:Rn,z:Bn}=vn.project(this.five.camera);if(!(Bn>1))return{x:yn,y:Rn,z:Bn}}addObjectClickHandler(vn,yn,Rn){if(!yn||!this.plugin.domEvents)return()=>{};const Bn=()=>!(!vn.currentVisible||vn.loading),Co=Po=>{if(!Bn())return!1;Rn(Po.origDomEvent)};return this.plugin.domEvents.addEventListener(yn,"click",Co),()=>{var Po;(Po=this.plugin.domEvents)==null||Po.removeEventListener(yn,"click",Co)}}whyHide(){var vn;if(!this.plugin.state.enabled)return{reason:`plugin.state.enabled is ${this.plugin.state.enabled}`};if(!this.plugin.state.visible)return{reason:`plugin.state.visible is ${this.plugin.state.visible}`};if(!this.enabled)return{reason:`tag ${this.id} enabled is: ${this.enabled}`};const yn=U$8(g$o({},this.computeVisible()),{tagInstance:this});return yn.value!==this.state.visible?{reason:"\u63D2\u4EF6\u6545\u969C\uFF0C\u8BF7\u8054\u7CFB\u7EF4\u62A4\u4EBA\u5458, err: 0",info:yn}:this.state.visible?{reason:"\u5E94\u8BE5\u662F\u80FD\u770B\u89C1\u624D\u5BF9",info:yn}:yn.value===!0?{reason:"\u63D2\u4EF6\u6545\u969C\uFF0C\u8BF7\u8054\u7CFB\u7EF4\u62A4\u4EBA\u5458, err: 1",info:yn}:{reason:(vn=yn.reason.type)!=null?vn:yn.reason,info:yn}}destroy(){var vn,yn;const Rn=this.plugin.tags.findIndex(Bn=>Bn.id===this.id);if(Rn===-1){console.warn(`Destroy failed: tag ${this.id} not found`);return}this.disable(),(yn=(vn=this.tag3DContentSvelte)==null?void 0:vn.dispose)==null||yn.call(vn),this.hooks.off(),this.cache.clear(),this.plugin.tags.splice(Rn,1),this.plugin.tagsLengthWillUpdate=!0,this.plugin.hooks.emit("tagsLengthChange")}isPopoverConfigEnabled(){var vn,yn;return((yn=(vn=this.currentConfig)==null?void 0:vn.popoverConfig)==null?void 0:yn.enabled)===!0}isHoverEnabled(){var vn;return!(((vn=this.plugin)==null?void 0:vn.globalHoverEnabled)===!1||this.hoverEnabled===!1)}}var h$i=Object.defineProperty,c$o=(cr,vn,yn)=>vn in cr?h$i(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$q=(cr,vn,yn)=>(c$o(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const v$m=new Vector2;class Jt extends Ji{constructor(vn,yn){super(vn,yn),p$q(this,"__Object__"),p$q(this,"requestIdleCallbackId")}unfoldAndFoldOthers(){if(this.isPopoverConfigEnabled())return;const vn=this.can("fold"),yn=this.can("unfold");vn&&yn&&(this.state.unfolded=!this.state.unfolded,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.state.unfolded&&this.plugin.tags.forEach(Rn=>{Rn.id!==this.id&&Rn.fold()}))}onClick(vn){vn.target==="TagPoint"&&this.unfoldAndFoldOthers()}applyVisible(){var vn,yn;this.currentVisible&&this.updateScreenPosition(),(vn=this.tag3DContentSvelte)!=null&&vn.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible),(yn=this.tag3DContentSvelte)==null||yn.svelteApp.$set({state:this.plugin.state,temporaryState:this.temporaryState}),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}unfold(){this.isPopoverConfigEnabled()||this.setUnfold(!0)}fold(){this.isPopoverConfigEnabled()||this.setUnfold(!1)}setUnfold(vn){if(this.isPopoverConfigEnabled())return;const yn=this.can("fold"),Rn=this.can("unfold");yn&&Rn&&(this.state.unfolded=vn,this.hooks.emit(vn?"unfolded":"folded"),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))}setPosition(vn){this.originPosition=vn,this.position=vn,this.cache.clear(),this.updateVisible(),this.updateScreenPosition(),this.updateZIndex(),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateScreenPosition(vn){var yn;if(this.stickType!=="2DPoint"&&this.stickType!=="3DPoint")return;const{force:Rn=!1}=vn!=null?vn:{},Bn=Rn?this.state.visible:this.currentVisible,Co=(yn=this.__Object__)!=null?yn:{timeoutId:void 0,inAnimation:!1};if(this.__Object__=Co,!Bn&&this.screenPosition?(Co.inAnimation=!0,Co.timeoutId=setTimeout(()=>{requestAnimationFrame(()=>{this.currentVisible||(Co.inAnimation=!1,this.screenPosition=null,this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}))})},1e3)):Co.timeoutId&&(clearTimeout(Co.timeoutId),Co.inAnimation=!1,Co.timeoutId=void 0),!Bn&&!Co.inAnimation)return;const Po=this.computeTagProject();if(Po&&this.five.renderer){const To=(()=>{if(!this.currentConfig.simulate3D)return 1;const $l=2*Math.tan(.5*this.five.camera.fov/180*Math.PI),Wl=this.getDistance(void 0,1);return Math.max(Math.min(1-$l*Wl/40,1),.7)})(),Io=this.five.renderer.getSize(v$m);this.screenPosition={leftPx:(Po.x+1)/2*Io.x,topPx:(-Po.y+1)/2*Io.y,scale:To}}else this.screenPosition=null;this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}set(vn,yn=!0){super.set(vn,yn),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),vn.position&&this.setPosition(this.position)}setData(...vn){super.setData(...vn),this.plugin.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]})}updateUnfoldedByPanoIndex(){if(this.isPopoverConfigEnabled())return;const vn=this.getUnfoldedByPanoIndex();if(this.state&&(vn!==void 0&&(this.state.unfolded=vn),vn&&!this.state.visible)){const yn=this.getConfig();typeof yn.unfoldedConfig=="object"&&yn.unfoldedConfig.autoFoldWhenHide!==!1&&(this.state.unfolded=!1)}}computeNormal(){return new Vector3().fromArray(this.normal)}}var A$i=Object.defineProperty,H$i=(cr,vn,yn)=>vn in cr?A$i(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$f=(cr,vn,yn)=>(H$i(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const $$6=1,V$6=`CSS3DObject@${$$6}`,z$a=.00216,F$a=.003;class nt$3 extends c$I{constructor(vn){var yn,Rn,Bn,Co,Po;if(t$e(vn.cornerPoints)&&t$e(vn.width))throw new Error("cornerPoints and width cannot be both empty");const To=(yn=vn.container)!=null?yn:document.createElement("div"),Io=(Rn=vn.cornerPoints)!=null?Rn:(()=>{const my=vn.width/2;return[new Vector3(-my,my,0),new Vector3(-my,-my,0),new Vector3(my,-my,0),new Vector3(my,my,0)]})(),$l=(Bn=vn.ratio)!=null?Bn:F$a,Wl=(Co=vn.dpr)!=null?Co:1,Xl=(Po=vn.pointerEvents)!=null?Po:"auto",Yl=Math.max(z$a,$l),Zl=Io[0].distanceTo(Io[1]),ey=Io[1].distanceTo(Io[2]);let Rm=t$f(Zl/$l*Wl),ry=t$f(ey/$l*Wl);const _g=c$J(...Io);let ty;if(Yl===$l)To.style.width=`${Rm}px`,To.style.height=`${ry}px`,ty=To;else{const my=document.createElement("div");my.style.width=`${Rm}px`,my.style.height=`${ry}px`,my.style.pointerEvents="none";const ly=$l/Yl;To.style.position="absolute",To.style.left="0",To.style.top="0",To.style.width=`${ly*Rm}px`,To.style.height=`${ly*ry}px`,my.appendChild(To),ty=my}if(super(ty),o$f(this,"version",$$6),o$f(this,"isCSS3DObject",!0),o$f(this,"name",V$6),o$f(this,"container"),o$f(this,"width"),o$f(this,"height"),o$f(this,"domWidthPx"),o$f(this,"domHeightPx"),o$f(this,"cornerPoints"),o$f(this,"centerPosition"),o$f(this,"ratio"),o$f(this,"_mode","front"),o$f(this,"_opacityMesh"),ty.id=this.id.toString(),To.style.pointerEvents=Xl,Object.assign(To.style,vn.style),this.scale.set(Yl,Yl,Yl),this.cornerPoints=Io,this.ratio=$l,this.container=To,vn.mode&&(this.mode=vn.mode),Yl===$l)this.width=Zl,this.height=ey,this.centerPosition=_g;else{const my=$l/Yl;this.width=my*Zl,this.height=my*ey,Rm=my*Rm,ry=my*ry,this.centerPosition=new Vector3().subVectors(_g,Io[0]).multiplyScalar(my).add(Io[0])}this.domWidthPx=Rm,this.domHeightPx=ry,To.classList.add(`${V$6}__container`);const ny=new Vector3().subVectors(Io[1],Io[0]),iy=new Vector3().subVectors(Io[3],Io[0]),oy=new Vector3().crossVectors(ny,iy).normalize();this.lookAt(oy);const ay=this.up.clone().applyQuaternion(this.quaternion),uy=iy.clone(),hy=new Vector3().crossVectors(ay,uy).normalize();this.rotateOnWorldAxis(hy,ay.angleTo(uy)),this.position.copy(_g),this._opacityMesh=new p$B(Rm,ry),this._opacityMesh.visible=vn.mode==="behind",this.add(this._opacityMesh)}get mode(){return this._mode}set mode(vn){this._mode=vn,this._opacityMesh&&(this._opacityMesh.visible=vn==="behind")}removeFromParent(){const vn=this.parent;return vn!==null&&vn.remove(this),this}dispose(){this.container.remove(),this.removeFromParent()}}var Ge$1=function(cr,vn){return Ge$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yn,Rn){yn.__proto__=Rn}||function(yn,Rn){for(var Bn in Rn)Object.prototype.hasOwnProperty.call(Rn,Bn)&&(yn[Bn]=Rn[Bn])},Ge$1(cr,vn)};function rr(cr,vn){if(typeof vn!="function"&&vn!==null)throw new TypeError("Class extends value "+String(vn)+" is not a constructor or null");Ge$1(cr,vn);function yn(){this.constructor=cr}cr.prototype=vn===null?Object.create(vn):(yn.prototype=vn.prototype,new yn)}var qr=function(){function cr($y){Loader.call(this,$y),this.dracoLoader=null,this.ddsLoader=null}cr.prototype=Object.assign(Object.create(Loader.prototype),{constructor:cr,load:function($y,xy,Ry,Ly){var ky=this,Ey;this.resourcePath!==""?Ey=this.resourcePath:this.path!==""?Ey=this.path:Ey=LoaderUtils.extractUrlBase($y),ky.manager.itemStart($y);var Iy=function(Uy){Ly?Ly(Uy):console.error(Uy),ky.manager.itemError($y),ky.manager.itemEnd($y)},zy=new FileLoader(ky.manager);zy.setPath(this.path),zy.setResponseType("arraybuffer"),zy.setRequestHeader(this.requestHeader),ky.crossOrigin==="use-credentials"&&zy.setWithCredentials(!0),zy.load($y,function(Uy){try{ky.parse(Uy,Ey,function(Qy){xy(Qy),ky.manager.itemEnd($y)},Iy)}catch(Qy){Iy(Qy)}},Ry,Iy)},setDRACOLoader:function($y){return this.dracoLoader=$y,this},setDDSLoader:function($y){return this.ddsLoader=$y,this},parse:function($y,xy,Ry,Ly){var ky,Ey={};if(typeof $y=="string")ky=$y;else{var Iy=LoaderUtils.decodeText(new Uint8Array($y,0,4));if(Iy===Io){try{Ey[yn.KHR_BINARY_GLTF]=new Xl($y)}catch(Ty){Ly&&Ly(Ty);return}ky=Ey[yn.KHR_BINARY_GLTF].content}else ky=LoaderUtils.decodeText(new Uint8Array($y))}var zy=JSON.parse(ky);if(zy.asset===void 0||zy.asset.version[0]<2){Ly&&Ly(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}if(zy.extensionsUsed)for(var Uy=0;Uy<zy.extensionsUsed.length;++Uy){var Qy=zy.extensionsUsed[Uy],Gy=zy.extensionsRequired||[];switch(Qy){case yn.KHR_LIGHTS_PUNCTUAL:Ey[Qy]=new Bn(zy);break;case yn.KHR_MATERIALS_CLEARCOAT:Ey[Qy]=new Po;break;case yn.KHR_MATERIALS_TRANSMISSION:Ey[Qy]=new To;break;case yn.KHR_MATERIALS_UNLIT:Ey[Qy]=new Co;break;case yn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Ey[Qy]=new Rm;break;case yn.KHR_DRACO_MESH_COMPRESSION:Ey[Qy]=new Yl(zy,this.dracoLoader);break;case yn.MSFT_TEXTURE_DDS:Ey[Qy]=new Rn(this.ddsLoader);break;case yn.KHR_TEXTURE_TRANSFORM:Ey[Qy]=new Zl;break;case yn.KHR_MESH_QUANTIZATION:Ey[Qy]=new ry;break;case yn.REALSEE_MATERIALS_LIGHTMAP:Ey[Qy]=new ty;break;default:Gy.indexOf(Qy)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Qy+'".')}}var Zy=new Py(zy,Ey,{path:xy||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});Zy.fileLoader.setRequestHeader(this.requestHeader),Zy.parse(Ry,Ly)}});function vn(){var $y={};return{get:function(xy){return $y[xy]},add:function(xy,Ry){$y[xy]=Ry},remove:function(xy){delete $y[xy]},removeAll:function(){$y={}}}}var yn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds",REALSEE_MATERIALS_LIGHTMAP:"REALSEE_materials_lightmap"};function Rn($y){if(!$y)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=yn.MSFT_TEXTURE_DDS,this.ddsLoader=$y}function Bn($y){this.name=yn.KHR_LIGHTS_PUNCTUAL;var xy=$y.extensions&&$y.extensions[yn.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=xy.lights||[]}Bn.prototype.loadLight=function($y){var xy=this.lightDefs[$y],Ry,Ly=new Color(16777215);xy.color!==void 0&&Ly.fromArray(xy.color);var ky=xy.range!==void 0?xy.range:0;switch(xy.type){case"directional":Ry=new DirectionalLight(Ly),Ry.target.position.set(0,0,-1),Ry.add(Ry.target);break;case"point":Ry=new PointLight(Ly),Ry.distance=ky;break;case"spot":Ry=new SpotLight(Ly),Ry.distance=ky,xy.spot=xy.spot||{},xy.spot.innerConeAngle=xy.spot.innerConeAngle!==void 0?xy.spot.innerConeAngle:0,xy.spot.outerConeAngle=xy.spot.outerConeAngle!==void 0?xy.spot.outerConeAngle:Math.PI/4,Ry.angle=xy.spot.outerConeAngle,Ry.penumbra=1-xy.spot.innerConeAngle/xy.spot.outerConeAngle,Ry.target.position.set(0,0,-1),Ry.add(Ry.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+xy.type+'".')}return Ry.position.set(0,0,0),Ry.decay=2,xy.intensity!==void 0&&(Ry.intensity=xy.intensity),Ry.name=xy.name||"light_"+$y,Promise.resolve(Ry)};function Co(){this.name=yn.KHR_MATERIALS_UNLIT}Co.prototype.getMaterialType=function(){return MeshBasicMaterial},Co.prototype.extendParams=function($y,xy,Ry){var Ly=[];$y.color=new Color(1,1,1),$y.opacity=1;var ky=xy.pbrMetallicRoughness;if(ky){if(Array.isArray(ky.baseColorFactor)){var Ey=ky.baseColorFactor;$y.color.fromArray(Ey),$y.opacity=Ey[3]}ky.baseColorTexture!==void 0&&Ly.push(Ry.assignTexture($y,"map",ky.baseColorTexture))}return Promise.all(Ly)};function Po(){this.name=yn.KHR_MATERIALS_CLEARCOAT}Po.prototype.getMaterialType=function(){return MeshPhysicalMaterial},Po.prototype.extendParams=function($y,xy,Ry){var Ly=[],ky=xy.extensions[this.name];if(ky.clearcoatFactor!==void 0&&($y.clearcoat=ky.clearcoatFactor),ky.clearcoatTexture!==void 0&&Ly.push(Ry.assignTexture($y,"clearcoatMap",ky.clearcoatTexture)),ky.clearcoatRoughnessFactor!==void 0&&($y.clearcoatRoughness=ky.clearcoatRoughnessFactor),ky.clearcoatRoughnessTexture!==void 0&&Ly.push(Ry.assignTexture($y,"clearcoatRoughnessMap",ky.clearcoatRoughnessTexture)),ky.clearcoatNormalTexture!==void 0&&(Ly.push(Ry.assignTexture($y,"clearcoatNormalMap",ky.clearcoatNormalTexture)),ky.clearcoatNormalTexture.scale!==void 0)){var Ey=ky.clearcoatNormalTexture.scale;$y.clearcoatNormalScale=new Vector2(Ey,Ey)}return Promise.all(Ly)};function To(){this.name=yn.KHR_MATERIALS_TRANSMISSION}To.prototype.getMaterialType=function(){return MeshPhysicalMaterial},To.prototype.extendParams=function($y,xy,Ry){var Ly=[],ky=xy.extensions[this.name];return ky.transmissionFactor!==void 0&&($y.premultipliedAlpha=!0,$y.transparent=!0,$y.opacity=$y.opacity!==void 0?$y.opacity:.5),Promise.all(Ly)};var Io="glTF",$l=12,Wl={JSON:1313821514,BIN:5130562};function Xl($y){this.name=yn.KHR_BINARY_GLTF,this.content=null,this.body=null;var xy=new DataView($y,0,$l);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array($y.slice(0,4))),version:xy.getUint32(4,!0),length:xy.getUint32(8,!0)},this.header.magic!==Io)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var Ry=new DataView($y,$l),Ly=0;Ly<Ry.byteLength;){var ky=Ry.getUint32(Ly,!0);Ly+=4;var Ey=Ry.getUint32(Ly,!0);if(Ly+=4,Ey===Wl.JSON){var Iy=new Uint8Array($y,$l+Ly,ky);this.content=LoaderUtils.decodeText(Iy)}else if(Ey===Wl.BIN){var zy=$l+Ly;this.body=$y.slice(zy,zy+ky)}Ly+=ky}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function Yl($y,xy){if(!xy)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=yn.KHR_DRACO_MESH_COMPRESSION,this.json=$y,this.dracoLoader=xy,this.dracoLoader.preload()}Yl.prototype.decodePrimitive=function($y,xy){var Ry=this.json,Ly=this.dracoLoader,ky=$y.extensions[this.name].bufferView,Ey=$y.extensions[this.name].attributes,Iy={},zy={},Uy={};for(var Qy in Ey){var Gy=hy[Qy]||Qy.toLowerCase();Iy[Gy]=Ey[Qy]}for(Qy in $y.attributes){var Gy=hy[Qy]||Qy.toLowerCase();if(Ey[Qy]!==void 0){var Zy=Ry.accessors[$y.attributes[Qy]],Ty=iy[Zy.componentType];Uy[Gy]=Ty,zy[Gy]=Zy.normalized===!0}}return xy.getDependency("bufferView",ky).then(function(Vy){return new Promise(function(Yy){Ly.decodeDracoFile(Vy,function(Jy){for(var Hy in Jy.attributes){var i1=Jy.attributes[Hy],u1=zy[Hy];u1!==void 0&&(i1.normalized=u1)}Yy(Jy)},Iy,Uy)})})};function Zl(){this.name=yn.KHR_TEXTURE_TRANSFORM}Zl.prototype.extendTexture=function($y,xy){return $y=$y.clone(),xy.offset!==void 0&&$y.offset.fromArray(xy.offset),xy.rotation!==void 0&&($y.rotation=xy.rotation),xy.scale!==void 0&&$y.repeat.fromArray(xy.scale),xy.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),$y.needsUpdate=!0,$y};function ey($y){MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var xy=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),Ry=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),Ly=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),ky=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Ey=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Iy={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Iy,this.onBeforeCompile=function(zy){for(var Uy in Iy)zy.uniforms[Uy]=Iy[Uy];zy.fragmentShader=zy.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),zy.fragmentShader=zy.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),zy.fragmentShader=zy.fragmentShader.replace("#include <roughnessmap_pars_fragment>",xy),zy.fragmentShader=zy.fragmentShader.replace("#include <metalnessmap_pars_fragment>",Ry),zy.fragmentShader=zy.fragmentShader.replace("#include <roughnessmap_fragment>",Ly),zy.fragmentShader=zy.fragmentShader.replace("#include <metalnessmap_fragment>",ky),zy.fragmentShader=zy.fragmentShader.replace("#include <lights_physical_fragment>",Ey)},Object.defineProperties(this,{specular:{get:function(){return Iy.specular.value},set:function(zy){Iy.specular.value=zy}},specularMap:{get:function(){return Iy.specularMap.value},set:function(zy){Iy.specularMap.value=zy}},glossiness:{get:function(){return Iy.glossiness.value},set:function(zy){Iy.glossiness.value=zy}},glossinessMap:{get:function(){return Iy.glossinessMap.value},set:function(zy){Iy.glossinessMap.value=zy,zy?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues($y)}ey.prototype=Object.create(MeshStandardMaterial.prototype),ey.prototype.constructor=ey,ey.prototype.copy=function($y){return MeshStandardMaterial.prototype.copy.call(this,$y),this.specularMap=$y.specularMap,this.specular.copy($y.specular),this.glossinessMap=$y.glossinessMap,this.glossiness=$y.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function Rm(){return{name:yn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return ey},extendParams:function($y,xy,Ry){var Ly=xy.extensions[this.name];$y.color=new Color(1,1,1),$y.opacity=1;var ky=[];if(Array.isArray(Ly.diffuseFactor)){var Ey=Ly.diffuseFactor;$y.color.fromArray(Ey),$y.opacity=Ey[3]}if(Ly.diffuseTexture!==void 0&&ky.push(Ry.assignTexture($y,"map",Ly.diffuseTexture)),$y.emissive=new Color(0,0,0),$y.glossiness=Ly.glossinessFactor!==void 0?Ly.glossinessFactor:1,$y.specular=new Color(1,1,1),Array.isArray(Ly.specularFactor)&&$y.specular.fromArray(Ly.specularFactor),Ly.specularGlossinessTexture!==void 0){var Iy=Ly.specularGlossinessTexture;ky.push(Ry.assignTexture($y,"glossinessMap",Iy)),ky.push(Ry.assignTexture($y,"specularMap",Iy))}return Promise.all(ky)},createMaterial:function($y){var xy=new ey($y);return xy.fog=!0,xy.color=$y.color,xy.map=$y.map===void 0?null:$y.map,xy.lightMap=null,xy.lightMapIntensity=1,xy.aoMap=$y.aoMap===void 0?null:$y.aoMap,xy.aoMapIntensity=1,xy.emissive=$y.emissive,xy.emissiveIntensity=1,xy.emissiveMap=$y.emissiveMap===void 0?null:$y.emissiveMap,xy.bumpMap=$y.bumpMap===void 0?null:$y.bumpMap,xy.bumpScale=1,xy.normalMap=$y.normalMap===void 0?null:$y.normalMap,xy.normalMapType=TangentSpaceNormalMap,$y.normalScale&&(xy.normalScale=$y.normalScale),xy.displacementMap=null,xy.displacementScale=1,xy.displacementBias=0,xy.specularMap=$y.specularMap===void 0?null:$y.specularMap,xy.specular=$y.specular,xy.glossinessMap=$y.glossinessMap===void 0?null:$y.glossinessMap,xy.glossiness=$y.glossiness,xy.alphaMap=null,xy.envMap=$y.envMap===void 0?null:$y.envMap,xy.envMapIntensity=1,xy.refractionRatio=.98,xy}}}function ry(){this.name=yn.KHR_MESH_QUANTIZATION}function _g($y,xy,Ry,Ly){Interpolant.call(this,$y,xy,Ry,Ly)}_g.prototype=Object.create(Interpolant.prototype),_g.prototype.constructor=_g,_g.prototype.copySampleValue_=function($y){for(var xy=this.resultBuffer,Ry=this.sampleValues,Ly=this.valueSize,ky=$y*Ly*3+Ly,Ey=0;Ey!==Ly;Ey++)xy[Ey]=Ry[ky+Ey];return xy},_g.prototype.beforeStart_=_g.prototype.copySampleValue_,_g.prototype.afterEnd_=_g.prototype.copySampleValue_,_g.prototype.interpolate_=function($y,xy,Ry,Ly){for(var ky=this.resultBuffer,Ey=this.sampleValues,Iy=this.valueSize,zy=Iy*2,Uy=Iy*3,Qy=Ly-xy,Gy=(Ry-xy)/Qy,Zy=Gy*Gy,Ty=Zy*Gy,Vy=$y*Uy,Yy=Vy-Uy,Jy=-2*Ty+3*Zy,Hy=Ty-Zy,i1=1-Jy,u1=Hy-Zy+Gy,p1=0;p1!==Iy;p1++){var g1=Ey[Yy+p1+Iy],v1=Ey[Yy+p1+zy]*Qy,h1=Ey[Vy+p1+Iy],l1=Ey[Vy+p1]*Qy;ky[p1]=i1*g1+u1*v1+Jy*h1+Hy*l1}return ky};function ty($y){this.parser=$y,this.name=yn.REALSEE_MATERIALS_LIGHTMAP}ty.prototype.getMaterialType=function($y){return MeshPhongMaterial},ty.prototype.extendParams=function($y,xy,Ry){if(!xy.extensions||!xy.extensions[this.name])return Promise.resolve();var Ly=[],ky=xy.extensions[this.name];return ky.lightMapTexture!==void 0&&Ly.push(Ry.assignTexture($y,"lightMap",ky.lightMapTexture)),ky.lightMapIntensity!==void 0&&($y.lightMapIntensity=ky.lightMapIntensity),Promise.all(Ly)};var ny={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},iy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},oy={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},ay={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},uy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hy={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},my={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ly={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},sy={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},cy={"image/png":RGBAFormat,"image/jpeg":RGBFormat};function fy($y,xy){return typeof $y!="string"||$y===""?"":(/^https?:\/\//i.test(xy)&&/^\//.test($y)&&(xy=xy.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test($y)||/^data:.*,.*$/i.test($y)||/^blob:.*$/i.test($y)?$y:xy+$y)}function vy($y){return $y.DefaultMaterial===void 0&&($y.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),$y.DefaultMaterial}function dy($y,xy,Ry){for(var Ly in Ry.extensions)$y[Ly]===void 0&&(xy.userData.gltfExtensions=xy.userData.gltfExtensions||{},xy.userData.gltfExtensions[Ly]=Ry.extensions[Ly])}function Ay($y,xy){xy.extras!==void 0&&(typeof xy.extras=="object"?Object.assign($y.userData,xy.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+xy.extras))}function gy($y,xy,Ry){for(var Ly=!1,ky=!1,Ey=0,Iy=xy.length;Ey<Iy;Ey++){var zy=xy[Ey];if(zy.POSITION!==void 0&&(Ly=!0),zy.NORMAL!==void 0&&(ky=!0),Ly&&ky)break}if(!Ly&&!ky)return Promise.resolve($y);for(var Uy=[],Qy=[],Ey=0,Iy=xy.length;Ey<Iy;Ey++){var zy=xy[Ey];if(Ly){var Gy=zy.POSITION!==void 0?Ry.getDependency("accessor",zy.POSITION):$y.attributes.position;Uy.push(Gy)}if(ky){var Gy=zy.NORMAL!==void 0?Ry.getDependency("accessor",zy.NORMAL):$y.attributes.normal;Qy.push(Gy)}}return Promise.all([Promise.all(Uy),Promise.all(Qy)]).then(function(Zy){var Ty=Zy[0],Vy=Zy[1];return Ly&&($y.morphAttributes.position=Ty),ky&&($y.morphAttributes.normal=Vy),$y.morphTargetsRelative=!0,$y})}function wy($y,xy){if($y.updateMorphTargets(),xy.weights!==void 0)for(var Ry=0,Ly=xy.weights.length;Ry<Ly;Ry++)$y.morphTargetInfluences[Ry]=xy.weights[Ry];if(xy.extras&&Array.isArray(xy.extras.targetNames)){var ky=xy.extras.targetNames;if($y.morphTargetInfluences.length===ky.length){$y.morphTargetDictionary={};for(var Ry=0,Ly=ky.length;Ry<Ly;Ry++)$y.morphTargetDictionary[ky[Ry]]=Ry}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Cy($y){var xy=$y.extensions&&$y.extensions[yn.KHR_DRACO_MESH_COMPRESSION],Ry;return xy?Ry="draco:"+xy.bufferView+":"+xy.indices+":"+My(xy.attributes):Ry=$y.indices+":"+My($y.attributes)+":"+$y.mode,Ry}function My($y){for(var xy="",Ry=Object.keys($y).sort(),Ly=0,ky=Ry.length;Ly<ky;Ly++)xy+=Ry[Ly]+":"+$y[Ry[Ly]]+";";return xy}function Py($y,xy,Ry){this.json=$y||{},this.extensions=xy||{},this.options=Ry||{},this.cache=new vn,this.associations=new Map,this.primitiveCache={},this.textureLoader=new TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}Py.prototype.parse=function($y,xy){var Ry=this,Ly=this.json,ky=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(Ey){var Iy={scene:Ey[0][Ly.scene||0],scenes:Ey[0],animations:Ey[1],cameras:Ey[2],asset:Ly.asset,parser:Ry,userData:{}};dy(ky,Iy,Ly),Ay(Iy,Ly),$y(Iy)}).catch(xy)},Py.prototype.markDefs=function(){for(var $y=this.json.nodes||[],xy=this.json.skins||[],Ry=this.json.meshes||[],Ly={},ky={},Ey=0,Iy=xy.length;Ey<Iy;Ey++)for(var zy=xy[Ey].joints,Uy=0,Qy=zy.length;Uy<Qy;Uy++)$y[zy[Uy]].isBone=!0;for(var Gy=0,Zy=$y.length;Gy<Zy;Gy++){var Ty=$y[Gy];Ty.mesh!==void 0&&(Ly[Ty.mesh]===void 0&&(Ly[Ty.mesh]=ky[Ty.mesh]=0),Ly[Ty.mesh]++,Ty.skin!==void 0&&(Ry[Ty.mesh].isSkinnedMesh=!0))}this.json.meshReferences=Ly,this.json.meshUses=ky},Py.prototype.getDependency=function($y,xy){var Ry=$y+":"+xy,Ly=this.cache.get(Ry);if(!Ly){switch($y){case"scene":Ly=this.loadScene(xy);break;case"node":Ly=this.loadNode(xy);break;case"mesh":Ly=this.loadMesh(xy);break;case"accessor":Ly=this.loadAccessor(xy);break;case"bufferView":Ly=this.loadBufferView(xy);break;case"buffer":Ly=this.loadBuffer(xy);break;case"material":Ly=this.loadMaterial(xy);break;case"texture":Ly=this.loadTexture(xy);break;case"skin":Ly=this.loadSkin(xy);break;case"animation":Ly=this.loadAnimation(xy);break;case"camera":Ly=this.loadCamera(xy);break;case"light":Ly=this.extensions[yn.KHR_LIGHTS_PUNCTUAL].loadLight(xy);break;default:throw new Error("Unknown type: "+$y)}this.cache.add(Ry,Ly)}return Ly},Py.prototype.getDependencies=function($y){var xy=this.cache.get($y);if(!xy){var Ry=this,Ly=this.json[$y+($y==="mesh"?"es":"s")]||[];xy=Promise.all(Ly.map(function(ky,Ey){return Ry.getDependency($y,Ey)})),this.cache.add($y,xy)}return xy},Py.prototype.loadBuffer=function($y){var xy=this.json.buffers[$y],Ry=this.fileLoader;if(xy.type&&xy.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+xy.type+" buffer type is not supported.");if(xy.uri===void 0&&$y===0)return Promise.resolve(this.extensions[yn.KHR_BINARY_GLTF].body);var Ly=this.options;return new Promise(function(ky,Ey){Ry.load(fy(xy.uri,Ly.path),ky,void 0,function(){Ey(new Error('THREE.GLTFLoader: Failed to load buffer "'+xy.uri+'".'))})})},Py.prototype.loadBufferView=function($y){var xy=this.json.bufferViews[$y];return this.getDependency("buffer",xy.buffer).then(function(Ry){var Ly=xy.byteLength||0,ky=xy.byteOffset||0;return Ry.slice(ky,ky+Ly)})},Py.prototype.loadAccessor=function($y){var xy=this,Ry=this.json,Ly=this.json.accessors[$y];if(Ly.bufferView===void 0&&Ly.sparse===void 0)return Promise.resolve(null);var ky=[];return Ly.bufferView!==void 0?ky.push(this.getDependency("bufferView",Ly.bufferView)):ky.push(null),Ly.sparse!==void 0&&(ky.push(this.getDependency("bufferView",Ly.sparse.indices.bufferView)),ky.push(this.getDependency("bufferView",Ly.sparse.values.bufferView))),Promise.all(ky).then(function(Ey){var Iy=Ey[0],zy=uy[Ly.type],Uy=iy[Ly.componentType],Qy=Uy.BYTES_PER_ELEMENT,Gy=Qy*zy,Zy=Ly.byteOffset||0,Ty=Ly.bufferView!==void 0?Ry.bufferViews[Ly.bufferView].byteStride:void 0,Vy=Ly.normalized===!0,Yy,Jy;if(Ty&&Ty!==Gy){var Hy=Math.floor(Zy/Ty),i1="InterleavedBuffer:"+Ly.bufferView+":"+Ly.componentType+":"+Hy+":"+Ly.count,u1=xy.cache.get(i1);u1||(Yy=new Uy(Iy,Hy*Ty,Ly.count*Ty/Qy),u1=new InterleavedBuffer(Yy,Ty/Qy),xy.cache.add(i1,u1)),Jy=new InterleavedBufferAttribute(u1,zy,Zy%Ty/Qy,Vy)}else Iy===null?Yy=new Uy(Ly.count*zy):Yy=new Uy(Iy,Zy,Ly.count*zy),Jy=new BufferAttribute(Yy,zy,Vy);if(Ly.sparse!==void 0){var p1=uy.SCALAR,g1=iy[Ly.sparse.indices.componentType],v1=Ly.sparse.indices.byteOffset||0,h1=Ly.sparse.values.byteOffset||0,l1=new g1(Ey[1],v1,Ly.sparse.count*p1),o1=new Uy(Ey[2],h1,Ly.sparse.count*zy);Iy!==null&&(Jy=new BufferAttribute(Jy.array.slice(),Jy.itemSize,Jy.normalized));for(var t1=0,Wy=l1.length;t1<Wy;t1++){var f1=l1[t1];if(Jy.setX(f1,o1[t1*zy]),zy>=2&&Jy.setY(f1,o1[t1*zy+1]),zy>=3&&Jy.setZ(f1,o1[t1*zy+2]),zy>=4&&Jy.setW(f1,o1[t1*zy+3]),zy>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Jy})},Py.prototype.loadTexture=function($y){var xy=this,Ry=this.json,Ly=this.options,ky=this.textureLoader,Ey=self.URL||self.webkitURL,Iy=Ry.textures[$y],zy=Iy.extensions||{},Uy;zy[yn.MSFT_TEXTURE_DDS]?Uy=Ry.images[zy[yn.MSFT_TEXTURE_DDS].source]:Uy=Ry.images[Iy.source];var Qy=Uy.uri,Gy=!1;return Uy.bufferView!==void 0&&(Qy=xy.getDependency("bufferView",Uy.bufferView).then(function(Zy){Gy=!0;var Ty=new Blob([Zy],{type:Uy.mimeType});return Qy=Ey.createObjectURL(Ty),Qy})),Promise.resolve(Qy).then(function(Zy){var Ty=Ly.manager.getHandler(Zy);return Ty||(Ty=zy[yn.MSFT_TEXTURE_DDS]?xy.extensions[yn.MSFT_TEXTURE_DDS].ddsLoader:ky),new Promise(function(Vy,Yy){Ty.load(fy(Zy,Ly.path),Vy,void 0,Yy)})}).then(function(Zy){Gy===!0&&Ey.revokeObjectURL(Qy),Zy.flipY=!1,Iy.name&&(Zy.name=Iy.name),Uy.mimeType in cy&&(Zy.format=cy[Uy.mimeType]);var Ty=Ry.samplers||{},Vy=Ty[Iy.sampler]||{};return Zy.magFilter=oy[Vy.magFilter]||LinearFilter,Zy.minFilter=oy[Vy.minFilter]||LinearMipmapLinearFilter,Zy.wrapS=ay[Vy.wrapS]||RepeatWrapping,Zy.wrapT=ay[Vy.wrapT]||RepeatWrapping,xy.associations.set(Zy,{type:"textures",index:$y}),Zy})},Py.prototype.assignTexture=function($y,xy,Ry){var Ly=this;return this.getDependency("texture",Ry.index).then(function(ky){if(!ky.isCompressedTexture)switch(xy){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":ky.format=RGBFormat;break}if(Ry.texCoord!==void 0&&Ry.texCoord!=0&&!(xy==="aoMap"&&Ry.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Ry.texCoord+" for texture "+xy+" not yet supported."),Ly.extensions[yn.KHR_TEXTURE_TRANSFORM]){var Ey=Ry.extensions!==void 0?Ry.extensions[yn.KHR_TEXTURE_TRANSFORM]:void 0;if(Ey){var Iy=Ly.associations.get(ky);ky=Ly.extensions[yn.KHR_TEXTURE_TRANSFORM].extendTexture(ky,Ey),Ly.associations.set(ky,Iy)}}$y[xy]=ky})},Py.prototype.assignFinalMaterial=function($y){var xy=$y.geometry,Ry=$y.material,Ly=xy.attributes.tangent!==void 0,ky=xy.attributes.color!==void 0,Ey=xy.attributes.normal===void 0,Iy=$y.isSkinnedMesh===!0,zy=Object.keys(xy.morphAttributes).length>0,Uy=zy&&xy.morphAttributes.normal!==void 0;if($y.isPoints){var Qy="PointsMaterial:"+Ry.uuid,Gy=this.cache.get(Qy);Gy||(Gy=new PointsMaterial,Material.prototype.copy.call(Gy,Ry),Gy.color.copy(Ry.color),Gy.map=Ry.map,Gy.sizeAttenuation=!1,this.cache.add(Qy,Gy)),Ry=Gy}else if($y.isLine){var Qy="LineBasicMaterial:"+Ry.uuid,Zy=this.cache.get(Qy);Zy||(Zy=new LineBasicMaterial,Material.prototype.copy.call(Zy,Ry),Zy.color.copy(Ry.color),this.cache.add(Qy,Zy)),Ry=Zy}if(Ly||ky||Ey||Iy||zy){var Qy="ClonedMaterial:"+Ry.uuid+":";Ry.isGLTFSpecularGlossinessMaterial&&(Qy+="specular-glossiness:"),Iy&&(Qy+="skinning:"),Ly&&(Qy+="vertex-tangents:"),ky&&(Qy+="vertex-colors:"),Ey&&(Qy+="flat-shading:"),zy&&(Qy+="morph-targets:"),Uy&&(Qy+="morph-normals:");var Ty=this.cache.get(Qy);Ty||(Ty=Ry.clone(),Iy&&(Ty.skinning=!0),Ly&&(Ty.vertexTangents=!0),ky&&(Ty.vertexColors=!0),Ey&&(Ty.flatShading=!0),zy&&(Ty.morphTargets=!0),Uy&&(Ty.morphNormals=!0),this.cache.add(Qy,Ty),this.associations.set(Ty,this.associations.get(Ry))),Ry=Ty}Ry.aoMap&&xy.attributes.uv2===void 0&&xy.attributes.uv!==void 0&&xy.setAttribute("uv2",xy.attributes.uv),Ry.normalScale&&!Ly&&(Ry.normalScale.y=-Ry.normalScale.y),Ry.clearcoatNormalScale&&!Ly&&(Ry.clearcoatNormalScale.y=-Ry.clearcoatNormalScale.y),$y.material=Ry},Py.prototype.loadMaterial=function($y){var xy=this,Ry=this.json,Ly=this.extensions,ky=Ry.materials[$y],Ey,Iy={},zy=ky.extensions||{},Uy=[];if(zy[yn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var Qy=Ly[yn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Ey=Qy.getMaterialType(),Uy.push(Qy.extendParams(Iy,ky,xy))}else if(zy[yn.KHR_MATERIALS_UNLIT]){var Gy=Ly[yn.KHR_MATERIALS_UNLIT];Ey=Gy.getMaterialType(),Uy.push(Gy.extendParams(Iy,ky,xy))}else{Ey=MeshStandardMaterial;var Zy=ky.pbrMetallicRoughness||{};if(Iy.color=new Color(1,1,1),Iy.opacity=1,Array.isArray(Zy.baseColorFactor)){var Ty=Zy.baseColorFactor;Iy.color.fromArray(Ty),Iy.opacity=Ty[3]}Zy.baseColorTexture!==void 0&&Uy.push(xy.assignTexture(Iy,"map",Zy.baseColorTexture)),Iy.metalness=Zy.metallicFactor!==void 0?Zy.metallicFactor:1,Iy.roughness=Zy.roughnessFactor!==void 0?Zy.roughnessFactor:1,Zy.metallicRoughnessTexture!==void 0&&(Uy.push(xy.assignTexture(Iy,"metalnessMap",Zy.metallicRoughnessTexture)),Uy.push(xy.assignTexture(Iy,"roughnessMap",Zy.metallicRoughnessTexture)))}ky.doubleSided===!0&&(Iy.side=DoubleSide);var Vy=ky.alphaMode||sy.OPAQUE;if(Vy===sy.BLEND?(Iy.transparent=!0,Iy.depthWrite=!1):(Iy.transparent=!1,Vy===sy.MASK&&(Iy.alphaTest=ky.alphaCutoff!==void 0?ky.alphaCutoff:.5)),ky.normalTexture!==void 0&&Ey!==MeshBasicMaterial&&(Uy.push(xy.assignTexture(Iy,"normalMap",ky.normalTexture)),Iy.normalScale=new Vector2(1,1),ky.normalTexture.scale!==void 0&&Iy.normalScale.set(ky.normalTexture.scale,ky.normalTexture.scale)),ky.occlusionTexture!==void 0&&Ey!==MeshBasicMaterial&&(Uy.push(xy.assignTexture(Iy,"aoMap",ky.occlusionTexture)),ky.occlusionTexture.strength!==void 0&&(Iy.aoMapIntensity=ky.occlusionTexture.strength)),ky.emissiveFactor!==void 0&&Ey!==MeshBasicMaterial&&(Iy.emissive=new Color().fromArray(ky.emissiveFactor)),ky.emissiveTexture!==void 0&&Ey!==MeshBasicMaterial&&Uy.push(xy.assignTexture(Iy,"emissiveMap",ky.emissiveTexture)),zy[yn.KHR_MATERIALS_CLEARCOAT]){var Yy=Ly[yn.KHR_MATERIALS_CLEARCOAT];Ey=Yy.getMaterialType(),Uy.push(Yy.extendParams(Iy,{extensions:zy},xy))}if(zy[yn.KHR_MATERIALS_TRANSMISSION]){var Yy=Ly[yn.KHR_MATERIALS_TRANSMISSION];Ey=Yy.getMaterialType(),Uy.push(Yy.extendParams(Iy,{extensions:zy},xy))}if(zy[yn.REALSEE_MATERIALS_LIGHTMAP]){var Jy=Ly[yn.REALSEE_MATERIALS_LIGHTMAP];Ey=Jy.getMaterialType(),Uy.push(Jy.extendParams(Iy,{extensions:zy},xy))}return Promise.all(Uy).then(function(){var Hy;return Ey===ey?Hy=Ly[yn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Iy):Hy=new Ey(Iy),ky.name&&(Hy.name=ky.name),Hy.map&&(Hy.map.encoding=sRGBEncoding),Hy.emissiveMap&&(Hy.emissiveMap.encoding=sRGBEncoding),Ay(Hy,ky),xy.associations.set(Hy,{type:"materials",index:$y}),ky.extensions&&dy(Ly,Hy,ky),Hy})};function Dy($y,xy,Ry){var Ly=xy.attributes,ky=new Box3;if(Ly.POSITION!==void 0){var Ey=Ry.json.accessors[Ly.POSITION],Iy=Ey.min,zy=Ey.max;if(Iy!==void 0&&zy!==void 0)ky.set(new Vector3(Iy[0],Iy[1],Iy[2]),new Vector3(zy[0],zy[1],zy[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var Uy=xy.targets;if(Uy!==void 0){for(var Qy=new Vector3,Gy=new Vector3,Zy=0,Ty=Uy.length;Zy<Ty;Zy++){var Vy=Uy[Zy];if(Vy.POSITION!==void 0){var Ey=Ry.json.accessors[Vy.POSITION],Iy=Ey.min,zy=Ey.max;Iy!==void 0&&zy!==void 0?(Gy.setX(Math.max(Math.abs(Iy[0]),Math.abs(zy[0]))),Gy.setY(Math.max(Math.abs(Iy[1]),Math.abs(zy[1]))),Gy.setZ(Math.max(Math.abs(Iy[2]),Math.abs(zy[2]))),Qy.max(Gy)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ky.expandByVector(Qy)}$y.boundingBox=ky;var Yy=new Sphere;ky.getCenter(Yy.center),Yy.radius=ky.min.distanceTo(ky.max)/2,$y.boundingSphere=Yy}function qy($y,xy,Ry){var Ly=xy.attributes,ky=[];function Ey(Qy,Gy){return Ry.getDependency("accessor",Qy).then(function(Zy){$y.setAttribute(Gy,Zy)})}for(var Iy in Ly){var zy=hy[Iy]||Iy.toLowerCase();zy in $y.attributes||ky.push(Ey(Ly[Iy],zy))}if(xy.indices!==void 0&&!$y.index){var Uy=Ry.getDependency("accessor",xy.indices).then(function(Qy){$y.setIndex(Qy)});ky.push(Uy)}return Ay($y,xy),Dy($y,xy,Ry),Promise.all(ky).then(function(){return xy.targets!==void 0?gy($y,xy.targets,Ry):$y})}function Xy($y,xy){var Ry=$y.getIndex();if(Ry===null){var Ly=[],ky=$y.getAttribute("position");if(ky!==void 0){for(var Ey=0;Ey<ky.count;Ey++)Ly.push(Ey);$y.setIndex(Ly),Ry=$y.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),$y}var Iy=Ry.count-2,zy=[];if(xy===TriangleFanDrawMode)for(var Ey=1;Ey<=Iy;Ey++)zy.push(Ry.getX(0)),zy.push(Ry.getX(Ey)),zy.push(Ry.getX(Ey+1));else for(var Ey=0;Ey<Iy;Ey++)Ey%2===0?(zy.push(Ry.getX(Ey)),zy.push(Ry.getX(Ey+1)),zy.push(Ry.getX(Ey+2))):(zy.push(Ry.getX(Ey+2)),zy.push(Ry.getX(Ey+1)),zy.push(Ry.getX(Ey)));zy.length/3!==Iy&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var Uy=$y.clone();return Uy.setIndex(zy),Uy}return Py.prototype.loadGeometries=function($y){var xy=this,Ry=this.extensions,Ly=this.primitiveCache;function ky(Ty){return Ry[yn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Ty,xy).then(function(Vy){return qy(Vy,Ty,xy)})}for(var Ey=[],Iy=0,zy=$y.length;Iy<zy;Iy++){var Uy=$y[Iy],Qy=Cy(Uy),Gy=Ly[Qy];if(Gy)Ey.push(Gy.promise);else{var Zy;Uy.extensions&&Uy.extensions[yn.KHR_DRACO_MESH_COMPRESSION]?Zy=ky(Uy):Zy=qy(new BufferGeometry,Uy,xy),Ly[Qy]={primitive:Uy,promise:Zy},Ey.push(Zy)}}return Promise.all(Ey)},Py.prototype.loadMesh=function($y){for(var xy=this,Ry=this.json,Ly=Ry.meshes[$y],ky=Ly.primitives,Ey=[],Iy=0,zy=ky.length;Iy<zy;Iy++){var Uy=ky[Iy].material===void 0?vy(this.cache):this.getDependency("material",ky[Iy].material);Ey.push(Uy)}return Ey.push(xy.loadGeometries(ky)),Promise.all(Ey).then(function(Qy){for(var Gy=Qy.slice(0,Qy.length-1),Zy=Qy[Qy.length-1],Ty=[],Vy=0,Yy=Zy.length;Vy<Yy;Vy++){var Jy=Zy[Vy],Hy=ky[Vy],i1,u1=Gy[Vy];if(Hy.mode===ny.TRIANGLES||Hy.mode===ny.TRIANGLE_STRIP||Hy.mode===ny.TRIANGLE_FAN||Hy.mode===void 0)i1=Ly.isSkinnedMesh===!0?new SkinnedMesh(Jy,u1):new Mesh(Jy,u1),i1.isSkinnedMesh===!0&&!i1.geometry.attributes.skinWeight.normalized&&i1.normalizeSkinWeights(),Hy.mode===ny.TRIANGLE_STRIP?i1.geometry=Xy(i1.geometry,TriangleStripDrawMode):Hy.mode===ny.TRIANGLE_FAN&&(i1.geometry=Xy(i1.geometry,TriangleFanDrawMode));else if(Hy.mode===ny.LINES)i1=new LineSegments(Jy,u1);else if(Hy.mode===ny.LINE_STRIP)i1=new Line(Jy,u1);else if(Hy.mode===ny.LINE_LOOP)i1=new LineLoop(Jy,u1);else if(Hy.mode===ny.POINTS)i1=new Points(Jy,u1);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Hy.mode);Object.keys(i1.geometry.morphAttributes).length>0&&wy(i1,Ly),i1.name=Ly.name||"mesh_"+$y,Zy.length>1&&(i1.name+="_"+Vy),Ay(i1,Ly),xy.assignFinalMaterial(i1),Ty.push(i1)}if(Ty.length===1)return Ty[0];for(var p1=new Group$1,Vy=0,Yy=Ty.length;Vy<Yy;Vy++)p1.add(Ty[Vy]);return p1})},Py.prototype.loadCamera=function($y){var xy,Ry=this.json.cameras[$y],Ly=Ry[Ry.type];if(!Ly){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Ry.type==="perspective"?xy=new PerspectiveCamera(MathUtils.radToDeg(Ly.yfov),Ly.aspectRatio||1,Ly.znear||1,Ly.zfar||2e6):Ry.type==="orthographic"&&(xy=new OrthographicCamera(-Ly.xmag,Ly.xmag,Ly.ymag,-Ly.ymag,Ly.znear,Ly.zfar)),Ry.name&&(xy.name=Ry.name),Ay(xy,Ry),Promise.resolve(xy)},Py.prototype.loadSkin=function($y){var xy=this.json.skins[$y],Ry={joints:xy.joints};return xy.inverseBindMatrices===void 0?Promise.resolve(Ry):this.getDependency("accessor",xy.inverseBindMatrices).then(function(Ly){return Ry.inverseBindMatrices=Ly,Ry})},Py.prototype.loadAnimation=function($y){for(var xy=this.json,Ry=xy.animations[$y],Ly=[],ky=[],Ey=[],Iy=[],zy=[],Uy=0,Qy=Ry.channels.length;Uy<Qy;Uy++){var Gy=Ry.channels[Uy],Zy=Ry.samplers[Gy.sampler],Ty=Gy.target,Vy=Ty.node!==void 0?Ty.node:Ty.id,Yy=Ry.parameters!==void 0?Ry.parameters[Zy.input]:Zy.input,Jy=Ry.parameters!==void 0?Ry.parameters[Zy.output]:Zy.output;Ly.push(this.getDependency("node",Vy)),ky.push(this.getDependency("accessor",Yy)),Ey.push(this.getDependency("accessor",Jy)),Iy.push(Zy),zy.push(Ty)}return Promise.all([Promise.all(Ly),Promise.all(ky),Promise.all(Ey),Promise.all(Iy),Promise.all(zy)]).then(function(Hy){for(var i1=Hy[0],u1=Hy[1],p1=Hy[2],g1=Hy[3],v1=Hy[4],h1=[],l1=0,o1=i1.length;l1<o1;l1++){var t1=i1[l1],Wy=u1[l1],f1=p1[l1],m1=g1[l1],w1=v1[l1];if(t1!==void 0){t1.updateMatrix(),t1.matrixAutoUpdate=!0;var c1;switch(my[w1.path]){case my.weights:c1=NumberKeyframeTrack;break;case my.rotation:c1=QuaternionKeyframeTrack;break;case my.position:case my.scale:default:c1=VectorKeyframeTrack;break}var M1=t1.name?t1.name:t1.uuid,L1=m1.interpolation!==void 0?ly[m1.interpolation]:InterpolateLinear,B1=[];my[w1.path]===my.weights?t1.traverse(function(Y1){Y1.isMesh===!0&&Y1.morphTargetInfluences&&B1.push(Y1.name?Y1.name:Y1.uuid)}):B1.push(M1);var D1=f1.array;if(f1.normalized){var O1;if(D1.constructor===Int8Array)O1=1/127;else if(D1.constructor===Uint8Array)O1=1/255;else if(D1.constructor==Int16Array)O1=1/32767;else if(D1.constructor===Uint16Array)O1=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var j1=new Float32Array(D1.length),k1=0,q1=D1.length;k1<q1;k1++)j1[k1]=D1[k1]*O1;D1=j1}for(var k1=0,q1=B1.length;k1<q1;k1++){var _b=new c1(B1[k1]+"."+my[w1.path],Wy.array,D1,L1);m1.interpolation==="CUBICSPLINE"&&(_b.createInterpolant=function(r1){return new _g(this.times,this.values,this.getValueSize()/3,r1)},_b.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h1.push(_b)}}}var Q1=Ry.name?Ry.name:"animation_"+$y;return new AnimationClip(Q1,void 0,h1)})},Py.prototype.loadNode=function($y){var xy=this.json,Ry=this.extensions,Ly=this,ky=xy.meshReferences,Ey=xy.meshUses,Iy=xy.nodes[$y];return function(){var zy=[];return Iy.mesh!==void 0&&zy.push(Ly.getDependency("mesh",Iy.mesh).then(function(Uy){var Qy;if(ky[Iy.mesh]>1){var Gy=Ey[Iy.mesh]++;Qy=Uy.clone(),Qy.name+="_instance_"+Gy}else Qy=Uy;return Iy.weights!==void 0&&Qy.traverse(function(Zy){if(Zy.isMesh)for(var Ty=0,Vy=Iy.weights.length;Ty<Vy;Ty++)Zy.morphTargetInfluences[Ty]=Iy.weights[Ty]}),Qy})),Iy.camera!==void 0&&zy.push(Ly.getDependency("camera",Iy.camera)),Iy.extensions&&Iy.extensions[yn.KHR_LIGHTS_PUNCTUAL]&&Iy.extensions[yn.KHR_LIGHTS_PUNCTUAL].light!==void 0&&zy.push(Ly.getDependency("light",Iy.extensions[yn.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(zy)}().then(function(zy){var Uy;if(Iy.isBone===!0?Uy=new Bone:zy.length>1?Uy=new Group$1:zy.length===1?Uy=zy[0]:Uy=new Object3D,Uy!==zy[0])for(var Qy=0,Gy=zy.length;Qy<Gy;Qy++)Uy.add(zy[Qy]);if(Iy.name&&(Uy.userData.name=Iy.name,Uy.name=PropertyBinding.sanitizeNodeName(Iy.name)),Ay(Uy,Iy),Iy.extensions&&dy(Ry,Uy,Iy),Iy.matrix!==void 0){var Zy=new Matrix4;Zy.fromArray(Iy.matrix),Uy.applyMatrix4(Zy)}else Iy.translation!==void 0&&Uy.position.fromArray(Iy.translation),Iy.rotation!==void 0&&Uy.quaternion.fromArray(Iy.rotation),Iy.scale!==void 0&&Uy.scale.fromArray(Iy.scale);return Ly.associations.set(Uy,{type:"nodes",index:$y}),Uy})},Py.prototype.loadScene=function(){function $y(xy,Ry,Ly,ky){var Ey=Ly.nodes[xy];return ky.getDependency("node",xy).then(function(Iy){if(Ey.skin===void 0)return Iy;var zy;return ky.getDependency("skin",Ey.skin).then(function(Uy){zy=Uy;for(var Qy=[],Gy=0,Zy=zy.joints.length;Gy<Zy;Gy++)Qy.push(ky.getDependency("node",zy.joints[Gy]));return Promise.all(Qy)}).then(function(Uy){return Iy.traverse(function(Qy){if(Qy.isMesh){for(var Gy=[],Zy=[],Ty=0,Vy=Uy.length;Ty<Vy;Ty++){var Yy=Uy[Ty];if(Yy){Gy.push(Yy);var Jy=new Matrix4;zy.inverseBindMatrices!==void 0&&Jy.fromArray(zy.inverseBindMatrices.array,Ty*16),Zy.push(Jy)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',zy.joints[Ty])}Qy.bind(new Skeleton(Gy,Zy),Qy.matrixWorld)}}),Iy})}).then(function(Iy){Ry.add(Iy);var zy=[];if(Ey.children)for(var Uy=Ey.children,Qy=0,Gy=Uy.length;Qy<Gy;Qy++){var Zy=Uy[Qy];zy.push($y(Zy,Iy,Ly,ky))}return Promise.all(zy)})}return function(xy){var Ry=this.json,Ly=this.extensions,ky=this.json.scenes[xy],Ey=this,Iy=new Group$1;ky.name&&(Iy.name=ky.name),Ay(Iy,ky),ky.extensions&&dy(Ly,Iy,ky);for(var zy=ky.nodes||[],Uy=[],Qy=0,Gy=zy.length;Qy<Gy;Qy++)Uy.push($y(zy[Qy],Iy,Ry,Ey));return Promise.all(Uy).then(function(){return Iy})}}(),cr}(),k$e=function(cr){Loader.call(this,cr),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};k$e.prototype=Object.assign(Object.create(Loader.prototype),{constructor:k$e,setDecoderPath:function(cr){return this.decoderPath=cr,this},setDecoderConfig:function(cr){return this.decoderConfig=cr,this},setWorkerLimit:function(cr){return this.workerLimit=cr,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(cr,vn,yn,Rn){var Bn=new FileLoader(this.manager);Bn.setPath(this.path),Bn.setResponseType("arraybuffer"),this.crossOrigin==="use-credentials"&&Bn.setWithCredentials(!0),Bn.load(cr,Co=>{var Po={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(Co,Po).then(vn).catch(Rn)},yn,Rn)},decodeDracoFile:function(cr,vn,yn,Rn){var Bn={attributeIDs:yn||this.defaultAttributeIDs,attributeTypes:Rn||this.defaultAttributeTypes,useUniqueIDs:!!yn};this.decodeGeometry(cr,Bn).then(vn)},decodeGeometry:function(cr,vn){for(var yn in vn.attributeTypes){var Rn=vn.attributeTypes[yn];Rn.BYTES_PER_ELEMENT!==void 0&&(vn.attributeTypes[yn]=Rn.name)}var Bn=JSON.stringify(vn);if(k$e.taskCache.has(cr)){var Co=k$e.taskCache.get(cr);if(Co.key===Bn)return Co.promise;if(cr.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var Po,To=this.workerNextTaskID++,Io=cr.byteLength,$l=this._getWorker(To,Io).then(Wl=>(Po=Wl,new Promise((Xl,Yl)=>{Po._callbacks[To]={resolve:Xl,reject:Yl},Po.postMessage({type:"decode",id:To,taskConfig:vn,buffer:cr},[cr])}))).then(Wl=>this._createGeometry(Wl.geometry));return $l.catch(()=>!0).then(()=>{Po&&To&&this._releaseTask(Po,To)}),k$e.taskCache.set(cr,{key:Bn,promise:$l}),$l},_createGeometry:function(cr){var vn=new BufferGeometry;cr.index&&vn.setIndex(new BufferAttribute(cr.index.array,1));for(var yn=0;yn<cr.attributes.length;yn++){var Rn=cr.attributes[yn],Bn=Rn.name,Co=Rn.array,Po=Rn.itemSize;vn.setAttribute(Bn,new BufferAttribute(Co,Po))}return vn},_loadLibrary:function(cr,vn){var yn=new FileLoader(this.manager);return yn.setPath(this.decoderPath),yn.setResponseType(vn),new Promise((Rn,Bn)=>{yn.load(cr,Rn,void 0,Bn)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var cr=typeof WebAssembly!="object"||this.decoderConfig.type==="js",vn=[];return cr?vn.push(this._loadLibrary("draco_decoder.js","text")):(vn.push(this._loadLibrary("draco_wasm_wrapper.js","text")),vn.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(vn).then(yn=>{var Rn=yn[0];cr||(this.decoderConfig.wasmBinary=yn[1]);var Bn=k$e.DRACOWorker.toString(),Co=["/* draco decoder */",Rn,"","/* worker */",Bn.substring(Bn.indexOf("{")+1,Bn.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Co]))}),this.decoderPending},_getWorker:function(cr,vn){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var yn=new Worker(this.workerSourceURL);yn._callbacks={},yn._taskCosts={},yn._taskLoad=0,yn.postMessage({type:"init",decoderConfig:this.decoderConfig}),yn.onmessage=function(Bn){var Co=Bn.data;switch(Co.type){case"decode":yn._callbacks[Co.id].resolve(Co);break;case"error":yn._callbacks[Co.id].reject(Co);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Co.type+'"')}},this.workerPool.push(yn)}else this.workerPool.sort(function(Rn,Bn){return Rn._taskLoad>Bn._taskLoad?-1:1});var yn=this.workerPool[this.workerPool.length-1];return yn._taskCosts[cr]=vn,yn._taskLoad+=vn,yn})},_releaseTask:function(cr,vn){cr._taskLoad-=cr._taskCosts[vn],delete cr._callbacks[vn],delete cr._taskCosts[vn]},debug:function(){console.log("Task load: ",this.workerPool.map(cr=>cr._taskLoad))},dispose:function(){for(var cr=0;cr<this.workerPool.length;++cr)this.workerPool[cr].terminate();return this.workerPool.length=0,this}});k$e.DRACOWorker=function(){var cr,vn;onmessage=function(Bn){var Co=Bn.data;switch(Co.type){case"init":cr=Co.decoderConfig,vn=new Promise(function(Io){cr.onModuleLoaded=function($l){Io({draco:$l})},DracoDecoderModule(cr)});break;case"decode":var Po=Co.buffer,To=Co.taskConfig;vn.then(Io=>{var $l=Io.draco,Wl=new $l.Decoder,Xl=new $l.DecoderBuffer;Xl.Init(new Int8Array(Po),Po.byteLength);try{var Yl=yn($l,Wl,Xl,To),Zl=Yl.attributes.map(ey=>ey.array.buffer);Yl.index&&Zl.push(Yl.index.array.buffer),self.postMessage({type:"decode",id:Co.id,geometry:Yl},Zl)}catch(ey){console.error(ey),self.postMessage({type:"error",id:Co.id,error:ey.message})}finally{$l.destroy(Xl),$l.destroy(Wl)}});break}};function yn(Bn,Co,Po,To){var Io=To.attributeIDs,$l=To.attributeTypes,Wl,Xl,Yl=Co.GetEncodedGeometryType(Po);if(Yl===Bn.TRIANGULAR_MESH)Wl=new Bn.Mesh,Xl=Co.DecodeBufferToMesh(Po,Wl);else if(Yl===Bn.POINT_CLOUD)Wl=new Bn.PointCloud,Xl=Co.DecodeBufferToPointCloud(Po,Wl);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Xl.ok()||Wl.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Xl.error_msg());var Zl={index:null,attributes:[]};for(var ey in Io){var Rm=self[$l[ey]],ry,_g;if(To.useUniqueIDs)_g=Io[ey],ry=Co.GetAttributeByUniqueId(Wl,_g);else{if(_g=Co.GetAttributeId(Wl,Bn[Io[ey]]),_g===-1)continue;ry=Co.GetAttribute(Wl,_g)}Zl.attributes.push(Rn(Bn,Co,Wl,ey,Rm,ry))}if(Yl===Bn.TRIANGULAR_MESH){for(var ty=Wl.num_faces(),ny=ty*3,iy=new Uint32Array(ny),oy=new Bn.DracoInt32Array,ay=0;ay<ty;++ay){Co.GetFaceFromMesh(Wl,ay,oy);for(var uy=0;uy<3;++uy)iy[ay*3+uy]=oy.GetValue(uy)}Zl.index={array:iy,itemSize:1},Bn.destroy(oy)}return Bn.destroy(Wl),Zl}function Rn(Bn,Co,Po,To,Io,$l){var Wl=$l.num_components(),Xl=Po.num_points(),Yl=Xl*Wl,Zl,ey;switch(Io){case Float32Array:Zl=new Bn.DracoFloat32Array,Co.GetAttributeFloatForAllPoints(Po,$l,Zl),ey=new Float32Array(Yl);break;case Int8Array:Zl=new Bn.DracoInt8Array,Co.GetAttributeInt8ForAllPoints(Po,$l,Zl),ey=new Int8Array(Yl);break;case Int16Array:Zl=new Bn.DracoInt16Array,Co.GetAttributeInt16ForAllPoints(Po,$l,Zl),ey=new Int16Array(Yl);break;case Int32Array:Zl=new Bn.DracoInt32Array,Co.GetAttributeInt32ForAllPoints(Po,$l,Zl),ey=new Int32Array(Yl);break;case Uint8Array:Zl=new Bn.DracoUInt8Array,Co.GetAttributeUInt8ForAllPoints(Po,$l,Zl),ey=new Uint8Array(Yl);break;case Uint16Array:Zl=new Bn.DracoUInt16Array,Co.GetAttributeUInt16ForAllPoints(Po,$l,Zl),ey=new Uint16Array(Yl);break;case Uint32Array:Zl=new Bn.DracoUInt32Array,Co.GetAttributeUInt32ForAllPoints(Po,$l,Zl),ey=new Uint32Array(Yl);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var Rm=0;Rm<Yl;Rm++)ey[Rm]=Zl.GetValue(Rm);return Bn.destroy(Zl),{name:To,array:ey,itemSize:Wl}}};k$e.taskCache=new WeakMap;k$e.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")};k$e.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")};k$e.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")};k$e.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var Ne$2=function(cr){CompressedTextureLoader.call(this,cr)};Ne$2.prototype=Object.assign(Object.create(CompressedTextureLoader.prototype),{constructor:Ne$2,parse:function(cr,vn){var yn={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},Rn=542327876,Bn=131072,Co=512,Po=1024,To=2048,Io=4096,$l=8192,Wl=16384,Xl=32768,Yl=4;function Zl(Uy){return Uy.charCodeAt(0)+(Uy.charCodeAt(1)<<8)+(Uy.charCodeAt(2)<<16)+(Uy.charCodeAt(3)<<24)}function ey(Uy){return String.fromCharCode(Uy&255,Uy>>8&255,Uy>>16&255,Uy>>24&255)}function Rm(Uy,Qy,Gy,Zy){for(var Ty=Gy*Zy*4,Vy=new Uint8Array(Uy,Qy,Ty),Yy=new Uint8Array(Ty),Jy=0,Hy=0,i1=0;i1<Zy;i1++)for(var u1=0;u1<Gy;u1++){var p1=Vy[Hy];Hy++;var g1=Vy[Hy];Hy++;var v1=Vy[Hy];Hy++;var h1=Vy[Hy];Hy++,Yy[Jy]=v1,Jy++,Yy[Jy]=g1,Jy++,Yy[Jy]=p1,Jy++,Yy[Jy]=h1,Jy++}return Yy}var ry=Zl("DXT1"),_g=Zl("DXT3"),ty=Zl("DXT5"),ny=Zl("ETC1"),iy=31,oy=0,ay=1,uy=2,hy=3,my=4,ly=7,sy=20,cy=21,fy=22,vy=23,dy=24,Ay=25,gy=26,wy=28,Cy=new Int32Array(cr,0,iy);if(Cy[oy]!==Rn)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),yn;if(!Cy[sy]&Yl)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),yn;var My,Py=Cy[cy],Dy=!1;switch(Py){case ry:My=8,yn.format=RGB_S3TC_DXT1_Format;break;case _g:My=16,yn.format=RGBA_S3TC_DXT3_Format;break;case ty:My=16,yn.format=RGBA_S3TC_DXT5_Format;break;case ny:My=8,yn.format=RGB_ETC1_Format;break;default:if(Cy[fy]===32&&Cy[vy]&16711680&&Cy[dy]&65280&&Cy[Ay]&255&&Cy[gy]&4278190080)Dy=!0,My=64,yn.format=RGBAFormat;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",ey(Py)),yn}yn.mipmapCount=1,Cy[uy]&Bn&&vn!==!1&&(yn.mipmapCount=Math.max(1,Cy[ly]));var qy=Cy[wy];if(yn.isCubemap=!!(qy&Co),yn.isCubemap&&(!(qy&Po)||!(qy&To)||!(qy&Io)||!(qy&$l)||!(qy&Wl)||!(qy&Xl)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),yn;yn.width=Cy[my],yn.height=Cy[hy];for(var Xy=Cy[ay]+4,$y=yn.isCubemap?6:1,xy=0;xy<$y;xy++)for(var Ry=yn.width,Ly=yn.height,ky=0;ky<yn.mipmapCount;ky++){if(Dy)var Iy=Rm(cr,Xy,Ry,Ly),Ey=Iy.length;else var Ey=Math.max(4,Ry)/4*Math.max(4,Ly)/4*My,Iy=new Uint8Array(cr,Xy,Ey);var zy={data:Iy,width:Ry,height:Ly};yn.mipmaps.push(zy),Xy+=Ey,Ry=Math.max(Ry>>1,1),Ly=Math.max(Ly>>1,1)}return yn}});var Qe$1=function(cr){rr(vn,cr);function vn(yn){var Rn=cr.call(this)||this;return Rn.needsRender=!0,yn&&yn.children.length&&Rn.add.apply(Rn,yn.children),Rn.mixer=new AnimationMixer(Rn),Rn}return vn.prototype.clone=function(){var yn=cr.prototype.clone.call(this,!0),Rn=new AnimationMixer(yn);return yn.mixer=Rn,yn.needsRender=!0,yn},vn}(Group$1),Jr="https://vr-public.realsee-cdn.cn/release/static/image/release/five/resource/draco/1.5.6/",$r=function(cr){rr(vn,cr);function vn(yn){var Rn=cr.call(this,yn)||this;return Rn.ddsLoader=new Ne$2(yn),Rn.dracoLoader=new k$e(yn),Rn.dracoLoader.setDecoderPath(Jr),Rn}return Object.defineProperty(vn,"version",{get:function(){return"6.4.0-alpha.36"},enumerable:!1,configurable:!0}),vn.prototype.load=function(yn,Rn,Bn,Co){return cr.prototype.load.call(this,yn,Rn,Bn,Co)},vn.prototype.parse=function(yn,Rn,Bn,Co){return cr.prototype.parse.call(this,yn,Rn,function(Po){var To=new Qe$1(Po.scene),Io=Po.scenes.map(function($l){return $l===Po.scene?To:new Qe$1($l)});Bn(Object.assign(Po,{scene:To,scenes:Io}))},Co)},vn}(qr);const a$g=new $r;function f$u(cr){return new Promise((vn,yn)=>{function Rn(Co){vn(Co)}function Bn(Co){yn(Co)}a$g.load(cr,Rn,void 0,Bn)})}function i$c(cr){if(!cr||cr.length<3)return;const vn=cr.map(t$j),yn=vn[1].clone().sub(vn[0]),Rn=vn[2].clone().sub(vn[1]);return yn.cross(Rn)}function J$c(cr){Qt(cr,"svelte-xuejcm",".line.svelte-xuejcm{position:absolute;pointer-events:none}.line.vertical.svelte-xuejcm{transform:rotate(-90deg) translate3d(0.03125rem, 0, 0.625rem);transform-origin:0 0}.line.horizontal.svelte-xuejcm{transform:translate3d(0, -0.03125rem, 0.625rem)}.straight-line.svelte-xuejcm{display:block;width:100%;height:100%;overflow:visible}")}function L$c(cr){let vn,yn,Rn,Bn,Co,Po,To,Io=cr[3]&&B$g(cr);return{c(){vn=K$g("div"),yn=Mt("svg"),Rn=Mt("defs"),Bn=Mt("linearGradient"),Co=Mt("stop"),Po=Mt("stop"),Io&&Io.c(),te$4(Co,"offset","25%"),te$4(Co,"stop-color",cr[5]),te$4(Co,"stop-opacity","1"),te$4(Po,"offset","100%"),te$4(Po,"stop-color",cr[5]),te$4(Po,"stop-opacity","0.5"),te$4(Bn,"x1",.5),te$4(Bn,"y1",.5),te$4(Bn,"x2",cr[8]),te$4(Bn,"y2",.5),te$4(Bn,"id",cr[10]),te$4(Bn,"gradientUnits","userSpaceOnUse"),te$4(yn,"class","straight-line svelte-xuejcm"),te$4(yn,"viewBox",To="0 0 "+cr[8]+" "+cr[7]),te$4(yn,"preserveAspectRatio","none"),te$4(vn,"class","line svelte-xuejcm"),re$2(vn,"vertical",cr[9]),re$2(vn,"horizontal",!cr[9]),ne$5(vn,"width",cr[8]+"px"),ne$5(vn,"height",cr[7]+"px")},m($l,Wl){Nt($l,vn,Wl),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Bn,Co),pt$1(Bn,Po),Io&&Io.m(yn,null)},p($l,Wl){Wl&32&&te$4(Co,"stop-color",$l[5]),Wl&32&&te$4(Po,"stop-color",$l[5]),Wl&256&&te$4(Bn,"x2",$l[8]),$l[3]?Io?(Io.p($l,Wl),Wl&8&&ot$4(Io,1)):(Io=B$g($l),Io.c(),ot$4(Io,1),Io.m(yn,null)):Io&&(Lt(),$t(Io,1,1,()=>{Io=null}),Ot$1()),Wl&384&&To!==(To="0 0 "+$l[8]+" "+$l[7])&&te$4(yn,"viewBox",To),Wl&512&&re$2(vn,"vertical",$l[9]),Wl&512&&re$2(vn,"horizontal",!$l[9]),Wl&256&&ne$5(vn,"width",$l[8]+"px"),Wl&128&&ne$5(vn,"height",$l[7]+"px")},d($l){$l&&J$h(vn),Io&&Io.d()}}}function B$g(cr){let vn,yn,Rn,Bn,Co;return{c(){vn=Mt("path"),te$4(vn,"fill","none"),te$4(vn,"stroke",yn=cr[4]?`url(#${cr[10]})`:cr[5]),te$4(vn,"stroke-width",1),te$4(vn,"d",cr[6])},m(Po,To){Nt(Po,vn,To),Co=!0},p(Po,To){cr=Po,(!Co||To&48&&yn!==(yn=cr[4]?`url(#${cr[10]})`:cr[5]))&&te$4(vn,"stroke",yn),(!Co||To&64)&&te$4(vn,"d",cr[6])},i(Po){Co||(Po&&z$j(()=>{Co&&(Bn&&Bn.end(1),Rn=me$1(vn,I$o,{duration:cr[2],delay:cr[0],easing:Z$a}),Rn.start())}),Co=!0)},o(Po){Rn&&Rn.invalidate(),Po&&(Bn=ge$5(vn,I$o,{duration:cr[2],delay:cr[1],easing:Z$a})),Co=!1},d(Po){Po&&J$h(vn),Po&&Bn&&Bn.end()}}}function K$b(cr){let vn,yn=cr[8]&&L$c(cr);return{c(){yn&&yn.c(),vn=Yt()},m(Rn,Bn){yn&&yn.m(Rn,Bn),Nt(Rn,vn,Bn)},p(Rn,[Bn]){Rn[8]?yn?yn.p(Rn,Bn):(yn=L$c(Rn),yn.c(),yn.m(vn.parentNode,vn)):yn&&(yn.d(1),yn=null)},i:N$f,o:N$f,d(Rn){yn&&yn.d(Rn),Rn&&J$h(vn)}}}function P$j(cr,vn,yn){let Rn,Bn,Co,Po,{inDelay:To=0}=vn,{outDelay:Io=0}=vn,{duration:$l=1e3}=vn,{unfolded:Wl}=vn,{length:Xl}=vn,{direction:Yl="horizontal"}=vn,{useLinearColor:Zl=!1}=vn,{color:ey="white"}=vn;const Rm=r$F();return cr.$$set=ry=>{"inDelay"in ry&&yn(0,To=ry.inDelay),"outDelay"in ry&&yn(1,Io=ry.outDelay),"duration"in ry&&yn(2,$l=ry.duration),"unfolded"in ry&&yn(3,Wl=ry.unfolded),"length"in ry&&yn(11,Xl=ry.length),"direction"in ry&&yn(12,Yl=ry.direction),"useLinearColor"in ry&&yn(4,Zl=ry.useLinearColor),"color"in ry&&yn(5,ey=ry.color)},cr.$$.update=()=>{cr.$$.dirty&4096&&yn(9,Rn=Yl==="vertical"),cr.$$.dirty&2048&&yn(8,Bn=Xl),cr.$$.dirty&2048&&yn(6,Po=`M0.5 0.5 H ${Xl}`)},yn(7,Co=1),[To,Io,$l,Wl,Zl,ey,Po,Co,Bn,Rn,Rm,Xl,Yl]}class Y$8 extends Ce$1{constructor(vn){super(),Te$1(this,vn,P$j,K$b,Ft$1,{inDelay:0,outDelay:1,duration:2,unfolded:3,length:11,direction:12,useLinearColor:4,color:5},J$c)}}function K$a(cr){Qt(cr,"svelte-faoauy",".shadow.svelte-faoauy{position:absolute}")}function I$i(cr){let vn,yn,Rn,Bn,Co;return{c(){vn=K$g("div"),te$4(vn,"class","shadow svelte-faoauy"),te$4(vn,"style",yn=`
      left: ${r$l(cr[5])};
      bottom: ${r$l(cr[6])};
      border-radius: ${cr[10]?"9999px":"0"};
      box-shadow: 0 0 ${r$l(cr[11])} ${r$l(cr[12])} rgba(0, 0, 0, ${cr[13]});
      ${cr[8]?"transform: translateX(-50%); left: 50%":""}
      ${cr[9]?"transform: translateX(-50%); top: 50%":""}
      ${cr[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `),ne$5(vn,"width",r$l(cr[3])),ne$5(vn,"height",r$l(cr[4])),ne$5(vn,"z-index",cr[14])},m(Po,To){Nt(Po,vn,To),Co=!0},p(Po,To){cr=Po,(!Co||To&16352&&yn!==(yn=`
      left: ${r$l(cr[5])};
      bottom: ${r$l(cr[6])};
      border-radius: ${cr[10]?"9999px":"0"};
      box-shadow: 0 0 ${r$l(cr[11])} ${r$l(cr[12])} rgba(0, 0, 0, ${cr[13]});
      ${cr[8]?"transform: translateX(-50%); left: 50%":""}
      ${cr[9]?"transform: translateX(-50%); top: 50%":""}
      ${cr[7]?"transform: translate(-50%, -50%); left: 50%; top: 50%;":""}
    `))&&te$4(vn,"style",yn);const Io=To&16352;(Io||To&16360)&&ne$5(vn,"width",r$l(cr[3])),(Io||To&16368)&&ne$5(vn,"height",r$l(cr[4])),(Io||To&32736)&&ne$5(vn,"z-index",cr[14])},i(Po){Co||(Po&&z$j(()=>{Co&&(Bn&&Bn.end(1),Rn=me$1(vn,C$i,{duration:cr[0]}),Rn.start())}),Co=!0)},o(Po){Rn&&Rn.invalidate(),Po&&(Bn=ge$5(vn,C$i,{duration:cr[1]})),Co=!1},d(Po){Po&&J$h(vn),Po&&Bn&&Bn.end()}}}function L$b(cr){let vn,yn=cr[2]&&I$i(cr);return{c(){yn&&yn.c(),vn=Yt()},m(Rn,Bn){yn&&yn.m(Rn,Bn),Nt(Rn,vn,Bn)},p(Rn,[Bn]){Rn[2]?yn?(yn.p(Rn,Bn),Bn&4&&ot$4(yn,1)):(yn=I$i(Rn),yn.c(),ot$4(yn,1),yn.m(vn.parentNode,vn)):yn&&(Lt(),$t(yn,1,1,()=>{yn=null}),Ot$1())},i(Rn){ot$4(yn)},o(Rn){$t(yn)},d(Rn){yn&&yn.d(Rn),Rn&&J$h(vn)}}}function r$l(cr){return typeof cr=="number"?cr/16+"rem":cr}function M$i(cr,vn,yn){let{inDelay:Rn=1e3}=vn,{outDelay:Bn=1e3}=vn,{visible:Co=!0}=vn,{width:Po=0}=vn,{height:To=0}=vn,{left:Io=0}=vn,{bottom:$l=0}=vn,{center:Wl=!1}=vn,{horizontalCenter:Xl=!1}=vn,{verticalCenter:Yl=!1}=vn,{round:Zl=!1}=vn,{blurRadius:ey}=vn,{spreadRadius:Rm}=vn,{opacity:ry=.15}=vn,{zIndex:_g=-1}=vn;return cr.$$set=ty=>{"inDelay"in ty&&yn(0,Rn=ty.inDelay),"outDelay"in ty&&yn(1,Bn=ty.outDelay),"visible"in ty&&yn(2,Co=ty.visible),"width"in ty&&yn(3,Po=ty.width),"height"in ty&&yn(4,To=ty.height),"left"in ty&&yn(5,Io=ty.left),"bottom"in ty&&yn(6,$l=ty.bottom),"center"in ty&&yn(7,Wl=ty.center),"horizontalCenter"in ty&&yn(8,Xl=ty.horizontalCenter),"verticalCenter"in ty&&yn(9,Yl=ty.verticalCenter),"round"in ty&&yn(10,Zl=ty.round),"blurRadius"in ty&&yn(11,ey=ty.blurRadius),"spreadRadius"in ty&&yn(12,Rm=ty.spreadRadius),"opacity"in ty&&yn(13,ry=ty.opacity),"zIndex"in ty&&yn(14,_g=ty.zIndex)},[Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g]}class T$a extends Ce$1{constructor(vn){super(),Te$1(this,vn,M$i,L$b,Ft$1,{inDelay:0,outDelay:1,visible:2,width:3,height:4,left:5,bottom:6,center:7,horizontalCenter:8,verticalCenter:9,round:10,blurRadius:11,spreadRadius:12,opacity:13,zIndex:14},K$a)}}function f$t(cr,vn){const[yn,Rn]=vn;if(yn>=Rn||Rn<=1||yn<=1)return-1;const Bn={},Co=Po=>(Bn[Po]||(Bn[Po]=cr(Po)),Bn[Po]);for(let Po=yn;Po<Rn;Po++){const To=Co(Po),Io=Co(Po-1);if(To<Io)return Po}return-1}function n$g(){return Math.random().toString(36).slice(-6)}const t$5=n$g();function Q$6(cr){Qt(cr,"svelte-1b2n9wi",".text-char.svelte-1b2n9wi{display:inline-block;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function R$b(cr,vn,yn){const Rn=cr.slice();return Rn[19]=vn[yn].id,Rn[0]=vn[yn].content,Rn[20]=vn,Rn[21]=yn,Rn}function Z$7(cr){let vn,yn=cr[0]+"",Rn,Bn=cr[21];const Co=()=>cr[10](vn,Bn),Po=()=>cr[10](null,Bn);return{c(){vn=K$g("span"),Rn=gt$3(yn),te$4(vn,"class","text-char svelte-1b2n9wi")},m(To,Io){Nt(To,vn,Io),pt$1(vn,Rn),Co()},p(To,Io){cr=To,Io&4&&yn!==(yn=cr[0]+"")&&ee$5(Rn,yn),Bn!==cr[21]&&(Po(),Bn=cr[21],Co())},d(To){To&&J$h(vn),Po()}}}function x$i(cr){let vn;return{c(){vn=K$g("br")},m(yn,Rn){Nt(yn,vn,Rn)},p:N$f,d(yn){yn&&J$h(vn)}}}function $$5(cr){let vn,yn=cr[21];const Rn=()=>cr[9](vn,yn),Bn=()=>cr[9](null,yn);return{c(){vn=K$g("span"),vn.textContent="\xA0",te$4(vn,"class","text-char svelte-1b2n9wi")},m(Co,Po){Nt(Co,vn,Po),Rn()},p(Co,Po){cr=Co,yn!==cr[21]&&(Bn(),yn=cr[21],Rn())},d(Co){Co&&J$h(vn),Bn()}}}function S$f(cr,vn){let yn,Rn;function Bn(To,Io){return To[0]===To[3]?$$5:To[0]===To[4]?x$i:Z$7}let Co=Bn(vn),Po=Co(vn);return{key:cr,first:null,c(){yn=Yt(),Po.c(),Rn=Yt(),this.first=yn},m(To,Io){Nt(To,yn,Io),Po.m(To,Io),Nt(To,Rn,Io)},p(To,Io){vn=To,Co===(Co=Bn(vn))&&Po?Po.p(vn,Io):(Po.d(1),Po=Co(vn),Po&&(Po.c(),Po.m(Rn.parentNode,Rn)))},d(To){To&&J$h(yn),Po.d(To),To&&J$h(Rn)}}}function ee$3(cr){let vn=[],yn=new Map,Rn,Bn=cr[2];const Co=Po=>Po[19];for(let Po=0;Po<Bn.length;Po+=1){let To=R$b(cr,Bn,Po),Io=Co(To);yn.set(Io,vn[Po]=S$f(Io,To))}return{c(){for(let Po=0;Po<vn.length;Po+=1)vn[Po].c();Rn=Yt()},m(Po,To){for(let Io=0;Io<vn.length;Io+=1)vn[Io]&&vn[Io].m(Po,To);Nt(Po,Rn,To)},p(Po,[To]){To&30&&(Bn=Po[2],vn=Ee$3(vn,To,Co,1,Po,Bn,yn,Rn.parentNode,ke$2,S$f,Rn,R$b))},i:N$f,o:N$f,d(Po){for(let To=0;To<vn.length;To+=1)vn[To].d(Po);Po&&J$h(Rn)}}}function te$3(cr,vn,yn){let Rn,{inDelay:Bn=0}=vn,{outDelay:Co=0}=vn,{content:Po}=vn,{unfolded:To}=vn,{isFistUnfoldedUpdate:Io=!0}=vn;const $l=`__EMOJI_SPLIT_${t$5}__`,Wl=`__EMOJI_${t$5}__`,Xl=`__SPACE_${t$5}__`,Yl=`__NEW_LINE_${t$5}__`;let Zl,ey,Rm=[];function ry(ay){const uy=[],hy=new RegExp(new RegExp("\\p{Regional_Indicator}\\p{Regional_Indicator}|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?(\\u200D\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?)+|\\p{Emoji_Presentation}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)?|\\p{Emoji}(\\p{Emoji_Modifier}+|\\uFE0F\\u20E3?)","gu"));return ay.slice().replace(hy,my=>`${$l}${Wl}${my}${$l}`).split($l).forEach(my=>my.startsWith(Wl)?uy.push({id:r$F(),content:my.slice(Wl.length)}):uy.push(...my.split("").map(ly=>ly===" "?Xl:ly===`
`?Yl:ly).map(ly=>({id:r$F(),content:ly})))),uy}function _g(){if(!ey)return;const ay=!To;ey.reversed!==ay&&ey.reverse(),ey.play()}function ty(ay){if(Io){yn(5,Io=!1);return}clearTimeout(Zl),Zl=setTimeout(_g,ay?Bn:Co)}function ny(ay){const uy=function(){const hy=f$t(my=>ay[my].getBoundingClientRect().x,[Math.min(ay.length-1,10),Math.min(ay.length-1,30)]);if(hy>0)return hy}();ey=x$t({targets:ay.slice(0,uy).filter(i$w),autoplay:!1,duration:400,scale:[.7,1],rotate:[20,0],opacity:[0,1],translateX:[4,0],translateY:[10,0],delay:x$t.stagger(50),easing:"easeInOutCubic"}),To&&ey.seek(ey.duration)}function iy(ay,uy){ft$1[ay?"unshift":"push"](()=>{Rm[uy]=ay,yn(1,Rm)})}function oy(ay,uy){ft$1[ay?"unshift":"push"](()=>{Rm[uy]=ay,yn(1,Rm)})}return cr.$$set=ay=>{"inDelay"in ay&&yn(6,Bn=ay.inDelay),"outDelay"in ay&&yn(7,Co=ay.outDelay),"content"in ay&&yn(0,Po=ay.content),"unfolded"in ay&&yn(8,To=ay.unfolded),"isFistUnfoldedUpdate"in ay&&yn(5,Io=ay.isFistUnfoldedUpdate)},cr.$$.update=()=>{cr.$$.dirty&1&&yn(2,Rn=ry(Po)),cr.$$.dirty&256&&ty(To),cr.$$.dirty&2&&ny(Rm.filter(ay=>!!ay))},[Po,Rm,Rn,Xl,Yl,Io,Bn,Co,To,iy,oy]}class ae$1 extends Ce$1{constructor(vn){super(),Te$1(this,vn,te$3,ee$3,Ft$1,{inDelay:6,outDelay:7,content:0,unfolded:8,isFistUnfoldedUpdate:5},Q$6)}}function M$h(cr){Qt(cr,"svelte-1ogmlqq",".arrow.svelte-1ogmlqq{width:100%;height:100%;background-size:100%;transition:transform 400ms ease-in-out;cursor:pointer;pointer-events:auto}.arrow-wrapper.svelte-1ogmlqq{position:relative;width:100%;height:100%}.arrow.left.svelte-1ogmlqq{transform:rotate(0deg)}.arrow.right.svelte-1ogmlqq{transform:rotate(-180deg)}.arrow.top.svelte-1ogmlqq{transform:rotate(90deg)}.arrow.bottom.svelte-1ogmlqq{transform:rotate(-90deg)}")}function h$h(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl;return yn=new T$a({props:{center:!0,blurRadius:9,spreadRadius:3}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),Rn=Xt$1(),Bn=K$g("div"),te$4(Bn,"class",Co="arrow "+cr[0]+" svelte-1ogmlqq"),ne$5(Bn,"background-image","url("+A$k+")"),te$4(vn,"class","arrow-wrapper svelte-1ogmlqq")},m(Xl,Yl){Nt(Xl,vn,Yl),Dt$1(yn,vn,null),pt$1(vn,Rn),pt$1(vn,Bn),Io=!0,$l||(Wl=lt$2(Bn,"click",cr[5]),$l=!0)},p(Xl,Yl){cr=Xl,(!Io||Yl&1&&Co!==(Co="arrow "+cr[0]+" svelte-1ogmlqq"))&&te$4(Bn,"class",Co)},i(Xl){Io||(ot$4(yn.$$.fragment,Xl),Xl&&z$j(()=>{Io&&(To&&To.end(1),Po=me$1(Bn,C$i,{duration:cr[2],delay:cr[3],easing:c$w}),Po.start())}),Io=!0)},o(Xl){$t(yn.$$.fragment,Xl),Po&&Po.invalidate(),Xl&&(To=ge$5(Bn,C$i,{duration:cr[2],delay:cr[4],easing:c$w})),Io=!1},d(Xl){Xl&&J$h(vn),Rt(yn),Xl&&To&&To.end(),$l=!1,Wl()}}}function P$i(cr){let vn,yn,Rn=cr[1]&&h$h(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[1]?Rn?(Rn.p(Bn,Co),Co&2&&ot$4(Rn,1)):(Rn=h$h(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function Q$5(cr,vn,yn){let{direction:Rn="right"}=vn,{visible:Bn=!0}=vn,{duration:Co=0}=vn,{inDelay:Po=0}=vn,{outDelay:To=0}=vn;function Io($l){he$1.call(this,cr,$l)}return cr.$$set=$l=>{"direction"in $l&&yn(0,Rn=$l.direction),"visible"in $l&&yn(1,Bn=$l.visible),"duration"in $l&&yn(2,Co=$l.duration),"inDelay"in $l&&yn(3,Po=$l.inDelay),"outDelay"in $l&&yn(4,To=$l.outDelay)},[Rn,Bn,Co,Po,To,Io]}class Y$7 extends Ce$1{constructor(vn){super(),Te$1(this,vn,Q$5,P$i,Ft$1,{direction:0,visible:1,duration:2,inDelay:3,outDelay:4},M$h)}}function s$8(cr,vn,yn=20,Rn=5){return new Promise((Bn,Co)=>{let Po=0;const To=setInterval(()=>{const Io=cr();vn(Io)?(clearInterval(To),Bn(Io)):Po>=Rn&&(clearInterval(To),Co(Io)),Po++},yn)})}function I$h(cr){Qt(cr,"svelte-1fuzm7v",".text.svelte-1fuzm7v{pointer-events:auto;box-sizing:border-box;display:inline-block;max-width:7.5rem;transition:transform 400ms ease-in-out;font-size:0.75rem;line-height:1.125rem;white-space:initial;cursor:pointer}.arrow.svelte-1fuzm7v{pointer-events:auto;display:inline-block;vertical-align:top;width:0.875rem;height:0.875rem;margin-left:0.125rem;margin-top:0.125rem}")}function w$h(cr){let vn,yn,Rn;return yn=new ae$1({props:{unfolded:cr[0],content:cr[1],inDelay:500,outDelay:cr[5]}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","text svelte-1fuzm7v"),ne$5(vn,"transform",cr[7])},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),cr[10](vn),Rn=!0},p(Bn,Co){const Po={};Co&1&&(Po.unfolded=Bn[0]),Co&2&&(Po.content=Bn[1]),Co&32&&(Po.outDelay=Bn[5]),yn.$set(Po),Co&128&&ne$5(vn,"transform",Bn[7])},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn),cr[10](null)}}}function k$d(cr){let vn,yn,Rn;return yn=new Y$7({props:{direction:cr[6],visible:cr[0],inDelay:600,duration:1e3}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","arrow svelte-1fuzm7v")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co&64&&(Po.direction=Bn[6]),Co&1&&(Po.visible=Bn[0]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function J$b(cr){let vn,yn,Rn,Bn=cr[1]&&w$h(cr),Co=cr[3]<cr[4]&&k$d(cr);return{c(){Bn&&Bn.c(),vn=Xt$1(),Co&&Co.c(),yn=Yt()},m(Po,To){Bn&&Bn.m(Po,To),Nt(Po,vn,To),Co&&Co.m(Po,To),Nt(Po,yn,To),Rn=!0},p(Po,[To]){Po[1]?Bn?(Bn.p(Po,To),To&2&&ot$4(Bn,1)):(Bn=w$h(Po),Bn.c(),ot$4(Bn,1),Bn.m(vn.parentNode,vn)):Bn&&(Lt(),$t(Bn,1,1,()=>{Bn=null}),Ot$1()),Po[3]<Po[4]?Co?(Co.p(Po,To),To&24&&ot$4(Co,1)):(Co=k$d(Po),Co.c(),ot$4(Co,1),Co.m(yn.parentNode,yn)):Co&&(Lt(),$t(Co,1,1,()=>{Co=null}),Ot$1())},i(Po){Rn||(ot$4(Bn),ot$4(Co),Rn=!0)},o(Po){$t(Bn),$t(Co),Rn=!1},d(Po){Bn&&Bn.d(Po),Po&&J$h(vn),Co&&Co.d(Po),Po&&J$h(yn)}}}function K$9(cr,vn,yn){let Rn,Bn,Co,{visible:Po=!1}=vn,{textUnfolded:To=!1}=vn,{content:Io}=vn,$l,Wl=0,Xl=0,Yl=0;function Zl(ey){ft$1[ey?"unshift":"push"](()=>{$l=ey,yn(2,$l)})}return cr.$$set=ey=>{"visible"in ey&&yn(0,Po=ey.visible),"textUnfolded"in ey&&yn(8,To=ey.textUnfolded),"content"in ey&&yn(1,Io=ey.content)},cr.$$.update=()=>{if(cr.$$.dirty&7&&$l&&Po&&Io){const{lineHeight:ey}=getComputedStyle($l);yn(4,Yl=$l.offsetHeight),s$8(()=>$l==null?void 0:$l.offsetHeight,Boolean).then(()=>{yn(4,Yl=$l.offsetHeight)}),yn(3,Xl=Number(ey.replace("px","")))}cr.$$.dirty&280&&yn(9,Wl=To?Xl-Yl:0),cr.$$.dirty&512&&yn(7,Rn=`translateY(${Wl}px)`),cr.$$.dirty&256&&yn(6,Bn=To?"left":"right"),cr.$$.dirty&256&&yn(5,Co=To?450:0)},[Po,Io,$l,Xl,Yl,Co,Bn,Rn,To,Wl,Zl]}class ie$3 extends Ce$1{constructor(vn){super(),Te$1(this,vn,K$9,J$b,Ft$1,{visible:0,textUnfolded:8,content:1},I$h)}}function H$h(cr){Qt(cr,"svelte-5hip41",".content.svelte-5hip41{--height:62.4375rem;width:-moz-max-content;width:max-content;height:var(--height);padding:calc(var(--height) - 1.125rem) 0.25rem 0 1rem;position:absolute;left:0;bottom:0;overflow:hidden;box-sizing:border-box;font-size:0;pointer-events:none;white-space:nowrap;font-weight:600}")}function M$g(cr){var vn,yn;let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl;return Rn=new T$a({props:{visible:cr[2],left:cr[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}}),Co=new Y$8({props:{unfolded:cr[2],length:cr[3],outDelay:cr[4]+40*Math.min((yn=(vn=cr[6][0])==null?void 0:vn.content.length)!=null?yn:10,15),useLinearColor:!0}}),Io=new ie$3({props:{visible:cr[2],textUnfolded:cr[1],content:cr[5]}}),{c(){Ae$1(Rn.$$.fragment),Bn=Xt$1(),Ae$1(Co.$$.fragment),Po=Xt$1(),To=K$g("div"),Ae$1(Io.$$.fragment),te$4(To,"class","content svelte-5hip41")},m(Yl,Zl){Dt$1(Rn,Yl,Zl),Nt(Yl,Bn,Zl),Dt$1(Co,Yl,Zl),Nt(Yl,Po,Zl),Nt(Yl,To,Zl),Dt$1(Io,To,null),$l=!0,Wl||(Xl=[Jt$1(E$o.call(null,To)),lt$2(To,"clientWidth",cr[10]),lt$2(To,"click",cr[7])],Wl=!0)},p(Yl,Zl){var ey,Rm;const ry={};Zl&4&&(ry.visible=Yl[2]),Zl&8&&(ry.left=Yl[3]/2+"px"),Rn.$set(ry);const _g={};Zl&4&&(_g.unfolded=Yl[2]),Zl&8&&(_g.length=Yl[3]),Zl&16&&(_g.outDelay=Yl[4]+40*Math.min((Rm=(ey=Yl[6][0])==null?void 0:ey.content.length)!=null?Rm:10,15)),Co.$set(_g);const ty={};Zl&4&&(ty.visible=Yl[2]),Zl&2&&(ty.textUnfolded=Yl[1]),Zl&32&&(ty.content=Yl[5]),Io.$set(ty)},i(Yl){$l||(ot$4(Rn.$$.fragment,Yl),ot$4(Co.$$.fragment,Yl),ot$4(Io.$$.fragment,Yl),$l=!0)},o(Yl){$t(Rn.$$.fragment,Yl),$t(Co.$$.fragment,Yl),$t(Io.$$.fragment,Yl),$l=!1},d(Yl){Rt(Rn,Yl),Yl&&J$h(Bn),Rt(Co,Yl),Yl&&J$h(Po),Yl&&J$h(To),Rt(Io),Wl=!1,M$o(Xl)}}}function J$a(cr){let vn,yn,Rn=cr[0].state&&M$g(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=M$g(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function K$8(cr,vn,yn){let Rn,Bn,Co,Po,To,{tag:Io}=vn,$l,Wl=!1,Xl=[];function Yl(){yn(1,Wl=!Wl)}const Zl=ey=>{yn(3,$l=ey.detail)};return cr.$$set=ey=>{"tag"in ey&&yn(0,Io=ey.tag)},cr.$$.update=()=>{var ey,Rm,ry,_g;cr.$$.dirty&1&&yn(2,Rn=!!((ey=Io.state)!=null&&ey.unfolded)),cr.$$.dirty&1&&yn(9,Bn=(ry=(Rm=Io.data.title)!=null?Rm:Io.data.text)!=null?ry:""),cr.$$.dirty&1&&yn(8,Co=(_g=Io.data.description)!=null?_g:""),cr.$$.dirty&768&&yn(5,Po=(()=>{if(Bn&&Co)return Bn+`
`+Co;if(Bn)return Bn;if(Co)return Co})()),cr.$$.dirty&4&&(Rn||setTimeout(()=>{yn(1,Wl=!1)},20)),cr.$$.dirty&2&&yn(4,To=Wl?450:0)},[Io,Wl,Rn,$l,To,Po,Xl,Yl,Co,Bn,Zl]}class ut$2 extends Ce$1{constructor(vn){super(),Te$1(this,vn,K$8,J$a,Ft$1,{tag:0},H$h)}}function e$8(cr){return typeof cr=="number"?cr/16+"rem":cr}function D$e(cr){Qt(cr,"svelte-1j0cz4o",'.text.svelte-1j0cz4o{display:-webkit-box;display:-ms-box;display:-moz-box;position:relative;width:-moz-max-content;width:max-content;max-width:100%;-webkit-box-orient:vertical;-ms-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@keyframes svelte-1j0cz4o-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.caret.svelte-1j0cz4o{position:absolute;width:0.0625rem;height:100%;background-color:#fff;animation:svelte-1j0cz4o-blink 1.2s infinite}.placeholder.svelte-1j0cz4o{opacity:0.5}.placeholder.svelte-1j0cz4o:empty::after{content:" "}')}function F$9(cr){let vn;const yn=cr[6].default,Rn=Bt(yn,cr,cr[5],null);return{c(){Rn&&Rn.c()},m(Bn,Co){Rn&&Rn.m(Bn,Co),vn=!0},p(Bn,Co){Rn&&Rn.p&&(!vn||Co&32)&&It(Rn,yn,Bn,Bn[5],vn?Ht$1(yn,Bn[5],Co,null):Ut(Bn[5]),null)},i(Bn){vn||(ot$4(Rn,Bn),vn=!0)},o(Bn){$t(Rn,Bn),vn=!1},d(Bn){Rn&&Rn.d(Bn)}}}function G$8(cr){var vn,yn;let Rn,Bn,Co=((vn=cr[3])==null?void 0:vn.inputting)&&v$l(),Po=typeof((yn=cr[3])==null?void 0:yn.placeholder)=="string"&&w$g(cr);return{c(){Co&&Co.c(),Rn=Xt$1(),Po&&Po.c(),Bn=Yt()},m(To,Io){Co&&Co.m(To,Io),Nt(To,Rn,Io),Po&&Po.m(To,Io),Nt(To,Bn,Io)},p(To,Io){var $l,Wl;($l=To[3])!=null&&$l.inputting?Co||(Co=v$l(),Co.c(),Co.m(Rn.parentNode,Rn)):Co&&(Co.d(1),Co=null),typeof((Wl=To[3])==null?void 0:Wl.placeholder)=="string"?Po?Po.p(To,Io):(Po=w$g(To),Po.c(),Po.m(Bn.parentNode,Bn)):Po&&(Po.d(1),Po=null)},i:N$f,o:N$f,d(To){Co&&Co.d(To),To&&J$h(Rn),Po&&Po.d(To),To&&J$h(Bn)}}}function H$g(cr){let vn;return{c(){vn=gt$3(cr[2])},m(yn,Rn){Nt(yn,vn,Rn)},p(yn,Rn){Rn&4&&ee$5(vn,yn[2])},i:N$f,o:N$f,d(yn){yn&&J$h(vn)}}}function v$l(cr){let vn;return{c(){vn=K$g("div"),te$4(vn,"class","caret svelte-1j0cz4o")},m(yn,Rn){Nt(yn,vn,Rn)},d(yn){yn&&J$h(vn)}}}function w$g(cr){let vn,yn=cr[3].placeholder+"",Rn;return{c(){vn=K$g("span"),Rn=gt$3(yn),te$4(vn,"class","placeholder svelte-1j0cz4o")},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co&8&&yn!==(yn=Bn[3].placeholder+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function I$g(cr){let vn,yn,Rn,Bn;const Co=[H$g,G$8,F$9],Po=[];function To(Io,$l){return Io[2]?0:Io[4]?1:2}return yn=To(cr),Rn=Po[yn]=Co[yn](cr),{c(){vn=K$g("div"),Rn.c(),te$4(vn,"class","text svelte-1j0cz4o"),ne$5(vn,"max-width",typeof cr[1]=="number"?e$8(cr[1]):cr[1]),ne$5(vn,"-webkit-line-clamp",cr[0])},m(Io,$l){Nt(Io,vn,$l),Po[yn].m(vn,null),Bn=!0},p(Io,[$l]){let Wl=yn;yn=To(Io),yn===Wl?Po[yn].p(Io,$l):(Lt(),$t(Po[Wl],1,1,()=>{Po[Wl]=null}),Ot$1(),Rn=Po[yn],Rn?Rn.p(Io,$l):(Rn=Po[yn]=Co[yn](Io),Rn.c()),ot$4(Rn,1),Rn.m(vn,null)),$l&2&&ne$5(vn,"max-width",typeof Io[1]=="number"?e$8(Io[1]):Io[1]),$l&1&&ne$5(vn,"-webkit-line-clamp",Io[0])},i(Io){Bn||(ot$4(Rn),Bn=!0)},o(Io){$t(Rn),Bn=!1},d(Io){Io&&J$h(vn),Po[yn].d()}}}function J$9(cr,vn,yn){let Rn,{$$slots:Bn={},$$scope:Co}=vn,{maxLine:Po=null}=vn,{maxWidth:To=null}=vn,{text:Io=null}=vn,{edit:$l=null}=vn;return cr.$$set=Wl=>{"maxLine"in Wl&&yn(0,Po=Wl.maxLine),"maxWidth"in Wl&&yn(1,To=Wl.maxWidth),"text"in Wl&&yn(2,Io=Wl.text),"edit"in Wl&&yn(3,$l=Wl.edit),"$$scope"in Wl&&yn(5,Co=Wl.$$scope)},cr.$$.update=()=>{cr.$$.dirty&8&&yn(4,Rn=typeof($l==null?void 0:$l.placeholder)=="string"||($l==null?void 0:$l.inputting))},[Po,To,Io,$l,Rn,Co,Bn]}class P$h extends Ce$1{constructor(vn){super(),Te$1(this,vn,J$9,I$g,Ft$1,{maxLine:0,maxWidth:1,text:2,edit:3},D$e)}}function H$f(cr){Qt(cr,"svelte-1oxrkr1",".plane__container.svelte-1oxrkr1.svelte-1oxrkr1{position:absolute;left:50%;transform:translate(-50%, -100%);width:-moz-max-content;width:max-content}.plane__wrapper.svelte-1oxrkr1.svelte-1oxrkr1{transition:transform 500ms linear, opacity 200ms linear;padding:0.625rem;background-color:rgba(0, 0, 0, 0.5);border:0.03125rem solid rgba(255, 255, 255, 0.3);border-radius:0.25rem}.unfolded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{transition-delay:200ms, 500ms;opacity:1}.folded.svelte-1oxrkr1 .plane__wrapper.svelte-1oxrkr1{opacity:0}.plane.svelte-1oxrkr1.svelte-1oxrkr1{max-width:11.75rem}.title.svelte-1oxrkr1.svelte-1oxrkr1{white-space:pre-wrap;font-weight:bold;font-size:0.75rem;line-height:1.125rem}.description.svelte-1oxrkr1.svelte-1oxrkr1{margin-top:0.25rem;white-space:pre-wrap;font-size:0.6875rem;line-height:1rem}")}function S$e(cr){var vn,yn;let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl;Rn=new Y$8({props:{unfolded:cr[1],direction:"vertical",length:15,duration:500,inDelay:200,useLinearColor:!0}}),$l=new P$h({props:{text:cr[4],edit:(vn=cr[0].data.edit)==null?void 0:vn.title,maxLine:cr[2]}});let Yl=(cr[0].data.description||((yn=cr[0].data.edit)==null?void 0:yn.description))&&q$f(cr);return{c(){Ae$1(Rn.$$.fragment),Bn=Xt$1(),Co=K$g("div"),Po=K$g("div"),To=K$g("div"),Io=K$g("div"),Ae$1($l.$$.fragment),Wl=Xt$1(),Yl&&Yl.c(),te$4(Io,"class","title svelte-1oxrkr1"),te$4(To,"class","plane svelte-1oxrkr1"),te$4(Po,"class","plane__wrapper svelte-1oxrkr1"),ne$5(Po,"transform",cr[1]?"translateY(-15px)":"translateY(0)"),te$4(Co,"class","plane__container svelte-1oxrkr1"),re$2(Co,"unfolded",cr[1]),re$2(Co,"folded",cr[5])},m(Zl,ey){Dt$1(Rn,Zl,ey),Nt(Zl,Bn,ey),Nt(Zl,Co,ey),pt$1(Co,Po),pt$1(Po,To),pt$1(To,Io),Dt$1($l,Io,null),pt$1(To,Wl),Yl&&Yl.m(To,null),Xl=!0},p(Zl,ey){var Rm,ry;const _g={};ey&2&&(_g.unfolded=Zl[1]),Rn.$set(_g);const ty={};ey&16&&(ty.text=Zl[4]),ey&1&&(ty.edit=(Rm=Zl[0].data.edit)==null?void 0:Rm.title),ey&4&&(ty.maxLine=Zl[2]),$l.$set(ty),Zl[0].data.description||(ry=Zl[0].data.edit)!=null&&ry.description?Yl?(Yl.p(Zl,ey),ey&1&&ot$4(Yl,1)):(Yl=q$f(Zl),Yl.c(),ot$4(Yl,1),Yl.m(To,null)):Yl&&(Lt(),$t(Yl,1,1,()=>{Yl=null}),Ot$1()),ey&2&&ne$5(Po,"transform",Zl[1]?"translateY(-15px)":"translateY(0)"),(!Xl||ey&2)&&re$2(Co,"unfolded",Zl[1]),(!Xl||ey&32)&&re$2(Co,"folded",Zl[5])},i(Zl){Xl||(ot$4(Rn.$$.fragment,Zl),ot$4($l.$$.fragment,Zl),ot$4(Yl),Xl=!0)},o(Zl){$t(Rn.$$.fragment,Zl),$t($l.$$.fragment,Zl),$t(Yl),Xl=!1},d(Zl){Rt(Rn,Zl),Zl&&J$h(Bn),Zl&&J$h(Co),Rt($l),Yl&&Yl.d()}}}function q$f(cr){var vn;let yn,Rn,Bn;return Rn=new P$h({props:{text:cr[0].data.description,edit:(vn=cr[0].data.edit)==null?void 0:vn.description,maxLine:cr[3]}}),{c(){yn=K$g("div"),Ae$1(Rn.$$.fragment),te$4(yn,"class","description svelte-1oxrkr1")},m(Co,Po){Nt(Co,yn,Po),Dt$1(Rn,yn,null),Bn=!0},p(Co,Po){var To;const Io={};Po&1&&(Io.text=Co[0].data.description),Po&1&&(Io.edit=(To=Co[0].data.edit)==null?void 0:To.description),Po&8&&(Io.maxLine=Co[3]),Rn.$set(Io)},i(Co){Bn||(ot$4(Rn.$$.fragment,Co),Bn=!0)},o(Co){$t(Rn.$$.fragment,Co),Bn=!1},d(Co){Co&&J$h(yn),Rt(Rn)}}}function I$f(cr){let vn,yn,Rn=cr[0].state&&S$e(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=S$e(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function J$8(cr,vn,yn){let Rn,Bn,Co,Po,To,{tag:Io}=vn;return cr.$$set=$l=>{"tag"in $l&&yn(0,Io=$l.tag)},cr.$$.update=()=>{var $l,Wl,Xl,Yl,Zl;cr.$$.dirty&1&&yn(1,Rn=!!(($l=Io.state)!=null&&$l.unfolded)),cr.$$.dirty&2&&yn(5,Bn=!Rn),cr.$$.dirty&1&&yn(4,Co=(Xl=(Wl=Io.data.title)!=null?Wl:Io.data.text)!=null?Xl:""),cr.$$.dirty&1&&yn(3,Po=(Yl=Io.data.descriptionMaxRows)!=null?Yl:null),cr.$$.dirty&1&&yn(2,To=(Zl=Io.data.titleMaxRows)!=null?Zl:null)},[Io,Rn,To,Po,Co,Bn]}class Z$6 extends Ce$1{constructor(vn){super(),Te$1(this,vn,J$8,I$f,Ft$1,{tag:0},H$f)}}function v$k(cr){let vn,yn;return vn=new Z$6({props:{tag:cr[0]}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=Rn[0]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function C$a(cr){let vn,yn;return vn=new ut$2({props:{tag:cr[0]}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=Rn[0]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function N$b(cr){let vn,yn,Rn,Bn;const Co=[C$a,v$k],Po=[];function To(Io,$l){return Io[1]==="line"?0:Io[1]==="plane"?1:-1}return~(vn=To(cr))&&(yn=Po[vn]=Co[vn](cr)),{c(){yn&&yn.c(),Rn=Yt()},m(Io,$l){~vn&&Po[vn].m(Io,$l),Nt(Io,Rn,$l),Bn=!0},p(Io,[$l]){let Wl=vn;vn=To(Io),vn===Wl?~vn&&Po[vn].p(Io,$l):(yn&&(Lt(),$t(Po[Wl],1,1,()=>{Po[Wl]=null}),Ot$1()),~vn?(yn=Po[vn],yn?yn.p(Io,$l):(yn=Po[vn]=Co[vn](Io),yn.c()),ot$4(yn,1),yn.m(Rn.parentNode,Rn)):yn=null)},i(Io){Bn||(ot$4(yn),Bn=!0)},o(Io){$t(yn),Bn=!1},d(Io){~vn&&Po[vn].d(Io),Io&&J$h(Rn)}}}function P$g(cr,vn,yn){let Rn,{tag:Bn}=vn;return cr.$$set=Co=>{"tag"in Co&&yn(0,Bn=Co.tag)},cr.$$.update=()=>{var Co;cr.$$.dirty&1&&yn(1,Rn=(Co=Bn.data.appearance)!=null?Co:"line")},[Bn,Rn]}class Y$6 extends Ce$1{constructor(vn){super(),Te$1(this,vn,P$g,N$b,Ft$1,{tag:0})}}function q$e(cr){Qt(cr,"svelte-blgtit",".line.svelte-blgtit{width:100%;height:100%;overflow:visible;pointer-events:none}")}function y$m(cr){let vn,yn,Rn,Bn;return{c(){vn=Mt("path"),te$4(vn,"fill","none"),te$4(vn,"stroke","url(#"+cr[4]+")"),te$4(vn,"stroke-width","1"),te$4(vn,"d","M0 21 L14 0.5 L105 0.5")},m(Co,Po){Nt(Co,vn,Po),Bn=!0},p(Co,Po){cr=Co},i(Co){Bn||(Co&&z$j(()=>{Bn&&(Rn&&Rn.end(1),yn=me$1(vn,I$o,{duration:cr[1],delay:cr[0],easing:o$u}),yn.start())}),Bn=!0)},o(Co){yn&&yn.invalidate(),Co&&(Rn=ge$5(vn,I$o,{duration:cr[1],delay:cr[2],easing:c$w})),Bn=!1},d(Co){Co&&J$h(vn),Co&&Rn&&Rn.end()}}}function B$f(cr){let vn,yn,Rn,Bn,Co,Po=cr[3]&&y$m(cr);return{c(){vn=Mt("svg"),yn=Mt("defs"),Rn=Mt("linearGradient"),Bn=Mt("stop"),Co=Mt("stop"),Po&&Po.c(),te$4(Bn,"offset","25%"),te$4(Bn,"stop-color","white"),te$4(Bn,"stop-opacity","1"),te$4(Co,"offset","100%"),te$4(Co,"stop-color","white"),te$4(Co,"stop-opacity","0.5"),te$4(Rn,"id",cr[4]),te$4(Rn,"gradientUnits","userSpaceOnUse"),te$4(vn,"class","line svelte-blgtit"),te$4(vn,"viewBox","0 0 105 21")},m(To,Io){Nt(To,vn,Io),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Rn,Co),Po&&Po.m(vn,null)},p(To,[Io]){To[3]?Po?(Po.p(To,Io),Io&8&&ot$4(Po,1)):(Po=y$m(To),Po.c(),ot$4(Po,1),Po.m(vn,null)):Po&&(Lt(),$t(Po,1,1,()=>{Po=null}),Ot$1())},i(To){ot$4(Po)},o(To){$t(Po)},d(To){To&&J$h(vn),Po&&Po.d()}}}function C$9(cr,vn,yn){let{inDelay:Rn=0}=vn,{duration:Bn=1e3}=vn,{outDelay:Co=0}=vn,{unfolded:Po}=vn;const To=r$F();return cr.$$set=Io=>{"inDelay"in Io&&yn(0,Rn=Io.inDelay),"duration"in Io&&yn(1,Bn=Io.duration),"outDelay"in Io&&yn(2,Co=Io.outDelay),"unfolded"in Io&&yn(3,Po=Io.unfolded)},[Rn,Bn,Co,Po,To]}class A$h extends Ce$1{constructor(vn){super(),Te$1(this,vn,C$9,B$f,Ft$1,{inDelay:0,duration:1,outDelay:2,unfolded:3},q$e)}}function f$s(cr){Qt(cr,"svelte-1mgyhhn",`:root{--sc-dot-size:6px;--sc-active-dot-size:8px;--sc-dot-size-animation-time:250ms}.sc-carousel-dot__dot.svelte-1mgyhhn{background-color:var(--sc-color-rgb-light);border-radius:50%;display:inline-block;opacity:0.5;transition:opacity 100ms ease,\r
      height var(--sc-dot-size-animation-time) ease,\r
      width var(--sc-dot-size-animation-time) ease;cursor:pointer;-webkit-tap-highlight-color:transparent;height:var(--sc-dot-size);width:var(--sc-dot-size)}.sc-carousel-dot__dot.svelte-1mgyhhn:hover{opacity:0.9}.sc-carousel-dot__dot_active.svelte-1mgyhhn{opacity:0.7;height:var(--sc-active-dot-size);width:var(--sc-active-dot-size)}`)}function b$f(cr){let vn,yn,Rn;return{c(){vn=K$g("button"),te$4(vn,"class","sc-carousel-button sc-carousel-dot__dot svelte-1mgyhhn"),re$2(vn,"sc-carousel-dot__dot_active",cr[0])},m(Bn,Co){Nt(Bn,vn,Co),yn||(Rn=lt$2(vn,"click",cr[1]),yn=!0)},p(Bn,[Co]){Co&1&&re$2(vn,"sc-carousel-dot__dot_active",Bn[0])},i:N$f,o:N$f,d(Bn){Bn&&J$h(vn),yn=!1,Rn()}}}function y$l(cr,vn,yn){let{active:Rn=!1}=vn;function Bn(Co){he$1.call(this,cr,Co)}return cr.$$set=Co=>{"active"in Co&&yn(0,Rn=Co.active)},[Rn,Bn]}class k$c extends Ce$1{constructor(vn){super(),Te$1(this,vn,y$l,b$f,Ft$1,{active:0},f$s)}}function M$f(cr){Qt(cr,"svelte-670fde",".sc-carousel-dots__container.svelte-670fde{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0 30px}.sc-carousel-dots__dot-container.svelte-670fde{height:calc(var(--sc-dot-size) + 14px);width:calc(var(--sc-dot-size) + 10px);display:flex;align-items:center;justify-content:center}")}function u$j(cr,vn,yn){const Rn=cr.slice();return Rn[5]=vn[yn],Rn[7]=yn,Rn}function d$n(cr,vn){let yn,Rn,Bn,Co;function Po(){return vn[3](vn[7])}return Rn=new k$c({props:{active:vn[1]===vn[7]}}),Rn.$on("click",Po),{key:cr,first:null,c(){yn=K$g("div"),Ae$1(Rn.$$.fragment),Bn=Xt$1(),te$4(yn,"class","sc-carousel-dots__dot-container svelte-670fde"),this.first=yn},m(To,Io){Nt(To,yn,Io),Dt$1(Rn,yn,null),pt$1(yn,Bn),Co=!0},p(To,Io){vn=To;const $l={};Io&3&&($l.active=vn[1]===vn[7]),Rn.$set($l)},i(To){Co||(ot$4(Rn.$$.fragment,To),Co=!0)},o(To){$t(Rn.$$.fragment,To),Co=!1},d(To){To&&J$h(yn),Rt(Rn)}}}function S$d(cr){let vn,yn=[],Rn=new Map,Bn,Co=Array(cr[0]);const Po=To=>To[7];for(let To=0;To<Co.length;To+=1){let Io=u$j(cr,Co,To),$l=Po(Io);Rn.set($l,yn[To]=d$n($l,Io))}return{c(){vn=K$g("div");for(let To=0;To<yn.length;To+=1)yn[To].c();te$4(vn,"class","sc-carousel-dots__container svelte-670fde")},m(To,Io){Nt(To,vn,Io);for(let $l=0;$l<yn.length;$l+=1)yn[$l]&&yn[$l].m(vn,null);Bn=!0},p(To,[Io]){Io&7&&(Co=Array(To[0]),Lt(),yn=Ee$3(yn,Io,Po,1,To,Co,Rn,vn,xe,d$n,null,u$j),Ot$1())},i(To){if(!Bn){for(let Io=0;Io<Co.length;Io+=1)ot$4(yn[Io]);Bn=!0}},o(To){for(let Io=0;Io<yn.length;Io+=1)$t(yn[Io]);Bn=!1},d(To){To&&J$h(vn);for(let Io=0;Io<yn.length;Io+=1)yn[Io].d()}}}function B$e(cr,vn,yn){const Rn=fe$3();let{pagesCount:Bn=1}=vn,{currentPageIndex:Co=0}=vn;function Po(Io){Rn("pageChange",Io)}const To=Io=>Po(Io);return cr.$$set=Io=>{"pagesCount"in Io&&yn(0,Bn=Io.pagesCount),"currentPageIndex"in Io&&yn(1,Co=Io.currentPageIndex)},[Bn,Co,Po,To]}class H$e extends Ce$1{constructor(vn){super(),Te$1(this,vn,B$e,S$d,Ft$1,{pagesCount:0,currentPageIndex:1},M$f)}}const t$4="prev",e$7="next";function z$9(cr){Qt(cr,"svelte-1bftafx",":root{--sc-arrow-size:2px}.sc-carousel-arrow__circle.svelte-1bftafx{width:20px;height:20px;border-radius:50%;background-color:var(--sc-color-rgb-light-50p);display:flex;align-items:center;justify-content:center;transition:opacity 100ms ease;cursor:pointer;-webkit-tap-highlight-color:transparent}.sc-carousel-arrow__circle.svelte-1bftafx:hover{opacity:0.9}.sc-carousel-arrow__arrow.svelte-1bftafx{border:solid var(--sc-color-hex-dark);border-width:0 var(--sc-arrow-size) var(--sc-arrow-size) 0;padding:var(--sc-arrow-size);position:relative}.sc-carousel-arrow__arrow-next.svelte-1bftafx{transform:rotate(-45deg);left:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__arrow-prev.svelte-1bftafx{transform:rotate(135deg);right:calc(var(--sc-arrow-size) / -2)}.sc-carousel-arrow__circle_disabled.svelte-1bftafx,.sc-carousel-arrow__circle_disabled.svelte-1bftafx:hover{opacity:0.5}")}function k$b(cr){let vn,yn,Rn,Bn;return{c(){vn=K$g("button"),yn=K$g("i"),te$4(yn,"class","sc-carousel-arrow__arrow svelte-1bftafx"),re$2(yn,"sc-carousel-arrow__arrow-next",cr[0]===e$7),re$2(yn,"sc-carousel-arrow__arrow-prev",cr[0]===t$4),te$4(vn,"class","sc-carousel-button sc-carousel-arrow__circle svelte-1bftafx"),re$2(vn,"sc-carousel-arrow__circle_disabled",cr[1])},m(Co,Po){Nt(Co,vn,Po),pt$1(vn,yn),Rn||(Bn=lt$2(vn,"click",cr[2]),Rn=!0)},p(Co,[Po]){Po&1&&re$2(yn,"sc-carousel-arrow__arrow-next",Co[0]===e$7),Po&1&&re$2(yn,"sc-carousel-arrow__arrow-prev",Co[0]===t$4),Po&2&&re$2(vn,"sc-carousel-arrow__circle_disabled",Co[1])},i:N$f,o:N$f,d(Co){Co&&J$h(vn),Rn=!1,Bn()}}}function y$k(cr,vn,yn){let{direction:Rn=e$7}=vn,{disabled:Bn=!1}=vn;function Co(Po){he$1.call(this,cr,Po)}return cr.$$set=Po=>{"direction"in Po&&yn(0,Rn=Po.direction),"disabled"in Po&&yn(1,Bn=Po.disabled)},[Rn,Bn,Co]}class q$d extends Ce$1{constructor(vn){super(),Te$1(this,vn,y$k,k$b,Ft$1,{direction:0,disabled:1},z$9)}}function m$h(cr){Qt(cr,"svelte-i7yfid",".sc-carousel-progress__indicator.svelte-i7yfid{height:100%;background-color:var(--sc-color-hex-dark-50p)}")}function g$n(cr){let vn;return{c(){vn=K$g("div"),te$4(vn,"class","sc-carousel-progress__indicator svelte-i7yfid"),ne$5(vn,"width",cr[0]+"%")},m(yn,Rn){Nt(yn,vn,Rn)},p(yn,[Rn]){Rn&1&&ne$5(vn,"width",yn[0]+"%")},i:N$f,o:N$f,d(yn){yn&&J$h(vn)}}}const c$n=100;function y$j(cr,vn,yn){let Rn,{value:Bn=0}=vn;return cr.$$set=Co=>{"value"in Co&&yn(1,Bn=Co.value)},cr.$$.update=()=>{cr.$$.dirty&2&&yn(0,Rn=Math.min(Math.max(Bn*c$n,0),c$n))},[Rn,Bn]}class w$f extends Ce$1{constructor(vn){super(),Te$1(this,vn,y$j,g$n,Ft$1,{value:1},m$h)}}function n$f(cr,vn){cr.addEventListener("mousedown",vn),cr.addEventListener("touchstart",vn,{passive:!0})}function v$j(cr,vn){cr.removeEventListener("mousedown",vn),cr.removeEventListener("touchstart",vn)}function o$e(cr,vn){cr.addEventListener("mouseup",vn),cr.addEventListener("touchend",vn)}function r$k(cr,vn){cr.removeEventListener("mouseup",vn),cr.removeEventListener("touchend",vn)}function i$b(cr,vn){cr.addEventListener("mousemove",vn),cr.addEventListener("touchmove",vn)}function d$m(cr,vn){cr.removeEventListener("mousemove",vn),cr.removeEventListener("touchmove",vn)}function c$m(cr){return function(vn,yn){cr.dispatchEvent(new CustomEvent(vn,{detail:yn}))}}const _$9=110,I$e=9,M$e=111,N$a=20;function f$r(cr){if("TouchEvent"in window&&cr instanceof TouchEvent){const vn=cr.touches[0];return{x:vn?vn.clientX:0,y:vn?vn.clientY:0}}return{x:cr.clientX,y:cr.clientY}}function b$e(cr,{thresholdProvider:vn}){const yn=c$m(cr);let Rn,Bn,Co=0,Po,To=!1;function Io(){return Date.now()-Po>=M$e&&Math.abs(Co)>=N$a}function $l(Yl){Po=Date.now(),Co=0,To=!0;const Zl=f$r(Yl);Rn=Zl.x,Bn=Zl.y,yn("swipeStart",{x:Rn,y:Bn}),i$b(window,Wl),o$e(window,Xl)}function Wl(Yl){if(!To)return;const Zl=f$r(Yl),ey=Zl.x-Rn,Rm=Zl.y-Bn;Rn=Zl.x,Bn=Zl.y,yn("swipeMove",{x:Rn,y:Bn,dx:ey,dy:Rm}),ey!==0&&Math.sign(ey)!==Math.sign(Co)&&(Co=0),Co+=ey,Math.abs(Co)>vn()&&(yn("swipeThresholdReached",{direction:Co>0?t$4:e$7}),r$k(window,Xl),d$m(window,Wl))}function Xl(Yl){if(r$k(window,Xl),d$m(window,Wl),To=!1,!Io()){yn("swipeFailed");return}const Zl=f$r(Yl);yn("swipeEnd",{x:Zl.x,y:Zl.y})}return n$f(cr,$l),{destroy(){v$j(cr,$l)}}}function t$3(cr,vn){cr.addEventListener("mouseenter",vn)}function r$j(cr,vn){cr.removeEventListener("mouseenter",vn)}function v$i(cr,vn){cr.addEventListener("mouseleave",vn)}function o$d(cr,vn){cr.removeEventListener("mouseleave",vn)}function h$g(cr){const vn=c$m(cr);function yn(){v$i(cr,Rn),vn("hovered",{value:!0})}function Rn(){vn("hovered",{value:!1}),o$d(cr,Rn)}return t$3(cr,yn),{destroy(){r$j(cr,yn),o$d(cr,Rn)}}}const s$7=(cr,vn)=>{const yn=vn.x-cr.x,Rn=vn.y-cr.y;return Math.sqrt(yn*yn+Rn*Rn)};function r$i(cr,vn,yn){return Math.max(cr,Math.min(vn,yn))}function n$e(cr,vn){cr.addEventListener("touchstart",vn,{passive:!0})}function o$c(cr,vn){cr.removeEventListener("touchstart",vn)}function r$h(cr,vn){cr.addEventListener("touchend",vn)}function s$6(cr,vn){cr.removeEventListener("touchend",vn)}function y$i(cr){const vn=c$m(cr);let yn=0,Rn={x:0,y:0};function Bn({tapEndedAt:To,tapEndedPos:Io}){const $l=To-yn,Wl=s$7(Rn,Io);return $l<=_$9&&Wl<=I$e}function Co(To){yn=Date.now();const Io=To.touches[0];Rn={x:Io.clientX,y:Io.clientY},r$h(cr,Po)}function Po(To){s$6(cr,Po);const Io=To.changedTouches[0];Bn({tapEndedAt:Date.now(),tapEndedPos:{x:Io.clientX,y:Io.clientY}})&&vn("tapped")}return n$e(cr,Co),{destroy(){o$c(cr,Co),s$6(cr,Po)}}}function a$f({currentParticleIndex:cr,particlesCount:vn,clonesCountHead:yn,clonesCountTotal:Rn,particlesToScroll:Bn}){return cr===vn-yn?0:cr===0?g$m({particlesCountWithoutClones:vn-Rn,particlesToScroll:Bn})-1:Math.floor((cr-yn)/Bn)}function x$h({currentParticleIndex:cr,particlesToScroll:vn}){return Math.ceil(cr/vn)}function M$d({currentParticleIndex:cr,particlesCount:vn,clonesCountHead:yn,clonesCountTotal:Rn,infinite:Bn,particlesToScroll:Co}){return Bn?a$f({currentParticleIndex:cr,particlesCount:vn,clonesCountHead:yn,clonesCountTotal:Rn,particlesToScroll:Co}):x$h({currentParticleIndex:cr,particlesToScroll:Co})}function g$m({particlesCountWithoutClones:cr,particlesToScroll:vn}){return Math.ceil(cr/vn)}function d$l({particlesCountWithoutClones:cr,particlesToScroll:vn,particlesToShow:yn}){const Rn=m$g({particlesCountWithoutClones:cr,particlesToScroll:vn,particlesToShow:yn});return Math.ceil(cr/vn)-Rn}function h$f({infinite:cr,particlesCountWithoutClones:vn,particlesToScroll:yn,particlesToShow:Rn}){return cr?g$m({particlesCountWithoutClones:vn,particlesToScroll:yn}):d$l({particlesCountWithoutClones:vn,particlesToScroll:yn,particlesToShow:Rn})}function I$d({pageIndex:cr,clonesCountHead:vn,clonesCountTail:yn,particlesToScroll:Rn,particlesCount:Bn}){return r$i(0,Math.min(vn+cr*Rn,Bn-yn),Bn-1)}function y$h({pageIndex:cr,particlesToScroll:vn,particlesCount:yn,particlesToShow:Rn}){return r$i(0,Math.min(cr*vn,yn-Rn),yn-1)}function _$8({infinite:cr,pageIndex:vn,clonesCountHead:yn,clonesCountTail:Rn,particlesToScroll:Bn,particlesCount:Co,particlesToShow:Po}){return cr?I$d({pageIndex:vn,clonesCountHead:yn,clonesCountTail:Rn,particlesToScroll:Bn,particlesCount:Co}):y$h({pageIndex:vn,particlesToScroll:Bn,particlesCount:Co,particlesToShow:Po})}function c$l({particlesContainerChildren:cr,particleWidth:vn}){for(let yn=0;yn<cr.length;yn++)cr[yn].style.minWidth=`${vn}px`,cr[yn].style.maxWidth=`${vn}px`}function m$g({particlesToScroll:cr,particlesToShow:vn,particlesCountWithoutClones:yn}){const Rn=cr-vn;let Bn=vn;for(;;){const Co=yn-Bn-Rn;if(Co<vn)return Math.max(Co,0);Bn+=vn+Rn}}function z$8(cr){return new ResizeObserver(vn=>{cr({width:vn[0].contentRect.width})})}var g$l=Object.defineProperty,p$p=Object.defineProperties,a$e=Object.getOwnPropertyDescriptors,f$q=Object.getOwnPropertySymbols,i$a=Object.prototype.hasOwnProperty,r$g=Object.prototype.propertyIsEnumerable,h$e=(cr,vn,yn)=>vn in cr?g$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,s$5=(cr,vn)=>{for(var yn in vn||(vn={}))i$a.call(vn,yn)&&h$e(cr,yn,vn[yn]);if(f$q)for(var yn of f$q(vn))r$g.call(vn,yn)&&h$e(cr,yn,vn[yn]);return cr},d$k=(cr,vn)=>p$p(cr,a$e(vn));function N$9({clonesCountHead:cr,clonesCountTail:vn,particlesContainerChildren:yn}){const Rn=[];for(let Po=0;Po<vn;Po++)Rn.push(yn[Po].cloneNode(!0));const Bn=[],Co=yn.length;for(let Po=Co-1;Po>Co-1-cr;Po--)Bn.push(yn[Po].cloneNode(!0));return{clonesToAppend:Rn,clonesToPrepend:Bn}}function x$g({particlesContainer:cr,clonesToAppend:vn,clonesToPrepend:yn}){for(let Rn=0;Rn<vn.length;Rn++)cr.append(vn[Rn]);for(let Rn=0;Rn<yn.length;Rn++)cr.prepend(yn[Rn])}function y$g({infinite:cr,particlesToShow:vn,partialPageSize:yn}){const Rn=cr?{head:Math.ceil(yn||vn),tail:Math.ceil(vn)}:{head:0,tail:0};return d$k(s$5({},Rn),{total:Rn.head+Rn.tail})}const o$b=(cr,vn,yn)=>{if(cr&&cr.hasOwnProperty(vn))return cr[vn];if(yn===void 0)throw new Error(`Required arg "${vn}" was not provided`);return yn},w$e=cr=>vn=>{cr[vn]&&cr[vn]()};var e$6=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},$$4="Expected a function",O$c="__lodash_hash_undefined__",j$f=1/0,D$d="[object Function]",N$8="[object GeneratorFunction]",F$8="[object Symbol]",H$d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G$7=/^\w*$/,R$a=/^\./,A$g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M$c=/[\\^$.*+?()[\]{}|]/g,K$7=/\\(\\)?/g,L$a=/^\[object .+?Constructor\]$/,z$7=typeof e$6=="object"&&e$6&&e$6.Object===Object&&e$6,U$7=typeof self=="object"&&self&&self.Object===Object&&self,d$j=z$7||U$7||Function("return this")();function q$c(cr,vn){return cr==null?void 0:cr[vn]}function J$7(cr){var vn=!1;if(cr!=null&&typeof cr.toString!="function")try{vn=!!(cr+"")}catch{}return vn}var V$5=Array.prototype,X$4=Function.prototype,w$d=Object.prototype,l$i=d$j["__core-js_shared__"],m$f=function(){var cr=/[^.]+$/.exec(l$i&&l$i.keys&&l$i.keys.IE_PROTO||"");return cr?"Symbol(src)_1."+cr:""}(),x$f=X$4.toString,_$7=w$d.hasOwnProperty,P$f=w$d.toString,Y$5=RegExp("^"+x$f.call(_$7).replace(M$c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v$h=d$j.Symbol,B$d=V$5.splice,Q$4=T$9(d$j,"Map"),u$i=T$9(Object,"create"),C$8=v$h?v$h.prototype:void 0,S$c=C$8?C$8.toString:void 0;function a$d(cr){var vn=-1,yn=cr?cr.length:0;for(this.clear();++vn<yn;){var Rn=cr[vn];this.set(Rn[0],Rn[1])}}function W$7(){this.__data__=u$i?u$i(null):{}}function Z$5(cr){return this.has(cr)&&delete this.__data__[cr]}function k$a(cr){var vn=this.__data__;if(u$i){var yn=vn[cr];return yn===O$c?void 0:yn}return _$7.call(vn,cr)?vn[cr]:void 0}function tt$1(cr){var vn=this.__data__;return u$i?vn[cr]!==void 0:_$7.call(vn,cr)}function et(cr,vn){var yn=this.__data__;return yn[cr]=u$i&&vn===void 0?O$c:vn,this}a$d.prototype.clear=W$7;a$d.prototype.delete=Z$5;a$d.prototype.get=k$a;a$d.prototype.has=tt$1;a$d.prototype.set=et;function i$9(cr){var vn=-1,yn=cr?cr.length:0;for(this.clear();++vn<yn;){var Rn=cr[vn];this.set(Rn[0],Rn[1])}}function rt$2(){this.__data__=[]}function nt$2(cr){var vn=this.__data__,yn=h$d(vn,cr);if(yn<0)return!1;var Rn=vn.length-1;return yn==Rn?vn.pop():B$d.call(vn,yn,1),!0}function at$2(cr){var vn=this.__data__,yn=h$d(vn,cr);return yn<0?void 0:vn[yn][1]}function ot$2(cr){return h$d(this.__data__,cr)>-1}function it$3(cr,vn){var yn=this.__data__,Rn=h$d(yn,cr);return Rn<0?yn.push([cr,vn]):yn[Rn][1]=vn,this}i$9.prototype.clear=rt$2;i$9.prototype.delete=nt$2;i$9.prototype.get=at$2;i$9.prototype.has=ot$2;i$9.prototype.set=it$3;function o$a(cr){var vn=-1,yn=cr?cr.length:0;for(this.clear();++vn<yn;){var Rn=cr[vn];this.set(Rn[0],Rn[1])}}function ct$2(){this.__data__={hash:new a$d,map:new(Q$4||i$9),string:new a$d}}function st$1(cr){return p$o(this,cr).delete(cr)}function ut$1(cr){return p$o(this,cr).get(cr)}function ft(cr){return p$o(this,cr).has(cr)}function ht$1(cr,vn){return p$o(this,cr).set(cr,vn),this}o$a.prototype.clear=ct$2;o$a.prototype.delete=st$1;o$a.prototype.get=ut$1;o$a.prototype.has=ft;o$a.prototype.set=ht$1;function h$d(cr,vn){for(var yn=cr.length;yn--;)if(St(cr[yn][0],vn))return yn;return-1}function pt(cr,vn){vn=yt$1(vn,cr)?[vn]:_t$1(vn);for(var yn=0,Rn=vn.length;cr!=null&&yn<Rn;)cr=cr[vt$1(vn[yn++])];return yn&&yn==Rn?cr:void 0}function lt$1(cr){if(!E$g(cr)||bt$1(cr))return!1;var vn=Ot(cr)||J$7(cr)?Y$5:L$a;return vn.test(Ct(cr))}function dt$1(cr){if(typeof cr=="string")return cr;if(g$k(cr))return S$c?S$c.call(cr):"";var vn=cr+"";return vn=="0"&&1/cr==-j$f?"-0":vn}function _t$1(cr){return I$c(cr)?cr:mt$1(cr)}function p$o(cr,vn){var yn=cr.__data__;return gt$2(vn)?yn[typeof vn=="string"?"string":"hash"]:yn.map}function T$9(cr,vn){var yn=q$c(cr,vn);return lt$1(yn)?yn:void 0}function yt$1(cr,vn){if(I$c(cr))return!1;var yn=typeof cr;return yn=="number"||yn=="symbol"||yn=="boolean"||cr==null||g$k(cr)?!0:G$7.test(cr)||!H$d.test(cr)||vn!=null&&cr in Object(vn)}function gt$2(cr){var vn=typeof cr;return vn=="string"||vn=="number"||vn=="symbol"||vn=="boolean"?cr!=="__proto__":cr===null}function bt$1(cr){return!!m$f&&m$f in cr}var mt$1=y$f(function(cr){cr=wt(cr);var vn=[];return R$a.test(cr)&&vn.push(""),cr.replace(A$g,function(yn,Rn,Bn,Co){vn.push(Bn?Co.replace(K$7,"$1"):Rn||yn)}),vn});function vt$1(cr){if(typeof cr=="string"||g$k(cr))return cr;var vn=cr+"";return vn=="0"&&1/cr==-j$f?"-0":vn}function Ct(cr){if(cr!=null){try{return x$f.call(cr)}catch{}try{return cr+""}catch{}}return""}function y$f(cr,vn){if(typeof cr!="function"||vn&&typeof vn!="function")throw new TypeError($$4);var yn=function(){var Rn=arguments,Bn=vn?vn.apply(this,Rn):Rn[0],Co=yn.cache;if(Co.has(Bn))return Co.get(Bn);var Po=cr.apply(this,Rn);return yn.cache=Co.set(Bn,Po),Po};return yn.cache=new(y$f.Cache||o$a),yn}y$f.Cache=o$a;function St(cr,vn){return cr===vn||cr!==cr&&vn!==vn}var I$c=Array.isArray;function Ot(cr){var vn=E$g(cr)?P$f.call(cr):"";return vn==D$d||vn==N$8}function E$g(cr){var vn=typeof cr;return!!cr&&(vn=="object"||vn=="function")}function jt$1(cr){return!!cr&&typeof cr=="object"}function g$k(cr){return typeof cr=="symbol"||jt$1(cr)&&P$f.call(cr)==F$8}function wt(cr){return cr==null?"":dt$1(cr)}function xt$1(cr,vn,yn){var Rn=cr==null?void 0:pt(cr,vn);return Rn===void 0?yn:Rn}var Tt=xt$1,M$b={},pe$2={get exports(){return M$b},set exports(cr){M$b=cr}};(function(cr,vn){var yn=200,Rn="__lodash_hash_undefined__",Bn=9007199254740991,Co="[object Arguments]",Po="[object Array]",To="[object Boolean]",Io="[object Date]",$l="[object Error]",Wl="[object Function]",Xl="[object GeneratorFunction]",Yl="[object Map]",Zl="[object Number]",ey="[object Object]",Rm="[object Promise]",ry="[object RegExp]",_g="[object Set]",ty="[object String]",ny="[object Symbol]",iy="[object WeakMap]",oy="[object ArrayBuffer]",ay="[object DataView]",uy="[object Float32Array]",hy="[object Float64Array]",my="[object Int8Array]",ly="[object Int16Array]",sy="[object Int32Array]",cy="[object Uint8Array]",fy="[object Uint8ClampedArray]",vy="[object Uint16Array]",dy="[object Uint32Array]",Ay=/[\\^$.*+?()[\]{}|]/g,gy=/\w*$/,wy=/^\[object .+?Constructor\]$/,Cy=/^(?:0|[1-9]\d*)$/,My={};My[Co]=My[Po]=My[oy]=My[ay]=My[To]=My[Io]=My[uy]=My[hy]=My[my]=My[ly]=My[sy]=My[Yl]=My[Zl]=My[ey]=My[ry]=My[_g]=My[ty]=My[ny]=My[cy]=My[fy]=My[vy]=My[dy]=!0,My[$l]=My[Wl]=My[iy]=!1;var Py=typeof e$6=="object"&&e$6&&e$6.Object===Object&&e$6,Dy=typeof self=="object"&&self&&self.Object===Object&&self,qy=Py||Dy||Function("return this")(),Xy=vn&&!vn.nodeType&&vn,$y=Xy&&!0&&cr&&!cr.nodeType&&cr,xy=$y&&$y.exports===Xy;function Ry(by,By){return by.set(By[0],By[1]),by}function Ly(by,By){return by.add(By),by}function ky(by,By){for(var Ky=-1,d1=by?by.length:0;++Ky<d1&&By(by[Ky],Ky,by)!==!1;);return by}function Ey(by,By){for(var Ky=-1,d1=By.length,U1=by.length;++Ky<d1;)by[U1+Ky]=By[Ky];return by}function Iy(by,By,Ky,d1){var U1=-1,I1=by?by.length:0;for(d1&&I1&&(Ky=by[++U1]);++U1<I1;)Ky=By(Ky,by[U1],U1,by);return Ky}function zy(by,By){for(var Ky=-1,d1=Array(by);++Ky<by;)d1[Ky]=By(Ky);return d1}function Uy(by,By){return by==null?void 0:by[By]}function Qy(by){var By=!1;if(by!=null&&typeof by.toString!="function")try{By=!!(by+"")}catch{}return By}function Gy(by){var By=-1,Ky=Array(by.size);return by.forEach(function(d1,U1){Ky[++By]=[U1,d1]}),Ky}function Zy(by,By){return function(Ky){return by(By(Ky))}}function Ty(by){var By=-1,Ky=Array(by.size);return by.forEach(function(d1){Ky[++By]=d1}),Ky}var Vy=Array.prototype,Yy=Function.prototype,Jy=Object.prototype,Hy=qy["__core-js_shared__"],i1=function(){var by=/[^.]+$/.exec(Hy&&Hy.keys&&Hy.keys.IE_PROTO||"");return by?"Symbol(src)_1."+by:""}(),u1=Yy.toString,p1=Jy.hasOwnProperty,g1=Jy.toString,v1=RegExp("^"+u1.call(p1).replace(Ay,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h1=xy?qy.Buffer:void 0,l1=qy.Symbol,o1=qy.Uint8Array,t1=Zy(Object.getPrototypeOf,Object),Wy=Object.create,f1=Jy.propertyIsEnumerable,m1=Vy.splice,w1=Object.getOwnPropertySymbols,c1=h1?h1.isBuffer:void 0,M1=Zy(Object.keys,Object),L1=Sy(qy,"DataView"),B1=Sy(qy,"Map"),D1=Sy(qy,"Promise"),O1=Sy(qy,"Set"),j1=Sy(qy,"WeakMap"),k1=Sy(Object,"create"),q1=wx(L1),_b=wx(B1),Q1=wx(D1),Y1=wx(O1),jy=wx(j1),r1=l1?l1.prototype:void 0,n1=r1?r1.valueOf:void 0;function a1(by){var By=-1,Ky=by?by.length:0;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function y1(){this.__data__=k1?k1(null):{}}function _1(by){return this.has(by)&&delete this.__data__[by]}function E1(by){var By=this.__data__;if(k1){var Ky=By[by];return Ky===Rn?void 0:Ky}return p1.call(By,by)?By[by]:void 0}function b1(by){var By=this.__data__;return k1?By[by]!==void 0:p1.call(By,by)}function S1(by,By){var Ky=this.__data__;return Ky[by]=k1&&By===void 0?Rn:By,this}a1.prototype.clear=y1,a1.prototype.delete=_1,a1.prototype.get=E1,a1.prototype.has=b1,a1.prototype.set=S1;function x1(by){var By=-1,Ky=by?by.length:0;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function W1(){this.__data__=[]}function N1(by){var By=this.__data__,Ky=ox(By,by);if(Ky<0)return!1;var d1=By.length-1;return Ky==d1?By.pop():m1.call(By,Ky,1),!0}function R1(by){var By=this.__data__,Ky=ox(By,by);return Ky<0?void 0:By[Ky][1]}function $1(by){return ox(this.__data__,by)>-1}function C1(by,By){var Ky=this.__data__,d1=ox(Ky,by);return d1<0?Ky.push([by,By]):Ky[d1][1]=By,this}x1.prototype.clear=W1,x1.prototype.delete=N1,x1.prototype.get=R1,x1.prototype.has=$1,x1.prototype.set=C1;function T1(by){var By=-1,Ky=by?by.length:0;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function F1(){this.__data__={hash:new a1,map:new(B1||x1),string:new a1}}function z1(by){return yy(this,by).delete(by)}function Z1(by){return yy(this,by).get(by)}function H1(by){return yy(this,by).has(by)}function nx(by,By){return yy(this,by).set(by,By),this}T1.prototype.clear=F1,T1.prototype.delete=z1,T1.prototype.get=Z1,T1.prototype.has=H1,T1.prototype.set=nx;function J1(by){this.__data__=new x1(by)}function Ix(){this.__data__=new x1}function Px(by){return this.__data__.delete(by)}function ax(by){return this.__data__.get(by)}function ix(by){return this.__data__.has(by)}function hx(by,By){var Ky=this.__data__;if(Ky instanceof x1){var d1=Ky.__data__;if(!B1||d1.length<yn-1)return d1.push([by,By]),this;Ky=this.__data__=new T1(d1)}return Ky.set(by,By),this}J1.prototype.clear=Ix,J1.prototype.delete=Px,J1.prototype.get=ax,J1.prototype.has=ix,J1.prototype.set=hx;function rx(by,By){var Ky=Hx(by)||jx(by)?zy(by.length,String):[],d1=Ky.length,U1=!!d1;for(var I1 in by)(By||p1.call(by,I1))&&!(U1&&(I1=="length"||G1(I1,d1)))&&Ky.push(I1);return Ky}function sx(by,By,Ky){var d1=by[By];(!(p1.call(by,By)&&Qx(d1,Ky))||Ky===void 0&&!(By in by))&&(by[By]=Ky)}function ox(by,By){for(var Ky=by.length;Ky--;)if(Qx(by[Ky][0],By))return Ky;return-1}function IA(by,By){return by&&kx(By,qx(By),by)}function fx(by,By,Ky,d1,U1,I1,X1){var K1;if(d1&&(K1=I1?d1(by,U1,I1,X1):d1(by)),K1!==void 0)return K1;if(!Bx(by))return by;var ux=Hx(by);if(ux){if(K1=s1(by),!By)return Rx(by,K1)}else{var ex=e1(by),yx=ex==Wl||ex==Xl;if(Xx(by))return Mx(by,By);if(ex==ey||ex==Co||yx&&!I1){if(Qy(by))return I1?by:{};if(K1=A1(yx?{}:by),!By)return Oy(by,IA(K1,by))}else{if(!My[ex])return I1?by:{};K1=P1(by,ex,fx,By)}}X1||(X1=new J1);var Sx=X1.get(by);if(Sx)return Sx;if(X1.set(by,K1),!ux)var dx=Ky?Ny(by):qx(by);return ky(dx||by,function(Ax,mx){dx&&(mx=Ax,Ax=by[mx]),sx(K1,mx,fx(Ax,By,Ky,d1,mx,by,X1))}),K1}function Dx(by){return Bx(by)?Wy(by):{}}function Ox(by,By,Ky){var d1=By(by);return Hx(by)?d1:Ey(d1,Ky(by))}function lx(by){return g1.call(by)}function cx(by){if(!Bx(by)||vx(by))return!1;var By=Gx(by)||Qy(by)?v1:wy;return By.test(wx(by))}function Tx(by){if(!$x(by))return M1(by);var By=[];for(var Ky in Object(by))p1.call(by,Ky)&&Ky!="constructor"&&By.push(Ky);return By}function Mx(by,By){if(By)return by.slice();var Ky=new by.constructor(by.length);return by.copy(Ky),Ky}function Ex(by){var By=new by.constructor(by.byteLength);return new o1(By).set(new o1(by)),By}function bx(by,By){var Ky=By?Ex(by.buffer):by.buffer;return new by.constructor(Ky,by.byteOffset,by.byteLength)}function Cx(by,By,Ky){var d1=By?Ky(Gy(by),!0):Gy(by);return Iy(d1,Ry,new by.constructor)}function gx(by){var By=new by.constructor(by.source,gy.exec(by));return By.lastIndex=by.lastIndex,By}function xx(by,By,Ky){var d1=By?Ky(Ty(by),!0):Ty(by);return Iy(d1,Ly,new by.constructor)}function Fx(by){return n1?Object(n1.call(by)):{}}function Lx(by,By){var Ky=By?Ex(by.buffer):by.buffer;return new by.constructor(Ky,by.byteOffset,by.length)}function Rx(by,By){var Ky=-1,d1=by.length;for(By||(By=Array(d1));++Ky<d1;)By[Ky]=by[Ky];return By}function kx(by,By,Ky,d1){Ky||(Ky={});for(var U1=-1,I1=By.length;++U1<I1;){var X1=By[U1],K1=d1?d1(Ky[X1],by[X1],X1,Ky,by):void 0;sx(Ky,X1,K1===void 0?by[X1]:K1)}return Ky}function Oy(by,By){return kx(by,Fy(by),By)}function Ny(by){return Ox(by,qx,Fy)}function yy(by,By){var Ky=by.__data__;return tx(By)?Ky[typeof By=="string"?"string":"hash"]:Ky.map}function Sy(by,By){var Ky=Uy(by,By);return cx(Ky)?Ky:void 0}var Fy=w1?Zy(w1,Object):t$,e1=lx;(L1&&e1(new L1(new ArrayBuffer(1)))!=ay||B1&&e1(new B1)!=Yl||D1&&e1(D1.resolve())!=Rm||O1&&e1(new O1)!=_g||j1&&e1(new j1)!=iy)&&(e1=function(by){var By=g1.call(by),Ky=By==ey?by.constructor:void 0,d1=Ky?wx(Ky):void 0;if(d1)switch(d1){case q1:return ay;case _b:return Yl;case Q1:return Rm;case Y1:return _g;case jy:return iy}return By});function s1(by){var By=by.length,Ky=by.constructor(By);return By&&typeof by[0]=="string"&&p1.call(by,"index")&&(Ky.index=by.index,Ky.input=by.input),Ky}function A1(by){return typeof by.constructor=="function"&&!$x(by)?Dx(t1(by)):{}}function P1(by,By,Ky,d1){var U1=by.constructor;switch(By){case oy:return Ex(by);case To:case Io:return new U1(+by);case ay:return bx(by,d1);case uy:case hy:case my:case ly:case sy:case cy:case fy:case vy:case dy:return Lx(by,d1);case Yl:return Cx(by,d1,Ky);case Zl:case ty:return new U1(by);case ry:return gx(by);case _g:return xx(by,d1,Ky);case ny:return Fx(by)}}function G1(by,By){return By=By==null?Bn:By,!!By&&(typeof by=="number"||Cy.test(by))&&by>-1&&by%1==0&&by<By}function tx(by){var By=typeof by;return By=="string"||By=="number"||By=="symbol"||By=="boolean"?by!=="__proto__":by===null}function vx(by){return!!i1&&i1 in by}function $x(by){var By=by&&by.constructor,Ky=typeof By=="function"&&By.prototype||Jy;return by===Ky}function wx(by){if(by!=null){try{return u1.call(by)}catch{}try{return by+""}catch{}}return""}function Wx(by){return fx(by,!0,!0)}function Qx(by,By){return by===By||by!==by&&By!==By}function jx(by){return e$(by)&&p1.call(by,"callee")&&(!f1.call(by,"callee")||g1.call(by)==Co)}var Hx=Array.isArray;function Ux(by){return by!=null&&Jx(by.length)&&!Gx(by)}function e$(by){return Kx(by)&&Ux(by)}var Xx=c1||r$;function Gx(by){var By=Bx(by)?g1.call(by):"";return By==Wl||By==Xl}function Jx(by){return typeof by=="number"&&by>-1&&by%1==0&&by<=Bn}function Bx(by){var By=typeof by;return!!by&&(By=="object"||By=="function")}function Kx(by){return!!by&&typeof by=="object"}function qx(by){return Ux(by)?rx(by):Tx(by)}function t$(){return[]}function r$(){return!1}cr.exports=Wx})(pe$2,M$b);const ge$4=M$b;var Y$4={},bn={get exports(){return Y$4},set exports(cr){Y$4=cr}};(function(cr,vn){var yn=200,Rn="__lodash_hash_undefined__",Bn=1,Co=2,Po=9007199254740991,To="[object Arguments]",Io="[object Array]",$l="[object AsyncFunction]",Wl="[object Boolean]",Xl="[object Date]",Yl="[object Error]",Zl="[object Function]",ey="[object GeneratorFunction]",Rm="[object Map]",ry="[object Number]",_g="[object Null]",ty="[object Object]",ny="[object Promise]",iy="[object Proxy]",oy="[object RegExp]",ay="[object Set]",uy="[object String]",hy="[object Symbol]",my="[object Undefined]",ly="[object WeakMap]",sy="[object ArrayBuffer]",cy="[object DataView]",fy="[object Float32Array]",vy="[object Float64Array]",dy="[object Int8Array]",Ay="[object Int16Array]",gy="[object Int32Array]",wy="[object Uint8Array]",Cy="[object Uint8ClampedArray]",My="[object Uint16Array]",Py="[object Uint32Array]",Dy=/[\\^$.*+?()[\]{}|]/g,qy=/^\[object .+?Constructor\]$/,Xy=/^(?:0|[1-9]\d*)$/,$y={};$y[fy]=$y[vy]=$y[dy]=$y[Ay]=$y[gy]=$y[wy]=$y[Cy]=$y[My]=$y[Py]=!0,$y[To]=$y[Io]=$y[sy]=$y[Wl]=$y[cy]=$y[Xl]=$y[Yl]=$y[Zl]=$y[Rm]=$y[ry]=$y[ty]=$y[oy]=$y[ay]=$y[uy]=$y[ly]=!1;var xy=typeof e$6=="object"&&e$6&&e$6.Object===Object&&e$6,Ry=typeof self=="object"&&self&&self.Object===Object&&self,Ly=xy||Ry||Function("return this")(),ky=vn&&!vn.nodeType&&vn,Ey=ky&&!0&&cr&&!cr.nodeType&&cr,Iy=Ey&&Ey.exports===ky,zy=Iy&&xy.process,Uy=function(){try{return zy&&zy.binding&&zy.binding("util")}catch{}}(),Qy=Uy&&Uy.isTypedArray;function Gy(by,By){for(var Ky=-1,d1=by==null?0:by.length,U1=0,I1=[];++Ky<d1;){var X1=by[Ky];By(X1,Ky,by)&&(I1[U1++]=X1)}return I1}function Zy(by,By){for(var Ky=-1,d1=By.length,U1=by.length;++Ky<d1;)by[U1+Ky]=By[Ky];return by}function Ty(by,By){for(var Ky=-1,d1=by==null?0:by.length;++Ky<d1;)if(By(by[Ky],Ky,by))return!0;return!1}function Vy(by,By){for(var Ky=-1,d1=Array(by);++Ky<by;)d1[Ky]=By(Ky);return d1}function Yy(by){return function(By){return by(By)}}function Jy(by,By){return by.has(By)}function Hy(by,By){return by==null?void 0:by[By]}function i1(by){var By=-1,Ky=Array(by.size);return by.forEach(function(d1,U1){Ky[++By]=[U1,d1]}),Ky}function u1(by,By){return function(Ky){return by(By(Ky))}}function p1(by){var By=-1,Ky=Array(by.size);return by.forEach(function(d1){Ky[++By]=d1}),Ky}var g1=Array.prototype,v1=Function.prototype,h1=Object.prototype,l1=Ly["__core-js_shared__"],o1=v1.toString,t1=h1.hasOwnProperty,Wy=function(){var by=/[^.]+$/.exec(l1&&l1.keys&&l1.keys.IE_PROTO||"");return by?"Symbol(src)_1."+by:""}(),f1=h1.toString,m1=RegExp("^"+o1.call(t1).replace(Dy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w1=Iy?Ly.Buffer:void 0,c1=Ly.Symbol,M1=Ly.Uint8Array,L1=h1.propertyIsEnumerable,B1=g1.splice,D1=c1?c1.toStringTag:void 0,O1=Object.getOwnPropertySymbols,j1=w1?w1.isBuffer:void 0,k1=u1(Object.keys,Object),q1=Fy(Ly,"DataView"),_b=Fy(Ly,"Map"),Q1=Fy(Ly,"Promise"),Y1=Fy(Ly,"Set"),jy=Fy(Ly,"WeakMap"),r1=Fy(Object,"create"),n1=wx(q1),a1=wx(_b),y1=wx(Q1),_1=wx(Y1),E1=wx(jy),b1=c1?c1.prototype:void 0,S1=b1?b1.valueOf:void 0;function x1(by){var By=-1,Ky=by==null?0:by.length;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function W1(){this.__data__=r1?r1(null):{},this.size=0}function N1(by){var By=this.has(by)&&delete this.__data__[by];return this.size-=By?1:0,By}function R1(by){var By=this.__data__;if(r1){var Ky=By[by];return Ky===Rn?void 0:Ky}return t1.call(By,by)?By[by]:void 0}function $1(by){var By=this.__data__;return r1?By[by]!==void 0:t1.call(By,by)}function C1(by,By){var Ky=this.__data__;return this.size+=this.has(by)?0:1,Ky[by]=r1&&By===void 0?Rn:By,this}x1.prototype.clear=W1,x1.prototype.delete=N1,x1.prototype.get=R1,x1.prototype.has=$1,x1.prototype.set=C1;function T1(by){var By=-1,Ky=by==null?0:by.length;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function F1(){this.__data__=[],this.size=0}function z1(by){var By=this.__data__,Ky=Mx(By,by);if(Ky<0)return!1;var d1=By.length-1;return Ky==d1?By.pop():B1.call(By,Ky,1),--this.size,!0}function Z1(by){var By=this.__data__,Ky=Mx(By,by);return Ky<0?void 0:By[Ky][1]}function H1(by){return Mx(this.__data__,by)>-1}function nx(by,By){var Ky=this.__data__,d1=Mx(Ky,by);return d1<0?(++this.size,Ky.push([by,By])):Ky[d1][1]=By,this}T1.prototype.clear=F1,T1.prototype.delete=z1,T1.prototype.get=Z1,T1.prototype.has=H1,T1.prototype.set=nx;function J1(by){var By=-1,Ky=by==null?0:by.length;for(this.clear();++By<Ky;){var d1=by[By];this.set(d1[0],d1[1])}}function Ix(){this.size=0,this.__data__={hash:new x1,map:new(_b||T1),string:new x1}}function Px(by){var By=Sy(this,by).delete(by);return this.size-=By?1:0,By}function ax(by){return Sy(this,by).get(by)}function ix(by){return Sy(this,by).has(by)}function hx(by,By){var Ky=Sy(this,by),d1=Ky.size;return Ky.set(by,By),this.size+=Ky.size==d1?0:1,this}J1.prototype.clear=Ix,J1.prototype.delete=Px,J1.prototype.get=ax,J1.prototype.has=ix,J1.prototype.set=hx;function rx(by){var By=-1,Ky=by==null?0:by.length;for(this.__data__=new J1;++By<Ky;)this.add(by[By])}function sx(by){return this.__data__.set(by,Rn),this}function ox(by){return this.__data__.has(by)}rx.prototype.add=rx.prototype.push=sx,rx.prototype.has=ox;function IA(by){var By=this.__data__=new T1(by);this.size=By.size}function fx(){this.__data__=new T1,this.size=0}function Dx(by){var By=this.__data__,Ky=By.delete(by);return this.size=By.size,Ky}function Ox(by){return this.__data__.get(by)}function lx(by){return this.__data__.has(by)}function cx(by,By){var Ky=this.__data__;if(Ky instanceof T1){var d1=Ky.__data__;if(!_b||d1.length<yn-1)return d1.push([by,By]),this.size=++Ky.size,this;Ky=this.__data__=new J1(d1)}return Ky.set(by,By),this.size=Ky.size,this}IA.prototype.clear=fx,IA.prototype.delete=Dx,IA.prototype.get=Ox,IA.prototype.has=lx,IA.prototype.set=cx;function Tx(by,By){var Ky=jx(by),d1=!Ky&&Qx(by),U1=!Ky&&!d1&&Ux(by),I1=!Ky&&!d1&&!U1&&Kx(by),X1=Ky||d1||U1||I1,K1=X1?Vy(by.length,String):[],ux=K1.length;for(var ex in by)(By||t1.call(by,ex))&&!(X1&&(ex=="length"||U1&&(ex=="offset"||ex=="parent")||I1&&(ex=="buffer"||ex=="byteLength"||ex=="byteOffset")||P1(ex,ux)))&&K1.push(ex);return K1}function Mx(by,By){for(var Ky=by.length;Ky--;)if(Wx(by[Ky][0],By))return Ky;return-1}function Ex(by,By,Ky){var d1=By(by);return jx(by)?d1:Zy(d1,Ky(by))}function bx(by){return by==null?by===void 0?my:_g:D1&&D1 in Object(by)?e1(by):$x(by)}function Cx(by){return Bx(by)&&bx(by)==To}function gx(by,By,Ky,d1,U1){return by===By?!0:by==null||By==null||!Bx(by)&&!Bx(By)?by!==by&&By!==By:xx(by,By,Ky,d1,gx,U1)}function xx(by,By,Ky,d1,U1,I1){var X1=jx(by),K1=jx(By),ux=X1?Io:A1(by),ex=K1?Io:A1(By);ux=ux==To?ty:ux,ex=ex==To?ty:ex;var yx=ux==ty,Sx=ex==ty,dx=ux==ex;if(dx&&Ux(by)){if(!Ux(By))return!1;X1=!0,yx=!1}if(dx&&!yx)return I1||(I1=new IA),X1||Kx(by)?kx(by,By,Ky,d1,U1,I1):Oy(by,By,ux,Ky,d1,U1,I1);if(!(Ky&Bn)){var Ax=yx&&t1.call(by,"__wrapped__"),mx=Sx&&t1.call(By,"__wrapped__");if(Ax||mx){var zx=Ax?by.value():by,Vx=mx?By.value():By;return I1||(I1=new IA),U1(zx,Vx,Ky,d1,I1)}}return dx?(I1||(I1=new IA),Ny(by,By,Ky,d1,U1,I1)):!1}function Fx(by){if(!Jx(by)||tx(by))return!1;var By=Xx(by)?m1:qy;return By.test(wx(by))}function Lx(by){return Bx(by)&&Gx(by.length)&&!!$y[bx(by)]}function Rx(by){if(!vx(by))return k1(by);var By=[];for(var Ky in Object(by))t1.call(by,Ky)&&Ky!="constructor"&&By.push(Ky);return By}function kx(by,By,Ky,d1,U1,I1){var X1=Ky&Bn,K1=by.length,ux=By.length;if(K1!=ux&&!(X1&&ux>K1))return!1;var ex=I1.get(by);if(ex&&I1.get(By))return ex==By;var yx=-1,Sx=!0,dx=Ky&Co?new rx:void 0;for(I1.set(by,By),I1.set(By,by);++yx<K1;){var Ax=by[yx],mx=By[yx];if(d1)var zx=X1?d1(mx,Ax,yx,By,by,I1):d1(Ax,mx,yx,by,By,I1);if(zx!==void 0){if(zx)continue;Sx=!1;break}if(dx){if(!Ty(By,function(Vx,Nx){if(!Jy(dx,Nx)&&(Ax===Vx||U1(Ax,Vx,Ky,d1,I1)))return dx.push(Nx)})){Sx=!1;break}}else if(!(Ax===mx||U1(Ax,mx,Ky,d1,I1))){Sx=!1;break}}return I1.delete(by),I1.delete(By),Sx}function Oy(by,By,Ky,d1,U1,I1,X1){switch(Ky){case cy:if(by.byteLength!=By.byteLength||by.byteOffset!=By.byteOffset)return!1;by=by.buffer,By=By.buffer;case sy:return!(by.byteLength!=By.byteLength||!I1(new M1(by),new M1(By)));case Wl:case Xl:case ry:return Wx(+by,+By);case Yl:return by.name==By.name&&by.message==By.message;case oy:case uy:return by==By+"";case Rm:var K1=i1;case ay:var ux=d1&Bn;if(K1||(K1=p1),by.size!=By.size&&!ux)return!1;var ex=X1.get(by);if(ex)return ex==By;d1|=Co,X1.set(by,By);var yx=kx(K1(by),K1(By),d1,U1,I1,X1);return X1.delete(by),yx;case hy:if(S1)return S1.call(by)==S1.call(By)}return!1}function Ny(by,By,Ky,d1,U1,I1){var X1=Ky&Bn,K1=yy(by),ux=K1.length,ex=yy(By),yx=ex.length;if(ux!=yx&&!X1)return!1;for(var Sx=ux;Sx--;){var dx=K1[Sx];if(!(X1?dx in By:t1.call(By,dx)))return!1}var Ax=I1.get(by);if(Ax&&I1.get(By))return Ax==By;var mx=!0;I1.set(by,By),I1.set(By,by);for(var zx=X1;++Sx<ux;){dx=K1[Sx];var Vx=by[dx],Nx=By[dx];if(d1)var n$=X1?d1(Nx,Vx,dx,By,by,I1):d1(Vx,Nx,dx,by,By,I1);if(!(n$===void 0?Vx===Nx||U1(Vx,Nx,Ky,d1,I1):n$)){mx=!1;break}zx||(zx=dx=="constructor")}if(mx&&!zx){var Yx=by.constructor,Zx=By.constructor;Yx!=Zx&&"constructor"in by&&"constructor"in By&&!(typeof Yx=="function"&&Yx instanceof Yx&&typeof Zx=="function"&&Zx instanceof Zx)&&(mx=!1)}return I1.delete(by),I1.delete(By),mx}function yy(by){return Ex(by,qx,s1)}function Sy(by,By){var Ky=by.__data__;return G1(By)?Ky[typeof By=="string"?"string":"hash"]:Ky.map}function Fy(by,By){var Ky=Hy(by,By);return Fx(Ky)?Ky:void 0}function e1(by){var By=t1.call(by,D1),Ky=by[D1];try{by[D1]=void 0;var d1=!0}catch{}var U1=f1.call(by);return d1&&(By?by[D1]=Ky:delete by[D1]),U1}var s1=O1?function(by){return by==null?[]:(by=Object(by),Gy(O1(by),function(By){return L1.call(by,By)}))}:t$,A1=bx;(q1&&A1(new q1(new ArrayBuffer(1)))!=cy||_b&&A1(new _b)!=Rm||Q1&&A1(Q1.resolve())!=ny||Y1&&A1(new Y1)!=ay||jy&&A1(new jy)!=ly)&&(A1=function(by){var By=bx(by),Ky=By==ty?by.constructor:void 0,d1=Ky?wx(Ky):"";if(d1)switch(d1){case n1:return cy;case a1:return Rm;case y1:return ny;case _1:return ay;case E1:return ly}return By});function P1(by,By){return By=By==null?Po:By,!!By&&(typeof by=="number"||Xy.test(by))&&by>-1&&by%1==0&&by<By}function G1(by){var By=typeof by;return By=="string"||By=="number"||By=="symbol"||By=="boolean"?by!=="__proto__":by===null}function tx(by){return!!Wy&&Wy in by}function vx(by){var By=by&&by.constructor,Ky=typeof By=="function"&&By.prototype||h1;return by===Ky}function $x(by){return f1.call(by)}function wx(by){if(by!=null){try{return o1.call(by)}catch{}try{return by+""}catch{}}return""}function Wx(by,By){return by===By||by!==by&&By!==By}var Qx=Cx(function(){return arguments}())?Cx:function(by){return Bx(by)&&t1.call(by,"callee")&&!L1.call(by,"callee")},jx=Array.isArray;function Hx(by){return by!=null&&Gx(by.length)&&!Xx(by)}var Ux=j1||r$;function e$(by,By){return gx(by,By)}function Xx(by){if(!Jx(by))return!1;var By=bx(by);return By==Zl||By==ey||By==$l||By==iy}function Gx(by){return typeof by=="number"&&by>-1&&by%1==0&&by<=Po}function Jx(by){var By=typeof by;return by!=null&&(By=="object"||By=="function")}function Bx(by){return by!=null&&typeof by=="object"}var Kx=Qy?Yy(Qy):Lx;function qx(by){return Hx(by)?Tx(by):Rx(by)}function t$(){return[]}function r$(){return!1}cr.exports=e$})(bn,Y$4);const wn=Y$4,p$n=(cr,vn)=>wn(cr,vn),c$k=cr=>Object.keys(cr||{}),u$h=(cr,vn)=>{const yn={};return cr.forEach(Rn=>{yn[Rn]=vn[Rn]}),yn},m$e=()=>{const cr={},vn=(yn,Rn)=>{const{watcherName:Bn,fn:Co}=yn,{prop:Po,value:To}=Rn;cr[Bn]||(cr[Bn]={deps:{},fn:Co}),cr[Bn].deps[Po]=To};return{subscribers:cr,subscribe(yn,Rn){yn&&vn(yn,Rn)},notify(yn,Rn){Object.entries(cr).forEach(([Bn,{deps:Co,fn:Po}])=>{const To=c$k(Co);if(To.includes(Rn)){const Io=u$h(To,yn);p$n(Co,Io)||(cr[Bn].deps=Io,Po())}})}}},a$c=()=>{let cr=null;return{targetWatcher(vn,yn){cr={watcherName:vn,fn:yn},cr.fn(),cr=null},getTarget(){return cr}}};function E$f(cr,vn){const yn=Tt(cr,"data",{}),Rn=Tt(cr,"watch",{}),Bn=Tt(cr,"methods",{}),Co=Tt(vn,"onChange",()=>{}),{subscribe:Po,notify:To,subscribers:Io}=m$e(),{targetWatcher:$l,getTarget:Wl}=a$c();let Xl;const Yl={},Zl=()=>({data:Xl,methods:Yl});let ey=!1;const Rm=_g=>(...ty)=>{ey=!0;const ny=_g(...ty);return ey=!1,ny};Object.entries(Bn).forEach(([_g,ty])=>{Yl[_g]=Rm((...ny)=>ty(Zl(),...ny)),Object.defineProperty(Yl[_g],"name",{value:_g})}),Xl=new Proxy(ge$4(yn),{get(_g,ty){return Wl()&&!ey&&Po(Wl(),{prop:ty,value:_g[ty]}),Reflect.get(...arguments)},set(_g,ty,ny){return _g[ty]===ny||(Reflect.set(...arguments),Wl()||(Co&&Co(ty,ny),To(Xl,ty))),!0}}),Object.entries(Rn).forEach(([_g,ty])=>{$l(_g,()=>{ty(Zl())})});const ry=[Xl,Yl];return ry._internal={_getSubscribers(){return Io}},ry}function l$h({pageIndex:cr,particlesToShow:vn,particlesToScroll:yn,particlesCount:Rn}){const Bn=cr===0?0:vn-yn,Co=cr*vn-cr*Bn,Po=Co+Math.max(vn,yn)-1,To=[];for(let Io=Co;Io<=Math.min(Rn-1,Po);Io++)To.push(Io);return To}function h$c({infinite:cr,pageIndex:vn,pagesCount:yn,particlesCount:Rn,particlesToShow:Bn,particlesToScroll:Co}){const Po=r$i(0,vn,yn-1);let To=Po-1,Io=Po+1;To=cr?To<0?yn-1:To:Math.max(0,To),Io=cr?Io>yn-1?0:Io:Math.min(yn-1,Io);const $l=[...new Set([To,Po,Io,0,yn-1])].sort((Xl,Yl)=>Xl-Yl),Wl=$l.flatMap(Xl=>l$h({pageIndex:Xl,particlesToShow:Bn,particlesToScroll:Co,particlesCount:Rn}));return{pageIndexes:$l,particleIndexes:[...new Set(Wl)].sort((Xl,Yl)=>Xl-Yl)}}const r$f=(cr,vn)=>(cr(),setInterval(cr,vn));var h$b=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const g$j=35,l$g=1;class P$e{constructor({onProgressValueChange:vn}){this._onProgressValueChange=vn,this._autoplayDuration,this._onProgressValueChange,this._interval,this._paused=!1}setAutoplayDuration(vn){this._autoplayDuration=vn}start(vn){return new Promise(yn=>{this.reset();const Rn=Math.min(g$j,Math.max(this._autoplayDuration,1));let Bn=-Rn;this._interval=r$f(()=>h$b(this,null,function*(){if(this._paused)return;Bn+=Rn;const Co=Bn/this._autoplayDuration;this._onProgressValueChange(Co),Co>l$g&&(this.reset(),yield vn(),yn())}),Rn)})}pause(){this._paused=!0}resume(){this._paused=!1}reset(){clearInterval(this._interval),this._onProgressValueChange(l$g)}}var i$8=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});function A$f(cr){const vn=new P$e({onProgressValueChange:Co=>{cr("progressValue",1-Co)}}),yn=E$f({data:{particlesCountWithoutClones:0,particlesToShow:1,particlesToShowInit:1,particlesToScroll:1,particlesToScrollInit:1,particlesCount:1,currentParticleIndex:1,infinite:!1,autoplayDuration:1e3,clonesCountHead:0,clonesCountTail:0,clonesCountTotal:0,partialPageSize:1,currentPageIndex:1,pagesCount:1,pauseOnFocus:!1,focused:!1,autoplay:!1,autoplayDirection:"next",disabled:!1,durationMsInit:1e3,durationMs:1e3,offset:0,particleWidth:0,loaded:[]},watch:{setLoaded({data:Co}){Co.loaded=h$c({infinite:Co.infinite,pageIndex:Co.currentPageIndex,pagesCount:Co.pagesCount,particlesCount:Co.particlesCountWithoutClones,particlesToShow:Co.particlesToShow,particlesToScroll:Co.particlesToScroll}).particleIndexes},setCurrentPageIndex({data:Co}){Co.currentPageIndex=M$d({currentParticleIndex:Co.currentParticleIndex,particlesCount:Co.particlesCount,clonesCountHead:Co.clonesCountHead,clonesCountTotal:Co.clonesCountTotal,infinite:Co.infinite,particlesToScroll:Co.particlesToScroll})},setPartialPageSize({data:Co}){Co.partialPageSize=m$g({particlesToScroll:Co.particlesToScroll,particlesToShow:Co.particlesToShow,particlesCountWithoutClones:Co.particlesCountWithoutClones})},setClonesCount({data:Co}){const{head:Po,tail:To}=y$g({infinite:Co.infinite,particlesToShow:Co.particlesToShow,partialPageSize:Co.partialPageSize});Co.clonesCountHead=Po,Co.clonesCountTail=To,Co.clonesCountTotal=Po+To},setProgressManagerAutoplayDuration({data:Co}){vn.setAutoplayDuration(Co.autoplayDuration)},toggleProgressManager({data:{pauseOnFocus:Co,focused:Po}}){Co&&(Po?vn.pause():vn.resume())},initDuration({data:Co}){Co.durationMs=Co.durationMsInit},applyAutoplay({data:Co,methods:{_applyAutoplayIfNeeded:Po}}){Co.autoplay&&Po(Co.autoplay)},setPagesCount({data:Co}){Co.pagesCount=h$f({infinite:Co.infinite,particlesCountWithoutClones:Co.particlesCountWithoutClones,particlesToScroll:Co.particlesToScroll,particlesToShow:Co.particlesToShow})},setParticlesToShow({data:Co}){Co.particlesToShow=r$i(1,Co.particlesToShowInit,Co.particlesCountWithoutClones)},setParticlesToScroll({data:Co}){Co.particlesToScroll=r$i(1,Co.particlesToScrollInit,Co.particlesCountWithoutClones)}},methods:{_prev({data:Co}){Co.currentParticleIndex=_$8({infinite:Co.infinite,pageIndex:Co.currentPageIndex-1,clonesCountHead:Co.clonesCountHead,clonesCountTail:Co.clonesCountTail,particlesToScroll:Co.particlesToScroll,particlesCount:Co.particlesCount,particlesToShow:Co.particlesToShow})},_next({data:Co}){Co.currentParticleIndex=_$8({infinite:Co.infinite,pageIndex:Co.currentPageIndex+1,clonesCountHead:Co.clonesCountHead,clonesCountTail:Co.clonesCountTail,particlesToScroll:Co.particlesToScroll,particlesCount:Co.particlesCount,particlesToShow:Co.particlesToShow})},_moveToParticle({data:Co},Po){Co.currentParticleIndex=r$i(0,Po,Co.particlesCount-1)},toggleFocused({data:Co}){Co.focused=!Co.focused},_applyAutoplayIfNeeded(Co){return i$8(this,arguments,function*({data:Po,methods:To}){if(!Po.infinite&&(Po.autoplayDirection===e$7&&Po.currentParticleIndex===Po.particlesCount-1||Po.autoplayDirection===t$4&&Po.currentParticleIndex===0)){vn.reset();return}if(Po.autoplay){const Io=()=>w$e({[e$7]:()=>i$8(this,null,function*(){return To.showNextPage()}),[t$4]:()=>i$8(this,null,function*(){return To.showPrevPage()})})(Po.autoplayDirection);yield vn.start(Io)}})},_jumpIfNeeded(Co){return i$8(this,arguments,function*({data:Po,methods:To}){let Io=!1;return Po.infinite&&(Po.currentParticleIndex===0?(yield To.showParticle(Po.particlesCount-Po.clonesCountTotal,{animated:!1}),Io=!0):Po.currentParticleIndex===Po.particlesCount-Po.clonesCountTail&&(yield To.showParticle(Po.clonesCountHead,{animated:!1}),Io=!0)),Io})},changePage(Co,Po,To){return i$8(this,arguments,function*({data:Io,methods:$l},Wl,Xl){vn.reset(),!Io.disabled&&(Io.disabled=!0,Wl(),yield $l.offsetPage({animated:o$b(Xl,"animated",!0)}),Io.disabled=!1,!(yield $l._jumpIfNeeded())&&$l._applyAutoplayIfNeeded())})},showNextPage(Co,Po){return i$8(this,arguments,function*({data:To,methods:Io},$l){To.disabled||(yield Io.changePage(Io._next,$l))})},showPrevPage(Co,Po){return i$8(this,arguments,function*({data:To,methods:Io},$l){To.disabled||(yield Io.changePage(Io._prev,$l))})},showParticle(Co,Po,To){return i$8(this,arguments,function*({methods:Io},$l,Wl){yield Io.changePage(()=>Io._moveToParticle($l),Wl)})},_getParticleIndexByPageIndex({data:Co},Po){return _$8({infinite:Co.infinite,pageIndex:Po,clonesCountHead:Co.clonesCountHead,clonesCountTail:Co.clonesCountTail,particlesToScroll:Co.particlesToScroll,particlesCount:Co.particlesCount,particlesToShow:Co.particlesToShow})},showPage(Co,Po,To){return i$8(this,arguments,function*({methods:Io},$l,Wl){const Xl=Io._getParticleIndexByPageIndex($l);yield Io.showParticle(Xl,Wl)})},offsetPage({data:Co},Po){const To=o$b(Po,"animated",!0);return new Promise(Io=>{Co.durationMs=To?Co.durationMsInit:0,Co.offset=-Co.currentParticleIndex*Co.particleWidth,setTimeout(()=>{Io()},Co.durationMs)})}}},{onChange:cr}),[Rn,Bn]=yn;return[{data:Rn,progressManager:vn},Bn,yn._internal]}var k$9=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});function tt(cr){Qt(cr,"svelte-sme1z4",":root{--sc-color-rgb-light-50p:rgba(93, 93, 93, 0.5);--sc-color-rgb-light:#5d5d5d;--sc-color-hex-dark-50p:rgba(30, 30, 30, 0.5);--sc-color-hex-dark:#1e1e1e}.sc-carousel__carousel-container.svelte-sme1z4{display:flex;width:100%;flex-direction:column;align-items:center}.sc-carousel__content-container.svelte-sme1z4{position:relative;display:flex;width:100%}.sc-carousel__pages-window.svelte-sme1z4{flex:1;display:flex;overflow:hidden;box-sizing:border-box;position:relative}.sc-carousel__pages-container.svelte-sme1z4{width:100%;display:flex;transition-property:transform}.sc-carousel__arrow-container.svelte-sme1z4{padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.sc-carousel-progress__container.svelte-sme1z4{width:100%;height:5px;background-color:var(--sc-color-rgb-light-50p);position:absolute;bottom:0}.sc-carousel-button{all:unset;cursor:pointer}.sc-carousel-button:focus{outline:5px auto}")}const nt$1=cr=>({currentPageIndex:cr[0]&32,pagesCount:cr[0]&1024,loaded:cr[0]&64}),ue$2=cr=>({currentPageIndex:cr[5],pagesCount:cr[10],showPage:cr[15],loaded:cr[6]}),ot$1=cr=>({loaded:cr[0]&64,currentPageIndex:cr[0]&32}),ce$1=cr=>({showNextPage:cr[14].showNextPage,loaded:cr[6],currentPageIndex:cr[5]}),it$2=cr=>({loaded:cr[0]&64,currentPageIndex:cr[0]&32}),fe$2=cr=>({loaded:cr[6],currentPageIndex:cr[5]}),at$1=cr=>({loaded:cr[0]&64,currentPageIndex:cr[0]&32}),de$2=cr=>({showPrevPage:cr[14].showPrevPage,loaded:cr[6],currentPageIndex:cr[5]});function ge$3(cr){let vn;const yn=cr[37].prev,Rn=Bt(yn,cr,cr[36],de$2),Bn=Rn||lt(cr);return{c(){Bn&&Bn.c()},m(Co,Po){Bn&&Bn.m(Co,Po),vn=!0},p(Co,Po){Rn?Rn.p&&(!vn||Po[0]&96|Po[1]&32)&&It(Rn,yn,Co,Co[36],vn?Ht$1(yn,Co[36],Po,at$1):Ut(Co[36]),de$2):Bn&&Bn.p&&(!vn||Po[0]&36)&&Bn.p(Co,vn?Po:[-1,-1])},i(Co){vn||(ot$4(Bn,Co),vn=!0)},o(Co){$t(Bn,Co),vn=!1},d(Co){Bn&&Bn.d(Co)}}}function lt(cr){let vn,yn,Rn;return yn=new q$d({props:{direction:"prev",disabled:!cr[2]&&cr[5]===0}}),yn.$on("click",cr[23]),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","sc-carousel__arrow-container svelte-sme1z4")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co[0]&36&&(Po.disabled=!Bn[2]&&Bn[5]===0),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function _e$1(cr){let vn,yn,Rn;return yn=new w$f({props:{value:cr[7]}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","sc-carousel-progress__container svelte-sme1z4")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co[0]&128&&(Po.value=Bn[7]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function me(cr){let vn;const yn=cr[37].next,Rn=Bt(yn,cr,cr[36],ce$1),Bn=Rn||st(cr);return{c(){Bn&&Bn.c()},m(Co,Po){Bn&&Bn.m(Co,Po),vn=!0},p(Co,Po){Rn?Rn.p&&(!vn||Po[0]&96|Po[1]&32)&&It(Rn,yn,Co,Co[36],vn?Ht$1(yn,Co[36],Po,ot$1):Ut(Co[36]),ce$1):Bn&&Bn.p&&(!vn||Po[0]&1060)&&Bn.p(Co,vn?Po:[-1,-1])},i(Co){vn||(ot$4(Bn,Co),vn=!0)},o(Co){$t(Bn,Co),vn=!1},d(Co){Bn&&Bn.d(Co)}}}function st(cr){let vn,yn,Rn;return yn=new q$d({props:{direction:"next",disabled:!cr[2]&&cr[5]===cr[10]-1}}),yn.$on("click",cr[14].showNextPage),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","sc-carousel__arrow-container svelte-sme1z4")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co[0]&1060&&(Po.disabled=!Bn[2]&&Bn[5]===Bn[10]-1),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function pe$1(cr){let vn;const yn=cr[37].dots,Rn=Bt(yn,cr,cr[36],ue$2),Bn=Rn||rt$1(cr);return{c(){Bn&&Bn.c()},m(Co,Po){Bn&&Bn.m(Co,Po),vn=!0},p(Co,Po){Rn?Rn.p&&(!vn||Po[0]&1120|Po[1]&32)&&It(Rn,yn,Co,Co[36],vn?Ht$1(yn,Co[36],Po,nt$1):Ut(Co[36]),ue$2):Bn&&Bn.p&&(!vn||Po[0]&1056)&&Bn.p(Co,vn?Po:[-1,-1])},i(Co){vn||(ot$4(Bn,Co),vn=!0)},o(Co){$t(Bn,Co),vn=!1},d(Co){Bn&&Bn.d(Co)}}}function rt$1(cr){let vn,yn;return vn=new H$e({props:{pagesCount:cr[10],currentPageIndex:cr[5]}}),vn.$on("pageChange",cr[41]),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn[0]&1024&&(Co.pagesCount=Rn[10]),Bn[0]&32&&(Co.currentPageIndex=Rn[5]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function ut(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl=cr[1]&&ge$3(cr);const ey=cr[37].default,Rm=Bt(ey,cr,cr[36],fe$2);let ry=cr[3]&&_e$1(cr),_g=cr[1]&&me(cr),ty=cr[4]&&pe$1(cr);return{c(){vn=K$g("div"),yn=K$g("div"),Zl&&Zl.c(),Rn=Xt$1(),Bn=K$g("div"),Co=K$g("div"),Rm&&Rm.c(),To=Xt$1(),ry&&ry.c(),Io=Xt$1(),_g&&_g.c(),$l=Xt$1(),ty&&ty.c(),te$4(Co,"class","sc-carousel__pages-container svelte-sme1z4"),ne$5(Co,"transform","translateX("+cr[8]+"px)"),ne$5(Co,"transition-duration",cr[9]+"ms"),ne$5(Co,"transition-timing-function",cr[0]),te$4(Bn,"class","sc-carousel__pages-window svelte-sme1z4"),te$4(yn,"class","sc-carousel__content-container svelte-sme1z4"),te$4(vn,"class","sc-carousel__carousel-container svelte-sme1z4")},m(ny,iy){Nt(ny,vn,iy),pt$1(vn,yn),Zl&&Zl.m(yn,null),pt$1(yn,Rn),pt$1(yn,Bn),pt$1(Bn,Co),Rm&&Rm.m(Co,null),cr[39](Co),pt$1(Bn,To),ry&&ry.m(Bn,null),cr[40](Bn),pt$1(yn,Io),_g&&_g.m(yn,null),pt$1(vn,$l),ty&&ty.m(vn,null),Wl=!0,Xl||(Yl=[Jt$1(Po=b$e.call(null,Co,{thresholdProvider:cr[38]})),lt$2(Co,"swipeStart",cr[16]),lt$2(Co,"swipeMove",cr[18]),lt$2(Co,"swipeEnd",cr[19]),lt$2(Co,"swipeFailed",cr[20]),lt$2(Co,"swipeThresholdReached",cr[17]),Jt$1(h$g.call(null,Bn)),lt$2(Bn,"hovered",cr[21]),Jt$1(y$i.call(null,Bn)),lt$2(Bn,"tapped",cr[22])],Xl=!0)},p(ny,iy){ny[1]?Zl?(Zl.p(ny,iy),iy[0]&2&&ot$4(Zl,1)):(Zl=ge$3(ny),Zl.c(),ot$4(Zl,1),Zl.m(yn,Rn)):Zl&&(Lt(),$t(Zl,1,1,()=>{Zl=null}),Ot$1()),Rm&&Rm.p&&(!Wl||iy[0]&96|iy[1]&32)&&It(Rm,ey,ny,ny[36],Wl?Ht$1(ey,ny[36],iy,it$2):Ut(ny[36]),fe$2),(!Wl||iy[0]&256)&&ne$5(Co,"transform","translateX("+ny[8]+"px)"),(!Wl||iy[0]&512)&&ne$5(Co,"transition-duration",ny[9]+"ms"),(!Wl||iy[0]&1)&&ne$5(Co,"transition-timing-function",ny[0]),Po&&L$k(Po.update)&&iy[0]&2048&&Po.update.call(null,{thresholdProvider:ny[38]}),ny[3]?ry?(ry.p(ny,iy),iy[0]&8&&ot$4(ry,1)):(ry=_e$1(ny),ry.c(),ot$4(ry,1),ry.m(Bn,null)):ry&&(Lt(),$t(ry,1,1,()=>{ry=null}),Ot$1()),ny[1]?_g?(_g.p(ny,iy),iy[0]&2&&ot$4(_g,1)):(_g=me(ny),_g.c(),ot$4(_g,1),_g.m(yn,null)):_g&&(Lt(),$t(_g,1,1,()=>{_g=null}),Ot$1()),ny[4]?ty?(ty.p(ny,iy),iy[0]&16&&ot$4(ty,1)):(ty=pe$1(ny),ty.c(),ot$4(ty,1),ty.m(vn,null)):ty&&(Lt(),$t(ty,1,1,()=>{ty=null}),Ot$1())},i(ny){Wl||(ot$4(Zl),ot$4(Rm,ny),ot$4(ry),ot$4(_g),ot$4(ty),Wl=!0)},o(ny){$t(Zl),$t(Rm,ny),$t(ry),$t(_g),$t(ty),Wl=!1},d(ny){ny&&J$h(vn),Zl&&Zl.d(),Rm&&Rm.d(ny),cr[39](null),ry&&ry.d(),cr[40](null),_g&&_g.d(),ty&&ty.d(),Xl=!1,M$o(Yl)}}}function ct$1(cr,vn,yn){let{$$slots:Rn={},$$scope:Bn}=vn,Co=[],Po,To,Io=0,$l=0,Wl=1;const[{data:Xl,progressManager:Yl},Zl,ey]=A$f((Gy,Zy)=>{w$e({currentPageIndex:()=>yn(5,Po=Zy),progressValue:()=>yn(7,To=Zy),offset:()=>yn(8,Io=Zy),durationMs:()=>yn(9,$l=Zy),pagesCount:()=>yn(10,Wl=Zy),loaded:()=>yn(6,Co=Zy)})(Gy)}),Rm=fe$3();let{timingFunction:ry="ease-in-out"}=vn,{arrows:_g=!0}=vn,{infinite:ty=!0}=vn,{initialPageIndex:ny=0}=vn,{duration:iy=500}=vn,{autoplay:oy=!1}=vn,{autoplayDuration:ay=3e3}=vn,{autoplayDirection:uy=e$7}=vn,{pauseOnFocus:hy=!1}=vn,{autoplayProgressVisible:my=!1}=vn,{dots:ly=!0}=vn,{swiping:sy=!0}=vn,{particlesToShow:cy=1}=vn,{particlesToScroll:fy=1}=vn;function vy(Gy,Zy){return k$9(this,null,function*(){const Ty=o$b(Zy,"animated",!0);if(typeof Gy!="number")throw new Error("pageIndex should be a number");yield Zl.showPage(Gy,{animated:Ty})})}function dy(Gy){return k$9(this,null,function*(){const Zy=o$b(Gy,"animated",!0);yield Zl.showPrevPage({animated:Zy})})}function Ay(Gy){return k$9(this,null,function*(){const Zy=o$b(Gy,"animated",!0);yield Zl.showNextPage({animated:Zy})})}let gy=0,wy,Cy;const My=z$8(({width:Gy})=>{yn(11,gy=Gy),Xl.particleWidth=gy/Xl.particlesToShow,c$l({particlesContainerChildren:Cy.children,particleWidth:Xl.particleWidth}),Zl.offsetPage({animated:!1})});function Py(){const{clonesToAppend:Gy,clonesToPrepend:Zy}=N$9({clonesCountHead:Xl.clonesCountHead,clonesCountTail:Xl.clonesCountTail,particlesContainerChildren:Cy.children});x$g({particlesContainer:Cy,clonesToAppend:Gy,clonesToPrepend:Zy})}ce$2(()=>{k$9(this,null,function*(){yield _e$2(),Cy&&wy&&(Xl.particlesCountWithoutClones=Cy.children.length,yield _e$2(),Xl.infinite&&Py(),Xl.particlesCount=Cy.children.length,Zl.showPage(ny,{animated:!1}),My.observe(wy))})}),le$1(()=>{My.disconnect(),Yl.reset()});function Dy(Gy){return k$9(this,null,function*(){yield Zl.showPage(Gy,{animated:!0})})}function qy(){sy&&(Xl.durationMs=0)}function Xy(Gy){return k$9(this,null,function*(){sy&&(yield w$e({[e$7]:Zl.showNextPage,[t$4]:Zl.showPrevPage})(Gy.detail.direction))})}function $y(Gy){sy&&(Xl.offset+=Gy.detail.dx)}function xy(){sy&&Zl.showParticle(Xl.currentParticleIndex)}function Ry(){return k$9(this,null,function*(){sy&&(yield Zl.offsetPage({animated:!0}))})}function Ly(Gy){Xl.focused=Gy.detail.value}function ky(){Zl.toggleFocused()}function Ey(){Zl.showPrevPage()}const Iy=()=>gy/3;function zy(Gy){ft$1[Gy?"unshift":"push"](()=>{Cy=Gy,yn(13,Cy)})}function Uy(Gy){ft$1[Gy?"unshift":"push"](()=>{wy=Gy,yn(12,wy)})}const Qy=Gy=>Dy(Gy.detail);return cr.$$set=Gy=>{"timingFunction"in Gy&&yn(0,ry=Gy.timingFunction),"arrows"in Gy&&yn(1,_g=Gy.arrows),"infinite"in Gy&&yn(2,ty=Gy.infinite),"initialPageIndex"in Gy&&yn(24,ny=Gy.initialPageIndex),"duration"in Gy&&yn(25,iy=Gy.duration),"autoplay"in Gy&&yn(26,oy=Gy.autoplay),"autoplayDuration"in Gy&&yn(27,ay=Gy.autoplayDuration),"autoplayDirection"in Gy&&yn(28,uy=Gy.autoplayDirection),"pauseOnFocus"in Gy&&yn(29,hy=Gy.pauseOnFocus),"autoplayProgressVisible"in Gy&&yn(3,my=Gy.autoplayProgressVisible),"dots"in Gy&&yn(4,ly=Gy.dots),"swiping"in Gy&&yn(30,sy=Gy.swiping),"particlesToShow"in Gy&&yn(31,cy=Gy.particlesToShow),"particlesToScroll"in Gy&&yn(32,fy=Gy.particlesToScroll),"$$scope"in Gy&&yn(36,Bn=Gy.$$scope)},cr.$$.update=()=>{cr.$$.dirty[0]&32&&Rm("pageChange",Po),cr.$$.dirty[0]&4&&(Xl.infinite=ty),cr.$$.dirty[0]&33554432&&(Xl.durationMsInit=iy),cr.$$.dirty[0]&67108864&&(Xl.autoplay=oy),cr.$$.dirty[0]&134217728&&(Xl.autoplayDuration=ay),cr.$$.dirty[0]&268435456&&(Xl.autoplayDirection=uy),cr.$$.dirty[0]&536870912&&(Xl.pauseOnFocus=hy),cr.$$.dirty[1]&1&&(Xl.particlesToShowInit=cy),cr.$$.dirty[1]&2&&(Xl.particlesToScrollInit=fy)},[ry,_g,ty,my,ly,Po,Co,To,Io,$l,Wl,gy,wy,Cy,Zl,Dy,qy,Xy,$y,xy,Ry,Ly,ky,Ey,ny,iy,oy,ay,uy,hy,sy,cy,fy,vy,dy,Ay,Bn,Rn,Iy,zy,Uy,Qy]}class kt extends Ce$1{constructor(vn){super(),Te$1(this,vn,ct$1,ut,Ft$1,{timingFunction:0,arrows:1,infinite:2,initialPageIndex:24,duration:25,autoplay:26,autoplayDuration:27,autoplayDirection:28,pauseOnFocus:29,autoplayProgressVisible:3,dots:4,swiping:30,particlesToShow:31,particlesToScroll:32,goTo:33,goToPrev:34,goToNext:35},tt,[-1,-1])}get goTo(){return this.$$.ctx[33]}get goToPrev(){return this.$$.ctx[34]}get goToNext(){return this.$$.ctx[35]}}function $$3(cr){Qt(cr,"svelte-159ski6",".media-item.svelte-159ski6.svelte-159ski6{position:relative;height:100%}.media-content.svelte-159ski6.svelte-159ski6{position:relative;pointer-events:auto;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;-o-object-fit:inherit;object-fit:inherit}.media-content.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none}.video-icon.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem;max-width:60%;max-height:60%;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.video-play-button-container.svelte-159ski6.svelte-159ski6{display:none;position:absolute;width:100%;height:100%;top:0;left:0;transform:translate3d(0, 0, 0)}.video-play-button-container.showPlayButton.svelte-159ski6.svelte-159ski6{pointer-events:none;display:block}.video-icon.svelte-159ski6.svelte-159ski6{pointer-events:auto}.video-icon.large.svelte-159ski6.svelte-159ski6{width:12.5rem;height:6.25rem}.video-icon.small.svelte-159ski6.svelte-159ski6{width:1.75rem;height:1.75rem}.video-icon.svelte-159ski6 .video-icon-img.svelte-159ski6{width:100%;height:100%;background-position:center center;background-size:contain;background-repeat:no-repeat}.video-icon.svelte-159ski6 .video-icon-img.canPlay.svelte-159ski6{cursor:pointer}")}function L$9(cr){let vn;function yn(Co,Po){if(Co[2].type==="Image")return te$2;if(Co[2].type==="Video")return ee$2}let Rn=yn(cr),Bn=Rn&&Rn(cr);return{c(){vn=K$g("div"),Bn&&Bn.c(),te$4(vn,"class","media-item svelte-159ski6"),te$4(vn,"draggable","false")},m(Co,Po){Nt(Co,vn,Po),Bn&&Bn.m(vn,null)},p(Co,Po){Rn===(Rn=yn(Co))&&Bn?Bn.p(Co,Po):(Bn&&Bn.d(1),Bn=Rn&&Rn(Co),Bn&&(Bn.c(),Bn.m(vn,null)))},d(Co){Co&&J$h(vn),Bn&&Bn.d()}}}function ee$2(cr){let vn,yn,Rn,Bn,Co,Po;function To(Wl,Xl){return Wl[8]&&Wl[2].videoCoverUrl?oe$1:ie$2}let Io=To(cr),$l=Io(cr);return{c(){$l.c(),vn=Xt$1(),yn=K$g("div"),Rn=K$g("div"),Bn=K$g("div"),te$4(Bn,"class","video-icon-img svelte-159ski6"),ne$5(Bn,"background-image","url("+cr[21]()+")"),re$2(Bn,"canPlay",cr[5]),te$4(Rn,"class","video-icon svelte-159ski6"),re$2(Rn,"large",cr[4]==="large"),re$2(Rn,"small",cr[4]==="small"),te$4(yn,"class","video-play-button-container svelte-159ski6"),re$2(yn,"showPlayButton",cr[11])},m(Wl,Xl){$l.m(Wl,Xl),Nt(Wl,vn,Xl),Nt(Wl,yn,Xl),pt$1(yn,Rn),pt$1(Rn,Bn),Co||(Po=lt$2(Bn,"click",cr[22]),Co=!0)},p(Wl,Xl){Io===(Io=To(Wl))&&$l?$l.p(Wl,Xl):($l.d(1),$l=Io(Wl),$l&&($l.c(),$l.m(vn.parentNode,vn))),Xl&8&&ne$5(Bn,"background-image","url("+Wl[21]()+")"),Xl&32&&re$2(Bn,"canPlay",Wl[5]),Xl&16&&re$2(Rn,"large",Wl[4]==="large"),Xl&16&&re$2(Rn,"small",Wl[4]==="small"),Xl&2048&&re$2(yn,"showPlayButton",Wl[11])},d(Wl){$l.d(Wl),Wl&&J$h(vn),Wl&&J$h(yn),Co=!1,Po()}}}function te$2(cr){let vn,yn,Rn;return{c(){vn=K$g("img"),te$4(vn,"class","media-content svelte-159ski6"),Wt$1(vn.src,yn=cr[2].url)||te$4(vn,"src",yn),te$4(vn,"alt",Rn=cr[2].name),te$4(vn,"draggable",!1),ne$5(vn,"object-fit",cr[7])},m(Bn,Co){Nt(Bn,vn,Co)},p(Bn,Co){Co&4&&!Wt$1(vn.src,yn=Bn[2].url)&&te$4(vn,"src",yn),Co&4&&Rn!==(Rn=Bn[2].name)&&te$4(vn,"alt",Rn),Co&128&&ne$5(vn,"object-fit",Bn[7])},d(Bn){Bn&&J$h(vn)}}}function ie$2(cr){let vn,yn,Rn,Bn,Co,Po;return{c(){vn=K$g("video"),te$4(vn,"class","media-content svelte-159ski6"),Wt$1(vn.src,yn=cr[2].videoCoverUrl?cr[2].url:cr[2].url+"#t=0.1")||te$4(vn,"src",yn),te$4(vn,"poster",Rn=cr[2].videoCoverUrl),te$4(vn,"preload",Bn=cr[2].videoCoverUrl?"none":"auto"),te$4(vn,"disablepictureinpicture",""),vn.playsInline=!0,te$4(vn,"paused",""),vn.muted=!0,te$4(vn,"draggable",!1),vn.loop=!1,te$4(vn,"crossorigin",""),vn.autoplay=cr[6],vn.controls=!1,re$2(vn,"showPlayButton",cr[11]),ne$5(vn,"object-fit",cr[7])},m(To,Io){Nt(To,vn,Io),cr[20](vn),Co||(Po=[lt$2(vn,"play",cr[15]),lt$2(vn,"pause",cr[16]),lt$2(vn,"error",cr[17]),lt$2(vn,"ended",cr[18]),lt$2(vn,"click",cr[19])],Co=!0)},p(To,Io){Io&4&&!Wt$1(vn.src,yn=To[2].videoCoverUrl?To[2].url:To[2].url+"#t=0.1")&&te$4(vn,"src",yn),Io&4&&Rn!==(Rn=To[2].videoCoverUrl)&&te$4(vn,"poster",Rn),Io&4&&Bn!==(Bn=To[2].videoCoverUrl?"none":"auto")&&te$4(vn,"preload",Bn),Io&64&&(vn.autoplay=To[6]),Io&2048&&re$2(vn,"showPlayButton",To[11]),Io&128&&ne$5(vn,"object-fit",To[7])},d(To){To&&J$h(vn),cr[20](null),Co=!1,M$o(Po)}}}function oe$1(cr){let vn,yn,Rn;return{c(){vn=K$g("img"),te$4(vn,"class","media-content svelte-159ski6"),Wt$1(vn.src,yn=cr[2].videoCoverUrl)||te$4(vn,"src",yn),te$4(vn,"alt",Rn=cr[2].name),te$4(vn,"draggable",!1),ne$5(vn,"object-fit",cr[7])},m(Bn,Co){Nt(Bn,vn,Co)},p(Bn,Co){Co&4&&!Wt$1(vn.src,yn=Bn[2].videoCoverUrl)&&te$4(vn,"src",yn),Co&4&&Rn!==(Rn=Bn[2].name)&&te$4(vn,"alt",Rn),Co&128&&ne$5(vn,"object-fit",Bn[7])},d(Bn){Bn&&J$h(vn)}}}function ne$4(cr){let vn,yn=cr[2]&&L$9(cr);return{c(){yn&&yn.c(),vn=Yt()},m(Rn,Bn){yn&&yn.m(Rn,Bn),Nt(Rn,vn,Bn)},p(Rn,[Bn]){Rn[2]?yn?yn.p(Rn,Bn):(yn=L$9(Rn),yn.c(),yn.m(vn.parentNode,vn)):yn&&(yn.d(1),yn=null)},i:N$f,o:N$f,d(Rn){yn&&yn.d(Rn),Rn&&J$h(vn)}}}function le(cr,vn,yn){let Rn,Bn,{mediaInstance:Co={videoInstance:void 0,paused:!0}}=vn,{tag:Po}=vn,{media:To}=vn,{playButtonIfNeed:Io="withoutText"}=vn,{playButtonSizeIfNeed:$l="small"}=vn,{canPlay:Wl=!0}=vn,{autoplayVideo:Xl=!1}=vn,{objectFit:Yl="fill"}=vn,{disableVideoIfHavePoster:Zl=!1}=vn,ey=!0,Rm=!1;function ry(){yn(9,Rm=(To==null?void 0:To.type)==="Video"&&!!To.videoCoverUrl)}const _g=de$3("mediaStore"),ty=de$3("hooks"),ny=()=>{Rm||Rn&&(yn(10,Rn.muted=!0,Rn),Rn.play(),Rn.pause(),yn(10,Rn.muted=!1,Rn),yn(9,Rm=!0))};ty.on("loadVideoFirstFrame",ny),ce$2(()=>{_g.subscribe(({currentMediaElement:cy})=>{cy!==Rn&&(Rn==null||Rn.pause())})});const iy=cy=>{yn(11,ey=!1),yn(0,Co.paused=!1,Co),yn(9,Rm=!0),Rn&&_g.set({currentMediaElement:Rn}),ty.emit("playStateChange",{event:cy,state:"playing",tag:Po,mediaInstance:Rn})},oy=cy=>{yn(11,ey=!0),yn(0,Co.paused=!0,Co),ty.emit("playStateChange",{event:cy,state:"paused",tag:Po,mediaInstance:Rn})},ay=cy=>{yn(11,ey=!0),yn(0,Co.paused=!0,Co),ty.emit("playStateChange",{event:cy,state:"paused",tag:Po,mediaInstance:Rn})},uy=cy=>{yn(11,ey=!0),yn(0,Co.paused=!0,Co),ty.emit("playStateChange",{event:cy,state:"paused",tag:Po,mediaInstance:Rn})},hy=cy=>{Rn&&Rn.pause()};function my(cy){ft$1[cy?"unshift":"push"](()=>{Co.videoInstance=cy,yn(0,Co)})}const ly=()=>Io==="withText"?a$k:Io==="withoutText"?g$r:Io,sy=cy=>{Wl&&Rn&&(yn(10,Rn.muted=!1,Rn),Rn.play())};return cr.$$set=cy=>{"mediaInstance"in cy&&yn(0,Co=cy.mediaInstance),"tag"in cy&&yn(1,Po=cy.tag),"media"in cy&&yn(2,To=cy.media),"playButtonIfNeed"in cy&&yn(3,Io=cy.playButtonIfNeed),"playButtonSizeIfNeed"in cy&&yn(4,$l=cy.playButtonSizeIfNeed),"canPlay"in cy&&yn(5,Wl=cy.canPlay),"autoplayVideo"in cy&&yn(6,Xl=cy.autoplayVideo),"objectFit"in cy&&yn(7,Yl=cy.objectFit),"disableVideoIfHavePoster"in cy&&yn(8,Zl=cy.disableVideoIfHavePoster)},cr.$$.update=()=>{if(cr.$$.dirty&1&&yn(10,Rn=Co.videoInstance),cr.$$.dirty&4&&yn(14,Bn=To==null?void 0:To.url),cr.$$.dirty&16384&&Bn&&ry(),cr.$$.dirty&1024&&Rn&&yn(11,ey=Rn.paused),cr.$$.dirty&1540&&(To==null?void 0:To.type)==="Video"&&!Rm){const cy=navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1,fy=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1&&cy;Rn&&fy&&Rn.paused&&(document.removeEventListener("WeixinJSBridgeReady",ny),document.removeEventListener("touchstart",ny),document.removeEventListener("click",ny),document.addEventListener("WeixinJSBridgeReady",ny),document.addEventListener("touchstart",ny),document.addEventListener("click",ny))}},[Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,Rm,Rn,ey,_g,ty,Bn,iy,oy,ay,uy,hy,my,ly,sy]}class ue$1 extends Ce$1{constructor(vn){super(),Te$1(this,vn,le,ne$4,Ft$1,{mediaInstance:0,tag:1,media:2,playButtonIfNeed:3,playButtonSizeIfNeed:4,canPlay:5,autoplayVideo:6,objectFit:7,disableVideoIfHavePoster:8},$$3)}}function pe(cr){Qt(cr,"svelte-1mrbqlg",".media-list-wrapper.svelte-1mrbqlg.svelte-1mrbqlg{width:100%;height:100%;position:relative;overflow:hidden;border-radius:0.125rem}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg{position:relative;pointer-events:auto;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__carousel-container,.media-list-wrapper.svelte-1mrbqlg .media-list.svelte-1mrbqlg .sc-carousel__content-container{height:100%}")}function K$6(cr,vn,yn){const Rn=cr.slice();return Rn[28]=vn[yn],Rn[29]=vn,Rn[30]=yn,Rn}function O$b(cr){let vn,yn,Rn,Bn,Co,Po,To;const Io=[he,be$1],$l=[];function Wl(Xl,Yl){return Xl[13]&&Xl[10].length>1?0:1}return Rn=Wl(cr),Bn=$l[Rn]=Io[Rn](cr),{c(){vn=K$g("div"),yn=K$g("div"),Bn.c(),te$4(yn,"class","media-list svelte-1mrbqlg"),re$2(yn,"carouselEnabled",cr[13]),te$4(vn,"class","media-list-wrapper svelte-1mrbqlg"),re$2(vn,"unfolded",cr[5])},m(Xl,Yl){Nt(Xl,vn,Yl),pt$1(vn,yn),$l[Rn].m(yn,null),To=!0},p(Xl,Yl){cr=Xl;let Zl=Rn;Rn=Wl(cr),Rn===Zl?$l[Rn].p(cr,Yl):(Lt(),$t($l[Zl],1,1,()=>{$l[Zl]=null}),Ot$1(),Bn=$l[Rn],Bn?Bn.p(cr,Yl):(Bn=$l[Rn]=Io[Rn](cr),Bn.c()),ot$4(Bn,1),Bn.m(yn,null)),(!To||Yl[0]&8192)&&re$2(yn,"carouselEnabled",cr[13]),(!To||Yl[0]&32)&&re$2(vn,"unfolded",cr[5])},i(Xl){To||(ot$4(Bn),Xl&&z$j(()=>{To&&(Po&&Po.end(1),Co=me$1(vn,S$n,cr[6]?{y:4,duration:cr[4],delay:cr[2],easing:Z$a}:void 0),Co.start())}),To=!0)},o(Xl){$t(Bn),Co&&Co.invalidate(),Xl&&(Po=ge$5(vn,S$n,cr[6]?{y:4,duration:cr[4],delay:cr[3],easing:Z$a}:void 0)),To=!1},d(Xl){Xl&&J$h(vn),$l[Rn].d(),Xl&&Po&&Po.end()}}}function be$1(cr){let vn,yn,Rn;const Bn=[{media:cr[1][0]},{autoplayVideo:cr[14]},cr[7],{tag:cr[0]}];function Co(To){cr[21](To)}let Po={};for(let To=0;To<Bn.length;To+=1)Po=kt$1(Po,Bn[To]);return cr[8][0]!==void 0&&(Po.mediaInstance=cr[8][0]),vn=new ue$1({props:Po}),ft$1.push(()=>Me$1(vn,"mediaInstance",Co)),{c(){Ae$1(vn.$$.fragment)},m(To,Io){Dt$1(vn,To,Io),Rn=!0},p(To,Io){const $l=Io[0]&16515?ve$1(Bn,[Io[0]&2&&{media:To[1][0]},Io[0]&16384&&{autoplayVideo:To[14]},Io[0]&128&&Ne$3(To[7]),Io[0]&1&&{tag:To[0]}]):{};!yn&&Io[0]&256&&(yn=!0,$l.mediaInstance=To[8][0],pe$3(()=>yn=!1)),vn.$set($l)},i(To){Rn||(ot$4(vn.$$.fragment,To),Rn=!0)},o(To){$t(vn.$$.fragment,To),Rn=!1},d(To){Rt(vn,To)}}}function he(cr){let vn,yn,Rn={dots:!1,arrows:!1,$$slots:{default:[Ie$1]},$$scope:{ctx:cr}};return vn=new kt({props:Rn}),cr[19](vn),vn.$on("pageChange",cr[20]),{c(){Ae$1(vn.$$.fragment)},m(Bn,Co){Dt$1(vn,Bn,Co),yn=!0},p(Bn,Co){const Po={};Co[0]&1409|Co[1]&1&&(Po.$$scope={dirty:Co,ctx:Bn}),vn.$set(Po)},i(Bn){yn||(ot$4(vn.$$.fragment,Bn),yn=!0)},o(Bn){$t(vn.$$.fragment,Bn),yn=!1},d(Bn){cr[19](null),Rt(vn,Bn)}}}function P$d(cr){let vn,yn,Rn;const Bn=[cr[7],{media:cr[28]},{tag:cr[0]}];function Co(To){cr[18](To,cr[30])}let Po={};for(let To=0;To<Bn.length;To+=1)Po=kt$1(Po,Bn[To]);return cr[8][cr[30]]!==void 0&&(Po.mediaInstance=cr[8][cr[30]]),vn=new ue$1({props:Po}),ft$1.push(()=>Me$1(vn,"mediaInstance",Co)),{c(){Ae$1(vn.$$.fragment)},m(To,Io){Dt$1(vn,To,Io),Rn=!0},p(To,Io){cr=To;const $l=Io[0]&1153?ve$1(Bn,[Io[0]&128&&Ne$3(cr[7]),Io[0]&1024&&{media:cr[28]},Io[0]&1&&{tag:cr[0]}]):{};!yn&&Io[0]&256&&(yn=!0,$l.mediaInstance=cr[8][cr[30]],pe$3(()=>yn=!1)),vn.$set($l)},i(To){Rn||(ot$4(vn.$$.fragment,To),Rn=!0)},o(To){$t(vn.$$.fragment,To),Rn=!1},d(To){Rt(vn,To)}}}function Ie$1(cr){let vn,yn,Rn=cr[10],Bn=[];for(let Po=0;Po<Rn.length;Po+=1)Bn[Po]=P$d(K$6(cr,Rn,Po));const Co=Po=>$t(Bn[Po],1,1,()=>{Bn[Po]=null});return{c(){for(let Po=0;Po<Bn.length;Po+=1)Bn[Po].c();vn=Yt()},m(Po,To){for(let Io=0;Io<Bn.length;Io+=1)Bn[Io]&&Bn[Io].m(Po,To);Nt(Po,vn,To),yn=!0},p(Po,To){if(To[0]&1409){Rn=Po[10];let Io;for(Io=0;Io<Rn.length;Io+=1){const $l=K$6(Po,Rn,Io);Bn[Io]?(Bn[Io].p($l,To),ot$4(Bn[Io],1)):(Bn[Io]=P$d($l),Bn[Io].c(),ot$4(Bn[Io],1),Bn[Io].m(vn.parentNode,vn))}for(Lt(),Io=Rn.length;Io<Bn.length;Io+=1)Co(Io);Ot$1()}},i(Po){if(!yn){for(let To=0;To<Rn.length;To+=1)ot$4(Bn[To]);yn=!0}},o(Po){Bn=Bn.filter(Boolean);for(let To=0;To<Bn.length;To+=1)$t(Bn[To]);yn=!1},d(Po){Vt(Bn,Po),Po&&J$h(vn)}}}function ye$1(cr){let vn,yn,Rn=cr[5]&&O$b(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,Co){Bn[5]?Rn?(Rn.p(Bn,Co),Co[0]&32&&ot$4(Rn,1)):(Rn=O$b(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function ke$1(cr,vn,yn){let Rn,Bn,Co,Po,{tag:To}=vn,{mediaData:Io}=vn,{inDelay:$l=0}=vn,{outDelay:Wl=0}=vn,{duration:Xl=0}=vn,{unfolded:Yl=!0}=vn,{animation:Zl=!0}=vn,{mediaItemConfig:ey}=vn,{enableCarousel:Rm=!0}=vn,{autoplayConfig:ry={}}=vn;const{autoplayVideo:_g=!1,autoplayCarousel:ty=!0,autoplayVideoInCarousel:ny=!1}=ry;let iy=[],oy=0,ay,uy=null;const hy=de$3("hooks"),my=de$3("mediaStore");function ly(){const dy=iy[oy],Ay=dy==null?void 0:dy.videoInstance;Ay&&(Ay.paused?(Ay.muted=!1,Ay.play()):Ay.pause())}ce$2(()=>{hy.on("click",dy=>{var Ay;(Ay=To.tag3DContentSvelte)!=null&&Ay.css3DInstance&&dy.tag.id===To.id&&dy.target==="TagContent"&&ly()}),yn(0,To.play=()=>{const dy=iy[oy],Ay=dy==null?void 0:dy.videoInstance;Ay&&(Ay.muted=!1,Ay.play())},To),yn(0,To.pause=()=>{const dy=iy[oy],Ay=dy==null?void 0:dy.videoInstance;Ay&&Ay.pause()},To),uy=setInterval(()=>{Po&&(ay==null||ay.goToNext())},3e3)}),le$1(()=>{clearInterval(uy),hy.off("click",ly)});function sy(dy,Ay){cr.$$.not_equal(iy[Ay],dy)&&(iy[Ay]=dy,yn(8,iy))}function cy(dy){ft$1[dy?"unshift":"push"](()=>{ay=dy,yn(12,ay)})}const fy=dy=>{Rn||my.set({currentMediaElement:null}),yn(11,oy=dy.detail)};function vy(dy){cr.$$.not_equal(iy[0],dy)&&(iy[0]=dy,yn(8,iy))}return cr.$$set=dy=>{"tag"in dy&&yn(0,To=dy.tag),"mediaData"in dy&&yn(1,Io=dy.mediaData),"inDelay"in dy&&yn(2,$l=dy.inDelay),"outDelay"in dy&&yn(3,Wl=dy.outDelay),"duration"in dy&&yn(4,Xl=dy.duration),"unfolded"in dy&&yn(5,Yl=dy.unfolded),"animation"in dy&&yn(6,Zl=dy.animation),"mediaItemConfig"in dy&&yn(7,ey=dy.mediaItemConfig),"enableCarousel"in dy&&yn(16,Rm=dy.enableCarousel),"autoplayConfig"in dy&&yn(17,ry=dy.autoplayConfig)},cr.$$.update=()=>{cr.$$.dirty[0]&256&&yn(9,Rn=iy.every(dy=>dy.paused)),cr.$$.dirty[0]&65538&&yn(13,Bn=Rm&&(Io==null?void 0:Io.length)>1),cr.$$.dirty[0]&2&&yn(10,Co=Io),cr.$$.dirty[0]&1536&&(Po=Co.length>1&&ty&&Rn)},[To,Io,$l,Wl,Xl,Yl,Zl,ey,iy,Rn,Co,oy,ay,Bn,_g,my,Rm,ry,sy,cy,fy,vy]}class at extends Ce$1{constructor(vn){super(),Te$1(this,vn,ke$1,ye$1,Ft$1,{tag:0,mediaData:1,inDelay:2,outDelay:3,duration:4,unfolded:5,animation:6,mediaItemConfig:7,enableCarousel:16,autoplayConfig:17},pe,[-1,-1])}}function V$4(cr){Qt(cr,"svelte-1f7m1lj",".line.svelte-1f7m1lj{position:absolute;width:6.5625rem;height:1.3125rem;transform:translateY(-100%)}.text.svelte-1f7m1lj{position:absolute;width:6.25rem;left:1rem;bottom:0.0625rem;font-weight:600}.media-wrapper.svelte-1f7m1lj{position:absolute;left:0.875rem;top:-5.3125rem;width:5.625rem;height:3.75rem;font-weight:600}")}function I$b(cr){let vn,yn,Rn,Bn,Co,Po,To,Io;vn=new T$a({props:{visible:cr[3],left:61,bottom:57,width:2,blurRadius:150,spreadRadius:75}}),Bn=new A$h({props:{unfolded:cr[3],outDelay:400}});let $l=cr[2]&&N$7(cr),Wl=cr[1]&&P$c(cr);return{c(){Ae$1(vn.$$.fragment),yn=Xt$1(),Rn=K$g("div"),Ae$1(Bn.$$.fragment),Co=Xt$1(),$l&&$l.c(),Po=Xt$1(),Wl&&Wl.c(),To=Yt(),te$4(Rn,"class","line svelte-1f7m1lj")},m(Xl,Yl){Dt$1(vn,Xl,Yl),Nt(Xl,yn,Yl),Nt(Xl,Rn,Yl),Dt$1(Bn,Rn,null),Nt(Xl,Co,Yl),$l&&$l.m(Xl,Yl),Nt(Xl,Po,Yl),Wl&&Wl.m(Xl,Yl),Nt(Xl,To,Yl),Io=!0},p(Xl,Yl){const Zl={};Yl&8&&(Zl.visible=Xl[3]),vn.$set(Zl);const ey={};Yl&8&&(ey.unfolded=Xl[3]),Bn.$set(ey),Xl[2]?$l?($l.p(Xl,Yl),Yl&4&&ot$4($l,1)):($l=N$7(Xl),$l.c(),ot$4($l,1),$l.m(Po.parentNode,Po)):$l&&(Lt(),$t($l,1,1,()=>{$l=null}),Ot$1()),Xl[1]?Wl?(Wl.p(Xl,Yl),Yl&2&&ot$4(Wl,1)):(Wl=P$c(Xl),Wl.c(),ot$4(Wl,1),Wl.m(To.parentNode,To)):Wl&&(Lt(),$t(Wl,1,1,()=>{Wl=null}),Ot$1())},i(Xl){Io||(ot$4(vn.$$.fragment,Xl),ot$4(Bn.$$.fragment,Xl),ot$4($l),ot$4(Wl),Io=!0)},o(Xl){$t(vn.$$.fragment,Xl),$t(Bn.$$.fragment,Xl),$t($l),$t(Wl),Io=!1},d(Xl){Rt(vn,Xl),Xl&&J$h(yn),Xl&&J$h(Rn),Rt(Bn),Xl&&J$h(Co),$l&&$l.d(Xl),Xl&&J$h(Po),Wl&&Wl.d(Xl),Xl&&J$h(To)}}}function N$7(cr){let vn,yn,Rn;return yn=new ae$1({props:{unfolded:cr[3],content:cr[2],inDelay:500}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","text svelte-1f7m1lj")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co&8&&(Po.unfolded=Bn[3]),Co&4&&(Po.content=Bn[2]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function P$c(cr){let vn,yn,Rn;return yn=new at({props:{autoplayConfig:{autoplayCarousel:!1},unfolded:cr[3],mediaData:cr[1],tag:cr[0],enableCarousel:!1,mediaItemConfig:{canPlay:!1,playButtonSizeIfNeed:"small",disableVideoIfHavePoster:!0},inDelay:500,duration:500}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","media-wrapper svelte-1f7m1lj")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co&8&&(Po.unfolded=Bn[3]),Co&2&&(Po.mediaData=Bn[1]),Co&1&&(Po.tag=Bn[0]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function Y$3(cr){let vn,yn,Rn=cr[0].state&&I$b(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=I$b(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function A$e(cr,vn,yn){let Rn,Bn,Co,Po,{tag:To}=vn;return cr.$$set=Io=>{"tag"in Io&&yn(0,To=Io.tag)},cr.$$.update=()=>{var Io,$l,Wl;cr.$$.dirty&1&&yn(3,Rn=To.state?To.state.unfolded:!1),cr.$$.dirty&1&&yn(4,Bn=($l=(Io=To.data.title)!=null?Io:To.data.text)!=null?$l:""),cr.$$.dirty&16&&yn(2,Co=((Wl=Bn.length)!=null?Wl:0)>7?Bn.substring(0,6)+"...":Bn),cr.$$.dirty&1&&yn(1,Po=To.data.mediaData)},[To,Po,Co,Rn,Bn]}class qe$2 extends Ce$1{constructor(vn){super(),Te$1(this,vn,A$e,Y$3,Ft$1,{tag:0},V$4)}}function de$1(cr){Qt(cr,"svelte-1707m54",'@charset "UTF-8";.svelte-1707m54.svelte-1707m54{box-sizing:border-box}.marketing.svelte-1707m54.svelte-1707m54{transform:translateY(-100%)}.marketing.svelte-1707m54 .line.svelte-1707m54{position:absolute;height:1.875rem;width:0.0625rem;left:50%;transform:translateX(-50%);background-color:white;bottom:0;transform-origin:bottom;transition:all 500ms}.marketing.svelte-1707m54 .content.svelte-1707m54{position:relative;min-width:7.5rem;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;border-radius:0.25rem;top:-1.875rem;left:-1rem;padding:0.5rem 0rem 0.5625rem;transition-property:opacity, transform;transition-duration:500ms}.marketing.svelte-1707m54 .content .headerImage.svelte-1707m54{position:absolute;width:100%;top:0.25rem;transform:translateY(-100%);border-top-left-radius:0.25rem;border-top-right-radius:0.25rem}.title-wrapper.svelte-1707m54.svelte-1707m54{position:relative;width:100%;height:1.125rem}.title-wrapper.svelte-1707m54 .title.svelte-1707m54{border-radius:0.25rem;width:100%;padding-left:0.625rem;padding-right:0.625rem}.title-wrapper.svelte-1707m54 .title .text.svelte-1707m54{display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.75rem;font-weight:bold;line-height:1.125rem}.footer.svelte-1707m54.svelte-1707m54{box-sizing:border-box;width:100%;padding:0.5rem 0.625rem 0;display:flex;justify-content:space-between;align-items:center}.footer.svelte-1707m54 .price-section.svelte-1707m54{flex-shrink:0;max-width:calc(100% - 1.875rem);overflow:hidden;white-space:nowrap}.footer.svelte-1707m54 .price-section .value.svelte-1707m54{font-size:0.875rem;line-height:1rem;font-weight:normal;font-family:TG-TYPE, PingFangSC, Segoe UI, Rototo, sans-serif;letter-spacing:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.footer.svelte-1707m54 .price-section .unit.svelte-1707m54{font-size:0.625rem;margin-left:0.125rem}.footer.svelte-1707m54 .action-section.svelte-1707m54{display:flex;align-items:center;height:0.875rem}.footer.svelte-1707m54 .action-section .highlight-text.svelte-1707m54{font-size:0.625rem;line-height:0.875rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:8.75rem}.footer.svelte-1707m54 .action-section .arrow.svelte-1707m54{display:flex;align-items:center;margin-left:0.25rem;flex-shrink:0;width:0.625rem}.footer.svelte-1707m54 .action-section .arrow svg.svelte-1707m54{width:0.375rem;height:0.625rem}.tags-wrapper.svelte-1707m54.svelte-1707m54{position:relative;overflow:hidden;height:1rem;margin-top:0.25rem}.tags-wrapper.svelte-1707m54 .tags.svelte-1707m54{position:relative;display:inline-flex;max-width:100%;flex-wrap:wrap;padding-left:0.625rem;padding-right:0.375rem}.tags-wrapper.svelte-1707m54 .tags .tag.svelte-1707m54{display:block;text-align:center;flex-shrink:0;flex-grow:0;font-size:0.625rem;height:1rem;line-height:1rem;margin-right:0.25rem;margin-bottom:0.25rem;padding:0 0.25rem;border-radius:0.125rem;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;box-sizing:border-box}.marketing.light.svelte-1707m54 .content.svelte-1707m54{background-color:white}.marketing.light.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:rgba(0, 0, 0, 0.8)}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:#946700}.marketing.light.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(0, 0, 0, 0.06);color:rgba(0, 0, 0, 0.5)}.marketing.light.svelte-1707m54 .content .footer.svelte-1707m54{color:#946700;fill:#946700}.marketing.dark.svelte-1707m54 .content.svelte-1707m54{background-color:rgba(0, 0, 0, 0.5)}.marketing.dark.svelte-1707m54 .content .title-wrapper .title .text.svelte-1707m54{color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .primary-tag.svelte-1707m54{background:rgba(234, 208, 154, 0.5);color:white}.marketing.dark.svelte-1707m54 .content .tags-wrapper .tags .secondary-tag.svelte-1707m54{background:rgba(255, 255, 255, 0.15);color:rgba(255, 255, 255, 0.85)}.marketing.dark.svelte-1707m54 .content .footer.svelte-1707m54{color:#ead09a;fill:#ead09a}.marketing.unfolded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 1);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .line.svelte-1707m54{transform:translateX(-50%) scale(1, 0);transition-timing-function:ease-in}.marketing.unfolded.svelte-1707m54 .content.svelte-1707m54{opacity:1;transform:translateY(0);transition-timing-function:ease-out}.marketing.folded.svelte-1707m54 .content.svelte-1707m54{opacity:0;transform:translateY(0.425rem);transition-timing-function:ease-in}.tag.svelte-1707m54.svelte-1707m54,.text.svelte-1707m54.svelte-1707m54{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}')}function q$b(cr,vn,yn){const Rn=cr.slice();return Rn[0]=vn[yn],Rn}function x$e(cr,vn,yn){const Rn=cr.slice();return Rn[0]=vn[yn],Rn}function O$a(cr){let vn,yn;return{c(){vn=K$g("img"),te$4(vn,"class","headerImage svelte-1707m54"),Wt$1(vn.src,yn=cr[1].headerPictureUrl)||te$4(vn,"src",yn),te$4(vn,"alt","")},m(Rn,Bn){Nt(Rn,vn,Bn)},p(Rn,Bn){Bn&2&&!Wt$1(vn.src,yn=Rn[1].headerPictureUrl)&&te$4(vn,"src",yn)},d(Rn){Rn&&J$h(vn)}}}function j$e(cr){let vn,yn,Rn,Bn,Co,Po=cr[4]||[],To=[];for(let Wl=0;Wl<Po.length;Wl+=1)To[Wl]=E$e(x$e(cr,Po,Wl));let Io=cr[3]||[],$l=[];for(let Wl=0;Wl<Io.length;Wl+=1)$l[Wl]=G$6(q$b(cr,Io,Wl));return{c(){vn=K$g("div"),yn=K$g("div");for(let Wl=0;Wl<To.length;Wl+=1)To[Wl].c();Rn=Xt$1();for(let Wl=0;Wl<$l.length;Wl+=1)$l[Wl].c();te$4(yn,"class","tags svelte-1707m54"),te$4(vn,"class","tags-wrapper svelte-1707m54")},m(Wl,Xl){Nt(Wl,vn,Xl),pt$1(vn,yn);for(let Yl=0;Yl<To.length;Yl+=1)To[Yl]&&To[Yl].m(yn,null);pt$1(yn,Rn);for(let Yl=0;Yl<$l.length;Yl+=1)$l[Yl]&&$l[Yl].m(yn,null);Bn||(Co=[Jt$1(E$o.call(null,yn)),lt$2(yn,"clientHeight",cr[18])],Bn=!0)},p(Wl,Xl){if(Xl&16){Po=Wl[4]||[];let Yl;for(Yl=0;Yl<Po.length;Yl+=1){const Zl=x$e(Wl,Po,Yl);To[Yl]?To[Yl].p(Zl,Xl):(To[Yl]=E$e(Zl),To[Yl].c(),To[Yl].m(yn,Rn))}for(;Yl<To.length;Yl+=1)To[Yl].d(1);To.length=Po.length}if(Xl&8){Io=Wl[3]||[];let Yl;for(Yl=0;Yl<Io.length;Yl+=1){const Zl=q$b(Wl,Io,Yl);$l[Yl]?$l[Yl].p(Zl,Xl):($l[Yl]=G$6(Zl),$l[Yl].c(),$l[Yl].m(yn,null))}for(;Yl<$l.length;Yl+=1)$l[Yl].d(1);$l.length=Io.length}},d(Wl){Wl&&J$h(vn),Vt(To,Wl),Vt($l,Wl),Bn=!1,M$o(Co)}}}function E$e(cr){let vn,yn=cr[0]+"",Rn;return{c(){vn=K$g("div"),Rn=gt$3(yn),te$4(vn,"class","tag primary-tag svelte-1707m54"),ne$5(vn,"min-width",R$9)},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co&16&&yn!==(yn=Bn[0]+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function G$6(cr){let vn,yn=cr[0]+"",Rn;return{c(){vn=K$g("div"),Rn=gt$3(yn),te$4(vn,"class","tag secondary-tag svelte-1707m54"),ne$5(vn,"min-width",R$9)},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co&8&&yn!==(yn=Bn[0]+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function N$6(cr){let vn,yn,Rn,Bn,Co,Po=cr[2]&&Z$4(cr),To=!cr[2]&&cr[1].highlightText&&J$6(cr);return{c(){vn=K$g("div"),Po&&Po.c(),yn=Xt$1(),Rn=K$g("div"),To&&To.c(),Bn=Xt$1(),Co=K$g("span"),Co.innerHTML='<svg viewBox="0 0 6 9" class="svelte-1707m54"><g transform="translate(-3, -2)" fill-rule="nonzero" class="svelte-1707m54"><path d="M4.43868724,2.12056563 C4.28121824,1.95989074 4.02582143,1.95979988 3.86824251,2.1203627 C3.72498894,2.26632889 3.71189225,2.49481723 3.82900374,2.65587166 L6.57092402,5.92894326 C6.72651763,6.11470411 6.72651763,6.38529589 6.57092402,6.57105674 L3.86804348,9.79798499 C3.72488984,9.94405307 3.71194952,10.1725507 3.8291712,10.3335217 L3.86824251,10.3796373 C4.01149607,10.5256035 4.23559087,10.5387981 4.39346025,10.4192733 L4.43868724,10.3794344 L8.1144599,6.5985342 C8.30312347,6.40447482 8.30312347,6.09552518 8.1144599,5.9014658 L4.43868724,2.12056563 Z" class="svelte-1707m54"></path></g></svg>',te$4(Co,"class","arrow svelte-1707m54"),te$4(Rn,"class","action-section svelte-1707m54"),te$4(vn,"class","footer svelte-1707m54")},m(Io,$l){Nt(Io,vn,$l),Po&&Po.m(vn,null),pt$1(vn,yn),pt$1(vn,Rn),To&&To.m(Rn,null),pt$1(Rn,Bn),pt$1(Rn,Co)},p(Io,$l){Io[2]?Po?Po.p(Io,$l):(Po=Z$4(Io),Po.c(),Po.m(vn,yn)):Po&&(Po.d(1),Po=null),!Io[2]&&Io[1].highlightText?To?To.p(Io,$l):(To=J$6(Io),To.c(),To.m(Rn,Bn)):To&&(To.d(1),To=null)},d(Io){Io&&J$h(vn),Po&&Po.d(),To&&To.d()}}}function Z$4(cr){let vn,yn,Rn=cr[1].price.value+"",Bn,Co,Po=cr[1].price.unit&&A$d(cr);return{c(){vn=K$g("div"),yn=K$g("span"),Bn=gt$3(Rn),Co=Xt$1(),Po&&Po.c(),te$4(yn,"class","value svelte-1707m54"),te$4(vn,"class","price-section svelte-1707m54")},m(To,Io){Nt(To,vn,Io),pt$1(vn,yn),pt$1(yn,Bn),pt$1(vn,Co),Po&&Po.m(vn,null)},p(To,Io){Io&2&&Rn!==(Rn=To[1].price.value+"")&&ee$5(Bn,Rn),To[1].price.unit?Po?Po.p(To,Io):(Po=A$d(To),Po.c(),Po.m(vn,null)):Po&&(Po.d(1),Po=null)},d(To){To&&J$h(vn),Po&&Po.d()}}}function A$d(cr){let vn,yn=cr[1].price.unit+"",Rn;return{c(){vn=K$g("span"),Rn=gt$3(yn),te$4(vn,"class","unit svelte-1707m54")},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co&2&&yn!==(yn=Bn[1].price.unit+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function J$6(cr){let vn,yn=cr[1].highlightText+"",Rn;return{c(){vn=K$g("span"),Rn=gt$3(yn),te$4(vn,"class","highlight-text svelte-1707m54")},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co&2&&yn!==(yn=Bn[1].highlightText+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function ce(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl=cr[1].title+"",Yl,Zl,ey,Rm,ry;yn=new T$a({props:{visible:cr[5],outDelay:500,left:61,bottom:87,blurRadius:150,spreadRadius:75}});let _g=cr[1].headerPictureUrl&&O$a(cr),ty=cr[6]&&j$e(cr),ny=(cr[2]||cr[1].highlightText)&&N$6(cr);return{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),Rn=Xt$1(),Bn=K$g("div"),Co=Xt$1(),Po=K$g("div"),_g&&_g.c(),To=Xt$1(),Io=K$g("div"),$l=K$g("div"),Wl=K$g("div"),Yl=gt$3(Xl),Zl=Xt$1(),ty&&ty.c(),ey=Xt$1(),ny&&ny.c(),te$4(Bn,"class","line svelte-1707m54"),ne$5(Bn,"transition-delay",cr[5]?cr[9]+"ms":cr[8]+"ms"),te$4(Wl,"class","text svelte-1707m54"),te$4($l,"class","title svelte-1707m54"),te$4(Io,"class","title-wrapper svelte-1707m54"),te$4(Po,"class","content svelte-1707m54"),ne$5(Po,"max-width",e$8(cr[12])),ne$5(Po,"transition-delay",cr[5]?cr[7]+"ms":"0ms"),te$4(vn,"class",Rm=Gt(`marketing ${cr[10]}`)+" svelte-1707m54"),re$2(vn,"unfolded",cr[5]),re$2(vn,"folded",cr[11])},m(iy,oy){Nt(iy,vn,oy),Dt$1(yn,vn,null),pt$1(vn,Rn),pt$1(vn,Bn),pt$1(vn,Co),pt$1(vn,Po),_g&&_g.m(Po,null),pt$1(Po,To),pt$1(Po,Io),pt$1(Io,$l),pt$1($l,Wl),pt$1(Wl,Yl),pt$1(Po,Zl),ty&&ty.m(Po,null),pt$1(Po,ey),ny&&ny.m(Po,null),ry=!0},p(iy,[oy]){const ay={};oy&32&&(ay.visible=iy[5]),yn.$set(ay),oy&800&&ne$5(Bn,"transition-delay",iy[5]?iy[9]+"ms":iy[8]+"ms"),iy[1].headerPictureUrl?_g?_g.p(iy,oy):(_g=O$a(iy),_g.c(),_g.m(Po,To)):_g&&(_g.d(1),_g=null),(!ry||oy&2)&&Xl!==(Xl=iy[1].title+"")&&ee$5(Yl,Xl),iy[6]?ty?ty.p(iy,oy):(ty=j$e(iy),ty.c(),ty.m(Po,ey)):ty&&(ty.d(1),ty=null),iy[2]||iy[1].highlightText?ny?ny.p(iy,oy):(ny=N$6(iy),ny.c(),ny.m(Po,null)):ny&&(ny.d(1),ny=null),oy&160&&ne$5(Po,"transition-delay",iy[5]?iy[7]+"ms":"0ms"),(!ry||oy&1024&&Rm!==(Rm=Gt(`marketing ${iy[10]}`)+" svelte-1707m54"))&&te$4(vn,"class",Rm),(!ry||oy&1056)&&re$2(vn,"unfolded",iy[5]),(!ry||oy&3072)&&re$2(vn,"folded",iy[11])},i(iy){ry||(ot$4(yn.$$.fragment,iy),ry=!0)},o(iy){$t(yn.$$.fragment,iy),ry=!1},d(iy){iy&&J$h(vn),Rt(yn),_g&&_g.d(),ty&&ty.d(),ny&&ny.d()}}}const R$9=40;function ge$2(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,{tag:Rm}=vn,ry,_g=(()=>{var ay;const uy=(ay=Rm.data.limitWidth)!=null?ay:!0;if(typeof uy=="number")return uy;if(uy===!0)return 172})(),ty=0,ny=!1;function iy(ay){Math.abs(ry-ay)>5&&(yn(14,ry=ay),setTimeout(()=>{yn(16,ny=!1)},100))}const oy=ay=>iy(ay.detail);return cr.$$set=ay=>{"tag"in ay&&yn(0,Rm=ay.tag)},cr.$$.update=()=>{var ay,uy,hy,my;cr.$$.dirty&1&&yn(5,Rn=(uy=(ay=Rm.state)==null?void 0:ay.unfolded)!=null?uy:!1),cr.$$.dirty&32&&yn(11,Bn=!Rn),cr.$$.dirty&1&&yn(1,Co=Rm.data),cr.$$.dirty&2&&yn(2,Po=i$w((hy=Co.price)==null?void 0:hy.value)&&((my=Co.price)==null?void 0:my.value)!==""),cr.$$.dirty&1&&yn(10,To=Rm.data.theme||"light"),cr.$$.dirty&114688&&(!ny||_g&&_g>0)&&(yn(15,ty=Math.max(1,Math.floor(((_g||172)-20)/R$9))),ry!==void 0&&ry>40&&yn(15,ty=Math.max(1,ty-1)),yn(16,ny=!0)),cr.$$.dirty&32770&&yn(4,Io=(Co.brandTags||[]).filter(Boolean).slice(0,ty)),cr.$$.dirty&32784&&yn(17,$l=Math.max(0,ty-Io.length)),cr.$$.dirty&131074&&yn(3,Wl=(Co.tags||[]).filter(Boolean).slice(0,$l)),cr.$$.dirty&24&&yn(6,ey=Io.length>0||Wl.length>0),cr.$$.dirty&6&&(Po||Co.highlightText)},yn(9,Xl=400),yn(8,Yl=180+500-500-40),yn(7,Zl=400+180),[Rm,Co,Po,Wl,Io,Rn,ey,Zl,Yl,Xl,To,Bn,_g,iy,ry,ty,ny,$l,oy]}class Dt extends Ce$1{constructor(vn){super(),Te$1(this,vn,ge$2,ce,Ft$1,{tag:0},de$1)}}const e$5=cr=>cr;var d$i=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class E$d{static checkBrowserSupport(){var vn,yn,Rn,Bn;const Co=navigator.userAgent,Po=document.createElement("audio");let To="Unknown",Io="Unknown";Co.includes("Edge/")?(To="Microsoft Edge",Io=((vn=Co.match(/Edge\/(\d+)/))==null?void 0:vn[1])||"Unknown"):Co.includes("Chrome/")?(To="Chrome",Io=((yn=Co.match(/Chrome\/(\d+)/))==null?void 0:yn[1])||"Unknown"):Co.includes("Firefox/")?(To="Firefox",Io=((Rn=Co.match(/Firefox\/(\d+)/))==null?void 0:Rn[1])||"Unknown"):Co.includes("Safari/")&&!Co.includes("Chrome")&&(To="Safari",Io=((Bn=Co.match(/Version\/(\d+)/))==null?void 0:Bn[1])||"Unknown");const $l=[{name:"MP3",mime:"audio/mpeg"},{name:"OGG",mime:"audio/ogg"},{name:"WAV",mime:"audio/wav"},{name:"M4A",mime:"audio/mp4"},{name:"AAC",mime:"audio/aac"},{name:"WEBM",mime:"audio/webm"}],Wl=[],Xl=[];return $l.forEach(Yl=>{const Zl=Po.canPlayType(Yl.mime);Zl==="probably"?Wl.push(`${Yl.name} (\u5B8C\u5168\u652F\u6301)`):Zl==="maybe"?(Wl.push(`${Yl.name} (\u53EF\u80FD\u652F\u6301)`),Xl.push(`${Yl.name} \u683C\u5F0F\u652F\u6301\u4E0D\u786E\u5B9A\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u5176\u4ED6\u683C\u5F0F`)):Xl.push(`${Yl.name} \u683C\u5F0F\u4E0D\u88AB\u652F\u6301`)}),{browser:`${To} ${Io}`,version:Io,supportedFormats:Wl,warnings:Xl}}static testAudioUrl(vn){return d$i(this,null,function*(){try{const yn=yield fetch(vn,{method:"HEAD"});return{accessible:yn.ok,status:yn.status,contentType:yn.headers.get("content-type")||void 0,contentLength:parseInt(yn.headers.get("content-length")||"0")||void 0}}catch(yn){return{accessible:!1,error:yn instanceof Error?yn.message:String(yn)}}})}static testAudioElement(vn){return d$i(this,null,function*(){return new Promise(yn=>{const Rn=new Audio;let Bn=!1;const Co=()=>{Bn||(Bn=!0,Rn.removeEventListener("loadedmetadata",Po),Rn.removeEventListener("error",Io),Rn.removeEventListener("canplay",To))},Po=()=>{Co(),yn({success:!0,duration:Rn.duration,networkState:Rn.networkState,readyState:Rn.readyState})},To=()=>{Co(),yn({success:!0,canPlay:"canplay",duration:Rn.duration,networkState:Rn.networkState,readyState:Rn.readyState})},Io=()=>{Co(),yn({success:!1,error:Rn.error?`${Rn.error.code}: ${Rn.error.message}`:"Unknown audio error",networkState:Rn.networkState,readyState:Rn.readyState})};Rn.addEventListener("loadedmetadata",Po),Rn.addEventListener("canplay",To),Rn.addEventListener("error",Io),setTimeout(()=>{Bn||(Co(),yn({success:!1,error:"\u97F3\u9891\u52A0\u8F7D\u8D85\u65F6",networkState:Rn.networkState,readyState:Rn.readyState}))},1e4),Rn.src=vn,Rn.load()})})}static diagnoseAudio(vn){return d$i(this,null,function*(){var yn;console.group("\u{1F3B5} \u97F3\u9891\u8BCA\u65AD\u62A5\u544A"),console.group("1. \u6D4F\u89C8\u5668\u652F\u6301\u68C0\u67E5");const Rn=this.checkBrowserSupport();console.log("\u6D4F\u89C8\u5668:",Rn.browser),console.log("\u652F\u6301\u7684\u683C\u5F0F:",Rn.supportedFormats),Rn.warnings.length>0&&console.warn("\u8B66\u544A:",Rn.warnings),console.groupEnd(),console.group("2. \u97F3\u9891\u6587\u4EF6URL\u68C0\u67E5"),console.log("\u97F3\u9891URL:",vn);try{new URL(vn,window.location.href),console.log("\u2705 URL\u683C\u5F0F\u6B63\u786E")}catch{console.error("\u274C URL\u683C\u5F0F\u9519\u8BEF"),console.groupEnd(),console.groupEnd();return}const Bn=(yn=vn.split(".").pop())==null?void 0:yn.toLowerCase();Bn&&(console.log("\u6587\u4EF6\u6269\u5C55\u540D:",Bn.toUpperCase()),["mp3","ogg","wav","m4a","aac","webm"].includes(Bn)?console.log("\u2705 \u6587\u4EF6\u683C\u5F0F\u5E38\u89C1"):console.warn("\u26A0\uFE0F \u4E0D\u5E38\u89C1\u7684\u6587\u4EF6\u683C\u5F0F\uFF0C\u53EF\u80FD\u5B58\u5728\u517C\u5BB9\u6027\u95EE\u9898")),console.groupEnd(),console.group("3. \u7F51\u7EDC\u53EF\u8BBF\u95EE\u6027\u6D4B\u8BD5");const Co=yield this.testAudioUrl(vn);Co.accessible?(console.log("\u2705 \u6587\u4EF6\u53EF\u8BBF\u95EE"),console.log("HTTP\u72B6\u6001:",Co.status),Co.contentType&&console.log("\u5185\u5BB9\u7C7B\u578B:",Co.contentType),Co.contentLength&&console.log("\u6587\u4EF6\u5927\u5C0F:",(Co.contentLength/1024).toFixed(2),"KB")):(console.error("\u274C \u6587\u4EF6\u65E0\u6CD5\u8BBF\u95EE"),Co.status&&console.error("HTTP\u72B6\u6001:",Co.status),Co.error&&console.error("\u9519\u8BEF:",Co.error)),console.groupEnd(),console.group("4. \u97F3\u9891\u5143\u7D20\u6D4B\u8BD5");const Po=yield this.testAudioElement(vn);Po.success?(console.log("\u2705 \u97F3\u9891\u5143\u7D20\u521B\u5EFA\u6210\u529F"),Po.duration&&console.log("\u97F3\u9891\u65F6\u957F:",Po.duration.toFixed(2),"\u79D2"),console.log("\u7F51\u7EDC\u72B6\u6001:",this.getNetworkStateDescription(Po.networkState)),console.log("\u5C31\u7EEA\u72B6\u6001:",this.getReadyStateDescription(Po.readyState))):(console.error("\u274C \u97F3\u9891\u5143\u7D20\u521B\u5EFA\u5931\u8D25"),console.error("\u9519\u8BEF:",Po.error),console.log("\u7F51\u7EDC\u72B6\u6001:",this.getNetworkStateDescription(Po.networkState)),console.log("\u5C31\u7EEA\u72B6\u6001:",this.getReadyStateDescription(Po.readyState))),console.groupEnd(),console.groupEnd()})}static getNetworkStateDescription(vn){switch(vn){case 0:return"NETWORK_EMPTY - \u97F3\u9891\u5143\u7D20\u5C1A\u672A\u521D\u59CB\u5316";case 1:return"NETWORK_IDLE - \u97F3\u9891\u5143\u7D20\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u4F46\u672A\u4F7F\u7528\u7F51\u7EDC";case 2:return"NETWORK_LOADING - \u6D4F\u89C8\u5668\u6B63\u5728\u4E0B\u8F7D\u6570\u636E";case 3:return"NETWORK_NO_SOURCE - \u672A\u627E\u5230\u5408\u9002\u7684\u97F3\u9891\u6E90";default:return`\u672A\u77E5\u72B6\u6001 (${vn})`}}static getReadyStateDescription(vn){switch(vn){case 0:return"HAVE_NOTHING - \u6CA1\u6709\u97F3\u9891\u6570\u636E";case 1:return"HAVE_METADATA - \u5DF2\u83B7\u53D6\u5143\u6570\u636E";case 2:return"HAVE_CURRENT_DATA - \u6709\u5F53\u524D\u64AD\u653E\u4F4D\u7F6E\u7684\u6570\u636E";case 3:return"HAVE_FUTURE_DATA - \u6709\u8DB3\u591F\u7684\u6570\u636E\u5F00\u59CB\u64AD\u653E";case 4:return"HAVE_ENOUGH_DATA - \u6709\u8DB3\u591F\u7684\u6570\u636E\u6D41\u7545\u64AD\u653E";default:return`\u672A\u77E5\u72B6\u6001 (${vn})`}}}var f$p=Object.defineProperty,A$c=(cr,vn,yn)=>vn in cr?f$p(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,h$a=(cr,vn,yn)=>(A$c(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),v$g=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class S$b extends Audio{constructor(vn){super(),h$a(this,"sharedAudioSrc"),h$a(this,"sharedAudioPaused",!0),h$a(this,"sharedAudioCurrentTime",0),h$a(this,"tryplaying",!1),h$a(this,"audioInstance"),h$a(this,"eventListenerDisposer"),this.sharedAudioSrc=vn,vn&&this.validateAudioSource(vn)}get paused(){var vn;return(vn=this.sharedAudioPaused)!=null?vn:!0}get currentTime(){return this.sharedAudioCurrentTime}get duration(){var vn;return((vn=this.audioInstance)==null?void 0:vn.duration)||0}play(){return v$g(this,null,function*(){var vn,yn,Rn;if(this.tryplaying)return;this.tryplaying=!0,(!this.audioInstance||((vn=this.audioInstance)==null?void 0:vn.realSrc)!==this.sharedAudioSrc)&&(this.audioInstance=L$d(this.sharedAudioSrc,{namespace:d$q.PlayAudio})),(yn=this.eventListenerDisposer)==null||yn.call(this),this.eventListenerDisposer=this.addEventListeners(),this.audioInstance.currentTime=(Rn=this.currentTime)!=null?Rn:0;const Bn=this.audioInstance.currentTime!==this.currentTime;this.audioInstance.play().then(()=>{var Co;this.audioInstance.muted=!1,Bn&&(this.audioInstance.currentTime=(Co=this.currentTime)!=null?Co:0),this.sharedAudioPaused=!1}).catch(Co=>{var Po;this.handlePlayError(Co),this.endedHandler(),(Po=this.onerror)==null||Po.call(this,Co)}).finally(()=>{this.tryplaying=!1})})}pause(vn){var yn;if(this.audioInstance&&!this.paused){if(this.sharedAudioPaused=!0,(yn=this.eventListenerDisposer)==null||yn.call(this),this.audioInstance.ended){this.endedHandler();return}this.audioInstance.paused||this.audioInstance.pause(),this.onpause(vn!=null?vn:new Event("pause")),this.clear()}}dispose(){var vn;(vn=this.eventListenerDisposer)==null||vn.call(this),this.clear(),this.audioInstance=void 0}clear(){var vn;(vn=this.audioInstance)==null||vn.clear()}handlePlayError(vn){var yn,Rn,Bn,Co;const Po=navigator.userAgent,To=this.sharedAudioSrc;if(console.group("\u{1F3B5} \u97F3\u9891\u64AD\u653E\u9519\u8BEF\u8BE6\u60C5"),console.error("\u9519\u8BEF\u5BF9\u8C61:",vn),console.error("\u9519\u8BEF\u540D\u79F0:",vn.name),console.error("\u9519\u8BEF\u4FE1\u606F:",vn.message),console.error("\u97F3\u9891\u6587\u4EF6\u8DEF\u5F84:",To),console.error("\u6D4F\u89C8\u5668\u4FE1\u606F:",Po),console.error("\u97F3\u9891\u5B9E\u4F8B\u72B6\u6001:",{exists:!!this.audioInstance,readyState:(yn=this.audioInstance)==null?void 0:yn.readyState,networkState:(Rn=this.audioInstance)==null?void 0:Rn.networkState,error:(Bn=this.audioInstance)==null?void 0:Bn.error}),vn.name==="NotSupportedError"){if(vn.message.includes("no supported source was found")&&(console.error("\u274C \u9519\u8BEF\u539F\u56E0: \u65E0\u6CD5\u627E\u5230\u652F\u6301\u7684\u97F3\u9891\u6E90"),console.error("\u{1F4A1} \u53EF\u80FD\u7684\u89E3\u51B3\u65B9\u6848:"),console.error("   1. \u68C0\u67E5\u97F3\u9891\u6587\u4EF6\u8DEF\u5F84\u662F\u5426\u6B63\u786E"),console.error("   2. \u68C0\u67E5\u97F3\u9891\u6587\u4EF6\u662F\u5426\u5B58\u5728"),console.error("   3. \u68C0\u67E5\u97F3\u9891\u6587\u4EF6\u683C\u5F0F\u662F\u5426\u88AB\u6D4F\u89C8\u5668\u652F\u6301 (\u63A8\u8350: MP3, OGG, WAV)"),console.error("   4. \u68C0\u67E5CORS\u8BBE\u7F6E\uFF0C\u786E\u4FDD\u53EF\u4EE5\u8DE8\u57DF\u8BBF\u95EE\u97F3\u9891\u6587\u4EF6"),To)){const Io=(Co=To.split(".").pop())==null?void 0:Co.toLowerCase(),$l=["mp3","ogg","wav","m4a","aac"];Io&&!$l.includes(Io)&&(console.error(`   \u26A0\uFE0F  \u68C0\u6D4B\u5230\u4E0D\u5E38\u89C1\u7684\u97F3\u9891\u683C\u5F0F: .${Io}`),console.error(`   \u{1F4DD} \u5EFA\u8BAE\u4F7F\u7528: ${$l.join(", ")}`))}}else vn.name==="AbortError"?console.error("\u274C \u9519\u8BEF\u539F\u56E0: \u97F3\u9891\u64AD\u653E\u88AB\u4E2D\u65AD"):vn.name==="NotAllowedError"?console.error("\u274C \u9519\u8BEF\u539F\u56E0: \u6D4F\u89C8\u5668\u963B\u6B62\u4E86\u97F3\u9891\u64AD\u653E (\u901A\u5E38\u9700\u8981\u7528\u6237\u4EA4\u4E92)"):vn.message==="The operation is not supported."?console.error("\u274C \u9519\u8BEF\u539F\u56E0: \u97F3\u9891\u6587\u4EF6\u53EF\u80FD\u635F\u574F\u6216\u683C\u5F0F\u6709\u95EE\u9898"):console.error("\u274C \u672A\u77E5\u7684\u97F3\u9891\u64AD\u653E\u9519\u8BEF");console.groupEnd(),vn.name==="NotSupportedError"&&To&&(console.error("\u{1F4A1} \u5EFA\u8BAE\u8FD0\u884C\u5B8C\u6574\u97F3\u9891\u8BCA\u65AD\u6765\u67E5\u627E\u95EE\u9898\u6839\u6E90\uFF1A"),console.error(`AudioDiagnostics.diagnoseAudio("${To}")`))}validateAudioSource(vn){var yn;try{new URL(vn,window.location.href)}catch{console.warn("\u{1F3B5} \u97F3\u9891URL\u683C\u5F0F\u53EF\u80FD\u6709\u95EE\u9898:",vn),E$d.diagnoseAudio(vn);return}const Rn=(yn=vn.split(".").pop())==null?void 0:yn.toLowerCase(),Bn=["mp3","ogg","wav","m4a","aac","webm"];Rn&&!Bn.includes(Rn)&&(console.warn("\u{1F3B5} \u97F3\u9891\u683C\u5F0F\u53EF\u80FD\u4E0D\u88AB\u5E7F\u6CDB\u652F\u6301:",Rn),console.warn("\u{1F4A1} \u5EFA\u8BAE\u4F7F\u7528\u5E38\u89C1\u683C\u5F0F:",Bn.join(", ")),console.warn('\u{1F4A1} \u8FD0\u884C\u97F3\u9891\u8BCA\u65AD\uFF1AAudioDiagnostics.diagnoseAudio("'+vn+'")')),this.checkBrowserSupport(Rn)}checkBrowserSupport(vn){if(!vn)return;const yn=document.createElement("audio"),Rn={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",m4a:"audio/mp4",aac:"audio/aac",webm:"audio/webm"}[vn];if(Rn){const Bn=yn.canPlayType(Rn);Bn===""?(console.warn(`\u{1F3B5} \u5F53\u524D\u6D4F\u89C8\u5668\u53EF\u80FD\u4E0D\u652F\u6301 ${vn.toUpperCase()} \u683C\u5F0F`),console.warn("\u{1F4A1} \u5EFA\u8BAE\u63D0\u4F9B\u591A\u79CD\u683C\u5F0F\u7684\u97F3\u9891\u6587\u4EF6\u4F5C\u4E3A\u5907\u9009")):console.info(Bn==="maybe"?`\u{1F3B5} \u5F53\u524D\u6D4F\u89C8\u5668\u53EF\u80FD\u652F\u6301 ${vn.toUpperCase()} \u683C\u5F0F (\u4E0D\u786E\u5B9A)`:`\u{1F3B5} \u5F53\u524D\u6D4F\u89C8\u5668\u652F\u6301 ${vn.toUpperCase()} \u683C\u5F0F`)}}endedHandler(vn){var yn,Rn;(yn=this.onended)==null||yn.call(this,vn!=null?vn:new Event("ended")),(Rn=this.eventListenerDisposer)==null||Rn.call(this),this.sharedAudioPaused=!0,this.sharedAudioCurrentTime=0,this.clear()}addEventListeners(){const vn=this.audioInstance;if(!vn)return;const yn=Xl=>{var Yl;this.sharedAudioCurrentTime=vn.currentTime,(Yl=this.ontimeupdate)==null||Yl.call(this,Xl)},Rn=Xl=>{var Yl;vn.isBlankAudio||(this.sharedAudioPaused=!1,(Yl=this.onplay)==null||Yl.call(this,Xl))},Bn=Xl=>{this.pause(Xl)},Co=Xl=>{this.endedHandler(Xl)},Po=Xl=>{var Yl;this.sharedAudioPaused=!0,(Yl=this.onerror)==null||Yl.call(this,Xl)},To=Xl=>{var Yl;return(Yl=this.oncanplay)==null?void 0:Yl.call(this,Xl)},Io=Xl=>{var Yl;return(Yl=this.oncanplaythrough)==null?void 0:Yl.call(this,Xl)},$l=Xl=>{var Yl;return(Yl=this.onloadeddata)==null?void 0:Yl.call(this,Xl)},Wl=Xl=>{var Yl;return(Yl=this.onloadedmetadata)==null?void 0:Yl.call(this,Xl)};return vn.addEventListener("timeupdate",yn),vn.addEventListener("play",Rn),vn.addEventListener("pause",Bn),vn.addEventListener("ended",Co),vn.addEventListener("error",Po),vn.addEventListener("canplay",To),vn.addEventListener("canplaythrough",Io),vn.addEventListener("loadeddata",$l),vn.addEventListener("loadedmetadata",Wl),()=>{vn.removeEventListener("timeupdate",yn),vn.removeEventListener("play",Rn),vn.removeEventListener("pause",Bn),vn.removeEventListener("ended",Co),vn.removeEventListener("error",Po),vn.removeEventListener("canplay",To),vn.removeEventListener("canplaythrough",Io),vn.removeEventListener("loadeddata",$l),vn.removeEventListener("loadedmetadata",Wl)}}}var S$a=Object.defineProperty,_$6=Object.getOwnPropertySymbols,C$7=Object.prototype.hasOwnProperty,A$b=Object.prototype.propertyIsEnumerable,g$i=(cr,vn,yn)=>vn in cr?S$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,d$h=(cr,vn)=>{for(var yn in vn||(vn={}))C$7.call(vn,yn)&&g$i(cr,yn,vn[yn]);if(_$6)for(var yn of _$6(vn))A$b.call(vn,yn)&&g$i(cr,yn,vn[yn]);return cr};function K$5(cr){Qt(cr,"svelte-13e7hxv",".audio.svelte-13e7hxv{pointer-events:auto;cursor:pointer;width:100%;height:100%}")}function O$9(cr){let vn,yn,Rn,Bn;const Co=cr[8].default,Po=Bt(Co,cr,cr[7],null);return{c(){vn=K$g("div"),Po&&Po.c(),te$4(vn,"class","audio svelte-13e7hxv"),te$4(vn,"style",cr[0])},m(To,Io){Nt(To,vn,Io),Po&&Po.m(vn,null),yn=!0,Rn||(Bn=lt$2(vn,"click",Zt(cr[1])),Rn=!0)},p(To,[Io]){Po&&Po.p&&(!yn||Io&128)&&It(Po,Co,To,To[7],yn?Ht$1(Co,To[7],Io,null):Ut(To[7]),null),(!yn||Io&1)&&te$4(vn,"style",To[0])},i(To){yn||(ot$4(Po,To),yn=!0)},o(To){$t(Po,To),yn=!1},d(To){To&&J$h(vn),Po&&Po.d(To),Rn=!1,Bn()}}}function Q$3(cr,vn,yn){let{$$slots:Rn={},$$scope:Bn}=vn,{url:Co}=vn,{enable:Po=!0}=vn,{style:To=""}=vn,{hooksInfo:Io}=vn;const $l=fe$3(),Wl=de$3("hooks"),Xl=de$3("mediaStore");let Yl,Zl=!0;function ey(){yn(5,Yl.onplay=ry=>{Wl.emit("playStateChange",d$h({event:ry,state:"playing",mediaInstance:Yl},Io)),$l("play"),yn(6,Zl=!1)},Yl),yn(5,Yl.onpause=ry=>{Wl.emit("playStateChange",d$h({event:ry,state:"paused",mediaInstance:Yl},Io)),$l("pause"),yn(6,Zl=!0)},Yl),yn(5,Yl.onended=ry=>{Wl.emit("playStateChange",d$h({event:ry,state:"paused",mediaInstance:Yl},Io)),$l("pause"),yn(6,Zl=!0)},Yl),yn(5,Yl.onloadedmetadata=ry=>{typeof Yl.duration=="number"&&!Number.isNaN(Yl.duration)&&$l("duration",Yl.duration)},Yl),yn(5,Yl.onerror=ry=>{$l("pause"),yn(6,Zl=!0)},Yl),yn(5,Yl.ontimeupdate=ry=>{$l("timeupdate",Yl.currentTime)},Yl)}Xl.subscribe(({currentMediaElement:ry})=>{ry!==Yl&&(Zl||Yl==null||Yl.pause())});function Rm(ry){Yl&&(Wl.emit("click",d$h({event:ry,target:"AudioTagPlayIcon",audioInstance:Yl},Io)),Xl.set({currentMediaElement:Yl}),Wl.emit("playStateChange",d$h({event:ry,state:Yl.paused?"playing":"paused",mediaInstance:Yl},Io)),Yl.paused?Yl.play():Yl.pause())}return cr.$$set=ry=>{"url"in ry&&yn(2,Co=ry.url),"enable"in ry&&yn(3,Po=ry.enable),"style"in ry&&yn(0,To=ry.style),"hooksInfo"in ry&&yn(4,Io=ry.hooksInfo),"$$scope"in ry&&yn(7,Bn=ry.$$scope)},cr.$$.update=()=>{cr.$$.dirty&4&&(Co||$l("duration",0)),cr.$$.dirty&36&&(Yl==null||Yl.dispose(),yn(5,Yl=new S$b(Co)),$l("audioRef",Yl),setTimeout(()=>$l("audioRef",Yl),200),ey()),cr.$$.dirty&40&&(Po||Yl==null||Yl.pause()),cr.$$.dirty&72&&$l(Po&&!Zl?"play":"pause")},[To,Rm,Co,Po,Io,Yl,Zl,Bn,Rn]}class Z$3 extends Ce$1{constructor(vn){super(),Te$1(this,vn,Q$3,O$9,Ft$1,{url:2,enable:3,style:0,hooksInfo:4},K$5)}}function L$8(cr){Qt(cr,"svelte-6pnkgc",".audio-icon__wrapper.svelte-6pnkgc.svelte-6pnkgc{display:inline-block}.audio-icon.svelte-6pnkgc.svelte-6pnkgc{display:flex;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:50%}.audio-icon.svelte-6pnkgc .sound-wave__container.svelte-6pnkgc{position:absolute;pointer-events:none;top:0;left:0;width:100%;height:100%}@keyframes svelte-6pnkgc-sound_wave_1_animation{0%,10%{opacity:0}25%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_2_animation{0%,35%{opacity:0}50%,100%{opacity:1}}@keyframes svelte-6pnkgc-sound_wave_3_animation{0%,60%{opacity:0}75%,100%{opacity:1}}")}function G$5(cr){let vn,yn;return vn=new T$a({props:{center:!0,blurRadius:12,spreadRadius:5}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function N$5(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm=cr[0]&&G$5();return{c(){vn=K$g("div"),Rm&&Rm.c(),yn=Xt$1(),Rn=K$g("div"),Bn=K$g("div"),Co=Mt("svg"),Po=Mt("defs"),To=Mt("linearGradient"),Io=Mt("stop"),$l=Mt("stop"),Wl=Mt("linearGradient"),Xl=Mt("stop"),Yl=Mt("stop"),Zl=Mt("path"),te$4(Io,"stop-color","rgba(255, 255, 255, 1)"),te$4(Io,"stop-opacity",".5"),te$4(Io,"offset","0%"),te$4($l,"stop-color","rgba(255, 255, 255, 1)"),te$4($l,"offset","100%"),te$4(To,"x1","8.653%"),te$4(To,"y1","15.676%"),te$4(To,"x2","85.159%"),te$4(To,"y2","79.274%"),te$4(To,"id","dnalogel-audio-icon-linear-gradient-1"),te$4(Xl,"stop-color","rgba(255, 255, 255, 1)"),te$4(Xl,"offset","0%"),te$4(Yl,"stop-color","rgba(255, 255, 255, 1)"),te$4(Yl,"stop-opacity","0"),te$4(Yl,"offset","100%"),te$4(Wl,"x1","0%"),te$4(Wl,"y1","0%"),te$4(Wl,"x2","64.422%"),te$4(Wl,"y2","62.326%"),te$4(Wl,"id","dnalogel-audio-icon-linear-gradient-2"),te$4(Zl,"d",cr[3]),te$4(Zl,"fill","url(#dnalogel-audio-icon-linear-gradient-1)"),te$4(Zl,"fill-rule","nonzero"),te$4(Zl,"stroke","url(#dnalogel-audio-icon-linear-gradient-2)"),te$4(Zl,"stroke-width",".5"),te$4(Co,"viewBox","0 0 24 24"),te$4(Co,"version","1.1"),te$4(Co,"aria-label","audio-icon"),te$4(Bn,"class","sound-wave__container svelte-6pnkgc"),te$4(Rn,"class","audio-icon svelte-6pnkgc"),te$4(vn,"class","audio-icon__wrapper svelte-6pnkgc"),te$4(vn,"style",cr[1]),ne$5(vn,"width",cr[4]),ne$5(vn,"height",cr[4])},m(ry,_g){Nt(ry,vn,_g),Rm&&Rm.m(vn,null),pt$1(vn,yn),pt$1(vn,Rn),pt$1(Rn,Bn),pt$1(Bn,Co),pt$1(Co,Po),pt$1(Po,To),pt$1(To,Io),pt$1(To,$l),pt$1(Po,Wl),pt$1(Wl,Xl),pt$1(Wl,Yl),pt$1(Co,Zl),cr[10](Bn),ey=!0},p(ry,[_g]){ry[0]?Rm?_g&1&&ot$4(Rm,1):(Rm=G$5(),Rm.c(),ot$4(Rm,1),Rm.m(vn,yn)):Rm&&(Lt(),$t(Rm,1,1,()=>{Rm=null}),Ot$1()),(!ey||_g&8)&&te$4(Zl,"d",ry[3]),(!ey||_g&2)&&te$4(vn,"style",ry[1]);const ty=_g&2;(ty||_g&18)&&ne$5(vn,"width",ry[4]),(ty||_g&18)&&ne$5(vn,"height",ry[4])},i(ry){ey||(ot$4(Rm),ey=!0)},o(ry){$t(Rm),ey=!1},d(ry){ry&&J$h(vn),Rm&&Rm.d(),cr[10](null)}}}function O$8(cr,vn,yn){let Rn,Bn,{playing:Co}=vn,{shadow:Po=!1}=vn,{style:To=null}=vn,{width:Io="100%"}=vn,{animated:$l=!0}=vn,Wl,Xl=0,Yl=null;const Zl=["M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm1.534 3.282-1.29 1.289.186.183a5.86 5.86 0 0 1 1.663 4.095c0 1.555-.605 2.965-1.786 4.236l1.118 1.12.2-.19a7.46 7.46 0 0 0 2.225-5.322 7.46 7.46 0 0 0-2.316-5.411Zm-2.046 2.047-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-2.264 7.109-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z","M12 3.25c2.416 0 4.604.98 6.187 2.563A8.723 8.723 0 0 1 20.75 12c0 2.416-.98 4.604-2.563 6.187A8.723 8.723 0 0 1 12 20.75a8.723 8.723 0 0 1-6.187-2.563A8.723 8.723 0 0 1 3.25 12c0-2.416.98-4.604 2.563-6.187A8.723 8.723 0 0 1 12 3.25Zm-.512 5.329-1.245 1.243.14.133a3.04 3.04 0 0 1 .882 2.144c0 .795-.308 1.516-.955 2.24l1.23 1.231.168-.168a4.793 4.793 0 0 0 1.314-3.303c0-1.39-.59-2.643-1.534-3.52Zm-1.752 1.78-1.69 1.689 1.745 1.743.132-.13a2.29 2.29 0 0 0-.187-3.302Z"];le$1(()=>{Yl&&(clearInterval(Yl),yn(9,Yl=null))});function ey(Rm){ft$1[Rm?"unshift":"push"](()=>{Wl=Rm,yn(2,Wl)})}return cr.$$set=Rm=>{"playing"in Rm&&yn(5,Co=Rm.playing),"shadow"in Rm&&yn(0,Po=Rm.shadow),"style"in Rm&&yn(1,To=Rm.style),"width"in Rm&&yn(6,Io=Rm.width),"animated"in Rm&&yn(7,$l=Rm.animated)},cr.$$.update=()=>{var Rm;cr.$$.dirty&64&&yn(4,Rn=typeof Io=="number"?e$8(Io):Io),cr.$$.dirty&800&&(Co?Yl||yn(9,Yl=setInterval(()=>{yn(8,Xl=(Xl+1)%Zl.length)},500)):(Yl&&(clearInterval(Yl),yn(9,Yl=null)),yn(8,Xl=0))),cr.$$.dirty&384&&yn(3,Bn=(Rm=Zl[$l?Xl:0])!=null?Rm:Zl[0])},[Po,To,Wl,Bn,Rn,Co,Io,$l,Xl,Yl,ey]}class X$3 extends Ce$1{constructor(vn){super(),Te$1(this,vn,O$8,N$5,Ft$1,{playing:5,shadow:0,style:1,width:6,animated:7},L$8)}}function se$1(cr){Qt(cr,"svelte-1s6gk4a",".audio-tag.svelte-1s6gk4a{position:absolute;left:0;top:0;width:0;height:0;overflow:visible}.audio-icon__wrapper.svelte-1s6gk4a{position:relative;vertical-align:top;width:100%;height:100%}.content.svelte-1s6gk4a{width:-moz-max-content;width:max-content;height:3.375rem;padding:2.25rem 0.25rem 0 1rem;position:absolute;left:0;bottom:0.125rem;overflow:hidden;box-sizing:border-box;font-size:0;white-space:nowrap;font-weight:600}.wrapper.svelte-1s6gk4a{position:relative;width:100%;height:100%}.audio-icon.svelte-1s6gk4a{pointer-events:none;vertical-align:top;display:inline-block;width:1rem;height:1rem;margin-right:0.25rem;margin-top:0.0625rem}.audio.svelte-1s6gk4a{position:relative;width:100%;height:100%}")}function j$d(cr){var vn,yn;let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry;Bn=new T$a({props:{visible:cr[6],left:cr[3]/2+"px",bottom:12,width:2,blurRadius:120,spreadRadius:60}});let _g=cr[6]&&B$c(cr);return Xl=new ie$3({props:{visible:cr[6],textUnfolded:cr[1],content:cr[5]}}),Zl=new Y$8({props:{unfolded:cr[6],length:cr[3],outDelay:cr[4]+20*Math.min((yn=(vn=cr[5])==null?void 0:vn.length)!=null?yn:10,15),useLinearColor:!0}}),{c(){Rn=K$g("div"),Ae$1(Bn.$$.fragment),Co=Xt$1(),Po=K$g("div"),To=K$g("div"),Io=K$g("div"),_g&&_g.c(),$l=Xt$1(),Wl=K$g("div"),Ae$1(Xl.$$.fragment),Yl=Xt$1(),Ae$1(Zl.$$.fragment),te$4(Io,"class","audio-icon svelte-1s6gk4a"),ne$5(Wl,"display","inline-block"),te$4(To,"class","wrapper svelte-1s6gk4a"),te$4(Po,"class","content svelte-1s6gk4a"),te$4(Rn,"class","audio-tag svelte-1s6gk4a"),re$2(Rn,"unfolded",cr[6])},m(ty,ny){Nt(ty,Rn,ny),Dt$1(Bn,Rn,null),pt$1(Rn,Co),pt$1(Rn,Po),pt$1(Po,To),pt$1(To,Io),_g&&_g.m(Io,null),pt$1(To,$l),pt$1(To,Wl),Dt$1(Xl,Wl,null),pt$1(Rn,Yl),Dt$1(Zl,Rn,null),ey=!0,Rm||(ry=[lt$2(Wl,"click",cr[7]),Jt$1(E$o.call(null,Wl)),lt$2(Wl,"clientWidth",cr[12])],Rm=!0)},p(ty,ny){var iy,oy;const ay={};ny&64&&(ay.visible=ty[6]),ny&8&&(ay.left=ty[3]/2+"px"),Bn.$set(ay),ty[6]?_g?(_g.p(ty,ny),ny&64&&ot$4(_g,1)):(_g=B$c(ty),_g.c(),ot$4(_g,1),_g.m(Io,null)):_g&&(Lt(),$t(_g,1,1,()=>{_g=null}),Ot$1());const uy={};ny&64&&(uy.visible=ty[6]),ny&2&&(uy.textUnfolded=ty[1]),ny&32&&(uy.content=ty[5]),Xl.$set(uy);const hy={};ny&64&&(hy.unfolded=ty[6]),ny&8&&(hy.length=ty[3]),ny&48&&(hy.outDelay=ty[4]+20*Math.min((oy=(iy=ty[5])==null?void 0:iy.length)!=null?oy:10,15)),Zl.$set(hy),(!ey||ny&64)&&re$2(Rn,"unfolded",ty[6])},i(ty){ey||(ot$4(Bn.$$.fragment,ty),ot$4(_g),ot$4(Xl.$$.fragment,ty),ot$4(Zl.$$.fragment,ty),ey=!0)},o(ty){$t(Bn.$$.fragment,ty),$t(_g),$t(Xl.$$.fragment,ty),$t(Zl.$$.fragment,ty),ey=!1},d(ty){ty&&J$h(Rn),Rt(Bn),_g&&_g.d(),Rt(Xl),Rt(Zl),Rm=!1,M$o(ry)}}}function B$c(cr){let vn,yn,Rn,Bn,Co,Po,To;return yn=new T$a({props:{center:!0,blurRadius:15,spreadRadius:6}}),Bn=new Z$3({props:{enable:cr[6],url:cr[0].data.audioUrl,hooksInfo:{tag:cr[0]},$$slots:{default:[fe$1]},$$scope:{ctx:cr}}}),Bn.$on("play",cr[8]),Bn.$on("pause",cr[9]),Bn.$on("error",cr[10]),Bn.$on("audioRef",cr[11]),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),Rn=Xt$1(),Ae$1(Bn.$$.fragment),te$4(vn,"class","audio svelte-1s6gk4a")},m(Io,$l){Nt(Io,vn,$l),Dt$1(yn,vn,null),pt$1(vn,Rn),Dt$1(Bn,vn,null),To=!0},p(Io,$l){cr=Io;const Wl={};$l&64&&(Wl.enable=cr[6]),$l&1&&(Wl.url=cr[0].data.audioUrl),$l&1&&(Wl.hooksInfo={tag:cr[0]}),$l&8196&&(Wl.$$scope={dirty:$l,ctx:cr}),Bn.$set(Wl)},i(Io){To||(ot$4(yn.$$.fragment,Io),ot$4(Bn.$$.fragment,Io),Io&&z$j(()=>{To&&(Po&&Po.end(1),Co=me$1(vn,C$i,{duration:1e3,delay:0,easing:c$w}),Co.start())}),To=!0)},o(Io){var $l,Wl;$t(yn.$$.fragment,Io),$t(Bn.$$.fragment,Io),Co&&Co.invalidate(),Io&&(Po=ge$5(vn,C$i,{duration:1e3,delay:20*Math.min((Wl=($l=cr[5])==null?void 0:$l.length)!=null?Wl:10,15),easing:c$w})),To=!1},d(Io){Io&&J$h(vn),Rt(yn),Rt(Bn),Io&&Po&&Po.end()}}}function fe$1(cr){let vn,yn,Rn;return yn=new X$3({props:{playing:cr[2]}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","audio-icon__wrapper svelte-1s6gk4a")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co&4&&(Po.playing=Bn[2]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function ue(cr){let vn,yn,Rn=cr[0].state&&j$d(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=j$d(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function de(cr,vn,yn){let Rn,Bn,Co,{tag:Po}=vn,To=!1,Io=!1,$l;function Wl(){yn(1,To=!To)}const Xl=()=>{yn(2,Io=!0)},Yl=()=>{yn(2,Io=!1)},Zl=()=>{yn(2,Io=!1)};function ey(ry){he$1.call(this,cr,ry)}const Rm=ry=>{yn(3,$l=ry.detail)};return cr.$$set=ry=>{"tag"in ry&&yn(0,Po=ry.tag)},cr.$$.update=()=>{var ry,_g,ty;cr.$$.dirty&1&&yn(6,Rn=!!((ry=Po.state)!=null&&ry.unfolded)),cr.$$.dirty&1&&yn(5,Bn=(ty=(_g=Po.data.title)!=null?_g:Po.data.text)!=null?ty:""),cr.$$.dirty&2&&yn(4,Co=To?450:0)},[Po,To,Io,$l,Co,Bn,Rn,Wl,Xl,Yl,Zl,ey,Rm]}class qe$1 extends Ce$1{constructor(vn){super(),Te$1(this,vn,de,ue,Ft$1,{tag:0},se$1)}}function D$c(cr){Qt(cr,"svelte-nclraj",".audio-tag__wrapper.svelte-nclraj{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.audio-tag.svelte-nclraj{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;padding-right:0.625rem;border-radius:624999.9375rem;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3)}.audio__inner.svelte-nclraj{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.text.svelte-nclraj{font-weight:bold;font-size:0.75rem;margin-left:0.25rem}.audio-icon__wrapper.svelte-nclraj{position:relative;vertical-align:top;pointer-events:none;width:1.5rem;height:1.5rem}")}function y$e(cr){let vn,yn,Rn,Bn;return Rn=new Z$3({props:{style:"width: max-content; height: max-content;",enable:cr[0].state.visible,url:cr[0].data.audioUrl,hooksInfo:{tag:cr[0]},$$slots:{default:[F$7]},$$scope:{ctx:cr}}}),Rn.$on("play",cr[5]),Rn.$on("pause",cr[6]),Rn.$on("error",cr[7]),Rn.$on("timeupdate",cr[8]),Rn.$on("duration",cr[9]),Rn.$on("audioRef",cr[10]),{c(){vn=K$g("div"),yn=K$g("div"),Ae$1(Rn.$$.fragment),te$4(yn,"class","audio-tag svelte-nclraj"),te$4(vn,"class","audio-tag__wrapper svelte-nclraj")},m(Co,Po){Nt(Co,vn,Po),pt$1(vn,yn),Dt$1(Rn,yn,null),Bn=!0},p(Co,Po){const To={};Po&1&&(To.enable=Co[0].state.visible),Po&1&&(To.url=Co[0].data.audioUrl),Po&1&&(To.hooksInfo={tag:Co[0]}),Po&2072&&(To.$$scope={dirty:Po,ctx:Co}),Rn.$set(To)},i(Co){Bn||(ot$4(Rn.$$.fragment,Co),Bn=!0)},o(Co){$t(Rn.$$.fragment,Co),Bn=!1},d(Co){Co&&J$h(vn),Rt(Rn)}}}function E$c(cr){let vn;return{c(){vn=gt$3(cr[4])},m(yn,Rn){Nt(yn,vn,Rn)},p(yn,Rn){Rn&16&&ee$5(vn,yn[4])},d(yn){yn&&J$h(vn)}}}function F$7(cr){let vn,yn,Rn,Bn,Co,Po,To;return Rn=new X$3({props:{playing:cr[3]}}),Po=new P$h({props:{maxWidth:72,maxLine:1,$$slots:{default:[E$c]},$$scope:{ctx:cr}}}),{c(){vn=K$g("div"),yn=K$g("div"),Ae$1(Rn.$$.fragment),Bn=Xt$1(),Co=K$g("div"),Ae$1(Po.$$.fragment),te$4(yn,"class","audio-icon__wrapper svelte-nclraj"),te$4(Co,"class","text svelte-nclraj"),te$4(vn,"class","audio__inner svelte-nclraj")},m(Io,$l){Nt(Io,vn,$l),pt$1(vn,yn),Dt$1(Rn,yn,null),pt$1(vn,Bn),pt$1(vn,Co),Dt$1(Po,Co,null),To=!0},p(Io,$l){const Wl={};$l&8&&(Wl.playing=Io[3]),Rn.$set(Wl);const Xl={};$l&2064&&(Xl.$$scope={dirty:$l,ctx:Io}),Po.$set(Xl)},i(Io){To||(ot$4(Rn.$$.fragment,Io),ot$4(Po.$$.fragment,Io),To=!0)},o(Io){$t(Rn.$$.fragment,Io),$t(Po.$$.fragment,Io),To=!1},d(Io){Io&&J$h(vn),Rt(Rn),Rt(Po)}}}function G$4(cr){let vn,yn,Rn=cr[0].state&&y$e(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=y$e(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function H$c(cr,vn,yn){let Rn,{tag:Bn}=vn,Co=0,Po=0,To=!1;const Io=()=>{yn(3,To=!0)},$l=()=>{yn(3,To=!1)},Wl=()=>{yn(3,To=!1)},Xl=ey=>{yn(1,Co=ey.detail)},Yl=ey=>{yn(2,Po=ey.detail)};function Zl(ey){he$1.call(this,cr,ey)}return cr.$$set=ey=>{"tag"in ey&&yn(0,Bn=ey.tag)},cr.$$.update=()=>{var ey,Rm;cr.$$.dirty&1&&yn(4,Rn=(Rm=(ey=Bn.data.title)!=null?ey:Bn.data.text)!=null?Rm:"")},[Bn,Co,Po,To,Rn,Io,$l,Wl,Xl,Yl,Zl]}class ae extends Ce$1{constructor(vn){super(),Te$1(this,vn,H$c,G$4,Ft$1,{tag:0},D$c)}}function q$a(cr){let vn,yn;return vn=new ae({props:{tag:cr[0]}}),vn.$on("audioRef",cr[2]),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=Rn[0]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function v$f(cr){let vn,yn;return vn=new qe$1({props:{tag:cr[0]}}),vn.$on("audioRef",cr[2]),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=Rn[0]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function C$6(cr){let vn,yn,Rn,Bn;const Co=[v$f,q$a],Po=[];function To(Io,$l){return Io[1]==="line"?0:Io[1]==="plane"?1:-1}return~(vn=To(cr))&&(yn=Po[vn]=Co[vn](cr)),{c(){yn&&yn.c(),Rn=Yt()},m(Io,$l){~vn&&Po[vn].m(Io,$l),Nt(Io,Rn,$l),Bn=!0},p(Io,[$l]){let Wl=vn;vn=To(Io),vn===Wl?~vn&&Po[vn].p(Io,$l):(yn&&(Lt(),$t(Po[Wl],1,1,()=>{Po[Wl]=null}),Ot$1()),~vn?(yn=Po[vn],yn?yn.p(Io,$l):(yn=Po[vn]=Co[vn](Io),yn.c()),ot$4(yn,1),yn.m(Rn.parentNode,Rn)):yn=null)},i(Io){Bn||(ot$4(yn),Bn=!0)},o(Io){$t(yn),Bn=!1},d(Io){~vn&&Po[vn].d(Io),Io&&J$h(Rn)}}}function N$4(cr,vn,yn){let Rn,{tag:Bn}=vn,Co;function Po(To){Co=To.detail}return Bn.play=()=>Co.play(),Bn.pause=()=>Co.pause(),cr.$$set=To=>{"tag"in To&&yn(0,Bn=To.tag)},cr.$$.update=()=>{var To;cr.$$.dirty&1&&yn(1,Rn=(To=Bn.data.appearance)!=null?To:"line")},[Bn,Rn,Po]}class rt extends Ce$1{constructor(vn){super(),Te$1(this,vn,N$4,C$6,Ft$1,{tag:0})}}function M$a(cr){Qt(cr,"svelte-10cw0el",".media-wrapper.svelte-10cw0el{position:absolute;width:100%;height:100%}")}function c$j(cr){var vn;let yn,Rn,Bn;return Rn=new at({props:{mediaItemConfig:{canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(vn=cr[4])!=null?vn:"withText",disableVideoIfHavePoster:!1,objectFit:cr[2]},unfolded:cr[6],mediaData:cr[5],enableCarousel:cr[1],autoplayConfig:cr[3],tag:cr[0],inDelay:500,duration:500}}),{c(){yn=K$g("div"),Ae$1(Rn.$$.fragment),te$4(yn,"class","media-wrapper svelte-10cw0el")},m(Co,Po){Nt(Co,yn,Po),Dt$1(Rn,yn,null),Bn=!0},p(Co,Po){var To;const Io={};Po&20&&(Io.mediaItemConfig={canPlay:!0,playButtonSizeIfNeed:"large",playButtonIfNeed:(To=Co[4])!=null?To:"withText",disableVideoIfHavePoster:!1,objectFit:Co[2]}),Po&64&&(Io.unfolded=Co[6]),Po&32&&(Io.mediaData=Co[5]),Po&2&&(Io.enableCarousel=Co[1]),Po&8&&(Io.autoplayConfig=Co[3]),Po&1&&(Io.tag=Co[0]),Rn.$set(Io)},i(Co){Bn||(ot$4(Rn.$$.fragment,Co),Bn=!0)},o(Co){$t(Rn.$$.fragment,Co),Bn=!1},d(Co){Co&&J$h(yn),Rt(Rn)}}}function S$9(cr){let vn,yn,Rn=cr[0].state&&cr[5]&&c$j(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].state&&Bn[5]?Rn?(Rn.p(Bn,Co),Co&33&&ot$4(Rn,1)):(Rn=c$j(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function V$3(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,{tag:$l}=vn;return cr.$$set=Wl=>{"tag"in Wl&&yn(0,$l=Wl.tag)},cr.$$.update=()=>{var Wl,Xl;cr.$$.dirty&1&&yn(6,Rn=$l.state?$l.state.unfolded:!1),cr.$$.dirty&1&&yn(5,Bn=$l.data.mediaData),cr.$$.dirty&1&&yn(1,Co=$l.data.enableCarousel),cr.$$.dirty&1&&yn(4,Po=$l.data.playIcon),cr.$$.dirty&3&&yn(3,To=(Wl=$l.data.autoplayConfig)!=null?Wl:{autoplay:Co!=null?Co:!0,autoplayVideo:!0}),cr.$$.dirty&1&&yn(2,Io=(Xl=$l.data.objectFit)!=null?Xl:(()=>$l.data.adaptationMode==="stretch"?"fill":$l.data.adaptationMode==="proportional"?"contain":void 0)())},[$l,Co,Io,To,Po,Bn,Rn]}class gt$1 extends Ce$1{constructor(vn){super(),Te$1(this,vn,V$3,S$9,Ft$1,{tag:0},M$a)}}var I$a=Object.defineProperty,k$8=Object.defineProperties,H$b=Object.getOwnPropertyDescriptors,w$c=Object.getOwnPropertySymbols,W$6=Object.prototype.hasOwnProperty,z$6=Object.prototype.propertyIsEnumerable,d$g=(cr,vn,yn)=>vn in cr?I$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,f$o=(cr,vn)=>{for(var yn in vn||(vn={}))W$6.call(vn,yn)&&d$g(cr,yn,vn[yn]);if(w$c)for(var yn of w$c(vn))z$6.call(vn,yn)&&d$g(cr,yn,vn[yn]);return cr},m$d=(cr,vn)=>k$8(cr,H$b(vn)),g$h=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const u$g=new Map;function y$d(cr){return g$h(this,null,function*(){return new Promise((vn,yn)=>{if(!cr){yn(Error("url is empty"));return}const Rn=new Image;Rn.src=cr,Rn.onload=()=>vn({width:Rn.width,height:Rn.height}),Rn.onerror=yn})})}function K$4(cr){return g$h(this,null,function*(){const{url:vn,ratio:yn=3}=cr,Rn=(()=>{if(u$g.has(vn))return u$g.get(vn);const Po=y$d(vn);return u$g.set(vn,Po),Po})(),{width:Bn,height:Co}=yield Rn;return m$d(f$o({},cr),{width:Bn/yn,height:Co/yn})})}function P$b(cr){return g$h(this,null,function*(){const{steps:vn,url:yn,ratio:Rn=3,fps:Bn=24}=cr;if(!vn)throw new Error("KeyframeIcon requires steps");const{width:Co,height:Po}=yield y$d(yn),To=Co/Rn,Io=Po/Rn,$l=To/vn,Wl=Io,Xl=1/Bn*vn+"s";return m$d(f$o({},cr),{width:$l,height:Wl,duration:Xl})})}var x$d=Object.defineProperty,ee$1=Object.defineProperties,ie$1=Object.getOwnPropertyDescriptors,U$6=Object.getOwnPropertySymbols,te$1=Object.prototype.hasOwnProperty,ne$3=Object.prototype.propertyIsEnumerable,A$a=(cr,vn,yn)=>vn in cr?x$d(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,N$3=(cr,vn)=>{for(var yn in vn||(vn={}))te$1.call(vn,yn)&&A$a(cr,yn,vn[yn]);if(U$6)for(var yn of U$6(vn))ne$3.call(vn,yn)&&A$a(cr,yn,vn[yn]);return cr},K$3=(cr,vn)=>ee$1(cr,ie$1(vn)),R$8=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});function _e(cr){Qt(cr,"svelte-1j3azjf",'@keyframes svelte-1j3azjf-sprites-animation{0%{background-position:0 0}100%{background-position:100% 0}}.icon-bg.svelte-1j3azjf{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden}.icon-bg-circle.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-1j3azjf{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-1j3azjf::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;z-index:1;border:0.0625rem solid rgba(255,255,255,0.6)}.icon-image.svelte-1j3azjf{position:relative;display:block;width:auto}.icon-keyframe.svelte-1j3azjf{background-repeat:no-repeat;background-size:auto 100%;animation-direction:normal;animation-iteration-count:infinite;animation-name:svelte-1j3azjf-sprites-animation;animation-delay:0}')}function G$3(cr){cr[1]=cr[21].width}function J$5(cr){cr[1]=cr[21].width,cr[18]=cr[21].height,cr[19]=cr[21].steps,cr[20]=cr[21].duration}function O$7(cr){let vn,yn,Rn,Bn=cr[0]&&P$a();function Co(Io,$l){return Io[8]?be:ge$1}let Po=Co(cr),To=Po(cr);return{c(){vn=K$g("div"),Bn&&Bn.c(),yn=Xt$1(),To.c(),te$4(vn,"class","icon"),ne$5(vn,"width",cr[1])},m(Io,$l){Nt(Io,vn,$l),Bn&&Bn.m(vn,null),pt$1(vn,yn),To.m(vn,null),Rn=!0},p(Io,$l){Io[0]?Bn?$l&1&&ot$4(Bn,1):(Bn=P$a(),Bn.c(),ot$4(Bn,1),Bn.m(vn,yn)):Bn&&(Lt(),$t(Bn,1,1,()=>{Bn=null}),Ot$1()),Po===(Po=Co(Io))&&To?To.p(Io,$l):(To.d(1),To=Po(Io),To&&(To.c(),To.m(vn,null))),$l&2&&ne$5(vn,"width",Io[1])},i(Io){Rn||(ot$4(Bn),Rn=!0)},o(Io){$t(Bn),Rn=!1},d(Io){Io&&J$h(vn),Bn&&Bn.d(),To.d()}}}function P$a(cr){let vn,yn;return vn=new T$a({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function ge$1(cr){let vn,yn,Rn={ctx:cr,current:null,token:null,hasCatch:!1,pending:je,then:we,catch:ke,value:21};return be$2(yn=cr[13](e$5({url:cr[7],ratio:cr[5]})),Rn),{c(){vn=Yt(),Rn.block.c()},m(Bn,Co){Nt(Bn,vn,Co),Rn.block.m(Bn,Rn.anchor=Co),Rn.mount=()=>vn.parentNode,Rn.anchor=vn},p(Bn,Co){cr=Bn,Rn.ctx=cr,Co&160&&yn!==(yn=cr[13](e$5({url:cr[7],ratio:cr[5]})))&&be$2(yn,Rn)||we$1(Rn,cr,Co)},d(Bn){Bn&&J$h(vn),Rn.block.d(Bn),Rn.token=null,Rn=null}}}function be(cr){let vn,yn,Rn={ctx:cr,current:null,token:null,hasCatch:!1,pending:ze$1,then:ve,catch:ye,value:21};return be$2(yn=cr[12](e$5({url:cr[7],steps:cr[2],fps:cr[6],ratio:cr[5]})),Rn),{c(){vn=Yt(),Rn.block.c()},m(Bn,Co){Nt(Bn,vn,Co),Rn.block.m(Bn,Rn.anchor=Co),Rn.mount=()=>vn.parentNode,Rn.anchor=vn},p(Bn,Co){cr=Bn,Rn.ctx=cr,Co&228&&yn!==(yn=cr[12](e$5({url:cr[7],steps:cr[2],fps:cr[6],ratio:cr[5]})))&&be$2(yn,Rn)||we$1(Rn,cr,Co)},d(Bn){Bn&&J$h(vn),Rn.block.d(Bn),Rn.token=null,Rn=null}}}function ke(cr){return{c:N$f,m:N$f,p:N$f,d:N$f}}function we(cr){G$3(cr);let vn,yn,Rn,Bn=cr[11]&&Q$2(cr);return{c(){Bn&&Bn.c(),vn=Xt$1(),yn=K$g("img"),te$4(yn,"alt","tag-icon"),te$4(yn,"class","icon-image svelte-1j3azjf"),Wt$1(yn.src,Rn=cr[7])||te$4(yn,"src",Rn),ne$5(yn,"width",e$8(j$c({originWidth:cr[1],scale:cr[4],wantedWidth:cr[3]}).width)),ne$5(yn,"max-width","initial")},m(Co,Po){Bn&&Bn.m(Co,Po),Nt(Co,vn,Po),Nt(Co,yn,Po)},p(Co,Po){G$3(Co),Co[11]?Bn?Bn.p(Co,Po):(Bn=Q$2(Co),Bn.c(),Bn.m(vn.parentNode,vn)):Bn&&(Bn.d(1),Bn=null),Po&128&&!Wt$1(yn.src,Rn=Co[7])&&te$4(yn,"src",Rn),Po&184&&ne$5(yn,"width",e$8(j$c({originWidth:Co[1],scale:Co[4],wantedWidth:Co[3]}).width))},d(Co){Bn&&Bn.d(Co),Co&&J$h(vn),Co&&J$h(yn)}}}function Q$2(cr){let vn,yn,Rn,Bn,Co;return{c(){vn=K$g("div"),yn=K$g("div"),Rn=K$g("div"),Bn=Xt$1(),Co=K$g("div"),te$4(Rn,"class","icon-bg-circle-inner svelte-1j3azjf"),ne$5(Rn,"background",cr[11]),ne$5(Rn,"opacity",cr[10]),te$4(Co,"class","icon-bg-circle-inner-shadow svelte-1j3azjf"),te$4(yn,"class","icon-bg-circle svelte-1j3azjf"),te$4(vn,"class","icon-bg svelte-1j3azjf")},m(Po,To){Nt(Po,vn,To),pt$1(vn,yn),pt$1(yn,Rn),pt$1(yn,Bn),pt$1(yn,Co)},p(Po,To){To&2048&&ne$5(Rn,"background",Po[11]),To&1024&&ne$5(Rn,"opacity",Po[10])},d(Po){Po&&J$h(vn)}}}function je(cr){return{c:N$f,m:N$f,p:N$f,d:N$f}}function ye(cr){return{c:N$f,m:N$f,p:N$f,d:N$f}}function ve(cr){J$5(cr);let vn,yn=`url(${cr[7]})`,Rn=`steps(${cr[19]-1})`;return{c(){vn=K$g("div"),te$4(vn,"class","icon-keyframe svelte-1j3azjf"),ne$5(vn,"width",e$8(j$c({originWidth:cr[1],originHeight:cr[18],scale:cr[4],wantedWidth:cr[3]}).width)),ne$5(vn,"height",e$8(j$c({originWidth:cr[1],originHeight:cr[18],scale:cr[4],wantedWidth:cr[3]}).height)),ne$5(vn,"background-image",yn),ne$5(vn,"animation-duration",cr[20]),ne$5(vn,"animation-timing-function",Rn)},m(Bn,Co){Nt(Bn,vn,Co)},p(Bn,Co){J$5(Bn),Co&252&&ne$5(vn,"width",e$8(j$c({originWidth:Bn[1],originHeight:Bn[18],scale:Bn[4],wantedWidth:Bn[3]}).width)),Co&252&&ne$5(vn,"height",e$8(j$c({originWidth:Bn[1],originHeight:Bn[18],scale:Bn[4],wantedWidth:Bn[3]}).height)),Co&128&&yn!==(yn=`url(${Bn[7]})`)&&ne$5(vn,"background-image",yn),Co&228&&ne$5(vn,"animation-duration",Bn[20]),Co&228&&Rn!==(Rn=`steps(${Bn[19]-1})`)&&ne$5(vn,"animation-timing-function",Rn)},d(Bn){Bn&&J$h(vn)}}}function ze$1(cr){return{c:N$f,m:N$f,p:N$f,d:N$f}}function We$1(cr){let vn,yn,Rn=cr[9]&&O$7(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[9]?Rn?(Rn.p(Bn,Co),Co&512&&ot$4(Rn,1)):(Rn=O$7(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function j$c(cr){const{originWidth:vn,originHeight:yn,scale:Rn=1,wantedWidth:Bn}=cr,Co=(Bn!=null?Bn:vn)*Rn,Po=typeof yn=="number"?Co*(yn/vn):void 0;return K$3(N$3({},cr),{width:Co,height:Po})}function Ie(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,{width:ey=null}=vn,{icon:Rm=null}=vn,{shadow:ry=!1}=vn;const _g=fe$3();function ty(oy){return R$8(this,null,function*(){const ay=yield P$b(oy);return _g("iconLoaded",ay),ay})}function ny(oy){return R$8(this,null,function*(){if(typeof Zl=="number")return K$3(N$3({},oy),{width:Zl});const ay=yield K$4(oy);return _g("iconLoaded",ay),ay})}function iy(){Yl||_g("iconLoaded")}return ce$2(()=>{iy()}),cr.$$set=oy=>{"width"in oy&&yn(1,ey=oy.width),"icon"in oy&&yn(14,Rm=oy.icon),"shadow"in oy&&yn(0,ry=oy.shadow)},cr.$$.update=()=>{var oy,ay,uy;cr.$$.dirty&16384&&yn(7,Rn=Rm==null?void 0:Rm.url),cr.$$.dirty&16384&&yn(11,Bn=Rm==null?void 0:Rm.bgcolor),cr.$$.dirty&16384&&yn(10,Co=(oy=Rm==null?void 0:Rm.bgopacity)!=null?oy:.6),cr.$$.dirty&16384&&yn(2,Po=(ay=Rm==null?void 0:Rm.steps)!=null?ay:1),cr.$$.dirty&16384&&yn(6,To=Rm==null?void 0:Rm.fps),cr.$$.dirty&16384&&yn(5,Io=Rm==null?void 0:Rm.ratio),cr.$$.dirty&16384&&yn(4,$l=(uy=Rm==null?void 0:Rm.scale)!=null?uy:1),cr.$$.dirty&16384&&yn(3,Wl=Rm==null?void 0:Rm.width),cr.$$.dirty&252&&yn(9,Xl=e$5({url:Rn,steps:Po,fps:To,ratio:Io,scale:$l,width:Wl})),cr.$$.dirty&4&&yn(8,Yl=Po>1),cr.$$.dirty&2&&(Zl=ey)},iy(),[ry,ey,Po,Wl,$l,Io,To,Rn,Yl,Xl,Co,Bn,ty,ny,Rm]}class Ee$2 extends Ce$1{constructor(vn){super(),Te$1(this,vn,Ie,We$1,Ft$1,{width:1,icon:14,shadow:0},_e)}}function K$2(cr){Qt(cr,"svelte-e58ijk",".wrapper.svelte-e58ijk{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}.text-wrapper.svelte-e58ijk{position:relative;display:flex;align-items:center;justify-content:center}.text.svelte-e58ijk{position:absolute;top:0;font-size:0.875rem;color:#ffffff;letter-spacing:0;text-align:center;max-width:8.75rem;width:-moz-max-content;width:max-content;line-height:1.125rem;text-shadow:0.125rem 0rem 0.5rem rgba(0, 0, 0, 0.15)}")}function z$5(cr){let vn,yn,Rn,Bn,Co,Po;return yn=new T$a({props:{outDelay:0,inDelay:0,center:!0,width:"80%",blurRadius:40,spreadRadius:16,opacity:.08}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),Rn=Xt$1(),Bn=K$g("div"),Co=gt$3(cr[2]),te$4(Bn,"class","text svelte-e58ijk"),ne$5(Bn,"top",cr[1]),te$4(vn,"class","text-wrapper svelte-e58ijk")},m(To,Io){Nt(To,vn,Io),Dt$1(yn,vn,null),pt$1(vn,Rn),pt$1(vn,Bn),pt$1(Bn,Co),Po=!0},p(To,Io){(!Po||Io&4)&&ee$5(Co,To[2]),Io&2&&ne$5(Bn,"top",To[1])},i(To){Po||(ot$4(yn.$$.fragment,To),Po=!0)},o(To){$t(yn.$$.fragment,To),Po=!1},d(To){To&&J$h(vn),Rt(yn)}}}function M$9(cr){let vn,yn,Rn,Bn;yn=new Ee$2({props:{icon:cr[0],shadow:!0}}),yn.$on("iconLoaded",cr[8]);let Co=cr[2]&&cr[3]&&z$5(cr);return{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),Rn=Xt$1(),Co&&Co.c(),te$4(vn,"class","wrapper svelte-e58ijk")},m(Po,To){Nt(Po,vn,To),Dt$1(yn,vn,null),pt$1(vn,Rn),Co&&Co.m(vn,null),Bn=!0},p(Po,[To]){const Io={};To&1&&(Io.icon=Po[0]),yn.$set(Io),Po[2]&&Po[3]?Co?(Co.p(Po,To),To&12&&ot$4(Co,1)):(Co=z$5(Po),Co.c(),ot$4(Co,1),Co.m(vn,null)):Co&&(Lt(),$t(Co,1,1,()=>{Co=null}),Ot$1())},i(Po){Bn||(ot$4(yn.$$.fragment,Po),ot$4(Co),Bn=!0)},o(Po){$t(yn.$$.fragment,Po),$t(Co),Bn=!1},d(Po){Po&&J$h(vn),Rt(yn),Co&&Co.d()}}}const O$6=4;function Q$1(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,{tag:Wl}=vn;const Xl=()=>{yn(3,Rn=!0)};return cr.$$set=Yl=>{"tag"in Yl&&yn(4,Wl=Yl.tag)},cr.$$.update=()=>{var Yl,Zl,ey,Rm,ry,_g,ty,ny;cr.$$.dirty&16&&yn(2,Bn=(Yl=Wl.data.title)!=null?Yl:Wl.data.text),cr.$$.dirty&16&&yn(0,Co=(ey=Wl.data.icon)!=null?ey:(Zl=Wl.style)==null?void 0:Zl.point),cr.$$.dirty&16&&yn(6,Po=(ry=(Rm=Wl.style)==null?void 0:Rm.point)==null?void 0:ry.width),cr.$$.dirty&16&&yn(5,To=(ny=(ty=(_g=Wl.style)==null?void 0:_g.point)==null?void 0:ty.scale)!=null?ny:1),cr.$$.dirty&1&&yn(7,Io=Co==null?void 0:Co.bgcolor),cr.$$.dirty&224&&yn(1,$l=Io&&Po&&typeof Po=="number"?e$8(Po*.414*To/2+O$6):0)},yn(3,Rn=!1),[Co,$l,Bn,Rn,Wl,To,Po,Io,Xl]}class nt extends Ce$1{constructor(vn){super(),Te$1(this,vn,Q$1,M$9,Ft$1,{tag:4},K$2)}}var A$9=Object.defineProperty,D$b=Object.defineProperties,E$b=Object.getOwnPropertyDescriptors,H$a=Object.getOwnPropertySymbols,F$6=Object.prototype.hasOwnProperty,J$4=Object.prototype.propertyIsEnumerable,R$7=(cr,vn,yn)=>vn in cr?A$9(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,q$9=(cr,vn)=>{for(var yn in vn||(vn={}))F$6.call(vn,yn)&&R$7(cr,yn,vn[yn]);if(H$a)for(var yn of H$a(vn))J$4.call(vn,yn)&&R$7(cr,yn,vn[yn]);return cr},B$b=(cr,vn)=>D$b(cr,E$b(vn));function Y$2(cr){Qt(cr,"svelte-ezi5lu",`.icon.svelte-ezi5lu{font-size:0}.icon-bg.svelte-ezi5lu{position:absolute;width:141%;height:141%;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;overflow:hidden;z-index:-1}.icon-bg-circle.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%}.icon-bg-circle-inner-shadow.svelte-ezi5lu{border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center, transparent 20%, rgba(255,255,255,0.3))}.icon-bg-circle.svelte-ezi5lu::before{content:"";position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;border-radius:50%;background:linear-gradient(-45deg, rgba(255,255,255,1), rgba(255,255,255,0.2), rgba(255,255,255,1));z-index:1;mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%);-webkit-mask:radial-gradient(circle at center, 
              transparent 65%, 
              black 0%)}`)}function C$5(cr){let vn,yn;return vn=new T$a({props:{center:!0,blurRadius:24,spreadRadius:16}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function I$9(cr){let vn,yn,Rn,Bn,Co;return{c(){vn=K$g("div"),yn=K$g("div"),Rn=K$g("div"),Bn=Xt$1(),Co=K$g("div"),te$4(Rn,"class","icon-bg-circle-inner svelte-ezi5lu"),ne$5(Rn,"background",cr[4]),ne$5(Rn,"opacity",cr[3]),te$4(Co,"class","icon-bg-circle-inner-shadow svelte-ezi5lu"),te$4(yn,"class","icon-bg-circle svelte-ezi5lu"),te$4(vn,"class","icon-bg svelte-ezi5lu")},m(Po,To){Nt(Po,vn,To),pt$1(vn,yn),pt$1(yn,Rn),pt$1(yn,Bn),pt$1(yn,Co)},p(Po,To){To&16&&ne$5(Rn,"background",Po[4]),To&8&&ne$5(Rn,"opacity",Po[3])},d(Po){Po&&J$h(vn)}}}function Z$2(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry=cr[1]&&C$5(),_g=cr[4]&&I$9(cr);return{c(){vn=K$g("div"),ry&&ry.c(),yn=Xt$1(),_g&&_g.c(),Rn=Xt$1(),Bn=Mt("svg"),Co=Mt("linearGradient"),Po=Mt("stop"),To=Mt("stop"),Io=Mt("linearGradient"),$l=Mt("stop"),Wl=Mt("stop"),Xl=Mt("g"),Yl=Mt("path"),Zl=Mt("path"),ey=Mt("path"),te$4(Po,"offset","0"),te$4(Po,"stop-color","#fff"),te$4(To,"offset","1"),te$4(To,"stop-color","#fff"),te$4(To,"stop-opacity",".7"),te$4(Co,"id","a"),te$4(Co,"x1","78.74567%"),te$4(Co,"x2","5.663764%"),te$4(Co,"y1","94.075617%"),te$4(Co,"y2","5.924383%"),te$4($l,"offset","0"),te$4($l,"stop-color","#fff"),te$4(Wl,"offset","1"),te$4(Wl,"stop-color","#fff"),te$4(Wl,"stop-opacity","0"),te$4(Io,"id","b"),te$4(Io,"x1","16.588502%"),te$4(Io,"x2","68.285986%"),te$4(Io,"y1","5.924383%"),te$4(Io,"y2","63.800896%"),te$4(Yl,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-13.0396582-.5c.259 0 .504-.063.728-.196.441-.259.721-.728.721-1.26 0-.441-.189-.833-.504-1.085.259-.259.434-.63.434-1.022 0-.245-.063-.476-.182-.679-.252-.413-.693-.658-1.197-.658-.238 0-.462.056-.665.175-.42.238-.679.665-.679 1.162v.035h.721v-.035c0-.315.294-.616.623-.616.357 0 .651.287.651.616 0 .371-.287.658-.651.658h-.14v.728h.14c.399 0 .728.322.728.721s-.329.735-.728.735-.728-.336-.728-.735v-.105h-.728v.105c0 .266.063.511.196.728.259.448.728.728 1.26.728zm3.647 0c.273 0 .518-.07.749-.203.448-.273.742-.763.742-1.302 0-.273-.07-.518-.203-.749-.273-.448-.749-.742-1.288-.742-.077 0-.133 0-.168.007l.875-1.911h-.805l-1.274 2.793c-.091.189-.133.392-.133.602 0 .273.07.525.203.756.273.455.749.749 1.302.749zm0-.742c-.427 0-.763-.336-.763-.763 0-.42.343-.77.763-.77s.77.35.77.77-.35.763-.77.763zm3.654.749c.504 0 .952-.273 1.204-.7.126-.21.189-.441.189-.693v-2.086c0-.511-.273-.98-.693-1.239-.217-.126-.448-.189-.7-.189-.511 0-.98.273-1.232.714-.133.217-.196.455-.196.714v2.086c0 .504.273.952.714 1.204.217.126.455.189.714.189zm0-.721c-.371 0-.693-.301-.693-.672v-2.086c0-.399.308-.693.693-.693.371 0 .651.294.651.693v2.086c0 .385-.28.672-.651.672zm3.2140391-2.11266016c.2734375 0 .5132649-.09855143.7194824-.29565429.2062174-.19710287.3093262-.44376628.3093262-.73999024 0-.28710937-.0991211-.53035481-.2973633-.72973633-.1982422-.19938151-.4420573-.29907226-.7314453-.29907226-.2825521 0-.5257976.10026042-.7297364.30078125s-.3059082.44661458-.3059082.73828125c0 .2734375.0968425.51269531.2905274.71777344.1936849.20507812.4420573.30761718.7451172.30761718zm0-.37255859c-.1822917 0-.3383789-.06494141-.4682618-.19482422-.1298828-.12988281-.1948242-.28369141-.1948242-.46142578 0-.18457031.0655111-.34122721.1965332-.4699707.1310222-.12874349.2865397-.19311524.4665528-.19311524.180013 0 .3343912.06494141.4631347.19482422s.1931153.28369141.1931153.46142578c0 .18457031-.0655111.34122722-.1965332.46997071-.1310222.12874349-.2842611.19311523-.4597168.19311523z"),te$4(Yl,"fill","url(#a)"),te$4(Yl,"fill-rule","nonzero"),te$4(Zl,"d","m18 5.4v8c0 1.9329966-4.0294373 3.5-9 3.5-4.97056275 0-9-1.5670034-9-3.5v-8c0 1.93299662 4.02943725 3.5 9 3.5 4.8670094 0 8.8316983-1.50239169 8.9947813-3.37967512zm-.537 1.917-.0556083.04651904c-1.6129673 1.27557869-4.7855335 2.07278608-8.4073917 2.07278608-3.5667171 0-6.69228643-.77164105-8.32741897-2.0099189l-.13658103-.10838622.00030512 6.082c0 1.4658868 3.60570734 2.8999734 8.15878222 2.9616322l.30491266.0020627c4.6959533 0 8.4636949-1.4652329 8.4636949-2.9636949zm-5.2016582-7.317c.252 0 .483.063.7.189.42.259.693.728.693 1.239v2.086l-.00756.14868c-.02016.19488-.08064.37632-.18144.54432-.252.427-.7.7-1.204.7-.259 0-.497-.063-.714-.189-.441-.252-.714-.7-.714-1.204v-2.086l.007616-.15288c.020384-.20048.081984-.38752.188384-.56112.252-.441.721-.714 1.232-.714zm-7.301 0c.504 0 .945.245 1.197.658.119.203.182.434.182.679 0 .392-.175.763-.434 1.022.315.252.504.644.504 1.085 0 .532-.28 1.001-.721 1.26-.224.133-.469.196-.728.196-.532 0-1.001-.28-1.26-.728-.133-.217-.196-.462-.196-.728v-.105h.728v.105c0 .399.329.735.728.735s.728-.336.728-.735-.329-.721-.728-.721h-.14v-.728h.14c.364 0 .651-.287.651-.658 0-.329-.294-.616-.651-.616-.329 0-.623.301-.623.616v.035h-.721v-.035c0-.497.259-.924.679-1.162.203-.119.427-.175.665-.175zm4.354 0-.875 1.911c.035-.007.091-.007.168-.007.539 0 1.015.294 1.288.742.133.231.203.476.203.749 0 .539-.294 1.029-.742 1.302-.231.133-.476.203-.749.203-.553 0-1.029-.294-1.302-.749-.133-.231-.203-.483-.203-.756 0-.21.042-.413.133-.602l1.274-2.793zm2.947.735c-.385 0-.693.294-.693.693v2.086l.0077784.09927273c.051172.32396694.3479489.57272727.6852216.57272727.371 0 .651-.287.651-.672v-2.086l-.0068002-.10607288c-.044861-.34395191-.3069271-.58692712-.6441998-.58692712zm-3.654 1.89c-.42 0-.763.35-.763.77 0 .427.336.763.763.763.42 0 .77-.343.77-.763s-.35-.77-.77-.77zm6.8680391-2.61611328c.289388 0 .5332031.09969075.7314453.29907226.1982422.19938152.2973633.44262696.2973633.72973633 0 .29622396-.1031088.54288737-.3093262.73999024-.2062175.19710286-.4460449.29565429-.7194824.29565429-.3030599 0-.5514323-.10253906-.7451172-.30761718-.1936849-.20507813-.2905274-.44433594-.2905274-.71777344 0-.29166667.1019694-.53776042.3059082-.73828125s.4471843-.30078125.7297364-.30078125zm0 .37255859c-.1800131 0-.3355306.06437175-.4665528.19311524-.1310221.12874349-.1965332.28540039-.1965332.4699707 0 .17773437.0649414.33154297.1948242.46142578.1298829.12988281.2859701.19482422.4682618.19482422.1754557 0 .3286946-.06437174.4597168-.19311523.1310221-.12874349.1965332-.2854004.1965332-.46997071 0-.17773437-.0643718-.33154297-.1931153-.46142578s-.2831217-.19482422-.4631347-.19482422z"),te$4(Zl,"fill","url(#b)"),te$4(Zl,"fill-rule","nonzero"),te$4(ey,"d","m3.00030998 2.79110119v5.21779762c-1.84142801-.64087734-3.00030998-1.57225753-3.00030998-2.60889881s1.15888197-1.96802147 3.00030998-2.60889881zm12.00038752.00035068c1.8408432.64086639 2.9993025 1.57209591 2.9993025 2.60854813s-1.1584593 1.96768174-2.9993025 2.60854813z"),te$4(ey,"fill","#d8d8d8"),te$4(ey,"opacity",".6"),te$4(Xl,"fill","none"),te$4(Xl,"fill-rule","evenodd"),te$4(Xl,"transform","translate(3 3.1)"),te$4(Bn,"height",cr[2]),te$4(Bn,"width",cr[2]),te$4(Bn,"viewBox","0 0 24 24"),te$4(Bn,"xmlns","http://www.w3.org/2000/svg"),te$4(Bn,"xmlns:xlink","http://www.w3.org/1999/xlink"),te$4(vn,"class","icon svelte-ezi5lu"),ne$5(vn,"width",cr[0])},m(ty,ny){Nt(ty,vn,ny),ry&&ry.m(vn,null),pt$1(vn,yn),_g&&_g.m(vn,null),pt$1(vn,Rn),pt$1(vn,Bn),pt$1(Bn,Co),pt$1(Co,Po),pt$1(Co,To),pt$1(Bn,Io),pt$1(Io,$l),pt$1(Io,Wl),pt$1(Bn,Xl),pt$1(Xl,Yl),pt$1(Xl,Zl),pt$1(Xl,ey),Rm=!0},p(ty,[ny]){ty[1]?ry?ny&2&&ot$4(ry,1):(ry=C$5(),ry.c(),ot$4(ry,1),ry.m(vn,yn)):ry&&(Lt(),$t(ry,1,1,()=>{ry=null}),Ot$1()),ty[4]?_g?_g.p(ty,ny):(_g=I$9(ty),_g.c(),_g.m(vn,Rn)):_g&&(_g.d(1),_g=null),(!Rm||ny&4)&&te$4(Bn,"height",ty[2]),(!Rm||ny&4)&&te$4(Bn,"width",ty[2]),ny&1&&ne$5(vn,"width",ty[0])},i(ty){Rm||(ot$4(ry),Rm=!0)},o(ty){$t(ry),Rm=!1},d(ty){ty&&J$h(vn),ry&&ry.d(),_g&&_g.d()}}}function $$2(cr){const{originWidth:vn,originHeight:yn,scale:Rn=1,wantedWidth:Bn}=cr,Co=(Bn!=null?Bn:vn)*Rn,Po=typeof yn=="number"?Co*(yn/vn):void 0;return B$b(q$9({},cr),{width:Co,height:Po})}function e2(cr,vn,yn){let Rn,Bn,Co,Po,To,{width:Io=null}=vn,{icon:$l=null}=vn,{shadow:Wl=!1}=vn;return cr.$$set=Xl=>{"width"in Xl&&yn(0,Io=Xl.width),"icon"in Xl&&yn(5,$l=Xl.icon),"shadow"in Xl&&yn(1,Wl=Xl.shadow)},cr.$$.update=()=>{var Xl,Yl;cr.$$.dirty&32&&yn(4,Rn=$l==null?void 0:$l.bgcolor),cr.$$.dirty&32&&yn(3,Bn=(Xl=$l==null?void 0:$l.bgopacity)!=null?Xl:.6),cr.$$.dirty&32&&yn(7,Co=(Yl=$l==null?void 0:$l.scale)!=null?Yl:1),cr.$$.dirty&32&&yn(6,Po=$l==null?void 0:$l.width),cr.$$.dirty&192&&yn(2,To=$$2({originWidth:24,originHeight:24,scale:Co,wantedWidth:Po}).width)},[Io,Wl,To,Bn,Rn,$l,Po,Co]}class r2 extends Ce$1{constructor(vn){super(),Te$1(this,vn,e2,Z$2,Ft$1,{width:0,icon:5,shadow:1},Y$2)}}function v$e(cr){Qt(cr,"svelte-yq4ru9",".wrapper.svelte-yq4ru9{font-weight:600;cursor:pointer;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:auto}")}function $$1(cr){let vn,yn,Rn;return yn=new r2({props:{icon:cr[0],shadow:!0}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","wrapper svelte-yq4ru9")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,[Co]){const Po={};Co&1&&(Po.icon=Bn[0]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function q$8(cr,vn,yn){let Rn,{tag:Bn}=vn;return cr.$$set=Co=>{"tag"in Co&&yn(1,Bn=Co.tag)},cr.$$.update=()=>{var Co,Po;cr.$$.dirty&2&&yn(0,Rn=(Po=Bn.data.icon)!=null?Po:(Co=Bn.style)==null?void 0:Co.point)},[Rn,Bn]}class I$8 extends Ce$1{constructor(vn){super(),Te$1(this,vn,q$8,$$1,Ft$1,{tag:1},v$e)}}function T$8(cr){Qt(cr,"svelte-kzl2aj",".customElement__container.svelte-kzl2aj{position:relative}")}function q$7(cr){let vn,yn;return{c(){vn=new se$2(!1),yn=Yt(),vn.a=yn},m(Rn,Bn){vn.m(cr[2],Rn,Bn),Nt(Rn,yn,Bn)},p:N$f,d(Rn){Rn&&J$h(yn),Rn&&vn.d()}}}function D$a(cr){let vn,yn=typeof cr[2]=="string"&&q$7(cr);return{c(){vn=K$g("div"),yn&&yn.c(),te$4(vn,"class","customElement__container svelte-kzl2aj"),re$2(vn,"unfolded",cr[1])},m(Rn,Bn){Nt(Rn,vn,Bn),yn&&yn.m(vn,null),cr[5](vn)},p(Rn,[Bn]){typeof Rn[2]=="string"&&yn.p(Rn,Bn),Bn&2&&re$2(vn,"unfolded",Rn[1])},i:N$f,o:N$f,d(Rn){Rn&&J$h(vn),yn&&yn.d(),cr[5](null)}}}function H$9(cr,vn,yn){var Rn,Bn;let Co,{tag:Po}=vn,{rendererMap:To=new Map}=vn,Io,$l=(Bn=Po.element)!=null?Bn:(Rn=To.get(Po.contentType))==null?void 0:Rn.renderer,Wl;ce$2(()=>{Io&&($l instanceof Element?(Io.appendChild($l),Wl=()=>{$l instanceof Element&&$l.remove()}):typeof $l=="function"&&(Wl=$l(Io,Po)))}),le$1(()=>{Wl==null||Wl()});function Xl(Yl){ft$1[Yl?"unshift":"push"](()=>{Io=Yl,yn(0,Io)})}return cr.$$set=Yl=>{"tag"in Yl&&yn(3,Po=Yl.tag),"rendererMap"in Yl&&yn(4,To=Yl.rendererMap)},cr.$$.update=()=>{cr.$$.dirty&8&&yn(1,Co=Po.state.unfolded)},[Io,Co,$l,Po,To,Xl]}class A$8 extends Ce$1{constructor(vn){super(),Te$1(this,vn,H$9,D$a,Ft$1,{tag:3,rendererMap:4},T$8)}}function BA(cr){Qt(cr,"svelte-1fy4duy",'@font-face{font-family:"TG-TYPE";font-style:normal;font-weight:400;src:local("TG-TYPE-Bold"), url(data:application/font-woff2;charset=utf-8;base64,T1RUTwAKAIAAAwAgQ0ZGINFD4CEAAAaQAAAHC0dTVUIAAQAAAAANnAAAAApPUy8yaB5pEwAAAjQAAABgY21hcEItjGUAAAT0AAABfGhlYWQS1WWOAAAAtAAAADZoaGVhBfMBxwAAAhAAAAAkaG10eJ9gBO8AAADsAAABJG1heHAASVAAAAAArAAAAAZuYW1lqczkZQAAApQAAAJecG9zdP+4ADIAAAZwAAAAIAAAUAAASQAAAAEAAAABAADkeHeyXw889QADA+gAAAAA2NoRKwAAAADY2hErACn/OAHgAyAAAQADAAIAAAAAAAAB9ABdAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACWAAAAlgAAAJYAAACCAA7AcwAdwIIADMCCAA0AhwAMwISADkCCAAuAfQANAH+ACsB/gApAggANAEeAFABHgBQAR4AUAIIADQCCAAuAR4AUAEeAFABfAAxAAEAAAPo/zgAAAIcACkAKQHgAAEAAAAAAAAAAAAAAAAAAABJAAMCLgGQAAUACAKKAlgAAABLAooCWAAAAV4AMgEsAAAAAAgAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFVLV04AIAAg/xsDIP84AMgD6ADIAAAAAQAAAAAB9AK8AAAAIAAAAAAAEADGAAEAAAAAAAEADAAAAAEAAAAAAAIABAAMAAEAAAAAAAMAGwAQAAEAAAAAAAQAEQArAAEAAAAAAAUAPAA8AAEAAAAAAAYAEAB4AAEAAAAAAAgADAAAAAEAAAAAAAkADAAAAAMAAQQJAAEAGACIAAMAAQQJAAIACACgAAMAAQQJAAMANgCoAAMAAQQJAAQAIgDeAAMAAQQJAAUAeAEAAAMAAQQJAAYAIAF4AAMAAQQJAAgAGACIAAMAAQQJAAkAGACIQUxJQkFCQSBGb250Qm9sZDEuMDAwO1VLV047QUxJQkFCQUZvbnQtQm9sZEFMSUJBQkEgRm9udCBCb2xkVmVyc2lvbiAxLjAwMDtQUyAwMDEuMDAwO2hvdGNvbnYgMS4wLjg4O21ha2VvdGYubGliMi41LjY0Nzc1QUxJQkFCQUZvbnQtQm9sZABBAEwASQBCAEEAQgBBACAARgBvAG4AdABCAG8AbABkADEALgAwADAAMAA7AFUASwBXAE4AOwBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAEEATABJAEIAQQBCAEEAIABGAG8AbgB0ACAAQgBvAGwAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAMAAwADsAUABTACAAMAAwADEALgAwADAAMAA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAOAA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYANAA3ADcANQBBAEwASQBCAEEAQgBBAEYAbwBuAHQALQBCAG8AbABkAAAAAAADAAAAAwAAASIAAQAAAAAAHAADAAEAAAEiAAABBgAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABCSEMANjc4OTo7PD0+PwAAAAAAAAACAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGwAAAAAAABwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAFoAAAAQABAAAwAAACAALgA5AFoAegCl/xv//wAAACAALAAwAEEAYQCl/xr////hAAAABv/B/7v/nwAAAAEAAAAOAAAAAAAAAAAACgAAAEIASABDAEYARwADAAAAAAAA/7UAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAgABAQERQUxJQkFCQUZvbnQtQm9sZAABAQEg+A8A+CAB+CEC+BgEtPtc+HT5tAX3KA/3UBGcHAZWEgAHAQENExoiKTpLbmluZS4wMDEuMDAxbW9uZXkudW5pRkYxQm5pbmUuMDAxdW5pRkYxQWNvcHlyaWdodCBtaXNzaW5nQUxJQkFCQSBGb250IEJvbGQAAAEAAQAAIhkAQhkAEQkBhwABigAADQAADwAAZAABiAABiwABiQAADgAASQIAAQCtAK4ArwCwALEAsgCzALQAtQC2ALcAuAC5ALoAuwC8AL0AvgC/AMAAwQDCAMMAxADFAMYAxwDIAMkAygDLAMwAzQDOAM8A0ADRANIA0wDUANUA1gDXANgA2QDaANsA3ADdAN4A3wDgAOEA4gFDAVoBqwIsAloCuAMcAzkDzwQ4BDoEPARRBFMEVQTNBOIE8QUEmPtc0Ky6rKKsuqzHrKPDoa2irLCspq2vraWssKzOAejVrKytrKzYA/gu+bQV+9H+fPfRBj76ORVqSWbNavs6rM2wSqwH7vsVFUXNafs68wfNaRVqZ6wG704VaklFJ6zNsEmsB/c6TxUn+zqt9xnNB6z7DhX7Bfs69wWsO++6anRpwwfv+0EV+wX7OvcFB/cZahUnXO8GrFMVamsHRVwF8Wr7OqwG0boFRawGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OrIr5UQH3OPdUA/ebihVmaZSdbB9Mr2TL0xr3vgewlK2eqh7Kr86y1BuvrIJ5qh/HZrJIQhr7vgdngmp5bR5OZ0tkQxv46ARUX2FSH/u+B1a5YMDAs7TCHve+B8RjtVYeDnD4utkB93HzA/cL+QgVPfH8vPP5UgcOrIn5UgG++DYD+GmJFfw28wb3svfUBZ2glKSnGsNduFBWXF1UiB4ijgaMsJWsnqoIyLHMstYbsa6Ceawfy2ezSUAaVndXZ2Me+2/7jQX3pwYOrIvy92Tz90ryEr/zM/L3SvMu8hPy+B/3/xUT7LCwpMDDGq6CrHqoHsZnTK5DG2lrg3puH09pZk5EGobykAe4tba6vrViXFZiYlcedyOfBhPyxLpdUlJcW1JSXLvEH5ojfAdllGiebB5LsM5j1xuwrpSeqx/KsLPO1xrKcMNerx4OwPL1Affi8gP4dPdlFWD4fPshBvuJ/HkF+wH3ryPy87YH+8z1Ffc69+QF++QHDrb3ZNf3ZfAB9zX3YwP3nRZlaJSebB9LsGPO1xrzBlK6XMTEubrEHtcHxF26UlJcXFIeI/g0+BYh+677JAaorK2ZsBuwroJ4qx/LZrNHPxo/B2aCaHhrHktmR2NAGw6si/X3b/IBufX3b/ID95n4QBWAg4uKhh/3EfelBfsHBvtK/CMFfnCFbm0aZJVnnmoeSrLPYdobsq6Vnqwfy7K10dgasoGueKwey2RHtT4b+9YETlu7yMe8vcfHvVlPT1laTx8OmIr5UQG/+B8D93iKFfsIBvdo+OYF+6T2+B8oBg6iifL3bPX3QPEStvNB8vc/8jXxE/L4EvgHFRPss7Cnu78arYOreqgexWpNr0YbaWyDem4fUmlmTUcaXqBftGAeE/JWYmROSxpklWieax5Ksc9i2BuxrpWerB/LsbTP2BrHaMVath4T7PsN93QVu7FjXFtlZltcZbC7urGzuh8T8oX8ghVPW7zHx7q6yMa9W1BPWVpQHw6i96Tz92/0AbTz93DzA/hp+HkVsIGveKwezmNFtUAbZGeBeGofSmNiRT8aZJVnnmseSrHPYtoboAb7EvukBfcHBvdL+CEFmaySqaQa+9gWxry+yJ6dhoGcHq12oWZmGk5YW1BMXLnKHg4gCiEK+11L91IlCvdiyhWtb6hpJgoeJAoOIQogCqz3pe/3b/UBufX3bfQD+G74dxWyga94rB7NZEW0PhtlaIF4ah9KY2FFPxo7tkTPZh6MjIqKjB+TiJCIjYoIjgaCoKGHoRuanY6QoB+IgfsB+6QF9wcG9y/4IgWYppGnqhr7a/sCFVBbvMjHu7zGyLxbTk5aWk4fDvtd+AojCoz7jBUmCh8kCq1vqGkeDvtdi/cS94wjCvwKBCIKDiD3ru8BvPeuA7z4EhUn967vBw4eoDf/DAmLDAv47BT4exWcEwAHAQFBXW97ipCarPcv8+7yAfdl8gP4aPf6FfIjB+r3gwUiBi77gwWHBjH3gwUkBuP7gwUnJPcxKPsxI/cx+y/y9y/3MPP7MO4GDvtdi/cSJQr3JBZkcqOzsKSksrCkcWdlcnFmHw6up6eurm+naGhvb2hop2+uHwv3EiUK9yP4ChUiCgt3SgWxBrnmBZGVj5eZGgsB2/cSAwtobm5paqBzqoYLAAABAAAAAAAAAAAAAA==) format("woff2")}*{-webkit-tap-highlight-color:transparent}.content__container.svelte-1fy4duy{position:relative;left:50%;top:50%;transform:translate(-50%, -50%);font-family:PingFangSC, Segoe UI, Rototo, sans-serif;transition:opacity 0.2s linear}.content__container.unClickable.svelte-1fy4duy{pointer-events:none !important}.content__container.unClickable.svelte-1fy4duy *{pointer-events:none !important}.content__wrapper.svelte-1fy4duy{pointer-events:none;width:100%;height:100%}.content__container.hide.svelte-1fy4duy{opacity:0;pointer-events:none}.content__container.hide.svelte-1fy4duy *{pointer-events:none !important}.content__container.disable.svelte-1fy4duy{display:none}.content.svelte-1fy4duy{position:relative;width:100%;height:100%;font-size:0.75rem;color:#fff}.content.svelte-1fy4duy:not(.unfolded){pointer-events:none}.content.svelte-1fy4duy:not(.unfolded) *{pointer-events:none !important}.content.unfolded.svelte-1fy4duy{pointer-events:auto;cursor:pointer}')}function _A(cr){let vn,yn;return{c(){vn=K$g("div"),te$4(vn,"data-info","tag content is keep folded"),te$4(vn,"data-id",yn=cr[0].id)},m(Rn,Bn){Nt(Rn,vn,Bn)},p(Rn,Bn){Bn&1&&yn!==(yn=Rn[0].id)&&te$4(vn,"data-id",yn)},i:N$f,o:N$f,d(Rn){Rn&&J$h(vn)}}}function QA(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g;const ty=[MA,DA,hA,yA,bA,CA,kA],ny=[];function iy(oy,ay){return ay&9&&(Bn=null),ay&9&&(Co=null),ay&9&&(Po=null),ay&9&&(To=null),ay&9&&(Io=null),ay&9&&($l=null),ay&9&&(Wl=null),Bn==null&&(Bn=!!(["Text"].includes(oy[0].contentType)||["Text"].includes(oy[3].get(oy[0].contentType)))),Bn?0:(Co==null&&(Co=!!(["ImageText","Image","Video"].includes(oy[0].contentType)||["ImageText","Image","Video"].includes(oy[3].get(oy[0].contentType)))),Co?1:(Po==null&&(Po=!!(["Audio"].includes(oy[0].contentType)||["Audio"].includes(oy[3].get(oy[0].contentType)))),Po?2:(To==null&&(To=!!(["Marketing"].includes(oy[0].contentType)||["Marketing"].includes(oy[3].get(oy[0].contentType)))),To?3:(Io==null&&(Io=!!(["Link","VRLink","PanoLink","Sticker"].includes(oy[0].contentType)||["Link","VRLink","PanoLink","Sticker"].includes(oy[3].get(oy[0].contentType)))),Io?4:($l==null&&($l=!!(["MediaPlane","MediaModel"].includes(oy[0].contentType)||["MediaPlane","MediaModel"].includes(oy[3].get(oy[0].contentType)))),$l?5:(Wl==null&&(Wl=!!(["Panorama"].includes(oy[0].contentType)||["Panorama"].includes(oy[3].get(oy[0].contentType)))),Wl?6:-1))))))}return~(Xl=iy(cr,-1))&&(Yl=ny[Xl]=ty[Xl](cr)),{c(){var oy;vn=K$g("div"),yn=K$g("div"),Rn=K$g("div"),Yl&&Yl.c(),te$4(Rn,"class","content svelte-1fy4duy"),re$2(Rn,"unfolded",(oy=cr[0].state)==null?void 0:oy.unfolded),te$4(yn,"class","content__wrapper svelte-1fy4duy"),te$4(vn,"class",Zl=Gt(a$l("content__container",cr[0].className))+" svelte-1fy4duy"),te$4(vn,"data-id",ey=cr[0].id),re$2(vn,"disable",cr[0].enabled===!1),re$2(vn,"hide",cr[5]),re$2(vn,"unClickable",cr[0].config.clickable===!1),ne$5(vn,"width",cr[0].stickType==="Plane"||cr[0].contentType==="MediaModel"?"100%":0),ne$5(vn,"height",cr[0].stickType==="Plane"||cr[0].contentType==="MediaModel"?"100%":0)},m(oy,ay){Nt(oy,vn,ay),pt$1(vn,yn),pt$1(yn,Rn),~Xl&&ny[Xl].m(Rn,null),cr[16](vn),Rm=!0,ry||(_g=lt$2(vn,"click",cr[17],!0),ry=!0)},p(oy,ay){var uy;let hy=Xl;Xl=iy(oy,ay),Xl===hy?~Xl&&ny[Xl].p(oy,ay):(Yl&&(Lt(),$t(ny[hy],1,1,()=>{ny[hy]=null}),Ot$1()),~Xl?(Yl=ny[Xl],Yl?Yl.p(oy,ay):(Yl=ny[Xl]=ty[Xl](oy),Yl.c()),ot$4(Yl,1),Yl.m(Rn,null)):Yl=null),(!Rm||ay&1)&&re$2(Rn,"unfolded",(uy=oy[0].state)==null?void 0:uy.unfolded),(!Rm||ay&1&&Zl!==(Zl=Gt(a$l("content__container",oy[0].className))+" svelte-1fy4duy"))&&te$4(vn,"class",Zl),(!Rm||ay&1&&ey!==(ey=oy[0].id))&&te$4(vn,"data-id",ey),(!Rm||ay&1)&&re$2(vn,"disable",oy[0].enabled===!1),(!Rm||ay&33)&&re$2(vn,"hide",oy[5]),(!Rm||ay&1)&&re$2(vn,"unClickable",oy[0].config.clickable===!1),ay&1&&ne$5(vn,"width",oy[0].stickType==="Plane"||oy[0].contentType==="MediaModel"?"100%":0),ay&1&&ne$5(vn,"height",oy[0].stickType==="Plane"||oy[0].contentType==="MediaModel"?"100%":0)},i(oy){Rm||(ot$4(Yl),Rm=!0)},o(oy){$t(Yl),Rm=!1},d(oy){oy&&J$h(vn),~Xl&&ny[Xl].d(),cr[16](null),ry=!1,_g()}}}function wA(cr){let vn,yn,Rn,Bn,Co,Po,To;return yn=new A$8({props:{tag:e$5(cr[0]),rendererMap:cr[2]}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class",Rn=Gt(a$l("content__container",cr[0].className))+" svelte-1fy4duy"),te$4(vn,"data-id",Bn=cr[0].id),re$2(vn,"custom-tag-disable",cr[0].enabled===!1),re$2(vn,"custom-tag-hide",cr[5])},m(Io,$l){Nt(Io,vn,$l),Dt$1(yn,vn,null),cr[14](vn),Co=!0,Po||(To=lt$2(vn,"click",cr[15]),Po=!0)},p(Io,$l){const Wl={};$l&1&&(Wl.tag=e$5(Io[0])),$l&4&&(Wl.rendererMap=Io[2]),yn.$set(Wl),(!Co||$l&1&&Rn!==(Rn=Gt(a$l("content__container",Io[0].className))+" svelte-1fy4duy"))&&te$4(vn,"class",Rn),(!Co||$l&1&&Bn!==(Bn=Io[0].id))&&te$4(vn,"data-id",Bn),(!Co||$l&1)&&re$2(vn,"custom-tag-disable",Io[0].enabled===!1),(!Co||$l&33)&&re$2(vn,"custom-tag-hide",Io[5])},i(Io){Co||(ot$4(yn.$$.fragment,Io),Co=!0)},o(Io){$t(yn.$$.fragment,Io),Co=!1},d(Io){Io&&J$h(vn),Rt(yn),cr[14](null),Po=!1,To()}}}function kA(cr){let vn,yn;return vn=new I$8({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function CA(cr){let vn,yn;return vn=new gt$1({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function bA(cr){let vn,yn;return vn=new nt({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function yA(cr){let vn,yn;return vn=new Dt({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function hA(cr){let vn,yn;return vn=new rt({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function DA(cr){let vn,yn;return vn=new qe$2({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function MA(cr){let vn,yn;return vn=new Y$6({props:{tag:e$5(cr[0])}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&1&&(Co.tag=e$5(Rn[0])),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function vA(cr){let vn,yn,Rn,Bn,Co;const Po=[wA,QA,_A],To=[];function Io($l,Wl){return Wl&5&&(vn=null),vn==null&&(vn=!!($l[0].element||$l[2].has($l[0].contentType))),vn?0:$l[4]?1:2}return yn=Io(cr,-1),Rn=To[yn]=Po[yn](cr),{c(){Rn.c(),Bn=Yt()},m($l,Wl){To[yn].m($l,Wl),Nt($l,Bn,Wl),Co=!0},p($l,[Wl]){let Xl=yn;yn=Io($l,Wl),yn===Xl?To[yn].p($l,Wl):(Lt(),$t(To[Xl],1,1,()=>{To[Xl]=null}),Ot$1(),Rn=To[yn],Rn?Rn.p($l,Wl):(Rn=To[yn]=Po[yn]($l),Rn.c()),ot$4(Rn,1),Rn.m(Bn.parentNode,Bn))},i($l){Co||(ot$4(Rn),Co=!0)},o($l){$t(Rn),Co=!1},d($l){To[yn].d($l),$l&&J$h(Bn)}}}function EA(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,{tag:$l}=vn,{hooks:Wl}=vn,{rendererMap:Xl=new Map}=vn,{contentTypeMap:Yl=new Map}=vn,{state:Zl}=vn,{mediaStore:ey}=vn,{temporaryState:Rm}=vn;ae$2("hooks",Wl),ae$2("mediaStore",ey);let ry,_g;function ty(hy){hy?Wl.emit("exposure",{id:Po,type:"start"}):Wl.emit("exposure",{id:Po,type:"end"})}function ny(hy,my,ly){var sy,cy;return!(!hy.enabled||!my.visible||!my.enabled||!ly.visible||!((sy=hy.state)!=null&&sy.visible)||((cy=hy.temporaryState)==null?void 0:cy.visible)===!1||hy instanceof Qo&&hy.loading)}function iy(hy){ft$1[hy?"unshift":"push"](()=>{$l.contentDom=hy,yn(0,$l)})}const oy=hy=>Wl.emit("click",{event:hy,target:"TagContent",tag:$l});function ay(hy){ft$1[hy?"unshift":"push"](()=>{$l.contentDom=hy,yn(0,$l)})}const uy=hy=>{$l.entryFromModel&&o$q($l.five.state.mode)?(hy.stopPropagation(),$l.find({targetMode:"Panorama"})):Wl.emit("click",{event:hy,target:"TagContent",tag:$l})};return cr.$$set=hy=>{"tag"in hy&&yn(0,$l=hy.tag),"hooks"in hy&&yn(1,Wl=hy.hooks),"rendererMap"in hy&&yn(2,Xl=hy.rendererMap),"contentTypeMap"in hy&&yn(3,Yl=hy.contentTypeMap),"state"in hy&&yn(6,Zl=hy.state),"mediaStore"in hy&&yn(7,ey=hy.mediaStore),"temporaryState"in hy&&yn(8,Rm=hy.temporaryState)},cr.$$.update=()=>{var hy,my,ly,sy,cy,fy,vy,dy,Ay,gy,wy;cr.$$.dirty&1&&yn(12,Rn=(hy=$l.state)==null?void 0:hy.unfolded),cr.$$.dirty&1&&yn(11,Bn=(my=$l.state)==null?void 0:my.visible),cr.$$.dirty&321&&yn(13,Co=Zl.visible&&Rm.visible&&((ly=$l.state)==null?void 0:ly.visible)),cr.$$.dirty&1&&(Po=$l.id),cr.$$.dirty&321&&yn(5,To=!ny($l,Zl,Rm)),cr.$$.dirty&8192&&ty(Co),cr.$$.dirty&7681&&$l.hooks&&(Rn!==void 0&&Rn!==_g&&(yn(10,_g=Rn),Rn?(cy=(sy=$l.hooks).emit)==null||cy.call(sy,"unfolded"):(vy=$l==null?void 0:(fy=$l.hooks).emit)==null||vy.call(fy,"folded")),Bn!==void 0&&Bn!==ry&&(yn(9,ry=Bn),Bn?(Ay=(dy=$l.hooks).emit)==null||Ay.call(dy,"show"):(wy=(gy=$l.hooks).emit)==null||wy.call(gy,"hide"))),cr.$$.dirty&1&&yn(4,Io=(()=>!(typeof $l.config.unfoldedConfig=="object"&&$l.config.unfoldedConfig.keep==="folded"))())},[$l,Wl,Xl,Yl,Io,To,Zl,ey,Rm,ry,_g,Bn,Rn,Co,iy,oy,ay,uy]}class Fi extends Ce$1{constructor(vn){super(),Te$1(this,vn,EA,vA,Ft$1,{tag:0,hooks:1,rendererMap:2,contentTypeMap:3,state:6,mediaStore:7,temporaryState:8},BA)}}var k$7=Object.defineProperty,O$5=Object.defineProperties,F$5=Object.getOwnPropertyDescriptors,C$4=Object.getOwnPropertySymbols,w$b=Object.prototype.hasOwnProperty,x$c=Object.prototype.propertyIsEnumerable,f$n=(cr,vn,yn)=>vn in cr?k$7(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,b$d=(cr,vn)=>{for(var yn in vn||(vn={}))w$b.call(vn,yn)&&f$n(cr,yn,vn[yn]);if(C$4)for(var yn of C$4(vn))x$c.call(vn,yn)&&f$n(cr,yn,vn[yn]);return cr},P$9=(cr,vn)=>O$5(cr,F$5(vn)),v$d=(cr,vn,yn)=>(f$n(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),y$c=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class Qo extends Ji{constructor(vn,yn){super(vn,yn),v$d(this,"loading",!1),v$d(this,"loadModel",()=>y$c(this,null,function*(){var Rn,Bn;const Co=this.data.modelUrl;if(!Co||(this.loading=!0,yield M$u(this.five),!this.plugin.tags.includes(this)))return;const Po=f$u(Co).then($l=>y$c(this,null,function*(){var Wl;const Xl=Object.assign($l.scene,{customID:this.id,isTagModel:!0,removeEventListener:this.getConfig().clickable===!1?()=>{}:this.addObjectClickHandler(this,$l.scene,Yl=>{this.plugin.hooks.emit("click",{target:"TagModel",tag:this,event:Yl})})});return new Matrix4().fromArray(this.matrix).decompose(Xl.position,Xl.quaternion,Xl.scale),Xl.updateWorldMatrix(!0,!0),Xl.visible=this.visible,(Wl=this.getConfig().modelConfig)!=null&&Wl.autoLookAtEnabled&&Xl.lookAt(this.five.camera.position.clone().setY(Xl.position.y)),Xl}));this.model={promise:Po};const To=yield Po;if(this.loading=!1,((Rn=this.model)==null?void 0:Rn.promise)!==Po||!this.plugin.tags.includes(this))return;this.model.object=To;const Io=this.plugin.gltfObjectGroup.children.find($l=>$l.customID===this.id);if(Io&&(this.plugin.gltfObjectGroup.remove(Io),Io.removeEventListener()),o$o(this)){const $l=this.data.mediaPosition.map(a$D);if(this.computeRenderType()==="Mesh"&&!this.mediaPlane){this.mediaPlane=new z$d(this.data.mediaData[0].url,$l,{objectFit:this.data.objectFit});const Wl=new Vector3().addVectors($l[0],$l[2]).divideScalar(2);this.mediaPlane.position.copy(Wl),To.add(this.mediaPlane)}if(this.computeRenderType()!=="Mesh"){(Bn=this.tag3DContentSvelte)==null||Bn.dispose();const Wl=document.createElement("div");Wl.classList.add("tag-media-container");const Xl="black";Wl.style.backgroundColor=Xl,Wl.style.border=`3px solid ${Xl}`;const Yl=b$d({mode:"behind",cornerPoints:$l,container:Wl},this.config.tag3DConfig),Zl=this.computeRenderType()==="BehindDom"||Yl.mode==="behind"?"behind":"front",ey=new nt$3(P$9(b$d({},Yl),{mode:Zl})),Rm=this.computeNormal();ey.position.add(Rm.clone().setLength(F$c.Z_FIGHTING_OFFSET)),To.add(ey);let ry;ey.mode==="behind"&&this.config.clickable!==!1&&(ry=this.addObjectClickHandler(this,ey,ty=>{this.plugin.hooks.emit("click",{event:ty,target:"TagContent",tag:this})}));const _g=new Fi({target:Wl,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:_g,domContainer:{css3DObject:ey},css3DInstance:ey,initialNormal:Rm,currentNormal:Rm,dispose:()=>{_g.$destroy(),ey.dispose(),ry==null||ry()}}}}return this.plugin.gltfObjectGroup.add(To),To})),this.state.unfolded=!0,E$u(this.five),this.loadModel().then(()=>this.updateVisible())}applyVisible(){var vn,yn;(vn=this.tag3DContentSvelte)==null||vn.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(yn=this.model)!=null&&yn.object&&(this.model.object.visible=this.visible)}set(...vn){super.set(...vn),this.loadModel()}setData(...vn){var yn;super.setData(...vn);const Rn=this.data.mediaPosition.map(a$D);this.computeRenderType()==="Mesh"?this.mediaPlane&&this.mediaPlane.src!==this.data.mediaData[0].url&&(this.mediaPlane.removeFromParent(),this.mediaPlane=new z$d(this.data.mediaData[0].url,Rn,{objectFit:this.data.objectFit})):(yn=this.tag3DContentSvelte)==null||yn.svelteApp.$set({tag:this})}computeNormal(){return i$c(this.data.mediaPosition)}}var T$7=Object.defineProperty,b$c=Object.defineProperties,k$6=Object.getOwnPropertyDescriptors,v$c=Object.getOwnPropertySymbols,R$6=Object.prototype.hasOwnProperty,V$2=Object.prototype.propertyIsEnumerable,P$8=(cr,vn,yn)=>vn in cr?T$7(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,g$g=(cr,vn)=>{for(var yn in vn||(vn={}))R$6.call(vn,yn)&&P$8(cr,yn,vn[yn]);if(v$c)for(var yn of v$c(vn))V$2.call(vn,yn)&&P$8(cr,yn,vn[yn]);return cr},y$b=(cr,vn)=>b$c(cr,k$6(vn)),D$9=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const B$a=new Map,O$4=new Map;class Qi extends Ji{constructor(vn,yn){super(vn,yn),this.state.unfolded=!0,this.loadModel()}applyVisible(){var vn,yn,Rn,Bn,Co,Po;this.computeRenderType()==="Mesh"?((yn=(vn=this.data.mediaData)==null?void 0:vn[0])==null?void 0:yn.type)==="Video"?this.renderVideoPlane():((Bn=(Rn=this.data.mediaData)==null?void 0:Rn[0])==null?void 0:Bn.type)==="Image"&&this.renderImagePlane():((Co=this.tag3DContentSvelte)==null||Co.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}),(Po=this.tag3DContentSvelte)!=null&&Po.css3DInstance&&(this.tag3DContentSvelte.css3DInstance.visible=this.visible,this.five.needsRender=!0))}set(vn,yn=!0){super.set(vn,yn),M$u(this.five).then(()=>{this.tag3DContentSvelte&&(vn.data?this.tag3DContentSvelte.svelteApp.$set({tag:this,state:this.plugin.state,temporaryState:this.plugin.temporaryState}):vn.position&&this.loadModel())})}setData(...vn){var yn,Rn,Bn,Co,Po;super.setData(...vn),this.computeRenderType()==="Mesh"?((Rn=(yn=this.data.mediaData)==null?void 0:yn[0])==null?void 0:Rn.type)==="Video"?this.renderVideoPlane():((Co=(Bn=this.data.mediaData)==null?void 0:Bn[0])==null?void 0:Co.type)==="Image"&&this.renderImagePlane():(Po=this.tag3DContentSvelte)==null||Po.svelteApp.$set({tag:this})}loadModel(){return D$9(this,null,function*(){var vn,yn,Rn,Bn,Co,Po;if(yield M$u(this.five),this.computeRenderType()==="Mesh")((yn=(vn=this.data.mediaData)==null?void 0:vn[0])==null?void 0:yn.type)==="Video"?this.renderVideoPlane():((Bn=(Rn=this.data.mediaData)==null?void 0:Rn[0])==null?void 0:Bn.type)==="Image"&&this.renderImagePlane();else{E$u(this.five);const To=this.position.map(t$j);(Po=(Co=this.tag3DContentSvelte)==null?void 0:Co.dispose)==null||Po.call(Co);const Io=document.createElement("div");Io.classList.add("tag-media-container");const $l=g$g({mode:"front",cornerPoints:To,container:Io},this.config.tag3DConfig),Wl=this.computeRenderType()==="BehindDom"||$l.mode==="behind"?"behind":"front",Xl=new nt$3(y$b(g$g({},$l),{mode:Wl})),Yl=this.computeNormal();Xl.position.add(Yl.clone().setLength(F$c.Z_FIGHTING_OFFSET)),this.plugin.group.add(Xl);let Zl;Xl.mode==="behind"&&this.config.clickable!==!1&&(Zl=this.addObjectClickHandler(this,Xl,Rm=>{this.plugin.hooks.emit("click",{event:Rm,target:"TagContent",tag:this})}));const ey=new Fi({target:Io,props:{tag:this,hooks:this.plugin.hooks,state:this.plugin.state,mediaStore:this.plugin.mediaStore,temporaryState:this.plugin.temporaryState}});this.tag3DContentSvelte={svelteApp:ey,domContainer:{css3DObject:Xl},css3DInstance:Xl,initialNormal:Yl,currentNormal:Yl,dispose:()=>{ey.$destroy(),Xl.dispose(),Zl==null||Zl()}},this.five.needsRender=!0}})}renderVideoPlane(){var vn;const yn=this.data.mediaData[0];if(!yn)return;const{url:Rn}=yn;if(!Rn)return;const Bn=this.currentVisible,Co=(()=>!!(this.mediaPlane&&!Bn))(),Po=(()=>!!(!this.mediaPlane&&Bn))(),To=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==Rn))();if((Co||To)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),Po||To){const Io=this.position.map(a$D),$l=new D$g(Rn,Io,{videoCoverSrc:yn.videoCoverUrl,playButton:this.data.playIcon,paused:!((vn=this.data.autoplayConfig)!=null&&vn.autoplayVideo),objectFit:this.data.objectFit,videoTextureMap:B$a,ImageTextureMap:O$4,domEvents:this.plugin.domEvents});this.plugin.domEvents.addAutoBindEventListener($l,"click",Xl=>{var Yl;!((Yl=$l.videoInstance)!=null&&Yl.paused)&&$l.videoInstance.muted===!1&&this.plugin.hooks.emit("playStateChange",{event:Xl,state:"playing",tag:this,mediaInstance:$l.videoInstance})}),$l.onVideoReady=Xl=>{Xl.addEventListener("play",Yl=>{this.plugin.mediaStore.set({currentMediaElement:$l.videoInstance}),this.plugin.hooks.emit("playStateChange",{event:Yl,state:"playing",tag:this,mediaInstance:$l.videoInstance})}),Xl.addEventListener("pause",Yl=>{this.plugin.hooks.emit("playStateChange",{event:Yl,state:"paused",tag:this,mediaInstance:$l.videoInstance})}),Xl.addEventListener("ended",Yl=>{this.plugin.hooks.emit("playStateChange",{event:Yl,state:"paused",tag:this,mediaInstance:$l.videoInstance})})};const Wl=Xl=>(this.five.on("renderFrame",Xl),()=>this.five.off("renderFrame",Xl));$l.initialRenderHooks(Wl),this.mediaPlane=$l,this.play=()=>$l.play(),this.pause=()=>$l.pause(),this.plugin.imagePlaneGroup.add(this.mediaPlane)}this.five.needsRender=!0}renderImagePlane(){const vn=this.data.mediaData[0];if(!vn)return;const{url:yn}=vn;if(!yn)return;const Rn=this.position.map(a$D),Bn=this.currentVisible,Co=(()=>!!(this.mediaPlane&&!Bn))(),Po=(()=>!!(!this.mediaPlane&&Bn))(),To=(()=>!!(this.mediaPlane&&this.mediaPlane.src!==yn))();(Co||To)&&this.mediaPlane&&(this.plugin.imagePlaneGroup.remove(this.mediaPlane),this.mediaPlane.dispose(),this.mediaPlane.removeFromParent(),this.mediaPlane=void 0),(Po||To)&&(this.mediaPlane=new z$d(yn,Rn,{objectFit:this.data.objectFit}),this.getConfig().clickable!==!1&&this.plugin.domEvents.addAutoBindEventListener(this.mediaPlane,"click",Io=>{this.plugin.hooks.emit("click",{tag:this,target:"TagContent",event:Io.origDomEvent})},{noEmitWhenHide:!0}),this.plugin.imagePlaneGroup.add(this.mediaPlane)),this.five.needsRender=!0}computeNormal(){return i$c(this.position)}}function I$7(cr){Qt(cr,"svelte-cksy1a",".audio-tag-point.svelte-cksy1a{position:relative;width:-moz-max-content;width:max-content;height:-moz-max-content;height:max-content;padding:0.25rem;border-radius:100%;border:0.0625rem solid rgba(255, 255, 255, 0.6);background:linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));box-shadow:inset 0 0 0.25rem 0 rgba(255, 255, 255, 0.3);display:flex;align-items:center;justify-content:center}")}function z$4(cr){let vn,yn,Rn,Bn,Co;return yn=new X$3({props:{playing:cr[0],width:24}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","audio-tag-point svelte-cksy1a")},m(Po,To){Nt(Po,vn,To),Dt$1(yn,vn,null),Rn=!0,Bn||(Co=[lt$2(vn,"click",function(){L$k(cr[2])&&cr[2].apply(this,arguments)}),lt$2(vn,"mouseenter",function(){L$k(cr[3])&&cr[3].apply(this,arguments)}),lt$2(vn,"mouseleave",function(){L$k(cr[4])&&cr[4].apply(this,arguments)})],Bn=!0)},p(Po,To){cr=Po;const Io={};To&1&&(Io.playing=cr[0]),yn.$set(Io)},i(Po){Rn||(ot$4(yn.$$.fragment,Po),Rn=!0)},o(Po){$t(yn.$$.fragment,Po),Rn=!1},d(Po){Po&&J$h(vn),Rt(yn),Bn=!1,M$o(Co)}}}function U$5(cr){let vn,yn;return vn=new Z$3({props:{url:cr[1].data.audioUrl,enable:cr[1].state.visible,style:"width: max-content; height: max-content;",hooksInfo:{tag:cr[1]},$$slots:{default:[z$4]},$$scope:{ctx:cr}}}),vn.$on("play",cr[5].play),vn.$on("pause",cr[5].pause),vn.$on("error",cr[5].error),vn.$on("timeupdate",cr[5].timeupdate),vn.$on("duration",cr[5].duration),vn.$on("audioRef",cr[5].audioRef),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,[Bn]){const Co={};Bn&2&&(Co.url=Rn[1].data.audioUrl),Bn&2&&(Co.enable=Rn[1].state.visible),Bn&2&&(Co.hooksInfo={tag:Rn[1]}),Bn&157&&(Co.$$scope={dirty:Bn,ctx:Rn}),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function j$b(cr,vn,yn){let{playing:Rn=!1}=vn,{tag:Bn}=vn,{handlePointClick:Co=()=>{}}=vn,{handleMouseEnter:Po=()=>{}}=vn,{handleMouseLeave:To=()=>{}}=vn;const Io=fe$3(),$l={audioRef:Wl=>Io("audioRef",Wl.detail),play:()=>{yn(0,Rn=!0),Io("play")},pause:()=>{yn(0,Rn=!1),Io("pause")},error:()=>{yn(0,Rn=!1),Io("pause")},timeupdate:Wl=>Io("timeupdate",Wl.detail),duration:Wl=>Io("duration",Wl.detail)};return cr.$$set=Wl=>{"playing"in Wl&&yn(0,Rn=Wl.playing),"tag"in Wl&&yn(1,Bn=Wl.tag),"handlePointClick"in Wl&&yn(2,Co=Wl.handlePointClick),"handleMouseEnter"in Wl&&yn(3,Po=Wl.handleMouseEnter),"handleMouseLeave"in Wl&&yn(4,To=Wl.handleMouseLeave)},[Rn,Bn,Co,Po,To,$l]}class O$3 extends Ce$1{constructor(vn){super(),Te$1(this,vn,j$b,U$5,Ft$1,{playing:0,tag:1,handlePointClick:2,handleMouseEnter:3,handleMouseLeave:4},I$7)}}function Pe(cr){Qt(cr,"svelte-dorxu0",'@charset "UTF-8";.tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;pointer-events:auto;cursor:pointer;width:141%;height:141%;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1000000}.audio-tag-point-click-helper.svelte-dorxu0.svelte-dorxu0{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1}.tag-point-wrapper.svelte-dorxu0.svelte-dorxu0{pointer-events:none;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);cursor:pointer;z-index:1040}.tag-folded-point.svelte-dorxu0.svelte-dorxu0,.tag-unfolded-point.svelte-dorxu0.svelte-dorxu0{transition:all 0.5s}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{display:flex;justify-content:center;align-items:center;position:absolute;width:100%;height:100%;border-radius:50%}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:0.3125rem;height:0.3125rem;border-radius:50%;background-color:white}.tag-point-wrapper.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0:before{content:"";position:absolute;width:0.875rem;height:0.875rem;border-radius:50%;background-color:rgba(0, 0, 0, 0.2)}.tag-point-wrapper.folded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.folded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0;scale:1}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:0;scale:0.2}.tag-point-wrapper.unfolded.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:1;scale:1}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-folded-point.svelte-dorxu0{opacity:1 !important;scale:1 !important}.tag-point-wrapper.disable-unfold.svelte-dorxu0 .tag-unfolded-point.svelte-dorxu0{opacity:0 !important;scale:1 !important}')}function Ce(cr){let vn;return{c(){vn=K$g("div"),te$4(vn,"class","audio-tag-point-click-helper svelte-dorxu0")},m(yn,Rn){Nt(yn,vn,Rn),cr[18](vn)},p:N$f,d(yn){yn&&J$h(vn),cr[18](null)}}}function Me(cr){let vn,yn,Rn;return{c(){vn=K$g("div"),te$4(vn,"class","tag-point-click-helper svelte-dorxu0")},m(Bn,Co){Nt(Bn,vn,Co),cr[17](vn),yn||(Rn=[lt$2(vn,"click",cr[15]),lt$2(vn,"mouseenter",cr[16]),lt$2(vn,"mouseleave",function(){L$k(cr[3])&&cr[3].apply(this,arguments)})],yn=!0)},p(Bn,Co){cr=Bn},d(Bn){Bn&&J$h(vn),cr[17](null),yn=!1,M$o(Rn)}}}function Te(cr){let vn,yn;return vn=new Ee$2({props:{icon:cr[8],width:cr[7]}}),vn.$on("iconLoaded",cr[21]),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&256&&(Co.icon=Rn[8]),Bn&128&&(Co.width=Rn[7]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function Le$2(cr){let vn,yn;return vn=new O$3({props:{tag:e$5(cr[1]),handlePointClick:cr[19],handleMouseEnter:cr[20],handleMouseLeave:cr[3]}}),vn.$on("audioRef",cr[13].audioRef),vn.$on("play",cr[13].play),vn.$on("pause",cr[13].pause),vn.$on("timeupdate",cr[13].timeupdate),vn.$on("duration",cr[13].duration),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&2&&(Co.tag=e$5(Rn[1])),Bn&16&&(Co.handlePointClick=Rn[19]),Bn&6&&(Co.handleMouseEnter=Rn[20]),Bn&8&&(Co.handleMouseLeave=Rn[3]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function Ee$1(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl;function Xl(_g,ty){return _g[6]?Ce:Me}let Yl=Xl(cr),Zl=Yl(cr);Rn=new T$a({props:{center:!0,blurRadius:15,spreadRadius:5,opacity:.3}});const ey=[Le$2,Te],Rm=[];function ry(_g,ty){return _g[6]?0:1}return Io=ry(cr),$l=Rm[Io]=ey[Io](cr),{c(){vn=K$g("div"),Zl.c(),yn=Xt$1(),Ae$1(Rn.$$.fragment),Bn=Xt$1(),Co=K$g("div"),Po=Xt$1(),To=K$g("div"),$l.c(),te$4(Co,"class","tag-unfolded-point svelte-dorxu0"),ne$5(Co,"transition-delay",(cr[9]?cr[11]:0)+"ms"),te$4(To,"class","tag-folded-point svelte-dorxu0"),ne$5(To,"transition-delay",(cr[9]?cr[11]:0)+"ms"),te$4(vn,"class","tag-point-wrapper svelte-dorxu0"),re$2(vn,"unfolded",cr[5]),re$2(vn,"folded",cr[9]),re$2(vn,"disable-unfold",cr[1].isPopoverConfigEnabled())},m(_g,ty){Nt(_g,vn,ty),Zl.m(vn,null),pt$1(vn,yn),Dt$1(Rn,vn,null),pt$1(vn,Bn),pt$1(vn,Co),pt$1(vn,Po),pt$1(vn,To),Rm[Io].m(To,null),Wl=!0},p(_g,[ty]){Yl===(Yl=Xl(_g))&&Zl?Zl.p(_g,ty):(Zl.d(1),Zl=Yl(_g),Zl&&(Zl.c(),Zl.m(vn,yn))),ty&512&&ne$5(Co,"transition-delay",(_g[9]?_g[11]:0)+"ms");let ny=Io;Io=ry(_g),Io===ny?Rm[Io].p(_g,ty):(Lt(),$t(Rm[ny],1,1,()=>{Rm[ny]=null}),Ot$1(),$l=Rm[Io],$l?$l.p(_g,ty):($l=Rm[Io]=ey[Io](_g),$l.c()),ot$4($l,1),$l.m(To,null)),ty&512&&ne$5(To,"transition-delay",(_g[9]?_g[11]:0)+"ms"),(!Wl||ty&32)&&re$2(vn,"unfolded",_g[5]),(!Wl||ty&512)&&re$2(vn,"folded",_g[9]),(!Wl||ty&2)&&re$2(vn,"disable-unfold",_g[1].isPopoverConfigEnabled())},i(_g){Wl||(ot$4(Rn.$$.fragment,_g),ot$4($l),Wl=!0)},o(_g){$t(Rn.$$.fragment,_g),$t($l),Wl=!1},d(_g){_g&&J$h(vn),Zl.d(),Rt(Rn),Rm[Io].d()}}}function He$1(cr,vn,yn){var Rn,Bn;let Co,Po,To,Io,$l;const Wl=de$3("hooks"),Xl=fe$3();let{tag:Yl}=vn,Zl,ey=!1;const Rm=()=>{Zl!==void 0&&clearTimeout(Zl),ey=!0,Zl=setTimeout(()=>{ey=!1},800)},ry=gy=>{ey||(Yl.entryFromModel&&o$q(Yl.five.state.mode)?Yl.find({targetMode:"Panorama"}).then(()=>Yl.unfoldAndFoldOthers()):Wl.emit("click",{event:gy,target:"TagPoint",tag:Yl}))},_g=(()=>Yl.contentType==="Text"&&Yl.data.appearance==="plane"?500:800)();let{tagPointClickHelper:ty=null}=vn,{handleMouseEnter:ny=()=>{}}=vn,{handleMouseLeave:iy=()=>{}}=vn,{handleTagPointClick:oy=()=>{}}=vn;const ay=()=>!0,uy=(Bn=(Rn=Yl.config.popoverConfig)==null?void 0:Rn.beforeOpen)!=null?Bn:ay;let{audioInstance:hy=null}=vn;const my={audioRef:gy=>{yn(14,hy=gy.detail),Xl("audioInstanceReady",hy)},play:()=>Xl("audioPlay"),pause:()=>Xl("audioPause"),timeupdate:gy=>Xl("audioTimeUpdate",gy.detail),duration:gy=>Xl("audioDuration",gy.detail)},ly=gy=>{oy(gy),ry(gy)},sy=gy=>{uy(Yl)&&ny(gy)};function cy(gy){ft$1[gy?"unshift":"push"](()=>{ty=gy,yn(0,ty)})}function fy(gy){ft$1[gy?"unshift":"push"](()=>{ty=gy,yn(0,ty)})}const vy=gy=>{oy(gy),ry(gy)},dy=gy=>{uy(Yl)&&ny(gy)};function Ay(gy){he$1.call(this,cr,gy)}return cr.$$set=gy=>{"tag"in gy&&yn(1,Yl=gy.tag),"tagPointClickHelper"in gy&&yn(0,ty=gy.tagPointClickHelper),"handleMouseEnter"in gy&&yn(2,ny=gy.handleMouseEnter),"handleMouseLeave"in gy&&yn(3,iy=gy.handleMouseLeave),"handleTagPointClick"in gy&&yn(4,oy=gy.handleTagPointClick),"audioInstance"in gy&&yn(14,hy=gy.audioInstance)},cr.$$.update=()=>{var gy,wy,Cy,My;cr.$$.dirty&2&&yn(5,Co=(gy=Yl.state)==null?void 0:gy.unfolded),cr.$$.dirty&32&&yn(9,Po=!Co),cr.$$.dirty&2&&yn(8,To=(Cy=(wy=Yl.style)==null?void 0:wy.point)!=null&&Cy.url?(My=Yl.style)==null?void 0:My.point:{url:U$a}),cr.$$.dirty&2&&yn(7,Io=(()=>{var Py,Dy,qy,Xy;const $y=(Dy=(Py=Yl.style)==null?void 0:Py.point)==null?void 0:Dy.width;if(typeof $y=="number")return $y;const xy=(Xy=(qy=Yl.style)==null?void 0:qy.point)==null?void 0:Xy.size;if(typeof xy=="number")return xy;if(xy==="S")return 18;if(xy==="M")return 20;if(xy==="L")return 24;if(xy==="XL")return 28})()),cr.$$.dirty&2&&yn(6,$l=Yl.contentType==="Audio"&&Yl.data.appearance==="plane")},Rm(),[ty,Yl,ny,iy,oy,Co,$l,Io,To,Po,ry,_g,uy,my,hy,ly,sy,cy,fy,vy,dy,Ay]}class oo extends Ce$1{constructor(vn){super(),Te$1(this,vn,He$1,Ee$1,Ft$1,{tag:1,tagPointClickHelper:0,handleMouseEnter:2,handleMouseLeave:3,handleTagPointClick:4,audioInstance:14},Pe)}get tag(){return this.$$.ctx[1]}set tag(vn){this.$$set({tag:vn}),rt$4()}get tagPointClickHelper(){return this.$$.ctx[0]}set tagPointClickHelper(vn){this.$$set({tagPointClickHelper:vn}),rt$4()}get handleMouseEnter(){return this.$$.ctx[2]}set handleMouseEnter(vn){this.$$set({handleMouseEnter:vn}),rt$4()}get handleMouseLeave(){return this.$$.ctx[3]}set handleMouseLeave(vn){this.$$set({handleMouseLeave:vn}),rt$4()}get handleTagPointClick(){return this.$$.ctx[4]}set handleTagPointClick(vn){this.$$set({handleTagPointClick:vn}),rt$4()}get audioInstance(){return this.$$.ctx[14]}set audioInstance(vn){this.$$set({audioInstance:vn}),rt$4()}}const A$7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfklEQVRYCe2Yu2tVQRCHb1QQFQRBKzEkooJoISL+ATYW/kXBSrBKLxZaidaKhSCxs1Asg4qgRhHBB6IkKr4f3yd3vCfHezfnsTGnuD/4ZWf3zO7M7M4+biZ6vd5muBsehydg1/EdB6/3uTBR8vYg9dPQoLqILzg1A++Gc+tD6JevKR/AY/BXB3kSn+bhX5QD8MNLuAnugz87xMv4cg0uw7AAVDDKo3Ar7MJKPMWPWeiELsOoAFS8D00l98laBvEN+6fgO/gPRgWg4iL8Ct3Ya5lKl7B/Bw7FhqGtg8ariAZwYND0X6V7WNOHkVg38svgw1nED/2qyykDIRfLsmy93Falvza1nUQqhaLjZ4Q38HA0UOqQ+0LExoqy2PaDipNkGfp+r9L/PHqPVE6hSgD2fw63w51QR7wN3dw6EqVOhhylQSmL0K3S/zb6ydT5MyJ/qgagvhfcEbjRCogZjzLVFjqWRbnYJ+S3CGegAa+IOgE44DPo/RCOrEZp3r+ClVAnAAd0djy5puBqOD/HuLdgZdQNwIEfQ4/WLdB8zsUXjHUBRoohrowmAWhgAbofRI6VMD3PwSUHrIMmATi+Z7S39B6YYwV8pHlp1UbTADTkhp6GPvjarMIT+l+BjdAmAA1q/FDfsmOZCuVgUu3v0b8IvSwboW0AGvaVuDdh3YCGwXYvK1eyMdoGoGF/xW2D3tTl2U/V59G/CVvBMz0HbjDILujRWgUfUbJPa+RYAZ0w970998Mqp5I/D30gtkauAHTEH0BuyimYSp05vj+EWZAzAB1yP/jc2AFNz2Ign6ibNj4KsyGeutkGLAw0iewdIfx/jkeuz/AxxjMwnoGMM/AbzDbNM/bhiRQAAAAASUVORK5CYII=",g$f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMApb6gupm3s7CprZWRfoeOg4qdenZzLG9ka04KJR4EET04MBlfDzTkzgAAAMpJREFUOMvd0dsSgiAQBuA1o7KMTJRUEE+9/zOGjhmjIHvdtyizM1zAv/C3lOS8BjxZlNpbAhJ/zTig1PkCdS1RZotSgF/FDBXiAXcT8z6jyZLp5PfPGthXJCsF7GrpRgs7BvrcoAM4qexhkSl3orGVM1t5c5COEVPiQIU9UZISvXRNi6S/3pptF87S8dNl9p1lxCQIw2CsadfMnmwHzoJdbJNo5LHKto6uHlENBhVfvGJlJnpGMLLtTyg9zPj5iHLhoAmeHw9YORcf/XMbuOSlzkgAAAAASUVORK5CYII=",B$9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACtUlEQVRYCcWXzUtWQRSHb1ZWL1FYIH2AkSaEBbkMsTYFQVCbdkVQ7Vr3L/RXRQURIrVopxAuBEmIwCBqkfZBz2/0yLV35oz39X4c+HnHuXPOM2c+ztWi6MZ6Q91wi/GuwLe6SPgy0NdtZzwN9LmyPaAfLZg4j9A9tB+1Ah6D8wyNC2jWdMZ3AT1Ahwxoz6bAIwCeoisoyoh22qwGfF7F7zE66vnXCe4Buo9m0UEPqnd1gSeJ9QSNKij2C7nwvYLlfxupElWKVWkwwct2ml8eorOlzt9b7cOlvmhzUPA1oinT/6+J4oUCEaWVOquCdU1UfSZQDKCM1V/rHqu4qyAcQSmzRNyDJWcbmAqkfl2Tm0jg3PjaMladvYOOb0GzmTBOlh3nZaAMdU3Ke5nbO4uXG1ekvseTAG+gqmbXKeuXAs9kPeMDLOPsUsfA2le3wMeZodcy1lK7FgMfcz3yL//khxTJPU755pZQS10+jKk4UfB6cvRmRXJeh1cDZ7yMuwf3wFZAcisTzVjOb7zozjs71QMdLsVdQq8cwJ5feQfhC9FX0Xmk76vdAPmoHdNf+vch+1zGxoQ+D4x/8Q0tIN3rU8j2LhXQTrXFTY0bsgHETJr26yNaQ+eQskkFVMaC6+mtzK7AxAimpV9EZ9AJFIMLqv7cylQCE6/4iT6gDXQBGcgm0UjGcLZthZayn0AqsQamGSZTe8YKbPaDxjukrJW94LYCte4xcftMAB083fuLSAdPcFlth2szXPznV7rn0Uk0hhpdauLvMF07HbzP6BIaRrb3fc/d3GP8K9knRs8h3XkVnT6o+poAEzdcu7c8de3sz+IdE2gKLLhMB+89mkL6L2Qb3jQYVqj3L3nqPxBNIMDbAMMKtVsHTx+c60gHr3XTnr9oK+NydvrYjHYB1iS+l2fSZrv3D/+KTyvCdHWgAAAAAElFTkSuQmCC",R$5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACpklEQVRYCcWYPYwOURSGP38Rv4lEsZoVkq0oNEQjEopNFCQSlUIkJCqFUiLR0ah1SIROgWQLQSNBKUIhGwUNUZD4K/w/b3wnmZ1v7tx3xsw4ybsz994z57nn3J9lR6PRaCUa3BZD3Dw4FaDAs/8DLOYdtHVouDJeis6hbUPClwA7gjSBPWgFeop+oV5NwKIdoHEBTRc7+3iPjJXhb6TnWqTsv6EXqBcrZxwQrfthdBqti84unylwMLbwch7tjI6unjmwOKvRCXQMdXbLOeDvAGXb0Rk0o8a/WtXm0iaLjabNJskWoeVoB9IeeIlijNdm5mS8bBzyRyH0Xt5PoQ2FvkavDjhKXQ48RcdJtKs84LQdcGSs8pZNS7UPaeM1OnYOODIulro8gY10HEf2LxsHXJdxcQJraBxE+1H22DlgBf+J6jKWT1RGWR9F0+pMmQNWQK1l1Rqn4q5i4BBKlt4Bp4I7/Tp2M1WODjjWOFfqqvjq240mquWAVWqt8cTH9Dmm225T2dEB6xutcc6iMlV+gi8wF9xkVy8ApBou2Mk4xVD/x/KgA44Stl3jz0BftwHHxdB2Vz8sQ9V2Mo7v2mR8j4/nI0Dx6QRTqZV1LuPwU/wv6DaaKLEGZQ44Sv33i/TPmNwzXO6ir2lXDxyZaJJ1WWvsFhI4a00yroO+gnQDfcgSxw4OuC5jXSxz6IELDD8HLN+qm+st/VfRGzk0NQesTRM3V5Rbx0SZRrsp19rVxaDvaVxC88XONu9OxrHGjwBcR7XHxJ2EA9Zdexk9doM6fjnwc4JcRPYxcaDySYG1aa4hXQi9WBVYl4H+HJG8Z7uYSRl8k6BXUOtj4k4qwNqpZ9ET98Mu/O4TJPkP7y4AVTF0I61HKvGgJvAn9G5Q6hiW/Z9dH5P6A8K2bfEUA9VoAAAAAElFTkSuQmCC",I$6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAHgAAAAC3G9N3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACfElEQVRYCe2XP2sVQRTFd0VsIgmpTAqx1EAStLAIpowgFmohFkEQ0+UbBEEJCpJvkE4REguVoBY2EaysLJSkSCzFQq1EMQg2z9+Jc2EyziSzb/eZJ7wLlzv37v1zzuy82aRstVr9RVGModfQGfR/kHuAfICulz5ayJzBf4oe9uNdtP4BlktlWb42TDsIKAiJs5gnltBl9jLgV31MfxHQQ0jcxsz6iV2wXgT8rRBHisAhEl+gI2HBPvkbzD0PgV/h/CgBJfEWjmOeoyKznyLQFwD/PgYiSUDJkLiOmYsV/sPYAuDvp+btSkBFkFDx6VSDDsffAF6bmJQcAkNUP0J1tbZcJ6uTr7VZPba1nxuLhblhT12ZVyDwWYkpsaLU8+04b0FX651dk5p/eBPwO67M2IiDsWAYUyNITBCfCp91yH+ZA16zs96AEiGgPzkW0SPyOyhf6D0Lge85M7IJqBkkxjELOY1r5MwBfi23PusIWTM1hsRj/IsWa9g+qwJesysRcGCXsaPoUec3ZT7SSL0rSaUjZJ15C8dYz6NNfaX1tZ1n9z9gK0lbBDQBErpapytNSyc/BPyeV2asvJ0jtN1HAyGho3QC9T9Util+TDVhXDHJZrvgVWxNta4sENDVegPtq1z8p2ALcxcCWVdmbEYtAmoIiVOYq7HmGbElwL/NyEumtH2ErKMAQEJ/ep+0WKZ9Vxe85tQm4MCuYIfRQefvZb6SoJracqB2Bxqwk7oGBUg2R1dcDen1pPZvwB/PURrHP+fHIuvVJo6O9W2UgJq638Mky34b4uxP7CvAR/81DHKz3cYJ2GSI6Gs94Pxv2E9NHRub0bO9HejtQFH8BvWooa9jGY/wAAAAAElFTkSuQmCC",C$3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAMAAABdem3zAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAK3RSTlMA/Pfx6+XZ39TIwry2sJ+qpY3Ok4jNgpl8dnEGmEUfDi5hOycxmn5YGGhjcHcwqwAAAMZJREFUOMvd0e0OgiAUgGEqs9IiLdNCRQS/6v4vMGrNofJxfvfIzuZ2fugL+ls5ZYwiOPEk0ktA95vHD4Pt0/uIgr6fpCOSI7c+UfSAH4gnGtd+lVwnkgrZkSzLCnmK75QPse+XeKG0FsXRAqaWovFZIza3rU9atWmfHQ2YoWgUGkT6tl1g1GmLHiw0bYfgcrvI8xlyyqG+BwOaw3srvCjqO8zaCn/n4IvJFYdbp1C98NQDSJWiG5CxLffWIB5HUsXbFVjLqzcmgh9KFWWqZgAAAABJRU5ErkJggg==",m$c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACiElEQVRYCcWYsUscQRSH74LaBE60MU2wsBALBQsbTSuEFCkCKmghYmUjdmohiIUpU6WxSZEQQrqkjZA/IEXESksREbEQBRFEOL+nOzK3O7NvvNudG/g5s29m3je/mbnz2EqlDaVer9detIEryOF2geejG2abJ9BdVDDASXQeDQyoC22hS3SDyncMZBDtInH6BC71cgFa4Cx/o6H0mXakA0U8A3xFno9oHHW5chbuGOgkoJ9ozAU0scIcA6yRdAW9Q06XBip1IWCgI+RaRa8lKaX+WPn/tgQGKM7m0BRSXdrLaBoMtJ9Ey2jATpi0q45YQ6gpMFC5QLPoZUO2Zzw8CwxQLtAikjPN29rizhjoKLAZ1IO00vpWAxRnH5B8LqWtugkZk7vVQOUCCbQPmaK6YaA6xgsGKuf4HqXPMsSxWaS3dn5lAh1kxlvPLNUN89TFOcFMfOOBhobVxWXAybnKx8ZXVDdMVMdkwEzq9hGTuOpGmf/Q7QJr81Q3JFAX5wJfauSAfnVxLvApiW9ykqtumKuOyYCr1eotE//mgEO6mnJcAX5I9j8egprUM68hnHFseoH/p/0VXZhYUqvbyDh1jBcsEOBHVJ/RnjwXWXLBApIzRz9ofkPXEgso6nGoYANJtn6b5wMTy6lb2+p0YuBX6BPx70huv68U59gmAJcbv4mO7bjVLtaxldhcvHViv+x4aDv4jF0JcS4X7wt9a+jMGlPOVluAhybwfRpLaDfpU7daHZAkCq74fy6/uTdQL+pE8tMprc6WtpqEmZJcvGk6/mU6YwVwv4AO0QlqeCNQ+hoAOl9FlA4WAPD4L19sZywg7uumFDz+CzazAJzvmHbUGvBEVKCBAa7dA6h+CDnUpjBPAAAAAElFTkSuQmCC",E$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAwCAYAAAAGlsrkAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMAAAAACmbYh+AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoZXuEHAAACXElEQVRYCcWYQSgFQRjHdyUlRU5ykCMOxMHJSXlnV4nk7OTISRw8N7koJSeKg+Ig5R3l4kBOHF8u5KD3IoVa/692XtPXzOz3Ztfu1jQz35v5ft//2++1uxNEUdQZFHC1gDlcADcg8EIR4ACp/kWbyB0eg9/Ql3KFx+Av9DW0dbS2XAJgYFJeQRv4bzgVF7+GYDgHfJH/kOU8JMVw+IP2bWg3sK2EYfiCPtPLpFgHjGNyguAyL7wkxXomLhDENtTX9ch8x0mKyW8UO59Cvwv1I/E8VScBhxqhB+MyFR5aqr+dBKxxG8NpjDYB729YmhxIwCrV3HUfDGuAexWeBKynmsMp3bOAL6M19XiVgG2K9SAGMVkFfEw3usYSsEux7rsDkznAZ9ASC08C1p1LxqNYtAS4s/AkYEmq+ZpuwOddqZeAJSptt6MEuPFJJwHbnEoCojWTpnsuAfM0moCuNe3Y0Ms3ScBpFROzywfsUqP8NR2cRLFy7uqTgqvxzRKwRI1rTR3P8KoPOEkN98nn19xA86wU24K7hNonE7jVZPSw8VS/w8epKcXKtwRsU6N8UK+vucecoPTWar0kYK7G5IzWfKIdA3hnWsBtErCuhu9X80cM9gEVv4FKwC7FlM4jAK9UBNJeArb5esYPO4BWbQtcdgnYlOozOD0E1FlAacH6/ldMtgB80I0+Y4lidY8rAGT2CSMBfwC44VNArkwkgW+x+V8+U21gKpoyVB64ok71G96H6NRHnYHkdhShjpsUOPfDl8KOmwo5YNtLVSS+m1FY+aulYAFu6rvWVyDf9wc6+wpavsNbLQAAAABJRU5ErkJggg==";function T$6(cr){Qt(cr,"svelte-16evpcg",".tag-popover-arrow-wrapper.svelte-16evpcg{position:absolute;transform-origin:center;background-position:center;background-repeat:no-repeat;background-size:100% 100%}.tag-popover-arrow-top.svelte-16evpcg{width:1rem;height:0.625rem;top:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-bottom.svelte-16evpcg{width:1rem;height:0.625rem;bottom:0.5rem;left:50%;transform:translateX(-50%)}.tag-popover-arrow-left.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;left:0.5rem;transform:translateY(-50%)}.tag-popover-arrow-right.svelte-16evpcg{width:0.625rem;height:1rem;top:50%;right:0.5rem;transform:translateY(-50%)}")}function l$f(cr){let vn,yn,Rn;return{c(){vn=K$g("div"),te$4(vn,"class",yn="tag-popover-arrow-wrapper tag-popover-arrow-"+cr[0]+" theme-"+cr[2]+" svelte-16evpcg"),te$4(vn,"style",Rn=`background-image: url(${cr[3]})`)},m(Bn,Co){Nt(Bn,vn,Co)},p(Bn,Co){Co&5&&yn!==(yn="tag-popover-arrow-wrapper tag-popover-arrow-"+Bn[0]+" theme-"+Bn[2]+" svelte-16evpcg")&&te$4(vn,"class",yn),Co&8&&Rn!==(Rn=`background-image: url(${Bn[3]})`)&&te$4(vn,"style",Rn)},d(Bn){Bn&&J$h(vn)}}}function B$8(cr){let vn,yn=cr[1]&&l$f(cr);return{c(){yn&&yn.c(),vn=Yt()},m(Rn,Bn){yn&&yn.m(Rn,Bn),Nt(Rn,vn,Bn)},p(Rn,[Bn]){Rn[1]?yn?yn.p(Rn,Bn):(yn=l$f(Rn),yn.c(),yn.m(vn.parentNode,vn)):yn&&(yn.d(1),yn=null)},i:N$f,o:N$f,d(Rn){yn&&yn.d(Rn),Rn&&J$h(vn)}}}function R$4(cr,vn,yn){let Rn,{direction:Bn="bottom"}=vn,{show:Co=!0}=vn,{theme:Po="dark"}=vn;return cr.$$set=To=>{"direction"in To&&yn(0,Bn=To.direction),"show"in To&&yn(1,Co=To.show),"theme"in To&&yn(2,Po=To.theme)},cr.$$.update=()=>{cr.$$.dirty&5&&yn(3,Rn=(()=>{switch(Po){case"dark":switch(Bn){case"top":return g$f;case"bottom":return A$7;case"left":return B$9;case"right":return R$5}case"light":switch(Bn){case"top":return C$3;case"bottom":return I$6;case"left":return m$c;case"right":return E$a}}})())},[Bn,Co,Po,Rn]}class q$6 extends Ce$1{constructor(vn){super(),Te$1(this,vn,R$4,B$8,Ft$1,{direction:0,show:1,theme:2},T$6)}}function k$5(cr){Qt(cr,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function L$7(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl;return{c(){vn=K$g("div"),yn=Mt("svg"),Rn=Mt("defs"),Bn=Mt("linearGradient"),Co=Mt("stop"),Po=Mt("stop"),To=Mt("linearGradient"),Io=Mt("stop"),$l=Mt("stop"),Wl=Mt("path"),te$4(Co,"stop-color",cr[1]),te$4(Co,"offset","0%"),te$4(Po,"stop-color",cr[1]),te$4(Po,"stop-opacity",".5"),te$4(Po,"offset","100%"),te$4(Bn,"x1","53.2804066%"),te$4(Bn,"y1","100%"),te$4(Bn,"x2","64.4764442%"),te$4(Bn,"y2","2.52981206%"),te$4(Bn,"id","video-icon-gradient-a"),te$4(Io,"stop-color",cr[1]),te$4(Io,"offset","0%"),te$4($l,"stop-color",cr[1]),te$4($l,"stop-opacity","0"),te$4($l,"offset","100%"),te$4(To,"x1","50%"),te$4(To,"y1","-5.89066117%"),te$4(To,"x2","60.3018289%"),te$4(To,"y2","32.0415872%"),te$4(To,"id","video-icon-gradient-b"),te$4(Wl,"d","M8.0883645,5.35 C8.27319183,5.35 8.45426937,5.40368245 8.61098984,5.50477659 L20.4341152,13.1314044 C20.6662958,13.2811749 20.8173539,13.5140616 20.8743923,13.7691613 C20.9300733,14.0181899 20.8962437,14.2885953 20.7601668,14.5243865 L8.61098984,22.4950731 C8.38014238,22.6439836 8.11267156,22.6823641 7.86680489,22.6238045 C7.62023287,22.5650769 7.39563144,22.408984 7.25097187,22.1700998 C7.15226844,22.0071054 7.1,21.8187509 7.1,21.6265526 L7.1,6.37329702 C7.1,6.09035119 7.2108925,5.83405961 7.39059316,5.64859123 C7.56916841,5.46428435 7.81578724,5.35 8.0883645,5.35 Z"),te$4(Wl,"fill","url(#video-icon-gradient-a)"),te$4(Wl,"fill-rule","nonzero"),te$4(Wl,"stroke","url(#video-icon-gradient-b)"),te$4(Wl,"stroke-width",".2"),te$4(yn,"xmlns","http://www.w3.org/2000/svg"),te$4(yn,"viewBox","0 0 28 28"),te$4(yn,"width",cr[0]),te$4(yn,"height",cr[0]),te$4(vn,"class","icon-container svelte-1d6rvbz"),ne$5(vn,"--bg-color",cr[2])},m(Xl,Yl){Nt(Xl,vn,Yl),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Bn,Co),pt$1(Bn,Po),pt$1(Rn,To),pt$1(To,Io),pt$1(To,$l),pt$1(yn,Wl)},p(Xl,[Yl]){Yl&2&&te$4(Co,"stop-color",Xl[1]),Yl&2&&te$4(Po,"stop-color",Xl[1]),Yl&2&&te$4(Io,"stop-color",Xl[1]),Yl&2&&te$4($l,"stop-color",Xl[1]),Yl&1&&te$4(yn,"width",Xl[0]),Yl&1&&te$4(yn,"height",Xl[0]),Yl&4&&ne$5(vn,"--bg-color",Xl[2])},i:N$f,o:N$f,d(Xl){Xl&&J$h(vn)}}}function j$a(cr,vn,yn){let{size:Rn="28"}=vn,{color:Bn="#ffffff"}=vn,{bgColor:Co="#0000004d"}=vn;return cr.$$set=Po=>{"size"in Po&&yn(0,Rn=Po.size),"color"in Po&&yn(1,Bn=Po.color),"bgColor"in Po&&yn(2,Co=Po.bgColor)},[Rn,Bn,Co]}class B$7 extends Ce$1{constructor(vn){super(),Te$1(this,vn,j$a,L$7,Ft$1,{size:0,color:1,bgColor:2},k$5)}}function j$9(cr){Qt(cr,"svelte-1d6rvbz",".icon-container.svelte-1d6rvbz{width:3.25rem;height:3.25rem;background-color:var(--bg-color);border-radius:100%;display:flex;align-items:center;justify-content:center;z-index:2}")}function q$5(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry;return{c(){vn=K$g("div"),yn=Mt("svg"),Rn=Mt("defs"),Bn=Mt("linearGradient"),Co=Mt("stop"),Po=Mt("stop"),To=Mt("linearGradient"),Io=Mt("stop"),$l=Mt("stop"),Wl=Mt("linearGradient"),Xl=Mt("stop"),Yl=Mt("stop"),Zl=Mt("g"),ey=Mt("path"),Rm=Mt("path"),ry=Mt("path"),te$4(Co,"stop-color","#FFF"),te$4(Co,"offset","0%"),te$4(Po,"stop-color","#FFF"),te$4(Po,"stop-opacity",".5"),te$4(Po,"offset","100%"),te$4(Bn,"x1","54.417371%"),te$4(Bn,"y1","106.742364%"),te$4(Bn,"x2","72.619444%"),te$4(Bn,"y2","8.15444328%"),te$4(Bn,"id","xmfpi7cnc__sgsykm5x9a"),te$4(Io,"stop-color","#FFF"),te$4(Io,"offset","0%"),te$4($l,"stop-color","#FFF"),te$4($l,"stop-opacity","0"),te$4($l,"offset","100%"),te$4(To,"x1","50%"),te$4(To,"y1",".73169217%"),te$4(To,"x2","66.0966077%"),te$4(To,"y2","34.1694374%"),te$4(To,"id","xmfpi7cnc__tjqs3iy6kb"),te$4(Xl,"stop-color","#FFF"),te$4(Xl,"offset","0%"),te$4(Yl,"stop-color","#FFF"),te$4(Yl,"stop-opacity",".5"),te$4(Yl,"offset","100%"),te$4(Wl,"x1","55.1256353%"),te$4(Wl,"y1","273.650936%"),te$4(Wl,"x2","55.1256353%"),te$4(Wl,"y2","81.7206937%"),te$4(Wl,"id","xmfpi7cnc__rs5hxavsyc"),te$4(ey,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M4.9603418,4.9 C5.2193418,4.9 5.4643418,4.837 5.6883418,4.704 C6.1293418,4.445 6.4093418,3.976 6.4093418,3.444 C6.4093418,3.003 6.2203418,2.611 5.9053418,2.359 C6.1643418,2.1 6.3393418,1.729 6.3393418,1.337 C6.3393418,1.092 6.2763418,0.861 6.1573418,0.658 C5.9053418,0.245 5.4643418,0 4.9603418,0 C4.7223418,0 4.4983418,0.056 4.2953418,0.175 C3.8753418,0.413 3.6163418,0.84 3.6163418,1.337 L3.6163418,1.372 L4.3373418,1.372 L4.3373418,1.337 C4.3373418,1.022 4.6313418,0.721 4.9603418,0.721 C5.3173418,0.721 5.6113418,1.008 5.6113418,1.337 C5.6113418,1.708 5.3243418,1.995 4.9603418,1.995 L4.8203418,1.995 L4.8203418,2.723 L4.9603418,2.723 C5.3593418,2.723 5.6883418,3.045 5.6883418,3.444 C5.6883418,3.843 5.3593418,4.179 4.9603418,4.179 C4.5613418,4.179 4.2323418,3.843 4.2323418,3.444 L4.2323418,3.339 L3.5043418,3.339 L3.5043418,3.444 C3.5043418,3.71 3.5673418,3.955 3.7003418,4.172 C3.9593418,4.62 4.4283418,4.9 4.9603418,4.9 Z M8.6073418,4.9 C8.8803418,4.9 9.1253418,4.83 9.3563418,4.697 C9.8043418,4.424 10.0983418,3.934 10.0983418,3.395 C10.0983418,3.122 10.0283418,2.877 9.8953418,2.646 C9.6223418,2.198 9.1463418,1.904 8.6073418,1.904 C8.5303418,1.904 8.4743418,1.904 8.4393418,1.911 L9.3143418,0 L8.5093418,0 L7.2353418,2.793 C7.1443418,2.982 7.1023418,3.185 7.1023418,3.395 C7.1023418,3.668 7.1723418,3.92 7.3053418,4.151 C7.5783418,4.606 8.0543418,4.9 8.6073418,4.9 Z M8.6073418,4.158 C8.1803418,4.158 7.8443418,3.822 7.8443418,3.395 C7.8443418,2.975 8.1873418,2.625 8.6073418,2.625 C9.0273418,2.625 9.3773418,2.975 9.3773418,3.395 C9.3773418,3.815 9.0273418,4.158 8.6073418,4.158 Z M12.2613418,4.907 C12.7653418,4.907 13.2133418,4.634 13.4653418,4.207 C13.5913418,3.997 13.6543418,3.766 13.6543418,3.514 L13.6543418,3.514 L13.6543418,1.428 C13.6543418,0.917 13.3813418,0.448 12.9613418,0.189 C12.7443418,0.063 12.5133418,0 12.2613418,0 C11.7503418,0 11.2813418,0.273 11.0293418,0.714 C10.8963418,0.931 10.8333418,1.169 10.8333418,1.428 L10.8333418,1.428 L10.8333418,3.514 C10.8333418,4.018 11.1063418,4.466 11.5473418,4.718 C11.7643418,4.844 12.0023418,4.907 12.2613418,4.907 Z M12.2613418,4.186 C11.8903418,4.186 11.5683418,3.885 11.5683418,3.514 L11.5683418,3.514 L11.5683418,1.428 C11.5683418,1.029 11.8763418,0.735 12.2613418,0.735 C12.6323418,0.735 12.9123418,1.029 12.9123418,1.428 L12.9123418,1.428 L12.9123418,3.514 C12.9123418,3.899 12.6323418,4.186 12.2613418,4.186 Z M15.4753809,2.07333984 C15.7488184,2.07333984 15.9886458,1.97478841 16.1948633,1.77768555 C16.4010807,1.58058268 16.5041895,1.33391927 16.5041895,1.03769531 C16.5041895,0.750585938 16.4050684,0.507340495 16.2068262,0.307958984 C16.008584,0.108577474 15.7647689,0.00888671875 15.4753809,0.00888671875 C15.1928288,0.00888671875 14.9495833,0.109147135 14.7456445,0.309667969 C14.5417057,0.510188802 14.4397363,0.756282552 14.4397363,1.04794922 C14.4397363,1.32138672 14.5365788,1.56064453 14.7302637,1.76572266 C14.9239486,1.97080078 15.172321,2.07333984 15.4753809,2.07333984 Z M15.4753809,1.70078125 C15.2930892,1.70078125 15.137002,1.63583984 15.0071191,1.50595703 C14.8772363,1.37607422 14.8122949,1.22226563 14.8122949,1.04453125 C14.8122949,0.859960938 14.877806,0.703304036 15.0088281,0.574560547 C15.1398503,0.445817057 15.2953678,0.381445313 15.4753809,0.381445313 C15.6553939,0.381445313 15.8097721,0.446386719 15.9385156,0.576269531 C16.0672591,0.706152344 16.1316309,0.859960938 16.1316309,1.03769531 C16.1316309,1.22226563 16.0661198,1.37892253 15.9350977,1.50766602 C15.8040755,1.63640951 15.6508366,1.70078125 15.4753809,1.70078125 Z"),te$4(ey,"fill","url(#xmfpi7cnc__sgsykm5x9a)"),te$4(ey,"transform","translate(3 3.1)"),te$4(Rm,"d","M18,5.4 L18,13.4 C18,15.3329966 13.9705627,16.9 9,16.9 C4.02943725,16.9 0,15.3329966 0,13.4 L0,5.4 C0,7.33299662 4.02943725,8.9 9,8.9 C13.8670094,8.9 17.8316983,7.39760831 17.9947813,5.52032488 L18,5.4 Z M17.8,6.499 L17.7806846,6.52607583 C16.6077599,8.0452893 13.108676,9.1 9,9.1 C4.87821133,9.1 1.38089175,8.04047836 0.214303539,6.51942435 L0.2,6.5 L0.2,13.4 C0.2,15.1332693 3.96631253,16.6348245 8.69056715,16.6979358 L9,16.7 C13.8681548,16.7 17.8,15.1709491 17.8,13.4 L17.8,6.499 Z M12.2613418,0 C12.5133418,0 12.7443418,0.063 12.9613418,0.189 C13.3813418,0.448 13.6543418,0.917 13.6543418,1.428 L13.6543418,3.514 L13.6467818,3.66268 C13.6266218,3.85756 13.5661418,4.039 13.4653418,4.207 C13.2133418,4.634 12.7653418,4.907 12.2613418,4.907 C12.0023418,4.907 11.7643418,4.844 11.5473418,4.718 C11.1063418,4.466 10.8333418,4.018 10.8333418,3.514 L10.8333418,1.428 L10.8409578,1.27512 C10.8613418,1.07464 10.9229418,0.8876 11.0293418,0.714 C11.2813418,0.273 11.7503418,0 12.2613418,0 Z M9.3143418,0 L8.4393418,1.911 C8.4743418,1.904 8.5303418,1.904 8.6073418,1.904 C9.1463418,1.904 9.6223418,2.198 9.8953418,2.646 C10.0283418,2.877 10.0983418,3.122 10.0983418,3.395 C10.0983418,3.934 9.8043418,4.424 9.3563418,4.697 C9.1253418,4.83 8.8803418,4.9 8.6073418,4.9 C8.0543418,4.9 7.5783418,4.606 7.3053418,4.151 C7.1723418,3.92 7.1023418,3.668 7.1023418,3.395 C7.1023418,3.185 7.1443418,2.982 7.2353418,2.793 L8.5093418,0 L9.3143418,0 Z M4.9603418,0 C5.4643418,0 5.9053418,0.245 6.1573418,0.658 C6.2763418,0.861 6.3393418,1.092 6.3393418,1.337 C6.3393418,1.729 6.1643418,2.1 5.9053418,2.359 C6.2203418,2.611 6.4093418,3.003 6.4093418,3.444 C6.4093418,3.976 6.1293418,4.445 5.6883418,4.704 C5.4643418,4.837 5.2193418,4.9 4.9603418,4.9 C4.4283418,4.9 3.9593418,4.62 3.7003418,4.172 C3.5673418,3.955 3.5043418,3.71 3.5043418,3.444 L3.5043418,3.339 L4.2323418,3.339 L4.2323418,3.444 C4.2323418,3.843 4.5613418,4.179 4.9603418,4.179 C5.3593418,4.179 5.6883418,3.843 5.6883418,3.444 C5.6883418,3.045 5.3593418,2.723 4.9603418,2.723 L4.8203418,2.723 L4.8203418,1.995 L4.9603418,1.995 C5.3243418,1.995 5.6113418,1.708 5.6113418,1.337 C5.6113418,1.008 5.3173418,0.721 4.9603418,0.721 C4.6313418,0.721 4.3373418,1.022 4.3373418,1.337 L4.3373418,1.372 L3.6163418,1.372 L3.6163418,1.337 C3.6163418,0.84 3.8753418,0.413 4.2953418,0.175 C4.4983418,0.056 4.7223418,0 4.9603418,0 Z M12.2613418,0.2 C11.8228535,0.2 11.4197491,0.433900098 11.199862,0.818512412 C11.0880596,1.00092699 11.0333418,1.20205175 11.0333418,1.428 L11.0333418,3.514 C11.0333418,3.94076817 11.2630074,4.32517296 11.6477689,4.54504221 C11.8340054,4.65317955 12.0373271,4.707 12.2613418,4.707 C12.685768,4.707 13.0724302,4.4792625 13.2938432,4.10410085 C13.4010506,3.92542185 13.4543418,3.73002084 13.4543418,3.514 L13.4543418,1.428 C13.4543418,0.993663172 13.2236099,0.585702454 12.8609147,0.361957789 C12.673578,0.253181671 12.4771013,0.2 12.2613418,0.2 Z M4.9603418,0.2 C4.75293536,0.2 4.56476024,0.248895899 4.39394431,0.349004437 C4.11167513,0.508956972 3.91907748,0.764507622 3.84741774,1.06716925 L3.829,1.171 L4.157,1.171 L4.1635929,1.14325273 C4.24904453,0.829489942 4.53273472,0.571946496 4.86075855,0.527713496 L4.9603418,0.521 C5.42264158,0.521 5.8113418,0.89242465 5.8113418,1.337 C5.8113418,1.78012728 5.4916909,2.13625035 5.06824166,2.18841646 L5.02,2.191 L5.02,2.526 L5.06813812,2.52919506 C5.49271718,2.57829524 5.83232975,2.91371045 5.88206553,3.33657664 L5.8883418,3.444 C5.8883418,3.95419336 5.46908818,4.379 4.9603418,4.379 C4.48793444,4.379 4.09269177,4.01271264 4.03863877,3.55189651 L4.037,3.539 L3.709,3.539 L3.71100539,3.58140766 C3.72435814,3.71571552 3.75785509,3.84083114 3.8121867,3.95771875 L3.87348876,4.07189941 C4.09978468,4.46333019 4.50573915,4.7 4.9603418,4.7 C5.18808795,4.7 5.39698916,4.6443932 5.58705743,4.53154283 C5.97364119,4.30450157 6.2093418,3.89738234 6.2093418,3.444 C6.2093418,3.06849319 6.05147644,2.73203269 5.78040279,2.51517376 L5.60591531,2.37558378 L5.76392044,2.21757864 C5.99772857,1.98377051 6.1393418,1.65985061 6.1393418,1.337 C6.1393418,1.12891147 6.08649325,0.932616859 5.98661394,0.762172929 C5.77036899,0.407771483 5.39348118,0.2 4.9603418,0.2 Z M9.002,0.2 L8.638,0.2 L7.41554213,2.87976312 C7.3587619,2.9976913 7.32347683,3.1241874 7.30938306,3.25833536 L7.3023418,3.395 C7.3023418,3.62951354 7.36137928,3.8474981 7.47684038,4.04810085 C7.72111603,4.45522692 8.1383802,4.7 8.6073418,4.7 C8.83989632,4.7 9.05100342,4.64201988 9.25226776,4.52621184 C9.649754,4.28399367 9.8983418,3.85400396 9.8983418,3.395 C9.8983418,3.16244548 9.84036168,2.95133838 9.72455364,2.75007403 C9.48026964,2.34919774 9.06277079,2.104 8.6073418,2.104 L8.51445661,2.10475811 C8.49442789,2.10527049 8.48389809,2.10604952 8.47856502,2.10711614 L8.0943966,2.18394982 L8.25749731,1.82773787 L9.002,0.2 Z M12.2613418,0.535 C12.7468356,0.535 13.1123418,0.922491584 13.1123418,1.428 L13.1123418,3.514 C13.1123418,4.00744192 12.7448365,4.386 12.2613418,4.386 C11.7777279,4.386 11.3683418,3.99355405 11.3683418,3.514 L11.3683418,1.428 C11.3683418,0.922753743 11.7615956,0.535 12.2613418,0.535 Z M8.6073418,2.425 C9.13779875,2.425 9.5773418,2.86454305 9.5773418,3.395 C9.5773418,3.92471151 9.13856864,4.358 8.6073418,4.358 C8.06988485,4.358 7.6443418,3.93245695 7.6443418,3.395 C7.6443418,2.86377316 8.07763029,2.425 8.6073418,2.425 Z M12.2613418,0.735 C11.8763418,0.735 11.5683418,1.029 11.5683418,1.428 L11.5683418,3.514 L11.5761202,3.61327273 C11.6272922,3.93723967 11.9240691,4.186 12.2613418,4.186 C12.6323418,4.186 12.9123418,3.899 12.9123418,3.514 L12.9123418,1.428 L12.9055416,1.32192712 C12.8606806,0.977975207 12.5986145,0.735 12.2613418,0.735 Z M8.6073418,2.625 C8.1873418,2.625 7.8443418,2.975 7.8443418,3.395 C7.8443418,3.822 8.1803418,4.158 8.6073418,4.158 C9.0273418,4.158 9.3773418,3.815 9.3773418,3.395 C9.3773418,2.975 9.0273418,2.625 8.6073418,2.625 Z M15.4753809,0.00888671875 C15.7647689,0.00888671875 16.008584,0.108577474 16.2068262,0.307958984 C16.4050684,0.507340495 16.5041895,0.750585938 16.5041895,1.03769531 C16.5041895,1.33391927 16.4010807,1.58058268 16.1948633,1.77768555 C15.9886458,1.97478841 15.7488184,2.07333984 15.4753809,2.07333984 C15.172321,2.07333984 14.9239486,1.97080078 14.7302637,1.76572266 C14.5365788,1.56064453 14.4397363,1.32138672 14.4397363,1.04794922 C14.4397363,0.756282552 14.5417057,0.510188802 14.7456445,0.309667969 C14.9495833,0.109147135 15.1928288,0.00888671875 15.4753809,0.00888671875 Z M15.4753809,0.381445313 C15.2953678,0.381445313 15.1398503,0.445817057 15.0088281,0.574560547 C14.877806,0.703304036 14.8122949,0.859960938 14.8122949,1.04453125 C14.8122949,1.22226563 14.8772363,1.37607422 15.0071191,1.50595703 C15.137002,1.63583984 15.2930892,1.70078125 15.4753809,1.70078125 C15.6508366,1.70078125 15.8040755,1.63640951 15.9350977,1.50766602 C16.0661198,1.37892253 16.1316309,1.22226563 16.1316309,1.03769531 C16.1316309,0.859960938 16.0672591,0.706152344 15.9385156,0.576269531 C15.8097721,0.446386719 15.6553939,0.381445313 15.4753809,0.381445313 Z"),te$4(Rm,"fill","url(#xmfpi7cnc__tjqs3iy6kb)"),te$4(Rm,"transform","translate(3 3.1)"),te$4(ry,"d","M3.00030998,2.79110119 L3.00030998,8.00889881 C1.15888197,7.36802147 0,6.43664128 0,5.4 C0,4.36335872 1.15888197,3.43197853 3.00030998,2.79110119 Z M15.0006975,2.79145187 C16.8415407,3.43231826 18,4.36354778 18,5.4 C18,6.43645222 16.8415407,7.36768174 15.0006975,8.00854813 Z"),te$4(ry,"fill","url(#xmfpi7cnc__rs5hxavsyc)"),te$4(ry,"transform","translate(3 3.1)"),te$4(Zl,"fill-rule","nonzero"),te$4(Zl,"fill","none"),te$4(yn,"xmlns","http://www.w3.org/2000/svg"),te$4(yn,"viewBox","0 0 24 24"),te$4(yn,"width",cr[0]),te$4(yn,"height",cr[0]),te$4(vn,"class","icon-container svelte-1d6rvbz"),ne$5(vn,"--bg-color",cr[1])},m(_g,ty){Nt(_g,vn,ty),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Bn,Co),pt$1(Bn,Po),pt$1(Rn,To),pt$1(To,Io),pt$1(To,$l),pt$1(Rn,Wl),pt$1(Wl,Xl),pt$1(Wl,Yl),pt$1(yn,Zl),pt$1(Zl,ey),pt$1(Zl,Rm),pt$1(Zl,ry)},p(_g,[ty]){ty&1&&te$4(yn,"width",_g[0]),ty&1&&te$4(yn,"height",_g[0]),ty&2&&ne$5(vn,"--bg-color",_g[1])},i:N$f,o:N$f,d(_g){_g&&J$h(vn)}}}function B$6(cr,vn,yn){let{size:Rn="28"}=vn,{color:Bn="#ffffff"}=vn,{bgColor:Co="#0000004d"}=vn;return cr.$$set=Po=>{"size"in Po&&yn(0,Rn=Po.size),"color"in Po&&yn(2,Bn=Po.color),"bgColor"in Po&&yn(1,Co=Po.bgColor)},[Rn,Co,Bn]}class P$7 extends Ce$1{constructor(vn){super(),Te$1(this,vn,B$6,q$5,Ft$1,{size:0,color:2,bgColor:1},j$9)}}function u$f(cr){if(!cr)return null;try{if(cr.includes("youtu.be"))return new URL(cr).pathname.substring(1);if(cr.includes("youtube.com")){const Rn=new URL(cr),Bn=new URLSearchParams(Rn.search).get("v");if(Bn)return Bn;if(Rn.pathname.includes("/embed/"))return Rn.pathname.split("/embed/")[1];if(Rn.pathname.includes("/shorts/"))return Rn.pathname.split("/shorts/")[1];if(Rn.pathname.includes("/live/"))return Rn.pathname.split("/live/")[1]}}catch{}const vn=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/|shorts\/|live\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,yn=cr.match(vn);return yn&&yn[1]?yn[1]:null}function i$7(cr){if(!cr)return null;try{if(cr.includes("vimeo.com")){const Rn=new URL(cr).pathname.split("/").filter(Boolean);if(Rn.length>0){const Bn=Rn[0];if(/^\d+$/.test(Bn)&&Bn.length>=5)return Bn}}}catch{}const vn=/^.*vimeo\.com\/[A-Za-z\/]*(\d+)/,yn=cr.match(vn);return yn&&yn[1]&&yn[1].length>=5?yn[1]:null}function o$9(cr){return cr?/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(cr):!1}function m$b(cr){return cr?/^(http(s)?:\/\/)?((w){3}.)?vimeo\.com\/(.+)/.test(cr):!1}function l$e(cr,vn){if(o$9(cr)){const yn=u$f(cr);if(!yn)return"";const Rn=new URL(`https://www.youtube.com/embed/${yn}`);return(vn==null?void 0:vn.start)!==void 0&&Rn.searchParams.set("start",vn.start.toString()),(vn==null?void 0:vn.autoplay)!==void 0&&Rn.searchParams.set("autoplay",vn.autoplay.toString()),Rn.toString()}if(m$b(cr)){const yn=i$7(cr);if(!yn)return"";const Rn=new URL(`https://player.vimeo.com/video/${yn}`);return(vn==null?void 0:vn.autoplay)!==void 0&&Rn.searchParams.set("autoplay",vn.autoplay.toString()),Rn.toString()}return cr}function H$8(cr){Qt(cr,"svelte-16y5k2u",".pano-tag-audio-popup-inline-player-wrapper.svelte-16y5k2u{width:100%;height:1.75rem;background-color:rgba(255, 255, 255, 0.06);border-radius:0.125rem;display:flex;align-items:center;cursor:pointer}.pano-tag-audio-popup-inline-player-icon.svelte-16y5k2u{width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}.pano-tag-audio-popup-inline-player-progress.svelte-16y5k2u{flex-grow:1;display:flex;position:relative;height:100%;align-items:center}.pano-tag-audio-popup-inline-player-progress-bar.svelte-16y5k2u{width:0;height:100%;background:linear-gradient(to right, rgba(238, 238, 238, 0) 0, rgba(216, 216, 216, 0.3) 100%);position:absolute;top:0;left:0;z-index:0}.pano-tag-audio-popup-inline-player-elapsed-time.svelte-16y5k2u{position:absolute;z-index:1;font-weight:500;font-size:0.875rem;color:#ffffff;line-height:1.25rem;padding-left:0.25rem}")}function J$3(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl;return Rn=new X$3({props:{playing:cr[0],width:24}}),{c(){vn=K$g("div"),yn=K$g("div"),Ae$1(Rn.$$.fragment),Bn=Xt$1(),Co=K$g("div"),Po=K$g("div"),To=Xt$1(),Io=K$g("div"),$l=gt$3(cr[1]),te$4(yn,"class","pano-tag-audio-popup-inline-player-icon svelte-16y5k2u"),te$4(Po,"class","pano-tag-audio-popup-inline-player-progress-bar svelte-16y5k2u"),ne$5(Po,"width",cr[2]+"%"),te$4(Io,"class","pano-tag-audio-popup-inline-player-elapsed-time svelte-16y5k2u"),te$4(Co,"class","pano-tag-audio-popup-inline-player-progress svelte-16y5k2u"),te$4(vn,"class","pano-tag-audio-popup-inline-player-wrapper svelte-16y5k2u")},m(Zl,ey){Nt(Zl,vn,ey),pt$1(vn,yn),Dt$1(Rn,yn,null),pt$1(vn,Bn),pt$1(vn,Co),pt$1(Co,Po),pt$1(Co,To),pt$1(Co,Io),pt$1(Io,$l),Wl=!0,Xl||(Yl=lt$2(vn,"click",Zt(function(){L$k(cr[3])&&cr[3].apply(this,arguments)})),Xl=!0)},p(Zl,[ey]){cr=Zl;const Rm={};ey&1&&(Rm.playing=cr[0]),Rn.$set(Rm),(!Wl||ey&4)&&ne$5(Po,"width",cr[2]+"%"),(!Wl||ey&2)&&ee$5($l,cr[1])},i(Zl){Wl||(ot$4(Rn.$$.fragment,Zl),Wl=!0)},o(Zl){$t(Rn.$$.fragment,Zl),Wl=!1},d(Zl){Zl&&J$h(vn),Rt(Rn),Xl=!1,Yl()}}}function K$1(cr,vn,yn){let{playing:Rn=!1}=vn,{elapsedTime:Bn="00:00"}=vn,{progress:Co=0}=vn,{onClick:Po=()=>{}}=vn;return cr.$$set=To=>{"playing"in To&&yn(0,Rn=To.playing),"elapsedTime"in To&&yn(1,Bn=To.elapsedTime),"progress"in To&&yn(2,Co=To.progress),"onClick"in To&&yn(3,Po=To.onClick)},[Rn,Bn,Co,Po]}class U$4 extends Ce$1{constructor(vn){super(),Te$1(this,vn,K$1,J$3,Ft$1,{playing:0,elapsedTime:1,progress:2,onClick:3},H$8)}}function dt(cr){Qt(cr,"svelte-1ysoxja",'@charset "UTF-8";.tag-popup.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{position:absolute;pointer-events:auto;padding:0.625rem 0.625rem 0.625rem 1.125rem;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;transform-origin:center}.tag-popup-top.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-50%, -100%);left:50%}.tag-popup-bottom.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-50%, 0);left:50%}.tag-popup-left.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-100%, -50%);top:50%}.tag-popup-right.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(0, -50%);top:50%}.tag-popup-top-left.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(calc(2.625rem - 100%), -100%)}.tag-popup-top-right.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-2.625rem, -100%)}.tag-popup-bottom-left.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(calc(2.625rem - 100%), 0)}.tag-popup-bottom-right.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-2.625rem, 0)}.tag-popup-left-top.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-100%, -2.625rem)}.tag-popup-left-bottom.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(-100%, calc(2.625rem - 100%))}.tag-popup-right-top.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(0, -2.625rem)}.tag-popup-right-bottom.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{transform:translate(0, calc(2.625rem - 100%))}.tag-popup-content.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{position:relative;pointer-events:auto;cursor:pointer;padding:1.25rem;border-radius:0.375rem;max-width:17.5rem;width:17.5rem;background:rgba(0, 0, 0, 0.7490196078)}.tag-popup-top.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-top-left.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-top-right.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-bottom.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-bottom-left.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-bottom-right.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja{box-shadow:0.03125rem 0 0 0 rgba(255, 255, 255, 0.3), -0.03125rem 0 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-left.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-left-top.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-left-bottom.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.tag-popup-right.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-right-top.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja,.tag-popup-right-bottom.svelte-1ysoxja .tag-popup-content.svelte-1ysoxja.svelte-1ysoxja{box-shadow:0 0.03125rem 0 0 rgba(255, 255, 255, 0.3), 0 -0.03125rem 0 0 rgba(255, 255, 255, 0.3)}.light.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{background:#ffffff}.tag-popup-title.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{margin:0;font-size:1rem;font-weight:600;line-height:1.375rem;letter-spacing:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;color:#ffffff}.light.svelte-1ysoxja .tag-popup-title.svelte-1ysoxja.svelte-1ysoxja{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-description.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{margin:0;font-size:0.875rem;font-weight:400;color:#ffffff;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.light.svelte-1ysoxja .tag-popup-description.svelte-1ysoxja.svelte-1ysoxja{color:rgba(0, 0, 0, 0.8509803922)}.tag-popup-tags.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{display:flex;align-items:center;margin:0;margin-bottom:0}.tag-popup-tags.svelte-1ysoxja .tag-popup-tag.svelte-1ysoxja+.tag-popup-tag.svelte-1ysoxja{margin-left:0.25rem}.tag-popup-tag.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{padding:0.125rem 0.25rem;display:flex;align-items:center;justify-content:center;border-radius:0.25rem;font-size:0.75rem;line-height:1.125rem;letter-spacing:0;border-radius:0.125rem;max-width:7.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tag-popup-tag-primary.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{color:#ffffff;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.light.svelte-1ysoxja .tag-popup-tag-primary.svelte-1ysoxja.svelte-1ysoxja{color:#946700;background-image:linear-gradient(90deg, #ead09a 0%, #e0cca3 100%)}.tag-popup-tag-secondary.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{color:#ffffff;background:rgba(255, 255, 255, 0.1490196078)}.light.svelte-1ysoxja .tag-popup-tag-secondary.svelte-1ysoxja.svelte-1ysoxja{color:rgba(0, 0, 0, 0.5019607843);background:rgba(0, 0, 0, 0.0588235294)}.tag-popup-price.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{font-family:DINAlternate-Bold;font-weight:700;font-size:1.25rem;color:#ae7900;letter-spacing:0;text-align:center;display:flex;justify-content:flex-start;align-items:center;width:100%;margin:0}.tag-popup-media.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{width:15rem;height:10rem;margin:0 auto;overflow:hidden;border-radius:0.25rem;display:flex;align-items:center;justify-content:center;position:relative}.tag-popup-media.svelte-1ysoxja img.svelte-1ysoxja.svelte-1ysoxja{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.tag-popup-media-type.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.tag-popup-media-index.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{position:absolute;right:0.375rem;bottom:0.375rem;padding:0.0625rem 0.25rem;background:rgba(0, 0, 0, 0.5);border-radius:0.125rem;font-weight:bold;font-size:0.75rem;color:#ffffff;letter-spacing:0;line-height:1.125rem}.iframe-overlay.svelte-1ysoxja.svelte-1ysoxja.svelte-1ysoxja{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;z-index:10}.tag-popup-content.svelte-1ysoxja>.svelte-1ysoxja+.svelte-1ysoxja{margin-top:0.5rem}.tag-popup-content.svelte-1ysoxja>.svelte-1ysoxja.svelte-1ysoxja:first-child{margin-top:0 !important}')}const ct=cr=>({}),Fe=cr=>({}),mt=cr=>({}),qe=cr=>({});function Be(cr,vn,yn){const Rn=cr.slice();return Rn[2]=vn[yn],Rn}function Le$1(cr,vn,yn){const Rn=cr.slice();return Rn[2]=vn[yn],Rn}function Ye(cr){let vn,yn;return{c(){vn=K$g("h3"),yn=gt$3(cr[5]),te$4(vn,"class","tag-popup-title svelte-1ysoxja")},m(Rn,Bn){Nt(Rn,vn,Bn),pt$1(vn,yn)},p(Rn,Bn){Bn[0]&32&&ee$5(yn,Rn[5])},d(Rn){Rn&&J$h(vn)}}}function Ee(cr){let vn,yn,Rn=cr[4],Bn=[];for(let To=0;To<Rn.length;To+=1)Bn[To]=Ne$1(Le$1(cr,Rn,To));let Co=cr[13],Po=[];for(let To=0;To<Co.length;To+=1)Po[To]=Ge(Be(cr,Co,To));return{c(){vn=K$g("div");for(let To=0;To<Bn.length;To+=1)Bn[To].c();yn=Xt$1();for(let To=0;To<Po.length;To+=1)Po[To].c();te$4(vn,"class","tag-popup-tags svelte-1ysoxja")},m(To,Io){Nt(To,vn,Io);for(let $l=0;$l<Bn.length;$l+=1)Bn[$l]&&Bn[$l].m(vn,null);pt$1(vn,yn);for(let $l=0;$l<Po.length;$l+=1)Po[$l]&&Po[$l].m(vn,null)},p(To,Io){if(Io[0]&16){Rn=To[4];let $l;for($l=0;$l<Rn.length;$l+=1){const Wl=Le$1(To,Rn,$l);Bn[$l]?Bn[$l].p(Wl,Io):(Bn[$l]=Ne$1(Wl),Bn[$l].c(),Bn[$l].m(vn,yn))}for(;$l<Bn.length;$l+=1)Bn[$l].d(1);Bn.length=Rn.length}if(Io[0]&8192){Co=To[13];let $l;for($l=0;$l<Co.length;$l+=1){const Wl=Be(To,Co,$l);Po[$l]?Po[$l].p(Wl,Io):(Po[$l]=Ge(Wl),Po[$l].c(),Po[$l].m(vn,null))}for(;$l<Po.length;$l+=1)Po[$l].d(1);Po.length=Co.length}},d(To){To&&J$h(vn),Vt(Bn,To),Vt(Po,To)}}}function Ne$1(cr){let vn,yn=cr[2]+"",Rn;return{c(){vn=K$g("div"),Rn=gt$3(yn),te$4(vn,"class","tag-popup-tag tag-popup-tag-primary svelte-1ysoxja")},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co[0]&16&&yn!==(yn=Bn[2]+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function Ge(cr){let vn,yn=cr[2]+"",Rn;return{c(){vn=K$g("div"),Rn=gt$3(yn),te$4(vn,"class","tag-popup-tag tag-popup-tag-secondary svelte-1ysoxja")},m(Bn,Co){Nt(Bn,vn,Co),pt$1(vn,Rn)},p(Bn,Co){Co[0]&8192&&yn!==(yn=Bn[2]+"")&&ee$5(Rn,yn)},d(Bn){Bn&&J$h(vn)}}}function gt(cr){let vn,yn,Rn,Bn,Co,Po,To,Io;Po=new B$7({});let $l=cr[15]>1&&He(cr);return{c(){vn=K$g("div"),yn=K$g("video"),Bn=Xt$1(),Co=K$g("div"),Ae$1(Po.$$.fragment),To=Xt$1(),$l&&$l.c(),Wt$1(yn.src,Rn=cr[2].data.mediaData[0].url)||te$4(yn,"src",Rn),te$4(yn,"class","tag-popup-video-fallback"),yn.controls=!1,yn.autoplay=!1,yn.muted=!0,yn.loop=!0,te$4(yn,"preload","metadata"),te$4(yn,"disablepictureinpicture",""),yn.playsInline=!0,ne$5(yn,"width","100%"),ne$5(yn,"height","100%"),ne$5(yn,"object-fit","cover"),te$4(Co,"class","tag-popup-media-type svelte-1ysoxja"),te$4(vn,"class","tag-popup-media svelte-1ysoxja")},m(Wl,Xl){Nt(Wl,vn,Xl),pt$1(vn,yn),pt$1(vn,Bn),pt$1(vn,Co),Dt$1(Po,Co,null),pt$1(vn,To),$l&&$l.m(vn,null),Io=!0},p(Wl,Xl){(!Io||Xl[0]&4&&!Wt$1(yn.src,Rn=Wl[2].data.mediaData[0].url))&&te$4(yn,"src",Rn),Wl[15]>1?$l?$l.p(Wl,Xl):($l=He(Wl),$l.c(),$l.m(vn,null)):$l&&($l.d(1),$l=null)},i(Wl){Io||(ot$4(Po.$$.fragment,Wl),Io=!0)},o(Wl){$t(Po.$$.fragment,Wl),Io=!1},d(Wl){Wl&&J$h(vn),Rt(Po),$l&&$l.d()}}}function yt(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l;const Wl=[_t,jt],Xl=[];function Yl(ey,Rm){return ey[7]?0:ey[18]?1:-1}~(Po=Yl(cr))&&(To=Xl[Po]=Wl[Po](cr));let Zl=cr[15]>1&&Je(cr);return{c(){vn=K$g("div"),yn=K$g("img"),Co=Xt$1(),To&&To.c(),Io=Xt$1(),Zl&&Zl.c(),Wt$1(yn.src,Rn=cr[19])||te$4(yn,"src",Rn),te$4(yn,"alt",Bn=cr[5]||""),te$4(yn,"draggable","false"),te$4(yn,"class","svelte-1ysoxja"),te$4(vn,"class","tag-popup-media svelte-1ysoxja")},m(ey,Rm){Nt(ey,vn,Rm),pt$1(vn,yn),pt$1(vn,Co),~Po&&Xl[Po].m(vn,null),pt$1(vn,Io),Zl&&Zl.m(vn,null),$l=!0},p(ey,Rm){(!$l||Rm[0]&524288&&!Wt$1(yn.src,Rn=ey[19]))&&te$4(yn,"src",Rn),(!$l||Rm[0]&32&&Bn!==(Bn=ey[5]||""))&&te$4(yn,"alt",Bn);let ry=Po;Po=Yl(ey),Po!==ry&&(To&&(Lt(),$t(Xl[ry],1,1,()=>{Xl[ry]=null}),Ot$1()),~Po?(To=Xl[Po],To||(To=Xl[Po]=Wl[Po](ey),To.c()),ot$4(To,1),To.m(vn,Io)):To=null),ey[15]>1?Zl?Zl.p(ey,Rm):(Zl=Je(ey),Zl.c(),Zl.m(vn,null)):Zl&&(Zl.d(1),Zl=null)},i(ey){$l||(ot$4(To),$l=!0)},o(ey){$t(To),$l=!1},d(ey){ey&&J$h(vn),~Po&&Xl[Po].d(),Zl&&Zl.d()}}}function vt(cr){let vn,yn,Rn,Bn,Co,Po,To=cr[15]>1&&Ke(cr);return{c(){vn=K$g("div"),yn=K$g("iframe"),Bn=Xt$1(),Co=K$g("div"),Po=Xt$1(),To&&To.c(),te$4(yn,"title",cr[16]),Wt$1(yn.src,Rn=cr[17])||te$4(yn,"src",Rn),te$4(yn,"class","tag-popup-video-iframe"),te$4(yn,"frameborder","0"),te$4(yn,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),te$4(yn,"referrerpolicy","strict-origin-when-cross-origin"),yn.allowFullscreen=!0,ne$5(yn,"width","100%"),ne$5(yn,"height","100%"),ne$5(yn,"position","absolute"),ne$5(yn,"top","0"),ne$5(yn,"left","0"),te$4(Co,"class","iframe-overlay svelte-1ysoxja"),te$4(vn,"class","tag-popup-media svelte-1ysoxja")},m(Io,$l){Nt(Io,vn,$l),pt$1(vn,yn),pt$1(vn,Bn),pt$1(vn,Co),pt$1(vn,Po),To&&To.m(vn,null)},p(Io,$l){$l[0]&65536&&te$4(yn,"title",Io[16]),$l[0]&131072&&!Wt$1(yn.src,Rn=Io[17])&&te$4(yn,"src",Rn),Io[15]>1?To?To.p(Io,$l):(To=Ke(Io),To.c(),To.m(vn,null)):To&&(To.d(1),To=null)},i:N$f,o:N$f,d(Io){Io&&J$h(vn),To&&To.d()}}}function He(cr){let vn,yn,Rn,Bn;return{c(){vn=K$g("div"),yn=gt$3(cr[14]),Rn=gt$3("/"),Bn=gt$3(cr[15]),te$4(vn,"class","tag-popup-media-index svelte-1ysoxja")},m(Co,Po){Nt(Co,vn,Po),pt$1(vn,yn),pt$1(vn,Rn),pt$1(vn,Bn)},p(Co,Po){Po[0]&16384&&ee$5(yn,Co[14]),Po[0]&32768&&ee$5(Bn,Co[15])},d(Co){Co&&J$h(vn)}}}function jt(cr){let vn,yn,Rn;return yn=new P$7({}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","tag-popup-media-type svelte-1ysoxja")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function _t(cr){let vn,yn,Rn;return yn=new B$7({}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","tag-popup-media-type svelte-1ysoxja")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function Je(cr){let vn,yn,Rn,Bn;return{c(){vn=K$g("div"),yn=gt$3(cr[14]),Rn=gt$3("/"),Bn=gt$3(cr[15]),te$4(vn,"class","tag-popup-media-index svelte-1ysoxja")},m(Co,Po){Nt(Co,vn,Po),pt$1(vn,yn),pt$1(vn,Rn),pt$1(vn,Bn)},p(Co,Po){Po[0]&16384&&ee$5(yn,Co[14]),Po[0]&32768&&ee$5(Bn,Co[15])},d(Co){Co&&J$h(vn)}}}function Ke(cr){let vn,yn,Rn,Bn;return{c(){vn=K$g("div"),yn=gt$3(cr[14]),Rn=gt$3("/"),Bn=gt$3(cr[15]),te$4(vn,"class","tag-popup-media-index svelte-1ysoxja")},m(Co,Po){Nt(Co,vn,Po),pt$1(vn,yn),pt$1(vn,Rn),pt$1(vn,Bn)},p(Co,Po){Po[0]&16384&&ee$5(yn,Co[14]),Po[0]&32768&&ee$5(Bn,Co[15])},d(Co){Co&&J$h(vn)}}}function Oe(cr){let vn,yn;return{c(){vn=K$g("div"),yn=gt$3(cr[20]),te$4(vn,"class","tag-popup-description svelte-1ysoxja")},m(Rn,Bn){Nt(Rn,vn,Bn),pt$1(vn,yn)},p(Rn,Bn){Bn[0]&1048576&&ee$5(yn,Rn[20])},d(Rn){Rn&&J$h(vn)}}}function Qe(cr){let vn,yn,Rn;return yn=new U$4({props:{playing:cr[1],progress:cr[9],elapsedTime:cr[10],onClick:cr[22]}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","tag-popup-audio-player-wrapper svelte-1ysoxja")},m(Bn,Co){Nt(Bn,vn,Co),Dt$1(yn,vn,null),Rn=!0},p(Bn,Co){const Po={};Co[0]&2&&(Po.playing=Bn[1]),Co[0]&512&&(Po.progress=Bn[9]),Co[0]&1024&&(Po.elapsedTime=Bn[10]),yn.$set(Po)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Bn&&J$h(vn),Rt(yn)}}}function We(cr){let vn,yn,Rn,Bn,Co=cr[11]&&Xe(cr);return{c(){vn=K$g("div"),Co&&Co.c(),yn=Xt$1(),Rn=K$g("span"),Bn=gt$3(cr[12]),te$4(Rn,"class","tag-popup-price-value"),te$4(vn,"class","tag-popup-price svelte-1ysoxja")},m(Po,To){Nt(Po,vn,To),Co&&Co.m(vn,null),pt$1(vn,yn),pt$1(vn,Rn),pt$1(Rn,Bn)},p(Po,To){Po[11]?Co?Co.p(Po,To):(Co=Xe(Po),Co.c(),Co.m(vn,yn)):Co&&(Co.d(1),Co=null),To[0]&4096&&ee$5(Bn,Po[12])},d(Po){Po&&J$h(vn),Co&&Co.d()}}}function Xe(cr){let vn,yn;return{c(){vn=K$g("span"),yn=gt$3(cr[11]),te$4(vn,"class","tag-popup-price-unit")},m(Rn,Bn){Nt(Rn,vn,Bn),pt$1(vn,yn)},p(Rn,Bn){Bn[0]&2048&&ee$5(yn,Rn[11])},d(Rn){Rn&&J$h(vn)}}}function ht(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm=cr[5]&&Ye(cr),ry=cr[3]&&(cr[4].length>0||cr[13].length>0)&&Ee(cr);const _g=[vt,yt,gt],ty=[];function ny(sy,cy){var fy;return sy[6]&&sy[17]?0:sy[19]?1:sy[7]&&sy[2].data.mediaData&&(fy=sy[2].data.mediaData[0])!=null&&fy.url?2:-1}~(Co=ny(cr))&&(Po=ty[Co]=_g[Co](cr));let iy=cr[20]&&Oe(cr),oy=cr[8]&&Qe(cr),ay=cr[12]&&We(cr);const uy=cr[38].toolbar,hy=Bt(uy,cr,cr[37],qe),my=cr[38].arrow,ly=Bt(my,cr,cr[37],Fe);return{c(){vn=K$g("div"),yn=K$g("div"),Rm&&Rm.c(),Rn=Xt$1(),ry&&ry.c(),Bn=Xt$1(),Po&&Po.c(),To=Xt$1(),iy&&iy.c(),Io=Xt$1(),oy&&oy.c(),$l=Xt$1(),ay&&ay.c(),Wl=Xt$1(),hy&&hy.c(),Xl=Xt$1(),ly&&ly.c(),te$4(yn,"class",Yl="tag-popup-content "+cr[21]+" svelte-1ysoxja"),te$4(vn,"class",Zl="tag-popup tag-popup-"+cr[0]+" svelte-1ysoxja")},m(sy,cy){Nt(sy,vn,cy),pt$1(vn,yn),Rm&&Rm.m(yn,null),pt$1(yn,Rn),ry&&ry.m(yn,null),pt$1(yn,Bn),~Co&&ty[Co].m(yn,null),pt$1(yn,To),iy&&iy.m(yn,null),pt$1(yn,Io),oy&&oy.m(yn,null),pt$1(yn,$l),ay&&ay.m(yn,null),pt$1(yn,Wl),hy&&hy.m(yn,null),pt$1(yn,Xl),ly&&ly.m(yn,null),ey=!0},p(sy,cy){sy[5]?Rm?Rm.p(sy,cy):(Rm=Ye(sy),Rm.c(),Rm.m(yn,Rn)):Rm&&(Rm.d(1),Rm=null),sy[3]&&(sy[4].length>0||sy[13].length>0)?ry?ry.p(sy,cy):(ry=Ee(sy),ry.c(),ry.m(yn,Bn)):ry&&(ry.d(1),ry=null);let fy=Co;Co=ny(sy),Co===fy?~Co&&ty[Co].p(sy,cy):(Po&&(Lt(),$t(ty[fy],1,1,()=>{ty[fy]=null}),Ot$1()),~Co?(Po=ty[Co],Po?Po.p(sy,cy):(Po=ty[Co]=_g[Co](sy),Po.c()),ot$4(Po,1),Po.m(yn,To)):Po=null),sy[20]?iy?iy.p(sy,cy):(iy=Oe(sy),iy.c(),iy.m(yn,Io)):iy&&(iy.d(1),iy=null),sy[8]?oy?(oy.p(sy,cy),cy[0]&256&&ot$4(oy,1)):(oy=Qe(sy),oy.c(),ot$4(oy,1),oy.m(yn,$l)):oy&&(Lt(),$t(oy,1,1,()=>{oy=null}),Ot$1()),sy[12]?ay?ay.p(sy,cy):(ay=We(sy),ay.c(),ay.m(yn,Wl)):ay&&(ay.d(1),ay=null),hy&&hy.p&&(!ey||cy[1]&64)&&It(hy,uy,sy,sy[37],ey?Ht$1(uy,sy[37],cy,mt):Ut(sy[37]),qe),ly&&ly.p&&(!ey||cy[1]&64)&&It(ly,my,sy,sy[37],ey?Ht$1(my,sy[37],cy,ct):Ut(sy[37]),Fe),(!ey||cy[0]&2097152&&Yl!==(Yl="tag-popup-content "+sy[21]+" svelte-1ysoxja"))&&te$4(yn,"class",Yl),(!ey||cy[0]&1&&Zl!==(Zl="tag-popup tag-popup-"+sy[0]+" svelte-1ysoxja"))&&te$4(vn,"class",Zl)},i(sy){ey||(ot$4(Po),ot$4(oy),ot$4(hy,sy),ot$4(ly,sy),ey=!0)},o(sy){$t(Po),$t(oy),$t(hy,sy),$t(ly,sy),ey=!1},d(sy){sy&&J$h(vn),Rm&&Rm.d(),ry&&ry.d(),~Co&&ty[Co].d(),iy&&iy.d(),oy&&oy.d(),ay&&ay.d(),hy&&hy.d(sy),ly&&ly.d(sy)}}}function bt(cr){const vn=Math.floor(cr/60),yn=Math.floor(cr%60);return`${vn.toString().padStart(2,"0")}:${yn.toString().padStart(2,"0")}`}function xt(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry,_g,ty,ny,iy,oy,ay,uy,hy,my,ly,sy,cy,{$$slots:fy={},$$scope:vy}=vn,{tag:dy}=vn,{config:Ay={}}=vn,{theme:gy=void 0}=vn,{placement:wy="right-top"}=vn,{audioInstance:Cy=null}=vn,{audioPlaying:My=!1}=vn,{audioCurrentTime:Py=0}=vn,{audioDuration:Dy=0}=vn,qy=0,Xy="00:00",$y=null,xy=0,Ry=0;function Ly(){return Dy>0?Py/Dy*100:0}function ky(){if(!My||Dy<=0){$y=null;return}const Uy=(Date.now()-xy)/1e3,Qy=Py+Uy,Gy=Math.min(Qy/Dy*100,100)-Ry;Math.abs(Gy)>.05&&(Ry+=Gy*.2),$y=requestAnimationFrame(ky)}function Ey(){if(!Bn)return;const Uy=Ly();Dy>0?(My||(Ry=Uy),yn(9,qy=Ry),yn(10,Xy=bt(Ry/100*Dy)),xy=Date.now()):(Ry=0,yn(9,qy=0),yn(10,Xy="00:00"))}function Iy(){My&&Dy>0?$y||ky():$y&&(cancelAnimationFrame($y),$y=null)}function zy(){Cy&&(Cy.paused?Cy.play():Cy.pause())}return le$1(()=>{$y&&(cancelAnimationFrame($y),$y=null)}),cr.$$set=Uy=>{"tag"in Uy&&yn(2,dy=Uy.tag),"config"in Uy&&yn(23,Ay=Uy.config),"theme"in Uy&&yn(24,gy=Uy.theme),"placement"in Uy&&yn(0,wy=Uy.placement),"audioInstance"in Uy&&yn(25,Cy=Uy.audioInstance),"audioPlaying"in Uy&&yn(1,My=Uy.audioPlaying),"audioCurrentTime"in Uy&&yn(26,Py=Uy.audioCurrentTime),"audioDuration"in Uy&&yn(27,Dy=Uy.audioDuration),"$$scope"in Uy&&yn(37,vy=Uy.$$scope)},cr.$$.update=()=>{var Uy,Qy,Gy,Zy,Ty,Vy;cr.$$.dirty[0]&4&&yn(3,Rn=dy.contentType==="Marketing"),cr.$$.dirty[0]&4&&yn(8,Bn=dy.contentType==="Audio"),cr.$$.dirty[0]&8&&yn(36,Co=Rn?"light":"dark"),cr.$$.dirty[0]&16777220|cr.$$.dirty[1]&32&&yn(21,Po=dy.data.theme!==void 0&&dy.data.theme!==null?dy.data.theme:gy!=null?gy:Co),cr.$$.dirty[0]&4&&yn(35,To=dy.data.title||dy.data.name||""),cr.$$.dirty[0]&4&&yn(34,Io=dy.data.description||dy.data.tooltip||""),cr.$$.dirty[1]&16&&yn(5,$l=To||""),cr.$$.dirty[1]&8&&yn(20,Wl=Io||""),cr.$$.dirty[0]&201326594&&Ey(),cr.$$.dirty[0]&134217730&&Iy(),cr.$$.dirty[0]&268&&yn(33,Xl=(()=>{var Yy,Jy,Hy,i1,u1,p1,g1,v1,h1,l1,o1;if(Bn||Rn)return null;if(dy.data.mediaData&&dy.data.mediaData.length>0){const t1=dy.data.mediaData[0];if(t1.type==="Video"){if(t1.videoCoverUrl)return t1.videoCoverUrl;if(t1.url){const Wy=t1.url.toLowerCase();if(o$9(Wy)){const f1=u$f(Wy);if(f1)return`https://img.youtube.com/vi/${f1}/hqdefault.jpg`}if(m$b(Wy)){const f1=i$7(Wy);if(f1)return`https://vumbnail.com/${f1}.jpg`}return}}if(dy.contentType==="Panorama")return(o1=(g1=(Hy=(Jy=(Yy=dy.data.mediaData)==null?void 0:Yy[0])==null?void 0:Jy.cube)==null?void 0:Hy.front)!=null?g1:(p1=(u1=(i1=dy.data.mediaData)==null?void 0:i1[0])==null?void 0:u1.thumbnail)==null?void 0:p1.split("?")[0])!=null?o1:(l1=(h1=(v1=dy.data.mediaData)==null?void 0:v1[0])==null?void 0:h1.url)==null?void 0:l1.split("?")[0];if(t1.url||t1.thumbnail)return t1.url||t1.thumbnail}return dy.data.imageUrl})()),cr.$$.dirty[0]&8388612|cr.$$.dirty[1]&4&&yn(19,Yl=Ay!=null&&Ay.imageURLTransform&&(Xl!=null&&Xl.includes("realsee-cdn")||Xl!=null&&Xl.includes("ljcdn.com"))?Ay.imageURLTransform(Xl,{width:280,height:280}):Xl||dy.data.mediaUrl||""),cr.$$.dirty[0]&4&&yn(7,Zl=dy.contentType==="Video"||dy.data.mediaType==="video"),cr.$$.dirty[0]&4&&yn(18,ey=dy.contentType==="Panorama"||dy.data.mediaType==="panorama"),cr.$$.dirty[0]&132&&yn(32,Rm=Zl&&dy.data.mediaData&&((Uy=dy.data.mediaData[0])==null?void 0:Uy.url)&&o$9(dy.data.mediaData[0].url)),cr.$$.dirty[0]&132&&yn(31,ry=Zl&&dy.data.mediaData&&((Qy=dy.data.mediaData[0])==null?void 0:Qy.url)&&m$b(dy.data.mediaData[0].url)),cr.$$.dirty[1]&3&&yn(6,_g=Rm||ry),cr.$$.dirty[0]&68&&yn(17,ty=_g&&dy.data.mediaData&&(Gy=dy.data.mediaData[0])!=null&&Gy.url?l$e(dy.data.mediaData[0].url,{autoplay:0}):""),cr.$$.dirty[0]&32|cr.$$.dirty[1]&3&&yn(16,ny=Rm?"YouTube video player":ry?"Vimeo video player":$l),cr.$$.dirty[0]&4&&yn(15,iy=((Zy=dy.data.mediaData)==null?void 0:Zy.length)||0),cr.$$.dirty[0]&12&&yn(30,ay=Rn?dy.data.brandTags||[]:[]),cr.$$.dirty[0]&12&&yn(29,uy=Rn?dy.data.tags||[]:[]),cr.$$.dirty[0]&1073741824&&yn(4,hy=ay.filter(Boolean).slice(0,2)),cr.$$.dirty[0]&16&&yn(28,my=Math.max(0,2-hy.length)),cr.$$.dirty[0]&805306368&&yn(13,ly=my>0?uy.filter(Boolean).slice(0,my):[]),cr.$$.dirty[0]&12&&yn(12,sy=Rn&&((Ty=dy.data.price)==null?void 0:Ty.value)||""),cr.$$.dirty[0]&12&&yn(11,cy=Rn&&((Vy=dy.data.price)==null?void 0:Vy.unit)||"")},yn(14,oy=1),[wy,My,dy,Rn,hy,$l,_g,Zl,Bn,qy,Xy,cy,sy,ly,oy,iy,ny,ty,ey,Yl,Wl,Po,zy,Ay,gy,Cy,Py,Dy,my,uy,ay,ry,Rm,Xl,Io,To,Co,vy,fy]}class zt extends Ce$1{constructor(vn){super(),Te$1(this,vn,xt,ht,Ft$1,{tag:2,config:23,theme:24,placement:0,audioInstance:25,audioPlaying:1,audioCurrentTime:26,audioDuration:27},dt,[-1,-1])}}function q$4(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl;return{c(){vn=Mt("svg"),yn=Mt("defs"),Rn=Mt("linearGradient"),Bn=Mt("stop"),Co=Mt("stop"),To=Mt("linearGradient"),Io=Mt("stop"),$l=Mt("stop"),Xl=Mt("path"),te$4(Bn,"stop-color",cr[1]),te$4(Bn,"offset","0%"),te$4(Co,"stop-color",cr[1]),te$4(Co,"stop-opacity",".5"),te$4(Co,"offset","100%"),te$4(Rn,"id",Po="arrow-right-icon-gradient-"+cr[1]),te$4(Rn,"x1","96.2%"),te$4(Rn,"y1","50%"),te$4(Rn,"x2","0%"),te$4(Rn,"y2","50%"),te$4(Io,"stop-color",cr[1]),te$4(Io,"offset","0%"),te$4($l,"stop-color",cr[1]),te$4($l,"stop-opacity","0"),te$4($l,"offset","100%"),te$4(To,"id",Wl="arrow-right-icon-stroke-"+cr[1]),te$4(To,"x1","50%"),te$4(To,"y1","9.83%"),te$4(To,"x2","41.99%"),te$4(To,"y2","24.46%"),te$4(Xl,"d","M4.84572153,2.14166669 C4.94036186,2.14170036 5.03490004,2.17870347 5.10676798,2.25203341 L9.39516942,6.66308361 C9.48635681,6.75687897 9.53195051,6.87843949 9.53195051,7 C9.53195051,7.12156051 9.48635681,7.24312103 9.39516942,7.33691639 L5.11673708,11.7390017 C5.02118573,11.813978 4.92122439,11.8514005 4.82705048,11.851434 C4.73517505,11.8514667 4.65029153,11.8150862 4.59276829,11.7576692 C4.51856427,11.6593496 4.48179951,11.5564146 4.48176638,11.4595899 C4.48173399,11.3649536 4.51747117,11.2773335 4.58937836,11.2035272 L7.74273899,7.43877755 C7.84906128,7.31184097 7.90222243,7.15592048 7.90222243,7 C7.90222243,6.84407952 7.84906128,6.68815903 7.74273449,6.56121708 L4.54804918,2.74803934 C4.65338339,2.20863952 4.74441906,2.14163065 4.84572153,2.14166669 Z"),te$4(Xl,"fill",Yl=`url(#arrow-right-icon-gradient-${cr[1]})`),te$4(Xl,"fill-rule","nonzero"),te$4(Xl,"stroke",Zl=`url(#arrow-right-icon-stroke-${cr[1]})`),te$4(Xl,"stroke-width",".2"),te$4(vn,"xmlns","http://www.w3.org/2000/svg"),te$4(vn,"viewBox","0 0 14 14"),te$4(vn,"width",cr[0]),te$4(vn,"height",cr[0]),ne$5(vn,"opacity",cr[2])},m(ey,Rm){Nt(ey,vn,Rm),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Rn,Co),pt$1(yn,To),pt$1(To,Io),pt$1(To,$l),pt$1(vn,Xl)},p(ey,[Rm]){Rm&2&&te$4(Bn,"stop-color",ey[1]),Rm&2&&te$4(Co,"stop-color",ey[1]),Rm&2&&Po!==(Po="arrow-right-icon-gradient-"+ey[1])&&te$4(Rn,"id",Po),Rm&2&&te$4(Io,"stop-color",ey[1]),Rm&2&&te$4($l,"stop-color",ey[1]),Rm&2&&Wl!==(Wl="arrow-right-icon-stroke-"+ey[1])&&te$4(To,"id",Wl),Rm&2&&Yl!==(Yl=`url(#arrow-right-icon-gradient-${ey[1]})`)&&te$4(Xl,"fill",Yl),Rm&2&&Zl!==(Zl=`url(#arrow-right-icon-stroke-${ey[1]})`)&&te$4(Xl,"stroke",Zl),Rm&1&&te$4(vn,"width",ey[0]),Rm&1&&te$4(vn,"height",ey[0]),Rm&4&&ne$5(vn,"opacity",ey[2])},i:N$f,o:N$f,d(ey){ey&&J$h(vn)}}}function A$6(cr,vn,yn){let{size:Rn="14"}=vn,{color:Bn="#ffffff"}=vn,{opacity:Co=1}=vn;return cr.$$set=Po=>{"size"in Po&&yn(0,Rn=Po.size),"color"in Po&&yn(1,Bn=Po.color),"opacity"in Po&&yn(2,Co=Po.opacity)},[Rn,Bn,Co]}class I$5 extends Ce$1{constructor(vn){super(),Te$1(this,vn,A$6,q$4,Ft$1,{size:0,color:1,opacity:2})}}function S$8(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl;return{c(){vn=Mt("svg"),yn=Mt("defs"),Rn=Mt("linearGradient"),Bn=Mt("stop"),Co=Mt("stop"),To=Mt("linearGradient"),Io=Mt("stop"),$l=Mt("stop"),Xl=Mt("path"),te$4(Bn,"stop-color",cr[1]),te$4(Bn,"offset","0%"),te$4(Co,"stop-color",cr[1]),te$4(Co,"stop-opacity",".5"),te$4(Co,"offset","100%"),te$4(Rn,"id",Po="share-icon-gradient-"+cr[1]),te$4(Rn,"x1","41.65%"),te$4(Rn,"y1","59.05%"),te$4(Rn,"x2","66.13%"),te$4(Rn,"y2","9.07%"),te$4(Io,"stop-color",cr[1]),te$4(Io,"offset","0%"),te$4($l,"stop-color",cr[1]),te$4($l,"stop-opacity","0"),te$4($l,"offset","100%"),te$4(To,"id",Wl="share-icon-stroke-"+cr[1]),te$4(To,"x1","55.68%"),te$4(To,"y1","2.48%"),te$4(To,"x2","60.83%"),te$4(To,"y2","14.28%"),te$4(Xl,"d","M12.4937515,2.60140991 L12.6834904,2.60248871 C13.307774,2.63121157 13.9222065,2.90874077 14.3642696,3.436433 C14.7794904,3.93278385 14.923342,4.60854408 14.8265514,5.24548738 C14.7279361,5.89144103 14.4428997,6.3527969 14.063774,6.65956953 C13.6079793,7.02837949 13.0189069,7.17403325 12.4632035,7.15562178 C11.7380729,7.13162078 11.0390809,7.42803145 10.5261758,7.9357119 C9.96083448,8.49643643 9.67596892,9.19792997 9.69443632,9.91942004 C9.66449732,10.8859455 9.96309104,11.5807243 10.4796578,12.092029 C11.0239965,12.6296813 11.7402488,12.9101676 12.4817091,12.8884813 C13.0940469,12.8705618 13.7481304,13.0495781 14.2150699,13.5117611 C14.6987029,13.9904677 14.9268415,14.6256711 14.8974895,15.2508921 C14.8684928,15.868544 14.5880857,16.4761837 14.055365,16.9134138 C13.5533941,17.3248246 12.8689122,17.4672624 12.2258037,17.3713572 C11.5727886,17.2736846 11.1063284,16.991503 10.7961882,16.6159844 C10.4239402,16.1652655 10.2768519,15.5827583 10.2954352,15.0332376 C10.3197006,14.3149783 10.0202124,13.6224897 9.50703789,13.1145427 C8.94671715,12.5587885 8.2455275,12.2800717 7.51547371,12.2927077 C7.23521908,12.3053648 6.95603622,12.2673623 6.69423123,12.1827116 C6.1605306,11.9588888 5.9529663,11.8380114 5.77703284,11.66387 C5.40155143,11.2922134 5.1829777,10.8272392 5.11950899,10.3459077 C5.05433663,9.85165608 5.15259721,9.34024891 5.41443015,8.89062791 C5.61688125,8.49864777 5.91421421,8.21950306 6.25529625,8.03627882 C6.64911257,7.8247265 7.1008248,7.74055154 7.53306889,7.75691992 L7.73219905,7.75624362 C8.39290266,7.7280909 9.01896921,7.44343917 9.49037385,6.97683639 C10.0339806,6.43762468 10.3173723,5.72806794 10.2954528,4.99382841 C10.2784266,4.38712951 10.4592448,3.74020534 10.9258673,3.27833603 C11.4093877,2.79921041 12.051472,2.57340998 12.6834904,2.60248871 Z"),te$4(Xl,"fill",Yl=`url(#share-icon-gradient-${cr[1]})`),te$4(Xl,"fill-rule","nonzero"),te$4(Xl,"stroke",Zl=`url(#share-icon-stroke-${cr[1]})`),te$4(Xl,"stroke-width",".2"),te$4(vn,"xmlns","http://www.w3.org/2000/svg"),te$4(vn,"viewBox","0 0 20 20"),te$4(vn,"width",cr[0]),te$4(vn,"height",cr[0]),ne$5(vn,"opacity",cr[2])},m(ey,Rm){Nt(ey,vn,Rm),pt$1(vn,yn),pt$1(yn,Rn),pt$1(Rn,Bn),pt$1(Rn,Co),pt$1(yn,To),pt$1(To,Io),pt$1(To,$l),pt$1(vn,Xl)},p(ey,[Rm]){Rm&2&&te$4(Bn,"stop-color",ey[1]),Rm&2&&te$4(Co,"stop-color",ey[1]),Rm&2&&Po!==(Po="share-icon-gradient-"+ey[1])&&te$4(Rn,"id",Po),Rm&2&&te$4(Io,"stop-color",ey[1]),Rm&2&&te$4($l,"stop-color",ey[1]),Rm&2&&Wl!==(Wl="share-icon-stroke-"+ey[1])&&te$4(To,"id",Wl),Rm&2&&Yl!==(Yl=`url(#share-icon-gradient-${ey[1]})`)&&te$4(Xl,"fill",Yl),Rm&2&&Zl!==(Zl=`url(#share-icon-stroke-${ey[1]})`)&&te$4(Xl,"stroke",Zl),Rm&1&&te$4(vn,"width",ey[0]),Rm&1&&te$4(vn,"height",ey[0]),Rm&4&&ne$5(vn,"opacity",ey[2])},i:N$f,o:N$f,d(ey){ey&&J$h(vn)}}}function q$3(cr,vn,yn){let{size:Rn="20"}=vn,{color:Bn="#ffffff"}=vn,{opacity:Co=1}=vn;return cr.$$set=Po=>{"size"in Po&&yn(0,Rn=Po.size),"color"in Po&&yn(1,Bn=Po.color),"opacity"in Po&&yn(2,Co=Po.opacity)},[Rn,Bn,Co]}class I$4 extends Ce$1{constructor(vn){super(),Te$1(this,vn,q$3,S$8,Ft$1,{size:0,color:1,opacity:2})}}function G$2(cr){Qt(cr,"svelte-18owx9v",".tag-popover-toolbar.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;margin-top:0.75rem;padding-top:0;border-top:none}.tag-popover-toolbar.both-buttons.svelte-18owx9v.svelte-18owx9v{justify-content:space-between}.tag-popover-toolbar.single-button.svelte-18owx9v.svelte-18owx9v{justify-content:flex-end}.tag-popover-toolbar-dark.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:#ffffff}.tag-popover-toolbar-light.svelte-18owx9v .tag-popover-btn.svelte-18owx9v{color:rgba(0, 0, 0, 0.85)}.tag-popover-btn.view-more.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;font-weight:500;font-size:0.875rem;letter-spacing:0;line-height:1.25rem}.tag-popover-btn.share.svelte-18owx9v.svelte-18owx9v{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem}")}function M$8(cr){let vn,yn,Rn,Bn,Co=cr[0].showMore&&S$7(cr),Po=cr[0].showShare&&T$5(cr);return{c(){vn=K$g("div"),Co&&Co.c(),yn=Xt$1(),Po&&Po.c(),te$4(vn,"class",Rn="tag-popover-toolbar tag-popover-toolbar-"+cr[1]+" "+(cr[0].showMore&&cr[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v")},m(To,Io){Nt(To,vn,Io),Co&&Co.m(vn,null),pt$1(vn,yn),Po&&Po.m(vn,null),Bn=!0},p(To,Io){To[0].showMore?Co?(Co.p(To,Io),Io&1&&ot$4(Co,1)):(Co=S$7(To),Co.c(),ot$4(Co,1),Co.m(vn,yn)):Co&&(Lt(),$t(Co,1,1,()=>{Co=null}),Ot$1()),To[0].showShare?Po?(Po.p(To,Io),Io&1&&ot$4(Po,1)):(Po=T$5(To),Po.c(),ot$4(Po,1),Po.m(vn,null)):Po&&(Lt(),$t(Po,1,1,()=>{Po=null}),Ot$1()),(!Bn||Io&3&&Rn!==(Rn="tag-popover-toolbar tag-popover-toolbar-"+To[1]+" "+(To[0].showMore&&To[0].showShare?"both-buttons":"single-button")+" svelte-18owx9v"))&&te$4(vn,"class",Rn)},i(To){Bn||(ot$4(Co),ot$4(Po),Bn=!0)},o(To){$t(Co),$t(Po),Bn=!1},d(To){To&&J$h(vn),Co&&Co.d(),Po&&Po.d()}}}function S$7(cr){let vn,yn,Rn,Bn,Co,Po,To;return Bn=new I$5({props:{size:"14",color:cr[1]==="light"?"#000000":"#ffffff",opacity:cr[1]==="light"?.8:1}}),{c(){vn=K$g("div"),yn=gt$3(cr[2]),Rn=Xt$1(),Ae$1(Bn.$$.fragment),te$4(vn,"class","tag-popover-btn view-more svelte-18owx9v")},m(Io,$l){Nt(Io,vn,$l),pt$1(vn,yn),pt$1(vn,Rn),Dt$1(Bn,vn,null),Co=!0,Po||(To=lt$2(vn,"click",cr[3]),Po=!0)},p(Io,$l){(!Co||$l&4)&&ee$5(yn,Io[2]);const Wl={};$l&2&&(Wl.color=Io[1]==="light"?"#000000":"#ffffff"),$l&2&&(Wl.opacity=Io[1]==="light"?.8:1),Bn.$set(Wl)},i(Io){Co||(ot$4(Bn.$$.fragment,Io),Co=!0)},o(Io){$t(Bn.$$.fragment,Io),Co=!1},d(Io){Io&&J$h(vn),Rt(Bn),Po=!1,To()}}}function T$5(cr){let vn,yn,Rn,Bn,Co;return yn=new I$4({props:{size:"20",color:cr[1]==="light"?"#000000":"#ffffff",opacity:cr[1]==="light"?.8:1}}),{c(){vn=K$g("div"),Ae$1(yn.$$.fragment),te$4(vn,"class","tag-popover-btn share svelte-18owx9v")},m(Po,To){Nt(Po,vn,To),Dt$1(yn,vn,null),Rn=!0,Bn||(Co=lt$2(vn,"click",cr[4]),Bn=!0)},p(Po,To){const Io={};To&2&&(Io.color=Po[1]==="light"?"#000000":"#ffffff"),To&2&&(Io.opacity=Po[1]==="light"?.8:1),yn.$set(Io)},i(Po){Rn||(ot$4(yn.$$.fragment,Po),Rn=!0)},o(Po){$t(yn.$$.fragment,Po),Rn=!1},d(Po){Po&&J$h(vn),Rt(yn),Bn=!1,Co()}}}function H$7(cr){let vn,yn,Rn=(cr[0].showMore||cr[0].showShare)&&M$8(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[0].showMore||Bn[0].showShare?Rn?(Rn.p(Bn,Co),Co&1&&ot$4(Rn,1)):(Rn=M$8(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function J$2(cr,vn,yn){let Rn;const Bn=de$3("hooks");fe$3();let{tag:Co}=vn,{toolbar:Po={showMore:!0,showShare:!0}}=vn,{theme:To="dark"}=vn,{closePopover:Io=void 0}=vn;function $l(Xl){Xl.stopPropagation(),typeof Io=="function"&&Io(),Bn.emit("click",{event:Xl,target:"TagPopoverViewMore",tag:Co})}function Wl(Xl){Xl.stopPropagation(),typeof Io=="function"&&Io(),Bn.emit("click",{event:Xl,target:"TagPopoverShare",tag:Co})}return cr.$$set=Xl=>{"tag"in Xl&&yn(5,Co=Xl.tag),"toolbar"in Xl&&yn(0,Po=Xl.toolbar),"theme"in Xl&&yn(1,To=Xl.theme),"closePopover"in Xl&&yn(6,Io=Xl.closePopover)},cr.$$.update=()=>{cr.$$.dirty&32&&yn(2,Rn=(()=>i$w(Co.data.highlightText)&&Co.data.highlightText.trim()!==""?Co.data.highlightText:i$w(Co.config.popoverConfig.viewMoreText)&&Co.config.popoverConfig.viewMoreText.trim()!==""?Co.config.popoverConfig.viewMoreText:"\u67E5\u770B\u66F4\u591A")())},[Po,To,Rn,$l,Wl,Co,Io]}class it$1 extends Ce$1{constructor(vn){super(),Te$1(this,vn,J$2,H$7,Ft$1,{tag:5,toolbar:0,theme:1,closePopover:6},G$2)}}function k$4(cr){let vn,yn;return vn=new it$1({props:{toolbar:{showMore:cr[7].showMore===void 0?!0:cr[7].showMore,showShare:cr[7].showShare===void 0?!0:cr[7].showShare},theme:cr[2],tag:cr[4],closePopover:cr[8]}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn&128&&(Co.toolbar={showMore:Rn[7].showMore===void 0?!0:Rn[7].showMore,showShare:Rn[7].showShare===void 0?!0:Rn[7].showShare}),Bn&4&&(Co.theme=Rn[2]),Bn&16&&(Co.tag=Rn[4]),Bn&256&&(Co.closePopover=Rn[8]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function E$9(cr){let vn,yn,Rn,Bn;return vn=new q$6({props:{show:cr[0],direction:cr[1],theme:cr[2]}}),Rn=new zt({props:{placement:cr[3],tag:cr[4],config:cr[5],theme:cr[6],audioInstance:cr[9],audioPlaying:cr[10],audioCurrentTime:cr[11],audioDuration:cr[12],$$slots:{toolbar:[k$4]},$$scope:{ctx:cr}}}),Rn.$on("resize",cr[13]),{c(){Ae$1(vn.$$.fragment),yn=Xt$1(),Ae$1(Rn.$$.fragment)},m(Co,Po){Dt$1(vn,Co,Po),Nt(Co,yn,Po),Dt$1(Rn,Co,Po),Bn=!0},p(Co,[Po]){const To={};Po&1&&(To.show=Co[0]),Po&2&&(To.direction=Co[1]),Po&4&&(To.theme=Co[2]),vn.$set(To);const Io={};Po&8&&(Io.placement=Co[3]),Po&16&&(Io.tag=Co[4]),Po&32&&(Io.config=Co[5]),Po&64&&(Io.theme=Co[6]),Po&512&&(Io.audioInstance=Co[9]),Po&1024&&(Io.audioPlaying=Co[10]),Po&2048&&(Io.audioCurrentTime=Co[11]),Po&4096&&(Io.audioDuration=Co[12]),Po&16788&&(Io.$$scope={dirty:Po,ctx:Co}),Rn.$set(Io)},i(Co){Bn||(ot$4(vn.$$.fragment,Co),ot$4(Rn.$$.fragment,Co),Bn=!0)},o(Co){$t(vn.$$.fragment,Co),$t(Rn.$$.fragment,Co),Bn=!1},d(Co){Rt(vn,Co),Co&&J$h(yn),Rt(Rn,Co)}}}function F$4(cr,vn,yn){let{showArrow:Rn}=vn,{arrowDirection:Bn}=vn,{effectiveTheme:Co}=vn,{adjustedPlacement:Po}=vn,{tag:To}=vn,{config:Io}=vn,{theme:$l}=vn,{toolbar:Wl}=vn,{closePopover:Xl}=vn,{audioInstance:Yl=null}=vn,{audioPlaying:Zl=!1}=vn,{audioCurrentTime:ey=0}=vn,{audioDuration:Rm=0}=vn;function ry(_g){he$1.call(this,cr,_g)}return cr.$$set=_g=>{"showArrow"in _g&&yn(0,Rn=_g.showArrow),"arrowDirection"in _g&&yn(1,Bn=_g.arrowDirection),"effectiveTheme"in _g&&yn(2,Co=_g.effectiveTheme),"adjustedPlacement"in _g&&yn(3,Po=_g.adjustedPlacement),"tag"in _g&&yn(4,To=_g.tag),"config"in _g&&yn(5,Io=_g.config),"theme"in _g&&yn(6,$l=_g.theme),"toolbar"in _g&&yn(7,Wl=_g.toolbar),"closePopover"in _g&&yn(8,Xl=_g.closePopover),"audioInstance"in _g&&yn(9,Yl=_g.audioInstance),"audioPlaying"in _g&&yn(10,Zl=_g.audioPlaying),"audioCurrentTime"in _g&&yn(11,ey=_g.audioCurrentTime),"audioDuration"in _g&&yn(12,Rm=_g.audioDuration)},[Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,ey,Rm,ry]}class fe extends Ce$1{constructor(vn){super(),Te$1(this,vn,F$4,E$9,Ft$1,{showArrow:0,arrowDirection:1,effectiveTheme:2,adjustedPlacement:3,tag:4,config:5,theme:6,toolbar:7,closePopover:8,audioInstance:9,audioPlaying:10,audioCurrentTime:11,audioDuration:12})}}function Ht(cr){Qt(cr,"svelte-11cjg3j",'@charset "UTF-8";.tag-popover.svelte-11cjg3j{position:absolute;z-index:1000010;pointer-events:auto;width:auto;height:auto;padding:0;margin:0;visibility:visible;opacity:1}.tag-popover-content.svelte-11cjg3j{cursor:pointer;pointer-events:auto}.tag-popover-content.audio-tag-popover.svelte-11cjg3j{cursor:default}')}function it(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l;return Rn=new fe({props:{showArrow:cr[13],arrowDirection:cr[12],effectiveTheme:cr[18],adjustedPlacement:cr[8],tag:cr[0],config:cr[1],theme:cr[2],toolbar:cr[16],audioInstance:cr[4],audioPlaying:cr[5],audioCurrentTime:cr[6],audioDuration:cr[7],closePopover:cr[24]}}),Rn.$on("viewMore",cr[20]),Rn.$on("share",cr[21]),Rn.$on("resize",cr[22]),{c(){vn=K$g("div"),yn=K$g("div"),Ae$1(Rn.$$.fragment),te$4(yn,"class","tag-popover-content svelte-11cjg3j"),re$2(yn,"audio-tag-popover",cr[11]),te$4(vn,"class",Co="tag-popover tag-popover-"+cr[18]+" tag-popover-"+cr[8]+" svelte-11cjg3j"),te$4(vn,"data-tag-id",Po=cr[0].id),ne$5(vn,"z-index",cr[17]),ne$5(vn,"left",cr[14].x+"px"),ne$5(vn,"top",cr[14].y+"px")},m(Wl,Xl){Nt(Wl,vn,Xl),pt$1(vn,yn),Dt$1(Rn,yn,null),cr[35](yn),cr[36](vn),To=!0,Io||($l=[lt$2(yn,"mouseenter",cr[33]),lt$2(yn,"mouseleave",cr[34]),lt$2(yn,"click",cr[23])],Io=!0)},p(Wl,Xl){cr=Wl;const Yl={};Xl[0]&8192&&(Yl.showArrow=cr[13]),Xl[0]&4096&&(Yl.arrowDirection=cr[12]),Xl[0]&262144&&(Yl.effectiveTheme=cr[18]),Xl[0]&256&&(Yl.adjustedPlacement=cr[8]),Xl[0]&1&&(Yl.tag=cr[0]),Xl[0]&2&&(Yl.config=cr[1]),Xl[0]&4&&(Yl.theme=cr[2]),Xl[0]&65536&&(Yl.toolbar=cr[16]),Xl[0]&16&&(Yl.audioInstance=cr[4]),Xl[0]&32&&(Yl.audioPlaying=cr[5]),Xl[0]&64&&(Yl.audioCurrentTime=cr[6]),Xl[0]&128&&(Yl.audioDuration=cr[7]),Rn.$set(Yl),(!To||Xl[0]&2048)&&re$2(yn,"audio-tag-popover",cr[11]),(!To||Xl[0]&262400&&Co!==(Co="tag-popover tag-popover-"+cr[18]+" tag-popover-"+cr[8]+" svelte-11cjg3j"))&&te$4(vn,"class",Co),(!To||Xl[0]&1&&Po!==(Po=cr[0].id))&&te$4(vn,"data-tag-id",Po),(!To||Xl[0]&131072)&&ne$5(vn,"z-index",cr[17]),(!To||Xl[0]&16384)&&ne$5(vn,"left",cr[14].x+"px"),(!To||Xl[0]&16384)&&ne$5(vn,"top",cr[14].y+"px")},i(Wl){To||(ot$4(Rn.$$.fragment,Wl),z$j(()=>{To&&(Bn||(Bn=ye$2(yn,cr[19],{duration:cr[15],easing:o$u,y:cr[12]==="top"?-8:cr[12]==="bottom"?8:0,x:cr[12]==="left"?-8:cr[12]==="right"?8:0},!0)),Bn.run(1))}),To=!0)},o(Wl){$t(Rn.$$.fragment,Wl),Bn||(Bn=ye$2(yn,cr[19],{duration:cr[15],easing:o$u,y:cr[12]==="top"?-8:cr[12]==="bottom"?8:0,x:cr[12]==="left"?-8:cr[12]==="right"?8:0},!1)),Bn.run(0),To=!1},d(Wl){Wl&&J$h(vn),Rt(Rn),cr[35](null),Wl&&Bn&&Bn.end(),cr[36](null),Io=!1,M$o($l)}}}function Wt(cr){let vn,yn,Rn=cr[3]&&cr[14]&&it(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,Co){Bn[3]&&Bn[14]?Rn?(Rn.p(Bn,Co),Co[0]&16392&&ot$4(Rn,1)):(Rn=it(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function Ft(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl;const Zl=de$3("hooks");let{tag:ey}=vn,{config:Rm={}}=vn,{triggerElement:ry}=vn,{wrapperElement:_g=document.body}=vn,{popoverContainer:ty=null}=vn,{theme:ny=void 0}=vn,{visible:iy=!0}=vn,{closePopover:oy=void 0}=vn,{audioInstance:ay=null}=vn,{audioPlaying:uy=!1}=vn,{audioCurrentTime:hy=0}=vn,{audioDuration:my=0}=vn;const ly=fe$3();let sy,cy={width:0,height:0},fy=null,vy=Bn;function dy(Ey,{duration:Iy=400,easing:zy=o$u,x:Uy=0,y:Qy=0}){return{duration:Iy,css:(Gy,Zy)=>`
          opacity: ${Gy};
          transform: translate(${Zy*Uy}px, ${Zy*Qy}px);
        `}}const Ay=()=>{if(!ey.screenPosition||!ry||!_g)return Bn;const Ey=(Rm==null?void 0:Rm.autoPlacementBaseSpace)||{top:.2,bottom:.2,right:.15},Iy=_g.clientWidth,zy=_g.clientHeight,Uy=zy*Ey.top,Qy=zy*(1-Ey.bottom),Gy=Iy*(1-Ey.right),Zy=ey.screenPosition.leftPx,Ty=ey.screenPosition.topPx,Vy=cy.width||280,Yy=cy.height||200;return Ty<=Uy?Zy<=Gy?Zy+Vy<=Iy&&Ty+Yy<=zy?"right-top":"bottom-left":Zy-Vy>=0&&Ty+Yy<=zy?"left-top":"bottom-right":Ty>=Qy?Zy<=Gy?Zy+Vy<=Iy&&Ty-Yy>=0?"right-bottom":"top-left":Zy-Vy>=0&&Ty-Yy>=0?"left-bottom":"top-right":Zy<=Gy?Zy+Vy<=Iy?"right-top":"left-top":Zy-Vy>=0?"left-top":"right-top"},gy=(Ey,Iy)=>{switch(Ey){case"top":case"top-left":case"top-right":return{x:Iy.left+Iy.width/2,y:Iy.top};case"bottom":case"bottom-left":case"bottom-right":return{x:Iy.left+Iy.width/2,y:Iy.top+Iy.height};case"left":case"left-top":case"left-bottom":return{x:Iy.left,y:Iy.top+Iy.height/2};case"right":case"right-top":case"right-bottom":return{x:Iy.left+Iy.width,y:Iy.top+Iy.height/2};default:return{x:Iy.left+Iy.width/2,y:Iy.top}}},wy=Ey=>{$y(),Zl&&Zl.emit("click",{event:Ey.detail.event,target:"TagPopoverViewMore",tag:ey})},Cy=Ey=>{$y(),Zl&&Zl.emit("click",{event:Ey.detail.event,target:"TagPopoverShare",tag:ey})},My=Ey=>{yn(29,cy=Ey.detail),cy.width>0&&cy.height>0&&yn(8,vy=Ay())},Py=Ey=>{Yl||$y(),Ey.stopPropagation(),Zl.emit("click",{event:Ey,target:"TagPopoverContent",tag:ey})};let Dy=null,qy=!1;function Xy(){ty&&Dy&&Dy.parentNode!==ty&&ty.appendChild(Dy)}ce$2(()=>{(!_g||_g===document.body)&&console.warn("TagPopover \u7EC4\u4EF6\u8B66\u544A\uFF1A\u7981\u6B62\u4F7F\u7528 document.body \u4F5C\u4E3A wrapperElement\uFF0C\u8BF7\u4F20\u5165\u81EA\u5B9A\u4E49\u5BB9\u5668\u5143\u7D20\u3002"),qy=!0,Xy(),_g&&_g!==document.body&&yn(25,_g.style.overflow="hidden",_g)}),ue$3(()=>{qy&&Xy()}),le$1(()=>{Dy&&Dy.parentNode&&Dy.parentNode.removeChild(Dy),_g&&_g!==document.body&&yn(25,_g.style.overflow="",_g)});function $y(){typeof oy=="function"&&oy(),ly("close")}function xy(Ey){he$1.call(this,cr,Ey)}function Ry(Ey){he$1.call(this,cr,Ey)}function Ly(Ey){ft$1[Ey?"unshift":"push"](()=>{sy=Ey,yn(9,sy)})}function ky(Ey){ft$1[Ey?"unshift":"push"](()=>{Dy=Ey,yn(10,Dy)})}return cr.$$set=Ey=>{"tag"in Ey&&yn(0,ey=Ey.tag),"config"in Ey&&yn(1,Rm=Ey.config),"triggerElement"in Ey&&yn(26,ry=Ey.triggerElement),"wrapperElement"in Ey&&yn(25,_g=Ey.wrapperElement),"popoverContainer"in Ey&&yn(27,ty=Ey.popoverContainer),"theme"in Ey&&yn(2,ny=Ey.theme),"visible"in Ey&&yn(3,iy=Ey.visible),"closePopover"in Ey&&yn(28,oy=Ey.closePopover),"audioInstance"in Ey&&yn(4,ay=Ey.audioInstance),"audioPlaying"in Ey&&yn(5,uy=Ey.audioPlaying),"audioCurrentTime"in Ey&&yn(6,hy=Ey.audioCurrentTime),"audioDuration"in Ey&&yn(7,my=Ey.audioDuration)},cr.$$.update=()=>{if(cr.$$.dirty[0]&5&&yn(18,Rn=(()=>i$w(ny)?ny:i$w(ey.data.theme)&&["light","dark"].includes(ey.data.theme)?ey.data.theme:ey.contentType==="Marketing"?"light":"dark")()),cr.$$.dirty[0]&2&&yn(32,Bn=(Rm==null?void 0:Rm.placement)||"right-top"),cr.$$.dirty[0]&2&&yn(16,To=(()=>typeof(Rm==null?void 0:Rm.toolbar)=="boolean"?Rm.toolbar?{showMore:!0,showShare:!0}:{showMore:!1,showShare:!1}:(Rm==null?void 0:Rm.toolbar)||{showMore:!0,showShare:!0})()),cr.$$.dirty[1]&2&&(Bn==="auto"?yn(8,vy=Ay()):yn(8,vy=Bn)),cr.$$.dirty[0]&2&&yn(15,Io=(Rm==null?void 0:Rm.transitionDuration)||350),cr.$$.dirty[0]&67108865&&ey.screenPosition&&ry&&yn(8,vy=Ay()),cr.$$.dirty[0]&536870912&&cy.width>0&&cy.height>0&&yn(8,vy=Ay()),cr.$$.dirty[0]&67109121&&ey.screenPosition&&vy&&ry){const Ey=ry.getBoundingClientRect();Ey.width>0&&Ey.height>0&&yn(30,fy=gy(vy,Ey))}cr.$$.dirty[0]&1073741824&&yn(14,$l=fy),cr.$$.dirty[1]&1&&yn(13,Wl=typeof Co=="boolean"?Co:!0),cr.$$.dirty[0]&256&&yn(12,Xl=(()=>{switch(vy){case"top":case"top-left":case"top-right":return"bottom";case"bottom":case"bottom-left":case"bottom-right":return"top";case"left":case"left-top":case"left-bottom":return"right";case"right":case"right-top":case"right-bottom":return"left";default:return"bottom"}})()),cr.$$.dirty[0]&1&&yn(11,Yl=ey.contentType==="Audio"&&ey.data.appearance==="plane")},yn(31,Co=!0),yn(17,Po=1060),[ey,Rm,ny,iy,ay,uy,hy,my,vy,sy,Dy,Yl,Xl,Wl,$l,Io,To,Po,Rn,dy,wy,Cy,My,Py,$y,_g,ry,ty,oy,cy,fy,Co,Bn,xy,Ry,Ly,ky]}class so extends Ce$1{constructor(vn){super(),Te$1(this,vn,Ft,Wt,Ft$1,{tag:0,config:1,triggerElement:26,wrapperElement:25,popoverContainer:27,theme:2,visible:3,closePopover:28,audioInstance:4,audioPlaying:5,audioCurrentTime:6,audioDuration:7},Ht,[-1,-1])}}function Le(cr){Qt(cr,"svelte-2g2g8a",".tag.svelte-2g2g8a{position:absolute;width:0rem;height:0rem;overflow:visible;pointer-events:auto;will-change:opacity;transition:opacity 0.2s linear}.tag.enableZIndex.svelte-2g2g8a{position:absolute}.tag.hide.svelte-2g2g8a{opacity:0;pointer-events:none}.tag.hide.svelte-2g2g8a *{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a{pointer-events:none !important}.tag.unClickable.svelte-2g2g8a *{pointer-events:none !important}")}function re$1(cr){let vn,yn,Rn,Bn,Co,Po,To,Io,$l,Wl;const Xl=[ze,Ue],Yl=[];function Zl(_g,ty){return _g[10]?0:1}yn=Zl(cr),Rn=Yl[yn]=Xl[yn](cr);const ey=[Re,Ae],Rm=[];function ry(_g,ty){return _g[25]?0:1}return Co=ry(cr),Po=Rm[Co]=ey[Co](cr),{c(){vn=K$g("div"),Rn.c(),Bn=Xt$1(),Po.c(),te$4(vn,"class","tag svelte-2g2g8a"),te$4(vn,"data-tag-id",cr[23]),te$4(vn,"data-tag-unfolded",cr[8]),te$4(vn,"data-content-type",To=cr[0].contentType),te$4(vn,"data-popover-enabled",Io=cr[0].isPopoverConfigEnabled()),te$4(vn,"id",$l=`tag-${cr[23]}`),re$2(vn,"unClickable",cr[0].config.clickable===!1),re$2(vn,"hide",cr[21]),re$2(vn,"enableZIndex",cr[18]),ne$5(vn,"z-index",cr[18]),ne$5(vn,"transform",`translate3d(${cr[20]}, ${cr[19]}, 0) scale(${cr[9].scale})`)},m(_g,ty){Nt(_g,vn,ty),Yl[yn].m(vn,null),pt$1(vn,Bn),Rm[Co].m(vn,null),cr[36](vn),Wl=!0},p(_g,ty){let ny=yn;yn=Zl(_g),yn===ny?Yl[yn].p(_g,ty):(Lt(),$t(Yl[ny],1,1,()=>{Yl[ny]=null}),Ot$1(),Rn=Yl[yn],Rn?Rn.p(_g,ty):(Rn=Yl[yn]=Xl[yn](_g),Rn.c()),ot$4(Rn,1),Rn.m(vn,Bn));let iy=Co;Co=ry(_g),Co===iy?Rm[Co].p(_g,ty):(Lt(),$t(Rm[iy],1,1,()=>{Rm[iy]=null}),Ot$1(),Po=Rm[Co],Po?Po.p(_g,ty):(Po=Rm[Co]=ey[Co](_g),Po.c()),ot$4(Po,1),Po.m(vn,null)),(!Wl||ty[0]&8388608)&&te$4(vn,"data-tag-id",_g[23]),(!Wl||ty[0]&256)&&te$4(vn,"data-tag-unfolded",_g[8]),(!Wl||ty[0]&1&&To!==(To=_g[0].contentType))&&te$4(vn,"data-content-type",To),(!Wl||ty[0]&1&&Io!==(Io=_g[0].isPopoverConfigEnabled()))&&te$4(vn,"data-popover-enabled",Io),(!Wl||ty[0]&8388608&&$l!==($l=`tag-${_g[23]}`))&&te$4(vn,"id",$l),(!Wl||ty[0]&1)&&re$2(vn,"unClickable",_g[0].config.clickable===!1),(!Wl||ty[0]&2097152)&&re$2(vn,"hide",_g[21]),(!Wl||ty[0]&262144)&&re$2(vn,"enableZIndex",_g[18]),ty[0]&262144&&ne$5(vn,"z-index",_g[18]),ty[0]&1573376&&ne$5(vn,"transform",`translate3d(${_g[20]}, ${_g[19]}, 0) scale(${_g[9].scale})`)},i(_g){Wl||(ot$4(Rn),ot$4(Po),Wl=!0)},o(_g){$t(Rn),$t(Po),Wl=!1},d(_g){_g&&J$h(vn),Yl[yn].d(),Rm[Co].d(),cr[36](null)}}}function Ue(cr){let vn;return{c(){vn=K$g("div"),te$4(vn,"data-info","tag point is disable")},m(yn,Rn){Nt(yn,vn,Rn)},p:N$f,i:N$f,o:N$f,d(yn){yn&&J$h(vn)}}}function ze(cr){let vn,yn,Rn;function Bn(Po){cr[34](Po)}let Co={tag:cr[0],handleMouseEnter:cr[30],handleMouseLeave:cr[31],handleTagPointClick:cr[32]};return cr[12]!==void 0&&(Co.tagPointClickHelper=cr[12]),vn=new oo({props:Co}),ft$1.push(()=>Me$1(vn,"tagPointClickHelper",Bn)),cr[35](vn),vn.$on("audioInstanceReady",cr[27].audioInstanceReady),vn.$on("audioPlay",cr[27].audioPlay),vn.$on("audioPause",cr[27].audioPause),vn.$on("audioTimeUpdate",cr[27].audioTimeUpdate),vn.$on("audioDuration",cr[27].audioDuration),{c(){Ae$1(vn.$$.fragment)},m(Po,To){Dt$1(vn,Po,To),Rn=!0},p(Po,To){const Io={};To[0]&1&&(Io.tag=Po[0]),!yn&&To[0]&4096&&(yn=!0,Io.tagPointClickHelper=Po[12],pe$3(()=>yn=!1)),vn.$set(Io)},i(Po){Rn||(ot$4(vn.$$.fragment,Po),Rn=!0)},o(Po){$t(vn.$$.fragment,Po),Rn=!1},d(Po){cr[35](null),Rt(vn,Po)}}}function Ae(cr){let vn;return{c(){vn=K$g("div"),te$4(vn,"data-info","tag content is disable")},m(yn,Rn){Nt(yn,vn,Rn)},p:N$f,i:N$f,o:N$f,d(yn){yn&&J$h(vn)}}}function Re(cr){let vn,yn;return vn=new Fi({props:{mediaStore:cr[1],tag:e$5(cr[0]),hooks:cr[26],state:cr[4],temporaryState:cr[5],rendererMap:cr[2],contentTypeMap:cr[3]}}),{c(){Ae$1(vn.$$.fragment)},m(Rn,Bn){Dt$1(vn,Rn,Bn),yn=!0},p(Rn,Bn){const Co={};Bn[0]&2&&(Co.mediaStore=Rn[1]),Bn[0]&1&&(Co.tag=e$5(Rn[0])),Bn[0]&16&&(Co.state=Rn[4]),Bn[0]&32&&(Co.temporaryState=Rn[5]),Bn[0]&4&&(Co.rendererMap=Rn[2]),Bn[0]&8&&(Co.contentTypeMap=Rn[3]),vn.$set(Co)},i(Rn){yn||(ot$4(vn.$$.fragment,Rn),yn=!0)},o(Rn){$t(vn.$$.fragment,Rn),yn=!1},d(Rn){Rt(vn,Rn)}}}function ne$2(cr){var vn;let yn,Rn;return yn=new so({props:{tag:cr[0],config:cr[0].config.popoverConfig,theme:(vn=cr[0].config.popoverConfig)==null?void 0:vn.theme,wrapperElement:cr[6],triggerElement:cr[12],popoverContainer:cr[7],visible:!0,closePopover:cr[33],audioInstance:cr[14],audioPlaying:cr[15],audioCurrentTime:cr[16],audioDuration:cr[17]}}),yn.$on("mouseenter",cr[28]),yn.$on("mouseleave",cr[29]),yn.$on("close",cr[33]),{c(){Ae$1(yn.$$.fragment)},m(Bn,Co){Dt$1(yn,Bn,Co),Rn=!0},p(Bn,Co){var Po;const To={};Co[0]&1&&(To.tag=Bn[0]),Co[0]&1&&(To.config=Bn[0].config.popoverConfig),Co[0]&1&&(To.theme=(Po=Bn[0].config.popoverConfig)==null?void 0:Po.theme),Co[0]&64&&(To.wrapperElement=Bn[6]),Co[0]&4096&&(To.triggerElement=Bn[12]),Co[0]&128&&(To.popoverContainer=Bn[7]),Co[0]&16384&&(To.audioInstance=Bn[14]),Co[0]&32768&&(To.audioPlaying=Bn[15]),Co[0]&65536&&(To.audioCurrentTime=Bn[16]),Co[0]&131072&&(To.audioDuration=Bn[17]),yn.$set(To)},i(Bn){Rn||(ot$4(yn.$$.fragment,Bn),Rn=!0)},o(Bn){$t(yn.$$.fragment,Bn),Rn=!1},d(Bn){Rt(yn,Bn)}}}function Ze(cr){var vn;let yn,Rn=cr[0].isPopoverConfigEnabled()&&cr[24]&&(cr[11]||((vn=cr[0].config.popoverConfig)==null?void 0:vn.debug)),Bn,Co,Po=cr[9]&&(!cr[22]||cr[11])&&re$1(cr),To=Rn&&ne$2(cr);return{c(){Po&&Po.c(),yn=Xt$1(),To&&To.c(),Bn=Yt()},m(Io,$l){Po&&Po.m(Io,$l),Nt(Io,yn,$l),To&&To.m(Io,$l),Nt(Io,Bn,$l),Co=!0},p(Io,$l){var Wl;Io[9]&&(!Io[22]||Io[11])?Po?(Po.p(Io,$l),$l[0]&4196864&&ot$4(Po,1)):(Po=re$1(Io),Po.c(),ot$4(Po,1),Po.m(yn.parentNode,yn)):Po&&(Lt(),$t(Po,1,1,()=>{Po=null}),Ot$1()),$l[0]&16779265&&(Rn=Io[0].isPopoverConfigEnabled()&&Io[24]&&(Io[11]||((Wl=Io[0].config.popoverConfig)==null?void 0:Wl.debug))),Rn?To?(To.p(Io,$l),$l[0]&16779265&&ot$4(To,1)):(To=ne$2(Io),To.c(),ot$4(To,1),To.m(Bn.parentNode,Bn)):To&&(Lt(),$t(To,1,1,()=>{To=null}),Ot$1())},i(Io){Co||(ot$4(Po),ot$4(To),Co=!0)},o(Io){$t(Po),$t(To),Co=!1},d(Io){Po&&Po.d(Io),Io&&J$h(yn),To&&To.d(Io),Io&&J$h(Bn)}}}function Ne(cr,vn,yn){let Rn,Bn,Co,Po,To,Io,$l,Wl,Xl,Yl,Zl,{tag:ey}=vn,{mediaStore:Rm}=vn,{rendererMap:ry=new Map}=vn,{contentTypeMap:_g=new Map}=vn,{state:ty}=vn,{temporaryState:ny}=vn,{wrapperElement:iy=null}=vn,{popoverContainer:oy=null}=vn;const ay=de$3("hooks");let uy=!1,hy,my,ly=null,sy=!1,cy=!1,fy=null,vy=null,dy=!1,Ay=0,gy=0;const wy={audioInstanceReady:Ey=>{yn(14,vy=Ey.detail),yn(15,dy=!vy.paused)},audioPlay:()=>{yn(15,dy=!0)},audioPause:()=>{yn(15,dy=!1)},audioTimeUpdate:Ey=>{yn(16,Ay=Ey.detail)},audioDuration:Ey=>{yn(17,gy=Ey.detail)}};let Cy=!1;const My=Ey=>{if(my&&clearTimeout(my),Ey===!0&&!Cy){Cy=!0,yn(11,uy=!0);return}my=setTimeout(()=>{var Iy;!sy&&!cy&&!((Iy=ey.config.popoverConfig)!=null&&Iy.debug)&&(Cy=!1,yn(11,uy=!1))},300)},Py=()=>{sy=!0,my&&clearTimeout(my)},Dy=()=>{sy=!1,My(!1)},qy=Ey=>{var Iy,zy,Uy,Qy,Gy,Zy;if(cy=!0,ey.isPopoverConfigEnabled()&&ey.isHoverEnabled()&&((zy=(Iy=ey.currentConfig)==null?void 0:Iy.popoverConfig)==null?void 0:zy.trigger)==="hover"){if(my&&clearTimeout(my),hy!==void 0)return;((Qy=(Uy=ey.currentConfig)==null?void 0:Uy.popoverConfig)==null?void 0:Qy.triggerDelay)>0?hy=setTimeout(()=>{My(!0),ey.hooks.emit("hover",{event:Ey,tag:ey}),hy=void 0},(Zy=(Gy=ey.currentConfig)==null?void 0:Gy.popoverConfig)==null?void 0:Zy.triggerDelay):(My(!0),ey.hooks.emit("hover",{event:Ey,tag:ey}))}},Xy=Ey=>{var Iy,zy;cy=!1,ey.isHoverEnabled()&&ey.isPopoverConfigEnabled()&&((zy=(Iy=ey.currentConfig)==null?void 0:Iy.popoverConfig)==null?void 0:zy.trigger)==="hover"&&(hy!==void 0&&(clearTimeout(hy),hy=void 0),My(!1))},$y=Ey=>{var Iy,zy;const Uy=ey.contentType==="Audio"&&ey.data.appearance==="plane";ey.isPopoverConfigEnabled()&&ey.isHoverEnabled()&&((zy=(Iy=ey.currentConfig)==null?void 0:Iy.popoverConfig)==null?void 0:zy.trigger)==="click"&&(Uy?uy||(yn(11,uy=!0),ey.hooks.emit("hover",{event:Ey,tag:ey})):(yn(11,uy=!uy),uy&&ey.hooks.emit("hover",{event:Ey,tag:ey})))};function xy(){Cy=!1,yn(11,uy=!1)}ce$2(()=>()=>{hy&&clearTimeout(hy),my&&clearTimeout(my)});function Ry(Ey){ly=Ey,yn(12,ly)}function Ly(Ey){ft$1[Ey?"unshift":"push"](()=>{fy=Ey,yn(13,fy)})}function ky(Ey){ft$1[Ey?"unshift":"push"](()=>{ey.dom=Ey,yn(0,ey)})}return cr.$$set=Ey=>{"tag"in Ey&&yn(0,ey=Ey.tag),"mediaStore"in Ey&&yn(1,Rm=Ey.mediaStore),"rendererMap"in Ey&&yn(2,ry=Ey.rendererMap),"contentTypeMap"in Ey&&yn(3,_g=Ey.contentTypeMap),"state"in Ey&&yn(4,ty=Ey.state),"temporaryState"in Ey&&yn(5,ny=Ey.temporaryState),"wrapperElement"in Ey&&yn(6,iy=Ey.wrapperElement),"popoverContainer"in Ey&&yn(7,oy=Ey.popoverContainer)},cr.$$.update=()=>{var Ey,Iy,zy,Uy;cr.$$.dirty[0]&5&&yn(10,Rn=(()=>{var Qy,Gy,Zy;return((Gy=(Qy=ey.style)==null?void 0:Qy.point)==null?void 0:Gy.enabled)===!1||((Zy=ry.get(ey.contentType))==null?void 0:Zy.usePoint)===!1||ey.contentType==="Sticker"||ey.contentType==="Link"||ey.contentType==="VRLink"||ey.contentType==="PanoLink"?!1:ey.contentType==="Panorama"?!0:ey.contentType==="Audio"&&ey.data.appearance==="plane"?ey.isPopoverConfigEnabled():!0})()),cr.$$.dirty[0]&1025&&yn(25,Bn=(()=>!(ey.isPopoverConfigEnabled()&&ey.contentType==="Panorama"||ey.isPopoverConfigEnabled()&&ey.contentType==="ImageText"||ey.isPopoverConfigEnabled()&&ey.contentType==="Text"||ey.isPopoverConfigEnabled()&&ey.contentType==="Audio"||ey.stickType!=="2DPoint"||ey.entryFromModel&&o$q(ey.five.state.mode)&&Rn))()),cr.$$.dirty[0]&1&&yn(24,Co=(()=>{var Qy;return ey.contentType==="Marketing"?!!(ey.data.title||ey.data.name||ey.data.description||ey.data.tooltip||(Qy=ey.data.price)!=null&&Qy.value||ey.data.brandTags&&ey.data.brandTags.length>0||ey.data.tags&&ey.data.tags.length>0||ey.data.imageUrl||ey.data.mediaUrl||ey.data.mediaData&&ey.data.mediaData.length>0):!!(ey.data.title||ey.data.name||ey.data.text||ey.data.description||ey.data.tooltip||ey.data.imageUrl||ey.data.mediaUrl||ey.data.mediaData&&ey.data.mediaData.length>0)})()),cr.$$.dirty[0]&1&&yn(23,Po=ey.id),cr.$$.dirty[0]&1&&yn(9,To=ey.screenPosition),cr.$$.dirty[0]&1&&yn(22,Io=ey.enabled===!1||!ey.state),cr.$$.dirty[0]&513&&yn(21,$l=!((Ey=ey.state)!=null&&Ey.visible)||((Iy=ey.temporaryState)==null?void 0:Iy.visible)===!1||!To),cr.$$.dirty[0]&1&&yn(8,Wl=((zy=ey.state)==null?void 0:zy.unfolded)&&!ey.isPopoverConfigEnabled()),cr.$$.dirty[0]&512&&yn(20,Xl=(To==null?void 0:To.leftPx)+"px"),cr.$$.dirty[0]&512&&yn(19,Yl=(To==null?void 0:To.topPx)+"px"),cr.$$.dirty[0]&257&&yn(18,Zl=Wl?((Uy=ey.zIndex)!=null?Uy:0)+(Wl?1e6:0):void 0)},[ey,Rm,ry,_g,ty,ny,iy,oy,Wl,To,Rn,uy,ly,fy,vy,dy,Ay,gy,Zl,Yl,Xl,$l,Io,Po,Co,Bn,ay,wy,Py,Dy,qy,Xy,$y,xy,Ry,Ly,ky]}class fr extends Ce$1{constructor(vn){super(),Te$1(this,vn,Ne,Ze,Ft$1,{tag:0,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,wrapperElement:6,popoverContainer:7},Le,[-1,-1])}}let e$4=null;function n$d(cr=2e6){return e$4&&document.body.contains(e$4)?(e$4.style.zIndex=String(cr),e$4):(e$4=document.createElement("div"),e$4.className="tag-popover-container",Object.assign(e$4.style,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:String(cr),pointerEvents:"none",overflow:"hidden"}),document.body.appendChild(e$4),e$4)}function X$2(cr){Qt(cr,"svelte-9ehqs9",".tag--container.svelte-9ehqs9{box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;opacity:1;-webkit-user-select:none;-moz-user-select:none;user-select:none;transform:translate3d(0, 0, 0);transition:opacity 0.2s linear;overflow:hidden}.tag--container.hide.svelte-9ehqs9{opacity:0 !important;pointer-events:none}.tag--container.hide.svelte-9ehqs9 *{pointer-events:none !important}")}function w$a(cr,vn,yn){const Rn=cr.slice();return Rn[12]=vn[yn],Rn}function T$4(cr){let vn,yn=[],Rn=new Map,Bn,Co,Po,To=cr[0];const Io=$l=>$l[12].id;for(let $l=0;$l<To.length;$l+=1){let Wl=w$a(cr,To,$l),Xl=Io(Wl);Rn.set(Xl,yn[$l]=I$3(Xl,Wl))}return{c(){var $l;vn=K$g("div");for(let Wl=0;Wl<yn.length;Wl+=1)yn[Wl].c();te$4(vn,"class","tag--container svelte-9ehqs9"),te$4(vn,"data-infive",Bn=!cr[4].visible||!cr[5].visible?"1":"0"),re$2(vn,"hide",!cr[4].visible||!cr[5].visible),ne$5(vn,"z-index",($l=cr[6])!=null?$l:"")},m($l,Wl){Nt($l,vn,Wl);for(let Xl=0;Xl<yn.length;Xl+=1)yn[Xl]&&yn[Xl].m(vn,null);cr[10](vn),Po=!0},p($l,Wl){var Xl;Wl&447&&(To=$l[0],Lt(),yn=Ee$3(yn,Wl,Io,1,$l,To,Rn,vn,xe,I$3,null,w$a),Ot$1()),(!Po||Wl&48&&Bn!==(Bn=!$l[4].visible||!$l[5].visible?"1":"0"))&&te$4(vn,"data-infive",Bn),(!Po||Wl&48)&&re$2(vn,"hide",!$l[4].visible||!$l[5].visible),Wl&64&&ne$5(vn,"z-index",(Xl=$l[6])!=null?Xl:"")},i($l){if(!Po){for(let Wl=0;Wl<To.length;Wl+=1)ot$4(yn[Wl]);Co||z$j(()=>{Co=me$1(vn,C$i,{}),Co.start()}),Po=!0}},o($l){for(let Wl=0;Wl<yn.length;Wl+=1)$t(yn[Wl]);Po=!1},d($l){$l&&J$h(vn);for(let Wl=0;Wl<yn.length;Wl+=1)yn[Wl].d();cr[10](null)}}}function I$3(cr,vn){let yn,Rn,Bn;return Rn=new fr({props:{state:vn[4],temporaryState:vn[5],tag:vn[12],mediaStore:vn[1],rendererMap:vn[2],contentTypeMap:vn[3],wrapperElement:vn[7],popoverContainer:vn[8]}}),{key:cr,first:null,c(){yn=Yt(),Ae$1(Rn.$$.fragment),this.first=yn},m(Co,Po){Nt(Co,yn,Po),Dt$1(Rn,Co,Po),Bn=!0},p(Co,Po){vn=Co;const To={};Po&16&&(To.state=vn[4]),Po&32&&(To.temporaryState=vn[5]),Po&1&&(To.tag=vn[12]),Po&2&&(To.mediaStore=vn[1]),Po&4&&(To.rendererMap=vn[2]),Po&8&&(To.contentTypeMap=vn[3]),Po&128&&(To.wrapperElement=vn[7]),Po&256&&(To.popoverContainer=vn[8]),Rn.$set(To)},i(Co){Bn||(ot$4(Rn.$$.fragment,Co),Bn=!0)},o(Co){$t(Rn.$$.fragment,Co),Bn=!1},d(Co){Co&&J$h(yn),Rt(Rn,Co)}}}function Y$1(cr){let vn,yn,Rn=cr[4].enabled&&T$4(cr);return{c(){Rn&&Rn.c(),vn=Yt()},m(Bn,Co){Rn&&Rn.m(Bn,Co),Nt(Bn,vn,Co),yn=!0},p(Bn,[Co]){Bn[4].enabled?Rn?(Rn.p(Bn,Co),Co&16&&ot$4(Rn,1)):(Rn=T$4(Bn),Rn.c(),ot$4(Rn,1),Rn.m(vn.parentNode,vn)):Rn&&(Lt(),$t(Rn,1,1,()=>{Rn=null}),Ot$1())},i(Bn){yn||(ot$4(Rn),yn=!0)},o(Bn){$t(Rn),yn=!1},d(Bn){Rn&&Rn.d(Bn),Bn&&J$h(vn)}}}function x$b(cr,vn,yn){let{tags:Rn=[]}=vn,{hooks:Bn}=vn,{mediaStore:Co}=vn,{rendererMap:Po}=vn,{contentTypeMap:To}=vn,{state:Io}=vn,{temporaryState:$l}=vn,{zIndex:Wl=void 0}=vn,Xl=null,Yl=null,Zl=2e3;ae$2("hooks",Bn),ae$2("mediaStore",Co),ce$2(()=>{yn(8,Yl=n$d(Zl))});function ey(Rm){ft$1[Rm?"unshift":"push"](()=>{Xl=Rm,yn(7,Xl)})}return cr.$$set=Rm=>{"tags"in Rm&&yn(0,Rn=Rm.tags),"hooks"in Rm&&yn(9,Bn=Rm.hooks),"mediaStore"in Rm&&yn(1,Co=Rm.mediaStore),"rendererMap"in Rm&&yn(2,Po=Rm.rendererMap),"contentTypeMap"in Rm&&yn(3,To=Rm.contentTypeMap),"state"in Rm&&yn(4,Io=Rm.state),"temporaryState"in Rm&&yn(5,$l=Rm.temporaryState),"zIndex"in Rm&&yn(6,Wl=Rm.zIndex)},cr.$$.update=()=>{var Rm,ry,_g,ty;cr.$$.dirty&1&&Rn&&Rn.length>0&&(Zl=(ty=(_g=(ry=(Rm=Rn[0])==null?void 0:Rm.config)==null?void 0:ry.popoverConfig)==null?void 0:_g.zIndex)!=null?ty:2e6)},[Rn,Co,Po,To,Io,$l,Wl,Xl,Yl,Bn,ey]}class wr extends Ce$1{constructor(vn){super(),Te$1(this,vn,x$b,Y$1,Ft$1,{tags:0,hooks:9,mediaStore:1,rendererMap:2,contentTypeMap:3,state:4,temporaryState:5,zIndex:6},X$2)}}var P$6=Object.defineProperty,E$8=Object.defineProperties,U$3=Object.getOwnPropertyDescriptors,v$b=Object.getOwnPropertySymbols,A$5=Object.prototype.hasOwnProperty,k$3=Object.prototype.propertyIsEnumerable,g$e=(cr,vn,yn)=>vn in cr?P$6(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,f$m=(cr,vn)=>{for(var yn in vn||(vn={}))A$5.call(vn,yn)&&g$e(cr,yn,vn[yn]);if(v$b)for(var yn of v$b(vn))k$3.call(vn,yn)&&g$e(cr,yn,vn[yn]);return cr},c$i=(cr,vn)=>E$8(cr,U$3(vn)),p$m=(cr,vn,yn)=>(g$e(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),l$d=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const S$6="Dnalogel-PanoTagPlugin";class No extends Xt{constructor(vn,yn){super(vn),p$m(this,"state",{enabled:!0,visible:!0}),p$m(this,"debug"),p$m(this,"debugUtil",new h$j(this)),p$m(this,"globalHoverEnabled",!0),p$m(this,"changeTagModel",(Rn,Bn)=>l$d(this,null,function*(){var Co;Rn.data=a$q({},Rn.data,Bn),yield(Co=Rn.loadModel)==null?void 0:Co.call(Rn)})),p$m(this,"handleFiveModeChange",Rn=>{const Bn=()=>{this.filter2DPointTag.forEach(Co=>{Co.state.visible=!1,Co.applyVisible()}),this.five.ready().then(()=>{this.tagsDo(this.tags,Co=>{Co.updateVisible(),o$o(Co)&&Rn!=="Panorama"&&this.changeTagMode(Co,"behind")})})};this.tags.length<500?Bn():this.five.ready().then(()=>Bn())}),p$m(this,"handleFiveWantsMoveToPano",Rn=>{if(this.tags.length>500){this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]});return}else this.temporaryState.visible=!0,this.tags.forEach(Bn=>{Bn.temporaryState.visible=!0}),this.addRenderQueue({type:"TagContainerSvelte",keys:["tags"]}),this.tags.forEach(Bn=>Bn.applyVisible())}),p$m(this,"clickhandler",Rn=>{Rn.tag.onClick(Rn)}),p$m(this,"handleFiveCameraUpdate",()=>{this.filterPointTag.forEach(Rn=>Rn.updateScreenPosition())}),p$m(this,"handleFiveCameraFovUpdate",()=>{this.handleFiveCameraUpdate(),this.five.off("render.prepare",this.handleFiveCameraUpdate),this.five.on("render.prepare",this.handleFiveCameraUpdate),setTimeout(()=>{this.five.off("render.prepare",this.handleFiveCameraUpdate)},1e3)}),p$m(this,"handleFivePanoArrived",()=>l$d(this,null,function*(){this.filter2DPointTag.forEach(Rn=>{Rn.state.visible=!1,Rn.applyVisible()}),this.tagsDo(this.tags,Rn=>{Rn.updateVisible()}),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}),yield this.setUnfolded(),this.tags.filter(c$s).filter(Rn=>{var Bn;return(Bn=Rn.getConfig().modelConfig)==null?void 0:Bn.autoLookAtEnabled}).forEach(Rn=>{var Bn;const Co=new Mesh(new BoxGeometry,new MeshBasicMaterial),Po=(Bn=Rn.model)==null?void 0:Bn.object;if(!Po)return;Co.position.copy(Po.position),Co.quaternion.copy(Po.quaternion);const To=this.five.camera.position;Co.lookAt(To.clone().setY(Co.position.y));const Io=Po.quaternion.clone(),$l=Co.quaternion.clone(),Wl=F$f();Wl.onUpdate(({progress:Xl})=>{Po.quaternion.copy(Io.clone().slerp($l,Xl))}),Wl.play()})})),p$m(this,"handleFiveModelShownFloorChange",()=>{this.tagsDo(this.tags,Rn=>Rn.updateVisible())}),p$m(this,"onFiveRefined",i$i(()=>{o$q(this.five.getCurrentState().mode)?this.setUnfoldedByCamera():this.tags.forEach(Rn=>Rn.cache.clear()),this.tagsDo(this.tags,Rn=>Rn.updateVisible())})),p$m(this,"onFiveEveryReady",()=>{this.setUnfoldedByCamera(),o$q(this.five.getCurrentState().mode)&&this.tagsDo(this.tags,Rn=>Rn.updateVisible())}),p$m(this,"render",()=>{this.renderQueue.forEach((Rn,Bn)=>{const{keys:Co}=Rn;if(Bn==="TagContainerSvelte"){const Po=this.filterPointTag.filter(Io=>Io.screenPosition),To={hooks:this.hooks,tags:Po,state:this.state,temporaryState:this.temporaryState,mediaStore:this.mediaStore,rendererMap:this.rendererMap,contentTypeMap:this.contentTypeMap,zIndex:this.params.containerZIndex};if(this.TagContainerSvelte){let Io={};if(Co.length===0)Io=To;else for(const $l of Co)Io[$l]=To[$l];this.TagContainerSvelte.$set(Io)}else{if(!this.container)return console.error("updateRenderPlaneTag: tag2DContainer not found");this.TagContainerSvelte=new wr({target:this.container,props:c$i(f$m({},To),{state:c$i(f$m({},this.state),{enabled:!1})})}),T$f(()=>{var Io;(Io=this.TagContainerSvelte)==null||Io.$set({state:this.state})})}}}),this.renderQueue.clear()}),this.params=a$q({},{debug:!1,config:this.config},f$m({},yn)),this.debug=this.params.debug,this.config=this.params.config,this.debug&&this.debugUtil.bindLog(),a$j(1,{namespace:d$q.PlayAudio});try{Array.isArray(window.__PANOTAGPLUGIN_DEBUG_LIST__)||(window.__PANOTAGPLUGIN_DEBUG_LIST__=[]),this.NAME=S$6+"-"+window.__PANOTAGPLUGIN_DEBUG_LIST__.length,window.__PANOTAGPLUGIN_DEBUG_LIST__.push(this),window.__PANOTAGPLUGIN_DEBUG__||Object.defineProperty(window,"__PANOTAGPLUGIN_DEBUG__",{get:function(){return window.__PANOTAGPLUGIN_DEBUG_LIST__.sort((Rn,Bn)=>Bn.tags.length-Rn.tags.length)[0]}})}catch{}}appendTo(vn){var yn,Rn,Bn;this.container=vn;const Co=(Rn=(yn=this.TagContainerSvelte)==null?void 0:yn.$$)==null?void 0:Rn.root;Co&&Co!==this.container&&((Bn=this.TagContainerSvelte)==null||Bn.$destroy(),this.TagContainerSvelte=void 0)}load(vn){return l$d(this,null,function*(){var yn,Rn;this.clearTags();try{console.debug(this.NAME," load:",{data:JSON.parse(JSON.stringify(vn))})}catch{}this.config=a$q({},this.config,{globalConfig:(yn=vn.globalConfig)!=null?yn:{},contentTypeConfig:(Rn=vn.contentTypeConfig)!=null?Rn:{}});const Bn=yield this.addTag(vn.tagList);return this.hooks.emit("loaded"),Bn})}addTag(vn){return l$d(this,null,function*(){const yn=(Array.isArray(vn)?vn:[vn]).filter(Rn=>Rn.position).map(Rn=>{const Bn=o$n(Rn);if(Bn==="2DPoint"||Bn==="3DPoint")return new Jt(this,Rn);if(Bn==="Model")return new Qo(this,Rn);if(Bn==="Plane")return new Qi(this,Rn)});return yn.forEach(p$s),this.tags.push(...yn),this.tagsLengthWillUpdate=!0,M$u(this.five).then(()=>l$d(this,null,function*(){var Rn,Bn;this.store.eventListenerDisposer&&((Bn=(Rn=this.store).eventListenerDisposer)==null||Bn.call(Rn)),this.state.enabled&&this.handleEnable(),this.addResizeListener(),this.clearUnusedPanelTag(),this.tagsDo(yn,Co=>{this.tags.includes(Co)&&(Co.updateVisible(),Co.updateZIndex())}),this.setUnfolded(),this.addRenderQueue({type:"TagContainerSvelte"}),this.hooks.emit("tagsLengthChange")}))})}changeConfig(vn,yn=!0){yn?this.config=a$q({},this.config,vn):this.config=vn,this.tags.forEach(Rn=>{Rn.updateConfig()}),this.tagsDo(this.tags,Rn=>Rn.updateVisible())}changeGlobalConfig(vn,yn=!0){yn?this.config.globalConfig=a$q({},this.config.globalConfig,vn):this.config.globalConfig=vn,this.tags.forEach(Rn=>{Rn.updateConfig()}),this.tagsDo(this.tags,Rn=>{Rn.updateVisible()})}changeContentTypeConfig(vn,yn,Rn=!0){this.config.contentTypeConfig||(this.config.contentTypeConfig={}),Rn?this.config.contentTypeConfig[vn]=a$q({},this.config.contentTypeConfig[vn],yn):this.config.contentTypeConfig[vn]=yn,this.tags.forEach(Bn=>{Bn.updateConfig()}),this.tagsDo(this.tags,Bn=>{Bn.updateVisible()})}show(vn){return l$d(this,null,function*(){if(this.checkDisposed())return;const{userAction:yn=!0}=vn!=null?vn:{};this.setState({visible:!0},{userAction:yn}),this.hooks.emit("show",{userAction:yn})})}hide(vn){return l$d(this,null,function*(){if(this.checkDisposed())return;const{userAction:yn=!0}=vn!=null?vn:{};this.setState({visible:!1},{userAction:yn}),this.hooks.emit("hide",{userAction:yn})})}enable(vn){if(this.checkDisposed())return;const{userAction:yn=!0}=vn!=null?vn:{};this.setState({enabled:!0},{userAction:yn}),this.hooks.emit("enable",{userAction:yn})}disable(vn){if(this.checkDisposed())return;const{userAction:yn=!0}=vn!=null?vn:{};this.setState({enabled:!1},{userAction:yn}),this.hooks.emit("disable",{userAction:yn})}setState(vn,yn){if(this.checkDisposed())return;const{userAction:Rn=!0}=yn!=null?yn:{},Bn=f$m({},this.state);this.state=Object.assign(this.state,vn),Bn.visible!==this.state.visible&&(vn.visible?this.handleShow():this.handleHide()),Bn.enabled!==this.state.enabled&&(vn.enabled?this.handleEnable():this.handleDisable()),this.hooks.emit("stateChange",{state:this.state,prevState:Bn,userAction:Rn})}dispose(){var vn,yn,Rn,Bn,Co,Po;this.pauseCurrentMedia(),this.disposeAllCSS3DContainer(),(vn=this.TagContainerSvelte)==null||vn.$destroy(),this.filterCSS3DTag.forEach(To=>{var Io;return(Io=To.tag3DContentSvelte)==null?void 0:Io.svelteApp.$destroy()}),this.tags.forEach(To=>To.cache.clear()),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(yn=this.store.disposers)==null||yn.forEach(To=>To==null?void 0:To()),this.store.disposers=[],(Bn=(Rn=this.store).eventListenerDisposer)==null||Bn.call(Rn),this.store.eventListenerDisposer=void 0,(Po=(Co=this.store).resizeObserverDisposer)==null||Po.call(Co),this.store.resizeObserverDisposer=void 0,this.store.resizeObserverDisposerAdding=!1,this.five.scene.remove(this.group),this.group.remove(...this.group.children),this.gltfObjectGroup.remove(...this.gltfObjectGroup.children),this.imagePlaneGroup.remove(...this.imagePlaneGroup.children),this.five.needsRender=!0,this.store.disposed=!0,this.hooks.emit("dispose")}blinkTagById(vn,yn){return l$d(this,null,function*(){var Rn;return(Rn=this.getTagById(vn))==null?void 0:Rn.blink(yn)})}changeUnfoldedById(vn,yn){const Rn=this.getTagById(vn);yn?Rn==null||Rn.unfold():Rn==null||Rn.fold()}changeEnabledById(vn,yn){var Rn;const Bn=this.getTagById(vn);Bn&&(Bn.enabled=yn,(Rn=Bn.hooks)==null||Rn.emit(yn?"enable":"disable"))}changeTagNormalById(vn,yn){const Rn=this.getTagById(vn);Rn&&Rn.tag3DContentSvelte&&(Rn.tag3DContentSvelte.currentNormal=a$D(yn))}changePositionById(vn,yn){const Rn=this.getTagById(vn);Rn&&Rn.setPosition(yn)}changeDataById(vn,yn,Rn=!0){const Bn=this.getTagById(vn);Bn&&(Bn.setData(yn,Rn),this.clearUnusedPanelTag(),Bn.hooks.emit("dataChanged",Bn.data))}changeStickTypeById(vn,yn,Rn=!0){this.changeTagById(vn,yn,Rn)}changeTagById(vn,yn,Rn=!0){const Bn=this.getTagById(vn);Bn&&(Bn.set(yn),Bn.updateVisible(),this.clearUnusedPanelTag(),Bn.hooks.emit("dataChanged",Bn.data))}destroyTagById(vn){(Array.isArray(vn)?vn:[vn]).forEach(yn=>{var Rn;return(Rn=this.getTagById(yn))==null?void 0:Rn.destroy()})}updateRenderAllTags(){this.tagsDo(this.tags,vn=>vn.updateVisible()),this.five.needsRender=!0}clearTags(){var vn;this.tags.length&&(this.tags.forEach(yn=>{var Rn,Bn,Co,Po,To,Io;(Rn=yn.tag3DContentSvelte)==null||Rn.dispose(),(Co=(Bn=yn.mediaPlane)==null?void 0:Bn.parent)==null||Co.remove(yn.mediaPlane),(Io=(To=(Po=yn.model)==null?void 0:Po.object)==null?void 0:To.parent)==null||Io.remove(yn.model.object)}),this.tags=[],this.tagsLengthWillUpdate=!0,this.hooks.emit("tagsLengthChange"),(vn=this.TagContainerSvelte)==null||vn.$destroy(),this.TagContainerSvelte=void 0,this.disposeAllCSS3DContainer()),this.enabledModelTagSet.clear(),this.cache.clear()}setUnfolded(){return l$d(this,null,function*(){return new Promise(vn=>{setTimeout(()=>{this.setUnfoldedByCamera(),vn()},100)})})}handleShow(){this.state.visible=!0,this.group.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.updateRenderAllTags(),this.five.needsRender=!0}handleHide(){this.pauseCurrentMedia(),this.state.visible=!1,this.group.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["state"]}),this.five.needsRender=!0}handleEnable(){this.state.enabled=!0,this.store.eventListenerDisposer=this.addEventListener(),this.five.scene.children.includes(this.group)||this.five.scene.add(this.group),this.five.needsRender=!0}handleDisable(){var vn,yn,Rn;this.pauseCurrentMedia(),this.state.enabled=!1,(yn=(vn=this.store).eventListenerDisposer)==null||yn.call(vn),this.five.scene.remove(this.group),(Rn=this.TagContainerSvelte)==null||Rn.$set({tags:[]}),this.five.needsRender=!0}addResizeListener(){if(!this.store.resizeObserverDisposer&&!this.store.resizeObserverDisposerAdding){const vn=this.addResizeObserver();this.store.resizeObserverDisposerAdding=!0,setTimeout(()=>{this.store.resizeObserverDisposer=vn,this.store.resizeObserverDisposerAdding=!1},200)}}addResizeObserver(){if(this.store.disposed)return;const vn=this.five.getElement(),yn=()=>{this.state.enabled&&(this.filterPointTag.forEach(Io=>Io.updateScreenPosition({force:!0})),this.temporaryState.visible=!0,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},Rn=()=>{this.state.enabled&&(this.temporaryState.visible=!1,this.addRenderQueue({type:"TagContainerSvelte",keys:["temporaryState"]}))},{observe:Bn,unobserve:Co}=o$G(i$h(()=>{this.store.resizeObserverDisposer&&Rn()},500),vn),{observe:Po,unobserve:To}=o$G(i$i(()=>yn(),400),vn);return Bn(),Po(),()=>{Co(),To()}}setUnfoldedByCamera(){let vn=!1;this.filterPointTag.forEach(yn=>{const Rn=yn.getUnfoldedByCamera();if(yn.state&&Rn!==void 0){if(Rn===!0&&yn.screenPosition){const Bn=yn.getConfig().unfoldedConfig;r$s(Bn).keep!=="unfolded"&&(vn=!0)}yn.state.unfolded=Rn}}),vn&&this.filterPointTag.forEach(yn=>{const Rn=yn.getConfig().unfoldedConfig;typeof Rn=="object"&&(Rn.autoUnfold||Rn.autoUnfold===!1||r$s(Rn.autoUnfold).enable===!1||Rn.keep)||yn.state&&(yn.state.unfolded=!1)})}changeTagMode(vn,yn){var Rn;(Rn=vn.tag3DContentSvelte)!=null&&Rn.css3DInstance&&(vn.tag3DContentSvelte.css3DInstance.mode=yn)}addEventListener(){const{five:vn,hooks:yn}=this,Rn=i$x(this.five,this.onFiveEveryReady);return this.handleFivePanoArrived(),vn.on("wantsMoveToPano",this.handleFiveWantsMoveToPano),vn.on("models.refined",this.onFiveRefined),vn.on("modeChange",this.handleFiveModeChange),vn.on("modelShownFloorChange",this.handleFiveModelShownFloorChange),vn.on("cameraUpdate",this.handleFiveCameraUpdate),vn.on("cameraFovUpdate",this.handleFiveCameraFovUpdate),vn.on("panoArrived",this.handleFivePanoArrived),vn.on("panoArrived",this.loadVideoFirstFrame),vn.on("render.prepare",this.render),yn.on("click",this.clickhandler),()=>{Rn(),vn.off("wantsMoveToPano",this.handleFiveWantsMoveToPano),vn.off("models.refined",this.onFiveRefined),vn.off("modeChange",this.handleFiveModeChange),vn.off("modelShownFloorChange",this.handleFiveModelShownFloorChange),vn.off("cameraUpdate",this.handleFiveCameraUpdate),vn.off("cameraFovUpdate",this.handleFiveCameraFovUpdate),vn.off("panoArrived",this.handleFivePanoArrived),vn.off("panoArrived",this.loadVideoFirstFrame),vn.off("render.prepare",this.render),yn.off("click",this.clickhandler),this.store.eventListenerDisposer=void 0}}setTagHoverEnabled(vn,yn){const Rn=this.getTagById(vn);Rn&&(Rn.hoverEnabled=yn)}getTagHoverEnabled(vn){const yn=this.getTagById(vn);return yn==null?void 0:yn.hoverEnabled}setGlobalHoverEnabled(vn){this.globalHoverEnabled=vn}getGlobalHoverEnabled(){return this.globalHoverEnabled}}const Wr=(cr,vn)=>new No(cr,vn);function r$e(cr,vn,yn){if(yn){const Rn=new Vector3().subVectors(cr.position,yn).applyQuaternion(cr.quaternion.clone().inverse()).applyQuaternion(vn).add(yn);cr.position.copy(Rn)}cr.quaternion.copy(vn)}var x$a=Object.defineProperty,b$b=(cr,vn,yn)=>vn in cr?x$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,u$e=(cr,vn,yn)=>(b$b(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class h$9 extends c$C{constructor(vn,yn){var Rn,Bn;super(),u$e(this,"originObject3D"),u$e(this,"onRender"),u$e(this,"positionFrom"),this.originObject3D=vn,this.onRender=(Rn=yn==null?void 0:yn.onRender)!=null?Rn:()=>{},this.positionFrom=(Bn=yn==null?void 0:yn.positionFrom)!=null?Bn:"objectPosition"}get helperObject(){return this}render(){this.onRender()}enable(){this.parent.children.includes(this)||this.parent.add(this)}disable(){this.removeFromParent()}show(){this.visible=!0,this.render()}hide(){this.visible=!1,this.render()}raycasterIntersectObject(vn,yn=[]){return vn.intersectObject(this,!0,yn)}initialPosition(vn){var yn,Rn;this.positionFrom==="objectPosition"?this.position.copy(this.originObject3D.position):this.positionFrom==="boundingBox"?this.position.copy((yn=R$j(this.originObject3D))==null?void 0:yn.getCenter(new Vector3).applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom==="boundingSphere"?this.position.copy((Rn=T$j(this.originObject3D))==null?void 0:Rn.center.clone().applyMatrix4(this.originObject3D.matrixWorld)):this.positionFrom instanceof Vector3?this.position.copy(this.positionFrom):this.positionFrom instanceof Function&&this.position.copy(this.positionFrom(this.originObject3D)),vn&&this.position.add(vn)}setScaleByCamera(vn){}initQuaternion(vn){if(this.quaternion.copy(this.originObject3D.quaternion),vn&&(vn.xAxis||vn.yAxis||vn.zAxis)){const yn=vn.xAxis instanceof Function?vn.xAxis():vn.xAxis,Rn=vn.yAxis instanceof Function?vn.yAxis():vn.yAxis,Bn=vn.zAxis instanceof Function?vn.zAxis():vn.zAxis;let Co=yn==null?void 0:yn.clone(),Po=Rn==null?void 0:Rn.clone(),To=Bn==null?void 0:Bn.clone();if(Co&&!Po&&!Po){const Io=new Quaternion().setFromUnitVectors(new Vector3(1,0,0),Co.normalize());this.applyQuaternion(Io)}if(Po&&!Co&&!To){const Io=new Quaternion().setFromUnitVectors(new Vector3(0,1,0),Po.normalize());this.applyQuaternion(Io)}if(To&&!Co&&!Po){const Io=new Quaternion().setFromUnitVectors(new Vector3(0,0,1),To.normalize());this.applyQuaternion(Io)}if([Co,Po,To].filter(i$w).length>=2){Co||(Co=new Vector3().crossVectors(Po,To).normalize()),Po||(Po=new Vector3().crossVectors(Co,To).normalize()),To||(To=new Vector3().crossVectors(Co,Po).normalize()),Co.applyQuaternion(this.quaternion),Po.applyQuaternion(this.quaternion),To.applyQuaternion(this.quaternion);const Io=new Matrix4().makeBasis(Co,Po,To),$l=new Quaternion().setFromRotationMatrix(Io);this.quaternion.copy($l)}}}applyHelperScaleMatrix4(vn,yn){this.scale.applyMatrix4(vn)}setHelperQuaternion(vn,yn){this.initQuaternion(),r$e(this,this.quaternion.clone().premultiply(vn),yn)}applyHelperQuaternion(vn,yn){if(yn){const Rn=new Vector3().subVectors(this.position,yn).applyQuaternion(vn).add(yn);this.position.copy(Rn)}this.applyQuaternion(vn)}dispose(){this.removeFromParent()}}class z$3 extends h$9{}class M$7 extends h$9{}class R$3 extends h$9{}class f$l extends h$9{}class B$5 extends h$9{}var n$c=Object.defineProperty,d$f=(cr,vn,yn)=>vn in cr?n$c(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$6=(cr,vn,yn)=>(d$f(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class u$d extends Group$1{constructor(vn){super(),i$6(this,"direction"),this.direction=vn||"x"}}class x$9 extends Mesh{constructor(vn,yn,Rn){super(vn,yn),i$6(this,"direction"),this.direction=Rn||"x"}}var y$a=Object.defineProperty,g$d=(cr,vn,yn)=>vn in cr?y$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$d=(cr,vn,yn)=>(g$d(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class G$1 extends u$d{constructor(vn){var yn;super(vn.direction),r$d(this,"line"),r$d(this,"arrow"),r$d(this,"lineHeight",.4),r$d(this,"arrowHeight",.1),r$d(this,"renderOrder",50),r$d(this,"name","ArrowGroup");const Rn=new Color((yn=vn.color)!=null?yn:16214315),Bn=new MeshBasicMaterial({color:Rn,depthTest:!1,depthWrite:!1,transparent:!0}),Co=new ConeGeometry(.04,.1,32),Po=new x$9(Co,Bn.clone(),vn.direction);Po.name=`arrow-${vn.direction}`,this.arrow=Po;const To=.004,Io=new CylinderGeometry(To,To,.4,32),$l=new x$9(Io,Bn.clone(),vn.direction);$l.name=`line-${vn.direction}`,this.line=$l,this.formatArrow(),this.formatLine(),this.add(this.arrow,this.line)}formatArrow(){this.arrow.geometry.translate(0,this.lineHeight+this.arrowHeight/2,0),this.direction==="x"?(this.arrow.geometry.rotateX(Math.PI/2),this.arrow.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.arrow.geometry.rotateX(Math.PI/2)}formatLine(){this.line.geometry.translate(0,this.lineHeight/2,0),this.direction==="x"?(this.line.geometry.rotateX(Math.PI/2),this.line.geometry.rotateY(Math.PI/2)):this.direction==="z"&&this.line.geometry.rotateX(Math.PI/2)}}const o$8={X:15618642,Y:4765519,Z:4227839};class t$2{static get X(){return new Color(o$8.X).convertSRGBToLinear().clone()}static get Y(){return new Color(o$8.Y).convertSRGBToLinear().clone()}static get Z(){return new Color(o$8.Z).convertSRGBToLinear().clone()}}function S$5(cr,vn,yn){const Rn=cr.position.distanceTo(vn),Bn=cr.fov,Co=cr.distance||3,Po=Rn/3,To=Bn/90,Io=Co/3,$l=Po*To*Io,Wl=(yn==null?void 0:yn.min)||.6,Xl=yn==null?void 0:yn.max;return Wl&&$l<Wl?Wl:Xl&&$l>Xl?Xl:$l}function f$k(cr,vn,yn){return cr<vn?vn:cr>yn?yn:cr}function f$j(cr){let vn=cr.pose.latitude,yn=cr.pose.longitude;if(t$e(vn)||t$e(yn)){const Rn=cr.matrix.elements;vn=Math.asin(f$k(Rn[9],-1,1)),Math.abs(Rn[9])<.9999999?yn=o$h(Math.atan2(Rn[8],Rn[10])):yn=o$h(Math.atan2(-Rn[2],Rn[0]))}return{latitude:vn,longitude:yn}}function a$b(cr){const{latitude:vn,longitude:yn}=cr,Rn=new Vector3;return i$5-vn<.03?Rn.set(0,1,0):s$4(0,yn)?Rn.set(0,0,1):s$4(Math.PI,yn)?Rn.set(0,0,-1):s$4(i$5,yn)?Rn.set(1,0,0):Rn.set(-1,0,0),Rn}const i$5=Number((Math.PI/2).toFixed(5));function s$4(cr,vn){return typeof cr!="number"||typeof vn!="number"?!1:Math.abs(cr-vn)<.001}var p$l=Object.defineProperty,c$h=(cr,vn,yn)=>vn in cr?p$l(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$a=(cr,vn,yn)=>(c$h(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class D$8 extends z$3{constructor(vn,yn){super(vn,yn),a$a(this,"name","MoveHelper"),a$a(this,"xArrow"),a$a(this,"yArrow"),a$a(this,"zArrow"),yn.xArrowEnable!==!1&&(this.xArrow=new G$1({direction:"x",color:t$2.X})),yn.yArrowEnable!==!1&&(this.yArrow=new G$1({direction:"y",color:t$2.Y})),yn.zArrowEnable!==!1&&(this.zArrow=new G$1({direction:"z",color:t$2.Z})),this.add(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean))}update(vn){if(this.xArrow&&(this.xArrow.visible=!0),this.yArrow&&(this.yArrow.visible=!0),this.zArrow&&(this.zArrow.visible=!0),vn.type==="OrthographicCamera"){const yn=new Vector3(1,0,0).applyQuaternion(this.quaternion),Rn=new Vector3(0,1,0).applyQuaternion(this.quaternion),Bn=new Vector3(0,0,1).applyQuaternion(this.quaternion),Co=f$j(vn),Po=a$b(Co),To=.0872665;Math.abs(yn.angleTo(Po)-0)<To||Math.abs(yn.angleTo(Po)-Math.PI)<To?this.xArrow&&(this.xArrow.visible=!1):Math.abs(Rn.angleTo(Po)-0)<To||Math.abs(Rn.angleTo(Po)-Math.PI)<To?this.yArrow&&(this.yArrow.visible=!1):(Math.abs(Bn.angleTo(Po)-0)<To||Math.abs(Bn.angleTo(Po)-Math.PI)<To)&&this.zArrow&&(this.zArrow.visible=!1)}}show(){super.show(),this.xArrow&&this.add(this.xArrow),this.yArrow&&this.add(this.yArrow),this.zArrow&&this.add(this.zArrow)}setScaleByCamera(vn){this.scale.setScalar(S$5(vn,this.position))}showDraggingHelper(vn){this.xArrow&&(vn.includes("x")?this.add(this.xArrow):this.remove(this.xArrow)),this.yArrow&&(vn.includes("y")?this.add(this.yArrow):this.remove(this.yArrow)),this.zArrow&&(vn.includes("z")?this.add(this.zArrow):this.remove(this.zArrow))}dispose(){this.remove(...[this.xArrow,this.yArrow,this.zArrow].filter(Boolean)),super.dispose()}}function o$7(cr,vn){return i$4(document.createElement(vn!=null?vn:"div"),cr)}function i$4(cr,vn){if(!vn)return cr;for(const yn in vn)yn&&vn[yn]&&(cr.style[yn]=vn[yn]);return cr}var r$c=Object.defineProperty,n$b=Object.getOwnPropertySymbols,d$e=Object.prototype.hasOwnProperty,f$i=Object.prototype.propertyIsEnumerable,l$c=(cr,vn,yn)=>vn in cr?r$c(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$k=(cr,vn)=>{for(var yn in vn||(vn={}))d$e.call(vn,yn)&&l$c(cr,yn,vn[yn]);if(n$b)for(var yn of n$b(vn))f$i.call(vn,yn)&&l$c(cr,yn,vn[yn]);return cr};function x$8(cr){const vn=o$7(p$k({position:"absolute",display:"block",borderRadius:"4px",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",pointerEvents:"none",userSelect:"none",zIndex:"99999",backgroundColor:"rgba(0,0,0,0.7)",fontSize:"12px",color:"#fff",letterSpacing:"0",lineHeight:"18px"},cr)),yn=()=>{vn.style.display!=="block"&&vn.style.top&&vn.style.left&&(vn.style.display="block")};return{element:vn,show:yn,hide:()=>{vn.style.display="none",vn.style.top="",vn.style.left=""},setLeftTop:(Rn,Bn)=>{vn.style.left=Rn,vn.style.top=Bn,yn()}}}var m$a=Object.defineProperty,w$9=(cr,vn,yn)=>vn in cr?m$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$3=(cr,vn,yn)=>(w$9(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class D$7 extends R$3{constructor(vn,yn){super(vn,yn),i$3(this,"name","RotateHelper"),i$3(this,"xCircle"),i$3(this,"yCircle"),i$3(this,"zCircle"),i$3(this,"children",[]),i$3(this,"angleTips"),i$3(this,"container"),(yn==null?void 0:yn.yzCircleEnable)!==!1&&(this.xCircle=new n$a({direction:"x",color:t$2.X})),(yn==null?void 0:yn.xzCircleEnable)!==!1&&(this.yCircle=new n$a({direction:"y",color:t$2.Y})),(yn==null?void 0:yn.xyCircleEnable)!==!1&&(this.zCircle=new n$a({direction:"z",color:t$2.Z})),yn!=null&&yn.container&&(yn==null?void 0:yn.angleTipsEnable)!==!1&&(this.container=yn==null?void 0:yn.container,this.angleTips=x$8({display:"none"}),this.container.appendChild(this.angleTips.element)),this.add(...[this.xCircle,this.yCircle,this.zCircle].filter(Boolean)),this.show()}hide(){this.children.forEach(vn=>vn.hide())}show(){var vn;this.children.forEach(yn=>yn.showCircle()),(vn=this.angleTips)==null||vn.hide()}setScaleByCamera(vn){this.scale.setScalar(S$5(vn,this.position))}showDraggingHelper(vn){var yn;this.hide(),this.children.filter(Rn=>vn.includes(Rn.direction)).forEach(Rn=>Rn.showRing()),(yn=this.angleTips)==null||yn.show()}dispose(){var vn,yn;this.removeFromParent(),(yn=(vn=this.angleTips)==null?void 0:vn.element)==null||yn.remove()}}class n$a extends Group$1{constructor(vn){super(),i$3(this,"direction"),i$3(this,"circle"),i$3(this,"ring"),i$3(this,"angleSector"),this.direction=vn.direction,this.circle=new x$7(vn),this.ring=new b$a(vn),this.angleSector=new M$6(vn),this.add(this.circle,this.ring,this.angleSector),this.direction==="y"?this.rotateX(Math.PI/2):this.direction==="x"&&this.rotateY(-Math.PI/2)}showCircle(){this.add(this.circle),this.remove(this.ring,this.angleSector)}showRing(){this.add(this.ring,this.angleSector),this.remove(this.circle)}hide(){this.remove(this.ring,this.angleSector,this.circle)}}class x$7 extends Mesh{constructor(vn){var yn;super(),i$3(this,"direction"),i$3(this,"gapAngle",.02),i$3(this,"geometry",new RingGeometry(.25,.3,20,8,this.gapAngle,Math.PI/2-this.gapAngle*2)),this.material=new MeshBasicMaterial({opacity:.6,color:(yn=vn.color)!=null?yn:16777215,transparent:!0,side:DoubleSide,depthTest:!1,depthWrite:!1}),this.renderOrder=50,this.direction=vn.direction,this.geometry.name=`RotateHelperCircleGeometry-${this.direction}`}}class b$a extends Group$1{constructor(vn){super(),i$3(this,"direction"),this.direction=vn.direction;const yn=.015,Rn=new Array(8).fill(null).map((Bn,Co)=>{const Po=new RingGeometry(.25,.3,20,8,Math.PI/4*Co+yn,Math.PI/4-yn*2),To=new MeshBasicMaterial({opacity:1,color:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:DoubleSide});this.renderOrder=50;const Io=new Mesh(Po,To);return Io.name=`AxesDashedRing-${this.direction}-${Co}`,Io});this.add(...Rn)}}class M$6 extends Mesh{constructor(vn){var yn;switch(super(),i$3(this,"direction"),i$3(this,"baseAxes"),i$3(this,"angleDirection"),vn.direction){case"x":this.baseAxes=new Vector3(0,0,1);break;case"y":this.baseAxes=new Vector3(1,0,0);break;case"z":this.baseAxes=new Vector3(1,0,0);break}const Rn=.3+5e-4;this.geometry=new CircleGeometry(Rn,48,0,1e-4),this.material=new MeshBasicMaterial({opacity:.4,color:(yn=vn.color)!=null?yn:16777215,depthTest:!1,depthWrite:!1,transparent:!0,side:DoubleSide}),this.renderOrder=50,this.direction=vn.direction,this.angleDirection=this.direction==="z"?1:-1}}var f$h=Object.defineProperty,g$c=Object.getOwnPropertySymbols,q$2=Object.prototype.hasOwnProperty,x$6=Object.prototype.propertyIsEnumerable,w$8=(cr,vn,yn)=>vn in cr?f$h(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,b$9=(cr,vn)=>{for(var yn in vn||(vn={}))q$2.call(vn,yn)&&w$8(cr,yn,vn[yn]);if(g$c)for(var yn of g$c(vn))x$6.call(vn,yn)&&w$8(cr,yn,vn[yn]);return cr};function F$3(){const cr=o$7({width:"100%",height:"100%",left:"0",top:"0",position:"absolute",pointerEvents:"none"}),vn=o$7({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),yn=o$7({boxSizing:"border-box",width:"100%",height:"100%",left:"0",top:"0",position:"absolute",border:"1px solid rgba(255,255,255,0.4)"});cr.appendChild(vn),vn.appendChild(yn);const Rn="-4px",Bn={direction:"nesw",element:o$6({cursor:"nesw-resize",left:Rn,bottom:Rn})},Co={direction:"ns",element:o$6({cursor:"ns-resize",bottom:Rn})},Po={direction:"nwse",element:o$6({cursor:"nwse-resize",right:Rn,bottom:Rn})},To={direction:"ew",element:o$6({cursor:"ew-resize",right:Rn})},Io={direction:"nesw",element:o$6({cursor:"nesw-resize",right:Rn,top:Rn})},$l={direction:"ns",element:o$6({cursor:"ns-resize",top:Rn})},Wl={direction:"nwse",element:o$6({cursor:"nwse-resize",left:Rn,top:Rn})},Xl={direction:"ew",element:o$6({cursor:"ew-resize",left:Rn})};return new Array(Co,To,$l,Xl,Bn,Po,Io,Wl).forEach(Yl=>vn.appendChild(Yl.element)),{container:cr,squares:[Bn,Co,Po,To,Io,$l,Wl,Xl]}}function o$6(cr){const vn=o$7(b$9({background:"#FFFFFF",width:"9px",height:"9px",position:"absolute",pointerEvents:"none"},cr)),yn=o$7({width:"15px",height:"15px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"}),Rn=o$7({width:"15px",height:"15px",cursor:cr==null?void 0:cr.cursor,pointerEvents:"auto",background:"transparent"});return Rn.draggable=!0,yn.appendChild(Rn),vn.appendChild(yn),vn}var b$8=Object.defineProperty,D$6=(cr,vn,yn)=>vn in cr?b$8(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i$2=(cr,vn,yn)=>(D$6(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class v$a extends B$5{constructor(vn,yn,Rn,Bn){super(vn),i$2(this,"name","CSS3DScaleHelper"),i$2(this,"points",[]),i$2(this,"cornerPositions",[]),i$2(this,"css3DInstance"),i$2(this,"plane"),i$2(this,"css3DRenderer",new y$u),i$2(this,"camera"),i$2(this,"scene"),i$2(this,"container"),i$2(this,"enabled",!1),this.camera=Rn,this.scene=Bn,this.container=yn,this.initRectangleScaleHelper()}get helperObject(){var vn;if(!((vn=this.css3DInstance)!=null&&vn.css3DObject))throw new Error("css3DInstance is not initialized");return this.css3DInstance.css3DObject}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}applyMatrix4(vn){var yn;super.applyMatrix4(vn),this.helperObject.applyMatrix4(vn),(yn=this.plane)==null||yn.applyMatrix4(vn),this.cornerPositions.forEach(Rn=>Rn.applyMatrix4(vn))}showDraggingHelper(){}applyHelperScaleMatrix4(vn,yn){var Rn;(Rn=this.plane)==null||Rn.scale.applyMatrix4(vn),this.helperObject.applyScaleMatrix4(vn)}updatePoints(){const vn=this.calculatePointPosition(this.cornerPositions);this.points.forEach((yn,Rn)=>{yn.position.copy(vn[Rn])})}applyHelperQuaternion(vn,yn){var Rn;const Bn=(Rn=this.css3DInstance)==null?void 0:Rn.css3DObject;if(Bn){const Co=new Vector3().subVectors(Bn.position,yn).applyQuaternion(vn).add(yn);Bn.position.copy(Co),Bn.applyQuaternion(vn)}if(this.plane){const Co=new Vector3().subVectors(this.plane.position,yn).applyQuaternion(vn).add(yn);this.plane.position.copy(Co),this.plane.applyQuaternion(vn)}this.cornerPositions.forEach(Co=>{const Po=new Vector3().subVectors(Co,yn).applyQuaternion(vn).add(yn);Co.copy(Po)})}enable(){var vn;this.enabled||(this.enabled=!0,(vn=this.css3DInstance)==null||vn.enable(),this.plane&&this.scene.add(this.plane))}disable(){var vn;this.enabled&&(this.enabled=!1,(vn=this.css3DInstance)==null||vn.disable(),this.plane&&this.scene.remove(this.plane))}show(){var vn;(vn=this.css3DInstance)==null||vn.show(),this.plane&&(this.plane.visible=!0)}hide(){var vn;(vn=this.css3DInstance)==null||vn.hide(),this.plane&&(this.plane.visible=!1)}dispose(){this.disable(),this.css3DRenderer.dispose()}initRectangleScaleHelper(){var vn,yn;const Rn=this.getCornerPositions();if(!Rn)return;this.cornerPositions=Rn;const Bn=this.css3DRenderer.create3DElement(this.camera,Rn,{ratio:.003});if(!Bn)return;this.css3DInstance=Bn,Bn.appendToElement(this.container);const Co=Bn.css3DObject.container,{container:Po,squares:To}=F$3();this.points=To.map((Io,$l)=>({direction:Io.direction,point:Io.element,position:this.calculatePointPosition(Rn)[$l]})),Co.insertBefore(Po,(vn=Co.children[0])!=null?vn:null),this.helperObject.position.copy(this.originObject3D.position),(yn=this.plane)==null||yn.position.copy(this.originObject3D.position)}getCornerPositions(){const{originObject3D:vn}=this;if(vn.isCSS3DObject&&vn.cornerPoints)return vn.cornerPoints;console.error("\u5F53\u524D\u7269\u4F53\u6682\u65F6\u4E0D\u652F\u6301 ScaleHelper")}calculatePointPosition(vn){return[vn[0].clone(),vn[0].clone().add(vn[1]).divideScalar(2),vn[1].clone(),vn[1].clone().add(vn[2]).divideScalar(2),vn[2].clone(),vn[2].clone().add(vn[3]).divideScalar(2),vn[3].clone(),vn[3].clone().add(vn[0]).divideScalar(2)]}}var u$c=Object.defineProperty,c$g=(cr,vn,yn)=>vn in cr?u$c(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$b=(cr,vn,yn)=>(c$g(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class d$d extends M$7{constructor(vn){super(vn),r$b(this,"name","BoundingBoxHelper"),r$b(this,"box"),r$b(this,"outline"),r$b(this,"positionAttribute"),this.positionAttribute=new BufferAttribute(new Float32Array(8*3),3),this.box=this.createBox(),this.outline=this.createOutline(),this.add(this.box,this.outline),this.update()}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}setHelperQuaternion(vn,yn){r$e(this,vn,yn)}raycasterIntersectObject(vn,yn){return vn.intersectObject(this,!1,yn)}raycast(vn,yn){this.box.raycast(vn,yn)}update(){const vn=R$j(this.originObject3D);if(!vn)return;const{min:yn,max:Rn}=vn;this.positionAttribute.setXYZ(0,Rn.x,Rn.y,Rn.z),this.positionAttribute.setXYZ(1,yn.x,Rn.y,Rn.z),this.positionAttribute.setXYZ(2,yn.x,yn.y,Rn.z),this.positionAttribute.setXYZ(3,Rn.x,yn.y,Rn.z),this.positionAttribute.setXYZ(4,Rn.x,Rn.y,yn.z),this.positionAttribute.setXYZ(5,yn.x,Rn.y,yn.z),this.positionAttribute.setXYZ(6,yn.x,yn.y,yn.z),this.positionAttribute.setXYZ(7,Rn.x,yn.y,yn.z),this.positionAttribute.needsUpdate=!0}createOutline(){const vn=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),yn=new BufferGeometry;yn.setIndex(new BufferAttribute(vn,1)),yn.setAttribute("position",this.positionAttribute);const Rn=new LineBasicMaterial({color:64767,linewidth:1,opacity:1,toneMapped:!1}),Bn=new LineSegments(yn,Rn);return Bn.matrixAutoUpdate=!1,Bn}createBox(){const vn=new Uint16Array([0,1,2,0,2,3,0,3,7,0,7,4,0,4,5,0,5,1,6,1,5,6,2,1,6,5,4,6,4,7,6,3,2,6,7,3]),yn=new BufferGeometry;yn.setIndex(new BufferAttribute(vn,1)),yn.setAttribute("position",this.positionAttribute);const Rn=new MeshBasicMaterial({color:64767,opacity:.1,depthTest:!1,transparent:!0});return new Mesh(yn,Rn)}}const e$3=new Map;function l$b(cr){if(e$3.has(cr))return e$3.get(cr).hooks;const vn=new E$v;let yn=null,Rn;const Bn=()=>{yn=requestAnimationFrame(Bn);const Po=cr.projectionMatrix.toArray().join(",")+cr.matrixWorld.toArray().join(",");Po!==Rn&&(Rn=Po,vn.emit("cameraUpdate"))};Bn();const Co=()=>{e$3.delete(cr),cancelAnimationFrame(yn)};return e$3.set(cr,{hooks:vn,dispose:Co}),vn}var m$9=Object.defineProperty,H$6=(cr,vn,yn)=>vn in cr?m$9(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$5=(cr,vn,yn)=>(H$6(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class B$4{constructor(vn,yn){o$5(this,"originObject3D"),o$5(this,"hooks"),o$5(this,"preventTapDefaultEvent",!1),o$5(this,"internalHooks"),o$5(this,"disposers",[]),o$5(this,"helperObject3D"),o$5(this,"camera"),o$5(this,"model"),o$5(this,"scene"),o$5(this,"container"),o$5(this,"domEvents"),o$5(this,"isDragging",!1),o$5(this,"enabled",!1),o$5(this,"name","BaseController"),o$5(this,"boundingBox"),o$5(this,"config"),o$5(this,"onRender"),o$5(this,"cameraHooks"),o$5(this,"onWantsTapGesture",Zl=>{if(this.getIntersectObject(Zl))return!1}),o$5(this,"updateHelperScale",()=>{this.helperObject3D.setScaleByCamera(this.camera)}),o$5(this,"getBox",()=>this.boundingBox?this.boundingBox:(this.boundingBox=R$j(this.originObject3D),this.boundingBox));var Rn,Bn,Co;this.hooks=(Rn=vn.sharedHooks)!=null?Rn:new E$v,this.internalHooks=(Bn=vn.sharedInternalHooks)!=null?Bn:new E$v,this.camera=vn.camera,this.model=vn.model,this.originObject3D=vn.originObject3D,this.helperObject3D=vn.helperObject3D,this.container=vn.container,this.scene=vn.scene,this.domEvents=vn.domEvents,this.onRender=(Co=vn.onRender)!=null?Co:()=>{},this.config=yn!=null?yn:{},this.initialHelperPosition(),this.initialHelperQuaternion(),this.updateHelperScale(),this.cameraHooks=l$b(this.camera),this.enable();const Po=this.onSetOriginObjectScale.bind(this),To=this.onSetOriginObjectRotate.bind(this),Io=this.onSetOriginObjectPosition.bind(this),$l=this.onApplyOriginObjectScale.bind(this),Wl=this.onApplyOriginObjectRotate.bind(this),Xl=this.onApplyOriginObjectPosition.bind(this),Yl=this.initialHelperPosition.bind(this);this.cameraHooks.on("cameraUpdate",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",Yl),this.internalHooks.on("setObjectScale",Po),this.internalHooks.on("setObjectRotate",To),this.internalHooks.on("setObjectPosition",Io),this.internalHooks.on("applyObjectPosition",Xl),this.internalHooks.on("applyObjectRotate",Wl),this.internalHooks.on("applyObjectScale",$l),this.hooks.on("moveEnd",this.updateHelperScale),this.internalHooks.on("setObjectPosition",this.updateHelperScale),this.internalHooks.on("initialHelperPosition",this.updateHelperScale),this.disposers.push(()=>{this.cameraHooks.off("cameraUpdate",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",Yl),this.internalHooks.off("setObjectScale",Po),this.internalHooks.off("setObjectRotate",To),this.internalHooks.off("setObjectPosition",Io),this.internalHooks.off("applyObjectPosition",Xl),this.internalHooks.off("applyObjectRotate",Wl),this.internalHooks.off("applyObjectScale",$l),this.hooks.off("moveEnd",this.updateHelperScale),this.internalHooks.off("setObjectPosition",this.updateHelperScale),this.internalHooks.off("initialHelperPosition",this.updateHelperScale)})}initialHelperPosition(){this.helperObject3D.initialPosition(this.calculateOffset(this.config.offset))}initialHelperQuaternion(){this.helperObject3D.initQuaternion(this.config)}enable(){this.enabled||(this.enabled=!0,this.scene.add(this.helperObject3D),this.helperObject3D.enable(),this.render())}disable(){this.enabled&&(this.enabled=!1,this.helperObject3D.disable(),this.render())}show(){this.helperObject3D.show(),this.render()}hide(){this.helperObject3D.hide(),this.render()}dispose(){var vn;(vn=this.disposers)==null||vn.forEach(yn=>yn==null?void 0:yn()),this.helperObject3D.dispose(),this.render()}applyHelperMatrix4(vn){this.helperObject3D.applyMatrix4(vn)}applyHelperQuaternion(vn,yn){this.helperObject3D.applyHelperQuaternion(vn,yn)}applyHelperScaleMatrix4(vn,yn){this.helperObject3D.applyHelperScaleMatrix4(vn,yn)}onWantsGesture(vn,yn,Rn){if(this.isDragging)return!1}onIntersectionOnModelUpdate(vn){}onApplyOriginObjectScale(vn){this.applyHelperScaleMatrix4(vn.matrix,vn.origin)}onApplyOriginObjectRotate(vn){this.applyHelperQuaternion(vn.quaternion,vn.origin)}onApplyOriginObjectPosition(vn){this.applyHelperMatrix4(vn.matrix)}onSetOriginObjectScale(vn){this.helperObject3D.scale.copy(vn),this.updateOffsetByScale(vn)}onSetOriginObjectRotate(vn,yn){this.helperObject3D.setHelperQuaternion(vn,yn)}onSetOriginObjectPosition(vn){this.helperObject3D.position.copy(vn.clone().add(this.calculateOffset(this.config.offset)))}render(){this.onRender()}updateOffsetByScale(vn){if(this.boundingBox&&this.config.offset){const yn=this.originObject3D.position,Rn=new Vector3().subVectors(this.boundingBox.max,yn).multiply(vn).add(yn),Bn=new Vector3().subVectors(this.boundingBox.min,yn).multiply(vn).add(yn),Co=this.calculateOffset(this.config.offset,{min:Bn,max:Rn});this.helperObject3D.initialPosition(Co)}}hoverListener(vn,yn=16777215,Rn=1){const Bn=t$c(vn).filter(i$w),Co=[];for(const Po of Bn)if(Po.material||Po instanceof Group$1){const To=Po instanceof Group$1?Po.children.filter(Yl=>Yl instanceof Mesh):[Po];To.forEach(Yl=>{var Zl,ey;Yl.__originalColor__=(Zl=Yl.__originalColor__)!=null?Zl:Yl.material.color.clone(),Yl.__originalOpacity__=(ey=Yl.__originalOpacity__)!=null?ey:Yl.material.opacity});const Io=()=>{To.forEach(Yl=>{Yl.material.color.set(yn),Yl.material.opacity=Rn}),this.render()},$l=()=>{To.forEach(Yl=>{Yl.material.color.copy(Yl.__originalColor__),Yl.material.opacity=Yl.__originalOpacity__}),this.render()},Wl=()=>{this.isDragging||Io()},Xl=()=>{this.isDragging||$l()};for(const Yl of To)this.domEvents.addEventListener(Yl,"mouseover",Wl),this.domEvents.addEventListener(Yl,"mouseout",Xl),this.hooks.on("moveStart",Io),this.hooks.on("moveEnd",$l),this.hooks.on("rotateEnd",$l),this.hooks.on("scaleEnd",$l),Co.push(()=>{this.domEvents.removeEventListener(Yl,"mouseover",Wl),this.domEvents.removeEventListener(Yl,"mouseout",Xl),this.hooks.off("moveStart",Io),this.hooks.off("moveEnd",$l),this.hooks.off("rotateEnd",$l),this.hooks.off("scaleEnd",$l)})}return()=>Co.forEach(Po=>Po==null?void 0:Po())}getIntersectObject(vn){const yn=this.camera.position,Rn=this.helperObject3D;if(!Rn)return;const Bn=this.helperObject3D.raycasterIntersectObject(vn)[0];if(!Bn)return;const Co=Bn;if(Co.object=Rn,this.model.intersectRaycaster){const Po=this.model.intersectRaycaster(vn)[0];if(Po&&Po.point.distanceTo(yn)<Co.point.distanceTo(yn))return}return Co.object}calculateOffset(vn,yn){const Rn=new Vector3(0,0,0);if(!vn)return Rn;const Bn=()=>yn||this.getBox();if(typeof vn.x=="number")Rn.setX(vn.x);else if(typeof vn.x=="object"){const Co=Bn();Rn.setX((Co.max.x-Co.min.x)*vn.x.percents)}if(typeof vn.y=="number")Rn.setY(vn.y);else if(typeof vn.y=="object"){const Co=Bn();Rn.setY((Co.max.y-Co.min.y)*vn.y.percents)}if(typeof vn.z=="number")Rn.setZ(vn.z);else if(typeof vn.z=="object"){const Co=Bn();Rn.setZ((Co.max.z-Co.min.z)*vn.z.percents)}return Rn}}function s$3(cr,vn){const{offsetWidth:yn,offsetHeight:Rn}=vn,{top:Bn,left:Co}=vn.getBoundingClientRect();return Object.assign(new Vector2,{x:(cr.x-Co)/yn*2-1,y:-(cr.y-Bn)/Rn*2+1})}function u$b(cr,vn,yn){if(!vn||!yn||!cr)return;const Rn=s$3(vn,yn);if(Math.abs(Rn.x)===1||Math.abs(Rn.y)===1)return;const Bn=new Raycaster;return Bn.setFromCamera(Rn,cr),Bn.params.Points.threshold=.1,Bn}var v$9=Object.defineProperty,f$g=(cr,vn,yn)=>vn in cr?v$9(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$9=(cr,vn,yn)=>(f$g(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class w$7 extends B$4{constructor(...vn){super(...vn),a$9(this,"name","MoveController"),a$9(this,"startInfo"),a$9(this,"_moveByMouse",{enabled:!1}),a$9(this,"mouseInfo"),a$9(this,"mousedownEventListenerDisposer"),a$9(this,"dragStart",Po=>{if(this.moveByMouseEnable||this.isDragging)return;const To=Po==null?void 0:Po.intersect;if(!To)return this.dragEnd();const Io=(To==null?void 0:To.object).direction;if(!Io)return this.dragEnd();const $l=new Vector3(1,0,0).applyQuaternion(this.helperObject3D.quaternion),Wl=new Vector3(0,1,0).applyQuaternion(this.helperObject3D.quaternion),Xl=new Vector3(0,0,1).applyQuaternion(this.helperObject3D.quaternion),Yl=(()=>{switch(Io){case"x":return $l;case"y":return Wl;case"z":return Xl}})(),Zl=To.point.clone(),ey=new Line3(Zl.clone().sub(Yl.normalize()),Zl.clone().add(Yl.normalize()));this.startInfo={startVectorProject:Zl,line:ey},this.helperObject3D.showDraggingHelper([Io]),this.hooks.emit("moveStart"),this.isDragging=!0}),a$9(this,"dragging",Po=>{if(!this.isDragging||!this.startInfo)return;const To="touches"in Po?Po.touches[0].clientX:Po.x,Io="touches"in Po?Po.touches[0].clientY:Po.y,$l=u$b(this.camera,{x:To,y:Io},this.container);return $l?(this.move($l),!1):this.dragEnd()}),a$9(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("moveEnd"))});const yn=this.helperObject3D;this.hoverListener([yn.xArrow,yn.yArrow,yn.zArrow]);const Rn=this.show.bind(this),Bn=this.hide.bind(this),Co=()=>{this.helperObject3D.update(this.camera),this.render()};Co(),this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",Bn),this.hooks.on("rotateEnd",Rn),this.hooks.on("scaleStart",Bn),this.hooks.on("scaleEnd",Rn),this.hooks.on("moveByMouseEnable",Bn),this.hooks.on("moveByMouseDisable",Rn),this.cameraHooks.on("cameraUpdate",Co),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",Bn),this.hooks.off("rotateEnd",Rn),this.hooks.off("scaleStart",Bn),this.hooks.off("scaleEnd",Rn),this.hooks.off("moveByMouseEnable",Bn),this.hooks.off("moveByMouseDisable",Rn),this.cameraHooks.off("cameraUpdate",Co)}),this.moveByMouseEnable&&this.moveByMouse()}get moveByMouseEnable(){return this._moveByMouse.enabled}dispose(){var vn;super.dispose(),(vn=this.disposers)==null||vn.forEach(yn=>yn==null?void 0:yn())}moveByMouse(vn){this._moveByMouse={enabled:!0,useFaceNormal:vn==null?void 0:vn.useFaceNormal},this.preventTapDefaultEvent=!0;const yn=this.handleMouseDown.bind(this),Rn=this.handleMouseUp.bind(this);this.hooks.emit("moveByMouseEnable"),setTimeout(()=>{this.container.addEventListener("mousedown",yn),this.container.addEventListener("mouseup",Rn)}),this.mousedownEventListenerDisposer=()=>{this.container.removeEventListener("mousedown",yn),this.container.removeEventListener("mouseup",Rn)}}disableMoveByMouse(){var vn;this._moveByMouse={enabled:!1},this.preventTapDefaultEvent=!1,this.hooks.emit("moveByMouseDisable"),(vn=this.mousedownEventListenerDisposer)==null||vn.call(this)}onIntersectionOnModelUpdate(vn){var yn,Rn,Bn;if(!this.moveByMouseEnable)return;const{point:Co,face:Po}=vn;if(!this.hooks.emit("wantToMove",Co)){if(this.originObject3D.position.copy(Co),(this._moveByMouse.useFaceNormal===!0||typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.enable!==!1)&&Po!=null&&Po.normal){const To=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.alignmentVector?this._moveByMouse.useFaceNormal.alignmentVector:{x:0,y:1,z:0})(),Io=new Vector3((yn=To.x)!=null?yn:0,(Rn=To.y)!=null?Rn:0,(Bn=To.z)!=null?Bn:0),$l=(()=>typeof this._moveByMouse.useFaceNormal=="object"&&this._moveByMouse.useFaceNormal.fixedFaceNormal?this._moveByMouse.useFaceNormal.fixedFaceNormal(Po.normal):Po.normal)();this.originObject3D.quaternion.setFromUnitVectors(Io,$l),this.internalHooks.emit("setObjectRotate",this.originObject3D.quaternion.clone())}this.internalHooks.emit("setObjectPosition",Co),this.hooks.emit("move",Co)}}handleMouseDown(vn){const{x:yn,y:Rn}=vn;this.mouseInfo={x:yn,y:Rn,mouseDownTimestamp:Date.now()}}handleMouseUp(vn){if(!this.mouseInfo)return;const{x:yn,y:Rn}=vn;this.mouseInfo.x===yn&&this.mouseInfo.y===Rn&&Date.now()-this.mouseInfo.mouseDownTimestamp<500&&(this.disableMoveByMouse(),this.mouseInfo=void 0)}move(vn){if(!this.startInfo)return this.dragEnd();const{line:yn,startVectorProject:Rn}=this.startInfo,Bn=this.originObject3D,Co=w$o({raycaster:vn,line:yn,clampToLine:!1}),Po=Co.clone().sub(Rn),To=new Matrix4;To.setPosition(Po);const Io=Bn.position.clone().applyMatrix4(To);this.hooks.emit("wantToMove",Io)||(Bn.applyMatrix4(To),Rn.copy(Co),this.internalHooks.emit("applyObjectPosition",{matrix:To}),this.hooks.emit("move",Io))}}var v$8=Object.defineProperty,C$2=(cr,vn,yn)=>vn in cr?v$8(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$a=(cr,vn,yn)=>(C$2(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class F$2{constructor(vn,yn,Rn,Bn,Co,Po,To,Io){r$a(this,"helperController"),r$a(this,"five"),r$a(this,"onFiveWantsTapGesture",ey=>{if(!this.helperController)return;if(this.helperController.preventTapDefaultEvent)return!1;const Rm=this.helperController.onWantsTapGesture(ey);return this.five.needsRender=!0,Rm}),r$a(this,"onFiveWantsGesture",(...ey)=>{if(!this.helperController)return;const Rm=this.helperController.onWantsGesture(...ey);return this.five.needsRender=!0,Rm}),r$a(this,"onFiveIntersectionOnModelUpdate",(...ey)=>{this.helperController&&this.helperController.onIntersectionOnModelUpdate(...ey)});const{camera:$l,model:Wl,scene:Xl}=vn,Yl=vn.getElement();if(this.five=vn,!$l||!Wl||!Yl||!Xl)return;const Zl=()=>{vn.needsRender=!0};this.helperController=new Rn({camera:$l,model:Wl,domEvents:yn,originObject3D:Bn,helperObject3D:Co,container:Yl,scene:Xl,onRender:Zl,sharedHooks:To,sharedInternalHooks:Io},Po),vn.on("wantsTapGesture",this.onFiveWantsTapGesture),vn.on("wantsGesture",this.onFiveWantsGesture),vn.on("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate)}dispose(){var vn;this.five.off("wantsTapGesture",this.onFiveWantsTapGesture),this.five.off("wantsGesture",this.onFiveWantsGesture),this.five.off("intersectionOnModelUpdate",this.onFiveIntersectionOnModelUpdate),(vn=this.helperController)==null||vn.dispose()}}var u$a=Object.defineProperty,f$f=Object.getOwnPropertySymbols,S$4=Object.prototype.hasOwnProperty,E$7=Object.prototype.propertyIsEnumerable,d$c=(cr,vn,yn)=>vn in cr?u$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$8=(cr,vn)=>{for(var yn in vn||(vn={}))S$4.call(vn,yn)&&d$c(cr,yn,vn[yn]);if(f$f)for(var yn of f$f(vn))E$7.call(vn,yn)&&d$c(cr,yn,vn[yn]);return cr},r$9=(cr,vn,yn)=>(d$c(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),b$7=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const D$5="v1.0.1",y$9="Object3DHelper",c$f=`${y$9}@${D$5}`,k$2=()=>{console.error(`${c$f} is disposed`)},I$2=()=>{console.warn(`${c$f} is disabled`)},m$8=()=>{console.error(`${c$f} is disabled`)};class L$6{constructor(vn){r$9(this,"controllers",{}),r$9(this,"state",{visible:!0,enabled:!0,disposed:!1}),r$9(this,"hooks",new E$v),r$9(this,"eventListener",{}),vn&&this.addControllers(vn),this.setState(this.state)}show(vn){return b$7(this,null,function*(){this.setState({visible:!0},vn)})}hide(vn){return b$7(this,null,function*(){this.setState({visible:!1},vn)})}enable(vn){this.setState({enabled:!0},vn)}disable(vn){this.setState({enabled:!1},vn)}dispose(){this.setState({disposed:!0})}setState(vn,yn){if(this.state.disposed)return k$2();if(!this.state.enabled&&vn.enabled!==!0&&vn.disposed!==!0)return m$8();const Rn=a$8({},this.state);this.state=a$8(a$8({},this.state),vn),vn.disposed!==void 0&&vn.disposed!==Rn.disposed&&vn.disposed&&this.handleDispose(),vn.visible!==void 0&&this.handleVisible(vn.visible),vn.enabled!==void 0&&this.handleEnable(vn.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:Rn})}addControllers(vn){this.controllers=a$8(a$8({},this.controllers),vn),this.setState(this.state)}initialHelperMatrix(){this.everyControllerDo(vn=>{vn.initialHelperPosition(),vn.initialHelperQuaternion()})}getCurrentState(){return this.state}handleEnable(vn,yn=!0){vn?(this.everyControllerDo(Rn=>{Rn.enable()}),this.hooks.emit("enable",{userAction:yn})):(this.everyControllerDo(Rn=>{Rn.disable()}),this.hooks.emit("disable",{userAction:yn})),this.state.enabled=vn}handleVisible(vn,yn=!0){vn?(this.everyControllerDo(Rn=>{Rn.show()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:yn}))):(this.everyControllerDo(Rn=>{Rn.hide()}),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:yn}))),this.state.visible=vn}everyControllerDo(vn){Object.values(this.controllers).forEach(yn=>{yn&&vn(yn)})}handleDispose(){var vn,yn;Object.values(this.controllers).forEach(Rn=>{Rn==null||Rn.dispose()});for(const Rn in this.controllers){if(!Rn)continue;const Bn=Rn;(yn=(vn=this.eventListener)[Bn])==null||yn.call(vn)}}actionIfStateIsEnabled(vn,yn){if(this.state.enabled)return vn();yn!=null&&yn.warnLog&&I$2()}}function e$2(cr){return cr*Math.PI/180}var j$8=Object.defineProperty,w$6=(cr,vn,yn)=>vn in cr?j$8(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,d$b=(cr,vn,yn)=>(w$6(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);let y$8=new Quaternion;class P$5 extends B$4{constructor(...vn){var yn,Rn,Bn;super(...vn),d$b(this,"name","RotateController"),d$b(this,"startInfo"),d$b(this,"removeListener");const Co=this.helperObject3D;this.hoverListener([(yn=Co.xCircle)==null?void 0:yn.circle,(Rn=Co.yCircle)==null?void 0:Rn.circle,(Bn=Co.zCircle)==null?void 0:Bn.circle].filter(Boolean));const Po=this.dragStart.bind(this),To=this.dragging.bind(this),Io=this.dragEnd.bind(this),$l=this.show.bind(this),Wl=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",Po),document.addEventListener("mousemove",To),document.addEventListener("mouseup",Io),this.domEvents.addEventListener(this.helperObject3D,"touchstart",Po),document.addEventListener("touchmove",To),document.addEventListener("touchend",Io),this.hooks.on("moveStart",Wl),this.hooks.on("moveEnd",$l),this.hooks.on("scaleStart",Wl),this.hooks.on("scaleEnd",$l),this.hooks.on("moveByMouseEnable",Wl),this.hooks.on("moveByMouseDisable",$l),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",Po),document.removeEventListener("mousemove",To),document.removeEventListener("mouseup",Io),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",Po),document.removeEventListener("touchmove",To),document.removeEventListener("touchend",Io),this.hooks.off("moveStart",Wl),this.hooks.off("moveEnd",$l),this.hooks.off("scaleStart",Wl),this.hooks.off("scaleEnd",$l),this.hooks.off("moveByMouseEnable",Wl),this.hooks.off("moveByMouseDisable",$l)})}get rotateCenter(){return this.helperObject3D.position.clone()}setRotateAngle(vn){const{x:yn=0,y:Rn=0,z:Bn=0}=vn,Co=new Euler(e$2(yn),e$2(Rn),e$2(Bn)),Po=new Quaternion().setFromEuler(Co);if(this.hooks.emit("wantToRotate",Po))return;const{originObject3D:To,rotateCenter:Io}=this;r$e(To,Po,Io),this.internalHooks.emit("setObjectRotate",Po,Io),this.hooks.emit("rotate",Po),this.render()}onApplyOriginObjectRotate(vn){this.isDragging||super.onApplyOriginObjectRotate(vn)}onApplyOriginObjectScale(vn){}dragStart(vn){if(this.isDragging)return;const yn=vn==null?void 0:vn.intersect;if(!yn)return this.dragEnd();const Rn=(yn==null?void 0:yn.object).direction;if(!Rn)return this.dragEnd();const Bn=yn.point,Co=this.getAngleHelper(Rn);this.setTipsAngle(0);const Po=Bn.clone();Po.y+=.2,this.setTipsPosition(Po);const To=this.helperObject3D.quaternion.clone(),Io=(()=>{if(Rn==="x")return new Vector3(1,0,0).applyQuaternion(To);if(Rn==="y")return new Vector3(0,1,0).applyQuaternion(To);if(Rn==="z")return new Vector3(0,0,1).applyQuaternion(To)})(),$l=new Plane().setFromNormalAndCoplanarPoint(Io,Bn),Wl=$l.projectPoint(Bn.clone(),new Vector3).clone().sub(this.rotateCenter),Xl=Wl.angleTo(Co.baseAxes.clone().applyQuaternion(To));this.setAngleHelperStart(Rn,Xl),this.setAngleHelperLength(Rn,0),this.startInfo={direction:Rn,startVector:Wl,plane:$l,angleHelper:Co,angle:0,helperQuaternion:To.clone()},y$8=new Quaternion,this.helperObject3D.showDraggingHelper([Rn]),this.hooks.emit("rotateStart"),this.isDragging=!0}dragging(vn){if(!this.isDragging)return;const yn="touches"in vn?vn.touches[0].clientX:vn.x,Rn="touches"in vn?vn.touches[0].clientY:vn.y,Bn=u$b(this.camera,{x:yn,y:Rn},this.container);return Bn?(this.rotate(Bn),!1):this.dragEnd()}rotate(vn){if(!this.startInfo)return this.dragEnd();const{startVector:yn,plane:Rn,angleHelper:Bn,direction:Co,helperQuaternion:Po}=this.startInfo,{originObject3D:To}=this,Io=vn.ray.intersectPlane(Rn,new Vector3);if(!Io)return;const $l=this.rotateCenter.clone(),Wl=Rn.projectPoint(Io.clone(),new Vector3).clone().sub($l);if(yn.angleTo(Wl)===0)return;const Xl=new Quaternion().setFromUnitVectors(yn.clone().normalize(),Wl.clone().normalize()),Yl=To.quaternion.clone().premultiply(Xl);if(this.hooks.emit("wantToRotate",Yl))return;const Zl=new Euler().setFromQuaternion(new Quaternion().setFromUnitVectors(yn.clone().normalize().applyQuaternion(Po.clone().inverse()),Wl.clone().normalize().applyQuaternion(Po.clone().inverse())),`${Co.toUpperCase()}${"XZY".replace(Co.toUpperCase(),"")}`)[Co]*Bn.angleDirection;if(this.startInfo.angle+=Zl,this.setAngleHelperLength(Co,this.startInfo.angle),this.setTipsAngle(t$9(this.startInfo.angle)),$l){const ey=new Vector3().subVectors(To.position,$l).applyQuaternion(Xl).add($l);To.position.copy(ey)}To.applyQuaternion(Xl),y$8.premultiply(Xl),this.internalHooks.emit("applyObjectRotate",{quaternion:Xl,origin:$l}),this.hooks.emit("rotate",To.quaternion),this.startInfo.startVector=Wl}dragEnd(){this.isDragging&&(this.applyHelperQuaternion(y$8,this.rotateCenter),this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.show(),this.hooks.emit("rotateEnd"))}getAngleHelper(vn){var yn,Rn,Bn;switch(vn){case"x":return(yn=this.helperObject3D.xCircle)==null?void 0:yn.angleSector;case"y":return(Rn=this.helperObject3D.yCircle)==null?void 0:Rn.angleSector;case"z":return(Bn=this.helperObject3D.zCircle)==null?void 0:Bn.angleSector}}setAngleHelperStart(vn,yn){const Rn=this.getAngleHelper(vn);if(!Rn){console.warn("angleHelper is undefined");return}if(Rn instanceof Mesh&&Rn.geometry instanceof CircleGeometry){const{radius:Bn,segments:Co,thetaLength:Po}=Rn.geometry.parameters;Rn.geometry=new CircleGeometry(Bn,Co,yn,Po)}else console.warn("only support THREE.CircleGeometry")}setAngleHelperLength(vn,yn){const Rn=yn>=0?Math.max(yn,.001):Math.min(yn,-.001),Bn=this.getAngleHelper(vn);if(Bn instanceof Mesh&&Bn.geometry instanceof CircleGeometry){const{radius:Co,thetaStart:Po}=Bn.geometry.parameters,To=Math.ceil(Math.abs(Rn)*(40/(2*Math.PI)));Bn.geometry=new CircleGeometry(Co,To,Po,Rn)}else console.warn("only support THREE.CircleGeometry")}setTipsAngle(vn){var yn;const Rn=(yn=this.helperObject3D.angleTips)==null?void 0:yn.element;Rn&&(Rn.innerText=`${vn.toFixed(0)}\xB0`)}setTipsPosition(vn){const yn=this.helperObject3D.angleTips;if(!yn)return;const Rn=vn.project(this.camera),{x:Bn,y:Co,z:Po}=Rn;if(Po>1)return;const To=(Bn+1)/2*100+"%",Io=(-Co+1)/2*100+"%";yn.setLeftTop(To,Io)}}var W$5=Object.defineProperty,X$1=(cr,vn,yn)=>vn in cr?W$5(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,j$7=(cr,vn,yn)=>(X$1(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class _$5 extends B$4{constructor(...vn){super(...vn),j$7(this,"startInfo"),j$7(this,"name","RectangleScaleController")}enable(){this.helperObject3D.enable(),super.enable()}disable(){this.helperObject3D.disable(),super.disable()}show(){this.helperObject3D.show(),super.show()}hide(){this.helperObject3D.hide(),super.hide()}onApplyOriginObjectPosition(vn){this.isDragging||super.onApplyOriginObjectPosition(vn)}onApplyOriginObjectScale(vn){this.helperObject3D.applyHelperScaleMatrix4(vn.matrix,vn.origin)}getDragPlane(){const vn=new Plane,yn=this.helperObject3D.cornerPositions;if(yn.length!==0)return yn.length<3?vn.setFromNormalAndCoplanarPoint(this.originObject3D.getWorldDirection(new Vector3),yn[0]):vn.setFromCoplanarPoints(yn[0],yn[1],yn[2]),vn}dragStart(vn,yn){var Rn,Bn;(Bn=(Rn=this.helperObject3D).updatePoints)==null||Bn.call(Rn);const Co=this.getDragPlane();if(!Co)return this.dragEnd();this.startInfo={startPoint:{position:yn.position.clone(),direction:yn.direction},plane:Co},this.hooks.emit("scaleStart"),this.render(),this.isDragging=!0}dragging(vn){if(!this.isDragging)return;const yn=u$b(this.camera,vn,this.container);if(!yn)return this.dragEnd();this.scale(yn)}scale(vn){var yn,Rn;if(!this.startInfo)return;const Bn=this.originObject3D,{startPoint:Co,plane:Po}=this.startInfo,To=this.helperObject3D.cornerPositions;if(To.length<4)return this.dragEnd();const Io=vn.ray.intersectPlane(Po,new Vector3);if(!Io||u$o(Io,this.camera.position))return;const $l=new Vector3().addVectors(To[0],To[2]).divideScalar(2),{position:Wl,direction:Xl}=Co,Yl=new Vector3().subVectors(To[1],To[0]),Zl=new Vector3().subVectors(To[3],To[0]),ey=ly=>{const sy=new Vector3(0,0,0);if(!this.startInfo)return sy;const cy=(ly==="ew"?Yl:Zl).clone(),fy=Wl.clone().projectOnVector(cy),vy=Io.clone().projectOnVector(cy),dy=$l.clone().projectOnVector(cy);if(vy.equals(fy))return sy;if(ly==="ns"&&typeof this.startInfo.dragPointInCenterBottom!="boolean"){const wy=new Vector3().subVectors(vy,dy),Cy=wy.x<0&&cy.x>=0,My=wy.y<0&&cy.y>=0,Py=wy.z<0&&cy.z>=0;this.startInfo.dragPointInCenterBottom=Cy||My||Py}if(ly==="ew"&&typeof this.startInfo.dragPointInCenterLeft!="boolean"){const wy=new Vector3().subVectors(vy,dy),Cy=wy.x<0&&cy.x>=0,My=wy.y<0&&cy.y>=0,Py=wy.z<0&&cy.z>=0;this.startInfo.dragPointInCenterLeft=Cy||My||Py}const Ay=new Vector3().subVectors(vy,fy),gy=Ay.length();return gy>.3?(console.warn("offset.length() > 0.3, skipped",gy),sy):Ay},Rm=ey("ew"),ry=ey("ns"),_g=()=>{const ly=Rm;this.helperObject3D.cornerPositions.forEach((sy,cy)=>{var fy;(fy=this.startInfo)!=null&&fy.dragPointInCenterLeft?(cy===0||cy===3)&&sy.add(ly):(cy===1||cy===2)&&sy.add(ly)})},ty=()=>{const ly=ry;this.helperObject3D.cornerPositions.forEach((sy,cy)=>{var fy;(fy=this.startInfo)!=null&&fy.dragPointInCenterBottom?(cy===0||cy===1)&&sy.add(ly):(cy===2||cy===3)&&sy.add(ly)})};switch(Xl){case"ew":_g();break;case"ns":ty();break;case"nesw":case"nwse":_g(),ty()}const ny=new Vector3().subVectors(To[1],To[0]).length()/Yl.length(),iy=new Vector3().subVectors(To[3],To[0]).length()/Zl.length(),oy=new Vector3(ny,iy,1),ay=new Matrix4().scale(oy);Bn.isCSS3DObjectPlus&&Bn.applyScaleMatrix4?Bn.applyScaleMatrix4(ay):Bn.scale.applyMatrix4(ay),Co.position.copy(Io);const uy=new Vector3().addVectors(To[0],To[2]).divideScalar(2),hy=new Vector3().subVectors(uy,$l),my=new Matrix4().setPosition(hy);Bn.applyMatrix4(my),(yn=this.helperObject3D.css3DInstance)==null||yn.css3DObject.applyMatrix4(my),(Rn=this.helperObject3D.plane)==null||Rn.applyMatrix4(my),this.internalHooks.emit("applyObjectScale",{matrix:ay}),this.internalHooks.emit("applyObjectPosition",{matrix:my}),this.render()}dragEnd(){this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.hooks.emit("scaleEnd"),this.render())}}var g$b=Object.defineProperty,c$e=(cr,vn,yn)=>vn in cr?g$b(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,d$a=(cr,vn,yn)=>(c$e(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class E$6 extends _$5{constructor(...vn){super(...vn),d$a(this,"name","CSS3DScaleController"),this.addHTMLEventListener()}addHTMLEventListener(){this.helperObject3D.points.forEach(vn=>{if(!vn)return;const yn=vn.point,Rn=Po=>this.dragStart(Po,vn),Bn=this.dragging.bind(this),Co=this.dragEnd.bind(this);yn.addEventListener("dragstart",Rn),yn.addEventListener("drag",Bn),yn.addEventListener("dragend",Co)})}}var t$1=Object.defineProperty,l$a=(cr,vn,yn)=>vn in cr?t$1(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,e$1=(cr,vn,yn)=>(l$a(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class x$5 extends B$4{constructor(...vn){super(...vn),e$1(this,"name","BoundingBoxController")}}var p$j=Object.defineProperty,h$8=(cr,vn,yn)=>vn in cr?p$j(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,c$d=(cr,vn,yn)=>(h$8(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S$3 extends f$l{constructor(vn,yn){super(vn,yn),c$d(this,"name","ScaleHelper"),c$d(this,"scaleMeshes",[]),c$d(this,"positions",[]),yn&&(this.positions=yn.positions)}initQuaternion(){this.quaternion.copy(this.originObject3D.quaternion)}initialPosition(vn){this.position.copy(this.originObject3D.position);const yn=typeof this.positions=="function"?this.positions():this.positions;yn&&(this.scaleMeshes=yn.map((Rn,Bn)=>{var Co;const Po=(Co=this.scaleMeshes[Bn])!=null?Co:m$7();return Po.position.copy(Rn.handlePosition),Po.scalePosition=Rn,this.addIfNotExists(Po),Po}))}setScaleByCamera(vn){this.scaleMeshes.forEach(yn=>{yn.scale.setScalar(S$5(vn,yn.scalePosition.handlePosition.clone().applyMatrix4(this.matrixWorld)))})}}function m$7(){const cr=new Group$1;cr.name="ScaleHelperCube";const vn=.05,yn=new BoxGeometry(vn,vn,vn),Rn=new MeshBasicMaterial({color:16776960,transparent:!0,side:DoubleSide}),Bn=new MeshBasicMaterial({color:16776960,opacity:.4,depthTest:!1,depthWrite:!1,transparent:!0,side:DoubleSide}),Co=new Mesh(yn,Rn),Po=new Mesh(yn,Bn);return Co.name="ScaleHelperCube-front",Po.name="ScaleHelperCube-behind",Co.renderOrder=11,Po.renderOrder=10,cr.add(Co,Po),cr}var v$7=Object.defineProperty,p$i=(cr,vn,yn)=>vn in cr?v$7(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,h$7=(cr,vn,yn)=>(p$i(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S$2 extends B$4{constructor(...vn){super(...vn),h$7(this,"name","ScaleController"),h$7(this,"startInfo"),h$7(this,"dragStart",Bn=>{if(this.isDragging)return;this.isDragging=!0;const{intersect:Co}=Bn,Po=this.camera.position;let To=Co.object;To.scalePosition||(To=Co.object.parent);const Io=To.scalePosition.basePosition.clone(),$l=To.scalePosition.handlePosition.clone().clone().sub(Io).clone(),Wl=new Line3(Io,Io.clone().add($l.normalize().multiplyScalar(5)));Wl.applyMatrix4(this.helperObject3D.matrixWorld);const Xl=new Raycaster(Po,Co.point.clone().sub(Po)),Yl=w$o({raycaster:Xl,line:Wl});this.startInfo={line:Wl,scaleStartPoint:Yl,draggingObject:To},this.helperObject3D.scaleMeshes.forEach(Zl=>{Zl.uuid!==To.uuid&&(Zl.visible=!1)}),To.visible=!0,this.hooks.emit("scaleStart")}),h$7(this,"dragging",Bn=>{if(!this.isDragging||!this.startInfo)return;const Co="touches"in Bn?Bn.touches[0].clientX:Bn.x,Po="touches"in Bn?Bn.touches[0].clientY:Bn.y,To=u$b(this.camera,{x:Co,y:Po},this.container);return To?(this.scale(To),!1):this.dragEnd()}),h$7(this,"scale",Bn=>{var Co,Po;if(!this.startInfo)return;const{line:To,scaleStartPoint:Io,draggingObject:$l}=this.startInfo,{scalePosition:Wl}=$l,Xl=w$o({raycaster:Bn,line:To,clampToLine:!1});Xl.applyMatrix4(new Matrix4().getInverse(this.helperObject3D.matrixWorld.clone())),(Po=(Co=this.config)==null?void 0:Co.scaleCallback)==null||Po.call(Co,{intersectPoint:Xl,scalePosition:Wl,offset:Xl.clone().sub(Io)}),$l.position.copy(Xl.clone()),this.hooks.emit("scale",new Vector3(1,1,1))}),h$7(this,"dragEnd",()=>{this.isDragging&&(this.startInfo=void 0,this.isDragging=!1,this.helperObject3D.scaleMeshes.forEach(Bn=>{Bn.visible=!0}),this.internalHooks.emit("initialHelperPosition"),this.hooks.emit("scaleEnd"))});const yn=this.show.bind(this),Rn=this.hide.bind(this);this.domEvents.addEventListener(this.helperObject3D,"mousedown",this.dragStart),document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd),this.domEvents.addEventListener(this.helperObject3D,"touchstart",this.dragStart),document.addEventListener("touchmove",this.dragging),document.addEventListener("touchend",this.dragEnd),this.hooks.on("rotateStart",Rn),this.hooks.on("rotateEnd",yn),this.hooks.on("moveStart",Rn),this.hooks.on("moveEnd",yn),this.hooks.on("moveByMouseEnable",Rn),this.hooks.on("moveByMouseDisable",yn),this.disposers.push(()=>{this.domEvents.removeEventListener(this.helperObject3D,"mousedown",this.dragStart),document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.dragEnd),this.domEvents.removeEventListener(this.helperObject3D,"touchstart",this.dragStart),document.removeEventListener("touchmove",this.dragging),document.removeEventListener("touchend",this.dragEnd),this.hooks.off("rotateStart",Rn),this.hooks.off("rotateEnd",yn),this.hooks.off("moveStart",Rn),this.hooks.off("moveEnd",yn),this.hooks.off("moveByMouseEnable",Rn),this.hooks.off("moveByMouseDisable",yn)})}initialHelperPosition(){this.helperObject3D.initialPosition();const vn=this;vn.offHoverListener&&vn.offHoverListener(),vn.offHoverListener=this.hoverListener(this.helperObject3D.scaleMeshes)}setScale(vn){var yn,Rn,Bn;let Co=1,Po=1,To=1;typeof vn=="number"?(Co=vn,Po=vn,To=vn):typeof vn=="object"&&(Co=(yn=vn.x)!=null?yn:1,Po=(Rn=vn.y)!=null?Rn:1,To=(Bn=vn.z)!=null?Bn:1);const Io=new Vector3(Co,Po,To);this.hooks.emit("wantToScale",Io)||(this.originObject3D.scale.copy(Io),this.internalHooks.emit("setObjectScale",Io),this.hooks.emit("scale",Io),this.render())}}function n$9(cr,vn){this._camera=cr||null,this._domElement=vn||document,this._raycaster=new Raycaster,this._selected=null,this._boundObjs={};var yn=this;this._$onClick=function(){yn._onClick.apply(yn,arguments)},this._$onDblClick=function(){yn._onDblClick.apply(yn,arguments)},this._$onMouseMove=function(){yn._onMouseMove.apply(yn,arguments)},this._$onMouseDown=function(){yn._onMouseDown.apply(yn,arguments)},this._$onMouseUp=function(){yn._onMouseUp.apply(yn,arguments)},this._$onTouchMove=function(){yn._onTouchMove.apply(yn,arguments)},this._$onTouchStart=function(){yn._onTouchStart.apply(yn,arguments)},this._$onTouchEnd=function(){yn._onTouchEnd.apply(yn,arguments)},this._$onContextmenu=function(){yn._onContextmenu.apply(yn,arguments)},this._domElement.addEventListener("click",this._$onClick,!1),this._domElement.addEventListener("dblclick",this._$onDblClick,!1),this._domElement.addEventListener("mousemove",this._$onMouseMove,!1),this._domElement.addEventListener("mousedown",this._$onMouseDown,!1),this._domElement.addEventListener("mouseup",this._$onMouseUp,!1),this._domElement.addEventListener("touchmove",this._$onTouchMove,!1),this._domElement.addEventListener("touchstart",this._$onTouchStart,!1),this._domElement.addEventListener("touchend",this._$onTouchEnd,!1),this._domElement.addEventListener("contextmenu",this._$onContextmenu,!1)}n$9.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,!1),this._domElement.removeEventListener("dblclick",this._$onDblClick,!1),this._domElement.removeEventListener("mousemove",this._$onMouseMove,!1),this._domElement.removeEventListener("mousedown",this._$onMouseDown,!1),this._domElement.removeEventListener("mouseup",this._$onMouseUp,!1),this._domElement.removeEventListener("touchmove",this._$onTouchMove,!1),this._domElement.removeEventListener("touchstart",this._$onTouchStart,!1),this._domElement.removeEventListener("touchend",this._$onTouchEnd,!1),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,!1)};n$9.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"];n$9.prototype._getRelativeMouseXY=function(cr){var vn=cr.target||cr.srcElement;vn.nodeType===3&&(vn=vn.parentNode);var yn={x:0,y:0},Rn=vn,Bn=getComputedStyle(Rn,null);yn.y+=parseInt(Bn.getPropertyValue("padding-top"),10),yn.x+=parseInt(Bn.getPropertyValue("padding-left"),10);do yn.x+=Rn.offsetLeft,yn.y+=Rn.offsetTop,Bn=getComputedStyle(Rn,null),yn.x+=parseInt(Bn.getPropertyValue("border-left-width"),10),yn.y+=parseInt(Bn.getPropertyValue("border-top-width"),10);while(Rn=Rn.offsetParent);var Co={width:vn===window?window.innerWidth:vn.offsetWidth,height:vn===window?window.innerHeight:vn.offsetHeight};return{x:Number((cr.pageX-yn.x)/Co.width)*2-1,y:-((cr.pageY-yn.y)/Co.height)*2+1}};n$9.prototype._objectCtxInit=function(cr){cr._3xDomEvent={}};n$9.prototype._objectCtxDeinit=function(cr){delete cr._3xDomEvent};n$9.prototype._objectCtxIsInit=function(cr){return!!cr._3xDomEvent};n$9.prototype._objectCtxGet=function(cr){return cr._3xDomEvent};n$9.prototype.camera=function(cr){return cr&&(this._camera=cr),this._camera};n$9.prototype.bind=function(cr,vn,yn,Rn){console.assert(n$9.eventNames.indexOf(vn)!==-1,"not available events:"+vn),this._objectCtxIsInit(cr)||this._objectCtxInit(cr);var Bn=this._objectCtxGet(cr);Bn[vn+"Handlers"]||(Bn[vn+"Handlers"]=[]),Bn[vn+"Handlers"].push({callback:yn,useCapture:Rn}),this._boundObjs[vn]===void 0&&(this._boundObjs[vn]=[]),this._boundObjs[vn].push(cr)};n$9.prototype.addEventListener=n$9.prototype.bind;n$9.prototype.unbind=function(cr,vn,yn,Rn){console.assert(n$9.eventNames.indexOf(vn)!==-1,"not available events:"+vn),this._objectCtxIsInit(cr)||this._objectCtxInit(cr);var Bn=this._objectCtxGet(cr);Bn[vn+"Handlers"]||(Bn[vn+"Handlers"]=[]);for(var Co=Bn[vn+"Handlers"],Po=0;Po<Co.length;Po++){var To=Co[Po];if(yn==To.callback&&Rn==To.useCapture){Co.splice(Po,1);break}}var Io=this._boundObjs[vn].indexOf(cr);this._boundObjs[vn].splice(Io,1)};n$9.prototype.removeEventListener=n$9.prototype.unbind;n$9.prototype._bound=function(cr,vn){var yn=this._objectCtxGet(vn);return yn?!!yn[cr+"Handlers"]:!1};n$9.prototype._onMove=function(cr,vn,yn,Rn){var Bn=this._boundObjs[cr];if(!(Bn===void 0||Bn.length===0)){var Co=new Vector2;Co.set(vn,yn),this._raycaster.setFromCamera(Co,this._camera);var Po=this._raycaster.intersectObjects(Bn),To=this._selected;if(Po.length>0){var Io,$l,Wl,Xl=Po[0],Yl=Xl.object;this._selected=Yl,Wl=this._bound("mousemove",Yl),To!=Yl&&(Io=this._bound("mouseover",Yl),$l=To&&this._bound("mouseout",To))}else $l=To&&this._bound("mouseout",To),this._selected=null;Wl&&this._notify("mousemove",Yl,Rn,Xl),Io&&this._notify("mouseover",Yl,Rn,Xl),$l&&this._notify("mouseout",To,Rn,Xl)}};n$9.prototype._onEvent=function(cr,vn,yn,Rn){var Bn=this._boundObjs[cr];if(!(Bn===void 0||Bn.length===0)){var Co=new Vector2;Co.set(vn,yn),this._raycaster.setFromCamera(Co,this._camera);var Po=this._raycaster.intersectObjects(Bn,!0);if(Po.length!==0){for(var To=Po[0],Io=To.object,$l=this._objectCtxGet(Io),Wl=Io.parent;typeof $l=="undefined"&&Wl;)$l=this._objectCtxGet(Wl),Wl=Wl.parent;$l&&this._notify(cr,Io,Rn,To)}}};n$9.prototype._notify=function(cr,vn,yn,Rn){var Bn=this._objectCtxGet(vn),Co=Bn?Bn[cr+"Handlers"]:null;if(!Bn||!Co||Co.length===0){vn.parent&&this._notify(cr,vn.parent,yn,Rn);return}for(var Co=Bn[cr+"Handlers"],Po=0;Po<Co.length;Po++){var To=Co[Po],Io=!0;To.callback({type:cr,target:vn,origDomEvent:yn,intersect:Rn,stopPropagation:function(){Io=!1}}),Io&&To.useCapture===!1&&vn.parent&&this._notify(cr,vn.parent,yn,Rn)}};n$9.prototype._onMouseDown=function(cr){return this._onMouseEvent("mousedown",cr)};n$9.prototype._onMouseUp=function(cr){return this._onMouseEvent("mouseup",cr)};n$9.prototype._onMouseEvent=function(cr,vn){var yn=this._getRelativeMouseXY(vn);this._onEvent(cr,yn.x,yn.y,vn)};n$9.prototype._onMouseMove=function(cr){var vn=this._getRelativeMouseXY(cr);this._onMove("mousemove",vn.x,vn.y,cr),this._onMove("mouseover",vn.x,vn.y,cr),this._onMove("mouseout",vn.x,vn.y,cr)};n$9.prototype._onClick=function(cr){this._onMouseEvent("click",cr)};n$9.prototype._onDblClick=function(cr){this._onMouseEvent("dblclick",cr)};n$9.prototype._onContextmenu=function(cr){this._onMouseEvent("contextmenu",cr)};n$9.prototype._onTouchStart=function(cr){return this._onTouchEvent("touchstart",cr)};n$9.prototype._onTouchEnd=function(cr){return this._onTouchEvent("touchend",cr)};n$9.prototype._onTouchMove=function(cr){if(cr.touches.length==1){var vn=Number(cr.touches[0].pageX/window.innerWidth)*2-1,yn=-(cr.touches[0].pageY/window.innerHeight)*2+1;this._onMove("mousemove",vn,yn,cr),this._onMove("mouseover",vn,yn,cr),this._onMove("mouseout",vn,yn,cr)}};n$9.prototype._onTouchEvent=function(cr,vn){var yn=vn.touches;if(yn.length==0&&(yn=vn.changedTouches),yn.length==1){var Rn=Number(yn[0].pageX/window.innerWidth)*2-1,Bn=-(yn[0].pageY/window.innerHeight)*2+1;this._onEvent(cr,Rn,Bn,vn)}};var I$1=Object.defineProperty,y$7=Object.getOwnPropertySymbols,W$4=Object.prototype.hasOwnProperty,j$6=Object.prototype.propertyIsEnumerable,g$a=(cr,vn,yn)=>vn in cr?I$1(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$h=(cr,vn)=>{for(var yn in vn||(vn={}))W$4.call(vn,yn)&&g$a(cr,yn,vn[yn]);if(y$7)for(var yn of y$7(vn))j$6.call(vn,yn)&&g$a(cr,yn,vn[yn]);return cr},c$c=(cr,vn,yn)=>(g$a(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),w$5=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const M$5="Object3DHelperPlugin",O$2=M$5,Z$1=()=>{console.error(`${O$2} is disposed`)},ee=()=>{console.warn(`${O$2} is disabled`)},re=()=>{console.error(`${O$2} is disabled`)};class Tr extends F$i{constructor(vn){super(vn),c$c(this,"name",M$5),c$c(this,"state",{visible:!0,enabled:!0,disposed:!1}),c$c(this,"objectHelperMap",new Map),c$c(this,"css3DObjectParentMap",new Map),c$c(this,"css3DObjectModeMap",new Map),c$c(this,"css3DRender"),this.five=vn,this.css3DRender=new y$u(this.five.scene),console.warn("Object3DHelper: \u4F7F\u7528\u6B64\u63D2\u4EF6\uFF0C\u9700\u8981\u5728\u521D\u59CB\u5316five\u65F6\uFF0C\u8BBE\u7F6Efive\u53C2\u6570: { backgroundAlpha: 0, backgroundColor: 0x000000 }"),Object.assign(window,{[`__${M$5.toUpperCase()}_DEBUG__`]:this})}show(vn){return w$5(this,null,function*(){this.setState({visible:!0},vn)})}hide(vn){return w$5(this,null,function*(){this.setState({visible:!1},vn)})}enable(vn){this.setState({enabled:!0},vn)}disable(vn){this.setState({enabled:!1},vn)}dispose(){this.setState({disposed:!0})}setState(vn,yn){if(this.state.disposed)return Z$1();if(!this.state.enabled&&vn.enabled!==!0&&vn.disposed!==!0)return re();const Rn=p$h({},this.state);this.state=p$h(p$h({},this.state),vn),vn.disposed!==void 0&&vn.disposed!==Rn.disposed&&vn.disposed&&this.handleDispose(),vn.visible!==void 0&&vn.visible!==Rn.visible&&this.handleVisible(vn.visible),vn.enabled!==void 0&&vn.enabled!==Rn.enabled&&this.handleEnable(vn.enabled),this.hooks.emit("stateChange",{state:this.state,prevState:Rn})}getObject3DHelper(vn){return this.objectHelperMap.get(vn)}addObject3DHelper(vn,yn={}){var Rn;if(!vn){console.error("Object3D is undefined");return}if(this.objectHelperMap.has(vn)){console.warn(`Object3DHelperPlugin: object3D ${vn.name} is already has helper`);return}const Bn=new L$6,Co=[],Po=(Rn=this.five.getElement())==null?void 0:Rn.parentElement,To=this.five.camera,Io=p$h(p$h({},{moveHelper:!0,rotateHelper:!0,scaleHelper:!0,boundingBoxHelper:!1,positionFrom:"objectPosition"}),yn),{moveHelper:$l,rotateHelper:Wl,scaleHelper:Xl,boundingBoxHelper:Yl}=Io,Zl=Bn.hooks,ey=new E$v,Rm=new n$9(this.five.camera,this.five.getElement()),ry=_g=>{if(_g)return typeof _g=="boolean"?_g:_g.enable};if(ry($l)){const _g=p$h(p$h({},this.getConfig(Io.moveHelper)),Io),ty=new D$8(vn,p$h({},_g)),ny=new F$2(this.five,Rm,w$7,vn,ty,_g,Zl,ey);Bn.addControllers({moveController:ny.helperController}),Co.push(()=>ny.dispose())}if(ry(Wl)){const _g=p$h(p$h({},this.getConfig(Io.rotateHelper)),Io),ty=new D$7(vn,p$h({container:Po},_g)),ny=new F$2(this.five,Rm,P$5,vn,ty,_g,Zl,ey);Bn.addControllers({rotateController:ny.helperController}),Co.push(()=>ny.dispose())}if(ry(Yl)){const _g=new d$d(vn),ty=new F$2(this.five,Rm,x$5,vn,_g,void 0,Zl,ey);Bn.addControllers({boundingBoxController:ty.helperController})}if(ry(Xl))if(vn.isCSS3DObject&&Po){const _g=new v$a(vn,Po,To,this.five.scene),ty=new F$2(this.five,Rm,E$6,vn,_g,void 0,Zl,ey);Bn.addControllers({scaleController:ty.helperController}),Co.push(()=>ty.dispose()),M$u(this.five).then(()=>{var ny,iy;if(vn.isCSS3DObjectPlus){const oy=vn;if(!oy||oy.mode!=="front")return;const ay=(ny=this.css3DRender.behindModeCSS3DRenderer.wrapper)!=null?ny:d$D(this.five);ay&&(this.css3DObjectParentMap.set(oy,oy.parent),oy.removeFromParent(),this.css3DRender.behindModeCSS3DRenderer.setWrapper(ay),(iy=this.css3DRender.getBehindCSS3DObjectGroup())==null||iy.add(oy),this.css3DRender.render(this.five.camera))}else vn.isCSS3DObject&&(this.css3DObjectModeMap.set(vn,vn.mode),vn.mode="behind")})}else{const _g=p$h(p$h({},this.getConfig(Io.scaleHelper)),Io),ty=new S$3(vn,_g),ny=new F$2(this.five,Rm,S$2,vn,ty,_g,Zl,ey);Bn.addControllers({scaleController:ny.helperController}),Co.push(()=>ny.dispose())}return this.objectHelperMap.set(vn,{helper:Bn,disposers:Co}),Bn.controllers}removeObject3DHelper(vn){if(!this.objectHelperMap.has(vn))return;const{helper:yn,disposers:Rn}=this.objectHelperMap.get(vn);if(yn){if(vn.isCSS3DObjectPlus){const Bn=vn,Co=this.css3DObjectParentMap.get(Bn);Co&&Co.add(Bn),this.css3DRender.render(this.five.camera)}else if(vn.isCSS3DObject){const Bn=this.css3DObjectModeMap.get(vn);vn.mode=Bn}this.objectHelperMap.delete(vn),yn.dispose(),Rn==null||Rn.forEach(Bn=>Bn==null?void 0:Bn())}}handleEnable(vn,yn=!0){vn?(this.everyHelperDo(Rn=>Rn.enable()),this.hooks.emit("enable",{userAction:yn})):(this.everyHelperDo(Rn=>Rn.disable()),this.hooks.emit("disable",{userAction:yn})),this.state.enabled=vn}handleVisible(vn,yn=!0){vn?(this.everyHelperDo(Rn=>Rn.show()),this.actionIfStateIsEnabled(()=>this.hooks.emit("show",{userAction:yn}))):(this.everyHelperDo(Rn=>Rn.hide()),this.actionIfStateIsEnabled(()=>this.hooks.emit("hide",{userAction:yn}))),this.state.visible=vn}handleDispose(){this.everyHelperDo((vn,yn)=>{vn.dispose(),yn==null||yn.forEach(Rn=>Rn==null?void 0:Rn())})}everyHelperDo(vn){this.objectHelperMap.forEach(({helper:yn,disposers:Rn})=>{yn&&vn(yn,Rn)})}actionIfStateIsEnabled(vn,yn){if(this.state.enabled)return vn();yn!=null&&yn.warnLog&&ee()}getConfig(vn){if(vn&&typeof vn!="boolean"&&vn.enable)return vn}}var r$8=Object.defineProperty,n$8=(cr,vn,yn)=>vn in cr?r$8(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,t=(cr,vn,yn)=>(n$8(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class f$e{constructor(){t(this,"five"),t(this,"_cursor"),t(this,"_pointSelector"),t(this,"_fiveDomEvents"),t(this,"_object3DHelper"),t(this,"inited",!1),t(this,"init",vn=>{this.inited=!0,this.five=vn,this._cursor=void 0,this._pointSelector=void 0,this._fiveDomEvents=void 0,this._object3DHelper=void 0})}get cursor(){if(!this.inited)throw new Error("Global not inited");return this._cursor?this._cursor:(this._cursor=new B$i(this.five.getElement()),this._cursor)}get pointSelector(){if(!this.inited)throw new Error("Global not inited");return this._pointSelector?this._pointSelector:(this._pointSelector=new se$3(this.five,{mode:"cursor"}),this._pointSelector)}get fiveDomEvents(){if(!this.inited)throw new Error("Global not inited");return this._fiveDomEvents?this._fiveDomEvents:(this._fiveDomEvents=new Q$a(this.five,{noEmitWhenNotInScene:!0}),this._fiveDomEvents)}get object3DHelper(){if(!this.inited)throw new Error("Global not inited");return this._object3DHelper?this._object3DHelper:(this._object3DHelper=new Tr(this.five),this._object3DHelper)}}const v$6=new f$e;window.globalModules=v$6;function u$9(cr,vn){return cr?vn(cr)?cr:cr.parent?u$9(cr.parent,vn):null:null}function f$d(cr){const vn=[...cr];if(cr.length<3)return cr;const yn=cr[cr.length-1],Rn=cr[0];return yn.equals(Rn)||vn.push(Rn),vn}var M$4=Object.defineProperty,E$5=Object.defineProperties,b$6=Object.getOwnPropertyDescriptors,a$7=Object.getOwnPropertySymbols,g$9=Object.prototype.hasOwnProperty,f$c=Object.prototype.propertyIsEnumerable,p$g=(cr,vn,yn)=>vn in cr?M$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$7=(cr,vn)=>{for(var yn in vn||(vn={}))g$9.call(vn,yn)&&p$g(cr,yn,vn[yn]);if(a$7)for(var yn of a$7(vn))f$c.call(vn,yn)&&p$g(cr,yn,vn[yn]);return cr},c$b=(cr,vn)=>E$5(cr,b$6(vn)),S$1=(cr,vn)=>{var yn={};for(var Rn in cr)g$9.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&a$7)for(var Rn of a$7(cr))vn.indexOf(Rn)<0&&f$c.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},h$6=(cr,vn,yn)=>(p$g(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class P$4 extends c$C{constructor(vn){super(),h$6(this,"name","PolylineBaseMesh"),h$6(this,"lines",[]),h$6(this,"withDots"),h$6(this,"paramsStyle");const yn=vn,{withDots:Rn,points:Bn}=yn,Co=S$1(yn,["withDots","points"]);this.withDots=Rn!=null?Rn:!0,Bn&&this.setPoints(Bn),Co&&this.setStyle(Co)}get style(){var vn;return{lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,dashed:this.dashed,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode,lengthEnable:(vn=this.paramsStyle)==null?void 0:vn.lengthEnable}}get opacity(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.lineOpacity)!=null?Rn:(yn=this.paramsStyle)==null?void 0:yn.lineOpacity}get lineColor(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.color)!=null?Rn:(yn=this.paramsStyle)!=null&&yn.lineColor?new Color(this.paramsStyle.lineColor):void 0}get lineWidth(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.lineWidth)!=null?Rn:(yn=this.paramsStyle)==null?void 0:yn.lineWidth}get dashed(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.dashed)!=null?Rn:(yn=this.paramsStyle)==null?void 0:yn.dashed}get occlusionVisibility(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.occlusionVisibility)!=null?Rn:(yn=this.paramsStyle)==null?void 0:yn.occlusionVisibility}get occlusionMode(){var vn,yn,Rn;return(Rn=(vn=this.lines[0])==null?void 0:vn.occlusionMode)!=null?Rn:(yn=this.paramsStyle)==null?void 0:yn.occlusionMode}get points(){var vn,yn,Rn;return this.lines.map(Bn=>Bn.points[0]).concat((Rn=(yn=this.lines)==null?void 0:yn[((vn=this.lines)==null?void 0:vn.length)-1])==null?void 0:Rn.points[1]).filter(Boolean)}setPoints(vn,yn={closed:!1}){let Rn=vn.map(t$j);yn.closed&&(Rn=f$d(Rn)),Rn.forEach((Bn,Co)=>{var Po;const To=Rn[Co+1];if(Co!==0&&To===void 0)return;const Io=(Po=this.lines[Co])!=null?Po:(()=>{const $l=new z$g(c$b(r$7({},this.style),{pointVisibility:this.withDots?{startPoint:Co===0,endPoint:!0}:!1}));return this.lines[Co]=$l,this.add($l),$l})();Io.setStyle(this.style),Io.setPoints([Bn,To])}),Rn.length===0?(this.lines.forEach(Bn=>Bn.removeFromParent()),this.lines=[]):Rn.length===1||this.lines.length>Rn.length-1&&this.lines.splice(Rn.length-1).forEach(Bn=>Bn.removeFromParent())}setStyle(vn){this.paramsStyle=r$7(r$7({},this.paramsStyle),vn),this.lines.forEach(yn=>yn.setStyle(this.paramsStyle))}highlight(){this.lines.forEach(vn=>vn.highlight())}unhighlight(){this.lines.forEach(vn=>vn.unhighlight())}}class j$5 extends P$4{constructor(...vn){super(c$b(r$7({},vn[0]),{withDots:!1})),h$6(this,"name","PolylineMesh")}}class x$4 extends P$4{constructor(...vn){super(c$b(r$7({},vn[0]),{withDots:!0})),h$6(this,"name","PolylineWithDotsMesh")}}var w$4=Object.defineProperty,v$5=Object.defineProperties,E$4=Object.getOwnPropertyDescriptors,g$8=Object.getOwnPropertySymbols,b$5=Object.prototype.hasOwnProperty,D$4=Object.prototype.propertyIsEnumerable,c$a=(cr,vn,yn)=>vn in cr?w$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,l$9=(cr,vn)=>{for(var yn in vn||(vn={}))b$5.call(vn,yn)&&c$a(cr,yn,vn[yn]);if(g$8)for(var yn of g$8(vn))D$4.call(vn,yn)&&c$a(cr,yn,vn[yn]);return cr},d$9=(cr,vn)=>v$5(cr,E$4(vn)),r$6=(cr,vn,yn)=>(c$a(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);const p$f=new Map;class M$3 extends c$C{constructor(vn,yn){var Rn,Bn;super(),r$6(this,"name","Sculpt"),r$6(this,"isSculptObject",!0),r$6(this,"draggable"),r$6(this,"selected"),r$6(this,"config"),r$6(this,"on",(Co,Po,To)=>p.modules.fiveDomEvents.addEventListener(this,Co,Po,To)),r$6(this,"off",(...Co)=>p.modules.fiveDomEvents.removeEventListener(this,...Co)),r$6(this,"applyObjectMatrixWorld",(Co,Po)=>{const To=Po!=null?Po:this;return To.updateMatrixWorld(),a$x(To,Co)}),r$6(this,"applyObjectReversalMatrixWorld",(Co,Po)=>{const To=Po!=null?Po:this;return To.updateMatrixWorld(),e$g(To,Co)}),vn!=null&&vn.id&&(this.uuid=vn.id),this.config=l$9({defaultAction:!0,occlusionVisibility:!0,occlusionMode:"translucence"},yn),vn&&(i$w((Rn=this.config)==null?void 0:Rn.occlusionMode)&&(vn.style=d$9(l$9({},vn.style),{occlusionMode:this.config.occlusionMode})),i$w((Bn=this.config)==null?void 0:Bn.occlusionVisibility)&&(vn.style=d$9(l$9({},vn.style),{occlusionVisibility:this.config.occlusionVisibility}))),K$e("esc",()=>{this.stopCreating()}),this.config.defaultAction&&(K$e("backspace, delete",()=>{this.selected&&this.delete()}),this.on("click",()=>{var Co;this.editing||(this.select({only:!0}),this.editor.enable(),(Co=this.parent)==null||Co.children.forEach(Po=>{var To;Po instanceof M$3&&Po!==this&&((To=Po._editor)==null||To.disable())}))}),K$e("esc",()=>{this.selected&&this.unselect()}))}get editing(){return this.pointSelector.enabled}get baseData(){return{id:this.uuid,type:this.type}}get pointSelector(){return p.modules.pointSelector}undo(){throw new Error("Method not implemented.")}redo(){throw new Error("Method not implemented.")}canUndo(){throw new Error("Method not implemented.")}canRedo(){throw new Error("Method not implemented.")}stopCreating(){p.modules.pointSelector.disable()}delete(){var vn;this.stopCreating(),this.removeFromParent(),this.off(),(vn=this.editor)==null||vn.disable()}select(vn={only:!1}){if(this.selected)return;this.selected=!0,this.highlight(),p$f.has(this.parent.uuid)||p$f.set(this.parent.uuid,[]);const yn=p$f.get(this.parent.uuid);yn.push(this),vn.only&&(yn==null||yn.forEach(Rn=>{Rn!==this&&Rn.unselect()}))}unselect(){var vn;this.selected&&(this.selected=!1,this.unhighlight(),(vn=this._editor)==null||vn.disable())}highlight(){}unhighlight(){}showDeleteButton(vn,yn){p.modules.cursor.showDeleteButton({clientX:vn,clientY:yn,container:document.body,onClick:()=>this.delete()}),p.modules.five.once("cameraUpdate",()=>{p.modules.cursor.removeDeleteButton()})}}var b$4=Object.defineProperty,l$8=Object.getOwnPropertySymbols,h$5=Object.prototype.hasOwnProperty,j$4=Object.prototype.propertyIsEnumerable,c$9=(cr,vn,yn)=>vn in cr?b$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$7=(cr,vn)=>{for(var yn in vn||(vn={}))h$5.call(vn,yn)&&c$9(cr,yn,vn[yn]);if(l$8)for(var yn of l$8(vn))j$4.call(vn,yn)&&c$9(cr,yn,vn[yn]);return cr},r$5=(cr,vn,yn)=>(c$9(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class O$1 extends c$C{constructor(vn){super(),r$5(this,"hooks",new E$v),r$5(this,"originObject"),this.originObject=vn}enable(){this.originObject.add(this)}disable(){this.originObject.remove(this)}}class u$8 extends O$1{constructor(vn,yn){super(vn),r$5(this,"objectHelperConfig"),r$5(this,"onObjectUpdate",()=>{this.hooks.emit("objectUpdate")}),this.objectHelperConfig=yn}get helper(){var vn;return(vn=p.modules.object3DHelper.getObject3DHelper(this.originObject))==null?void 0:vn.helper}enable(){super.enable();const vn=typeof this.objectHelperConfig=="function"?this.objectHelperConfig():this.objectHelperConfig;p.modules.object3DHelper.addObject3DHelper(this.originObject,n$7({positionFrom:"boundingBox"},vn));const yn=p.modules.object3DHelper.getObject3DHelper(this.originObject).helper;yn.hooks.on("move",this.onObjectUpdate),yn.hooks.on("rotate",this.onObjectUpdate),yn.hooks.on("scale",this.onObjectUpdate)}disable(){var vn,yn,Rn;super.disable(),(vn=this.helper)==null||vn.hooks.off("move",this.onObjectUpdate),(yn=this.helper)==null||yn.hooks.off("rotate",this.onObjectUpdate),(Rn=this.helper)==null||Rn.hooks.off("scale",this.onObjectUpdate),p.modules.object3DHelper.removeObject3DHelper(this.originObject)}initialHelperMatrix(){var vn;(vn=this.helper)==null||vn.initialHelperMatrix()}}var p$e=Object.defineProperty,g$7=(cr,vn,yn)=>vn in cr?p$e(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$4=(cr,vn,yn)=>(g$7(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class l$7 extends O$1{constructor(vn){super(vn),o$4(this,"draggingPoints",[]),o$4(this,"onDragstart",yn=>{const Rn=yn.target;this.draggingPoints=this.pointMeshes.filter(Bn=>Bn.position.equals(Rn.position))}),o$4(this,"onDragend",yn=>{this.draggingPoints=[]})}get pointMeshes(){return this.children.filter(vn=>vn instanceof ot$3)}get pointHandles(){return this.children}enable(){super.enable(),this.points.filter(i$w).forEach(vn=>{const yn=new ot$3;yn.visible=!1,yn.position.copy(vn),yn.draggable=!0,p.modules.fiveDomEvents.addEventListener(yn,"drag",this.onDrag),p.modules.fiveDomEvents.addEventListener(yn,"dragstart",this.onDragstart),p.modules.fiveDomEvents.addEventListener(yn,"dragend",this.onDragend),this.add(yn)})}disable(){super.disable(),this.removeChildren()}}class H$5 extends l$7{constructor(vn){super(vn),o$4(this,"onDrag",yn=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const Rn=w$p(p.modules.five,yn.raycaster);this.draggingPoints.forEach(Bn=>Bn.position.copy(Rn.point)),this.originObject.lineMesh.setPoints(this.pointMeshes.map(Bn=>Bn.position))})}get points(){return this.originObject.lineMesh.points}}var n$6=Object.defineProperty,p$d=(cr,vn,yn)=>vn in cr?n$6(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$4=(cr,vn,yn)=>(p$d(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class y$6 extends l$7{constructor(vn){super(vn),r$4(this,"onDrag",yn=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const Rn=w$p(p.modules.five,yn.raycaster);this.draggingPoints.forEach(Bn=>Bn.position.copy(Rn.point)),this.originObject.polyLineMesh.setPoints(this.pointMeshes.map(Bn=>Bn.position))})}get points(){return this.originObject.polyLineMesh.points}}function a$6(cr){return Array.isArray(cr)?cr.map(vn=>[vn.x,vn.y,vn.z]):[cr.x,cr.y,cr.z]}var A$4=Object.defineProperty,D$3=Object.defineProperties,T$3=Object.getOwnPropertyDescriptors,R$2=Object.getOwnPropertySymbols,F$1=Object.prototype.hasOwnProperty,k$1=Object.prototype.propertyIsEnumerable,v$4=(cr,vn,yn)=>vn in cr?A$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$c=(cr,vn)=>{for(var yn in vn||(vn={}))F$1.call(vn,yn)&&v$4(cr,yn,vn[yn]);if(R$2)for(var yn of R$2(vn))k$1.call(vn,yn)&&v$4(cr,yn,vn[yn]);return cr},M$2=(cr,vn)=>D$3(cr,T$3(vn)),f$b=(cr,vn,yn)=>(v$4(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),E$3=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class $ extends M$3{constructor(vn,yn){super(vn,yn),f$b(this,"type","Polyline"),f$b(this,"polyLineMesh"),f$b(this,"_editor"),f$b(this,"creatingObject"),vn&&(this.polyLineMesh=new x$4(p$c(p$c({},vn.style),vn)),this.add(this.polyLineMesh))}get editor(){return this._editor||(this._editor=new y$6(this)),this._editor}get data(){return M$2(p$c({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.polyLineMesh.points)),style:{lineColor:new Color(this.polyLineMesh.lineColor).getHex(),lineWidth:this.polyLineMesh.lineWidth,dashed:this.polyLineMesh.dashed}})}setData(vn){vn.points&&this.polyLineMesh.setPoints(this.applyObjectReversalMatrixWorld(vn.points.map(t$j))),this.polyLineMesh.setStyle(vn.style)}highlight(){var vn;(vn=this.polyLineMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.polyLineMesh)==null||vn.unhighlight()}canUndo(){var vn;(vn=this.creatingObject)==null||vn.canUndo()}canRedo(){var vn;(vn=this.creatingObject)==null||vn.canRedo()}undo(){var vn;(vn=this.creatingObject)==null||vn.undo()}redo(){var vn;(vn=this.creatingObject)==null||vn.redo()}create(vn){return E$3(this,null,function*(){this.removeChildren();const yn=new x$4(vn);this.polyLineMesh=yn,this.add(this.polyLineMesh),this.creatingObject=q$1(yn,this.pointSelector,vn),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function q$1(cr,vn,yn){var Rn;const Bn=cr.parent;if(!Bn)return;const{promise:Co,resolve:Po,reject:To}=i$d(),Io=(Rn=yn==null?void 0:yn.limit)!=null?Rn:"none",$l=new j$5(cr.style);Bn.add($l);const Wl=new j$5(M$2(p$c({},cr.style),{dashed:!0,lengthEnable:!1}));Bn.add(Wl),vn.enable();const Xl=[];let Yl,Zl,ey;const Rm=[],ry=()=>Xl.length>0,_g=()=>Rm.length>0,ty=()=>{ry()&&(Rm.push(Xl.pop()),cr.setPoints(Xl),oy(ey),vn.pointSelectorHelper.magnifier.render())},ny=()=>{_g()&&(Xl.push(Rm.pop()),cr.setPoints(Xl),oy(ey),vn.pointSelectorHelper.magnifier.render())},iy=ay=>{Rm.length=0;const uy=Xl.length===0?ay.point:Yl.clone();Xl.push(uy),cr.setPoints(Xl)},oy=ay=>{const uy=()=>{$l.setPoints([]),Wl.setPoints([]),Yl=null};if(!ay||(ey=ay,!(Xl!=null&&Xl.length)))return uy();const hy=Xl.at(-1).clone();Io==="none"?(Yl=ay.point,$l.setPoints([hy,Yl])):Io==="xoz"?(Zl=Zl!=null?Zl:new Plane().setFromNormalAndCoplanarPoint(new Vector3(0,1,0),Xl[0]),vn.plane=Zl,Yl=Zl.projectPoint(ay.point,new Vector3),$l.setPoints([hy,Yl]),Wl.setPoints([Yl,ay.point])):Io==="y"&&(Xl.length===1?(Yl=ay.point,$l.setPoints([hy,Yl])):(Zl=Zl!=null?Zl:new Plane().setFromCoplanarPoints(Xl[0],Xl[1],new Vector3(0,1,0).add(Xl[0])),vn.plane=Zl,Yl=Zl.projectPoint(ay.point,new Vector3),$l.setPoints([hy,Yl]),Wl.setPoints([Yl,ay.point])))};return vn.on("select",iy),vn.on("intersectionUpdate",oy),vn.on("disable",()=>{if(vn.off("select",iy),vn.off("intersectionUpdate",oy),vn.plane=null,Bn.remove($l),Bn.remove(Wl),Xl.length<2)return Bn.remove(cr),To(new Error("Cancelled"));Po()}),{finished:Co,canUndo:ry,canRedo:_g,undo:ty,redo:ny}}var a$5=Object.defineProperty,n$5=(cr,vn,yn)=>vn in cr?a$5(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,o$3=(cr,vn,yn)=>(n$5(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class f$a extends O$1{constructor(vn){super(vn),o$3(this,"onDrag",yn=>{var Rn;const Bn=w$p(p.modules.five,yn.raycaster);(Rn=this.originObject.pointMesh)==null||Rn.position.copy(Bn.point)})}enable(){super.enable(),this.originObject.draggable=!0,this.originObject.on("drag",this.onDrag)}disable(){super.disable(),this.originObject.draggable=!1,this.originObject.off("drag",this.onDrag)}}var b$3=Object.defineProperty,g$6=Object.defineProperties,M$1=Object.getOwnPropertyDescriptors,d$8=Object.getOwnPropertySymbols,P$3=Object.prototype.hasOwnProperty,v$3=Object.prototype.propertyIsEnumerable,c$8=(cr,vn,yn)=>vn in cr?b$3(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,f$9=(cr,vn)=>{for(var yn in vn||(vn={}))P$3.call(vn,yn)&&c$8(cr,yn,vn[yn]);if(d$8)for(var yn of d$8(vn))v$3.call(vn,yn)&&c$8(cr,yn,vn[yn]);return cr},m$6=(cr,vn)=>g$6(cr,M$1(vn)),p$b=(cr,vn,yn)=>(c$8(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),y$5=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class B$3 extends M$3{constructor(vn,yn){super(vn,yn),p$b(this,"type","Point"),p$b(this,"pointMesh"),p$b(this,"_editor"),vn&&(this.pointMesh=new ot$3(f$9(f$9({},vn.style),vn)),this.add(this.pointMesh))}get editor(){return this._editor||(this._editor=new f$a(this)),this._editor}get data(){return m$6(f$9({},this.baseData),{point:a$6(this.applyObjectMatrixWorld(this.pointMesh.position)),style:{color:this.pointMesh.color.getHex(),size:this.pointMesh.size}})}setData(vn){vn.point&&this.pointMesh.position.copy(t$j(vn.point)),this.pointMesh.setStyle(vn.style)}highlight(){var vn;(vn=this.pointMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.pointMesh)==null||vn.unhighlight()}setStyle(vn){this.pointMesh.setStyle(vn)}create(vn){return y$5(this,null,function*(){this.pointMesh&&this.remove(this.pointMesh),this.add(this.pointMesh=new ot$3(vn)),yield U$2(this.pointMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function U$2(cr,vn){return new Promise((yn,Rn)=>{vn.enable(),cr.visible=!1;const Bn=Io=>{Io&&(cr.visible=!0,cr.position.copy(Io.point))},Co=Io=>{Io&&(cr.visible=!0,cr.position.copy(Io.point),Po())},Po=()=>{vn.off("select",Co),vn.off("disable",To),vn.off("intersectionUpdate",Bn),vn.disable(),yn()},To=()=>{vn.off("select",Co),vn.off("disable",To),vn.off("intersectionUpdate",Bn),cr.removeFromParent(),Rn(new Error("Cancelled"))};vn.on("intersectionUpdate",Bn),vn.on("disable",To),vn.once("select",Co)})}var p$a=Object.defineProperty,f$8=Object.defineProperties,P$2=Object.getOwnPropertyDescriptors,l$6=Object.getOwnPropertySymbols,d$7=Object.prototype.hasOwnProperty,c$7=Object.prototype.propertyIsEnumerable,o$2=(cr,vn,yn)=>vn in cr?p$a(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,h$4=(cr,vn)=>{for(var yn in vn||(vn={}))d$7.call(vn,yn)&&o$2(cr,yn,vn[yn]);if(l$6)for(var yn of l$6(vn))c$7.call(vn,yn)&&o$2(cr,yn,vn[yn]);return cr},r$3=(cr,vn)=>f$8(cr,P$2(vn)),y$4=(cr,vn)=>{var yn={};for(var Rn in cr)d$7.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&l$6)for(var Rn of l$6(cr))vn.indexOf(Rn)<0&&c$7.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},g$5=(cr,vn,yn)=>(o$2(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class m$5 extends j$j{constructor(vn){const yn=vn!=null?vn:{},{points:Rn}=yn,Bn=y$4(yn,["points"]);super(),g$5(this,"name","PolygonWithEdgeMesh"),g$5(this,"line",new j$5),Rn&&this.setPoints(Rn),Bn&&this.setStyle(Bn)}get style(){return r$3(h$4({},super.style),{lineWidth:this.lineWidth,lineColor:this.lineColor})}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}raycast(vn,yn){return this.children.forEach(Rn=>{c$L(Rn,vn,yn,!0)}),!1}setPoints(vn,yn){super.setPoints(vn,h$4({closed:!0},yn)),this.points&&(this.line.setPoints(this.points,h$4({closed:!0},yn)),this.addIfNotExists(this.line))}setStyle(vn){super.setStyle(vn),vn.lineOpacity!==void 0?this.line.setStyle(r$3(h$4({},vn),{lineOpacity:vn.lineOpacity})):this.line.setStyle(vn),this.needsRender=!0}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}var a$4=Object.defineProperty,h$3=(cr,vn,yn)=>vn in cr?a$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$2=(cr,vn,yn)=>(h$3(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class M extends m$5{constructor(){super(...arguments),r$2(this,"name","AreaMesh")}}var a$3=Object.defineProperty,c$6=(cr,vn,yn)=>vn in cr?a$3(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,r$1=(cr,vn,yn)=>(c$6(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class u$7 extends l$7{constructor(vn){super(vn),r$1(this,"onDrag",yn=>{if(!this.draggingPoints||this.draggingPoints.length===0)return;const Rn=w$p(p.modules.five,yn.raycaster),Bn=this.originObject.areaMesh.projectPoint(Rn.point);this.draggingPoints.forEach(Co=>Co.position.copy(Bn)),this.originObject.areaMesh.setPoints(this.pointMeshes.map(Co=>Co.position))})}get points(){return this.originObject.areaMesh.points}}var F=Object.defineProperty,I=Object.defineProperties,L$5=Object.getOwnPropertyDescriptors,A$3=Object.getOwnPropertySymbols,N$2=Object.prototype.hasOwnProperty,z$2=Object.prototype.propertyIsEnumerable,E$2=(cr,vn,yn)=>vn in cr?F(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,g$4=(cr,vn)=>{for(var yn in vn||(vn={}))N$2.call(vn,yn)&&E$2(cr,yn,vn[yn]);if(A$3)for(var yn of A$3(vn))z$2.call(vn,yn)&&E$2(cr,yn,vn[yn]);return cr},O=(cr,vn)=>I(cr,L$5(vn)),u$6=(cr,vn,yn)=>(E$2(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),H$4=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class ie extends M$3{constructor(vn,yn){super(vn,yn),u$6(this,"type","Polygon"),u$6(this,"areaMesh"),u$6(this,"_editor"),u$6(this,"creatingObject"),vn&&(this.areaMesh=new M(g$4(g$4({},vn.style),vn)),this.add(this.areaMesh))}get editor(){return this._editor||(this._editor=new u$7(this)),this._editor}get data(){return this.updateMatrixWorld(),O(g$4({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.areaMesh.points)),style:{color:this.areaMesh.color.getHex(),lineColor:this.areaMesh.lineColor.getHex(),lineWidth:this.areaMesh.lineWidth}})}setData(vn){vn.points&&this.areaMesh.setPoints(this.applyObjectReversalMatrixWorld(vn.points.map(t$j))),this.areaMesh.setStyle(vn.style)}highlight(){var vn;(vn=this.areaMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.areaMesh)==null||vn.unhighlight()}canUndo(){var vn;(vn=this.creatingObject)==null||vn.canUndo()}canRedo(){var vn;(vn=this.creatingObject)==null||vn.canRedo()}undo(){var vn;(vn=this.creatingObject)==null||vn.undo()}redo(){var vn;(vn=this.creatingObject)==null||vn.redo()}create(vn){return H$4(this,null,function*(){this.children.forEach(Rn=>{Rn.parent===this&&this.remove(Rn)}),this.children.length=0;const yn=new M(vn);this.areaMesh=yn,this.add(this.areaMesh),this.creatingObject=X(this.areaMesh,this.pointSelector,vn),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function X(cr,vn,yn){var Rn;const{promise:Bn,resolve:Co,reject:Po}=i$d(),To=cr.parent;if(!To){Po(new Error("No container"));return}const Io=(Rn=yn==null?void 0:yn.limit)!=null?Rn:"none",$l=new j$5(cr.style);To==null||To.add($l);const Wl=new j$5(O(g$4({},cr.style),{dashed:!0,lengthEnable:!1}));To==null||To.add(Wl),vn.enable();const Xl=[];let Yl,Zl,ey=!1,Rm;const ry=[],_g=()=>Xl.length>0,ty=()=>ry.length>0,ny=()=>{_g()&&(ry.push(Xl.pop()),ay(Rm),vn.pointSelectorHelper.magnifier.render())},iy=()=>{ty()&&(Xl.push(ry.pop()),ay(Rm),vn.pointSelectorHelper.magnifier.render())},oy=my=>{ry.length=0;const ly=Xl.length===0?my.point:Yl.clone();Xl.push(ly),cr.setPoints(Xl,{closed:!1}),ey&&(uy(),Co())},ay=my=>{const ly=()=>{$l.setPoints([]),Wl.setPoints([]),cr.setPoints(Xl),vn.pointSelectorHelper.magnifier.render()};if(!my||(Rm=my,!(Xl!=null&&Xl.length)))return ly();const sy=Xl.at(-1).clone();if(Xl.length<3&&(Io==="none"?(Yl=my.point,$l.setPoints([sy,Yl]),Wl.setPoints([])):Io==="xoz"?(Zl=Zl!=null?Zl:new Plane().setFromNormalAndCoplanarPoint(new Vector3(0,1,0),Xl[0]),vn.plane=Zl,Yl=Zl.projectPoint(my.point,new Vector3),$l.setPoints([sy,Yl]),Wl.setPoints([Yl,my.point])):Io==="y"&&(Xl.length===1?(Yl=my.point,$l.setPoints([sy,Yl]),Wl.setPoints([])):(Zl=Zl!=null?Zl:new Plane().setFromCoplanarPoints(Xl[0],Xl[1],new Vector3(0,1,0).add(Xl[0])),vn.plane=Zl,Yl=Zl.projectPoint(my.point,new Vector3),$l.setPoints([sy,Yl]),Wl.setPoints([Yl,my.point])))),Xl.length>=3){Yl=cr.projectPoint(my.point);const cy=Xl[0],fy=.2;cy.distanceTo(Yl)<fy||cy.distanceTo(my.point)<fy?(Yl=cy,my.point.copy(cy),vn.pointSelectorHelper.updateWithIntersect(my,{emitEvent:!1}),ey=!0):ey=!1,$l.setPoints([sy,Yl]),Wl.setPoints([Yl,my.point])}Xl.length>=2?(cr.setPoints([...Xl,Yl],{closed:!1}),cr.line.setPoints(cr.points.slice(0,-1)),cr.isBlank?(vn.cursorError=!0,$l.setStyle({lineColor:16734553}),Wl.setStyle({lineColor:16734553})):(vn.cursorError=!1,$l.setStyle({lineColor:cr.lineColor}),Wl.setStyle({lineColor:cr.lineColor}))):cr.setPoints([])},uy=()=>{vn.off("select",oy),vn.off("intersectionUpdate",ay),vn.off("disable",hy),vn.plane=null,vn.disable(),To==null||To.remove($l,Wl)},hy=()=>{uy(),To==null||To.remove(cr,Wl,$l),Po(new Error("Cancelled"))};return vn.on("select",oy),vn.on("intersectionUpdate",ay),vn.on("disable",hy),{finished:Bn,canUndo:_g,canRedo:ty,undo:ny,redo:iy}}function x$3(cr){const vn=[...cr],yn=[];for(let Rn=0;Rn<vn.length-2;Rn++)yn.push(0,Rn+1,Rn+2);return yn}function s$2(cr){const vn=cr.map(yn=>new Vector3(yn[0],yn[1],yn[2]));return p$u(vn)}var x$2=Object.defineProperty,y$3=(cr,vn,yn)=>vn in cr?x$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$9=(cr,vn,yn)=>(y$3(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class v$2 extends BufferGeometry{constructor(vn){super(),p$9(this,"bottomPositions",[]),p$9(this,"topPosition",[]),p$9(this,"_type","Concave"),vn&&this.setPosition(vn)}setPosition(vn){var yn,Rn,Bn;const Co=(yn=vn.bottomPositions)!=null?yn:this.bottomPositions,Po=(Rn=vn.topPosition)!=null?Rn:this.topPosition;if(this._type=(Bn=vn.type)!=null?Bn:this._type,this.bottomPositions=Co,this.topPosition=Po,!Co||Co.length<3){console.error("PrismGeometry: Invalid parameters",Co,Po,vn),this.bottomPositions=[],this.setAttribute("position",new BufferAttribute(new Float32Array([]),3));return}const To=[],Io=[];Io.push(...Co),Io[0][0]===Io.at(-1)[0]&&Io[0][1]===Io.at(-1)[1]&&Io[0][2]===Io.at(-1)[2]&&(Io.length-=1);const $l=this._type==="Concave"?s$2(Io):x$3(Io);if(To.push(...$l),Po&&Po.length===3){const Wl=[Po[0]-Co[0][0],Po[1]-Co[0][1],Po[2]-Co[0][2]],Xl=Io.map(Zl=>[Zl[0]+Wl[0],Zl[1]+Wl[1],Zl[2]+Wl[2]]);Io.push(...Xl);const Yl=To.map(Zl=>Zl+Io.length/2);To.push(...Yl);for(let Zl=0;Zl<Io.length/2-1;Zl++)To.push(Zl,Zl+1,Zl+Io.length/2),To.push(Zl+1,Zl+Io.length/2+1,Zl+Io.length/2);To.push(0,Io.length/2,Io.length/2-1),To.push(Io.length/2,Io.length-1,Io.length/2-1)}this.setAttribute("position",new Float32BufferAttribute(Io.flat(),3)),this.setIndex(To),this.computeBoundingSphere()}}var b$2=Object.defineProperty,d$6=Object.getOwnPropertySymbols,C$1=Object.prototype.hasOwnProperty,w$3=Object.prototype.propertyIsEnumerable,c$5=(cr,vn,yn)=>vn in cr?b$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a$2=(cr,vn)=>{for(var yn in vn||(vn={}))C$1.call(vn,yn)&&c$5(cr,yn,vn[yn]);if(d$6)for(var yn of d$6(vn))w$3.call(vn,yn)&&c$5(cr,yn,vn[yn]);return cr},s$1=(cr,vn,yn)=>(c$5(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class H$3 extends c$C{constructor(vn){super(),s$1(this,"name","PrismMesh"),s$1(this,"_geometryInfoCache"),s$1(this,"geometryInfoNeedUpdate",!0),s$1(this,"edgeMesh",new Oe$1),s$1(this,"prismMesh",new A$n),s$1(this,"paramStyle"),this.prismMesh.name="PrismMesh",this.prismMesh.geometry=new v$2,this.edgeMesh.name="EdgeMesh",this.addIfNotExists(this.prismMesh,this.edgeMesh),vn&&this.setPoints(vn),this.setStyle(vn)}get topPosition(){return new Vector3().fromArray(this.prismMesh.geometry.topPosition)}get bottomPositions(){return this.prismMesh.geometry.bottomPositions.map(vn=>new Vector3().fromArray(vn))}get topPositions(){const vn=this.bottomPositions[0].clone().sub(this.topPosition);return this.bottomPositions.map(yn=>yn.clone().sub(vn))}get style(){return{color:this.color,lineColor:this.lineColor,lineWidth:this.lineWidth,opacity:this.opacity,occlusionVisibility:this.occlusionVisibility,occlusionMode:this.occlusionMode}}get opacity(){return this.prismMesh.opacity}get occlusionVisibility(){return this.prismMesh.occlusionVisibility}get occlusionMode(){return this.prismMesh.occlusionMode}get center(){return this.localCenter.clone()}get localCenter(){var vn;return(vn=this.geometryInfo.center.clone())!=null?vn:new Vector3(9999,9999,9999)}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const vn=this.prismMesh.geometry.bottomPositions,yn=this.prismMesh.geometry.topPosition;if(!vn||vn.length<3||!yn){this._geometryInfoCache=void 0;return}const Rn=vn.map((Io,$l)=>$l>=vn.length-2?null:[new Vector3().fromArray(vn[0]),new Vector3().fromArray(vn[$l+1]),new Vector3().fromArray(vn[$l+2])]).filter(Boolean);if(Rn.length===0){this._geometryInfoCache=void 0;return}let Bn=0,Co=new Vector3;for(const[Io,$l,Wl]of Rn){const Xl=u$s(Io,$l,Wl),Yl=d$t(Io,$l,Wl,Xl);Bn+=Xl,Co.add(Yl)}Co=Co.divideScalar(Bn);const Po=new Vector3().fromArray(yn).sub(new Vector3().fromArray(vn[0])),To=Co.clone().add(Po.divideScalar(2));this._geometryInfoCache={center:To}}return this._geometryInfoCache}get worldCenter(){return this.updateMatrixWorld(),this.localToWorld(this.localCenter)}get color(){return this.prismMesh.color}get lineWidth(){return this.edgeMesh.style.lineWidth}get lineColor(){return this.edgeMesh.color}setStyle(vn={}){this.paramStyle=a$2(a$2({},this.paramStyle),vn),this.prismMesh.setStyle(this.paramStyle),this.edgeMesh.setStyle(this.paramStyle)}setPoints(vn){var yn;this.prismMesh.geometry.setPosition({bottomPositions:(yn=vn.points)==null?void 0:yn.map(t$j).map(Rn=>Rn.toArray()),topPosition:vn.heightPoint?t$j(vn.heightPoint).toArray():void 0}),this.edgeMesh.geometry=new a$w().fromEdgesGeometry(new EdgesGeometry(this.prismMesh.geometry)),this.geometryInfoNeedUpdate=!0}highlight(){this.prismMesh.highlight()}unhighlight(){this.prismMesh.unhighlight()}raycast(vn,yn){return this.children.forEach(Rn=>c$L(Rn,vn,yn,!0)),!1}}class f$7 extends u$8{constructor(vn){super(vn,()=>({positionFrom:()=>vn.worldCenter,yAxis:()=>vn.up,scaleHelper:{enable:!0,positions:()=>{const yn=vn.bottomPositions,Rn=vn.topPosition,Bn=new Vector3().subVectors(Rn,yn[0]),Co=vn.geometryInfo.center,Po=Co.clone().sub(Bn.clone().divideScalar(2)),To=Co.clone().add(Bn.clone().divideScalar(2));return[{id:"top",handlePosition:To,basePosition:Po},{id:"bottom",handlePosition:Po,basePosition:To}]},scaleCallback:yn=>{const{intersectPoint:Rn,scalePosition:Bn}=yn,{id:Co,basePosition:Po,handlePosition:To}=Bn;if(Co==="top"){const Io=Rn.clone().sub(Po);vn.setPoints({heightPoint:vn.bottomPositions[0].clone().add(Io)})}else if(Co==="bottom"){const Io=Rn.clone().sub(Po);vn.setPoints({points:vn.topPositions.map($l=>$l.clone().add(Io))})}}}}))}}var W$3=Object.defineProperty,_$4=Object.defineProperties,j$3=Object.getOwnPropertyDescriptors,u$5=Object.getOwnPropertySymbols,E$1=Object.prototype.hasOwnProperty,L$4=Object.prototype.propertyIsEnumerable,d$5=(cr,vn,yn)=>vn in cr?W$3(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$8=(cr,vn)=>{for(var yn in vn||(vn={}))E$1.call(vn,yn)&&d$5(cr,yn,vn[yn]);if(u$5)for(var yn of u$5(vn))L$4.call(vn,yn)&&d$5(cr,yn,vn[yn]);return cr},w$2=(cr,vn)=>_$4(cr,j$3(vn)),c$4=(cr,vn,yn)=>(d$5(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),f$6=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class Z extends M$3{constructor(vn,yn){super(vn,yn),c$4(this,"type","Prism"),c$4(this,"prismMesh"),c$4(this,"_editor"),vn&&(this.prismMesh=new H$3(p$8(p$8({},vn.style),vn)),this.add(this.prismMesh))}get editor(){return this._editor||(this._editor=new f$7(this.prismMesh)),this._editor}get data(){return w$2(p$8({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.prismMesh.bottomPositions,this.prismMesh)),heightPoint:a$6(this.applyObjectMatrixWorld(this.prismMesh.topPosition,this.prismMesh)),style:{color:this.prismMesh.color.getHex(),lineWidth:this.prismMesh.lineWidth,lineColor:this.prismMesh.lineColor.getHex()}})}setData(vn){this.prismMesh.setPoints({points:vn.points?this.applyObjectReversalMatrixWorld(vn.points.map(t$j),this.prismMesh):void 0,heightPoint:vn.heightPoint?this.applyObjectReversalMatrixWorld(t$j(vn.heightPoint),this.prismMesh):void 0}),this.prismMesh.setStyle(vn.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var vn;(vn=this.prismMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.prismMesh)==null||vn.unhighlight()}create(vn){return f$6(this,null,function*(){this.prismMesh=new H$3(vn),this.add(this.prismMesh),yield V$1(this.prismMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function V$1(cr,vn){return f$6(this,null,function*(){const yn=cr.parent,Rn=new M(cr.style);yn.add(Rn),yield X(Rn,vn).finished,yn.remove(Rn),cr.setPoints({points:Rn.points});const Bn=new Oe$1;Bn.name="LineHelper",yn.add(Bn);const Co=Rn.points.at(-1),Po=l$n(Rn.points),To=Co.clone().add(Po.clone().multiplyScalar(100)),Io=Co.clone().sub(Po.clone().multiplyScalar(100));return Bn.setPoints([To,Io]),vn.enable(),new Promise(($l,Wl)=>{const Xl=Rm=>{Zl(),$l()},Yl=Rm=>{if(!(Rm!=null&&Rm.raycaster))return;const ry=w$o({raycaster:Rm.raycaster,line:new Line3(To,Io)});ry&&cr.setPoints({heightPoint:ry})},Zl=()=>{vn.off("select",Xl),vn.off("intersectionUpdate",Yl),vn.off("disable",ey),yn.remove(Bn),vn.disable()},ey=()=>{Zl(),yn.remove(cr),Wl(new Error("Cancelled"))};vn.on("select",Xl),vn.on("intersectionUpdate",Yl),vn.on("disable",ey)})})}class b$1 extends u$8{constructor(vn){super(vn,()=>({yAxis:()=>{const yn=vn.points;return l$n(yn).normalize()},zAxis:()=>{const yn=vn.points;return yn[0].clone().sub(yn[1]).normalize()},scaleHelper:{enable:!0,positions:()=>{const yn=vn.points,Rn=yn[0].clone().lerp(yn[3],.5),Bn=yn[1].clone().lerp(yn[2],.5),Co=yn[0].clone().lerp(yn[1],.5),Po=yn[3].clone().lerp(yn[2],.5);return[{id:"left",handlePosition:Rn,basePosition:Bn},{id:"right",handlePosition:Bn,basePosition:Rn},{id:"top",handlePosition:Co,basePosition:Po},{id:"bottom",handlePosition:Po,basePosition:Co}]},scaleCallback:yn=>{const{intersectPoint:Rn,scalePosition:Bn}=yn,{id:Co,basePosition:Po}=Bn,To=Rn.clone().sub(Po),Io=vn.points;Co==="top"?vn.setPoints([Io[3].clone().add(To),Io[2].clone().add(To),Io[2],Io[3]]):Co==="bottom"?vn.setPoints([Io[0],Io[1],Io[1].clone().add(To),Io[0].clone().add(To)]):Co==="left"?vn.setPoints([Io[1].clone().add(To),Io[1],Io[2],Io[2].clone().add(To)]):Co==="right"&&vn.setPoints([Io[0],Io[0].clone().add(To),Io[3].clone().add(To),Io[3]])}}}))}}var i$1=Object.defineProperty,a$1=(cr,vn,yn)=>vn in cr?i$1(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n$4=(cr,vn,yn)=>(a$1(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class l$5 extends BufferGeometry{constructor(vn){if(super(),n$4(this,"name","RectangleGeometry"),n$4(this,"points"),vn.length!==4){console.error("Invalid number of points, it's not a rectangle");return}this.points=vn.slice(0,4),this.setAttribute("position",new BufferAttribute(new Float32Array(this.points.flatMap(yn=>yn.toArray())),3)),this.setIndex(new BufferAttribute(new Uint16Array([0,1,2,0,2,3]),1))}}var l$4=Object.defineProperty,c$3=(cr,vn,yn)=>vn in cr?l$4(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,i=(cr,vn,yn)=>(c$3(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class j$2 extends j$j{constructor(vn){super(vn),i(this,"name","RectangleMesh")}get color(){return this.meshFont.material.color}setPoints(vn){const yn=vn.map(t$j).filter(i$w);if(yn.length<3){console.error("Invalid position");return}if(vn.length===3){const[Rn,Bn,Co]=yn,Po=Rn.clone().add(Co).sub(Bn);yn.push(Po)}this.points=yn,this.geometry=new l$5(yn),this.planeHelperNeedUpdate=!0,this.geometryInfoNeedUpdate=!0}}var c$2=Object.defineProperty,h$2=Object.getOwnPropertySymbols,u$4=Object.prototype.hasOwnProperty,p$7=Object.prototype.propertyIsEnumerable,n$3=(cr,vn,yn)=>vn in cr?c$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,l$3=(cr,vn)=>{for(var yn in vn||(vn={}))u$4.call(vn,yn)&&n$3(cr,yn,vn[yn]);if(h$2)for(var yn of h$2(vn))p$7.call(vn,yn)&&n$3(cr,yn,vn[yn]);return cr},y$2=(cr,vn)=>{var yn={};for(var Rn in cr)u$4.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&h$2)for(var Rn of h$2(cr))vn.indexOf(Rn)<0&&p$7.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},o$1=(cr,vn,yn)=>(n$3(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class W$2 extends j$2{constructor(vn){const yn=vn!=null?vn:{},{points:Rn}=yn,Bn=y$2(yn,["points"]);super(),o$1(this,"name","RectangleWithEdgeMesh"),o$1(this,"line",new j$5),Rn&&this.setPoints(Rn),Bn&&this.setStyle(Bn)}get style(){return l$3(l$3({},super.style),this.line.style)}get lineWidth(){return this.line.lineWidth}get lineColor(){return this.line.lineColor}setPoints(vn){super.setPoints(vn),this.points&&(this.line.setPoints([this.points[0],this.points[1],this.points[2],this.points[3],this.points[0]]),this.addIfNotExists(this.line))}setStyle(vn){super.setStyle(vn),this.line.setStyle(vn)}highlight(){super.highlight(),this.line.highlight()}unhighlight(){super.unhighlight(),this.line.unhighlight()}}function f$5(cr,vn){const yn=l$n(cr),Rn=c$J(...cr),Bn=vn.clone().sub(Rn);return yn.dot(Bn)>=0?cr:cr.slice().reverse()}var q=Object.defineProperty,G=Object.defineProperties,J$1=Object.getOwnPropertyDescriptors,W$1=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,T$2=(cr,vn,yn)=>vn in cr?q(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,p$6=(cr,vn)=>{for(var yn in vn||(vn={}))K.call(vn,yn)&&T$2(cr,yn,vn[yn]);if(W$1)for(var yn of W$1(vn))Q.call(vn,yn)&&T$2(cr,yn,vn[yn]);return cr},P$1=(cr,vn)=>G(cr,J$1(vn)),N$1=(cr,vn,yn)=>(T$2(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),D$2=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class ge extends M$3{constructor(vn,yn){super(vn,yn),N$1(this,"type","Rectangle"),N$1(this,"rectangleMesh"),N$1(this,"_editor"),vn&&(this.rectangleMesh=new W$2(p$6(p$6({},vn.style),vn)),this.add(this.rectangleMesh))}get editor(){return this._editor||(this._editor=new b$1(this.rectangleMesh)),this._editor}get data(){return P$1(p$6({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.rectangleMesh.points,this.rectangleMesh)),style:{color:this.rectangleMesh.color.getHex(),opacity:this.rectangleMesh.opacity,lineWidth:this.rectangleMesh.lineWidth,lineColor:this.rectangleMesh.lineColor.getHex()}})}setData(vn){vn.points&&this.rectangleMesh.setPoints(this.applyObjectReversalMatrixWorld(vn.points.map(t$j),this.rectangleMesh)),this.rectangleMesh.setStyle(vn.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var vn;(vn=this.rectangleMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.rectangleMesh)==null||vn.unhighlight()}create(vn){return D$2(this,null,function*(){this.removeChildren();const yn=new W$2(vn);this.rectangleMesh=yn,this.add(this.rectangleMesh),yield te(this.rectangleMesh,this.pointSelector,vn),this.config.defaultAction&&this.editor.enable()})}}function te(cr,vn,yn){var Rn;return((Rn=yn==null?void 0:yn.drawMethod)!=null?Rn:"diagonal")==="diagonal"?se(cr,vn,yn):oe(cr,vn,yn)}function ne$1(cr,vn){const yn=[];return cr.scene.traverse(Rn=>{var Bn;if(Rn.visible&&!((Bn=vn==null?void 0:vn.excludes)!=null&&Bn.includes(Rn))&&(Rn instanceof j$2||Rn instanceof j$j)){const Co=Rn.points.map(Po=>{const To=new Face3(Po.x,Po.y,Po.z,Rn.normal);return Rn.style.occlusionVisibility&&(To.IsAlwaysVisible=!0),To});yn.push(...Co)}}),yn}function se(cr,vn,yn){var Rn;const{promise:Bn,reject:Co,resolve:Po}=i$d(),To=cr.parent;if(!To)return Co(new Error("No container"));const Io=(Rn=yn==null?void 0:yn.limit)!=null?Rn:"none",$l=new x$4(P$1(p$6({},cr.style),{dashed:!0})),Wl=new x$4(P$1(p$6({},cr.style),{dashed:!0,lengthEnable:!1})),Xl=new x$4(P$1(p$6({},cr.style),{dashed:!1,lengthEnable:!1}));To.add($l,Xl,Wl),vn.enable();const Yl=[];let Zl=new Vector3,ey=new Vector3;const Rm=new Plane,ry=()=>{Yl.push(Zl.clone()),Yl.length===1?(Io==="xoz"&&Rm.setFromNormalAndCoplanarPoint(new Vector3(0,1,0),Yl[0]),Io==="none"&&Rm.setFromNormalAndCoplanarPoint(ey,Yl[0])):Yl.length===2?Io==="y"||Io==="xoz"?(ty(),Po()):Xl.setPoints([Yl[0],Yl[1]]):Yl.length===3&&(ty(),Po())},_g=iy=>{var oy,ay;if(!(iy!=null&&iy.raycaster))return;const uy=(oy=Yl.at(-1))==null?void 0:oy.clone();if(Yl.length===0){Zl=iy.point.clone(),ey=(ay=iy.face)==null?void 0:ay.normal;return}if(Yl.length===1&&Io==="y"){const hy=new Line3(new Vector3(0,1,0).add(Yl[0]),new Vector3(0,-1,0).add(Yl[0])).closestPointToPoint(iy.point,!1,new Vector3);cr.setPoints([Yl[0],hy,iy.point]);return}if(Yl.length===1&&Io==="xoz"){const hy=new Line3(new Vector3(1,0,0).add(Yl[0]),new Vector3(-1,0,0).add(Yl[0])),my=iy.raycaster.ray.intersectPlane(Rm,new Vector3),ly=hy.closestPointToPoint(my,!1,new Vector3);cr.setPoints([Yl[0],ly,my]);return}if(Yl.length===1&&Io==="none"){Rm?(Zl=iy.raycaster.ray.intersectPlane(Rm,new Vector3),Wl.setPoints([Zl,iy.point])):Zl=iy.point.clone(),$l.setPoints([uy,Zl]);return}if(Yl.length===2&&Io==="none"){To.remove($l);const hy=iy.raycaster.ray.intersectPlane(Rm,new Vector3),my=Yl[0].distanceTo(Yl[1])/2,ly=new Vector3().lerpVectors(Yl[0],Yl[1],.5),sy=new Vector3().subVectors(hy,ly).normalize();Zl=new Vector3().addVectors(ly,sy.multiplyScalar(my));const cy=[Yl[0],Zl,Yl[1]],fy=f$5(cy,p.modules.five.camera.position);cr.setPoints(fy);return}},ty=()=>{vn.off("select",ry),vn.off("intersectionUpdate",_g),vn.off("disable",ny),vn.disable(),To==null||To.remove($l,Xl,Wl)},ny=()=>{ty(),To==null||To.remove(cr),Co(new Error("Cancelled"))};return vn.on("select",ry),vn.on("intersectionUpdate",_g),vn.on("disable",ny),Bn}function oe(cr,vn,yn){var Rn;const{promise:Bn,reject:Co,resolve:Po}=i$d(),To=cr.parent;if(!To)return Co(new Error("No container"));const Io=(Rn=yn==null?void 0:yn.limit)!=null?Rn:"none",$l=new x$4(P$1(p$6({},cr.style),{dashed:!0})),Wl=new x$4(P$1(p$6({},cr.style),{dashed:!0,lengthEnable:!1})),Xl=new x$4(P$1(p$6({},cr.style),{dashed:!1,lengthEnable:!1}));To.add($l,Xl,Wl),vn.enable(),vn.setAdherePoints(ne$1(vn.five,{excludes:[cr]}));const Yl=[];let Zl=new Vector3,ey=new Vector3;const Rm=new Plane,ry=()=>{if(Yl.push(Zl.clone()),Yl.length===1)vn.planeMode="onlyPlane",Io==="y"&&(vn.adhereLine=[new Line3(Yl[0],new Vector3(0,1,0).add(Yl[0]))]),Io==="xoz"&&(Rm.setFromNormalAndCoplanarPoint(new Vector3(0,1,0),Yl[0]),vn.plane=Rm),Io==="none"&&(Rm.setFromNormalAndCoplanarPoint(ey,Yl[0]),vn.plane=Rm);else if(Yl.length===2){vn.planeMode="vertical",Io==="y"&&(vn.adhereLine=[]);let iy=!1;Yl[0].x===Yl[1].x&&Yl[0].z===Yl[1].z&&(iy=!0),Io==="y"&&!iy&&(Rm.setFromCoplanarPoints(Yl[0],Yl[1],new Vector3(0,1,0).add(Yl[0])),vn.plane=Rm),Xl.setPoints([Yl[0],Yl[1]])}else Yl.length===3&&(ty(),Po())},_g=iy=>{var oy,ay,uy,hy;if(!iy||!(iy!=null&&iy.raycaster))return;const my=(oy=Yl.at(-1))==null?void 0:oy.clone();if(Yl.length===0){Zl=iy.point.clone(),ey=(ay=iy.face)==null?void 0:ay.normal;return}if(Yl.length===1){Zl=iy.point,Wl.setPoints([(uy=iy.originalPoint)!=null?uy:iy.point,iy.point]),$l.setPoints([my,Zl]);return}if(Yl.length===2){if(!vn.plane){const fy=l$n([Yl[0],Yl[1],iy.point]);Rm.setFromNormalAndCoplanarPoint(fy,Yl[0])}Wl.setPoints([(hy=iy.originalPoint)!=null?hy:iy.point,iy.point]);const ly=new Vector3().crossVectors(Yl[0].clone().sub(Yl[1]),Rm.normal).normalize();Zl=new Line3(Yl[1].clone().add(ly),Yl[1].clone().sub(ly)).closestPointToPoint(iy.point,!1,new Vector3);const sy=[Yl[0],Yl[1],Zl],cy=f$5(sy,p.modules.five.camera.position);cr.setPoints(cy);return}},ty=()=>{vn.setAdherePoints([]),vn.adhereLine=[],vn.adherePlane=[],vn.plane=void 0,vn.off("select",ry),vn.off("intersectionUpdate",_g),vn.off("disable",ny),vn.disable(),To==null||To.remove($l,Xl,Wl)},ny=()=>{ty(),To==null||To.remove(cr),Co(new Error("Cancelled"))};return vn.on("select",ry),vn.on("intersectionUpdate",_g),vn.on("disable",ny),Bn}class s extends u$8{constructor(vn){super(vn,()=>({yAxis:()=>vn.normal}))}}function n$2(cr){return Math.max(32,Math.min(128,Math.floor(cr*40)))}var l$2=Object.defineProperty,_$3=(cr,vn,yn)=>vn in cr?l$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,e=(cr,vn,yn)=>(_$3(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class N extends A$n{constructor(vn){super(vn),e(this,"_normal"),e(this,"_center"),e(this,"_radius"),vn!=null&&vn.center&&vn!=null&&vn.normal&&vn!=null&&vn.radius&&this.setPoints(vn)}get center(){return this.position.clone()}get normal(){return this._normal}set normal(vn){this._normal=vn}get radius(){var vn,yn;return(yn=(vn=this.meshFont.geometry)==null?void 0:vn.parameters)==null?void 0:yn.radius}setPoints(vn){var yn,Rn,Bn;if(this._center=(yn=t$j(vn.center))!=null?yn:this._center,this._normal=((Rn=t$j(vn.normal))!=null?Rn:this._normal).normalize(),this._radius=(Bn=vn.radius)!=null?Bn:this._radius,i$w(this._radius)&&this._radius!==this.radius){const Co=n$2(this._radius);this.geometry=new CircleGeometry(this._radius,Co)}this._center&&this.position.copy(this._center),this._normal&&(this.lookAt(this._normal.clone().add(this._center)),this.normal=this._normal.clone()),this.needsRender=!0}}var c$1=Object.defineProperty,r=Object.getOwnPropertySymbols,u$3=Object.prototype.hasOwnProperty,L$3=Object.prototype.propertyIsEnumerable,P=(cr,vn,yn)=>vn in cr?c$1(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,l$1=(cr,vn)=>{var yn={};for(var Rn in cr)u$3.call(cr,Rn)&&vn.indexOf(Rn)<0&&(yn[Rn]=cr[Rn]);if(cr!=null&&r)for(var Rn of r(cr))vn.indexOf(Rn)<0&&L$3.call(cr,Rn)&&(yn[Rn]=cr[Rn]);return yn},d$4=(cr,vn,yn)=>(P(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class S extends N{constructor(vn){const yn=vn!=null?vn:{},{normal:Rn,radius:Bn,center:Co}=yn,Po=l$1(yn,["normal","radius","center"]);super(Po),d$4(this,"edgeLine"),this.edgeLine=new Oe$1(Po),this.add(this.edgeLine),Rn&&Bn&&Co&&this.setPoints({normal:Rn,radius:Bn,center:Co})}setPoints(...vn){super.setPoints(...vn);const yn=this.meshFont.geometry.vertices.slice(1);this.edgeLine.setPoints(yn.concat(yn[0]))}setStyle(vn){super.setStyle(vn),this.edgeLine.setStyle(vn)}highlight(){super.highlight(),this.edgeLine.highlight()}unhighlight(){super.unhighlight(),this.edgeLine.unhighlight()}}var x$1=Object.defineProperty,_$2=Object.defineProperties,T$1=Object.getOwnPropertyDescriptors,u$2=Object.getOwnPropertySymbols,A$2=Object.prototype.hasOwnProperty,H$2=Object.prototype.propertyIsEnumerable,m$4=(cr,vn,yn)=>vn in cr?x$1(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,d$3=(cr,vn)=>{for(var yn in vn||(vn={}))A$2.call(vn,yn)&&m$4(cr,yn,vn[yn]);if(u$2)for(var yn of u$2(vn))H$2.call(vn,yn)&&m$4(cr,yn,vn[yn]);return cr},g$3=(cr,vn)=>_$2(cr,T$1(vn)),f$4=(cr,vn,yn)=>(m$4(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),y$1=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class L$2 extends M$3{constructor(vn,yn){super(vn,yn),f$4(this,"type","Circle"),f$4(this,"circleMesh"),f$4(this,"_editor"),vn&&(this.circleMesh=new S(d$3(d$3({},vn.style),vn)),this.add(this.circleMesh))}get editor(){return this._editor||(this._editor=new s(this.circleMesh)),this._editor}get data(){return g$3(d$3({},this.baseData),{center:a$6(this.applyObjectMatrixWorld(this.circleMesh.center,this.circleMesh)),normal:a$6(this.circleMesh.normal.clone().applyQuaternion(this.circleMesh.quaternion)),radius:this.circleMesh.radius,style:{color:this.circleMesh.color.getHex()}})}setData(vn){this.circleMesh.setPoints({center:vn.center?this.applyObjectReversalMatrixWorld(t$j(vn.center),this.circleMesh):void 0,normal:vn.normal?t$j(vn.normal):void 0,radius:vn.radius}),this.circleMesh.setStyle(vn.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var vn;(vn=this.circleMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.circleMesh)==null||vn.unhighlight()}create(vn){return y$1(this,null,function*(){this.children.forEach(Rn=>{Rn.parent===this&&this.remove(Rn)}),this.children.length=0;const yn=new S(vn);this.circleMesh=yn,this.add(this.circleMesh),yield D$1(this.circleMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function D$1(cr,vn){return new Promise((yn,Rn)=>{const Bn=cr.parent;if(!Bn){Rn(new Error("No container"));return}const Co=new j$5({dashed:!0});Bn.add(Co),vn.enable();let Po,To;const Io=Yl=>{if(Yl){if(!Po){Po={point:Yl.point,normal:Yl.face.normal};return}Po&&To&&(Wl(),yn())}},$l=Yl=>{if(!Yl||!Po)return;const Zl=new Plane().setFromNormalAndCoplanarPoint(Po.normal,Po.point);if(To=Yl.raycaster.ray.intersectPlane(Zl,new Vector3),To){const ey=Po.point.distanceTo(To);cr.setPoints({center:Po.point,normal:Po.normal,radius:ey})}},Wl=()=>{vn.off("select",Io),vn.off("intersectionUpdate",$l),vn.off("disable",Xl),vn.disable(),Bn==null||Bn.remove(Co)},Xl=()=>{Wl(),Bn==null||Bn.remove(cr,Co),Rn(new Error("Cancelled"))};vn.on("select",Io),vn.on("intersectionUpdate",$l),vn.on("disable",Xl)})}var g$2=Object.defineProperty,d$2=Object.getOwnPropertySymbols,u$1=Object.prototype.hasOwnProperty,p$5=Object.prototype.propertyIsEnumerable,n$1=(cr,vn,yn)=>vn in cr?g$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,l=(cr,vn)=>{for(var yn in vn||(vn={}))u$1.call(vn,yn)&&n$1(cr,yn,vn[yn]);if(d$2)for(var yn of d$2(vn))p$5.call(vn,yn)&&n$1(cr,yn,vn[yn]);return cr},o=(cr,vn,yn)=>(n$1(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class H$1 extends c$C{constructor(vn){super(),o(this,"bottomCircle"),o(this,"topCircle"),o(this,"edgeMesh"),o(this,"highlighted",!1),o(this,"params"),o(this,"_topCenter"),o(this,"_bottomCenter"),o(this,"_radius"),this.params=vn,this.bottomCircle=new S(vn),this.bottomCircle.name="bottomCircle",this.topCircle=new S(vn),this.topCircle.name="topCircle",this.edgeMesh=new A$n(vn),vn!=null&&vn.bottomCenter&&vn!=null&&vn.topCenter&&vn!=null&&vn.radius&&this.setPoints(vn),this.addIfNotExists(this.bottomCircle)}get bottomCenter(){return this.bottomCircle.center}get topCenter(){return this.topCircle.center}get normal(){return this.bottomCircle.normal}get radius(){return this.bottomCircle.radius}get color(){return this.bottomCircle.color}setPoints(vn){var yn,Rn;if(this._topCenter=(yn=t$j(vn.topCenter))!=null?yn:this.topCenter,this._bottomCenter=(Rn=t$j(vn.bottomCenter))!=null?Rn:this.bottomCenter,this._radius=i$w(vn.radius)?vn.radius:this.radius,this._topCenter&&this._bottomCenter){const Bn=this._topCenter.clone().sub(this._bottomCenter).normalize();this.bottomCircle.setPoints({center:this._bottomCenter,normal:Bn,radius:this._radius}),this.setTopCenter(this._topCenter)}this.needsRender=!0}setTopCenter(vn){this.addIfNotExists(this.topCircle),this.topCircle.setPoints({center:vn,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setBottomCenter(vn){this.addIfNotExists(this.bottomCircle),this.bottomCircle.setPoints({center:vn,normal:this.normal,radius:this.radius}),this.setEdgeMesh()}setStyle(vn){this.params=l(l({},this.params),vn),this.bottomCircle.setStyle(this.params),this.topCircle.setStyle(this.params)}highlight(){this.highlighted||(this.highlighted=!0,this.edgeMesh.highlight(),this.bottomCircle.highlight(),this.topCircle.highlight(),this.needsRender=!0)}unhighlight(){this.highlighted&&(this.highlighted=!1,this.edgeMesh.unhighlight(),this.bottomCircle.unhighlight(),this.topCircle.unhighlight(),this.needsRender=!0)}setEdgeMesh(){this.addIfNotExists(this.edgeMesh);const vn=this.topCircle.center,yn=this.bottomCircle.center;this.edgeMesh.geometry.dispose(),this.edgeMesh.geometry=new CylinderGeometry(this.radius,this.radius,vn.distanceTo(yn),n$2(this.radius),1,!0);const Rn=new Quaternion().setFromUnitVectors(new Vector3(0,1,0),this.normal.clone().normalize());this.edgeMesh.position.copy(new Vector3().lerpVectors(yn,vn,.5)),this.edgeMesh.quaternion.copy(Rn)}}class c extends u$8{constructor(vn){super(vn,()=>{const yn=()=>{const Rn=vn.topCenter,Bn=vn.bottomCenter,Co=new Vector3().lerpVectors(Rn,Bn,.5);return{topCenter:Rn,bottomCenter:Bn,boxCenter:Co}};return{positionFrom:"boundingBox",yAxis:()=>vn.normal,scaleHelper:{enable:!0,positions:()=>{const Rn=yn();return[{id:"top",handlePosition:Rn.topCenter,basePosition:Rn.bottomCenter},{id:"bottom",handlePosition:Rn.bottomCenter,basePosition:Rn.topCenter}]},scaleCallback:Rn=>{const{intersectPoint:Bn,scalePosition:Co}=Rn,{id:Po}=Co;Po==="top"?vn.setTopCenter(Bn):Po==="bottom"&&vn.setBottomCenter(Bn)}}}})}}var E=Object.defineProperty,L$1=Object.defineProperties,T=Object.getOwnPropertyDescriptors,g$1=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,A$1=Object.prototype.propertyIsEnumerable,p$4=(cr,vn,yn)=>vn in cr?E(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,d$1=(cr,vn)=>{for(var yn in vn||(vn={}))W.call(vn,yn)&&p$4(cr,yn,vn[yn]);if(g$1)for(var yn of g$1(vn))A$1.call(vn,yn)&&p$4(cr,yn,vn[yn]);return cr},w$1=(cr,vn)=>L$1(cr,T(vn)),m$3=(cr,vn,yn)=>(p$4(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),f$3=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class Y extends M$3{constructor(vn,yn){super(vn,yn),m$3(this,"type","Cylinder"),m$3(this,"cylinderMesh"),m$3(this,"_editor"),vn&&(this.cylinderMesh=new H$1(d$1(d$1({},vn.style),vn)),this.add(this.cylinderMesh))}get editor(){return this._editor||(this._editor=new c(this.cylinderMesh)),this._editor}get data(){return w$1(d$1({},this.baseData),{bottomCenter:a$6(this.applyObjectMatrixWorld(this.cylinderMesh.bottomCenter,this.cylinderMesh)),topCenter:a$6(this.applyObjectMatrixWorld(this.cylinderMesh.topCenter,this.cylinderMesh)),radius:this.cylinderMesh.radius,style:{color:this.cylinderMesh.color.getHex()}})}setData(vn){this.cylinderMesh.setPoints({bottomCenter:vn.bottomCenter?this.applyObjectReversalMatrixWorld(t$j(vn.bottomCenter),this.cylinderMesh):void 0,topCenter:vn.topCenter?this.applyObjectReversalMatrixWorld(t$j(vn.topCenter),this.cylinderMesh):void 0}),this.cylinderMesh.setStyle(vn.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var vn;(vn=this.cylinderMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.cylinderMesh)==null||vn.unhighlight()}create(vn){return f$3(this,null,function*(){this.cylinderMesh=new H$1(vn),this.add(this.cylinderMesh),yield B$2(this.cylinderMesh,this.pointSelector),this.config.defaultAction&&this.editor.enable()})}}function B$2(cr,vn){return f$3(this,null,function*(){const yn=cr.parent;yield D$1(cr.bottomCircle,vn);const Rn=new Oe$1;Rn.name="LineHelper",yn.add(Rn);const Bn=vn.position.point,Co=cr.normal.clone().normalize(),Po=Bn.clone().add(Co.clone().multiplyScalar(100)),To=Bn.clone().sub(Co.clone().multiplyScalar(100));return Rn.setPoints([Po,To]),vn.enable(),new Promise((Io,$l)=>{const Wl=ey=>{Yl(),Io()},Xl=ey=>{if(!(ey!=null&&ey.raycaster))return;const Rm=w$o({raycaster:ey.raycaster,line:new Line3(Po,To)}),ry=new Plane().setFromNormalAndCoplanarPoint(cr.normal,cr.bottomCenter).projectPoint(Rm,new Vector3),_g=Rm.clone().sub(ry),ty=cr.bottomCenter.clone().add(_g);Rm&&cr.setTopCenter(ty)},Yl=()=>{vn.off("select",Wl),vn.off("intersectionUpdate",Xl),vn.off("disable",Zl),yn.remove(Rn),vn.disable()},Zl=()=>{Yl(),yn.remove(cr),$l(new Error("Cancelled"))};vn.on("select",Wl),vn.on("intersectionUpdate",Xl),vn.on("disable",Zl)})})}class V extends u$8{constructor(vn){super(vn,()=>({positionFrom:()=>vn.worldCenter,yAxis:()=>new Vector3().subVectors(vn.topPosition,vn.bottomPositions[0]).normalize(),zAxis:()=>new Vector3().subVectors(vn.bottomPositions[0],vn.bottomPositions[1]).normalize(),scaleHelper:{enable:!0,positions:()=>{const yn=vn.bottomPositions,Rn=vn.topPosition,Bn=new Vector3().subVectors(Rn,yn[0]),Co=new Vector3().subVectors(yn[1],yn[0]),Po=new Vector3().subVectors(yn[2],yn[1]),To=vn.geometryInfo.center,Io=To.clone().sub(Bn.clone().divideScalar(2)),$l=To.clone().add(Bn.clone().divideScalar(2)),Wl=To.clone().sub(Co.clone().divideScalar(2)),Xl=To.clone().add(Co.clone().divideScalar(2)),Yl=To.clone().sub(Po.clone().divideScalar(2)),Zl=To.clone().add(Po.clone().divideScalar(2));return[{id:"top",handlePosition:$l,basePosition:Io},{id:"bottom",handlePosition:Io,basePosition:$l},{id:"left",handlePosition:Wl,basePosition:Xl},{id:"right",handlePosition:Xl,basePosition:Wl},{id:"front",handlePosition:Yl,basePosition:Zl},{id:"back",handlePosition:Zl,basePosition:Yl}]},scaleCallback:yn=>{const{intersectPoint:Rn,scalePosition:Bn}=yn,{id:Co,basePosition:Po}=Bn,To=vn.bottomPositions,Io=vn.topPositions;let $l=new Vector3().subVectors(vn.topPosition,To[0]),Wl;if(Co==="top")$l=Rn.clone().sub(Po),Wl=To;else if(Co==="bottom"){const Xl=Rn.clone().sub(Po);Wl=Io.map(Yl=>Yl.clone().add(Xl)),$l=void 0}else if(Co==="left"){const Xl=Rn.clone().sub(Po);Wl=[To[1].clone().add(Xl),To[1],To[2],To[2].clone().add(Xl)]}else if(Co==="right"){const Xl=Rn.clone().sub(Po);Wl=[To[0],To[0].clone().add(Xl),To[3].clone().add(Xl),To[3]]}else if(Co==="front"){const Xl=Rn.clone().sub(Po);Wl=[To[3].clone().add(Xl),To[2].clone().add(Xl),To[2],To[3]]}else if(Co==="back"){const Xl=Rn.clone().sub(Po);Wl=[To[0],To[1],To[1].clone().add(Xl),To[0].clone().add(Xl)]}vn.setPoints({points:Wl,heightPoint:$l?Wl[0].clone().add($l):void 0})}}}))}}var m$2=Object.defineProperty,h$1=(cr,vn,yn)=>vn in cr?m$2(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,n=(cr,vn,yn)=>(h$1(cr,typeof vn!="symbol"?vn+"":vn,yn),yn);class p$3 extends H$3{constructor(){super(...arguments),n(this,"name","BoxMesh")}get geometryInfo(){if(this.geometryInfoNeedUpdate){this.geometryInfoNeedUpdate=!1;const vn=this.bottomPositions,yn=this.topPosition;if(!vn||vn.length<3||!yn){this._geometryInfoCache=void 0;return}const Rn=c$J(...vn),Bn=yn.clone().sub(vn[0]),Co=Rn.clone().add(Bn.clone().divideScalar(2));this._geometryInfoCache={center:Co}}return this._geometryInfoCache}}var H=Object.defineProperty,R$1=Object.defineProperties,_$1=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,j$1=Object.prototype.propertyIsEnumerable,b=(cr,vn,yn)=>vn in cr?H(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,m$1=(cr,vn)=>{for(var yn in vn||(vn={}))C.call(vn,yn)&&b(cr,yn,vn[yn]);if(w)for(var yn of w(vn))j$1.call(vn,yn)&&b(cr,yn,vn[yn]);return cr},v$1=(cr,vn)=>R$1(cr,_$1(vn)),d=(cr,vn,yn)=>(b(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),p$2=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class ot extends M$3{constructor(vn,yn){super(vn,yn),d(this,"type","Box"),d(this,"boxMesh"),d(this,"_editor"),vn&&(this.boxMesh=new p$3(m$1(m$1({},vn.style),vn)),this.add(this.boxMesh))}get editor(){return this._editor||(this._editor=new V(this.boxMesh)),this._editor}get data(){return v$1(m$1({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.boxMesh.bottomPositions,this.boxMesh)),heightPoint:a$6(this.applyObjectMatrixWorld(this.boxMesh.topPosition,this.boxMesh)),style:{color:this.boxMesh.color.getHex(),opacity:this.boxMesh.opacity,lineWidth:this.boxMesh.lineWidth,lineColor:this.boxMesh.lineColor.getHex()}})}setData(vn){this.boxMesh.setPoints({points:vn.points?this.applyObjectReversalMatrixWorld(vn.points.map(t$j),this.boxMesh):void 0,heightPoint:vn.heightPoint?this.applyObjectReversalMatrixWorld(t$j(vn.heightPoint),this.boxMesh):void 0}),this.boxMesh.setStyle(vn.style),this._editor&&this._editor.initialHelperMatrix()}highlight(){var vn;(vn=this.boxMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.boxMesh)==null||vn.unhighlight()}create(vn){return p$2(this,null,function*(){this.removeChildren(),this.boxMesh=new p$3(vn),this.add(this.boxMesh),yield z$1(this.boxMesh,this.pointSelector,vn),this.config.defaultAction&&this.editor.enable()})}}function z$1(cr,vn,yn){return p$2(this,null,function*(){return new Promise((Rn,Bn)=>p$2(this,null,function*(){const Co=cr.parent;if(!Co){Bn(new Error("No container"));return}const Po=new W$2(cr.style);Co.add(Po),yield te(Po,vn,yn),Co.remove(Po),cr.setPoints({points:Po.points});const To=new Oe$1,Io=l$n(cr.bottomPositions),$l=c$J(...cr.bottomPositions),Wl=$l.clone().add(Io.clone().multiplyScalar(100)),Xl=$l.clone().sub(Io.clone().multiplyScalar(100));To.setPoints([Wl,Xl]),Co.add(To),vn.enable();const Yl=ry=>{ey(),Rn()},Zl=ry=>{if(!(ry!=null&&ry.raycaster))return;const _g=w$o({raycaster:ry.raycaster,line:new Line3(Wl,Xl)});if(_g){const ty=_g.clone().sub($l);cr.setPoints({heightPoint:cr.bottomPositions[0].clone().add(ty)})}},ey=()=>{vn.off("select",Yl),vn.off("intersectionUpdate",Zl),vn.off("disable",Rm),vn.disable(),Co==null||Co.remove(To)},Rm=()=>{ey(),Co==null||Co.remove(cr),Bn(new Error("Cancelled"))};vn.on("select",Yl),vn.on("intersectionUpdate",Zl),vn.on("disable",Rm)}))})}function f$2(cr,vn){for(let yn=cr.length-1;yn>=0;yn--)vn(cr[yn])}var A=Object.defineProperty,D=Object.defineProperties,k=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,B$1=Object.prototype.propertyIsEnumerable,j=(cr,vn,yn)=>vn in cr?A(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,f$1=(cr,vn)=>{for(var yn in vn||(vn={}))z.call(vn,yn)&&j(cr,yn,vn[yn]);if(R)for(var yn of R(vn))B$1.call(vn,yn)&&j(cr,yn,vn[yn]);return cr},v=(cr,vn)=>D(cr,k(vn)),p$1=(cr,vn,yn)=>(j(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),U$1=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});class ne extends M$3{constructor(vn,yn){super(vn,yn),p$1(this,"type","Line"),p$1(this,"lineMesh"),p$1(this,"_editor"),p$1(this,"creatingObject"),vn&&(this.lineMesh=new z$g(f$1(f$1({},vn.style),vn)),this.add(this.lineMesh))}get editor(){return this._editor||(this._editor=new H$5(this)),this._editor}get data(){return v(f$1({},this.baseData),{points:a$6(this.applyObjectMatrixWorld(this.lineMesh.points)),style:{lineColor:new Color(this.lineMesh.color).getHex(),lineWidth:this.lineMesh.lineWidth,dashed:this.lineMesh.dashed}})}setData(vn){vn.points&&this.lineMesh.setPoints(vn.points),this.lineMesh.setStyle(vn.style)}highlight(){var vn;(vn=this.lineMesh)==null||vn.highlight()}unhighlight(){var vn;(vn=this.lineMesh)==null||vn.unhighlight()}canUndo(){var vn;(vn=this.creatingObject)==null||vn.canUndo()}canRedo(){var vn;(vn=this.creatingObject)==null||vn.canRedo()}undo(){var vn;(vn=this.creatingObject)==null||vn.undo()}redo(){var vn;(vn=this.creatingObject)==null||vn.redo()}create(vn){return U$1(this,null,function*(){this.removeChildren();const yn=new z$g(vn);this.lineMesh=yn,this.add(this.lineMesh),this.creatingObject=J(yn,this.pointSelector,vn),yield this.creatingObject.finished,this.config.defaultAction&&this.editor.enable()})}}function J(cr,vn,yn){var Rn;const Bn=cr.parent;if(!Bn)return;const{promise:Co,resolve:Po,reject:To}=i$d(),Io=(Rn=yn==null?void 0:yn.limit)!=null?Rn:"none",$l=new Oe$1(cr.style);Bn.add($l);const Wl=new Oe$1(v(f$1({},cr.style),{dashed:!0,lengthEnable:!1}));Bn.add(Wl),vn.enable();const Xl=[];let Yl,Zl,ey;const Rm=[],ry=()=>Xl.length>0,_g=()=>Rm.length>0,ty=()=>{ry()&&(Rm.push(Xl.pop()),cr.setPoints(Xl),oy(ey),vn.pointSelectorHelper.magnifier.render())},ny=()=>{_g()&&(Xl.push(Rm.pop()),cr.setPoints(Xl),oy(ey),vn.pointSelectorHelper.magnifier.render())},iy=hy=>{if(!hy)return;Rm.length=0;const my=Xl.length===0?hy.point:Yl.clone();Xl.push(my),cr.setPoints(Xl),Xl.length===2&&(ay(),Po())},oy=hy=>{const my=()=>{$l.setPoints([]),Wl.setPoints([]),vn.pointSelectorHelper.magnifier.render()};if(!(Xl!=null&&Xl.length)||!hy)return my();ey=hy;const ly=Xl.at(-1).clone();Io==="none"?(Yl=hy.point,$l.setPoints([ly,Yl])):Io==="xoz"?(vn.plane=Zl,Zl=Zl!=null?Zl:new Plane().setFromNormalAndCoplanarPoint(new Vector3(0,1,0),Xl[0]),Yl=Zl.projectPoint(hy.point,new Vector3),$l.setPoints([ly,Yl]),Wl.setPoints([Yl,hy.point])):Io==="y"&&(hy.isVirtual?(Yl=w$o({raycaster:hy.raycaster,line:new Line3(Xl[0].clone(),new Vector3(0,1,0).add(Xl[0])),clampToLine:!1}),Wl.setPoints([])):(Yl=new Line3(Xl[0].clone(),new Vector3(0,1,0).add(Xl[0])).closestPointToPoint(hy.point,!1,new Vector3),Wl.setPoints([Yl,hy.point])),$l.setPoints([ly,Yl]))},ay=()=>{vn.off("select",iy),vn.off("intersectionUpdate",oy),vn.off("disable",uy),vn.plane=null,vn.disable(),Bn==null||Bn.remove($l,Wl)},uy=()=>{ay(),Xl.length!==2&&(Bn==null||Bn.remove(cr)),To(new Error("Cancelled"))};return vn.on("select",iy),vn.on("intersectionUpdate",oy),vn.on("disable",uy),{finished:Co,canUndo:ry,canRedo:_g,undo:ty,redo:ny}}var L=Object.defineProperty,B=Object.defineProperties,U=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,g=(cr,vn,yn)=>vn in cr?L(cr,vn,{enumerable:!0,configurable:!0,writable:!0,value:yn}):cr[vn]=yn,a=(cr,vn)=>{for(var yn in vn||(vn={}))_.call(vn,yn)&&g(cr,yn,vn[yn]);if(y)for(var yn of y(vn))x.call(vn,yn)&&g(cr,yn,vn[yn]);return cr},f=(cr,vn)=>B(cr,U(vn)),h=(cr,vn,yn)=>(g(cr,typeof vn!="symbol"?vn+"":vn,yn),yn),m=(cr,vn,yn)=>new Promise((Rn,Bn)=>{var Co=Io=>{try{To(yn.next(Io))}catch($l){Bn($l)}},Po=Io=>{try{To(yn.throw(Io))}catch($l){Bn($l)}},To=Io=>Io.done?Rn(Io.value):Promise.resolve(Io.value).then(Co,Po);To((yn=yn.apply(cr,vn)).next())});const u=class extends E$v{constructor(cr,vn){super(),h(this,"group"),h(this,"theme"),h(this,"five"),h(this,"creatingItem",null),h(this,"undo",()=>{var yn;console.log("undo"),(yn=this.creatingItem)==null||yn.undo(),this.five.needsRender=!0}),h(this,"redo",()=>{var yn;console.log("redo"),(yn=this.creatingItem)==null||yn.redo(),this.five.needsRender=!0}),this.five=cr,this.theme=vn,this.group=new c$C,this.group.name="Sculpt",cr.scene.add(this.group),u.modules.init(cr),K$e("ctrl+z, command+z",this.undo),K$e("ctrl+shift+z, command+shift+z",this.redo),u.modules.fiveDomEvents.addEventListener(this.group,"click",({intersects:yn,origDomEvent:Rn})=>{var Bn;const Co=u$9((Bn=yn==null?void 0:yn[0])==null?void 0:Bn.object,Po=>Po.isSculptObject);return Co&&!Co.editing?this.emit("click",Rn,Co):!1}),window.__SCULPT_DEBUG__=this,window.__SCULPT_MODULES_DEBUG__=u.modules}get data(){return{items:this.items.map(cr=>{try{return cr.data}catch(vn){return console.error(vn),null}}).filter(i$w)}}get items(){return this.group.children}load(cr,vn){var yn;this.clear();const Rn=(yn=cr==null?void 0:cr.items)==null?void 0:yn.map(Bn=>{var Co;const Po=f(a({},Bn),{style:a(a({},(Co=this.theme)==null?void 0:Co[Bn.type.toLowerCase()]),Bn.style)});return Bn.type==="Point"?new B$3(Po,vn):Bn.type==="line"?new ne(Po,vn):Bn.type==="Polyline"?new $(Po,vn):Bn.type==="Polygon"?new ie(Po,vn):Bn.type==="Prism"?new Z(Po,vn):Bn.type==="Rectangle"?new ge(Po,vn):Bn.type==="Circle"?new L$2(Po,vn):Bn.type==="Cylinder"?new Y(Po,vn):Bn.type==="Box"?new ot(Po,vn):null});this.group.add(...Rn),this.five.needsRender=!0}getItemById(cr){return this.items.find(vn=>vn.uuid===cr)}putObject(cr){var vn;this.group.add(cr);const yn=u.modules.object3DHelper,Rn=yn.addObject3DHelper(cr);return(vn=Rn==null?void 0:Rn.moveController)==null||vn.moveByMouse(),yn}createPoint(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.point,cr[0]),this.createItem(B$3,...cr)})}createLine(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.line,cr[0]),this.createItem(ne,...cr)})}createline(...cr){return m(this,null,function*(){this.createLine(...cr)})}createPolyline(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.polyline,cr[0]),this.createItem($,...cr)})}createPolygon(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.polygon,cr[0]),this.createItem(ie,...cr)})}createPrism(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.prism,cr[0]),this.createItem(Z,...cr)})}createRectangle(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.rectangle,cr[0]),this.createItem(ge,...cr)})}createCircle(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.circle,cr[0]),this.createItem(L$2,...cr)})}createCylinder(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.cylinder,cr[0]),this.createItem(Y,...cr)})}createBox(...cr){return m(this,null,function*(){var vn,yn;return Object.assign((vn=cr[0])!=null?vn:{},(yn=this.theme)==null?void 0:yn.box,cr[0]),this.createItem(ot,...cr)})}canUndo(){var cr;return this.creatingItem?(cr=this.creatingItem)==null?void 0:cr.canUndo():!1}canRedo(){var cr;return this.creatingItem?(cr=this.creatingItem)==null?void 0:cr.canRedo():!1}clear(){f$2(this.items,cr=>cr.delete()),this.five.needsRender=!0}createItem(cr,...vn){return m(this,null,function*(){this.creatingItem&&(this.creatingItem.stopCreating(),this.creatingItem=null);const yn=new cr;this.creatingItem=yn,this.group.add(yn);const{promise:Rn,resolve:Bn,reject:Co}=i$d();return yield yn.create(...vn).then((...Po)=>(this.creatingItem=null,Bn(yn),Po)).catch(Po=>{Co(Po),this.group.remove(yn)}),Rn})}};let p=u;h(p,"modules",v$6);c$P();A$z();function PanoTag(){const cr=react.exports.useRef(),vn=useController(),yn=useFiveInstance(),Rn=react.exports.useRef(Wr(yn,{config:{globalConfig:{visibleConfig:{keep:"visible"},unfoldedConfig:{autoUnfold:!1,unfoldDistance:{max:100}}}}}));return react.exports.useEffect(()=>{var Co;if(((Co=vn.configs)==null?void 0:Co.keyframeMap.PanoTag)===!1)return;const Bn=Po=>{if(!Rn.current)return;const{start:To,end:Io,data:$l}=Po,Wl=$l,Xl=Date.now().toString(),Yl="PointTag",Zl="2D",ey=[Wl.vertex.x,Wl.vertex.y,Wl.vertex.z],Rm=(()=>Wl.imgUrl?{id:Xl,pointType:Yl,position:ey,dimensionType:Zl,contentType:"ImageText",stickType:"2DPoint",data:{text:Wl.text,mediaData:[{type:"Image",url:Wl.imgUrl}]}}:{id:Xl,pointType:Yl,position:ey,dimensionType:Zl,contentType:"Text",stickType:"2DPoint",data:{text:Wl.text}})();Rn.current.load({tagList:[Rm]});const ry=Rn.current.getTagById(Xl);ry&&(ry.state.unfolded=!0,Rn.current.updateRenderAllTags()),cr.current=setTimeout(()=>{var ty;const _g=Rn.current.getTagById(Xl);!_g||(_g.state&&(_g.state.unfolded=!1,Rn.current.updateRenderAllTags()),(ty=_g.hooks)==null||ty.on("folded",()=>{setTimeout(()=>{_g.state&&(_g.state.visible=!1,Rn.current.destroyTagById(Xl))},1500)}))},Io-To)};return vn.on(VreoKeyframeEnum.PanoTag,Bn),()=>{vn.off(VreoKeyframeEnum.PanoTag,Bn),cr.current&&clearTimeout(cr.current)}},[vn]),null}var CSS3DObject=function(cr){Object3D.call(this),this.element=cr,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(vn){vn.element instanceof Element&&vn.element.parentNode!==null&&vn.element.parentNode.removeChild(vn.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(cr){CSS3DObject.call(this,cr)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var cr=this,vn,yn,Rn,Bn,Co=new Matrix4,Po={camera:{fov:0,style:""},objects:new WeakMap},To=document.createElement("div");To.style.overflow="hidden",this.domElement=To;var Io=document.createElement("div");Io.style.WebkitTransformStyle="preserve-3d",Io.style.transformStyle="preserve-3d",Io.style.pointerEvents="none",To.appendChild(Io);var $l=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:vn,height:yn}},this.setSize=function(_g,ty){vn=_g,yn=ty,Rn=vn/2,Bn=yn/2,To.style.width=_g+"px",To.style.height=ty+"px",Io.style.width=_g+"px",Io.style.height=ty+"px"};function Wl(_g){return Math.abs(_g)<1e-10?0:_g}function Xl(_g){var ty=_g.elements;return"matrix3d("+Wl(ty[0])+","+Wl(-ty[1])+","+Wl(ty[2])+","+Wl(ty[3])+","+Wl(ty[4])+","+Wl(-ty[5])+","+Wl(ty[6])+","+Wl(ty[7])+","+Wl(ty[8])+","+Wl(-ty[9])+","+Wl(ty[10])+","+Wl(ty[11])+","+Wl(ty[12])+","+Wl(-ty[13])+","+Wl(ty[14])+","+Wl(ty[15])+")"}function Yl(_g,ty){var ny=_g.elements,iy="matrix3d("+Wl(ny[0])+","+Wl(ny[1])+","+Wl(ny[2])+","+Wl(ny[3])+","+Wl(-ny[4])+","+Wl(-ny[5])+","+Wl(-ny[6])+","+Wl(-ny[7])+","+Wl(ny[8])+","+Wl(ny[9])+","+Wl(ny[10])+","+Wl(ny[11])+","+Wl(ny[12])+","+Wl(ny[13])+","+Wl(ny[14])+","+Wl(ny[15])+")";return $l?"translate(-50%,-50%)translate("+Rn+"px,"+Bn+"px)"+ty+iy:"translate(-50%,-50%)"+iy}function Zl(_g,ty,ny,iy){if(_g instanceof CSS3DObject){_g.onBeforeRender(cr,ty,ny);var oy;_g instanceof CSS3DSprite?(Co.copy(ny.matrixWorldInverse),Co.transpose(),Co.copyPosition(_g.matrixWorld),Co.scale(_g.scale),Co.elements[3]=0,Co.elements[7]=0,Co.elements[11]=0,Co.elements[15]=1,oy=Yl(Co,iy)):oy=Yl(_g.matrixWorld,iy);var ay=_g.element,uy=Po.objects.get(_g);if(uy===void 0||uy.style!==oy){ay.style.WebkitTransform=oy,ay.style.transform=oy;var hy={style:oy};$l&&(hy.distanceToCameraSquared=ey(ny,_g)),Po.objects.set(_g,hy)}ay.style.display=_g.visible?"":"none",ay.parentNode!==Io&&Io.appendChild(ay),_g.onAfterRender(cr,ty,ny)}for(var my=0,ly=_g.children.length;my<ly;my++)Zl(_g.children[my],ty,ny,iy)}var ey=function(){var _g=new Vector3,ty=new Vector3;return function(ny,iy){return _g.setFromMatrixPosition(ny.matrixWorld),ty.setFromMatrixPosition(iy.matrixWorld),_g.distanceToSquared(ty)}}();function Rm(_g){var ty=[];return _g.traverse(function(ny){ny instanceof CSS3DObject&&ty.push(ny)}),ty}function ry(_g){for(var ty=Rm(_g).sort(function(ay,uy){var hy=Po.objects.get(ay).distanceToCameraSquared,my=Po.objects.get(uy).distanceToCameraSquared;return hy-my}),ny=ty.length,iy=0,oy=ty.length;iy<oy;iy++)ty[iy].element.style.zIndex=ny-iy}this.render=function(_g,ty){var ny=ty.projectionMatrix.elements[5]*Bn;if(Po.camera.fov!==ny&&(ty.isPerspectiveCamera?(To.style.WebkitPerspective=ny+"px",To.style.perspective=ny+"px"):(To.style.WebkitPerspective="",To.style.perspective=""),Po.camera.fov=ny),_g.autoUpdate===!0&&_g.updateMatrixWorld(),ty.parent===null&&ty.updateMatrixWorld(),ty.isOrthographicCamera)var iy=-(ty.right+ty.left)/2,oy=(ty.top+ty.bottom)/2;var ay=ty.isOrthographicCamera?"scale("+ny+")translate("+Wl(iy)+"px,"+Wl(oy)+"px)"+Xl(ty.matrixWorldInverse):"translateZ("+ny+"px)"+Xl(ty.matrixWorldInverse),uy=ay+"translate("+Rn+"px,"+Bn+"px)";Po.camera.style!==uy&&!$l&&(Io.style.WebkitTransform=uy,Io.style.transform=uy,Po.camera.style=uy),Zl(_g,_g,ty,ay),$l&&ry(_g)}};function evenNumber(cr,vn){const yn=Math.round(cr);return yn%2===0?yn:yn+Number(vn!=null&&vn.smaller?-1:1)}function centerPoint(cr,vn){return new Vector3((cr.x+vn.x)/2,(cr.y+vn.y)/2,(cr.z+vn.z)/2)}const transformPositionToVector3=({x:cr,y:vn,z:yn})=>new Vector3(cr,vn,yn);function createResizeObserver(cr,vn){if(!vn||typeof ResizeObserver=="undefined")return{observe:()=>window.addEventListener("resize",cr),unobserve:()=>window.removeEventListener("resize",cr)};{const yn=new ResizeObserver(cr);return{observe:()=>yn.observe(vn),unobserve:()=>yn.unobserve(vn)}}}const CSS3DRenderPlugin=cr=>{const vn={disposeCallbacks:[]},yn=(...Bn)=>{var cy,fy,vy;const Co=Bn[0].map(dy=>dy instanceof Vector3?dy:transformPositionToVector3(dy)),Po=Bn[1];if((Co==null?void 0:Co.length)<4)return console.error("points must be equal or greater than than 4");if(!((cy=cr==null?void 0:cr.model)!=null&&cy.loaded))return console.error("five.model.loaded is: ",(fy=cr==null?void 0:cr.model)==null?void 0:fy.loaded);const To=cr.getElement();if(!To)return console.error("five.getElement() is "+To);const Io=[],$l=(Po==null?void 0:Po.ratio)||.00216;$l<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const Wl=(Po==null?void 0:Po.dpr)||1,Xl=(Po==null?void 0:Po.mode)||"front",Yl=(vy=Po==null?void 0:Po.autoRender)!=null?vy:!0,Zl=(Po==null?void 0:Po.behindFiveContainer)||To.parentElement||document.body,ey=(Po==null?void 0:Po.container)||document.createElement("div");ey.classList.add("__Dnalogel-plugin--CSS3DRenderPlugin");const{css3DObject:Rm,mesh:ry}=Rn(Co,{ratio:$l,dpr:Wl,container:ey,mode:Xl});let _g;const ty=Xl==="front"&&!vn.frontMode,ny=Xl==="behind"&&!vn.behindMode,iy=!(ty||ny);let oy=!1,ay=null;ny&&(vn.behindMode={scene:new Scene,css3DRenderer:new CSS3DRenderer}),ty&&(vn.frontMode={scene:new Scene,css3DRenderer:new CSS3DRenderer});const{scene:uy,css3DRenderer:hy}=Xl==="behind"?vn.behindMode:vn.frontMode,my=(()=>{if(iy)return()=>{uy.add(Rm)};{const dy=()=>{const gy=evenNumber(To.clientWidth,{smaller:!0}),wy=evenNumber(To.clientHeight,{smaller:!0});hy.setSize(gy,wy)};dy(),_g=createResizeObserver(dy,To),hy.domElement.style.position="absolute",hy.domElement.style.top="0",hy.domElement.style.userSelect="none",hy.domElement.style.pointerEvents="none";const Ay=()=>{oy||(ay=requestAnimationFrame(Ay),hy.render(uy,cr.camera))};return()=>{var gy;uy.add(Rm),(gy=_g==null?void 0:_g.observe)==null||gy.call(_g),Ay(),Xl==="behind"&&ry&&(cr.scene.add(ry),Io.push(()=>ry&&cr.scene.remove(ry)))}}})();ty&&(To.parentElement||document.body).appendChild(hy.domElement),ny&&Zl.appendChild(hy.domElement);const ly=()=>{var dy;return oy=!0,Io.forEach(Ay=>Ay==null?void 0:Ay()),uy.remove(Rm),typeof ay=="number"&&cancelAnimationFrame(ay),uy.children.length===0&&(hy.domElement.remove(),Xl==="front"&&(vn.frontMode=void 0),Xl==="behind"&&(vn.behindMode=void 0),!vn.behindMode&&!vn.frontMode&&((dy=_g==null?void 0:_g.unobserve)==null||dy.call(_g))),!0},sy=vn.disposeCallbacks.findIndex(dy=>dy===ly);return sy!==-1?vn.disposeCallbacks.splice(sy,1):vn.disposeCallbacks.push(ly),Yl&&my(),{container:ey,dispose:ly,css3DObject:Rm,render:Yl?void 0:my}},Rn=(Bn,Co)=>{const{ratio:Po,dpr:To,container:Io,mode:$l}=Co,Wl=Bn[0].distanceTo(Bn[1]),Xl=Bn[1].distanceTo(Bn[2]),Yl=evenNumber(Wl/Po*To),Zl=evenNumber(Xl/Po*To),ey=new CSS3DObject(Io);ey.scale.set(Po,Po,Po),Io.style.width=Yl+"px",Io.style.height=Zl+"px",Io.style.pointerEvents="none";const Rm=centerPoint(Bn[0],Bn[2]),ry=Bn[1].clone().sub(Bn[0]),_g=Bn[2].clone().sub(Bn[1]),ty=new Vector3(0,1,0).angleTo(new Vector3(0,_g.y,_g.z)),ny=new Vector3(1,0,0).angleTo(new Vector3(ry.x,0,ry.z)),iy=ry.angleTo(new Vector3(ry.x,0,ry.z)),oy=(_g.z>0?-1:1)*ty,ay=(ry.z<0?1:-1)*ny,uy=(ry.x>0&&ry.y<0||ry.x<0&&ry.y>0?-1:1)*iy;ey.rotateOnWorldAxis(new Vector3(1,0,0),oy),ey.rotateOnWorldAxis(new Vector3(0,1,0),ay),ey.rotateOnWorldAxis(new Vector3(0,0,1),uy),ey.position.set(Rm.x,Rm.y,Rm.z);let hy;if($l==="behind"){const my=new MeshBasicMaterial({opacity:0,transparent:!1,side:DoubleSide}),ly=new PlaneGeometry(Yl,Zl);hy=new Mesh(ly,my),hy.name="CSS3DRenderPlugin-mesh",hy.position.copy(ey.position),hy.rotation.copy(ey.rotation),hy.scale.copy(ey.scale)}return{css3DObject:ey,mesh:hy}};return{create3DDomContainer:yn,disposeAll:()=>{vn.disposeCallbacks.forEach(Bn=>Bn==null?void 0:Bn()),vn.disposeCallbacks=[]}}},calcPoints=(cr,vn,yn,Rn)=>{const Bn=yn/375,Co=Rn/375,Po=new PlaneGeometry(Bn,Co);if(vn){const ty=new Vector3(vn.x+cr.x,vn.y+cr.y,vn.z+cr.z);Po.lookAt(ty)}const To=new MeshBasicMaterial({color:16776960,side:DoubleSide}),Io=new Mesh(Po,To),$l=cr.clone();Io.position.copy($l);const[Wl,Xl,Yl,Zl]=Io.geometry.vertices,ey=$l.clone().add(Zl),Rm=$l.clone().add(Yl),ry=$l.clone().add(Xl),_g=$l.clone().add(Wl);return[ey,Rm,_g,ry]};function PanoTextLabel(){const cr=react.exports.useRef(),vn=useController(),yn=useFiveInstance(),Rn=react.exports.useRef();return react.exports.useEffect(()=>{var Co;if(((Co=vn.configs)==null?void 0:Co.keyframeMap.PanoTextLabel)===!1)return;const Bn=Po=>{var oy,ay,uy;const{start:To,end:Io,data:$l}=Po,Wl=$l;if($l.text==="")return;const{x:Xl,y:Yl,z:Zl}=Wl.vertex,ey=new Vector3(Xl,Yl,Zl),Rm=new Vector3((oy=Wl.normal)==null?void 0:oy.x,(ay=Wl.normal)==null?void 0:ay.y,(uy=Wl.normal)==null?void 0:uy.z),ry=200,_g=30,ty=calcPoints(ey,Wl.normal&&Rm,ry,_g);Rn.current||(Rn.current=CSS3DRenderPlugin(yn));const ny=Rn.current.create3DDomContainer(ty),iy=ny==null?void 0:ny.css3DObject;if($l.quaternion){const hy=new Quaternion($l.quaternion.x,$l.quaternion.y,$l.quaternion.z,$l.quaternion.w);iy==null||iy.quaternion.copy(hy)}ny!=null&&ny.container&&ReactDOM.render(jsx("div",{className:"PanoTextLabel PanoTextLabel--notHidden",children:jsx("div",{className:"PanoTextLabel-wrapper",children:jsx("div",{style:{fontSize:`${$l.fontSize||16}px`},className:"PanoText-innerText",children:$l.text||""})})}),ny==null?void 0:ny.container),cr.current=setTimeout(()=>{var hy;(hy=Rn.current)==null||hy.disposeAll()},Io-To)};return vn.on(VreoKeyframeEnum.PanoTextLabel,Bn),()=>{vn.off(VreoKeyframeEnum.PanoTextLabel,Bn),cr.current&&clearTimeout(cr.current)}},[vn]),jsx(Fragment,{})}function Prompter(){const[cr,vn]=react.exports.useState(""),[yn,Rn]=react.exports.useState(!0),Bn=react.exports.useRef(null),Co=useController();return react.exports.useEffect(()=>{var To;if(((To=Co.configs)==null?void 0:To.keyframeMap.Prompter)===!1)return;const Po=Io=>{const{start:$l,end:Wl,data:Xl}=Io;vn(Xl.text),Rn(!1),Bn.current&&(clearTimeout(Bn.current),Bn.current=null),Bn.current=setTimeout(()=>{Rn(!0),vn(""),Bn.current&&clearTimeout(Bn.current),Bn.current=null},Wl-$l)};return Co.on(VreoKeyframeEnum.Prompter,Po),()=>{Co.off(VreoKeyframeEnum.Prompter,Po)}},[Co]),jsx("div",{className:classNames("vreo-prompter",{"vreo-prompter--hidden":yn,[`vreo-prompter-left--${Co.agentType}`]:!0}),children:jsx("div",{className:"vreo-prompter-text",children:jsx("div",{className:"vreo-prompter-innerText",children:cr})})})}function UpdateVRPanorama(){const cr=useController(),vn=useFiveInstance(),yn=react.exports.useRef(null),Rn=react.exports.useRef(null),Bn=react.exports.useCallback(()=>{if(Rn.current=null,yn.current){const To=na(yn.current);vn.load(To)}},[]),Co=react.exports.useCallback(()=>{if(yn.current){const To=na(yn.current);Object.assign(window,{$rawWork:To}),vn.load(To)}},[]),Po=react.exports.useCallback(()=>{!Rn.current||vn.load(Rn.current)},[]);return react.exports.useEffect(()=>{const To=Io=>{var Xl,Yl,Zl;!yn.current&&((Xl=vn.work)==null?void 0:Xl.raw.works)&&(yn.current=vn.work.raw.works);const $l=Io.data;if($l.work){Rn.current=na($l.work),vn.load(Rn.current);return}const Wl=(Zl=(Yl=vn.work)==null?void 0:Yl.raw.works)==null?void 0:Zl[0];if(!Wl){console.warn("No raw work data available");return}if($l.dynamic_scene&&!$l.panorama){const Rm=JSON.parse(Wl).panorama,ry=$l.dynamic_scene.images.index;Rm.list[ry]=$l.dynamic_scene.images,$l.panorama=Rm,delete $l.dynamic_scene}Object.assign(window,{$work1:JSON.parse(Wl),$work2:$l,parseWork:na}),Rn.current=na([Wl,$l]),vn.load(Rn.current)};return cr.on(VreoKeyframeEnum.UpdateVRPanorama,To),cr.on(VreoKeyframeEnum.Exit,Bn),cr.on("loaded",Bn),cr.on("paused",Co),cr.on("playing",Po),()=>{cr.off(VreoKeyframeEnum.UpdateVRPanorama,To),cr.off(VreoKeyframeEnum.Exit,Bn),cr.off("loaded",Bn),cr.off("paused",Co),cr.off("playing",Po)}},[]),jsx(Fragment,{})}const inlinePlay=cr=>{if(!cr)return;const vn=()=>{cr.removeEventListener("canplaythrough",vn);try{cr.play()}catch{}};cr.addEventListener("canplaythrough",vn),cr.load()},PI=Math.PI,PI_2=PI*2;function VideoEffect(){const cr=react.exports.useRef(null),vn=react.exports.useRef(),yn=useController(),Rn=react.exports.useRef(),[Bn,Co]=react.exports.useState(!1),Po=useFiveInstance(),To=Io=>{!vn.current||(vn.current.src=Io)};return react.exports.useEffect(()=>{const Io=async Wl=>{const{start:Xl,end:Yl}=Wl,{videoSrc:Zl,fov:ey,direction:Rm,panoIndex:ry,vector:_g}=Wl.data,[ty,ny]=(()=>{if(_g)return[_g.longitude,_g.latitude];if(!Rm)return[0,0];let iy=-Math.atan2(Rm.x,-Rm.z);iy=(iy%PI_2+PI_2)%PI_2;const oy=-Math.asin(Rm.y/1);return[iy,oy]})();Po.setState({fov:ey,panoIndex:ry,longitude:ty,latitude:ny},!0),To(Zl),inlinePlay(vn.current),Co(!0),Rn.current=setTimeout(()=>{var iy;(iy=vn.current)==null||iy.pause(),Co(!1),To("")},Yl-Xl)};yn.on(VreoKeyframeEnum.VideoEffect,Io);const $l=()=>{var Wl;Rn.current&&clearTimeout(Rn.current),(Wl=vn.current)==null||Wl.pause(),Co(!1),To("")};return yn.on("paused",()=>$l()),yn.on("ended",()=>$l()),()=>{yn.off(VreoKeyframeEnum.VideoEffect,Io),Rn.current&&clearTimeout(Rn.current)}},[yn]),react.exports.useEffect(()=>{var $l,Wl;if(!cr.current)return;const Io=((Wl=($l=yn.configs)==null?void 0:$l.videos)==null?void 0:Wl.videoEffect)||document.createElement("video");Io.setAttribute("playsinline","true"),Io.setAttribute("webkit-playsinline","true"),Io.setAttribute("autoplay","true"),Io.setAttribute("key","VideoEffect-video"),Io.setAttribute("class","VideoEffect-video"),vn.current=Io,cr.current.append(vn.current),document.addEventListener("WeixinJSBridgeReady",function(){var Xl;(Xl=vn.current)==null||Xl.play()},!1),cr.current},[]),jsx("div",{ref:cr,className:classNames("VideoEffect",{"VideoEffect--visible":Bn})})}const Preloader={blob:cr=>{const vn=()=>null;return new Promise((yn,Rn)=>{const Bn=new XMLHttpRequest,Co=()=>{Bn.ontimeout=vn,Bn.onreadystatechange=vn,Bn.onprogress=vn,Bn.onabort=vn};Bn.ontimeout=()=>{Rn(new Error("timeout")),Co()},Bn.onreadystatechange=()=>{Bn.readyState===4&&(Bn.status===0&&!Bn.response||(Bn.status===200||Bn.status===0?(yn(Bn.response),Co()):(Rn(new Error("status:"+Bn.status)),Co())))},Bn.open("GET",cr,!0),Bn.responseType="blob",Bn.send(null)})}};class AudioLike extends X0{constructor({duration:yn}={}){super();V1(this,"$timestamp",0);V1(this,"$currentTime",0);V1(this,"$duration",0);V1(this,"stopInterval");V1(this,"muted",!1);V1(this,"src","");yn&&(this.$duration=yn)}setAttribute(yn,Rn){}play(){this.$timestamp===0&&(this.$timestamp=performance.now()),this.$currentTime===this.$duration&&(this.$currentTime=0),this.stopInterval=requestAnimationFrameInterval(()=>this.requestAnimationFrameLoop()),this.emit("play")}pause(){this.stopInterval&&(this.stopInterval(),this.emit("pause"),this.stopInterval=void 0),this.$timestamp=0}requestAnimationFrameLoop(){const yn=performance.now();this.$currentTime=yn-this.$timestamp,this.emit("timeupdate"),this.$currentTime>=this.$duration-10&&(this.$currentTime=this.$duration,this.pause(),this.emit("ended"))}get currentTime(){return this.$currentTime/1e3}set currentTime(yn){this.$currentTime=yn}get duration(){return this.$duration}set duration(yn){this.pause(),this.$duration=yn,this.$timestamp=0,this.$currentTime=0}get ended(){return this.$currentTime===this.$duration}get paused(){return!this.stopInterval}addEventListener(yn,Rn,Bn=!1){this.on(yn,Rn)}removeEventListener(yn,Rn,Bn=!1){this.off(yn,Rn)}}const vertexShader=`
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;
void main(){
  vUv = uv;
  vColorUv = vec2(uv.x / 2.0, uv.y);
  vMaskUv = vec2(0.5 + uv.x / 2.0, uv.y);
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShaderTpl=()=>`
uniform int enable;
uniform sampler2D map;
varying vec2 vUv;
varying vec2 vColorUv;
varying vec2 vMaskUv;

vec3 hsv2rgb(vec3 c) {
  const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec3 rgb2hsv(vec3 c) {
  const vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));

  float d = q.x - min(q.w, q.y);
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + 0.001)), d / (q.x + 0.001), q.x);
}

void main(void) {
  vec3 color = texture2D(map, vUv).xyz;
  float amask = 1.0;

  float ref = color.r;
  if (ref < color.b) ref = color.b;
  amask = color.g - ref + 0.1;
  amask = smoothstep(0.1, 0.3, amask);
  amask = 1.0 - amask;

  vec3 target = rgb2hsv(vec3(0.0 / 255.0, 255.0 / 255.0, 0.0 / 255.0));
  vec3 hsv = rgb2hsv(color);
  float distance = abs(hsv.x - target.x);
  if (distance < 0.15) {
    hsv.y = 0.0;
  }
  color = hsv2rgb(hsv);

  gl_FragColor = vec4(color.rgb, amask * float(enable));
}
`,cacheInstance={};class VideoAgentMesh extends Mesh{constructor(yn,Rn,Bn,Co,Po={preload:!0}){var Zl,ey;if(!Po.videoInstance)if(cacheInstance.videoInstance)Po.videoInstance=cacheInstance.videoInstance;else{const Rm=document.createElement("video");Rm.style.opacity="0",Rm.style.pointerEvents="none",Rm.style.display="none",document.body.append(Rm),Po.videoInstance=Rm,cacheInstance.videoInstance=Rm,Rm.playsInline=!0,Rm.controls=!1}const To=new PlaneGeometry(yn,Rn,Bn,Co),Io=new VideoTexture(Po.videoInstance),$l=new ShaderMaterial({uniforms:{map:{value:Io},enable:{value:0}},vertexShader,fragmentShader:fragmentShaderTpl(),transparent:!0});super(To,$l);V1(this,"options");V1(this,"videoUrl");V1(this,"freeze");V1(this,"paused");V1(this,"audioInstance");V1(this,"audioLikeInstance");V1(this,"$removeEventListener");if(this.options=Po,this.freeze=!1,this.paused=!0,Po.audioInstance)this.audioInstance=Po.audioInstance;else if(cacheInstance.audioInstance)this.audioInstance=cacheInstance.audioInstance;else{const Rm=document.createElement("audio");Rm.crossOrigin="",Rm.muted=!1,Rm.autoplay=!1,Rm.style.display="none",document.body.appendChild(Rm),this.audioInstance=Rm,cacheInstance.audioInstance=Rm}this.audioLikeInstance=new AudioLike,makeObservable(this,{paused:observable});const Wl=Rm=>runInAction(()=>this.paused=Rm),Xl=()=>Wl(!0),Yl=()=>Wl(!1);this.audioInstance.addEventListener("pause",Xl),this.audioInstance.addEventListener("play",Yl),(Zl=this.options.videoInstance)==null||Zl.addEventListener("pause",Xl),(ey=this.options.videoInstance)==null||ey.addEventListener("play",Yl),this.audioLikeInstance.addEventListener("pause",Xl),this.audioLikeInstance.addEventListener("play",Yl),this.$removeEventListener=()=>{var Rm,ry;this.audioInstance.removeEventListener("pause",Xl),this.audioInstance.removeEventListener("play",Yl),(Rm=this.options.videoInstance)==null||Rm.removeEventListener("pause",Xl),(ry=this.options.videoInstance)==null||ry.removeEventListener("play",Yl),this.audioLikeInstance.removeEventListener("pause",Xl),this.audioLikeInstance.removeEventListener("play",Yl)}}get mediaInstance(){return this.videoUrl?getMediaType(this.videoUrl)==="audio"?this.audioInstance:this.material.uniforms.map.value.image:this.audioLikeInstance}async update(yn){if(this.videoUrl===yn)return;this.videoUrl=yn,this.freeze=!0,await this.mediaInstance.pause();const Rn=this.material.uniforms;this.mediaInstance.muted=!0,this.mediaInstance.src=this.options.preload||this.options.preload===void 0||getMediaType(this.videoUrl)==="video"?await URL.createObjectURL(await Preloader.blob(this.videoUrl)):this.videoUrl,this.mediaInstance.setAttribute("data-src",this.videoUrl);const Bn=()=>{this.mediaInstance.currentTime!==0&&(this.freeze=!1,this.mediaInstance.muted=!1,Rn.enable.value=getMediaType(this.videoUrl)?1:0,this.mediaInstance.removeEventListener("timeupdate",Bn,!1))};this.mediaInstance.addEventListener("timeupdate",Bn,!1)}async play(yn="",Rn=0,Bn){return yn=yn||"",Bn&&!yn?(this.currentTime&&(this.mediaInstance.currentTime=Rn),this.mediaInstance.duration=Bn,this.videoUrl="",this.mediaInstance.play(),!0):yn?yn===this.videoUrl?(this.mediaInstance.currentTime=Rn,await this.mediaInstance.play(),!0):(await this.update(yn),this.mediaInstance.pause(),await new Promise(Co=>setTimeout(async()=>{this.mediaInstance.currentTime=Rn,await this.mediaInstance.play(),Co(!0)},20))):(this.videoUrl?await this.mediaInstance.play():console.warn("\u8B66\u544A\uFF1A\u89C6\u9891\u8D44\u6E90\u672A\u521D\u59CB\u5316\u3002"),!0)}get currentTime(){return this.mediaInstance.currentTime*1e3}dispose(){this.$removeEventListener(),cacheInstance.audioInstance&&(document.body.removeChild(cacheInstance.audioInstance),cacheInstance.audioInstance=void 0),cacheInstance.videoInstance&&(document.body.removeChild(cacheInstance.videoInstance),cacheInstance.videoInstance=void 0)}}class VideoAgentScene{constructor(vn,yn){V1(this,"videoAgentMesh");V1(this,"scene",new Scene);V1(this,"camera",new OrthographicCamera(-240,240,135,-135));V1(this,"renderer",new WebGLRenderer({alpha:!0}));V1(this,"disposers",[]);V1(this,"run",()=>{!(this.videoAgentMesh.paused||this.videoAgentMesh.freeze)&&this.videoAgentMesh.currentTime>1e3&&this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.run)});V1(this,"dispose",()=>{var vn;(vn=this.videoAgentMesh)==null||vn.dispose(),this.disposers.forEach(yn=>yn==null?void 0:yn())});if(this.videoAgentMesh=new VideoAgentMesh(480,270,1,1,yn),vn){this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0);const Rn=this.renderer.domElement;Rn.classList.add("VideoAgent-canvas");const Bn=addResizeListener(vn,(Co,Po)=>{this.renderer.setSize(Co*window.devicePixelRatio,Po*window.devicePixelRatio),Rn.style.width=`${Co}px`,Rn.style.height=`${Po}px`});this.disposers.push(Bn),vn.append(Rn),this.scene.add(this.videoAgentMesh),this.run()}}}function VideoAgent(cr){var Co;const vn=react.exports.useRef(null),yn=useController(),Rn=react.exports.useMemo(()=>{var Po;return((Po=yn.avatar)==null?void 0:Po.url)&&yn.avatar.force===!0},[yn.avatar]),Bn=react.exports.useMemo(()=>{var Po;return Rn?!1:((Po=yn.videoAgentScene)==null?void 0:Po.videoAgentMesh.mediaInstance)instanceof HTMLVideoElement},[yn.videoAgentScene,Rn]);return react.exports.useEffect(()=>{if(!vn.current)throw new Error("React \u6E32\u67D3\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5 ...");if(yn.videoAgentScene){console.warn('VideoAgentScene" \u91CD\u590D\u521D\u59CB\u5316\uFF0C\u5DF2\u88AB\u8FC7\u6EE4');return}const Po=new VideoAgentScene(vn.current,cr.options);return yn.videoAgentScene=Po,()=>{var To;yn.dispose(),(To=yn.videoAgentScene)==null||To.dispose()}},[]),jsxs(Fragment,{children:[jsx("div",{className:"Avatar",style:{display:Rn?"block":"none"},children:jsx("div",{className:"Avatar-wrapper ratio-1-1",children:jsx("img",{className:"Avatar-img",src:(Co=yn.avatar)==null?void 0:Co.url,onClick:()=>{var Po;return(Po=cr.onClick)==null?void 0:Po.call(cr)}})})}),jsx("div",{className:classNames("VideoAgent",{hide:!Bn}),children:jsx("div",{className:"VideoAgent-container",children:jsx("div",{className:"VideoAgent-wrapper ratio-16-9",children:jsx("div",{className:"VideoAgent-inner",ref:vn,children:jsx("div",{className:"VideoAgent-play",onClick:()=>{var Po;return(Po=cr.onClick)==null?void 0:Po.call(cr)}})})})})})]})}const blankAudioSrc="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",audioList=[];function getAudio(cr){let vn=audioList.find(yn=>!yn.realSrc||yn.realSrc===blankAudioSrc);return vn||(vn=new IAudio(blankAudioSrc),audioList.push(vn)),cr&&(vn.src=cr),vn}async function waitForBlankAudioGenerated(cr=100,vn=2e3){console.log("waitForBlankAudioGenerated, needGenerate: ",audioList.some(Bn=>!Bn.ended&&Bn.src===blankAudioSrc));const yn=Date.now();let Rn=!1;for(;audioList.some(Bn=>!Bn.ended&&Bn.src===blankAudioSrc)&&!Rn;){if(Date.now()-yn>vn)return Rn=!0,Promise.resolve();await new Promise(Bn=>setTimeout(Bn,cr))}}function generateBlankAudio(cr){const vn=cr-audioList.length;if(!(vn<=0))for(let yn=0;yn<vn;yn++)audioList.push(new IAudio(blankAudioSrc))}function initAudio(cr){cr.inited||(cr.src&&(cr.inited=!0,cr.removeDocumentEventListener()),cr.src===blankAudioSrc&&cr.play())}class IAudio extends Audio{constructor(yn){super(yn);V1(this,"preload","auto");V1(this,"realSrc","");V1(this,"inited",!1);V1(this,"removeDocumentEventListener");this.realSrc=yn!=null?yn:"",super.addEventListener("ended",()=>{this.src=""});const Rn=()=>initAudio(this);document.addEventListener("click",Rn),document.addEventListener("touchend",Rn),this.removeDocumentEventListener=()=>{document.removeEventListener("click",Rn),document.removeEventListener("touchend",Rn)}}get src(){return super.src}set src(yn){super.src=yn,this.realSrc=yn}}function BgMusic(){const cr=useController();return react.exports.useEffect(()=>{const vn=async(yn,Rn)=>{const{start:Bn,end:Co}=yn,Po=(Rn-Bn)/1e3;if(Po<0||Po>=yn.end-yn.start)return;const To=getAudio(yn.data.url);To.currentTime=Math.max(0,Po),To.play();const Io=()=>{To.removeEventListener("pause",$l),To.pause(),To.src=""};To.addEventListener("ended",()=>{Io()});const $l=()=>{To.realSrc===yn.data.url&&To.play()};To.addEventListener("pause",$l),cr.once("paused",()=>{Io()})};return cr.on(VreoKeyframeEnum.BgMusic,vn),()=>{cr.off(VreoKeyframeEnum.BgMusic,vn)}}),jsx(Fragment,{})}const defaultPrefix="https://vr-public.realsee-cdn.cn/release/static/image/release/",WAVES={single:{width:766,height:60,frames:20,hevc:"vapor/static/wave-single.140d197f4838c130b69e87dfd0705479.mov",vp9:"vapor/static/wave-single.eda65de390a830193fff40d1f1255555.webm",png:"vapor/static/wave-single.f51aade2a6e1c59211698a1a24e6135f.png"},double:{width:766,height:60,frames:16,hevc:"vapor/static/wave-double.3e6d73050ee6958cc3060b107ebe5f39.mov",vp9:"/vapor/static/wave-double.77dfe8548ebcb3f3d336785d4fe9c7b2.webm",png:"/vapor/static/wave-double.ab4fe7d8a70395109ca4f759af7bd53f.png"},solid:{width:1126,height:90,frames:48,hevc:"vapor/static/wave-solid.cf68912a93275d07aa6b5097ea11fdda.mov",vp9:"vapor/static/wave-solid.64438b63cbb346906d066bb7b8dc3e20.webm",png:"vapor/static/wave-solid.6969d7f3f2f44f7ac1ade30e65660cb1.png"},swap:{width:2250,height:180,frames:41,hevc:"vapor/static/wave-swap.b38f22e2cf84ee21e9be35f7f56c9cfc.mov",vp9:"vapor/static/wave-swap.c02e4b94cf05aecf6e7a0023bc7bb90f.webm",png:"vapor/static/wave-swap.772ba526a7210dcc01567062c6319545.png"},expand:{width:2250,height:180,frames:45,hevc:"vapor/static/wave-expand.9529956c5954740cd4c9d07d51e32822.mov",vp9:"vapor/static/wave-expand.a0d2a0074001cd3d4fea56818c6d3c38.webm",png:"vapor/static/wave-expand.62fcf27b445533e6eb1b17bab5eafa0d.png"}},userAgent=typeof navigator!="undefined"?navigator.userAgent:"",isAppleDevice=/(iPhone|iPad|iPod)/i.test(userAgent),isSafari=/safari/i.test(userAgent)&&!/chrome/i.test(userAgent)&&/version/i.test(userAgent),isMicroMessenger=/microMessenger/i.test(userAgent),canPlayHevc=isAppleDevice||isSafari,canPlayVp9=typeof MediaSource!="undefined"&&MediaSource.isTypeSupported("video/webm; codecs=vp9");function Wave(cr){const vn=React.useMemo(()=>{var Co;const Bn=(Co=cr==null?void 0:cr.appearance)!=null?Co:"solid";return WAVES[Bn]},[cr==null?void 0:cr.appearance]),yn=React.useMemo(()=>vn.height/vn.width,[vn]);let Rn=null;return isMicroMessenger?Rn=jsx(KeyframeWaveContent,{wave:vn,prefix:cr==null?void 0:cr.staticPrefix}):canPlayHevc?Rn=jsx(VideoWaveContent,{format:"hevc",wave:vn,prefix:cr==null?void 0:cr.staticPrefix}):canPlayVp9?Rn=jsx(VideoWaveContent,{format:"vp9",wave:vn,prefix:cr==null?void 0:cr.staticPrefix}):Rn=jsx(KeyframeWaveContent,{wave:vn,prefix:cr==null?void 0:cr.staticPrefix}),jsx("div",{className:"vreo-wave",onClick:cr==null?void 0:cr.onClick,children:jsx("div",{style:{position:"relative",width:"100%",paddingTop:`${yn*100}%`},children:jsx("div",{style:{position:"absolute",width:"100%",height:"100%",left:0,top:0},children:Rn})})})}const VideoWaveContent=({wave:cr,format:vn,prefix:yn=defaultPrefix})=>{const Rn=react.exports.useRef(null),[Bn,Co]=react.exports.useState(!1),[Po,To]=react.exports.useState(!1),Io=yn+cr[vn];react.exports.useEffect(()=>{Co(!1)},[Io]);const $l=react.exports.useCallback(()=>{Rn.current&&Rn.current.play(),Co(!0)},[]),Wl=react.exports.useCallback(()=>{To(!0)},[]);return Po?jsx(KeyframeWaveContent,{wave:cr,prefix:yn}):jsx("video",{style:{opacity:Bn?1:0},preload:"auto",ref:Rn,width:"100%",height:"100%",playsInline:!0,autoPlay:!0,onCanPlay:$l,onError:Wl,muted:!0,loop:!0,src:Io})},KeyframeWaveContent=({wave:cr,prefix:vn=defaultPrefix})=>{const yn=vn+cr.png;return jsx("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${yn})`,backgroundSize:"100%",animationName:"vreo-wave-keyframes",animationTimingFunction:`steps(${cr.frames-1})`,animationDuration:`${cr.frames/25}s`,animationIterationCount:"infinite"}})},AppView=observer(({controller:cr})=>{var vn,yn,Rn,Bn;return jsx("div",{className:classNames("vreo-panel",{"vreo-panel--hidden":!cr.visible}),children:jsxs("div",{className:"vreo-panel-inner",children:[jsx(Wave,{onClick:(vn=cr.configs)==null?void 0:vn.onWaveClick,appearance:(yn=cr.waveAppearance)!=null?yn:"single",staticPrefix:cr.configs.waveStaticPrefix}),jsx(VideoAgent,{onClick:()=>{var Co;if((Co=cr.configs)!=null&&Co.onAvatarClick){cr.configs.onAvatarClick();return}cr.playing?cr.setPlaying(!1):cr.setPlaying(!0)},options:((Rn=cr.configs)==null?void 0:Rn.videoAgentMeshOptions)||{}}),jsx(Prompter,{}),(Bn=cr.configs)==null?void 0:Bn.customPanelChildren]})})});function App(){const cr=useController();return jsxs(Fragment,{children:[jsxs(Fragment,{children:[jsx(ResizeObserver$1,{}),jsx(CameraMovement,{}),jsx(ModelVideo,{}),jsx(UpdateVRPanorama,{}),jsx(VideoEffect,{}),jsx(PanoTag,{}),jsx(PanoTextLabel,{}),jsx(InfoPanel,{}),jsx(PanoEffect,{}),jsx(BgMusic,{})]}),jsx(AppView,{controller:cr})]})}const DrawerView=observer(({controller:cr})=>{var Rn;const vn="400px",yn=(()=>{var Co;const Bn=(Co=cr.drawerConfig)==null?void 0:Co.height;return Bn?typeof Bn=="number"?Bn+"px":Bn:"max-content"})();return jsx("div",{className:classNames("vreo-drawer",{"vreo-drawer-visible":cr.drawerConfig&&cr.drawerConfig.content}),onClick:()=>cr.openDrawer(!1),children:jsx("div",{className:"vreo-drawer-inner",style:{height:yn,maxHeight:vn},children:((Rn=cr.drawerConfig)==null?void 0:Rn.content)||""})})});function Drawer(){const cr=useController();return jsx(DrawerView,{controller:cr})}const PopUpView=observer(({controller:cr})=>jsx("div",{className:classNames("vreo-PopUp",{"vreo-PopUp-visible":cr.popUp}),onClick:()=>cr.openPopUp(!1),children:jsx("div",{className:"vreo-PopUp-inner",children:cr.popUp||""})}));function PopUp(){const cr=useController();return jsx(PopUpView,{controller:cr})}const DefaultAudioCacheLength=3,id="vreo-app-dhjskadhksahdjskahdjksa";var i$,o$;const audioCacheLength=Number((o$=(i$=location.search.match(/audio_cache=(\d+)/))==null?void 0:i$[1])!=null?o$:DefaultAudioCacheLength);class Player extends X0{constructor(yn,Rn={}){var Bn;super();V1(this,"$five");V1(this,"controller");V1(this,"configs");if(this.$five=yn,generateBlankAudio(audioCacheLength),Rn.container||(Rn.container=Rn.containter),!Rn.container){const Co=document.getElementById(id);Co&&(reactDom.exports.unmountComponentAtNode(Co),Co.remove());const Po=document.createElement("div");Po.id=id,Rn.container=Po;const To=(Bn=yn.getElement())==null?void 0:Bn.parentNode;To?To.append(Po):document.body.append(Po)}Rn.container.classList.contains("vreo-app")||Rn.container.classList.add("vreo-app"),this.configs=Object.freeze(Object.assign({keyframeMap:{}},Rn)),this.controller=new Controller({five:yn,container:Rn.container,configs:this.configs}),reactDom.exports.render(jsxs(ControllerContext.Provider,{value:this.controller,children:[jsx(App,{}),jsx(Drawer,{}),jsx(PopUp,{}),this.configs.customKeyframes&&this.configs.customKeyframes.map((Co,Po)=>jsx(Co,{subscribe:{on:(To,Io)=>this.on(To,Io),once:(To,Io)=>this.once(To,Io),off:(To,Io)=>this.off(To,Io)},five:yn},Po))]}),Rn.container),reaction(()=>this.controller.ended,Co=>{Co&&this.emit("paused",!0)}),reaction(()=>this.controller.playing,Co=>{this.controller.ended||this.emit(Co?"playing":"paused")})}async load(yn,Rn=0,Bn=!1,Co=!1){var Po,To,Io,$l;if(this.controller.clear(),this.controller.setLoading(!0),Co&&(yn=JSON.parse(JSON.stringify(yn))),this.controller.stopInterval&&(this.controller.stopInterval(),this.controller.stopInterval=void 0),this.controller.vreoUnit=yn,(Po=this.controller.mediaInstance)==null||Po.pause(),this.$five.imageOptions.size&&((To=this.configs.imageOptions)==null?void 0:To.size)&&this.$five.imageOptions.size>this.configs.imageOptions.size&&(this.$five.imageOptions.size=this.configs.imageOptions.size),Bn||Bn===void 0&&this.configs.autoPreload){const Wl=yn.keyframes.filter(Yl=>!(Yl.type!==VreoKeyframeEnum.CameraMovement||Yl.data.panoIndex===void 0)).reduce((Yl,Zl)=>{const ey=Zl.data.panoIndex;return Yl[ey]||(Yl[ey]=!0),Yl},{}),Xl=Object.keys(Wl);for(let Yl=0;Yl<Xl.length;Yl++)await this.$five.preloadPano(Number(Xl[Yl]))}return this.emit("loaded",yn),this.controller.emit("loaded",yn),(Io=this.controller.videoAgentScene)!=null&&Io.videoAgentMesh.mediaInstance&&(this.controller.videoAgentScene.videoAgentMesh.mediaInstance.currentTime=Rn/1e3),this.controller.setAvatar(yn.video.avatar),await waitForBlankAudioGenerated(),await(($l=this.controller.videoAgentScene)==null?void 0:$l.videoAgentMesh.play(yn.video.url,Rn/1e3,yn.video.duration)),this.controller.setEnded(!1),this.play(),this.controller.run((Wl,Xl)=>this.emit(Wl,Xl,this.controller.currentTime)),this.controller.setLoading(!1),!0}get paused(){return!this.controller.playing}play(yn){var Rn;return this.controller.playing||(yn&&this.controller.mediaInstance&&(this.controller.mediaInstance.currentTime=yn/1e3),Object.assign(window,{$vreoController:this.controller}),this.controller.setEnded(!1),this.controller.setPlaying(!0),(Rn=this.controller.vreoUnit)==null||Rn.keyframes.forEach(Bn=>{Bn.type===VreoKeyframeEnum.BgMusic&&(Bn.parsed=!1)})),!0}setAppearance(yn){this.controller.setAppearance(yn)}pause(){this.controller.setPlaying(!1)}show(){this.controller.setVisible(!0)}hide(){this.controller.setVisible(!1)}getCurrentTime(){return this.controller.currentTime}dispose(){this.controller.dispose(),this.configs.container&&reactDom.exports.unmountComponentAtNode(this.configs.container)}}console.log(`
    \u250F\u2501\u2501\u2501\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u250F\u2513\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u250F\u2501\u2513\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2503\u2503\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2503\u2517\u2501\u251B\u2503\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u2501\u2503\u2503\u2501\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513\u250F\u2501\u2501\u2513
    \u2503\u250F\u2513\u250F\u251B\u2503\u250F\u2513\u2503\u2517\u2501\u2513\u2503\u2501\u2503\u2503\u2501\u2503\u2501\u2501\u252B\u2503\u250F\u2513\u2503\u2503\u250F\u2513\u2503
    \u2503\u2503\u2503\u2517\u2513\u2503\u2503\u2501\u252B\u2503\u2517\u251B\u2517\u2513\u2503\u2517\u2513\u2523\u2501\u2501\u2503\u2503\u2503\u2501\u252B\u2503\u2503\u2501\u252B
    \u2517\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u2501\u251B\u2517\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B\u2517\u2501\u2501\u251B
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
    \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`);var _default="";export{Ae$2 as A,CSS3DRenderPlugin as C,Fragment as F,Ge$2 as G,Ie$2 as I,Player as P,ReactDOM as R,VreoKeyframeEnum as V,jsxs as a,Vector3 as b,Raycaster as c,reactDom as d,jsx as j,na as n,react as r,tweenProgress as t};
