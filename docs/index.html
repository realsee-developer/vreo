<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Vreo</title><meta name="description" content="Documentation for Vreo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Vreo</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> Vreo</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#realseevreo" id="realseevreo" style="color: inherit; text-decoration: none;">
  <h1>@realsee/vreo</h1>
</a>
<p><a href="https://www.npmjs.com/package/@realsee/vreo"><img src="https://img.shields.io/npm/v/@realsee/vreo.svg?style=flat-square&logo=npm&label=npm%20install%20@realsee/vreo" alt="npm version"></a></p>
<p><strong>Vreo</strong> (VR Video 缩写) 是基于如视三维渲染引擎 <a href="https://unpkg.com/@realsee/five/docs/index.html">Five</a> 和 用户界面构建库 <a href="https://reactjs.org/">React</a> 实现的如视 3D 空间剧本播放器。</p>

<a href="#特性" id="特性" style="color: inherit; text-decoration: none;">
  <h2>特性</h2>
</a>
<ul>
<li>相机运镜：支持 3D 空间全景游走、旋转、分镜切换等类似于电影运镜的效果。</li>
<li>定制模块：提供弹幕提词、全景标签、视频广告、空间文本等模块定制能力。</li>
<li>内置特效：提供全景特效、视频特效、户改动画、模型特效等丰富动态效果。</li>
<li>独特的虚拟形象渲染能力：支持用户在 Web 页面模拟虚拟形象，配合语音讲解、相机运镜和定制特效，可实现智能化讲房功能。</li>
</ul>
<blockquote>
<p>访问 <a href="https://vrlab-static.ljcdn.com/release/web/vreo/index.html?v=1">Vreo Demo</a> 体验功能。</p>
</blockquote>

<a href="#安装说明" id="安装说明" style="color: inherit; text-decoration: none;">
  <h2>安装说明</h2>
</a>
<p>推荐使用 <code>npm</code> 或 <code>yarn</code> 的方式进行安装。由于 <code>@realsee/vreo</code> 依赖 <a href="https://unpkg.com/@realsee/five/docs/index.html">Five</a> 和 <a href="https://reactjs.org/">React</a> ，请务必同时安装相关依赖：</p>
<pre><code class="hljs language-bash"><span class="hl-0">$ npm install @realsee/vreo @realsee/five react react-dom --save</span><br/><span class="hl-1"># or</span><br/><span class="hl-0">$ yarn add @realsee/vreo @realsee/five react react-dom</span>
</code></pre>

<a href="#快速上手" id="快速上手" style="color: inherit; text-decoration: none;">
  <h2>快速上手</h2>
</a>
<pre><code class="hljs language-jsx"><span class="hl-2">import</span><span class="hl-0"> </span><span class="hl-3">*</span><span class="hl-0"> </span><span class="hl-2">as</span><span class="hl-0"> </span><span class="hl-4">React</span><span class="hl-0"> </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;react&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-4">Five</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/five&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-4">Player</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/vreo&#39;</span><br/><br/><span class="hl-1">// 创建 Five 实例</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">five</span><span class="hl-0"> = </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-7">Five</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-1">/* Five 配置项 */</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// 创建 Player 实例</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">vreoplayer</span><span class="hl-0"> = </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-7">Player</span><span class="hl-0">(</span><span class="hl-4">five</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// 异步请求剧本数据</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">vreoUnit</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-7">fetch</span><span class="hl-0">(</span><span class="hl-5">&#39;api/**/**&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// 加载剧本数据（剧本数据见下文）</span><br/><span class="hl-4">vreoplayer</span><span class="hl-0">.</span><span class="hl-7">load</span><span class="hl-0">(</span><span class="hl-4">vreoUnit</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// 播放</span><br/><span class="hl-4">vreoplayer</span><span class="hl-0">.</span><span class="hl-7">play</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// 暂停</span><br/><span class="hl-4">vreoplayer</span><span class="hl-0">.</span><span class="hl-7">pause</span><span class="hl-0">()</span>
</code></pre>
<p>引入样式：</p>
<pre><code class="hljs language-css"><span class="hl-2">@import</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/vreo/stylesheets/default.css&#39;</span><span class="hl-0">;</span>
</code></pre>

<a href="#react-context-amp-hooks-模式使用" id="react-context-amp-hooks-模式使用" style="color: inherit; text-decoration: none;">
  <h2>React Context &amp; Hooks 模式使用</h2>
</a>
<p><strong>Vreo</strong> 支持 <a href="https://reactjs.org/docs/context.html">React Context</a> 与 <a href="https://reactjs.org/docs/hooks-intro.html">Hooks</a> 相配合的模式使用，简单样例如下：</p>
<pre><code class="hljs language-jsx"><span class="hl-2">import</span><span class="hl-0"> </span><span class="hl-3">*</span><span class="hl-0"> </span><span class="hl-2">as</span><span class="hl-0"> </span><span class="hl-4">React</span><span class="hl-0"> </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;react&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> </span><span class="hl-3">*</span><span class="hl-0"> </span><span class="hl-2">as</span><span class="hl-0"> </span><span class="hl-4">ReactDOM</span><span class="hl-0"> </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;react-dom&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-4">Five</span><span class="hl-0">, </span><span class="hl-4">Work</span><span class="hl-0">, </span><span class="hl-4">parseWork</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/five&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-4">createFiveProvider</span><span class="hl-0">, </span><span class="hl-4">FiveCanvas</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/five/react&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-4">VreoProvider</span><span class="hl-0">, </span><span class="hl-4">useVreoAction</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-5">&#39;@realsee/vreo/lib/react&#39;</span><br/><br/><span class="hl-1">// 创建 FiveProvider</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">FiveProvider</span><span class="hl-0"> = </span><span class="hl-7">createFiveProvider</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-1">/* Five 配置项 */</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// 播放组件</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-7">PlayButton</span><span class="hl-0">: </span><span class="hl-8">React</span><span class="hl-0">.</span><span class="hl-8">FC</span><span class="hl-0"> = () </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">const</span><span class="hl-0"> { </span><span class="hl-6">load</span><span class="hl-0">, </span><span class="hl-6">play</span><span class="hl-0">, </span><span class="hl-6">pause</span><span class="hl-0"> } = </span><span class="hl-7">useVreoAction</span><span class="hl-0">()</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><br/><span class="hl-0">      </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-3">{async</span><span class="hl-12"> () </span><span class="hl-3">=&gt;</span><span class="hl-12"> {</span><br/><span class="hl-12">        </span><span class="hl-1">// 获取讲房数据</span><br/><span class="hl-12">        </span><span class="hl-3">const</span><span class="hl-12"> </span><span class="hl-6">vreoUnit</span><span class="hl-12"> </span><span class="hl-0">=</span><span class="hl-12"> </span><span class="hl-2">await</span><span class="hl-12"> </span><span class="hl-7">fetch</span><span class="hl-12">(</span><span class="hl-5">&#39;api/**/**&#39;</span><span class="hl-12">)</span><br/><span class="hl-12">        </span><span class="hl-1">// 载入数据</span><br/><span class="hl-12">        </span><span class="hl-2">await</span><span class="hl-12"> </span><span class="hl-7">load</span><span class="hl-12">(</span><span class="hl-4">vreoUnit</span><span class="hl-12">)</span><br/><span class="hl-12">        </span><span class="hl-1">// 播放</span><br/><span class="hl-12">        </span><span class="hl-7">play</span><span class="hl-12">()</span><br/><span class="hl-12">        </span><span class="hl-1">// 暂停</span><br/><span class="hl-12">        </span><span class="hl-7">pause</span><span class="hl-12">()</span><br/><span class="hl-12">      }</span><span class="hl-3">}</span><br/><span class="hl-0">    </span><span class="hl-9">&gt;</span><br/><span class="hl-0">      讲解</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  )</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-7">App</span><span class="hl-0">: </span><span class="hl-8">React</span><span class="hl-0">.</span><span class="hl-8">FC</span><span class="hl-0"> = () </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-8">FiveProvider</span><span class="hl-0"> </span><span class="hl-11">initialWork</span><span class="hl-0">=</span><span class="hl-3">{</span><span class="hl-4">work</span><span class="hl-3">}</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-8">FiveCanvas</span><span class="hl-0"> </span><span class="hl-11">width</span><span class="hl-0">=</span><span class="hl-3">{</span><span class="hl-4">width</span><span class="hl-3">}</span><span class="hl-0"> </span><span class="hl-11">height</span><span class="hl-0">=</span><span class="hl-3">{</span><span class="hl-4">height</span><span class="hl-3">}</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-8">VreoProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-3">{</span><span class="hl-1">/* React 渲染的其他模块 */</span><span class="hl-3">}</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-8">PlayButton</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;/</span><span class="hl-8">VreoProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/</span><span class="hl-8">FiveProvider</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  )</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-4">ReactDOM</span><span class="hl-0">.</span><span class="hl-7">render</span><span class="hl-0">(</span><span class="hl-9">&lt;</span><span class="hl-8">App</span><span class="hl-9">&gt;&lt;/</span><span class="hl-8">App</span><span class="hl-9">&gt;</span><span class="hl-0">, </span><span class="hl-4">document</span><span class="hl-0">.</span><span class="hl-7">getElementById</span><span class="hl-0">(</span><span class="hl-5">&#39;app&#39;</span><span class="hl-0">))</span>
</code></pre>

<a href="#剧本数据结构" id="剧本数据结构" style="color: inherit; text-decoration: none;">
  <h2>剧本数据结构</h2>
</a>

<a href="#结构描述" id="结构描述" style="color: inherit; text-decoration: none;">
  <h3>结构描述</h3>
</a>
<p><strong>VreoUnit</strong> 是剧本数据结构的最小单元，用以描述音视频、剧本帧序列等信息。</p>
<p><strong>VreoUnit</strong> 数据结构样例如下：</p>
<pre><code class="hljs language-json"><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-13">&quot;categoryId&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;257ac7a8-b00a-4a1b-88b8-76f93362c0dc&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-13">&quot;categoryText&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;讲房源户型&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-13">&quot;video&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    </span><span class="hl-13">&quot;duration&quot;</span><span class="hl-0">: </span><span class="hl-14">106278</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-13">&quot;start&quot;</span><span class="hl-0">: </span><span class="hl-14">0</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-13">&quot;end&quot;</span><span class="hl-0">: </span><span class="hl-14">106278</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-13">&quot;url&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;//url-host/***/xxx.mp4&quot;</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-13">&quot;keyframes&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;uuid&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;ac70621b-4e00-442e-311c-befb5bd3f87f&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;PanoTextLabel&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;start&quot;</span><span class="hl-0">: </span><span class="hl-14">27060</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;end&quot;</span><span class="hl-0">: </span><span class="hl-14">42351</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;parsed&quot;</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;data&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;text&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;戏剧人生&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;vertex&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">-0.8879207391906447</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">0.3829881941156301</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.8068334368800785</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;fontSize&quot;</span><span class="hl-0">: </span><span class="hl-14">16</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;uuid&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;ec1bbe11-ffee-4fe1-5823-46b6cad4e7d8&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;ModelVideo&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;start&quot;</span><span class="hl-0">: </span><span class="hl-14">17452</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;end&quot;</span><span class="hl-0">: </span><span class="hl-14">74901</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;parsed&quot;</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;data&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;videoSrc&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;//url-host/release/web/videos/tv_ads/360/009.mp4&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;videoPosterSrc&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;//url-host/release/web/videos/posters/002.9203cf99.jpg&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;vertexs&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">0.07203829865103632</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">0.8215782650149405</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.7994856093044471</span><br/><span class="hl-0">          },</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">0.08971605109132826</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">-0.2930481300912484</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.798372293401237</span><br/><span class="hl-0">          },</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">2.367235599574914</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">-0.296526676652792</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.7934272967593008</span><br/><span class="hl-0">          },</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">2.3601990173854315</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">0.8691239478108612</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.7949685793090848</span><br/><span class="hl-0">          }</span><br/><span class="hl-0">        ]</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;uuid&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;f9245b1b-ca8d-4a6c-5616-d53cd9cf8c3c&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;PanoTag&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;start&quot;</span><span class="hl-0">: </span><span class="hl-14">988</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;end&quot;</span><span class="hl-0">: </span><span class="hl-14">69803</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;parsed&quot;</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;data&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;text&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;一蓑烟雨任平生&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;vertex&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">3.4119340861387304</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">0.1283617853353691</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">-0.6533418002816742</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;Image&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;imgUrl&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;//url-host/release/web/cat_music.f68fb9bb.gif&quot;</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;uuid&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;d16138f3-fad1-412e-2df0-f66b61e0b38e&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;PanoEffect&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;start&quot;</span><span class="hl-0">: </span><span class="hl-14">2598</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;end&quot;</span><span class="hl-0">: </span><span class="hl-14">7955</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;parsed&quot;</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-13">&quot;data&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;twoVertexs&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">0.04138994383630945</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.323667318114752</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">2.7873723200461096</span><br/><span class="hl-0">          },</span><br/><span class="hl-0">          {</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;x&quot;</span><span class="hl-0">: </span><span class="hl-14">-2.804123324007684</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;y&quot;</span><span class="hl-0">: </span><span class="hl-14">-1.3249364005914073</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-13">&quot;z&quot;</span><span class="hl-0">: </span><span class="hl-14">3.068840643805892</span><br/><span class="hl-0">          }</span><br/><span class="hl-0">        ],</span><br/><span class="hl-0">        </span><span class="hl-13">&quot;effect&quot;</span><span class="hl-0">: </span><span class="hl-5">&quot;Distance&quot;</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ]</span><br/><span class="hl-0">}</span>
</code></pre>
<p><strong>VreoUnit</strong> 的字段说明：</p>
<ul>
<li><p><code>categoryId</code>、<code>categoryText</code>: 讲解的类别标识符和描述。</p>
</li>
<li><p><code>video</code>: 虚拟视频人物视频素材。</p>
<ul>
<li><code>duration</code>: 视频长度。</li>
<li><code>start</code>: 开始时间戳。</li>
<li><code>end</code>: 结束时间戳。</li>
<li><code>url</code>: 视频 CDN 地址。</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意事项：<strong>视频素材必须是绿幕背景</strong>。</p>
</blockquote>
<ul>
<li><p><code>keyframes</code>：剧本帧集合。</p>
<ul>
<li><code>uuid</code>: 剧本帧 <code>uuid</code>。</li>
<li><code>type</code>: 剧本帧类别枚举，详见下文 <strong>剧本关键帧</strong> 部分。</li>
<li><code>start</code>: 触发时间戳。</li>
<li><code>end</code>: 结束时间戳。</li>
<li><code>parsed</code>: 解析状态。</li>
<li><code>data</code>: 当前剧本帧类别数据依赖。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>如何获取剧本数据？</strong>
剧本服务及剧本编辑器公开版本尚在开发中，敬请期待。</p>
</blockquote>

<a href="#剧本帧说明" id="剧本帧说明" style="color: inherit; text-decoration: none;">
  <h3>剧本帧说明</h3>
</a>
<p><strong>Vreo</strong> 剧本行为是按照剧本关键帧来执行的，即根据音视频播放的时间序列命中剧本帧后，按照剧本帧的类型执行相机运镜、全景标签、模型特效等动作。</p>
<blockquote>
<p>目前支持多种类型剧本关键帧（详见：<a href="https://realsee-developer.github.io/vreo/enums/Player.VreoKeyframeEnum.html">Player.VreoKeyframeEnum</a>），后续会不断完善及添加新的剧本关键帧行为。</p>
</blockquote>
<p><strong>Vreo</strong> 内置了每一个剧本关键帧的 UI 动作行为，通过 <code>vreoplayer.on()</code> 可监听到相应的剧本关键帧的命中时机，并按需添加业务逻辑。</p>

<a href="#剧本关键帧" id="剧本关键帧" style="color: inherit; text-decoration: none;">
  <h3>剧本关键帧</h3>
</a>

<a href="#相机运镜" id="相机运镜" style="color: inherit; text-decoration: none;">
  <h4>相机运镜</h4>
</a>
<p><strong>相机运镜</strong> 控制相机实现镜头位移、旋转、模态切换等模拟如视 3D 空间漫游的能力。</p>
<pre><code class="hljs language-ts"><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">CameraMovementData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">effect</span><span class="hl-0">: </span><span class="hl-8">CameraMovementEffect</span><span class="hl-0"> </span><span class="hl-1">// 运镜效果</span><br/><span class="hl-0">  </span><span class="hl-4">mode</span><span class="hl-0">: </span><span class="hl-8">Mode</span><span class="hl-0"> </span><span class="hl-1">// Five.Mode</span><br/><span class="hl-0">  </span><span class="hl-4">panoIndex</span><span class="hl-0">: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 目标点位</span><br/><span class="hl-0">  </span><span class="hl-4">loop</span><span class="hl-0">?: </span><span class="hl-8">boolean</span><span class="hl-0"> </span><span class="hl-1">// 是否循环</span><br/><span class="hl-0">  </span><span class="hl-4">rotateSpeed</span><span class="hl-0">?: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 旋转速度</span><br/><span class="hl-0">  </span><span class="hl-4">rotation</span><span class="hl-0">?: </span><span class="hl-8">Rotation</span><span class="hl-0"> </span><span class="hl-1">// 旋转方向</span><br/><span class="hl-0">} &amp; </span><span class="hl-8">Partial</span><span class="hl-0">&lt;</span><span class="hl-8">Pose</span><span class="hl-0">&gt; </span><span class="hl-1">// Partial&lt;Pose&gt; 视角信息</span>
</code></pre>

<a href="#弹幕提词" id="弹幕提词" style="color: inherit; text-decoration: none;">
  <h4>弹幕提词</h4>
</a>
<p><strong>弹幕提词</strong> 提供语音字幕文本，多用于强调某一句文本。</p>
<pre><code class="hljs language-ts"><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">PrompterData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">text</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 文本，建议长度 32(汉字) 以内</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#空间文本" id="空间文本" style="color: inherit; text-decoration: none;">
  <h4>空间文本</h4>
</a>
<p><strong>空间文本</strong> 在如视 3D 模型空间中某一个三维坐标点上展示的一段文本。</p>
<pre><code class="hljs language-ts"><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">PanoTextLabelData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">text</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 空间文本</span><br/><span class="hl-0">  </span><span class="hl-4">vertex</span><span class="hl-0">: </span><span class="hl-8">Vertex</span><span class="hl-0"> </span><span class="hl-1">// 三维坐标点</span><br/><span class="hl-0">  </span><span class="hl-4">fontSize</span><span class="hl-0">?: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 文本字体大小，默认 16px</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#信息面板" id="信息面板" style="color: inherit; text-decoration: none;">
  <h4>信息面板</h4>
</a>
<p><strong>信息面板</strong> 以弹框或抽屉面板的形式展示图片、音视频等素材内容。</p>
<pre><code class="hljs language-ts"><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">InfoPanelData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">type</span><span class="hl-0">: </span><span class="hl-8">InfoPanelTypeEnum</span><span class="hl-0"> </span><span class="hl-1">// 面板类型</span><br/><span class="hl-0">  </span><span class="hl-4">url</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 素材静态资源地址</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#全景标签" id="全景标签" style="color: inherit; text-decoration: none;">
  <h4>全景标签</h4>
</a>
<p><strong>全景标签</strong> 在如视 3D 空间全景游走模态下展示文本、图片、视频等标签内容。全景标签的出现会附带一个生长动画。</p>
<pre><code class="hljs language-ts"><span class="hl-3">enum</span><span class="hl-0"> </span><span class="hl-8">PanoTagEnum</span><span class="hl-0"> { </span><span class="hl-1">// 标签类型枚举</span><br/><span class="hl-0">  </span><span class="hl-6">Text</span><span class="hl-0"> = </span><span class="hl-5">&#39;Text&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Image</span><span class="hl-0"> = </span><span class="hl-5">&#39;Image&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">PanoTagData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">type</span><span class="hl-0">: </span><span class="hl-8">PanoTagEnum</span><span class="hl-0"> </span><span class="hl-1">// 标签类型</span><br/><span class="hl-0">  </span><span class="hl-4">text</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 文本</span><br/><span class="hl-0">  </span><span class="hl-4">vertex</span><span class="hl-0">: </span><span class="hl-8">Vertex</span><span class="hl-0"> </span><span class="hl-1">// 标签在全景游走模态中的三维坐标点</span><br/><span class="hl-0">  </span><span class="hl-4">imgUrl</span><span class="hl-0">?: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 图片资源地址</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#全景特效" id="全景特效" style="color: inherit; text-decoration: none;">
  <h4>全景特效</h4>
</a>
<p><strong>全景特效</strong> 指在如视 3D 空间全景游走模态下执行某些特效。</p>
<p>目前仅支持测量长度的特效。比如，在全景游走模态下标注出窗户的宽度信息。</p>
<pre><code class="hljs language-ts"><span class="hl-3">enum</span><span class="hl-0"> </span><span class="hl-8">PanoEffectEnum</span><span class="hl-0"> { </span><span class="hl-1">// 特效枚举</span><br/><span class="hl-0">  </span><span class="hl-1">// 两点距离</span><br/><span class="hl-0">  </span><span class="hl-6">Distance</span><span class="hl-0"> = </span><span class="hl-5">&#39;Distance&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">PanoEffectData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">effect</span><span class="hl-0">: </span><span class="hl-8">PanoEffectEnum</span><span class="hl-0"> </span><span class="hl-1">// 特效类型</span><br/><span class="hl-0">  </span><span class="hl-4">twoVertexs</span><span class="hl-0">: [</span><span class="hl-8">Vertex</span><span class="hl-0">, </span><span class="hl-8">Vertex</span><span class="hl-0">] </span><span class="hl-1">// 两个点坐标值</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#模型特效" id="模型特效" style="color: inherit; text-decoration: none;">
  <h4>模型特效</h4>
</a>
<blockquote>
<p>规划中，敬请期待。</p>
</blockquote>

<a href="#户改动画" id="户改动画" style="color: inherit; text-decoration: none;">
  <h4>户改动画</h4>
</a>
<blockquote>
<p>规划中，敬请期待。</p>
</blockquote>

<a href="#更换全景" id="更换全景" style="color: inherit; text-decoration: none;">
  <h4>更换全景</h4>
</a>
<p><strong>更换全景</strong> 可以动态修改某个点位的全景图片。</p>
<pre><code class="hljs language-ts"><span class="hl-2">export</span><span class="hl-0"> </span><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">UpdateVRPanoramaData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">_signature</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 签名字段</span><br/><span class="hl-0">  </span><span class="hl-4">allow_hosts</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0">[] </span><span class="hl-1">// 域名白名单</span><br/><span class="hl-0">  </span><span class="hl-4">certificate</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 签名值</span><br/><span class="hl-0">  </span><span class="hl-4">expire_at</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 过期时间</span><br/><span class="hl-0">  </span><span class="hl-1">// 动态场景</span><br/><span class="hl-0">  </span><span class="hl-4">dynamic_scene</span><span class="hl-0">?: {</span><br/><span class="hl-0">    </span><span class="hl-4">images</span><span class="hl-0">: { </span><span class="hl-1">// 切换全景的图片</span><br/><span class="hl-0">      </span><span class="hl-4">index</span><span class="hl-0">: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 对应的全景点位</span><br/><span class="hl-0">      </span><span class="hl-4">right</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">      </span><span class="hl-4">left</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">      </span><span class="hl-4">up</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">      </span><span class="hl-4">down</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">      </span><span class="hl-4">front</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">      </span><span class="hl-4">back</span><span class="hl-0">: </span><span class="hl-8">string</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  [</span><span class="hl-4">key</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0">]: </span><span class="hl-8">any</span><br/><span class="hl-0">}</span>
</code></pre>
<p>比如，您可以拍摄某个房间开灯与关灯两个场景的全景，通过动态切换可以营造出全景中开灯、关灯的效果。</p>
<p>同样的，如果您在同一个位置分别拍摄了早晨、上午、中午、下午、傍晚、深夜的全景图片，就可以营造出该位置在一天中不同时间段的光照效果。</p>

<a href="#视频广告" id="视频广告" style="color: inherit; text-decoration: none;">
  <h4>视频广告</h4>
</a>
<p><strong>视频广告</strong> 如果在如视 3D 空间模型中有电视、显示器、壁画等这类物品，可以在这些矩形区域播放一段视频。</p>
<pre><code class="hljs language-ts"><span class="hl-1">// 四个顶点元组</span><br/><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">QuadrangleVertexs</span><span class="hl-0"> = [</span><span class="hl-8">Vertex</span><span class="hl-0">, </span><span class="hl-8">Vertex</span><span class="hl-0">, </span><span class="hl-8">Vertex</span><span class="hl-0">, </span><span class="hl-8">Vertex</span><span class="hl-0">]</span><br/><br/><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">ModelVideoData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">videoSrc</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 视频素材</span><br/><span class="hl-0">  </span><span class="hl-4">videoPosterSrc</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 视频封面</span><br/><span class="hl-0">  </span><span class="hl-4">vertexs</span><span class="hl-0">: </span><span class="hl-8">QuadrangleVertexs</span><span class="hl-0"> </span><span class="hl-1">// 视频映射在模型中的坐标点</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#视频特效" id="视频特效" style="color: inherit; text-decoration: none;">
  <h4>视频特效</h4>
</a>
<p><strong>视频特效</strong> 是基于视频实现的动画效果，视频的每一帧都与 VR 全景位置完全贴合。</p>
<p>某些变形动画（比如开冰箱动作这类）可以采用视频特效来实现。</p>
<pre><code class="hljs language-ts"><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-8">VideoEffectData</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-4">videoSrc</span><span class="hl-0">: </span><span class="hl-8">string</span><span class="hl-0"> </span><span class="hl-1">// 视频地址</span><br/><span class="hl-0">  </span><span class="hl-4">panoIndex</span><span class="hl-0">: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 所处点位</span><br/><span class="hl-0">  </span><span class="hl-4">fov</span><span class="hl-0">: </span><span class="hl-8">number</span><span class="hl-0"> </span><span class="hl-1">// 镜头远近</span><br/><span class="hl-0">  </span><span class="hl-4">direction</span><span class="hl-0">?: </span><span class="hl-8">Vertex</span><span class="hl-0"> </span><span class="hl-1">// 方向向量: {x, y, z} 形式</span><br/><span class="hl-0">  </span><span class="hl-4">vector</span><span class="hl-0">?: </span><span class="hl-8">Pick</span><span class="hl-0">&lt;</span><span class="hl-8">Pose</span><span class="hl-0">, </span><span class="hl-5">&#39;longitude&#39;</span><span class="hl-0"> | </span><span class="hl-5">&#39;latitude&#39;</span><span class="hl-0">&gt; </span><span class="hl-1">// 方向向量: 向量坐标</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#自定义剧本帧行为" id="自定义剧本帧行为" style="color: inherit; text-decoration: none;">
  <h3>自定义剧本帧行为</h3>
</a>
<p><strong>Vreo</strong> 中的剧本帧行为是内置的，但如果您有强烈的诸如统一 UI 风格类的诉求，不想使用内置剧本逻辑，也可以通过 <code>new Player(five, {keyframeMap: {PanoTag: false}})</code> 来禁用内置剧本帧解析，然后通过监听剧本帧触发事件来补充您自己的剧本 UI 行为。</p>
<p>比如，禁用全景标签的解析：</p>
<pre><code class="hljs language-ts"><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">vreoplayer</span><span class="hl-0"> = </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-7">Player</span><span class="hl-0">(</span><span class="hl-4">five</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-4">keyframeMap:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">PanoTag:</span><span class="hl-0"> </span><span class="hl-3">false</span><span class="hl-0"> </span><span class="hl-1">/* 禁用了全景标签的解析 */</span><span class="hl-0">,</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-7">callback</span><span class="hl-0"> = (</span><span class="hl-4">keyframe</span><span class="hl-0">: </span><span class="hl-8">VreoKeyframe</span><span class="hl-0">) </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">/* 您自己的业务逻辑：全景标签的模块 */</span><br/><span class="hl-0">}</span><br/><span class="hl-1">// 添加监听</span><br/><span class="hl-4">vreoplayer</span><span class="hl-0">.</span><span class="hl-7">on</span><span class="hl-0">(</span><span class="hl-4">VreoKeyframeEnum</span><span class="hl-0">.</span><span class="hl-4">PanoTag</span><span class="hl-0">, </span><span class="hl-4">callback</span><span class="hl-0">)</span><br/><span class="hl-1">// 关闭监听</span><br/><span class="hl-4">vreoplayer</span><span class="hl-0">.</span><span class="hl-7">off</span><span class="hl-0">(</span><span class="hl-4">VreoKeyframeEnum</span><span class="hl-0">.</span><span class="hl-4">PanoTag</span><span class="hl-0">, </span><span class="hl-4">callback</span><span class="hl-0">)</span>
</code></pre>
<p>目前仅 DOM 相关的剧本关键帧支持自定义，与 3D 空间模型相关的内容（如：运镜、特效等）尚不支持用户自定义，请采用内置方案。</p>

<a href="#自定义剧本帧" id="自定义剧本帧" style="color: inherit; text-decoration: none;">
  <h3>自定义剧本帧</h3>
</a>
<p>除了默认内置的剧本帧之外，<strong>Vreo</strong> 支持自定义剧本帧。你可以将剧本帧类型设定为 <code>VreoKeyframeEnum.Custom</code>，然后通过监听 <code>vreoplayer.on(VreoKeyframeEnum.Custom, callback)</code> 剧本事件去解析你自己定义的剧本行为。</p>
<p>此外，你也可以实现个 <code>React</code> 组件，例如：</p>
<pre><code class="hljs language-ts"><span class="hl-2">export</span><span class="hl-0"> </span><span class="hl-3">function</span><span class="hl-0"> </span><span class="hl-7">YourCustomKeyframe</span><span class="hl-0">(</span><span class="hl-4">props</span><span class="hl-0">: </span><span class="hl-8">CustomVreoKeyframeProps</span><span class="hl-0">) {</span><br/><br/><span class="hl-0">  </span><span class="hl-4">React</span><span class="hl-0">.</span><span class="hl-7">useEffect</span><span class="hl-0">(() </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">props</span><span class="hl-0">.</span><span class="hl-4">subscribe</span><span class="hl-0">.</span><span class="hl-7">on</span><span class="hl-0">(</span><span class="hl-4">VreoKeyframeEnum</span><span class="hl-0">.</span><span class="hl-4">Custom</span><span class="hl-0">, </span><span class="hl-4">callback</span><span class="hl-0">)</span><br/><br/><span class="hl-0">    </span><span class="hl-2">return</span><span class="hl-0"> () </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">props</span><span class="hl-0">.</span><span class="hl-4">subscribe</span><span class="hl-0">.</span><span class="hl-7">off</span><span class="hl-0">(</span><span class="hl-4">VreoKeyframeEnum</span><span class="hl-0">.</span><span class="hl-4">Custom</span><span class="hl-0">, </span><span class="hl-4">callback</span><span class="hl-0">)</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  }, [])</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> &lt;&gt;...&lt;/&gt;</span><br/><span class="hl-0">}</span>
</code></pre>
<p>然后通过 <code>new Player(five, {customKeyframes: [YourCustomKeyframe]})</code> 配置参数添加进去即可。</p>

<a href="#注意事项" id="注意事项" style="color: inherit; text-decoration: none;">
  <h2>注意事项</h2>
</a>

<a href="#兼容性" id="兼容性" style="color: inherit; text-decoration: none;">
  <h3>兼容性</h3>
</a>
<p>浏览器对视频自动播放有严格的限制（播放行为必须由用户触发），<code>@realsee/vreo</code> 内部已经最大限度规避了浏览器对视频自动播放的限制。</p>
<p>但是规避 <a href="https://developers.weixin.qq.com/community/develop/doc/000e640d77cfa001132a6cb8456c01">微信浏览器中音视频自动播放限制</a> 需要调用 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html">微信 JS-SDK</a> 触发<code>WeixinJSBridgeReady</code>事件后才能实现。</p>
<p>虽然 <code>@realsee/vreo</code> 并不依赖 <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html">微信 JS-SDK</a> ，但您可以提前创建<code>HTMLVideoElement</code>实例，然后再在初始化<code>vreoplayer</code>实例时通过配置项指定 <code>HTMLVideoElement</code>实例，可参考：</p>
<pre><code class="hljs language-ts"><span class="hl-1">// 创建 HTMLVideoElement 实例</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-7">creatVideo</span><span class="hl-0"> = (): </span><span class="hl-8">HTMLVideoElement</span><span class="hl-0"> </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">video</span><span class="hl-0"> = </span><span class="hl-4">document</span><span class="hl-0">.</span><span class="hl-7">createElement</span><span class="hl-0">(</span><span class="hl-5">&#39;video&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-0">  </span><span class="hl-4">video</span><span class="hl-0">.</span><span class="hl-7">setAttribute</span><span class="hl-0">(</span><span class="hl-5">&#39;playsinline&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;true&#39;</span><span class="hl-0">)</span><br/><span class="hl-0">  </span><span class="hl-4">video</span><span class="hl-0">.</span><span class="hl-7">setAttribute</span><span class="hl-0">(</span><span class="hl-5">&#39;webkit-playsinline&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;true&#39;</span><span class="hl-0">)</span><br/><span class="hl-0">  </span><span class="hl-4">video</span><span class="hl-0">.</span><span class="hl-7">setAttribute</span><span class="hl-0">(</span><span class="hl-5">&#39;autoplay&#39;</span><span class="hl-0">, </span><span class="hl-5">&#39;true&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-0">  </span><span class="hl-2">return</span><span class="hl-0"> </span><span class="hl-4">video</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-1">// 提前创建 Video</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">videoEffect</span><span class="hl-0"> = </span><span class="hl-7">creatVideo</span><span class="hl-0">()</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">modelTVVideo</span><span class="hl-0"> = </span><span class="hl-7">creatVideo</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// 微信限制：需在 WeixinJSBridgeReady 回调中触发一次</span><br/><span class="hl-4">document</span><span class="hl-0">.</span><span class="hl-7">addEventListener</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-5">&#39;WeixinJSBridgeReady&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  () </span><span class="hl-3">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">videoEffect</span><span class="hl-0">.</span><span class="hl-7">play</span><span class="hl-0">()</span><br/><span class="hl-0">    </span><span class="hl-4">modelTVVideo</span><span class="hl-0">.</span><span class="hl-7">play</span><span class="hl-0">()</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-3">false</span><br/><span class="hl-0">)</span><br/><br/><span class="hl-1">// 创建 Player 实例</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">vreoplayer</span><span class="hl-0"> = </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-7">Player</span><span class="hl-0">(</span><span class="hl-4">five</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-4">videos:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">videoEffect</span><span class="hl-0">, </span><span class="hl-1">// 视频特效 时依赖的 HTMLVideoElement</span><br/><span class="hl-0">    </span><span class="hl-4">modelTVVideo</span><span class="hl-0">, </span><span class="hl-1">// 视频广告 时依赖的 HTMLVideoElement</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">})</span>
</code></pre>
<p>这样，在微信浏览器或微信小程序 <code>WebView</code> 中也能正常使用自动播效果。</p>

<a href="#api-文档" id="api-文档" style="color: inherit; text-decoration: none;">
  <h2>API 文档</h2>
</a>
<p>详细的 API 文档请参考：<a href="https://realsee-developer.github.io/vreo/index.html">Vreo API</a> 。</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/Player.html">Player</a></li><li class=" tsd-kind-module"><a href="modules/custom.html">custom</a></li><li class=" tsd-kind-module"><a href="modules/fivePlugins.html">five<wbr/>Plugins</a></li><li class=" tsd-kind-module"><a href="modules/react.html">react</a></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="assets/main.js"></script></body></html>